var jO=Object.defineProperty;var VR=i=>{throw TypeError(i)};var tV=(i,t,e)=>t in i?jO(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var Z=(i,t,e)=>tV(i,typeof t!="symbol"?t+"":t,e),LE=(i,t,e)=>t.has(i)||VR("Cannot "+e);var d=(i,t,e)=>(LE(i,t,"read from private field"),e?e.call(i):t.get(i)),R=(i,t,e)=>t.has(i)?VR("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),C=(i,t,e,n)=>(LE(i,t,"write to private field"),n?n.call(i,e):t.set(i,e),e),D=(i,t,e)=>(LE(i,t,"access private method"),e);var pn=(i,t,e,n)=>({set _(s){C(i,t,s,e)},get _(){return d(i,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();function eV(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var kE={exports:{}},kp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HR;function nV(){if(HR)return kp;HR=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,s,r){var a=null;if(r!==void 0&&(a=""+r),s.key!==void 0&&(a=""+s.key),"key"in s){r={};for(var u in s)u!=="key"&&(r[u]=s[u])}else r=s;return s=r.ref,{$$typeof:i,type:n,key:a,ref:s!==void 0?s:null,props:r}}return kp.Fragment=t,kp.jsx=e,kp.jsxs=e,kp}var GR;function iV(){return GR||(GR=1,kE.exports=nV()),kE.exports}var W=iV(),UE={exports:{}},Pt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zR;function sV(){if(zR)return Pt;zR=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function E(O){return O===null||typeof O!="object"?null:(O=v&&O[v]||O["@@iterator"],typeof O=="function"?O:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,w={};function x(O,J,ot){this.props=O,this.context=J,this.refs=w,this.updater=ot||b}x.prototype.isReactComponent={},x.prototype.setState=function(O,J){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,J,"setState")},x.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function N(){}N.prototype=x.prototype;function I(O,J,ot){this.props=O,this.context=J,this.refs=w,this.updater=ot||b}var L=I.prototype=new N;L.constructor=I,_(L,x.prototype),L.isPureReactComponent=!0;var U=Array.isArray;function k(){}var B={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function H(O,J,ot){var ut=ot.ref;return{$$typeof:i,type:O,key:J,ref:ut!==void 0?ut:null,props:ot}}function j(O,J){return H(O.type,J,O.props)}function et(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function at(O){var J={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ot){return J[ot]})}var ft=/\/+/g;function lt(O,J){return typeof O=="object"&&O!==null&&O.key!=null?at(""+O.key):J.toString(36)}function vt(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(k,k):(O.status="pending",O.then(function(J){O.status==="pending"&&(O.status="fulfilled",O.value=J)},function(J){O.status==="pending"&&(O.status="rejected",O.reason=J)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function G(O,J,ot,ut,pt){var Ct=typeof O;(Ct==="undefined"||Ct==="boolean")&&(O=null);var _t=!1;if(O===null)_t=!0;else switch(Ct){case"bigint":case"string":case"number":_t=!0;break;case"object":switch(O.$$typeof){case i:case t:_t=!0;break;case p:return _t=O._init,G(_t(O._payload),J,ot,ut,pt)}}if(_t)return pt=pt(O),_t=ut===""?"."+lt(O,0):ut,U(pt)?(ot="",_t!=null&&(ot=_t.replace(ft,"$&/")+"/"),G(pt,J,ot,"",function(yi){return yi})):pt!=null&&(et(pt)&&(pt=j(pt,ot+(pt.key==null||O&&O.key===pt.key?"":(""+pt.key).replace(ft,"$&/")+"/")+_t)),J.push(pt)),1;_t=0;var ze=ut===""?".":ut+":";if(U(O))for(var Ee=0;Ee<O.length;Ee++)ut=O[Ee],Ct=ze+lt(ut,Ee),_t+=G(ut,J,ot,Ct,pt);else if(Ee=E(O),typeof Ee=="function")for(O=Ee.call(O),Ee=0;!(ut=O.next()).done;)ut=ut.value,Ct=ze+lt(ut,Ee++),_t+=G(ut,J,ot,Ct,pt);else if(Ct==="object"){if(typeof O.then=="function")return G(vt(O),J,ot,ut,pt);throw J=String(O),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return _t}function $(O,J,ot){if(O==null)return O;var ut=[],pt=0;return G(O,ut,"","",function(Ct){return J.call(ot,Ct,pt++)}),ut}function it(O){if(O._status===-1){var J=O._result;J=J(),J.then(function(ot){(O._status===0||O._status===-1)&&(O._status=1,O._result=ot)},function(ot){(O._status===0||O._status===-1)&&(O._status=2,O._result=ot)}),O._status===-1&&(O._status=0,O._result=J)}if(O._status===1)return O._result.default;throw O._result}var bt=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Et={map:$,forEach:function(O,J,ot){$(O,function(){J.apply(this,arguments)},ot)},count:function(O){var J=0;return $(O,function(){J++}),J},toArray:function(O){return $(O,function(J){return J})||[]},only:function(O){if(!et(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Pt.Activity=y,Pt.Children=Et,Pt.Component=x,Pt.Fragment=e,Pt.Profiler=s,Pt.PureComponent=I,Pt.StrictMode=n,Pt.Suspense=h,Pt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,Pt.__COMPILER_RUNTIME={__proto__:null,c:function(O){return B.H.useMemoCache(O)}},Pt.cache=function(O){return function(){return O.apply(null,arguments)}},Pt.cacheSignal=function(){return null},Pt.cloneElement=function(O,J,ot){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ut=_({},O.props),pt=O.key;if(J!=null)for(Ct in J.key!==void 0&&(pt=""+J.key),J)!z.call(J,Ct)||Ct==="key"||Ct==="__self"||Ct==="__source"||Ct==="ref"&&J.ref===void 0||(ut[Ct]=J[Ct]);var Ct=arguments.length-2;if(Ct===1)ut.children=ot;else if(1<Ct){for(var _t=Array(Ct),ze=0;ze<Ct;ze++)_t[ze]=arguments[ze+2];ut.children=_t}return H(O.type,pt,ut)},Pt.createContext=function(O){return O={$$typeof:a,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:r,_context:O},O},Pt.createElement=function(O,J,ot){var ut,pt={},Ct=null;if(J!=null)for(ut in J.key!==void 0&&(Ct=""+J.key),J)z.call(J,ut)&&ut!=="key"&&ut!=="__self"&&ut!=="__source"&&(pt[ut]=J[ut]);var _t=arguments.length-2;if(_t===1)pt.children=ot;else if(1<_t){for(var ze=Array(_t),Ee=0;Ee<_t;Ee++)ze[Ee]=arguments[Ee+2];pt.children=ze}if(O&&O.defaultProps)for(ut in _t=O.defaultProps,_t)pt[ut]===void 0&&(pt[ut]=_t[ut]);return H(O,Ct,pt)},Pt.createRef=function(){return{current:null}},Pt.forwardRef=function(O){return{$$typeof:u,render:O}},Pt.isValidElement=et,Pt.lazy=function(O){return{$$typeof:p,_payload:{_status:-1,_result:O},_init:it}},Pt.memo=function(O,J){return{$$typeof:f,type:O,compare:J===void 0?null:J}},Pt.startTransition=function(O){var J=B.T,ot={};B.T=ot;try{var ut=O(),pt=B.S;pt!==null&&pt(ot,ut),typeof ut=="object"&&ut!==null&&typeof ut.then=="function"&&ut.then(k,bt)}catch(Ct){bt(Ct)}finally{J!==null&&ot.types!==null&&(J.types=ot.types),B.T=J}},Pt.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},Pt.use=function(O){return B.H.use(O)},Pt.useActionState=function(O,J,ot){return B.H.useActionState(O,J,ot)},Pt.useCallback=function(O,J){return B.H.useCallback(O,J)},Pt.useContext=function(O){return B.H.useContext(O)},Pt.useDebugValue=function(){},Pt.useDeferredValue=function(O,J){return B.H.useDeferredValue(O,J)},Pt.useEffect=function(O,J){return B.H.useEffect(O,J)},Pt.useEffectEvent=function(O){return B.H.useEffectEvent(O)},Pt.useId=function(){return B.H.useId()},Pt.useImperativeHandle=function(O,J,ot){return B.H.useImperativeHandle(O,J,ot)},Pt.useInsertionEffect=function(O,J){return B.H.useInsertionEffect(O,J)},Pt.useLayoutEffect=function(O,J){return B.H.useLayoutEffect(O,J)},Pt.useMemo=function(O,J){return B.H.useMemo(O,J)},Pt.useOptimistic=function(O,J){return B.H.useOptimistic(O,J)},Pt.useReducer=function(O,J,ot){return B.H.useReducer(O,J,ot)},Pt.useRef=function(O){return B.H.useRef(O)},Pt.useState=function(O){return B.H.useState(O)},Pt.useSyncExternalStore=function(O,J,ot){return B.H.useSyncExternalStore(O,J,ot)},Pt.useTransition=function(){return B.H.useTransition()},Pt.version="19.2.4",Pt}var qR;function U_(){return qR||(qR=1,UE.exports=sV()),UE.exports}var rt=U_(),BE={exports:{}},Up={},FE={exports:{}},OE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YR;function oV(){return YR||(YR=1,(function(i){function t(G,$){var it=G.length;G.push($);t:for(;0<it;){var bt=it-1>>>1,Et=G[bt];if(0<s(Et,$))G[bt]=$,G[it]=Et,it=bt;else break t}}function e(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var $=G[0],it=G.pop();if(it!==$){G[0]=it;t:for(var bt=0,Et=G.length,O=Et>>>1;bt<O;){var J=2*(bt+1)-1,ot=G[J],ut=J+1,pt=G[ut];if(0>s(ot,it))ut<Et&&0>s(pt,ot)?(G[bt]=pt,G[ut]=it,bt=ut):(G[bt]=ot,G[J]=it,bt=J);else if(ut<Et&&0>s(pt,it))G[bt]=pt,G[ut]=it,bt=ut;else break t}}return $}function s(G,$){var it=G.sortIndex-$.sortIndex;return it!==0?it:G.id-$.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var a=Date,u=a.now();i.unstable_now=function(){return a.now()-u}}var h=[],f=[],p=1,y=null,v=3,E=!1,b=!1,_=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function L(G){for(var $=e(f);$!==null;){if($.callback===null)n(f);else if($.startTime<=G)n(f),$.sortIndex=$.expirationTime,t(h,$);else break;$=e(f)}}function U(G){if(_=!1,L(G),!b)if(e(h)!==null)b=!0,k||(k=!0,at());else{var $=e(f);$!==null&&vt(U,$.startTime-G)}}var k=!1,B=-1,z=5,H=-1;function j(){return w?!0:!(i.unstable_now()-H<z)}function et(){if(w=!1,k){var G=i.unstable_now();H=G;var $=!0;try{t:{b=!1,_&&(_=!1,N(B),B=-1),E=!0;var it=v;try{e:{for(L(G),y=e(h);y!==null&&!(y.expirationTime>G&&j());){var bt=y.callback;if(typeof bt=="function"){y.callback=null,v=y.priorityLevel;var Et=bt(y.expirationTime<=G);if(G=i.unstable_now(),typeof Et=="function"){y.callback=Et,L(G),$=!0;break e}y===e(h)&&n(h),L(G)}else n(h);y=e(h)}if(y!==null)$=!0;else{var O=e(f);O!==null&&vt(U,O.startTime-G),$=!1}}break t}finally{y=null,v=it,E=!1}$=void 0}}finally{$?at():k=!1}}}var at;if(typeof I=="function")at=function(){I(et)};else if(typeof MessageChannel<"u"){var ft=new MessageChannel,lt=ft.port2;ft.port1.onmessage=et,at=function(){lt.postMessage(null)}}else at=function(){x(et,0)};function vt(G,$){B=x(function(){G(i.unstable_now())},$)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(G){G.callback=null},i.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<G?Math.floor(1e3/G):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_next=function(G){switch(v){case 1:case 2:case 3:var $=3;break;default:$=v}var it=v;v=$;try{return G()}finally{v=it}},i.unstable_requestPaint=function(){w=!0},i.unstable_runWithPriority=function(G,$){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var it=v;v=G;try{return $()}finally{v=it}},i.unstable_scheduleCallback=function(G,$,it){var bt=i.unstable_now();switch(typeof it=="object"&&it!==null?(it=it.delay,it=typeof it=="number"&&0<it?bt+it:bt):it=bt,G){case 1:var Et=-1;break;case 2:Et=250;break;case 5:Et=1073741823;break;case 4:Et=1e4;break;default:Et=5e3}return Et=it+Et,G={id:p++,callback:$,priorityLevel:G,startTime:it,expirationTime:Et,sortIndex:-1},it>bt?(G.sortIndex=it,t(f,G),e(h)===null&&G===e(f)&&(_?(N(B),B=-1):_=!0,vt(U,it-bt))):(G.sortIndex=Et,t(h,G),b||E||(b=!0,k||(k=!0,at()))),G},i.unstable_shouldYield=j,i.unstable_wrapCallback=function(G){var $=v;return function(){var it=v;v=$;try{return G.apply(this,arguments)}finally{v=it}}}})(OE)),OE}var XR;function rV(){return XR||(XR=1,FE.exports=oV()),FE.exports}var VE={exports:{}},Kn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $R;function aV(){if($R)return Kn;$R=1;var i=U_();function t(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(h,f,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:h,containerInfo:f,implementation:p}}var a=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Kn.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return r(h,f,null,p)},Kn.flushSync=function(h){var f=a.T,p=n.p;try{if(a.T=null,n.p=2,h)return h()}finally{a.T=f,n.p=p,n.d.f()}},Kn.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(h,f))},Kn.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},Kn.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,y=u(p,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,E=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?n.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:E}):p==="script"&&n.d.X(h,{crossOrigin:y,integrity:v,fetchPriority:E,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Kn.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);n.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(h)},Kn.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,y=u(p,f.crossOrigin);n.d.L(h,p,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Kn.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=u(f.as,f.crossOrigin);n.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(h)},Kn.requestFormReset=function(h){n.d.r(h)},Kn.unstable_batchedUpdates=function(h,f){return h(f)},Kn.useFormState=function(h,f,p){return a.H.useFormState(h,f,p)},Kn.useFormStatus=function(){return a.H.useHostTransitionStatus()},Kn.version="19.2.4",Kn}var KR;function lV(){if(KR)return VE.exports;KR=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),VE.exports=aV(),VE.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WR;function uV(){if(WR)return Up;WR=1;var i=rV(),t=U_(),e=lV();function n(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)l+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function r(o){var l=o,c=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(c=l.return),o=l.return;while(o)}return l.tag===3?c:null}function a(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function u(o){if(o.tag===31){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function h(o){if(r(o)!==o)throw Error(n(188))}function f(o){var l=o.alternate;if(!l){if(l=r(o),l===null)throw Error(n(188));return l!==o?null:o}for(var c=o,m=l;;){var T=c.return;if(T===null)break;var S=T.alternate;if(S===null){if(m=T.return,m!==null){c=m;continue}break}if(T.child===S.child){for(S=T.child;S;){if(S===c)return h(T),o;if(S===m)return h(T),l;S=S.sibling}throw Error(n(188))}if(c.return!==m.return)c=T,m=S;else{for(var M=!1,P=T.child;P;){if(P===c){M=!0,c=T,m=S;break}if(P===m){M=!0,m=T,c=S;break}P=P.sibling}if(!M){for(P=S.child;P;){if(P===c){M=!0,c=S,m=T;break}if(P===m){M=!0,m=S,c=T;break}P=P.sibling}if(!M)throw Error(n(189))}}if(c.alternate!==m)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?o:l}function p(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=p(o),l!==null)return l;o=o.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),I=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),et=Symbol.iterator;function at(o){return o===null||typeof o!="object"?null:(o=et&&o[et]||o["@@iterator"],typeof o=="function"?o:null)}var ft=Symbol.for("react.client.reference");function lt(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===ft?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case _:return"Fragment";case x:return"Profiler";case w:return"StrictMode";case U:return"Suspense";case k:return"SuspenseList";case H:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case b:return"Portal";case I:return o.displayName||"Context";case N:return(o._context.displayName||"Context")+".Consumer";case L:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case B:return l=o.displayName||null,l!==null?l:lt(o.type)||"Memo";case z:l=o._payload,o=o._init;try{return lt(o(l))}catch{}}return null}var vt=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it={pending:!1,data:null,method:null,action:null},bt=[],Et=-1;function O(o){return{current:o}}function J(o){0>Et||(o.current=bt[Et],bt[Et]=null,Et--)}function ot(o,l){Et++,bt[Et]=o.current,o.current=l}var ut=O(null),pt=O(null),Ct=O(null),_t=O(null);function ze(o,l){switch(ot(Ct,l),ot(pt,o),ot(ut,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?uR(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=uR(l),o=cR(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}J(ut),ot(ut,o)}function Ee(){J(ut),J(pt),J(Ct)}function yi(o){o.memoizedState!==null&&ot(_t,o);var l=ut.current,c=cR(l,o.type);l!==c&&(ot(pt,o),ot(ut,c))}function xt(o){pt.current===o&&(J(ut),J(pt)),_t.current===o&&(J(_t),Ip._currentValue=it)}var Lt,Kt;function we(o){if(Lt===void 0)try{throw Error()}catch(c){var l=c.stack.trim().match(/\n( *(at )?)/);Lt=l&&l[1]||"",Kt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Lt+o+Kt}var vi=!1;function ky(o,l){if(!o||vi)return"";vi=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(l){var st=function(){throw Error()};if(Object.defineProperty(st.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(st,[])}catch(Q){var K=Q}Reflect.construct(o,[],st)}else{try{st.call()}catch(Q){K=Q}o.call(st.prototype)}}else{try{throw Error()}catch(Q){K=Q}(st=o())&&typeof st.catch=="function"&&st.catch(function(){})}}catch(Q){if(Q&&K&&typeof Q.stack=="string")return[Q.stack,K.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=m.DetermineComponentFrameRoot(),M=S[0],P=S[1];if(M&&P){var F=M.split(`
`),X=P.split(`
`);for(T=m=0;m<F.length&&!F[m].includes("DetermineComponentFrameRoot");)m++;for(;T<X.length&&!X[T].includes("DetermineComponentFrameRoot");)T++;if(m===F.length||T===X.length)for(m=F.length-1,T=X.length-1;1<=m&&0<=T&&F[m]!==X[T];)T--;for(;1<=m&&0<=T;m--,T--)if(F[m]!==X[T]){if(m!==1||T!==1)do if(m--,T--,0>T||F[m]!==X[T]){var tt=`
`+F[m].replace(" at new "," at ");return o.displayName&&tt.includes("<anonymous>")&&(tt=tt.replace("<anonymous>",o.displayName)),tt}while(1<=m&&0<=T);break}}}finally{vi=!1,Error.prepareStackTrace=c}return(c=o?o.displayName||o.name:"")?we(c):""}function Vw(o,l){switch(o.tag){case 26:case 27:case 5:return we(o.type);case 16:return we("Lazy");case 13:return o.child!==l&&l!==null?we("Suspense Fallback"):we("Suspense");case 19:return we("SuspenseList");case 0:case 15:return ky(o.type,!1);case 11:return ky(o.type.render,!1);case 1:return ky(o.type,!0);case 31:return we("Activity");default:return""}}function Uy(o){try{var l="",c=null;do l+=Vw(o,c),c=o,o=o.return;while(o);return l}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var Gf=Object.prototype.hasOwnProperty,TT=i.unstable_scheduleCallback,ST=i.unstable_cancelCallback,IB=i.unstable_shouldYield,NB=i.unstable_requestPaint,Fi=i.unstable_now,PB=i.unstable_getCurrentPriorityLevel,Hw=i.unstable_ImmediatePriority,Gw=i.unstable_UserBlockingPriority,By=i.unstable_NormalPriority,LB=i.unstable_LowPriority,zw=i.unstable_IdlePriority,kB=i.log,UB=i.unstable_setDisableYieldValue,zf=null,Oi=null;function ba(o){if(typeof kB=="function"&&UB(o),Oi&&typeof Oi.setStrictMode=="function")try{Oi.setStrictMode(zf,o)}catch{}}var Vi=Math.clz32?Math.clz32:OB,BB=Math.log,FB=Math.LN2;function OB(o){return o>>>=0,o===0?32:31-(BB(o)/FB|0)|0}var Fy=256,Oy=262144,Vy=4194304;function tu(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Hy(o,l,c){var m=o.pendingLanes;if(m===0)return 0;var T=0,S=o.suspendedLanes,M=o.pingedLanes;o=o.warmLanes;var P=m&134217727;return P!==0?(m=P&~S,m!==0?T=tu(m):(M&=P,M!==0?T=tu(M):c||(c=P&~o,c!==0&&(T=tu(c))))):(P=m&~S,P!==0?T=tu(P):M!==0?T=tu(M):c||(c=m&~o,c!==0&&(T=tu(c)))),T===0?0:l!==0&&l!==T&&(l&S)===0&&(S=T&-T,c=l&-l,S>=c||S===32&&(c&4194048)!==0)?l:T}function qf(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function VB(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qw(){var o=Vy;return Vy<<=1,(Vy&62914560)===0&&(Vy=4194304),o}function ET(o){for(var l=[],c=0;31>c;c++)l.push(o);return l}function Yf(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function HB(o,l,c,m,T,S){var M=o.pendingLanes;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=c,o.entangledLanes&=c,o.errorRecoveryDisabledLanes&=c,o.shellSuspendCounter=0;var P=o.entanglements,F=o.expirationTimes,X=o.hiddenUpdates;for(c=M&~c;0<c;){var tt=31-Vi(c),st=1<<tt;P[tt]=0,F[tt]=-1;var K=X[tt];if(K!==null)for(X[tt]=null,tt=0;tt<K.length;tt++){var Q=K[tt];Q!==null&&(Q.lane&=-536870913)}c&=~st}m!==0&&Yw(o,m,0),S!==0&&T===0&&o.tag!==0&&(o.suspendedLanes|=S&~(M&~l))}function Yw(o,l,c){o.pendingLanes|=l,o.suspendedLanes&=~l;var m=31-Vi(l);o.entangledLanes|=l,o.entanglements[m]=o.entanglements[m]|1073741824|c&261930}function Xw(o,l){var c=o.entangledLanes|=l;for(o=o.entanglements;c;){var m=31-Vi(c),T=1<<m;T&l|o[m]&l&&(o[m]|=l),c&=~T}}function $w(o,l){var c=l&-l;return c=(c&42)!==0?1:bT(c),(c&(o.suspendedLanes|l))!==0?0:c}function bT(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function CT(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Kw(){var o=$.p;return o!==0?o:(o=window.event,o===void 0?32:PR(o.type))}function Ww(o,l){var c=$.p;try{return $.p=o,l()}finally{$.p=c}}var Ca=Math.random().toString(36).slice(2),Nn="__reactFiber$"+Ca,Ai="__reactProps$"+Ca,Kc="__reactContainer$"+Ca,_T="__reactEvents$"+Ca,GB="__reactListeners$"+Ca,zB="__reactHandles$"+Ca,Jw="__reactResources$"+Ca,Xf="__reactMarker$"+Ca;function wT(o){delete o[Nn],delete o[Ai],delete o[_T],delete o[GB],delete o[zB]}function Wc(o){var l=o[Nn];if(l)return l;for(var c=o.parentNode;c;){if(l=c[Kc]||c[Nn]){if(c=l.alternate,l.child!==null||c!==null&&c.child!==null)for(o=yR(o);o!==null;){if(c=o[Nn])return c;o=yR(o)}return l}o=c,c=o.parentNode}return null}function Jc(o){if(o=o[Nn]||o[Kc]){var l=o.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return o}return null}function $f(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(n(33))}function Qc(o){var l=o[Jw];return l||(l=o[Jw]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Sn(o){o[Xf]=!0}var Qw=new Set,Zw={};function eu(o,l){Zc(o,l),Zc(o+"Capture",l)}function Zc(o,l){for(Zw[o]=l,o=0;o<l.length;o++)Qw.add(l[o])}var qB=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jw={},tx={};function YB(o){return Gf.call(tx,o)?!0:Gf.call(jw,o)?!1:qB.test(o)?tx[o]=!0:(jw[o]=!0,!1)}function Gy(o,l,c){if(YB(l))if(c===null)o.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var m=l.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+c)}}function zy(o,l,c){if(c===null)o.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+c)}}function ar(o,l,c,m){if(m===null)o.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttributeNS(l,c,""+m)}}function Ts(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function ex(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function XB(o,l,c){var m=Object.getOwnPropertyDescriptor(o.constructor.prototype,l);if(!o.hasOwnProperty(l)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var T=m.get,S=m.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return T.call(this)},set:function(M){c=""+M,S.call(this,M)}}),Object.defineProperty(o,l,{enumerable:m.enumerable}),{getValue:function(){return c},setValue:function(M){c=""+M},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function xT(o){if(!o._valueTracker){var l=ex(o)?"checked":"value";o._valueTracker=XB(o,l,""+o[l])}}function nx(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var c=l.getValue(),m="";return o&&(m=ex(o)?o.checked?"true":"false":o.value),o=m,o!==c?(l.setValue(o),!0):!1}function qy(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var $B=/[\n"\\]/g;function Ss(o){return o.replace($B,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function MT(o,l,c,m,T,S,M,P){o.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?o.type=M:o.removeAttribute("type"),l!=null?M==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+Ts(l)):o.value!==""+Ts(l)&&(o.value=""+Ts(l)):M!=="submit"&&M!=="reset"||o.removeAttribute("value"),l!=null?RT(o,M,Ts(l)):c!=null?RT(o,M,Ts(c)):m!=null&&o.removeAttribute("value"),T==null&&S!=null&&(o.defaultChecked=!!S),T!=null&&(o.checked=T&&typeof T!="function"&&typeof T!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?o.name=""+Ts(P):o.removeAttribute("name")}function ix(o,l,c,m,T,S,M,P){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(o.type=S),l!=null||c!=null){if(!(S!=="submit"&&S!=="reset"||l!=null)){xT(o);return}c=c!=null?""+Ts(c):"",l=l!=null?""+Ts(l):c,P||l===o.value||(o.value=l),o.defaultValue=l}m=m??T,m=typeof m!="function"&&typeof m!="symbol"&&!!m,o.checked=P?o.checked:!!m,o.defaultChecked=!!m,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(o.name=M),xT(o)}function RT(o,l,c){l==="number"&&qy(o.ownerDocument)===o||o.defaultValue===""+c||(o.defaultValue=""+c)}function jc(o,l,c,m){if(o=o.options,l){l={};for(var T=0;T<c.length;T++)l["$"+c[T]]=!0;for(c=0;c<o.length;c++)T=l.hasOwnProperty("$"+o[c].value),o[c].selected!==T&&(o[c].selected=T),T&&m&&(o[c].defaultSelected=!0)}else{for(c=""+Ts(c),l=null,T=0;T<o.length;T++){if(o[T].value===c){o[T].selected=!0,m&&(o[T].defaultSelected=!0);return}l!==null||o[T].disabled||(l=o[T])}l!==null&&(l.selected=!0)}}function sx(o,l,c){if(l!=null&&(l=""+Ts(l),l!==o.value&&(o.value=l),c==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=c!=null?""+Ts(c):""}function ox(o,l,c,m){if(l==null){if(m!=null){if(c!=null)throw Error(n(92));if(vt(m)){if(1<m.length)throw Error(n(93));m=m[0]}c=m}c==null&&(c=""),l=c}c=Ts(l),o.defaultValue=c,m=o.textContent,m===c&&m!==""&&m!==null&&(o.value=m),xT(o)}function td(o,l){if(l){var c=o.firstChild;if(c&&c===o.lastChild&&c.nodeType===3){c.nodeValue=l;return}}o.textContent=l}var KB=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rx(o,l,c){var m=l.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?m?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":m?o.setProperty(l,c):typeof c!="number"||c===0||KB.has(l)?l==="float"?o.cssFloat=c:o[l]=(""+c).trim():o[l]=c+"px"}function ax(o,l,c){if(l!=null&&typeof l!="object")throw Error(n(62));if(o=o.style,c!=null){for(var m in c)!c.hasOwnProperty(m)||l!=null&&l.hasOwnProperty(m)||(m.indexOf("--")===0?o.setProperty(m,""):m==="float"?o.cssFloat="":o[m]="");for(var T in l)m=l[T],l.hasOwnProperty(T)&&c[T]!==m&&rx(o,T,m)}else for(var S in l)l.hasOwnProperty(S)&&rx(o,S,l[S])}function DT(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var WB=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),JB=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yy(o){return JB.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function lr(){}var IT=null;function NT(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var ed=null,nd=null;function lx(o){var l=Jc(o);if(l&&(o=l.stateNode)){var c=o[Ai]||null;t:switch(o=l.stateNode,l.type){case"input":if(MT(o,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),l=c.name,c.type==="radio"&&l!=null){for(c=o;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Ss(""+l)+'"][type="radio"]'),l=0;l<c.length;l++){var m=c[l];if(m!==o&&m.form===o.form){var T=m[Ai]||null;if(!T)throw Error(n(90));MT(m,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(l=0;l<c.length;l++)m=c[l],m.form===o.form&&nx(m)}break t;case"textarea":sx(o,c.value,c.defaultValue);break t;case"select":l=c.value,l!=null&&jc(o,!!c.multiple,l,!1)}}}var PT=!1;function ux(o,l,c){if(PT)return o(l,c);PT=!0;try{var m=o(l);return m}finally{if(PT=!1,(ed!==null||nd!==null)&&(Nv(),ed&&(l=ed,o=nd,nd=ed=null,lx(l),o)))for(l=0;l<o.length;l++)lx(o[l])}}function Kf(o,l){var c=o.stateNode;if(c===null)return null;var m=c[Ai]||null;if(m===null)return null;c=m[l];t:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break t;default:o=!1}if(o)return null;if(c&&typeof c!="function")throw Error(n(231,l,typeof c));return c}var ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),LT=!1;if(ur)try{var Wf={};Object.defineProperty(Wf,"passive",{get:function(){LT=!0}}),window.addEventListener("test",Wf,Wf),window.removeEventListener("test",Wf,Wf)}catch{LT=!1}var _a=null,kT=null,Xy=null;function cx(){if(Xy)return Xy;var o,l=kT,c=l.length,m,T="value"in _a?_a.value:_a.textContent,S=T.length;for(o=0;o<c&&l[o]===T[o];o++);var M=c-o;for(m=1;m<=M&&l[c-m]===T[S-m];m++);return Xy=T.slice(o,1<m?1-m:void 0)}function $y(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Ky(){return!0}function dx(){return!1}function Ti(o){function l(c,m,T,S,M){this._reactName=c,this._targetInst=T,this.type=m,this.nativeEvent=S,this.target=M,this.currentTarget=null;for(var P in o)o.hasOwnProperty(P)&&(c=o[P],this[P]=c?c(S):S[P]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Ky:dx,this.isPropagationStopped=dx,this}return y(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ky)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ky)},persist:function(){},isPersistent:Ky}),l}var nu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wy=Ti(nu),Jf=y({},nu,{view:0,detail:0}),QB=Ti(Jf),UT,BT,Qf,Jy=y({},Jf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:OT,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Qf&&(Qf&&o.type==="mousemove"?(UT=o.screenX-Qf.screenX,BT=o.screenY-Qf.screenY):BT=UT=0,Qf=o),UT)},movementY:function(o){return"movementY"in o?o.movementY:BT}}),hx=Ti(Jy),ZB=y({},Jy,{dataTransfer:0}),jB=Ti(ZB),tF=y({},Jf,{relatedTarget:0}),FT=Ti(tF),eF=y({},nu,{animationName:0,elapsedTime:0,pseudoElement:0}),nF=Ti(eF),iF=y({},nu,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),sF=Ti(iF),oF=y({},nu,{data:0}),fx=Ti(oF),rF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uF(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=lF[o])?!!l[o]:!1}function OT(){return uF}var cF=y({},Jf,{key:function(o){if(o.key){var l=rF[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=$y(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?aF[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:OT,charCode:function(o){return o.type==="keypress"?$y(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?$y(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),dF=Ti(cF),hF=y({},Jy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),px=Ti(hF),fF=y({},Jf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:OT}),pF=Ti(fF),mF=y({},nu,{propertyName:0,elapsedTime:0,pseudoElement:0}),gF=Ti(mF),yF=y({},Jy,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),vF=Ti(yF),AF=y({},nu,{newState:0,oldState:0}),TF=Ti(AF),SF=[9,13,27,32],VT=ur&&"CompositionEvent"in window,Zf=null;ur&&"documentMode"in document&&(Zf=document.documentMode);var EF=ur&&"TextEvent"in window&&!Zf,mx=ur&&(!VT||Zf&&8<Zf&&11>=Zf),gx=" ",yx=!1;function vx(o,l){switch(o){case"keyup":return SF.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ax(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var id=!1;function bF(o,l){switch(o){case"compositionend":return Ax(l);case"keypress":return l.which!==32?null:(yx=!0,gx);case"textInput":return o=l.data,o===gx&&yx?null:o;default:return null}}function CF(o,l){if(id)return o==="compositionend"||!VT&&vx(o,l)?(o=cx(),Xy=kT=_a=null,id=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return mx&&l.locale!=="ko"?null:l.data;default:return null}}var _F={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tx(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!_F[o.type]:l==="textarea"}function Sx(o,l,c,m){ed?nd?nd.push(m):nd=[m]:ed=m,l=Ov(l,"onChange"),0<l.length&&(c=new Wy("onChange","change",null,c,m),o.push({event:c,listeners:l}))}var jf=null,tp=null;function wF(o){iR(o,0)}function Qy(o){var l=$f(o);if(nx(l))return o}function Ex(o,l){if(o==="change")return l}var bx=!1;if(ur){var HT;if(ur){var GT="oninput"in document;if(!GT){var Cx=document.createElement("div");Cx.setAttribute("oninput","return;"),GT=typeof Cx.oninput=="function"}HT=GT}else HT=!1;bx=HT&&(!document.documentMode||9<document.documentMode)}function _x(){jf&&(jf.detachEvent("onpropertychange",wx),tp=jf=null)}function wx(o){if(o.propertyName==="value"&&Qy(tp)){var l=[];Sx(l,tp,o,NT(o)),ux(wF,l)}}function xF(o,l,c){o==="focusin"?(_x(),jf=l,tp=c,jf.attachEvent("onpropertychange",wx)):o==="focusout"&&_x()}function MF(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Qy(tp)}function RF(o,l){if(o==="click")return Qy(l)}function DF(o,l){if(o==="input"||o==="change")return Qy(l)}function IF(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Hi=typeof Object.is=="function"?Object.is:IF;function ep(o,l){if(Hi(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var c=Object.keys(o),m=Object.keys(l);if(c.length!==m.length)return!1;for(m=0;m<c.length;m++){var T=c[m];if(!Gf.call(l,T)||!Hi(o[T],l[T]))return!1}return!0}function xx(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Mx(o,l){var c=xx(o);o=0;for(var m;c;){if(c.nodeType===3){if(m=o+c.textContent.length,o<=l&&m>=l)return{node:c,offset:l-o};o=m}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=xx(c)}}function Rx(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?Rx(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function Dx(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=qy(o.document);l instanceof o.HTMLIFrameElement;){try{var c=typeof l.contentWindow.location.href=="string"}catch{c=!1}if(c)o=l.contentWindow;else break;l=qy(o.document)}return l}function zT(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var NF=ur&&"documentMode"in document&&11>=document.documentMode,sd=null,qT=null,np=null,YT=!1;function Ix(o,l,c){var m=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;YT||sd==null||sd!==qy(m)||(m=sd,"selectionStart"in m&&zT(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),np&&ep(np,m)||(np=m,m=Ov(qT,"onSelect"),0<m.length&&(l=new Wy("onSelect","select",null,l,c),o.push({event:l,listeners:m}),l.target=sd)))}function iu(o,l){var c={};return c[o.toLowerCase()]=l.toLowerCase(),c["Webkit"+o]="webkit"+l,c["Moz"+o]="moz"+l,c}var od={animationend:iu("Animation","AnimationEnd"),animationiteration:iu("Animation","AnimationIteration"),animationstart:iu("Animation","AnimationStart"),transitionrun:iu("Transition","TransitionRun"),transitionstart:iu("Transition","TransitionStart"),transitioncancel:iu("Transition","TransitionCancel"),transitionend:iu("Transition","TransitionEnd")},XT={},Nx={};ur&&(Nx=document.createElement("div").style,"AnimationEvent"in window||(delete od.animationend.animation,delete od.animationiteration.animation,delete od.animationstart.animation),"TransitionEvent"in window||delete od.transitionend.transition);function su(o){if(XT[o])return XT[o];if(!od[o])return o;var l=od[o],c;for(c in l)if(l.hasOwnProperty(c)&&c in Nx)return XT[o]=l[c];return o}var Px=su("animationend"),Lx=su("animationiteration"),kx=su("animationstart"),PF=su("transitionrun"),LF=su("transitionstart"),kF=su("transitioncancel"),Ux=su("transitionend"),Bx=new Map,$T="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$T.push("scrollEnd");function Zs(o,l){Bx.set(o,l),eu(l,[o])}var Zy=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Es=[],rd=0,KT=0;function jy(){for(var o=rd,l=KT=rd=0;l<o;){var c=Es[l];Es[l++]=null;var m=Es[l];Es[l++]=null;var T=Es[l];Es[l++]=null;var S=Es[l];if(Es[l++]=null,m!==null&&T!==null){var M=m.pending;M===null?T.next=T:(T.next=M.next,M.next=T),m.pending=T}S!==0&&Fx(c,T,S)}}function tv(o,l,c,m){Es[rd++]=o,Es[rd++]=l,Es[rd++]=c,Es[rd++]=m,KT|=m,o.lanes|=m,o=o.alternate,o!==null&&(o.lanes|=m)}function WT(o,l,c,m){return tv(o,l,c,m),ev(o)}function ou(o,l){return tv(o,null,null,l),ev(o)}function Fx(o,l,c){o.lanes|=c;var m=o.alternate;m!==null&&(m.lanes|=c);for(var T=!1,S=o.return;S!==null;)S.childLanes|=c,m=S.alternate,m!==null&&(m.childLanes|=c),S.tag===22&&(o=S.stateNode,o===null||o._visibility&1||(T=!0)),o=S,S=S.return;return o.tag===3?(S=o.stateNode,T&&l!==null&&(T=31-Vi(c),o=S.hiddenUpdates,m=o[T],m===null?o[T]=[l]:m.push(l),l.lane=c|536870912),S):null}function ev(o){if(50<Cp)throw Cp=0,sE=null,Error(n(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var ad={};function UF(o,l,c,m){this.tag=o,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gi(o,l,c,m){return new UF(o,l,c,m)}function JT(o){return o=o.prototype,!(!o||!o.isReactComponent)}function cr(o,l){var c=o.alternate;return c===null?(c=Gi(o.tag,l,o.key,o.mode),c.elementType=o.elementType,c.type=o.type,c.stateNode=o.stateNode,c.alternate=o,o.alternate=c):(c.pendingProps=l,c.type=o.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=o.flags&65011712,c.childLanes=o.childLanes,c.lanes=o.lanes,c.child=o.child,c.memoizedProps=o.memoizedProps,c.memoizedState=o.memoizedState,c.updateQueue=o.updateQueue,l=o.dependencies,c.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},c.sibling=o.sibling,c.index=o.index,c.ref=o.ref,c.refCleanup=o.refCleanup,c}function Ox(o,l){o.flags&=65011714;var c=o.alternate;return c===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,l=c.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function nv(o,l,c,m,T,S){var M=0;if(m=o,typeof o=="function")JT(o)&&(M=1);else if(typeof o=="string")M=HO(o,c,ut.current)?26:o==="html"||o==="head"||o==="body"?27:5;else t:switch(o){case H:return o=Gi(31,c,l,T),o.elementType=H,o.lanes=S,o;case _:return ru(c.children,T,S,l);case w:M=8,T|=24;break;case x:return o=Gi(12,c,l,T|2),o.elementType=x,o.lanes=S,o;case U:return o=Gi(13,c,l,T),o.elementType=U,o.lanes=S,o;case k:return o=Gi(19,c,l,T),o.elementType=k,o.lanes=S,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case I:M=10;break t;case N:M=9;break t;case L:M=11;break t;case B:M=14;break t;case z:M=16,m=null;break t}M=29,c=Error(n(130,o===null?"null":typeof o,"")),m=null}return l=Gi(M,c,l,T),l.elementType=o,l.type=m,l.lanes=S,l}function ru(o,l,c,m){return o=Gi(7,o,m,l),o.lanes=c,o}function QT(o,l,c){return o=Gi(6,o,null,l),o.lanes=c,o}function Vx(o){var l=Gi(18,null,null,0);return l.stateNode=o,l}function ZT(o,l,c){return l=Gi(4,o.children!==null?o.children:[],o.key,l),l.lanes=c,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var Hx=new WeakMap;function bs(o,l){if(typeof o=="object"&&o!==null){var c=Hx.get(o);return c!==void 0?c:(l={value:o,source:l,stack:Uy(l)},Hx.set(o,l),l)}return{value:o,source:l,stack:Uy(l)}}var ld=[],ud=0,iv=null,ip=0,Cs=[],_s=0,wa=null,_o=1,wo="";function dr(o,l){ld[ud++]=ip,ld[ud++]=iv,iv=o,ip=l}function Gx(o,l,c){Cs[_s++]=_o,Cs[_s++]=wo,Cs[_s++]=wa,wa=o;var m=_o;o=wo;var T=32-Vi(m)-1;m&=~(1<<T),c+=1;var S=32-Vi(l)+T;if(30<S){var M=T-T%5;S=(m&(1<<M)-1).toString(32),m>>=M,T-=M,_o=1<<32-Vi(l)+T|c<<T|m,wo=S+o}else _o=1<<S|c<<T|m,wo=o}function jT(o){o.return!==null&&(dr(o,1),Gx(o,1,0))}function tS(o){for(;o===iv;)iv=ld[--ud],ld[ud]=null,ip=ld[--ud],ld[ud]=null;for(;o===wa;)wa=Cs[--_s],Cs[_s]=null,wo=Cs[--_s],Cs[_s]=null,_o=Cs[--_s],Cs[_s]=null}function zx(o,l){Cs[_s++]=_o,Cs[_s++]=wo,Cs[_s++]=wa,_o=l.id,wo=l.overflow,wa=o}var Pn=null,Ie=null,Wt=!1,xa=null,ws=!1,eS=Error(n(519));function Ma(o){var l=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw sp(bs(l,o)),eS}function qx(o){var l=o.stateNode,c=o.type,m=o.memoizedProps;switch(l[Nn]=o,l[Ai]=m,c){case"dialog":qt("cancel",l),qt("close",l);break;case"iframe":case"object":case"embed":qt("load",l);break;case"video":case"audio":for(c=0;c<wp.length;c++)qt(wp[c],l);break;case"source":qt("error",l);break;case"img":case"image":case"link":qt("error",l),qt("load",l);break;case"details":qt("toggle",l);break;case"input":qt("invalid",l),ix(l,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":qt("invalid",l);break;case"textarea":qt("invalid",l),ox(l,m.value,m.defaultValue,m.children)}c=m.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||l.textContent===""+c||m.suppressHydrationWarning===!0||aR(l.textContent,c)?(m.popover!=null&&(qt("beforetoggle",l),qt("toggle",l)),m.onScroll!=null&&qt("scroll",l),m.onScrollEnd!=null&&qt("scrollend",l),m.onClick!=null&&(l.onclick=lr),l=!0):l=!1,l||Ma(o,!0)}function Yx(o){for(Pn=o.return;Pn;)switch(Pn.tag){case 5:case 31:case 13:ws=!1;return;case 27:case 3:ws=!0;return;default:Pn=Pn.return}}function cd(o){if(o!==Pn)return!1;if(!Wt)return Yx(o),Wt=!0,!1;var l=o.tag,c;if((c=l!==3&&l!==27)&&((c=l===5)&&(c=o.type,c=!(c!=="form"&&c!=="button")||AE(o.type,o.memoizedProps)),c=!c),c&&Ie&&Ma(o),Yx(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));Ie=gR(o)}else if(l===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));Ie=gR(o)}else l===27?(l=Ie,Ga(o.type)?(o=CE,CE=null,Ie=o):Ie=l):Ie=Pn?Ms(o.stateNode.nextSibling):null;return!0}function au(){Ie=Pn=null,Wt=!1}function nS(){var o=xa;return o!==null&&(Ci===null?Ci=o:Ci.push.apply(Ci,o),xa=null),o}function sp(o){xa===null?xa=[o]:xa.push(o)}var iS=O(null),lu=null,hr=null;function Ra(o,l,c){ot(iS,l._currentValue),l._currentValue=c}function fr(o){o._currentValue=iS.current,J(iS)}function sS(o,l,c){for(;o!==null;){var m=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),o===c)break;o=o.return}}function oS(o,l,c,m){var T=o.child;for(T!==null&&(T.return=o);T!==null;){var S=T.dependencies;if(S!==null){var M=T.child;S=S.firstContext;t:for(;S!==null;){var P=S;S=T;for(var F=0;F<l.length;F++)if(P.context===l[F]){S.lanes|=c,P=S.alternate,P!==null&&(P.lanes|=c),sS(S.return,c,o),m||(M=null);break t}S=P.next}}else if(T.tag===18){if(M=T.return,M===null)throw Error(n(341));M.lanes|=c,S=M.alternate,S!==null&&(S.lanes|=c),sS(M,c,o),M=null}else M=T.child;if(M!==null)M.return=T;else for(M=T;M!==null;){if(M===o){M=null;break}if(T=M.sibling,T!==null){T.return=M.return,M=T;break}M=M.return}T=M}}function dd(o,l,c,m){o=null;for(var T=l,S=!1;T!==null;){if(!S){if((T.flags&524288)!==0)S=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var M=T.alternate;if(M===null)throw Error(n(387));if(M=M.memoizedProps,M!==null){var P=T.type;Hi(T.pendingProps.value,M.value)||(o!==null?o.push(P):o=[P])}}else if(T===_t.current){if(M=T.alternate,M===null)throw Error(n(387));M.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(o!==null?o.push(Ip):o=[Ip])}T=T.return}o!==null&&oS(l,o,c,m),l.flags|=262144}function sv(o){for(o=o.firstContext;o!==null;){if(!Hi(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function uu(o){lu=o,hr=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Ln(o){return Xx(lu,o)}function ov(o,l){return lu===null&&uu(o),Xx(o,l)}function Xx(o,l){var c=l._currentValue;if(l={context:l,memoizedValue:c,next:null},hr===null){if(o===null)throw Error(n(308));hr=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else hr=hr.next=l;return c}var BF=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(c,m){o.push(m)}};this.abort=function(){l.aborted=!0,o.forEach(function(c){return c()})}},FF=i.unstable_scheduleCallback,OF=i.unstable_NormalPriority,sn={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rS(){return{controller:new BF,data:new Map,refCount:0}}function op(o){o.refCount--,o.refCount===0&&FF(OF,function(){o.controller.abort()})}var rp=null,aS=0,hd=0,fd=null;function VF(o,l){if(rp===null){var c=rp=[];aS=0,hd=cE(),fd={status:"pending",value:void 0,then:function(m){c.push(m)}}}return aS++,l.then($x,$x),l}function $x(){if(--aS===0&&rp!==null){fd!==null&&(fd.status="fulfilled");var o=rp;rp=null,hd=0,fd=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function HF(o,l){var c=[],m={status:"pending",value:null,reason:null,then:function(T){c.push(T)}};return o.then(function(){m.status="fulfilled",m.value=l;for(var T=0;T<c.length;T++)(0,c[T])(l)},function(T){for(m.status="rejected",m.reason=T,T=0;T<c.length;T++)(0,c[T])(void 0)}),m}var Kx=G.S;G.S=function(o,l){I1=Fi(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&VF(o,l),Kx!==null&&Kx(o,l)};var cu=O(null);function lS(){var o=cu.current;return o!==null?o:be.pooledCache}function rv(o,l){l===null?ot(cu,cu.current):ot(cu,l.pool)}function Wx(){var o=lS();return o===null?null:{parent:sn._currentValue,pool:o}}var pd=Error(n(460)),uS=Error(n(474)),av=Error(n(542)),lv={then:function(){}};function Jx(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Qx(o,l,c){switch(c=o[c],c===void 0?o.push(l):c!==l&&(l.then(lr,lr),l=c),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,jx(o),o;default:if(typeof l.status=="string")l.then(lr,lr);else{if(o=be,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=l,o.status="pending",o.then(function(m){if(l.status==="pending"){var T=l;T.status="fulfilled",T.value=m}},function(m){if(l.status==="pending"){var T=l;T.status="rejected",T.reason=m}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,jx(o),o}throw hu=l,pd}}function du(o){try{var l=o._init;return l(o._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(hu=c,pd):c}}var hu=null;function Zx(){if(hu===null)throw Error(n(459));var o=hu;return hu=null,o}function jx(o){if(o===pd||o===av)throw Error(n(483))}var md=null,ap=0;function uv(o){var l=ap;return ap+=1,md===null&&(md=[]),Qx(md,o,l)}function lp(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function cv(o,l){throw l.$$typeof===v?Error(n(525)):(o=Object.prototype.toString.call(l),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function tM(o){function l(q,V){if(o){var Y=q.deletions;Y===null?(q.deletions=[V],q.flags|=16):Y.push(V)}}function c(q,V){if(!o)return null;for(;V!==null;)l(q,V),V=V.sibling;return null}function m(q){for(var V=new Map;q!==null;)q.key!==null?V.set(q.key,q):V.set(q.index,q),q=q.sibling;return V}function T(q,V){return q=cr(q,V),q.index=0,q.sibling=null,q}function S(q,V,Y){return q.index=Y,o?(Y=q.alternate,Y!==null?(Y=Y.index,Y<V?(q.flags|=67108866,V):Y):(q.flags|=67108866,V)):(q.flags|=1048576,V)}function M(q){return o&&q.alternate===null&&(q.flags|=67108866),q}function P(q,V,Y,nt){return V===null||V.tag!==6?(V=QT(Y,q.mode,nt),V.return=q,V):(V=T(V,Y),V.return=q,V)}function F(q,V,Y,nt){var wt=Y.type;return wt===_?tt(q,V,Y.props.children,nt,Y.key):V!==null&&(V.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===z&&du(wt)===V.type)?(V=T(V,Y.props),lp(V,Y),V.return=q,V):(V=nv(Y.type,Y.key,Y.props,null,q.mode,nt),lp(V,Y),V.return=q,V)}function X(q,V,Y,nt){return V===null||V.tag!==4||V.stateNode.containerInfo!==Y.containerInfo||V.stateNode.implementation!==Y.implementation?(V=ZT(Y,q.mode,nt),V.return=q,V):(V=T(V,Y.children||[]),V.return=q,V)}function tt(q,V,Y,nt,wt){return V===null||V.tag!==7?(V=ru(Y,q.mode,nt,wt),V.return=q,V):(V=T(V,Y),V.return=q,V)}function st(q,V,Y){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=QT(""+V,q.mode,Y),V.return=q,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case E:return Y=nv(V.type,V.key,V.props,null,q.mode,Y),lp(Y,V),Y.return=q,Y;case b:return V=ZT(V,q.mode,Y),V.return=q,V;case z:return V=du(V),st(q,V,Y)}if(vt(V)||at(V))return V=ru(V,q.mode,Y,null),V.return=q,V;if(typeof V.then=="function")return st(q,uv(V),Y);if(V.$$typeof===I)return st(q,ov(q,V),Y);cv(q,V)}return null}function K(q,V,Y,nt){var wt=V!==null?V.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return wt!==null?null:P(q,V,""+Y,nt);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case E:return Y.key===wt?F(q,V,Y,nt):null;case b:return Y.key===wt?X(q,V,Y,nt):null;case z:return Y=du(Y),K(q,V,Y,nt)}if(vt(Y)||at(Y))return wt!==null?null:tt(q,V,Y,nt,null);if(typeof Y.then=="function")return K(q,V,uv(Y),nt);if(Y.$$typeof===I)return K(q,V,ov(q,Y),nt);cv(q,Y)}return null}function Q(q,V,Y,nt,wt){if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return q=q.get(Y)||null,P(V,q,""+nt,wt);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case E:return q=q.get(nt.key===null?Y:nt.key)||null,F(V,q,nt,wt);case b:return q=q.get(nt.key===null?Y:nt.key)||null,X(V,q,nt,wt);case z:return nt=du(nt),Q(q,V,Y,nt,wt)}if(vt(nt)||at(nt))return q=q.get(Y)||null,tt(V,q,nt,wt,null);if(typeof nt.then=="function")return Q(q,V,Y,uv(nt),wt);if(nt.$$typeof===I)return Q(q,V,Y,ov(V,nt),wt);cv(V,nt)}return null}function yt(q,V,Y,nt){for(var wt=null,te=null,Tt=V,Ot=V=0,Xt=null;Tt!==null&&Ot<Y.length;Ot++){Tt.index>Ot?(Xt=Tt,Tt=null):Xt=Tt.sibling;var ee=K(q,Tt,Y[Ot],nt);if(ee===null){Tt===null&&(Tt=Xt);break}o&&Tt&&ee.alternate===null&&l(q,Tt),V=S(ee,V,Ot),te===null?wt=ee:te.sibling=ee,te=ee,Tt=Xt}if(Ot===Y.length)return c(q,Tt),Wt&&dr(q,Ot),wt;if(Tt===null){for(;Ot<Y.length;Ot++)Tt=st(q,Y[Ot],nt),Tt!==null&&(V=S(Tt,V,Ot),te===null?wt=Tt:te.sibling=Tt,te=Tt);return Wt&&dr(q,Ot),wt}for(Tt=m(Tt);Ot<Y.length;Ot++)Xt=Q(Tt,q,Ot,Y[Ot],nt),Xt!==null&&(o&&Xt.alternate!==null&&Tt.delete(Xt.key===null?Ot:Xt.key),V=S(Xt,V,Ot),te===null?wt=Xt:te.sibling=Xt,te=Xt);return o&&Tt.forEach(function($a){return l(q,$a)}),Wt&&dr(q,Ot),wt}function Mt(q,V,Y,nt){if(Y==null)throw Error(n(151));for(var wt=null,te=null,Tt=V,Ot=V=0,Xt=null,ee=Y.next();Tt!==null&&!ee.done;Ot++,ee=Y.next()){Tt.index>Ot?(Xt=Tt,Tt=null):Xt=Tt.sibling;var $a=K(q,Tt,ee.value,nt);if($a===null){Tt===null&&(Tt=Xt);break}o&&Tt&&$a.alternate===null&&l(q,Tt),V=S($a,V,Ot),te===null?wt=$a:te.sibling=$a,te=$a,Tt=Xt}if(ee.done)return c(q,Tt),Wt&&dr(q,Ot),wt;if(Tt===null){for(;!ee.done;Ot++,ee=Y.next())ee=st(q,ee.value,nt),ee!==null&&(V=S(ee,V,Ot),te===null?wt=ee:te.sibling=ee,te=ee);return Wt&&dr(q,Ot),wt}for(Tt=m(Tt);!ee.done;Ot++,ee=Y.next())ee=Q(Tt,q,Ot,ee.value,nt),ee!==null&&(o&&ee.alternate!==null&&Tt.delete(ee.key===null?Ot:ee.key),V=S(ee,V,Ot),te===null?wt=ee:te.sibling=ee,te=ee);return o&&Tt.forEach(function(ZO){return l(q,ZO)}),Wt&&dr(q,Ot),wt}function me(q,V,Y,nt){if(typeof Y=="object"&&Y!==null&&Y.type===_&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case E:t:{for(var wt=Y.key;V!==null;){if(V.key===wt){if(wt=Y.type,wt===_){if(V.tag===7){c(q,V.sibling),nt=T(V,Y.props.children),nt.return=q,q=nt;break t}}else if(V.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===z&&du(wt)===V.type){c(q,V.sibling),nt=T(V,Y.props),lp(nt,Y),nt.return=q,q=nt;break t}c(q,V);break}else l(q,V);V=V.sibling}Y.type===_?(nt=ru(Y.props.children,q.mode,nt,Y.key),nt.return=q,q=nt):(nt=nv(Y.type,Y.key,Y.props,null,q.mode,nt),lp(nt,Y),nt.return=q,q=nt)}return M(q);case b:t:{for(wt=Y.key;V!==null;){if(V.key===wt)if(V.tag===4&&V.stateNode.containerInfo===Y.containerInfo&&V.stateNode.implementation===Y.implementation){c(q,V.sibling),nt=T(V,Y.children||[]),nt.return=q,q=nt;break t}else{c(q,V);break}else l(q,V);V=V.sibling}nt=ZT(Y,q.mode,nt),nt.return=q,q=nt}return M(q);case z:return Y=du(Y),me(q,V,Y,nt)}if(vt(Y))return yt(q,V,Y,nt);if(at(Y)){if(wt=at(Y),typeof wt!="function")throw Error(n(150));return Y=wt.call(Y),Mt(q,V,Y,nt)}if(typeof Y.then=="function")return me(q,V,uv(Y),nt);if(Y.$$typeof===I)return me(q,V,ov(q,Y),nt);cv(q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,V!==null&&V.tag===6?(c(q,V.sibling),nt=T(V,Y),nt.return=q,q=nt):(c(q,V),nt=QT(Y,q.mode,nt),nt.return=q,q=nt),M(q)):c(q,V)}return function(q,V,Y,nt){try{ap=0;var wt=me(q,V,Y,nt);return md=null,wt}catch(Tt){if(Tt===pd||Tt===av)throw Tt;var te=Gi(29,Tt,null,q.mode);return te.lanes=nt,te.return=q,te}finally{}}}var fu=tM(!0),eM=tM(!1),Da=!1;function cS(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dS(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Ia(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Na(o,l,c){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,(ie&2)!==0){var T=m.pending;return T===null?l.next=l:(l.next=T.next,T.next=l),m.pending=l,l=ev(o),Fx(o,null,c),l}return tv(o,m,l,c),ev(o)}function up(o,l,c){if(l=l.updateQueue,l!==null&&(l=l.shared,(c&4194048)!==0)){var m=l.lanes;m&=o.pendingLanes,c|=m,l.lanes=c,Xw(o,c)}}function hS(o,l){var c=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,c===m)){var T=null,S=null;if(c=c.firstBaseUpdate,c!==null){do{var M={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};S===null?T=S=M:S=S.next=M,c=c.next}while(c!==null);S===null?T=S=l:S=S.next=l}else T=S=l;c={baseState:m.baseState,firstBaseUpdate:T,lastBaseUpdate:S,shared:m.shared,callbacks:m.callbacks},o.updateQueue=c;return}o=c.lastBaseUpdate,o===null?c.firstBaseUpdate=l:o.next=l,c.lastBaseUpdate=l}var fS=!1;function cp(){if(fS){var o=fd;if(o!==null)throw o}}function dp(o,l,c,m){fS=!1;var T=o.updateQueue;Da=!1;var S=T.firstBaseUpdate,M=T.lastBaseUpdate,P=T.shared.pending;if(P!==null){T.shared.pending=null;var F=P,X=F.next;F.next=null,M===null?S=X:M.next=X,M=F;var tt=o.alternate;tt!==null&&(tt=tt.updateQueue,P=tt.lastBaseUpdate,P!==M&&(P===null?tt.firstBaseUpdate=X:P.next=X,tt.lastBaseUpdate=F))}if(S!==null){var st=T.baseState;M=0,tt=X=F=null,P=S;do{var K=P.lane&-536870913,Q=K!==P.lane;if(Q?(Yt&K)===K:(m&K)===K){K!==0&&K===hd&&(fS=!0),tt!==null&&(tt=tt.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});t:{var yt=o,Mt=P;K=l;var me=c;switch(Mt.tag){case 1:if(yt=Mt.payload,typeof yt=="function"){st=yt.call(me,st,K);break t}st=yt;break t;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=Mt.payload,K=typeof yt=="function"?yt.call(me,st,K):yt,K==null)break t;st=y({},st,K);break t;case 2:Da=!0}}K=P.callback,K!==null&&(o.flags|=64,Q&&(o.flags|=8192),Q=T.callbacks,Q===null?T.callbacks=[K]:Q.push(K))}else Q={lane:K,tag:P.tag,payload:P.payload,callback:P.callback,next:null},tt===null?(X=tt=Q,F=st):tt=tt.next=Q,M|=K;if(P=P.next,P===null){if(P=T.shared.pending,P===null)break;Q=P,P=Q.next,Q.next=null,T.lastBaseUpdate=Q,T.shared.pending=null}}while(!0);tt===null&&(F=st),T.baseState=F,T.firstBaseUpdate=X,T.lastBaseUpdate=tt,S===null&&(T.shared.lanes=0),Ba|=M,o.lanes=M,o.memoizedState=st}}function nM(o,l){if(typeof o!="function")throw Error(n(191,o));o.call(l)}function iM(o,l){var c=o.callbacks;if(c!==null)for(o.callbacks=null,o=0;o<c.length;o++)nM(c[o],l)}var gd=O(null),dv=O(0);function sM(o,l){o=Er,ot(dv,o),ot(gd,l),Er=o|l.baseLanes}function pS(){ot(dv,Er),ot(gd,gd.current)}function mS(){Er=dv.current,J(gd),J(dv)}var zi=O(null),xs=null;function Pa(o){var l=o.alternate;ot(Ze,Ze.current&1),ot(zi,o),xs===null&&(l===null||gd.current!==null||l.memoizedState!==null)&&(xs=o)}function gS(o){ot(Ze,Ze.current),ot(zi,o),xs===null&&(xs=o)}function oM(o){o.tag===22?(ot(Ze,Ze.current),ot(zi,o),xs===null&&(xs=o)):La()}function La(){ot(Ze,Ze.current),ot(zi,zi.current)}function qi(o){J(zi),xs===o&&(xs=null),J(Ze)}var Ze=O(0);function hv(o){for(var l=o;l!==null;){if(l.tag===13){var c=l.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||EE(c)||bE(c)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var pr=0,Bt=null,fe=null,on=null,fv=!1,yd=!1,pu=!1,pv=0,hp=0,vd=null,GF=0;function qe(){throw Error(n(321))}function yS(o,l){if(l===null)return!1;for(var c=0;c<l.length&&c<o.length;c++)if(!Hi(o[c],l[c]))return!1;return!0}function vS(o,l,c,m,T,S){return pr=S,Bt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,G.H=o===null||o.memoizedState===null?GM:PS,pu=!1,S=c(m,T),pu=!1,yd&&(S=aM(l,c,m,T)),rM(o),S}function rM(o){G.H=mp;var l=fe!==null&&fe.next!==null;if(pr=0,on=fe=Bt=null,fv=!1,hp=0,vd=null,l)throw Error(n(300));o===null||rn||(o=o.dependencies,o!==null&&sv(o)&&(rn=!0))}function aM(o,l,c,m){Bt=o;var T=0;do{if(yd&&(vd=null),hp=0,yd=!1,25<=T)throw Error(n(301));if(T+=1,on=fe=null,o.updateQueue!=null){var S=o.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}G.H=zM,S=l(c,m)}while(yd);return S}function zF(){var o=G.H,l=o.useState()[0];return l=typeof l.then=="function"?fp(l):l,o=o.useState()[0],(fe!==null?fe.memoizedState:null)!==o&&(Bt.flags|=1024),l}function AS(){var o=pv!==0;return pv=0,o}function TS(o,l,c){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~c}function SS(o){if(fv){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}fv=!1}pr=0,on=fe=Bt=null,yd=!1,hp=pv=0,vd=null}function ii(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?Bt.memoizedState=on=o:on=on.next=o,on}function je(){if(fe===null){var o=Bt.alternate;o=o!==null?o.memoizedState:null}else o=fe.next;var l=on===null?Bt.memoizedState:on.next;if(l!==null)on=l,fe=o;else{if(o===null)throw Bt.alternate===null?Error(n(467)):Error(n(310));fe=o,o={memoizedState:fe.memoizedState,baseState:fe.baseState,baseQueue:fe.baseQueue,queue:fe.queue,next:null},on===null?Bt.memoizedState=on=o:on=on.next=o}return on}function mv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fp(o){var l=hp;return hp+=1,vd===null&&(vd=[]),o=Qx(vd,o,l),l=Bt,(on===null?l.memoizedState:on.next)===null&&(l=l.alternate,G.H=l===null||l.memoizedState===null?GM:PS),o}function gv(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return fp(o);if(o.$$typeof===I)return Ln(o)}throw Error(n(438,String(o)))}function ES(o){var l=null,c=Bt.updateQueue;if(c!==null&&(l=c.memoCache),l==null){var m=Bt.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(l={data:m.data.map(function(T){return T.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),c===null&&(c=mv(),Bt.updateQueue=c),c.memoCache=l,c=l.data[l.index],c===void 0)for(c=l.data[l.index]=Array(o),m=0;m<o;m++)c[m]=j;return l.index++,c}function mr(o,l){return typeof l=="function"?l(o):l}function yv(o){var l=je();return bS(l,fe,o)}function bS(o,l,c){var m=o.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=c;var T=o.baseQueue,S=m.pending;if(S!==null){if(T!==null){var M=T.next;T.next=S.next,S.next=M}l.baseQueue=T=S,m.pending=null}if(S=o.baseState,T===null)o.memoizedState=S;else{l=T.next;var P=M=null,F=null,X=l,tt=!1;do{var st=X.lane&-536870913;if(st!==X.lane?(Yt&st)===st:(pr&st)===st){var K=X.revertLane;if(K===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),st===hd&&(tt=!0);else if((pr&K)===K){X=X.next,K===hd&&(tt=!0);continue}else st={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},F===null?(P=F=st,M=S):F=F.next=st,Bt.lanes|=K,Ba|=K;st=X.action,pu&&c(S,st),S=X.hasEagerState?X.eagerState:c(S,st)}else K={lane:st,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},F===null?(P=F=K,M=S):F=F.next=K,Bt.lanes|=st,Ba|=st;X=X.next}while(X!==null&&X!==l);if(F===null?M=S:F.next=P,!Hi(S,o.memoizedState)&&(rn=!0,tt&&(c=fd,c!==null)))throw c;o.memoizedState=S,o.baseState=M,o.baseQueue=F,m.lastRenderedState=S}return T===null&&(m.lanes=0),[o.memoizedState,m.dispatch]}function CS(o){var l=je(),c=l.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=o;var m=c.dispatch,T=c.pending,S=l.memoizedState;if(T!==null){c.pending=null;var M=T=T.next;do S=o(S,M.action),M=M.next;while(M!==T);Hi(S,l.memoizedState)||(rn=!0),l.memoizedState=S,l.baseQueue===null&&(l.baseState=S),c.lastRenderedState=S}return[S,m]}function lM(o,l,c){var m=Bt,T=je(),S=Wt;if(S){if(c===void 0)throw Error(n(407));c=c()}else c=l();var M=!Hi((fe||T).memoizedState,c);if(M&&(T.memoizedState=c,rn=!0),T=T.queue,xS(dM.bind(null,m,T,o),[o]),T.getSnapshot!==l||M||on!==null&&on.memoizedState.tag&1){if(m.flags|=2048,Ad(9,{destroy:void 0},cM.bind(null,m,T,c,l),null),be===null)throw Error(n(349));S||(pr&127)!==0||uM(m,l,c)}return c}function uM(o,l,c){o.flags|=16384,o={getSnapshot:l,value:c},l=Bt.updateQueue,l===null?(l=mv(),Bt.updateQueue=l,l.stores=[o]):(c=l.stores,c===null?l.stores=[o]:c.push(o))}function cM(o,l,c,m){l.value=c,l.getSnapshot=m,hM(l)&&fM(o)}function dM(o,l,c){return c(function(){hM(l)&&fM(o)})}function hM(o){var l=o.getSnapshot;o=o.value;try{var c=l();return!Hi(o,c)}catch{return!0}}function fM(o){var l=ou(o,2);l!==null&&_i(l,o,2)}function _S(o){var l=ii();if(typeof o=="function"){var c=o;if(o=c(),pu){ba(!0);try{c()}finally{ba(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mr,lastRenderedState:o},l}function pM(o,l,c,m){return o.baseState=c,bS(o,fe,typeof m=="function"?m:mr)}function qF(o,l,c,m,T){if(Tv(o))throw Error(n(485));if(o=l.action,o!==null){var S={payload:T,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){S.listeners.push(M)}};G.T!==null?c(!0):S.isTransition=!1,m(S),c=l.pending,c===null?(S.next=l.pending=S,mM(l,S)):(S.next=c.next,l.pending=c.next=S)}}function mM(o,l){var c=l.action,m=l.payload,T=o.state;if(l.isTransition){var S=G.T,M={};G.T=M;try{var P=c(T,m),F=G.S;F!==null&&F(M,P),gM(o,l,P)}catch(X){wS(o,l,X)}finally{S!==null&&M.types!==null&&(S.types=M.types),G.T=S}}else try{S=c(T,m),gM(o,l,S)}catch(X){wS(o,l,X)}}function gM(o,l,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(m){yM(o,l,m)},function(m){return wS(o,l,m)}):yM(o,l,c)}function yM(o,l,c){l.status="fulfilled",l.value=c,vM(l),o.state=c,l=o.pending,l!==null&&(c=l.next,c===l?o.pending=null:(c=c.next,l.next=c,mM(o,c)))}function wS(o,l,c){var m=o.pending;if(o.pending=null,m!==null){m=m.next;do l.status="rejected",l.reason=c,vM(l),l=l.next;while(l!==m)}o.action=null}function vM(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function AM(o,l){return l}function TM(o,l){if(Wt){var c=be.formState;if(c!==null){t:{var m=Bt;if(Wt){if(Ie){e:{for(var T=Ie,S=ws;T.nodeType!==8;){if(!S){T=null;break e}if(T=Ms(T.nextSibling),T===null){T=null;break e}}S=T.data,T=S==="F!"||S==="F"?T:null}if(T){Ie=Ms(T.nextSibling),m=T.data==="F!";break t}}Ma(m)}m=!1}m&&(l=c[0])}}return c=ii(),c.memoizedState=c.baseState=l,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:AM,lastRenderedState:l},c.queue=m,c=OM.bind(null,Bt,m),m.dispatch=c,m=_S(!1),S=NS.bind(null,Bt,!1,m.queue),m=ii(),T={state:l,dispatch:null,action:o,pending:null},m.queue=T,c=qF.bind(null,Bt,T,S,c),T.dispatch=c,m.memoizedState=o,[l,c,!1]}function SM(o){var l=je();return EM(l,fe,o)}function EM(o,l,c){if(l=bS(o,l,AM)[0],o=yv(mr)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var m=fp(l)}catch(M){throw M===pd?av:M}else m=l;l=je();var T=l.queue,S=T.dispatch;return c!==l.memoizedState&&(Bt.flags|=2048,Ad(9,{destroy:void 0},YF.bind(null,T,c),null)),[m,S,o]}function YF(o,l){o.action=l}function bM(o){var l=je(),c=fe;if(c!==null)return EM(l,c,o);je(),l=l.memoizedState,c=je();var m=c.queue.dispatch;return c.memoizedState=o,[l,m,!1]}function Ad(o,l,c,m){return o={tag:o,create:c,deps:m,inst:l,next:null},l=Bt.updateQueue,l===null&&(l=mv(),Bt.updateQueue=l),c=l.lastEffect,c===null?l.lastEffect=o.next=o:(m=c.next,c.next=o,o.next=m,l.lastEffect=o),o}function CM(){return je().memoizedState}function vv(o,l,c,m){var T=ii();Bt.flags|=o,T.memoizedState=Ad(1|l,{destroy:void 0},c,m===void 0?null:m)}function Av(o,l,c,m){var T=je();m=m===void 0?null:m;var S=T.memoizedState.inst;fe!==null&&m!==null&&yS(m,fe.memoizedState.deps)?T.memoizedState=Ad(l,S,c,m):(Bt.flags|=o,T.memoizedState=Ad(1|l,S,c,m))}function _M(o,l){vv(8390656,8,o,l)}function xS(o,l){Av(2048,8,o,l)}function XF(o){Bt.flags|=4;var l=Bt.updateQueue;if(l===null)l=mv(),Bt.updateQueue=l,l.events=[o];else{var c=l.events;c===null?l.events=[o]:c.push(o)}}function wM(o){var l=je().memoizedState;return XF({ref:l,nextImpl:o}),function(){if((ie&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}function xM(o,l){return Av(4,2,o,l)}function MM(o,l){return Av(4,4,o,l)}function RM(o,l){if(typeof l=="function"){o=o();var c=l(o);return function(){typeof c=="function"?c():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function DM(o,l,c){c=c!=null?c.concat([o]):null,Av(4,4,RM.bind(null,l,o),c)}function MS(){}function IM(o,l){var c=je();l=l===void 0?null:l;var m=c.memoizedState;return l!==null&&yS(l,m[1])?m[0]:(c.memoizedState=[o,l],o)}function NM(o,l){var c=je();l=l===void 0?null:l;var m=c.memoizedState;if(l!==null&&yS(l,m[1]))return m[0];if(m=o(),pu){ba(!0);try{o()}finally{ba(!1)}}return c.memoizedState=[m,l],m}function RS(o,l,c){return c===void 0||(pr&1073741824)!==0&&(Yt&261930)===0?o.memoizedState=l:(o.memoizedState=c,o=P1(),Bt.lanes|=o,Ba|=o,c)}function PM(o,l,c,m){return Hi(c,l)?c:gd.current!==null?(o=RS(o,c,m),Hi(o,l)||(rn=!0),o):(pr&42)===0||(pr&1073741824)!==0&&(Yt&261930)===0?(rn=!0,o.memoizedState=c):(o=P1(),Bt.lanes|=o,Ba|=o,l)}function LM(o,l,c,m,T){var S=$.p;$.p=S!==0&&8>S?S:8;var M=G.T,P={};G.T=P,NS(o,!1,l,c);try{var F=T(),X=G.S;if(X!==null&&X(P,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var tt=HF(F,m);pp(o,l,tt,$i(o))}else pp(o,l,m,$i(o))}catch(st){pp(o,l,{then:function(){},status:"rejected",reason:st},$i())}finally{$.p=S,M!==null&&P.types!==null&&(M.types=P.types),G.T=M}}function $F(){}function DS(o,l,c,m){if(o.tag!==5)throw Error(n(476));var T=kM(o).queue;LM(o,T,l,it,c===null?$F:function(){return UM(o),c(m)})}function kM(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:it,baseState:it,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mr,lastRenderedState:it},next:null};var c={};return l.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mr,lastRenderedState:c},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function UM(o){var l=kM(o);l.next===null&&(l=o.alternate.memoizedState),pp(o,l.next.queue,{},$i())}function IS(){return Ln(Ip)}function BM(){return je().memoizedState}function FM(){return je().memoizedState}function KF(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var c=$i();o=Ia(c);var m=Na(l,o,c);m!==null&&(_i(m,l,c),up(m,l,c)),l={cache:rS()},o.payload=l;return}l=l.return}}function WF(o,l,c){var m=$i();c={lane:m,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Tv(o)?VM(l,c):(c=WT(o,l,c,m),c!==null&&(_i(c,o,m),HM(c,l,m)))}function OM(o,l,c){var m=$i();pp(o,l,c,m)}function pp(o,l,c,m){var T={lane:m,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Tv(o))VM(l,T);else{var S=o.alternate;if(o.lanes===0&&(S===null||S.lanes===0)&&(S=l.lastRenderedReducer,S!==null))try{var M=l.lastRenderedState,P=S(M,c);if(T.hasEagerState=!0,T.eagerState=P,Hi(P,M))return tv(o,l,T,0),be===null&&jy(),!1}catch{}finally{}if(c=WT(o,l,T,m),c!==null)return _i(c,o,m),HM(c,l,m),!0}return!1}function NS(o,l,c,m){if(m={lane:2,revertLane:cE(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Tv(o)){if(l)throw Error(n(479))}else l=WT(o,c,m,2),l!==null&&_i(l,o,2)}function Tv(o){var l=o.alternate;return o===Bt||l!==null&&l===Bt}function VM(o,l){yd=fv=!0;var c=o.pending;c===null?l.next=l:(l.next=c.next,c.next=l),o.pending=l}function HM(o,l,c){if((c&4194048)!==0){var m=l.lanes;m&=o.pendingLanes,c|=m,l.lanes=c,Xw(o,c)}}var mp={readContext:Ln,use:gv,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useLayoutEffect:qe,useInsertionEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useSyncExternalStore:qe,useId:qe,useHostTransitionStatus:qe,useFormState:qe,useActionState:qe,useOptimistic:qe,useMemoCache:qe,useCacheRefresh:qe};mp.useEffectEvent=qe;var GM={readContext:Ln,use:gv,useCallback:function(o,l){return ii().memoizedState=[o,l===void 0?null:l],o},useContext:Ln,useEffect:_M,useImperativeHandle:function(o,l,c){c=c!=null?c.concat([o]):null,vv(4194308,4,RM.bind(null,l,o),c)},useLayoutEffect:function(o,l){return vv(4194308,4,o,l)},useInsertionEffect:function(o,l){vv(4,2,o,l)},useMemo:function(o,l){var c=ii();l=l===void 0?null:l;var m=o();if(pu){ba(!0);try{o()}finally{ba(!1)}}return c.memoizedState=[m,l],m},useReducer:function(o,l,c){var m=ii();if(c!==void 0){var T=c(l);if(pu){ba(!0);try{c(l)}finally{ba(!1)}}}else T=l;return m.memoizedState=m.baseState=T,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:T},m.queue=o,o=o.dispatch=WF.bind(null,Bt,o),[m.memoizedState,o]},useRef:function(o){var l=ii();return o={current:o},l.memoizedState=o},useState:function(o){o=_S(o);var l=o.queue,c=OM.bind(null,Bt,l);return l.dispatch=c,[o.memoizedState,c]},useDebugValue:MS,useDeferredValue:function(o,l){var c=ii();return RS(c,o,l)},useTransition:function(){var o=_S(!1);return o=LM.bind(null,Bt,o.queue,!0,!1),ii().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,c){var m=Bt,T=ii();if(Wt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=l(),be===null)throw Error(n(349));(Yt&127)!==0||uM(m,l,c)}T.memoizedState=c;var S={value:c,getSnapshot:l};return T.queue=S,_M(dM.bind(null,m,S,o),[o]),m.flags|=2048,Ad(9,{destroy:void 0},cM.bind(null,m,S,c,l),null),c},useId:function(){var o=ii(),l=be.identifierPrefix;if(Wt){var c=wo,m=_o;c=(m&~(1<<32-Vi(m)-1)).toString(32)+c,l="_"+l+"R_"+c,c=pv++,0<c&&(l+="H"+c.toString(32)),l+="_"}else c=GF++,l="_"+l+"r_"+c.toString(32)+"_";return o.memoizedState=l},useHostTransitionStatus:IS,useFormState:TM,useActionState:TM,useOptimistic:function(o){var l=ii();l.memoizedState=l.baseState=o;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=c,l=NS.bind(null,Bt,!0,c),c.dispatch=l,[o,l]},useMemoCache:ES,useCacheRefresh:function(){return ii().memoizedState=KF.bind(null,Bt)},useEffectEvent:function(o){var l=ii(),c={impl:o};return l.memoizedState=c,function(){if((ie&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}},PS={readContext:Ln,use:gv,useCallback:IM,useContext:Ln,useEffect:xS,useImperativeHandle:DM,useInsertionEffect:xM,useLayoutEffect:MM,useMemo:NM,useReducer:yv,useRef:CM,useState:function(){return yv(mr)},useDebugValue:MS,useDeferredValue:function(o,l){var c=je();return PM(c,fe.memoizedState,o,l)},useTransition:function(){var o=yv(mr)[0],l=je().memoizedState;return[typeof o=="boolean"?o:fp(o),l]},useSyncExternalStore:lM,useId:BM,useHostTransitionStatus:IS,useFormState:SM,useActionState:SM,useOptimistic:function(o,l){var c=je();return pM(c,fe,o,l)},useMemoCache:ES,useCacheRefresh:FM};PS.useEffectEvent=wM;var zM={readContext:Ln,use:gv,useCallback:IM,useContext:Ln,useEffect:xS,useImperativeHandle:DM,useInsertionEffect:xM,useLayoutEffect:MM,useMemo:NM,useReducer:CS,useRef:CM,useState:function(){return CS(mr)},useDebugValue:MS,useDeferredValue:function(o,l){var c=je();return fe===null?RS(c,o,l):PM(c,fe.memoizedState,o,l)},useTransition:function(){var o=CS(mr)[0],l=je().memoizedState;return[typeof o=="boolean"?o:fp(o),l]},useSyncExternalStore:lM,useId:BM,useHostTransitionStatus:IS,useFormState:bM,useActionState:bM,useOptimistic:function(o,l){var c=je();return fe!==null?pM(c,fe,o,l):(c.baseState=o,[o,c.queue.dispatch])},useMemoCache:ES,useCacheRefresh:FM};zM.useEffectEvent=wM;function LS(o,l,c,m){l=o.memoizedState,c=c(m,l),c=c==null?l:y({},l,c),o.memoizedState=c,o.lanes===0&&(o.updateQueue.baseState=c)}var kS={enqueueSetState:function(o,l,c){o=o._reactInternals;var m=$i(),T=Ia(m);T.payload=l,c!=null&&(T.callback=c),l=Na(o,T,m),l!==null&&(_i(l,o,m),up(l,o,m))},enqueueReplaceState:function(o,l,c){o=o._reactInternals;var m=$i(),T=Ia(m);T.tag=1,T.payload=l,c!=null&&(T.callback=c),l=Na(o,T,m),l!==null&&(_i(l,o,m),up(l,o,m))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var c=$i(),m=Ia(c);m.tag=2,l!=null&&(m.callback=l),l=Na(o,m,c),l!==null&&(_i(l,o,c),up(l,o,c))}};function qM(o,l,c,m,T,S,M){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,S,M):l.prototype&&l.prototype.isPureReactComponent?!ep(c,m)||!ep(T,S):!0}function YM(o,l,c,m){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(c,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(c,m),l.state!==o&&kS.enqueueReplaceState(l,l.state,null)}function mu(o,l){var c=l;if("ref"in l){c={};for(var m in l)m!=="ref"&&(c[m]=l[m])}if(o=o.defaultProps){c===l&&(c=y({},c));for(var T in o)c[T]===void 0&&(c[T]=o[T])}return c}function XM(o){Zy(o)}function $M(o){console.error(o)}function KM(o){Zy(o)}function Sv(o,l){try{var c=o.onUncaughtError;c(l.value,{componentStack:l.stack})}catch(m){setTimeout(function(){throw m})}}function WM(o,l,c){try{var m=o.onCaughtError;m(c.value,{componentStack:c.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function US(o,l,c){return c=Ia(c),c.tag=3,c.payload={element:null},c.callback=function(){Sv(o,l)},c}function JM(o){return o=Ia(o),o.tag=3,o}function QM(o,l,c,m){var T=c.type.getDerivedStateFromError;if(typeof T=="function"){var S=m.value;o.payload=function(){return T(S)},o.callback=function(){WM(l,c,m)}}var M=c.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(o.callback=function(){WM(l,c,m),typeof T!="function"&&(Fa===null?Fa=new Set([this]):Fa.add(this));var P=m.stack;this.componentDidCatch(m.value,{componentStack:P!==null?P:""})})}function JF(o,l,c,m,T){if(c.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(l=c.alternate,l!==null&&dd(l,c,T,!0),c=zi.current,c!==null){switch(c.tag){case 31:case 13:return xs===null?Pv():c.alternate===null&&Ye===0&&(Ye=3),c.flags&=-257,c.flags|=65536,c.lanes=T,m===lv?c.flags|=16384:(l=c.updateQueue,l===null?c.updateQueue=new Set([m]):l.add(m),aE(o,m,T)),!1;case 22:return c.flags|=65536,m===lv?c.flags|=16384:(l=c.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([m])},c.updateQueue=l):(c=l.retryQueue,c===null?l.retryQueue=new Set([m]):c.add(m)),aE(o,m,T)),!1}throw Error(n(435,c.tag))}return aE(o,m,T),Pv(),!1}if(Wt)return l=zi.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=T,m!==eS&&(o=Error(n(422),{cause:m}),sp(bs(o,c)))):(m!==eS&&(l=Error(n(423),{cause:m}),sp(bs(l,c))),o=o.current.alternate,o.flags|=65536,T&=-T,o.lanes|=T,m=bs(m,c),T=US(o.stateNode,m,T),hS(o,T),Ye!==4&&(Ye=2)),!1;var S=Error(n(520),{cause:m});if(S=bs(S,c),bp===null?bp=[S]:bp.push(S),Ye!==4&&(Ye=2),l===null)return!0;m=bs(m,c),c=l;do{switch(c.tag){case 3:return c.flags|=65536,o=T&-T,c.lanes|=o,o=US(c.stateNode,m,o),hS(c,o),!1;case 1:if(l=c.type,S=c.stateNode,(c.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Fa===null||!Fa.has(S))))return c.flags|=65536,T&=-T,c.lanes|=T,T=JM(T),QM(T,o,c,m),hS(c,T),!1}c=c.return}while(c!==null);return!1}var BS=Error(n(461)),rn=!1;function kn(o,l,c,m){l.child=o===null?eM(l,null,c,m):fu(l,o.child,c,m)}function ZM(o,l,c,m,T){c=c.render;var S=l.ref;if("ref"in m){var M={};for(var P in m)P!=="ref"&&(M[P]=m[P])}else M=m;return uu(l),m=vS(o,l,c,M,S,T),P=AS(),o!==null&&!rn?(TS(o,l,T),gr(o,l,T)):(Wt&&P&&jT(l),l.flags|=1,kn(o,l,m,T),l.child)}function jM(o,l,c,m,T){if(o===null){var S=c.type;return typeof S=="function"&&!JT(S)&&S.defaultProps===void 0&&c.compare===null?(l.tag=15,l.type=S,t1(o,l,S,m,T)):(o=nv(c.type,null,m,l,l.mode,T),o.ref=l.ref,o.return=l,l.child=o)}if(S=o.child,!YS(o,T)){var M=S.memoizedProps;if(c=c.compare,c=c!==null?c:ep,c(M,m)&&o.ref===l.ref)return gr(o,l,T)}return l.flags|=1,o=cr(S,m),o.ref=l.ref,o.return=l,l.child=o}function t1(o,l,c,m,T){if(o!==null){var S=o.memoizedProps;if(ep(S,m)&&o.ref===l.ref)if(rn=!1,l.pendingProps=m=S,YS(o,T))(o.flags&131072)!==0&&(rn=!0);else return l.lanes=o.lanes,gr(o,l,T)}return FS(o,l,c,m,T)}function e1(o,l,c,m){var T=m.children,S=o!==null?o.memoizedState:null;if(o===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((l.flags&128)!==0){if(S=S!==null?S.baseLanes|c:c,o!==null){for(m=l.child=o.child,T=0;m!==null;)T=T|m.lanes|m.childLanes,m=m.sibling;m=T&~S}else m=0,l.child=null;return n1(o,l,S,c,m)}if((c&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&rv(l,S!==null?S.cachePool:null),S!==null?sM(l,S):pS(),oM(l);else return m=l.lanes=536870912,n1(o,l,S!==null?S.baseLanes|c:c,c,m)}else S!==null?(rv(l,S.cachePool),sM(l,S),La(),l.memoizedState=null):(o!==null&&rv(l,null),pS(),La());return kn(o,l,T,c),l.child}function gp(o,l){return o!==null&&o.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function n1(o,l,c,m,T){var S=lS();return S=S===null?null:{parent:sn._currentValue,pool:S},l.memoizedState={baseLanes:c,cachePool:S},o!==null&&rv(l,null),pS(),oM(l),o!==null&&dd(o,l,m,!0),l.childLanes=T,null}function Ev(o,l){return l=Cv({mode:l.mode,children:l.children},o.mode),l.ref=o.ref,o.child=l,l.return=o,l}function i1(o,l,c){return fu(l,o.child,null,c),o=Ev(l,l.pendingProps),o.flags|=2,qi(l),l.memoizedState=null,o}function QF(o,l,c){var m=l.pendingProps,T=(l.flags&128)!==0;if(l.flags&=-129,o===null){if(Wt){if(m.mode==="hidden")return o=Ev(l,m),l.lanes=536870912,gp(null,o);if(gS(l),(o=Ie)?(o=mR(o,ws),o=o!==null&&o.data==="&"?o:null,o!==null&&(l.memoizedState={dehydrated:o,treeContext:wa!==null?{id:_o,overflow:wo}:null,retryLane:536870912,hydrationErrors:null},c=Vx(o),c.return=l,l.child=c,Pn=l,Ie=null)):o=null,o===null)throw Ma(l);return l.lanes=536870912,null}return Ev(l,m)}var S=o.memoizedState;if(S!==null){var M=S.dehydrated;if(gS(l),T)if(l.flags&256)l.flags&=-257,l=i1(o,l,c);else if(l.memoizedState!==null)l.child=o.child,l.flags|=128,l=null;else throw Error(n(558));else if(rn||dd(o,l,c,!1),T=(c&o.childLanes)!==0,rn||T){if(m=be,m!==null&&(M=$w(m,c),M!==0&&M!==S.retryLane))throw S.retryLane=M,ou(o,M),_i(m,o,M),BS;Pv(),l=i1(o,l,c)}else o=S.treeContext,Ie=Ms(M.nextSibling),Pn=l,Wt=!0,xa=null,ws=!1,o!==null&&zx(l,o),l=Ev(l,m),l.flags|=4096;return l}return o=cr(o.child,{mode:m.mode,children:m.children}),o.ref=l.ref,l.child=o,o.return=l,o}function bv(o,l){var c=l.ref;if(c===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(o===null||o.ref!==c)&&(l.flags|=4194816)}}function FS(o,l,c,m,T){return uu(l),c=vS(o,l,c,m,void 0,T),m=AS(),o!==null&&!rn?(TS(o,l,T),gr(o,l,T)):(Wt&&m&&jT(l),l.flags|=1,kn(o,l,c,T),l.child)}function s1(o,l,c,m,T,S){return uu(l),l.updateQueue=null,c=aM(l,m,c,T),rM(o),m=AS(),o!==null&&!rn?(TS(o,l,S),gr(o,l,S)):(Wt&&m&&jT(l),l.flags|=1,kn(o,l,c,S),l.child)}function o1(o,l,c,m,T){if(uu(l),l.stateNode===null){var S=ad,M=c.contextType;typeof M=="object"&&M!==null&&(S=Ln(M)),S=new c(m,S),l.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=kS,l.stateNode=S,S._reactInternals=l,S=l.stateNode,S.props=m,S.state=l.memoizedState,S.refs={},cS(l),M=c.contextType,S.context=typeof M=="object"&&M!==null?Ln(M):ad,S.state=l.memoizedState,M=c.getDerivedStateFromProps,typeof M=="function"&&(LS(l,c,M,m),S.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(M=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),M!==S.state&&kS.enqueueReplaceState(S,S.state,null),dp(l,m,S,T),cp(),S.state=l.memoizedState),typeof S.componentDidMount=="function"&&(l.flags|=4194308),m=!0}else if(o===null){S=l.stateNode;var P=l.memoizedProps,F=mu(c,P);S.props=F;var X=S.context,tt=c.contextType;M=ad,typeof tt=="object"&&tt!==null&&(M=Ln(tt));var st=c.getDerivedStateFromProps;tt=typeof st=="function"||typeof S.getSnapshotBeforeUpdate=="function",P=l.pendingProps!==P,tt||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(P||X!==M)&&YM(l,S,m,M),Da=!1;var K=l.memoizedState;S.state=K,dp(l,m,S,T),cp(),X=l.memoizedState,P||K!==X||Da?(typeof st=="function"&&(LS(l,c,st,m),X=l.memoizedState),(F=Da||qM(l,c,F,m,K,X,M))?(tt||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(l.flags|=4194308)):(typeof S.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=X),S.props=m,S.state=X,S.context=M,m=F):(typeof S.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{S=l.stateNode,dS(o,l),M=l.memoizedProps,tt=mu(c,M),S.props=tt,st=l.pendingProps,K=S.context,X=c.contextType,F=ad,typeof X=="object"&&X!==null&&(F=Ln(X)),P=c.getDerivedStateFromProps,(X=typeof P=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(M!==st||K!==F)&&YM(l,S,m,F),Da=!1,K=l.memoizedState,S.state=K,dp(l,m,S,T),cp();var Q=l.memoizedState;M!==st||K!==Q||Da||o!==null&&o.dependencies!==null&&sv(o.dependencies)?(typeof P=="function"&&(LS(l,c,P,m),Q=l.memoizedState),(tt=Da||qM(l,c,tt,m,K,Q,F)||o!==null&&o.dependencies!==null&&sv(o.dependencies))?(X||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(m,Q,F),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(m,Q,F)),typeof S.componentDidUpdate=="function"&&(l.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof S.componentDidUpdate!="function"||M===o.memoizedProps&&K===o.memoizedState||(l.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||M===o.memoizedProps&&K===o.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=Q),S.props=m,S.state=Q,S.context=F,m=tt):(typeof S.componentDidUpdate!="function"||M===o.memoizedProps&&K===o.memoizedState||(l.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||M===o.memoizedProps&&K===o.memoizedState||(l.flags|=1024),m=!1)}return S=m,bv(o,l),m=(l.flags&128)!==0,S||m?(S=l.stateNode,c=m&&typeof c.getDerivedStateFromError!="function"?null:S.render(),l.flags|=1,o!==null&&m?(l.child=fu(l,o.child,null,T),l.child=fu(l,null,c,T)):kn(o,l,c,T),l.memoizedState=S.state,o=l.child):o=gr(o,l,T),o}function r1(o,l,c,m){return au(),l.flags|=256,kn(o,l,c,m),l.child}var OS={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function VS(o){return{baseLanes:o,cachePool:Wx()}}function HS(o,l,c){return o=o!==null?o.childLanes&~c:0,l&&(o|=Xi),o}function a1(o,l,c){var m=l.pendingProps,T=!1,S=(l.flags&128)!==0,M;if((M=S)||(M=o!==null&&o.memoizedState===null?!1:(Ze.current&2)!==0),M&&(T=!0,l.flags&=-129),M=(l.flags&32)!==0,l.flags&=-33,o===null){if(Wt){if(T?Pa(l):La(),(o=Ie)?(o=mR(o,ws),o=o!==null&&o.data!=="&"?o:null,o!==null&&(l.memoizedState={dehydrated:o,treeContext:wa!==null?{id:_o,overflow:wo}:null,retryLane:536870912,hydrationErrors:null},c=Vx(o),c.return=l,l.child=c,Pn=l,Ie=null)):o=null,o===null)throw Ma(l);return bE(o)?l.lanes=32:l.lanes=536870912,null}var P=m.children;return m=m.fallback,T?(La(),T=l.mode,P=Cv({mode:"hidden",children:P},T),m=ru(m,T,c,null),P.return=l,m.return=l,P.sibling=m,l.child=P,m=l.child,m.memoizedState=VS(c),m.childLanes=HS(o,M,c),l.memoizedState=OS,gp(null,m)):(Pa(l),GS(l,P))}var F=o.memoizedState;if(F!==null&&(P=F.dehydrated,P!==null)){if(S)l.flags&256?(Pa(l),l.flags&=-257,l=zS(o,l,c)):l.memoizedState!==null?(La(),l.child=o.child,l.flags|=128,l=null):(La(),P=m.fallback,T=l.mode,m=Cv({mode:"visible",children:m.children},T),P=ru(P,T,c,null),P.flags|=2,m.return=l,P.return=l,m.sibling=P,l.child=m,fu(l,o.child,null,c),m=l.child,m.memoizedState=VS(c),m.childLanes=HS(o,M,c),l.memoizedState=OS,l=gp(null,m));else if(Pa(l),bE(P)){if(M=P.nextSibling&&P.nextSibling.dataset,M)var X=M.dgst;M=X,m=Error(n(419)),m.stack="",m.digest=M,sp({value:m,source:null,stack:null}),l=zS(o,l,c)}else if(rn||dd(o,l,c,!1),M=(c&o.childLanes)!==0,rn||M){if(M=be,M!==null&&(m=$w(M,c),m!==0&&m!==F.retryLane))throw F.retryLane=m,ou(o,m),_i(M,o,m),BS;EE(P)||Pv(),l=zS(o,l,c)}else EE(P)?(l.flags|=192,l.child=o.child,l=null):(o=F.treeContext,Ie=Ms(P.nextSibling),Pn=l,Wt=!0,xa=null,ws=!1,o!==null&&zx(l,o),l=GS(l,m.children),l.flags|=4096);return l}return T?(La(),P=m.fallback,T=l.mode,F=o.child,X=F.sibling,m=cr(F,{mode:"hidden",children:m.children}),m.subtreeFlags=F.subtreeFlags&65011712,X!==null?P=cr(X,P):(P=ru(P,T,c,null),P.flags|=2),P.return=l,m.return=l,m.sibling=P,l.child=m,gp(null,m),m=l.child,P=o.child.memoizedState,P===null?P=VS(c):(T=P.cachePool,T!==null?(F=sn._currentValue,T=T.parent!==F?{parent:F,pool:F}:T):T=Wx(),P={baseLanes:P.baseLanes|c,cachePool:T}),m.memoizedState=P,m.childLanes=HS(o,M,c),l.memoizedState=OS,gp(o.child,m)):(Pa(l),c=o.child,o=c.sibling,c=cr(c,{mode:"visible",children:m.children}),c.return=l,c.sibling=null,o!==null&&(M=l.deletions,M===null?(l.deletions=[o],l.flags|=16):M.push(o)),l.child=c,l.memoizedState=null,c)}function GS(o,l){return l=Cv({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function Cv(o,l){return o=Gi(22,o,null,l),o.lanes=0,o}function zS(o,l,c){return fu(l,o.child,null,c),o=GS(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function l1(o,l,c){o.lanes|=l;var m=o.alternate;m!==null&&(m.lanes|=l),sS(o.return,l,c)}function qS(o,l,c,m,T,S){var M=o.memoizedState;M===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:c,tailMode:T,treeForkCount:S}:(M.isBackwards=l,M.rendering=null,M.renderingStartTime=0,M.last=m,M.tail=c,M.tailMode=T,M.treeForkCount=S)}function u1(o,l,c){var m=l.pendingProps,T=m.revealOrder,S=m.tail;m=m.children;var M=Ze.current,P=(M&2)!==0;if(P?(M=M&1|2,l.flags|=128):M&=1,ot(Ze,M),kn(o,l,m,c),m=Wt?ip:0,!P&&o!==null&&(o.flags&128)!==0)t:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&l1(o,c,l);else if(o.tag===19)l1(o,c,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break t;for(;o.sibling===null;){if(o.return===null||o.return===l)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(T){case"forwards":for(c=l.child,T=null;c!==null;)o=c.alternate,o!==null&&hv(o)===null&&(T=c),c=c.sibling;c=T,c===null?(T=l.child,l.child=null):(T=c.sibling,c.sibling=null),qS(l,!1,T,c,S,m);break;case"backwards":case"unstable_legacy-backwards":for(c=null,T=l.child,l.child=null;T!==null;){if(o=T.alternate,o!==null&&hv(o)===null){l.child=T;break}o=T.sibling,T.sibling=c,c=T,T=o}qS(l,!0,c,null,S,m);break;case"together":qS(l,!1,null,null,void 0,m);break;default:l.memoizedState=null}return l.child}function gr(o,l,c){if(o!==null&&(l.dependencies=o.dependencies),Ba|=l.lanes,(c&l.childLanes)===0)if(o!==null){if(dd(o,l,c,!1),(c&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(n(153));if(l.child!==null){for(o=l.child,c=cr(o,o.pendingProps),l.child=c,c.return=l;o.sibling!==null;)o=o.sibling,c=c.sibling=cr(o,o.pendingProps),c.return=l;c.sibling=null}return l.child}function YS(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&sv(o)))}function ZF(o,l,c){switch(l.tag){case 3:ze(l,l.stateNode.containerInfo),Ra(l,sn,o.memoizedState.cache),au();break;case 27:case 5:yi(l);break;case 4:ze(l,l.stateNode.containerInfo);break;case 10:Ra(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,gS(l),null;break;case 13:var m=l.memoizedState;if(m!==null)return m.dehydrated!==null?(Pa(l),l.flags|=128,null):(c&l.child.childLanes)!==0?a1(o,l,c):(Pa(l),o=gr(o,l,c),o!==null?o.sibling:null);Pa(l);break;case 19:var T=(o.flags&128)!==0;if(m=(c&l.childLanes)!==0,m||(dd(o,l,c,!1),m=(c&l.childLanes)!==0),T){if(m)return u1(o,l,c);l.flags|=128}if(T=l.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),ot(Ze,Ze.current),m)break;return null;case 22:return l.lanes=0,e1(o,l,c,l.pendingProps);case 24:Ra(l,sn,o.memoizedState.cache)}return gr(o,l,c)}function c1(o,l,c){if(o!==null)if(o.memoizedProps!==l.pendingProps)rn=!0;else{if(!YS(o,c)&&(l.flags&128)===0)return rn=!1,ZF(o,l,c);rn=(o.flags&131072)!==0}else rn=!1,Wt&&(l.flags&1048576)!==0&&Gx(l,ip,l.index);switch(l.lanes=0,l.tag){case 16:t:{var m=l.pendingProps;if(o=du(l.elementType),l.type=o,typeof o=="function")JT(o)?(m=mu(o,m),l.tag=1,l=o1(null,l,o,m,c)):(l.tag=0,l=FS(null,l,o,m,c));else{if(o!=null){var T=o.$$typeof;if(T===L){l.tag=11,l=ZM(null,l,o,m,c);break t}else if(T===B){l.tag=14,l=jM(null,l,o,m,c);break t}}throw l=lt(o)||o,Error(n(306,l,""))}}return l;case 0:return FS(o,l,l.type,l.pendingProps,c);case 1:return m=l.type,T=mu(m,l.pendingProps),o1(o,l,m,T,c);case 3:t:{if(ze(l,l.stateNode.containerInfo),o===null)throw Error(n(387));m=l.pendingProps;var S=l.memoizedState;T=S.element,dS(o,l),dp(l,m,null,c);var M=l.memoizedState;if(m=M.cache,Ra(l,sn,m),m!==S.cache&&oS(l,[sn],c,!0),cp(),m=M.element,S.isDehydrated)if(S={element:m,isDehydrated:!1,cache:M.cache},l.updateQueue.baseState=S,l.memoizedState=S,l.flags&256){l=r1(o,l,m,c);break t}else if(m!==T){T=bs(Error(n(424)),l),sp(T),l=r1(o,l,m,c);break t}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Ie=Ms(o.firstChild),Pn=l,Wt=!0,xa=null,ws=!0,c=eM(l,null,m,c),l.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(au(),m===T){l=gr(o,l,c);break t}kn(o,l,m,c)}l=l.child}return l;case 26:return bv(o,l),o===null?(c=SR(l.type,null,l.pendingProps,null))?l.memoizedState=c:Wt||(c=l.type,o=l.pendingProps,m=Vv(Ct.current).createElement(c),m[Nn]=l,m[Ai]=o,Un(m,c,o),Sn(m),l.stateNode=m):l.memoizedState=SR(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return yi(l),o===null&&Wt&&(m=l.stateNode=vR(l.type,l.pendingProps,Ct.current),Pn=l,ws=!0,T=Ie,Ga(l.type)?(CE=T,Ie=Ms(m.firstChild)):Ie=T),kn(o,l,l.pendingProps.children,c),bv(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&Wt&&((T=m=Ie)&&(m=MO(m,l.type,l.pendingProps,ws),m!==null?(l.stateNode=m,Pn=l,Ie=Ms(m.firstChild),ws=!1,T=!0):T=!1),T||Ma(l)),yi(l),T=l.type,S=l.pendingProps,M=o!==null?o.memoizedProps:null,m=S.children,AE(T,S)?m=null:M!==null&&AE(T,M)&&(l.flags|=32),l.memoizedState!==null&&(T=vS(o,l,zF,null,null,c),Ip._currentValue=T),bv(o,l),kn(o,l,m,c),l.child;case 6:return o===null&&Wt&&((o=c=Ie)&&(c=RO(c,l.pendingProps,ws),c!==null?(l.stateNode=c,Pn=l,Ie=null,o=!0):o=!1),o||Ma(l)),null;case 13:return a1(o,l,c);case 4:return ze(l,l.stateNode.containerInfo),m=l.pendingProps,o===null?l.child=fu(l,null,m,c):kn(o,l,m,c),l.child;case 11:return ZM(o,l,l.type,l.pendingProps,c);case 7:return kn(o,l,l.pendingProps,c),l.child;case 8:return kn(o,l,l.pendingProps.children,c),l.child;case 12:return kn(o,l,l.pendingProps.children,c),l.child;case 10:return m=l.pendingProps,Ra(l,l.type,m.value),kn(o,l,m.children,c),l.child;case 9:return T=l.type._context,m=l.pendingProps.children,uu(l),T=Ln(T),m=m(T),l.flags|=1,kn(o,l,m,c),l.child;case 14:return jM(o,l,l.type,l.pendingProps,c);case 15:return t1(o,l,l.type,l.pendingProps,c);case 19:return u1(o,l,c);case 31:return QF(o,l,c);case 22:return e1(o,l,c,l.pendingProps);case 24:return uu(l),m=Ln(sn),o===null?(T=lS(),T===null&&(T=be,S=rS(),T.pooledCache=S,S.refCount++,S!==null&&(T.pooledCacheLanes|=c),T=S),l.memoizedState={parent:m,cache:T},cS(l),Ra(l,sn,T)):((o.lanes&c)!==0&&(dS(o,l),dp(l,null,null,c),cp()),T=o.memoizedState,S=l.memoizedState,T.parent!==m?(T={parent:m,cache:m},l.memoizedState=T,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=T),Ra(l,sn,m)):(m=S.cache,Ra(l,sn,m),m!==T.cache&&oS(l,[sn],c,!0))),kn(o,l,l.pendingProps.children,c),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function yr(o){o.flags|=4}function XS(o,l,c,m,T){if((l=(o.mode&32)!==0)&&(l=!1),l){if(o.flags|=16777216,(T&335544128)===T)if(o.stateNode.complete)o.flags|=8192;else if(B1())o.flags|=8192;else throw hu=lv,uS}else o.flags&=-16777217}function d1(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!wR(l))if(B1())o.flags|=8192;else throw hu=lv,uS}function _v(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?qw():536870912,o.lanes|=l,bd|=l)}function yp(o,l){if(!Wt)switch(o.tailMode){case"hidden":l=o.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?o.tail=null:c.sibling=null;break;case"collapsed":c=o.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function Ne(o){var l=o.alternate!==null&&o.alternate.child===o.child,c=0,m=0;if(l)for(var T=o.child;T!==null;)c|=T.lanes|T.childLanes,m|=T.subtreeFlags&65011712,m|=T.flags&65011712,T.return=o,T=T.sibling;else for(T=o.child;T!==null;)c|=T.lanes|T.childLanes,m|=T.subtreeFlags,m|=T.flags,T.return=o,T=T.sibling;return o.subtreeFlags|=m,o.childLanes=c,l}function jF(o,l,c){var m=l.pendingProps;switch(tS(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(l),null;case 1:return Ne(l),null;case 3:return c=l.stateNode,m=null,o!==null&&(m=o.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),fr(sn),Ee(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(o===null||o.child===null)&&(cd(l)?yr(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,nS())),Ne(l),null;case 26:var T=l.type,S=l.memoizedState;return o===null?(yr(l),S!==null?(Ne(l),d1(l,S)):(Ne(l),XS(l,T,null,m,c))):S?S!==o.memoizedState?(yr(l),Ne(l),d1(l,S)):(Ne(l),l.flags&=-16777217):(o=o.memoizedProps,o!==m&&yr(l),Ne(l),XS(l,T,o,m,c)),null;case 27:if(xt(l),c=Ct.current,T=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==m&&yr(l);else{if(!m){if(l.stateNode===null)throw Error(n(166));return Ne(l),null}o=ut.current,cd(l)?qx(l):(o=vR(T,m,c),l.stateNode=o,yr(l))}return Ne(l),null;case 5:if(xt(l),T=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==m&&yr(l);else{if(!m){if(l.stateNode===null)throw Error(n(166));return Ne(l),null}if(S=ut.current,cd(l))qx(l);else{var M=Vv(Ct.current);switch(S){case 1:S=M.createElementNS("http://www.w3.org/2000/svg",T);break;case 2:S=M.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;default:switch(T){case"svg":S=M.createElementNS("http://www.w3.org/2000/svg",T);break;case"math":S=M.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;case"script":S=M.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof m.is=="string"?M.createElement("select",{is:m.is}):M.createElement("select"),m.multiple?S.multiple=!0:m.size&&(S.size=m.size);break;default:S=typeof m.is=="string"?M.createElement(T,{is:m.is}):M.createElement(T)}}S[Nn]=l,S[Ai]=m;t:for(M=l.child;M!==null;){if(M.tag===5||M.tag===6)S.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===l)break t;for(;M.sibling===null;){if(M.return===null||M.return===l)break t;M=M.return}M.sibling.return=M.return,M=M.sibling}l.stateNode=S;t:switch(Un(S,T,m),T){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break t;case"img":m=!0;break t;default:m=!1}m&&yr(l)}}return Ne(l),XS(l,l.type,o===null?null:o.memoizedProps,l.pendingProps,c),null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==m&&yr(l);else{if(typeof m!="string"&&l.stateNode===null)throw Error(n(166));if(o=Ct.current,cd(l)){if(o=l.stateNode,c=l.memoizedProps,m=null,T=Pn,T!==null)switch(T.tag){case 27:case 5:m=T.memoizedProps}o[Nn]=l,o=!!(o.nodeValue===c||m!==null&&m.suppressHydrationWarning===!0||aR(o.nodeValue,c)),o||Ma(l,!0)}else o=Vv(o).createTextNode(m),o[Nn]=l,l.stateNode=o}return Ne(l),null;case 31:if(c=l.memoizedState,o===null||o.memoizedState!==null){if(m=cd(l),c!==null){if(o===null){if(!m)throw Error(n(318));if(o=l.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(557));o[Nn]=l}else au(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ne(l),o=!1}else c=nS(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=c),o=!0;if(!o)return l.flags&256?(qi(l),l):(qi(l),null);if((l.flags&128)!==0)throw Error(n(558))}return Ne(l),null;case 13:if(m=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(T=cd(l),m!==null&&m.dehydrated!==null){if(o===null){if(!T)throw Error(n(318));if(T=l.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(n(317));T[Nn]=l}else au(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ne(l),T=!1}else T=nS(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=T),T=!0;if(!T)return l.flags&256?(qi(l),l):(qi(l),null)}return qi(l),(l.flags&128)!==0?(l.lanes=c,l):(c=m!==null,o=o!==null&&o.memoizedState!==null,c&&(m=l.child,T=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(T=m.alternate.memoizedState.cachePool.pool),S=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(S=m.memoizedState.cachePool.pool),S!==T&&(m.flags|=2048)),c!==o&&c&&(l.child.flags|=8192),_v(l,l.updateQueue),Ne(l),null);case 4:return Ee(),o===null&&pE(l.stateNode.containerInfo),Ne(l),null;case 10:return fr(l.type),Ne(l),null;case 19:if(J(Ze),m=l.memoizedState,m===null)return Ne(l),null;if(T=(l.flags&128)!==0,S=m.rendering,S===null)if(T)yp(m,!1);else{if(Ye!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(S=hv(o),S!==null){for(l.flags|=128,yp(m,!1),o=S.updateQueue,l.updateQueue=o,_v(l,o),l.subtreeFlags=0,o=c,c=l.child;c!==null;)Ox(c,o),c=c.sibling;return ot(Ze,Ze.current&1|2),Wt&&dr(l,m.treeForkCount),l.child}o=o.sibling}m.tail!==null&&Fi()>Dv&&(l.flags|=128,T=!0,yp(m,!1),l.lanes=4194304)}else{if(!T)if(o=hv(S),o!==null){if(l.flags|=128,T=!0,o=o.updateQueue,l.updateQueue=o,_v(l,o),yp(m,!0),m.tail===null&&m.tailMode==="hidden"&&!S.alternate&&!Wt)return Ne(l),null}else 2*Fi()-m.renderingStartTime>Dv&&c!==536870912&&(l.flags|=128,T=!0,yp(m,!1),l.lanes=4194304);m.isBackwards?(S.sibling=l.child,l.child=S):(o=m.last,o!==null?o.sibling=S:l.child=S,m.last=S)}return m.tail!==null?(o=m.tail,m.rendering=o,m.tail=o.sibling,m.renderingStartTime=Fi(),o.sibling=null,c=Ze.current,ot(Ze,T?c&1|2:c&1),Wt&&dr(l,m.treeForkCount),o):(Ne(l),null);case 22:case 23:return qi(l),mS(),m=l.memoizedState!==null,o!==null?o.memoizedState!==null!==m&&(l.flags|=8192):m&&(l.flags|=8192),m?(c&536870912)!==0&&(l.flags&128)===0&&(Ne(l),l.subtreeFlags&6&&(l.flags|=8192)):Ne(l),c=l.updateQueue,c!==null&&_v(l,c.retryQueue),c=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==c&&(l.flags|=2048),o!==null&&J(cu),null;case 24:return c=null,o!==null&&(c=o.memoizedState.cache),l.memoizedState.cache!==c&&(l.flags|=2048),fr(sn),Ne(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function tO(o,l){switch(tS(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return fr(sn),Ee(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return xt(l),null;case 31:if(l.memoizedState!==null){if(qi(l),l.alternate===null)throw Error(n(340));au()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 13:if(qi(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(n(340));au()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return J(Ze),null;case 4:return Ee(),null;case 10:return fr(l.type),null;case 22:case 23:return qi(l),mS(),o!==null&&J(cu),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return fr(sn),null;case 25:return null;default:return null}}function h1(o,l){switch(tS(l),l.tag){case 3:fr(sn),Ee();break;case 26:case 27:case 5:xt(l);break;case 4:Ee();break;case 31:l.memoizedState!==null&&qi(l);break;case 13:qi(l);break;case 19:J(Ze);break;case 10:fr(l.type);break;case 22:case 23:qi(l),mS(),o!==null&&J(cu);break;case 24:fr(sn)}}function vp(o,l){try{var c=l.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var T=m.next;c=T;do{if((c.tag&o)===o){m=void 0;var S=c.create,M=c.inst;m=S(),M.destroy=m}c=c.next}while(c!==T)}}catch(P){ue(l,l.return,P)}}function ka(o,l,c){try{var m=l.updateQueue,T=m!==null?m.lastEffect:null;if(T!==null){var S=T.next;m=S;do{if((m.tag&o)===o){var M=m.inst,P=M.destroy;if(P!==void 0){M.destroy=void 0,T=l;var F=c,X=P;try{X()}catch(tt){ue(T,F,tt)}}}m=m.next}while(m!==S)}}catch(tt){ue(l,l.return,tt)}}function f1(o){var l=o.updateQueue;if(l!==null){var c=o.stateNode;try{iM(l,c)}catch(m){ue(o,o.return,m)}}}function p1(o,l,c){c.props=mu(o.type,o.memoizedProps),c.state=o.memoizedState;try{c.componentWillUnmount()}catch(m){ue(o,l,m)}}function Ap(o,l){try{var c=o.ref;if(c!==null){switch(o.tag){case 26:case 27:case 5:var m=o.stateNode;break;case 30:m=o.stateNode;break;default:m=o.stateNode}typeof c=="function"?o.refCleanup=c(m):c.current=m}}catch(T){ue(o,l,T)}}function xo(o,l){var c=o.ref,m=o.refCleanup;if(c!==null)if(typeof m=="function")try{m()}catch(T){ue(o,l,T)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(T){ue(o,l,T)}else c.current=null}function m1(o){var l=o.type,c=o.memoizedProps,m=o.stateNode;try{t:switch(l){case"button":case"input":case"select":case"textarea":c.autoFocus&&m.focus();break t;case"img":c.src?m.src=c.src:c.srcSet&&(m.srcset=c.srcSet)}}catch(T){ue(o,o.return,T)}}function $S(o,l,c){try{var m=o.stateNode;EO(m,o.type,c,l),m[Ai]=l}catch(T){ue(o,o.return,T)}}function g1(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Ga(o.type)||o.tag===4}function KS(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||g1(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Ga(o.type)||o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function WS(o,l,c){var m=o.tag;if(m===5||m===6)o=o.stateNode,l?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(o,l):(l=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,l.appendChild(o),c=c._reactRootContainer,c!=null||l.onclick!==null||(l.onclick=lr));else if(m!==4&&(m===27&&Ga(o.type)&&(c=o.stateNode,l=null),o=o.child,o!==null))for(WS(o,l,c),o=o.sibling;o!==null;)WS(o,l,c),o=o.sibling}function wv(o,l,c){var m=o.tag;if(m===5||m===6)o=o.stateNode,l?c.insertBefore(o,l):c.appendChild(o);else if(m!==4&&(m===27&&Ga(o.type)&&(c=o.stateNode),o=o.child,o!==null))for(wv(o,l,c),o=o.sibling;o!==null;)wv(o,l,c),o=o.sibling}function y1(o){var l=o.stateNode,c=o.memoizedProps;try{for(var m=o.type,T=l.attributes;T.length;)l.removeAttributeNode(T[0]);Un(l,m,c),l[Nn]=o,l[Ai]=c}catch(S){ue(o,o.return,S)}}var vr=!1,an=!1,JS=!1,v1=typeof WeakSet=="function"?WeakSet:Set,En=null;function eO(o,l){if(o=o.containerInfo,yE=$v,o=Dx(o),zT(o)){if("selectionStart"in o)var c={start:o.selectionStart,end:o.selectionEnd};else t:{c=(c=o.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var T=m.anchorOffset,S=m.focusNode;m=m.focusOffset;try{c.nodeType,S.nodeType}catch{c=null;break t}var M=0,P=-1,F=-1,X=0,tt=0,st=o,K=null;e:for(;;){for(var Q;st!==c||T!==0&&st.nodeType!==3||(P=M+T),st!==S||m!==0&&st.nodeType!==3||(F=M+m),st.nodeType===3&&(M+=st.nodeValue.length),(Q=st.firstChild)!==null;)K=st,st=Q;for(;;){if(st===o)break e;if(K===c&&++X===T&&(P=M),K===S&&++tt===m&&(F=M),(Q=st.nextSibling)!==null)break;st=K,K=st.parentNode}st=Q}c=P===-1||F===-1?null:{start:P,end:F}}else c=null}c=c||{start:0,end:0}}else c=null;for(vE={focusedElem:o,selectionRange:c},$v=!1,En=l;En!==null;)if(l=En,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,En=o;else for(;En!==null;){switch(l=En,S=l.alternate,o=l.flags,l.tag){case 0:if((o&4)!==0&&(o=l.updateQueue,o=o!==null?o.events:null,o!==null))for(c=0;c<o.length;c++)T=o[c],T.ref.impl=T.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&S!==null){o=void 0,c=l,T=S.memoizedProps,S=S.memoizedState,m=c.stateNode;try{var yt=mu(c.type,T);o=m.getSnapshotBeforeUpdate(yt,S),m.__reactInternalSnapshotBeforeUpdate=o}catch(Mt){ue(c,c.return,Mt)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,c=o.nodeType,c===9)SE(o);else if(c===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":SE(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=l.sibling,o!==null){o.return=l.return,En=o;break}En=l.return}}function A1(o,l,c){var m=c.flags;switch(c.tag){case 0:case 11:case 15:Tr(o,c),m&4&&vp(5,c);break;case 1:if(Tr(o,c),m&4)if(o=c.stateNode,l===null)try{o.componentDidMount()}catch(M){ue(c,c.return,M)}else{var T=mu(c.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(T,l,o.__reactInternalSnapshotBeforeUpdate)}catch(M){ue(c,c.return,M)}}m&64&&f1(c),m&512&&Ap(c,c.return);break;case 3:if(Tr(o,c),m&64&&(o=c.updateQueue,o!==null)){if(l=null,c.child!==null)switch(c.child.tag){case 27:case 5:l=c.child.stateNode;break;case 1:l=c.child.stateNode}try{iM(o,l)}catch(M){ue(c,c.return,M)}}break;case 27:l===null&&m&4&&y1(c);case 26:case 5:Tr(o,c),l===null&&m&4&&m1(c),m&512&&Ap(c,c.return);break;case 12:Tr(o,c);break;case 31:Tr(o,c),m&4&&E1(o,c);break;case 13:Tr(o,c),m&4&&b1(o,c),m&64&&(o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(c=cO.bind(null,c),DO(o,c))));break;case 22:if(m=c.memoizedState!==null||vr,!m){l=l!==null&&l.memoizedState!==null||an,T=vr;var S=an;vr=m,(an=l)&&!S?Sr(o,c,(c.subtreeFlags&8772)!==0):Tr(o,c),vr=T,an=S}break;case 30:break;default:Tr(o,c)}}function T1(o){var l=o.alternate;l!==null&&(o.alternate=null,T1(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&wT(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Le=null,Si=!1;function Ar(o,l,c){for(c=c.child;c!==null;)S1(o,l,c),c=c.sibling}function S1(o,l,c){if(Oi&&typeof Oi.onCommitFiberUnmount=="function")try{Oi.onCommitFiberUnmount(zf,c)}catch{}switch(c.tag){case 26:an||xo(c,l),Ar(o,l,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:an||xo(c,l);var m=Le,T=Si;Ga(c.type)&&(Le=c.stateNode,Si=!1),Ar(o,l,c),Mp(c.stateNode),Le=m,Si=T;break;case 5:an||xo(c,l);case 6:if(m=Le,T=Si,Le=null,Ar(o,l,c),Le=m,Si=T,Le!==null)if(Si)try{(Le.nodeType===9?Le.body:Le.nodeName==="HTML"?Le.ownerDocument.body:Le).removeChild(c.stateNode)}catch(S){ue(c,l,S)}else try{Le.removeChild(c.stateNode)}catch(S){ue(c,l,S)}break;case 18:Le!==null&&(Si?(o=Le,fR(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,c.stateNode),Id(o)):fR(Le,c.stateNode));break;case 4:m=Le,T=Si,Le=c.stateNode.containerInfo,Si=!0,Ar(o,l,c),Le=m,Si=T;break;case 0:case 11:case 14:case 15:ka(2,c,l),an||ka(4,c,l),Ar(o,l,c);break;case 1:an||(xo(c,l),m=c.stateNode,typeof m.componentWillUnmount=="function"&&p1(c,l,m)),Ar(o,l,c);break;case 21:Ar(o,l,c);break;case 22:an=(m=an)||c.memoizedState!==null,Ar(o,l,c),an=m;break;default:Ar(o,l,c)}}function E1(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Id(o)}catch(c){ue(l,l.return,c)}}}function b1(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Id(o)}catch(c){ue(l,l.return,c)}}function nO(o){switch(o.tag){case 31:case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new v1),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new v1),l;default:throw Error(n(435,o.tag))}}function xv(o,l){var c=nO(o);l.forEach(function(m){if(!c.has(m)){c.add(m);var T=dO.bind(null,o,m);m.then(T,T)}})}function Ei(o,l){var c=l.deletions;if(c!==null)for(var m=0;m<c.length;m++){var T=c[m],S=o,M=l,P=M;t:for(;P!==null;){switch(P.tag){case 27:if(Ga(P.type)){Le=P.stateNode,Si=!1;break t}break;case 5:Le=P.stateNode,Si=!1;break t;case 3:case 4:Le=P.stateNode.containerInfo,Si=!0;break t}P=P.return}if(Le===null)throw Error(n(160));S1(S,M,T),Le=null,Si=!1,S=T.alternate,S!==null&&(S.return=null),T.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)C1(l,o),l=l.sibling}var js=null;function C1(o,l){var c=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Ei(l,o),bi(o),m&4&&(ka(3,o,o.return),vp(3,o),ka(5,o,o.return));break;case 1:Ei(l,o),bi(o),m&512&&(an||c===null||xo(c,c.return)),m&64&&vr&&(o=o.updateQueue,o!==null&&(m=o.callbacks,m!==null&&(c=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=c===null?m:c.concat(m))));break;case 26:var T=js;if(Ei(l,o),bi(o),m&512&&(an||c===null||xo(c,c.return)),m&4){var S=c!==null?c.memoizedState:null;if(m=o.memoizedState,c===null)if(m===null)if(o.stateNode===null){t:{m=o.type,c=o.memoizedProps,T=T.ownerDocument||T;e:switch(m){case"title":S=T.getElementsByTagName("title")[0],(!S||S[Xf]||S[Nn]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=T.createElement(m),T.head.insertBefore(S,T.querySelector("head > title"))),Un(S,m,c),S[Nn]=o,Sn(S),m=S;break t;case"link":var M=CR("link","href",T).get(m+(c.href||""));if(M){for(var P=0;P<M.length;P++)if(S=M[P],S.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&S.getAttribute("rel")===(c.rel==null?null:c.rel)&&S.getAttribute("title")===(c.title==null?null:c.title)&&S.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){M.splice(P,1);break e}}S=T.createElement(m),Un(S,m,c),T.head.appendChild(S);break;case"meta":if(M=CR("meta","content",T).get(m+(c.content||""))){for(P=0;P<M.length;P++)if(S=M[P],S.getAttribute("content")===(c.content==null?null:""+c.content)&&S.getAttribute("name")===(c.name==null?null:c.name)&&S.getAttribute("property")===(c.property==null?null:c.property)&&S.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&S.getAttribute("charset")===(c.charSet==null?null:c.charSet)){M.splice(P,1);break e}}S=T.createElement(m),Un(S,m,c),T.head.appendChild(S);break;default:throw Error(n(468,m))}S[Nn]=o,Sn(S),m=S}o.stateNode=m}else _R(T,o.type,o.stateNode);else o.stateNode=bR(T,m,o.memoizedProps);else S!==m?(S===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):S.count--,m===null?_R(T,o.type,o.stateNode):bR(T,m,o.memoizedProps)):m===null&&o.stateNode!==null&&$S(o,o.memoizedProps,c.memoizedProps)}break;case 27:Ei(l,o),bi(o),m&512&&(an||c===null||xo(c,c.return)),c!==null&&m&4&&$S(o,o.memoizedProps,c.memoizedProps);break;case 5:if(Ei(l,o),bi(o),m&512&&(an||c===null||xo(c,c.return)),o.flags&32){T=o.stateNode;try{td(T,"")}catch(yt){ue(o,o.return,yt)}}m&4&&o.stateNode!=null&&(T=o.memoizedProps,$S(o,T,c!==null?c.memoizedProps:T)),m&1024&&(JS=!0);break;case 6:if(Ei(l,o),bi(o),m&4){if(o.stateNode===null)throw Error(n(162));m=o.memoizedProps,c=o.stateNode;try{c.nodeValue=m}catch(yt){ue(o,o.return,yt)}}break;case 3:if(zv=null,T=js,js=Hv(l.containerInfo),Ei(l,o),js=T,bi(o),m&4&&c!==null&&c.memoizedState.isDehydrated)try{Id(l.containerInfo)}catch(yt){ue(o,o.return,yt)}JS&&(JS=!1,_1(o));break;case 4:m=js,js=Hv(o.stateNode.containerInfo),Ei(l,o),bi(o),js=m;break;case 12:Ei(l,o),bi(o);break;case 31:Ei(l,o),bi(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,xv(o,m)));break;case 13:Ei(l,o),bi(o),o.child.flags&8192&&o.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Rv=Fi()),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,xv(o,m)));break;case 22:T=o.memoizedState!==null;var F=c!==null&&c.memoizedState!==null,X=vr,tt=an;if(vr=X||T,an=tt||F,Ei(l,o),an=tt,vr=X,bi(o),m&8192)t:for(l=o.stateNode,l._visibility=T?l._visibility&-2:l._visibility|1,T&&(c===null||F||vr||an||gu(o)),c=null,l=o;;){if(l.tag===5||l.tag===26){if(c===null){F=c=l;try{if(S=F.stateNode,T)M=S.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{P=F.stateNode;var st=F.memoizedProps.style,K=st!=null&&st.hasOwnProperty("display")?st.display:null;P.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(yt){ue(F,F.return,yt)}}}else if(l.tag===6){if(c===null){F=l;try{F.stateNode.nodeValue=T?"":F.memoizedProps}catch(yt){ue(F,F.return,yt)}}}else if(l.tag===18){if(c===null){F=l;try{var Q=F.stateNode;T?pR(Q,!0):pR(F.stateNode,!1)}catch(yt){ue(F,F.return,yt)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break t;for(;l.sibling===null;){if(l.return===null||l.return===o)break t;c===l&&(c=null),l=l.return}c===l&&(c=null),l.sibling.return=l.return,l=l.sibling}m&4&&(m=o.updateQueue,m!==null&&(c=m.retryQueue,c!==null&&(m.retryQueue=null,xv(o,c))));break;case 19:Ei(l,o),bi(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,xv(o,m)));break;case 30:break;case 21:break;default:Ei(l,o),bi(o)}}function bi(o){var l=o.flags;if(l&2){try{for(var c,m=o.return;m!==null;){if(g1(m)){c=m;break}m=m.return}if(c==null)throw Error(n(160));switch(c.tag){case 27:var T=c.stateNode,S=KS(o);wv(o,S,T);break;case 5:var M=c.stateNode;c.flags&32&&(td(M,""),c.flags&=-33);var P=KS(o);wv(o,P,M);break;case 3:case 4:var F=c.stateNode.containerInfo,X=KS(o);WS(o,X,F);break;default:throw Error(n(161))}}catch(tt){ue(o,o.return,tt)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function _1(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;_1(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function Tr(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)A1(o,l.alternate,l),l=l.sibling}function gu(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:ka(4,l,l.return),gu(l);break;case 1:xo(l,l.return);var c=l.stateNode;typeof c.componentWillUnmount=="function"&&p1(l,l.return,c),gu(l);break;case 27:Mp(l.stateNode);case 26:case 5:xo(l,l.return),gu(l);break;case 22:l.memoizedState===null&&gu(l);break;case 30:gu(l);break;default:gu(l)}o=o.sibling}}function Sr(o,l,c){for(c=c&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var m=l.alternate,T=o,S=l,M=S.flags;switch(S.tag){case 0:case 11:case 15:Sr(T,S,c),vp(4,S);break;case 1:if(Sr(T,S,c),m=S,T=m.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(X){ue(m,m.return,X)}if(m=S,T=m.updateQueue,T!==null){var P=m.stateNode;try{var F=T.shared.hiddenCallbacks;if(F!==null)for(T.shared.hiddenCallbacks=null,T=0;T<F.length;T++)nM(F[T],P)}catch(X){ue(m,m.return,X)}}c&&M&64&&f1(S),Ap(S,S.return);break;case 27:y1(S);case 26:case 5:Sr(T,S,c),c&&m===null&&M&4&&m1(S),Ap(S,S.return);break;case 12:Sr(T,S,c);break;case 31:Sr(T,S,c),c&&M&4&&E1(T,S);break;case 13:Sr(T,S,c),c&&M&4&&b1(T,S);break;case 22:S.memoizedState===null&&Sr(T,S,c),Ap(S,S.return);break;case 30:break;default:Sr(T,S,c)}l=l.sibling}}function QS(o,l){var c=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==c&&(o!=null&&o.refCount++,c!=null&&op(c))}function ZS(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&op(o))}function to(o,l,c,m){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)w1(o,l,c,m),l=l.sibling}function w1(o,l,c,m){var T=l.flags;switch(l.tag){case 0:case 11:case 15:to(o,l,c,m),T&2048&&vp(9,l);break;case 1:to(o,l,c,m);break;case 3:to(o,l,c,m),T&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&op(o)));break;case 12:if(T&2048){to(o,l,c,m),o=l.stateNode;try{var S=l.memoizedProps,M=S.id,P=S.onPostCommit;typeof P=="function"&&P(M,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(F){ue(l,l.return,F)}}else to(o,l,c,m);break;case 31:to(o,l,c,m);break;case 13:to(o,l,c,m);break;case 23:break;case 22:S=l.stateNode,M=l.alternate,l.memoizedState!==null?S._visibility&2?to(o,l,c,m):Tp(o,l):S._visibility&2?to(o,l,c,m):(S._visibility|=2,Td(o,l,c,m,(l.subtreeFlags&10256)!==0||!1)),T&2048&&QS(M,l);break;case 24:to(o,l,c,m),T&2048&&ZS(l.alternate,l);break;default:to(o,l,c,m)}}function Td(o,l,c,m,T){for(T=T&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var S=o,M=l,P=c,F=m,X=M.flags;switch(M.tag){case 0:case 11:case 15:Td(S,M,P,F,T),vp(8,M);break;case 23:break;case 22:var tt=M.stateNode;M.memoizedState!==null?tt._visibility&2?Td(S,M,P,F,T):Tp(S,M):(tt._visibility|=2,Td(S,M,P,F,T)),T&&X&2048&&QS(M.alternate,M);break;case 24:Td(S,M,P,F,T),T&&X&2048&&ZS(M.alternate,M);break;default:Td(S,M,P,F,T)}l=l.sibling}}function Tp(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var c=o,m=l,T=m.flags;switch(m.tag){case 22:Tp(c,m),T&2048&&QS(m.alternate,m);break;case 24:Tp(c,m),T&2048&&ZS(m.alternate,m);break;default:Tp(c,m)}l=l.sibling}}var Sp=8192;function Sd(o,l,c){if(o.subtreeFlags&Sp)for(o=o.child;o!==null;)x1(o,l,c),o=o.sibling}function x1(o,l,c){switch(o.tag){case 26:Sd(o,l,c),o.flags&Sp&&o.memoizedState!==null&&GO(c,js,o.memoizedState,o.memoizedProps);break;case 5:Sd(o,l,c);break;case 3:case 4:var m=js;js=Hv(o.stateNode.containerInfo),Sd(o,l,c),js=m;break;case 22:o.memoizedState===null&&(m=o.alternate,m!==null&&m.memoizedState!==null?(m=Sp,Sp=16777216,Sd(o,l,c),Sp=m):Sd(o,l,c));break;default:Sd(o,l,c)}}function M1(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function Ep(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var c=0;c<l.length;c++){var m=l[c];En=m,D1(m,o)}M1(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)R1(o),o=o.sibling}function R1(o){switch(o.tag){case 0:case 11:case 15:Ep(o),o.flags&2048&&ka(9,o,o.return);break;case 3:Ep(o);break;case 12:Ep(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,Mv(o)):Ep(o);break;default:Ep(o)}}function Mv(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var c=0;c<l.length;c++){var m=l[c];En=m,D1(m,o)}M1(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:ka(8,l,l.return),Mv(l);break;case 22:c=l.stateNode,c._visibility&2&&(c._visibility&=-3,Mv(l));break;default:Mv(l)}o=o.sibling}}function D1(o,l){for(;En!==null;){var c=En;switch(c.tag){case 0:case 11:case 15:ka(8,c,l);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var m=c.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:op(c.memoizedState.cache)}if(m=c.child,m!==null)m.return=c,En=m;else t:for(c=o;En!==null;){m=En;var T=m.sibling,S=m.return;if(T1(m),m===c){En=null;break t}if(T!==null){T.return=S,En=T;break t}En=S}}}var iO={getCacheForType:function(o){var l=Ln(sn),c=l.data.get(o);return c===void 0&&(c=o(),l.data.set(o,c)),c},cacheSignal:function(){return Ln(sn).controller.signal}},sO=typeof WeakMap=="function"?WeakMap:Map,ie=0,be=null,zt=null,Yt=0,le=0,Yi=null,Ua=!1,Ed=!1,jS=!1,Er=0,Ye=0,Ba=0,yu=0,tE=0,Xi=0,bd=0,bp=null,Ci=null,eE=!1,Rv=0,I1=0,Dv=1/0,Iv=null,Fa=null,fn=0,Oa=null,Cd=null,br=0,nE=0,iE=null,N1=null,Cp=0,sE=null;function $i(){return(ie&2)!==0&&Yt!==0?Yt&-Yt:G.T!==null?cE():Kw()}function P1(){if(Xi===0)if((Yt&536870912)===0||Wt){var o=Oy;Oy<<=1,(Oy&3932160)===0&&(Oy=262144),Xi=o}else Xi=536870912;return o=zi.current,o!==null&&(o.flags|=32),Xi}function _i(o,l,c){(o===be&&(le===2||le===9)||o.cancelPendingCommit!==null)&&(_d(o,0),Va(o,Yt,Xi,!1)),Yf(o,c),((ie&2)===0||o!==be)&&(o===be&&((ie&2)===0&&(yu|=c),Ye===4&&Va(o,Yt,Xi,!1)),Mo(o))}function L1(o,l,c){if((ie&6)!==0)throw Error(n(327));var m=!c&&(l&127)===0&&(l&o.expiredLanes)===0||qf(o,l),T=m?aO(o,l):rE(o,l,!0),S=m;do{if(T===0){Ed&&!m&&Va(o,l,0,!1);break}else{if(c=o.current.alternate,S&&!oO(c)){T=rE(o,l,!1),S=!1;continue}if(T===2){if(S=l,o.errorRecoveryDisabledLanes&S)var M=0;else M=o.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){l=M;t:{var P=o;T=bp;var F=P.current.memoizedState.isDehydrated;if(F&&(_d(P,M).flags|=256),M=rE(P,M,!1),M!==2){if(jS&&!F){P.errorRecoveryDisabledLanes|=S,yu|=S,T=4;break t}S=Ci,Ci=T,S!==null&&(Ci===null?Ci=S:Ci.push.apply(Ci,S))}T=M}if(S=!1,T!==2)continue}}if(T===1){_d(o,0),Va(o,l,0,!0);break}t:{switch(m=o,S=T,S){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:Va(m,l,Xi,!Ua);break t;case 2:Ci=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(T=Rv+300-Fi(),10<T)){if(Va(m,l,Xi,!Ua),Hy(m,0,!0)!==0)break t;br=l,m.timeoutHandle=dR(k1.bind(null,m,c,Ci,Iv,eE,l,Xi,yu,bd,Ua,S,"Throttled",-0,0),T);break t}k1(m,c,Ci,Iv,eE,l,Xi,yu,bd,Ua,S,null,-0,0)}}break}while(!0);Mo(o)}function k1(o,l,c,m,T,S,M,P,F,X,tt,st,K,Q){if(o.timeoutHandle=-1,st=l.subtreeFlags,st&8192||(st&16785408)===16785408){st={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:lr},x1(l,S,st);var yt=(S&62914560)===S?Rv-Fi():(S&4194048)===S?I1-Fi():0;if(yt=zO(st,yt),yt!==null){br=S,o.cancelPendingCommit=yt(z1.bind(null,o,l,S,c,m,T,M,P,F,tt,st,null,K,Q)),Va(o,S,M,!X);return}}z1(o,l,S,c,m,T,M,P,F)}function oO(o){for(var l=o;;){var c=l.tag;if((c===0||c===11||c===15)&&l.flags&16384&&(c=l.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var m=0;m<c.length;m++){var T=c[m],S=T.getSnapshot;T=T.value;try{if(!Hi(S(),T))return!1}catch{return!1}}if(c=l.child,l.subtreeFlags&16384&&c!==null)c.return=l,l=c;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Va(o,l,c,m){l&=~tE,l&=~yu,o.suspendedLanes|=l,o.pingedLanes&=~l,m&&(o.warmLanes|=l),m=o.expirationTimes;for(var T=l;0<T;){var S=31-Vi(T),M=1<<S;m[S]=-1,T&=~M}c!==0&&Yw(o,c,l)}function Nv(){return(ie&6)===0?(_p(0),!1):!0}function oE(){if(zt!==null){if(le===0)var o=zt.return;else o=zt,hr=lu=null,SS(o),md=null,ap=0,o=zt;for(;o!==null;)h1(o.alternate,o),o=o.return;zt=null}}function _d(o,l){var c=o.timeoutHandle;c!==-1&&(o.timeoutHandle=-1,_O(c)),c=o.cancelPendingCommit,c!==null&&(o.cancelPendingCommit=null,c()),br=0,oE(),be=o,zt=c=cr(o.current,null),Yt=l,le=0,Yi=null,Ua=!1,Ed=qf(o,l),jS=!1,bd=Xi=tE=yu=Ba=Ye=0,Ci=bp=null,eE=!1,(l&8)!==0&&(l|=l&32);var m=o.entangledLanes;if(m!==0)for(o=o.entanglements,m&=l;0<m;){var T=31-Vi(m),S=1<<T;l|=o[T],m&=~S}return Er=l,jy(),c}function U1(o,l){Bt=null,G.H=mp,l===pd||l===av?(l=Zx(),le=3):l===uS?(l=Zx(),le=4):le=l===BS?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Yi=l,zt===null&&(Ye=1,Sv(o,bs(l,o.current)))}function B1(){var o=zi.current;return o===null?!0:(Yt&4194048)===Yt?xs===null:(Yt&62914560)===Yt||(Yt&536870912)!==0?o===xs:!1}function F1(){var o=G.H;return G.H=mp,o===null?mp:o}function O1(){var o=G.A;return G.A=iO,o}function Pv(){Ye=4,Ua||(Yt&4194048)!==Yt&&zi.current!==null||(Ed=!0),(Ba&134217727)===0&&(yu&134217727)===0||be===null||Va(be,Yt,Xi,!1)}function rE(o,l,c){var m=ie;ie|=2;var T=F1(),S=O1();(be!==o||Yt!==l)&&(Iv=null,_d(o,l)),l=!1;var M=Ye;t:do try{if(le!==0&&zt!==null){var P=zt,F=Yi;switch(le){case 8:oE(),M=6;break t;case 3:case 2:case 9:case 6:zi.current===null&&(l=!0);var X=le;if(le=0,Yi=null,wd(o,P,F,X),c&&Ed){M=0;break t}break;default:X=le,le=0,Yi=null,wd(o,P,F,X)}}rO(),M=Ye;break}catch(tt){U1(o,tt)}while(!0);return l&&o.shellSuspendCounter++,hr=lu=null,ie=m,G.H=T,G.A=S,zt===null&&(be=null,Yt=0,jy()),M}function rO(){for(;zt!==null;)V1(zt)}function aO(o,l){var c=ie;ie|=2;var m=F1(),T=O1();be!==o||Yt!==l?(Iv=null,Dv=Fi()+500,_d(o,l)):Ed=qf(o,l);t:do try{if(le!==0&&zt!==null){l=zt;var S=Yi;e:switch(le){case 1:le=0,Yi=null,wd(o,l,S,1);break;case 2:case 9:if(Jx(S)){le=0,Yi=null,H1(l);break}l=function(){le!==2&&le!==9||be!==o||(le=7),Mo(o)},S.then(l,l);break t;case 3:le=7;break t;case 4:le=5;break t;case 7:Jx(S)?(le=0,Yi=null,H1(l)):(le=0,Yi=null,wd(o,l,S,7));break;case 5:var M=null;switch(zt.tag){case 26:M=zt.memoizedState;case 5:case 27:var P=zt;if(M?wR(M):P.stateNode.complete){le=0,Yi=null;var F=P.sibling;if(F!==null)zt=F;else{var X=P.return;X!==null?(zt=X,Lv(X)):zt=null}break e}}le=0,Yi=null,wd(o,l,S,5);break;case 6:le=0,Yi=null,wd(o,l,S,6);break;case 8:oE(),Ye=6;break t;default:throw Error(n(462))}}lO();break}catch(tt){U1(o,tt)}while(!0);return hr=lu=null,G.H=m,G.A=T,ie=c,zt!==null?0:(be=null,Yt=0,jy(),Ye)}function lO(){for(;zt!==null&&!IB();)V1(zt)}function V1(o){var l=c1(o.alternate,o,Er);o.memoizedProps=o.pendingProps,l===null?Lv(o):zt=l}function H1(o){var l=o,c=l.alternate;switch(l.tag){case 15:case 0:l=s1(c,l,l.pendingProps,l.type,void 0,Yt);break;case 11:l=s1(c,l,l.pendingProps,l.type.render,l.ref,Yt);break;case 5:SS(l);default:h1(c,l),l=zt=Ox(l,Er),l=c1(c,l,Er)}o.memoizedProps=o.pendingProps,l===null?Lv(o):zt=l}function wd(o,l,c,m){hr=lu=null,SS(l),md=null,ap=0;var T=l.return;try{if(JF(o,T,l,c,Yt)){Ye=1,Sv(o,bs(c,o.current)),zt=null;return}}catch(S){if(T!==null)throw zt=T,S;Ye=1,Sv(o,bs(c,o.current)),zt=null;return}l.flags&32768?(Wt||m===1?o=!0:Ed||(Yt&536870912)!==0?o=!1:(Ua=o=!0,(m===2||m===9||m===3||m===6)&&(m=zi.current,m!==null&&m.tag===13&&(m.flags|=16384))),G1(l,o)):Lv(l)}function Lv(o){var l=o;do{if((l.flags&32768)!==0){G1(l,Ua);return}o=l.return;var c=jF(l.alternate,l,Er);if(c!==null){zt=c;return}if(l=l.sibling,l!==null){zt=l;return}zt=l=o}while(l!==null);Ye===0&&(Ye=5)}function G1(o,l){do{var c=tO(o.alternate,o);if(c!==null){c.flags&=32767,zt=c;return}if(c=o.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!l&&(o=o.sibling,o!==null)){zt=o;return}zt=o=c}while(o!==null);Ye=6,zt=null}function z1(o,l,c,m,T,S,M,P,F){o.cancelPendingCommit=null;do kv();while(fn!==0);if((ie&6)!==0)throw Error(n(327));if(l!==null){if(l===o.current)throw Error(n(177));if(S=l.lanes|l.childLanes,S|=KT,HB(o,c,S,M,P,F),o===be&&(zt=be=null,Yt=0),Cd=l,Oa=o,br=c,nE=S,iE=T,N1=m,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,hO(By,function(){return K1(),null})):(o.callbackNode=null,o.callbackPriority=0),m=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||m){m=G.T,G.T=null,T=$.p,$.p=2,M=ie,ie|=4;try{eO(o,l,c)}finally{ie=M,$.p=T,G.T=m}}fn=1,q1(),Y1(),X1()}}function q1(){if(fn===1){fn=0;var o=Oa,l=Cd,c=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||c){c=G.T,G.T=null;var m=$.p;$.p=2;var T=ie;ie|=4;try{C1(l,o);var S=vE,M=Dx(o.containerInfo),P=S.focusedElem,F=S.selectionRange;if(M!==P&&P&&P.ownerDocument&&Rx(P.ownerDocument.documentElement,P)){if(F!==null&&zT(P)){var X=F.start,tt=F.end;if(tt===void 0&&(tt=X),"selectionStart"in P)P.selectionStart=X,P.selectionEnd=Math.min(tt,P.value.length);else{var st=P.ownerDocument||document,K=st&&st.defaultView||window;if(K.getSelection){var Q=K.getSelection(),yt=P.textContent.length,Mt=Math.min(F.start,yt),me=F.end===void 0?Mt:Math.min(F.end,yt);!Q.extend&&Mt>me&&(M=me,me=Mt,Mt=M);var q=Mx(P,Mt),V=Mx(P,me);if(q&&V&&(Q.rangeCount!==1||Q.anchorNode!==q.node||Q.anchorOffset!==q.offset||Q.focusNode!==V.node||Q.focusOffset!==V.offset)){var Y=st.createRange();Y.setStart(q.node,q.offset),Q.removeAllRanges(),Mt>me?(Q.addRange(Y),Q.extend(V.node,V.offset)):(Y.setEnd(V.node,V.offset),Q.addRange(Y))}}}}for(st=[],Q=P;Q=Q.parentNode;)Q.nodeType===1&&st.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<st.length;P++){var nt=st[P];nt.element.scrollLeft=nt.left,nt.element.scrollTop=nt.top}}$v=!!yE,vE=yE=null}finally{ie=T,$.p=m,G.T=c}}o.current=l,fn=2}}function Y1(){if(fn===2){fn=0;var o=Oa,l=Cd,c=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||c){c=G.T,G.T=null;var m=$.p;$.p=2;var T=ie;ie|=4;try{A1(o,l.alternate,l)}finally{ie=T,$.p=m,G.T=c}}fn=3}}function X1(){if(fn===4||fn===3){fn=0,NB();var o=Oa,l=Cd,c=br,m=N1;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?fn=5:(fn=0,Cd=Oa=null,$1(o,o.pendingLanes));var T=o.pendingLanes;if(T===0&&(Fa=null),CT(c),l=l.stateNode,Oi&&typeof Oi.onCommitFiberRoot=="function")try{Oi.onCommitFiberRoot(zf,l,void 0,(l.current.flags&128)===128)}catch{}if(m!==null){l=G.T,T=$.p,$.p=2,G.T=null;try{for(var S=o.onRecoverableError,M=0;M<m.length;M++){var P=m[M];S(P.value,{componentStack:P.stack})}}finally{G.T=l,$.p=T}}(br&3)!==0&&kv(),Mo(o),T=o.pendingLanes,(c&261930)!==0&&(T&42)!==0?o===sE?Cp++:(Cp=0,sE=o):Cp=0,_p(0)}}function $1(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,op(l)))}function kv(){return q1(),Y1(),X1(),K1()}function K1(){if(fn!==5)return!1;var o=Oa,l=nE;nE=0;var c=CT(br),m=G.T,T=$.p;try{$.p=32>c?32:c,G.T=null,c=iE,iE=null;var S=Oa,M=br;if(fn=0,Cd=Oa=null,br=0,(ie&6)!==0)throw Error(n(331));var P=ie;if(ie|=4,R1(S.current),w1(S,S.current,M,c),ie=P,_p(0,!1),Oi&&typeof Oi.onPostCommitFiberRoot=="function")try{Oi.onPostCommitFiberRoot(zf,S)}catch{}return!0}finally{$.p=T,G.T=m,$1(o,l)}}function W1(o,l,c){l=bs(c,l),l=US(o.stateNode,l,2),o=Na(o,l,2),o!==null&&(Yf(o,2),Mo(o))}function ue(o,l,c){if(o.tag===3)W1(o,o,c);else for(;l!==null;){if(l.tag===3){W1(l,o,c);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Fa===null||!Fa.has(m))){o=bs(c,o),c=JM(2),m=Na(l,c,2),m!==null&&(QM(c,m,l,o),Yf(m,2),Mo(m));break}}l=l.return}}function aE(o,l,c){var m=o.pingCache;if(m===null){m=o.pingCache=new sO;var T=new Set;m.set(l,T)}else T=m.get(l),T===void 0&&(T=new Set,m.set(l,T));T.has(c)||(jS=!0,T.add(c),o=uO.bind(null,o,l,c),l.then(o,o))}function uO(o,l,c){var m=o.pingCache;m!==null&&m.delete(l),o.pingedLanes|=o.suspendedLanes&c,o.warmLanes&=~c,be===o&&(Yt&c)===c&&(Ye===4||Ye===3&&(Yt&62914560)===Yt&&300>Fi()-Rv?(ie&2)===0&&_d(o,0):tE|=c,bd===Yt&&(bd=0)),Mo(o)}function J1(o,l){l===0&&(l=qw()),o=ou(o,l),o!==null&&(Yf(o,l),Mo(o))}function cO(o){var l=o.memoizedState,c=0;l!==null&&(c=l.retryLane),J1(o,c)}function dO(o,l){var c=0;switch(o.tag){case 31:case 13:var m=o.stateNode,T=o.memoizedState;T!==null&&(c=T.retryLane);break;case 19:m=o.stateNode;break;case 22:m=o.stateNode._retryCache;break;default:throw Error(n(314))}m!==null&&m.delete(l),J1(o,c)}function hO(o,l){return TT(o,l)}var Uv=null,xd=null,lE=!1,Bv=!1,uE=!1,Ha=0;function Mo(o){o!==xd&&o.next===null&&(xd===null?Uv=xd=o:xd=xd.next=o),Bv=!0,lE||(lE=!0,pO())}function _p(o,l){if(!uE&&Bv){uE=!0;do for(var c=!1,m=Uv;m!==null;){if(o!==0){var T=m.pendingLanes;if(T===0)var S=0;else{var M=m.suspendedLanes,P=m.pingedLanes;S=(1<<31-Vi(42|o)+1)-1,S&=T&~(M&~P),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(c=!0,tR(m,S))}else S=Yt,S=Hy(m,m===be?S:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(S&3)===0||qf(m,S)||(c=!0,tR(m,S));m=m.next}while(c);uE=!1}}function fO(){Q1()}function Q1(){Bv=lE=!1;var o=0;Ha!==0&&CO()&&(o=Ha);for(var l=Fi(),c=null,m=Uv;m!==null;){var T=m.next,S=Z1(m,l);S===0?(m.next=null,c===null?Uv=T:c.next=T,T===null&&(xd=c)):(c=m,(o!==0||(S&3)!==0)&&(Bv=!0)),m=T}fn!==0&&fn!==5||_p(o),Ha!==0&&(Ha=0)}function Z1(o,l){for(var c=o.suspendedLanes,m=o.pingedLanes,T=o.expirationTimes,S=o.pendingLanes&-62914561;0<S;){var M=31-Vi(S),P=1<<M,F=T[M];F===-1?((P&c)===0||(P&m)!==0)&&(T[M]=VB(P,l)):F<=l&&(o.expiredLanes|=P),S&=~P}if(l=be,c=Yt,c=Hy(o,o===l?c:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m=o.callbackNode,c===0||o===l&&(le===2||le===9)||o.cancelPendingCommit!==null)return m!==null&&m!==null&&ST(m),o.callbackNode=null,o.callbackPriority=0;if((c&3)===0||qf(o,c)){if(l=c&-c,l===o.callbackPriority)return l;switch(m!==null&&ST(m),CT(c)){case 2:case 8:c=Gw;break;case 32:c=By;break;case 268435456:c=zw;break;default:c=By}return m=j1.bind(null,o),c=TT(c,m),o.callbackPriority=l,o.callbackNode=c,l}return m!==null&&m!==null&&ST(m),o.callbackPriority=2,o.callbackNode=null,2}function j1(o,l){if(fn!==0&&fn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var c=o.callbackNode;if(kv()&&o.callbackNode!==c)return null;var m=Yt;return m=Hy(o,o===be?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m===0?null:(L1(o,m,l),Z1(o,Fi()),o.callbackNode!=null&&o.callbackNode===c?j1.bind(null,o):null)}function tR(o,l){if(kv())return null;L1(o,l,!0)}function pO(){wO(function(){(ie&6)!==0?TT(Hw,fO):Q1()})}function cE(){if(Ha===0){var o=hd;o===0&&(o=Fy,Fy<<=1,(Fy&261888)===0&&(Fy=256)),Ha=o}return Ha}function eR(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Yy(""+o)}function nR(o,l){var c=l.ownerDocument.createElement("input");return c.name=l.name,c.value=l.value,o.id&&c.setAttribute("form",o.id),l.parentNode.insertBefore(c,l),o=new FormData(o),c.parentNode.removeChild(c),o}function mO(o,l,c,m,T){if(l==="submit"&&c&&c.stateNode===T){var S=eR((T[Ai]||null).action),M=m.submitter;M&&(l=(l=M[Ai]||null)?eR(l.formAction):M.getAttribute("formAction"),l!==null&&(S=l,M=null));var P=new Wy("action","action",null,m,T);o.push({event:P,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Ha!==0){var F=M?nR(T,M):new FormData(T);DS(c,{pending:!0,data:F,method:T.method,action:S},null,F)}}else typeof S=="function"&&(P.preventDefault(),F=M?nR(T,M):new FormData(T),DS(c,{pending:!0,data:F,method:T.method,action:S},S,F))},currentTarget:T}]})}}for(var dE=0;dE<$T.length;dE++){var hE=$T[dE],gO=hE.toLowerCase(),yO=hE[0].toUpperCase()+hE.slice(1);Zs(gO,"on"+yO)}Zs(Px,"onAnimationEnd"),Zs(Lx,"onAnimationIteration"),Zs(kx,"onAnimationStart"),Zs("dblclick","onDoubleClick"),Zs("focusin","onFocus"),Zs("focusout","onBlur"),Zs(PF,"onTransitionRun"),Zs(LF,"onTransitionStart"),Zs(kF,"onTransitionCancel"),Zs(Ux,"onTransitionEnd"),Zc("onMouseEnter",["mouseout","mouseover"]),Zc("onMouseLeave",["mouseout","mouseover"]),Zc("onPointerEnter",["pointerout","pointerover"]),Zc("onPointerLeave",["pointerout","pointerover"]),eu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),eu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),eu("onBeforeInput",["compositionend","keypress","textInput","paste"]),eu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),eu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),eu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wp));function iR(o,l){l=(l&4)!==0;for(var c=0;c<o.length;c++){var m=o[c],T=m.event;m=m.listeners;t:{var S=void 0;if(l)for(var M=m.length-1;0<=M;M--){var P=m[M],F=P.instance,X=P.currentTarget;if(P=P.listener,F!==S&&T.isPropagationStopped())break t;S=P,T.currentTarget=X;try{S(T)}catch(tt){Zy(tt)}T.currentTarget=null,S=F}else for(M=0;M<m.length;M++){if(P=m[M],F=P.instance,X=P.currentTarget,P=P.listener,F!==S&&T.isPropagationStopped())break t;S=P,T.currentTarget=X;try{S(T)}catch(tt){Zy(tt)}T.currentTarget=null,S=F}}}}function qt(o,l){var c=l[_T];c===void 0&&(c=l[_T]=new Set);var m=o+"__bubble";c.has(m)||(sR(l,o,2,!1),c.add(m))}function fE(o,l,c){var m=0;l&&(m|=4),sR(c,o,m,l)}var Fv="_reactListening"+Math.random().toString(36).slice(2);function pE(o){if(!o[Fv]){o[Fv]=!0,Qw.forEach(function(c){c!=="selectionchange"&&(vO.has(c)||fE(c,!1,o),fE(c,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Fv]||(l[Fv]=!0,fE("selectionchange",!1,l))}}function sR(o,l,c,m){switch(PR(l)){case 2:var T=XO;break;case 8:T=$O;break;default:T=RE}c=T.bind(null,l,c,o),T=void 0,!LT||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(T=!0),m?T!==void 0?o.addEventListener(l,c,{capture:!0,passive:T}):o.addEventListener(l,c,!0):T!==void 0?o.addEventListener(l,c,{passive:T}):o.addEventListener(l,c,!1)}function mE(o,l,c,m,T){var S=m;if((l&1)===0&&(l&2)===0&&m!==null)t:for(;;){if(m===null)return;var M=m.tag;if(M===3||M===4){var P=m.stateNode.containerInfo;if(P===T)break;if(M===4)for(M=m.return;M!==null;){var F=M.tag;if((F===3||F===4)&&M.stateNode.containerInfo===T)return;M=M.return}for(;P!==null;){if(M=Wc(P),M===null)return;if(F=M.tag,F===5||F===6||F===26||F===27){m=S=M;continue t}P=P.parentNode}}m=m.return}ux(function(){var X=S,tt=NT(c),st=[];t:{var K=Bx.get(o);if(K!==void 0){var Q=Wy,yt=o;switch(o){case"keypress":if($y(c)===0)break t;case"keydown":case"keyup":Q=dF;break;case"focusin":yt="focus",Q=FT;break;case"focusout":yt="blur",Q=FT;break;case"beforeblur":case"afterblur":Q=FT;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=hx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=jB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=pF;break;case Px:case Lx:case kx:Q=nF;break;case Ux:Q=gF;break;case"scroll":case"scrollend":Q=QB;break;case"wheel":Q=vF;break;case"copy":case"cut":case"paste":Q=sF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=px;break;case"toggle":case"beforetoggle":Q=TF}var Mt=(l&4)!==0,me=!Mt&&(o==="scroll"||o==="scrollend"),q=Mt?K!==null?K+"Capture":null:K;Mt=[];for(var V=X,Y;V!==null;){var nt=V;if(Y=nt.stateNode,nt=nt.tag,nt!==5&&nt!==26&&nt!==27||Y===null||q===null||(nt=Kf(V,q),nt!=null&&Mt.push(xp(V,nt,Y))),me)break;V=V.return}0<Mt.length&&(K=new Q(K,yt,null,c,tt),st.push({event:K,listeners:Mt}))}}if((l&7)===0){t:{if(K=o==="mouseover"||o==="pointerover",Q=o==="mouseout"||o==="pointerout",K&&c!==IT&&(yt=c.relatedTarget||c.fromElement)&&(Wc(yt)||yt[Kc]))break t;if((Q||K)&&(K=tt.window===tt?tt:(K=tt.ownerDocument)?K.defaultView||K.parentWindow:window,Q?(yt=c.relatedTarget||c.toElement,Q=X,yt=yt?Wc(yt):null,yt!==null&&(me=r(yt),Mt=yt.tag,yt!==me||Mt!==5&&Mt!==27&&Mt!==6)&&(yt=null)):(Q=null,yt=X),Q!==yt)){if(Mt=hx,nt="onMouseLeave",q="onMouseEnter",V="mouse",(o==="pointerout"||o==="pointerover")&&(Mt=px,nt="onPointerLeave",q="onPointerEnter",V="pointer"),me=Q==null?K:$f(Q),Y=yt==null?K:$f(yt),K=new Mt(nt,V+"leave",Q,c,tt),K.target=me,K.relatedTarget=Y,nt=null,Wc(tt)===X&&(Mt=new Mt(q,V+"enter",yt,c,tt),Mt.target=Y,Mt.relatedTarget=me,nt=Mt),me=nt,Q&&yt)e:{for(Mt=AO,q=Q,V=yt,Y=0,nt=q;nt;nt=Mt(nt))Y++;nt=0;for(var wt=V;wt;wt=Mt(wt))nt++;for(;0<Y-nt;)q=Mt(q),Y--;for(;0<nt-Y;)V=Mt(V),nt--;for(;Y--;){if(q===V||V!==null&&q===V.alternate){Mt=q;break e}q=Mt(q),V=Mt(V)}Mt=null}else Mt=null;Q!==null&&oR(st,K,Q,Mt,!1),yt!==null&&me!==null&&oR(st,me,yt,Mt,!0)}}t:{if(K=X?$f(X):window,Q=K.nodeName&&K.nodeName.toLowerCase(),Q==="select"||Q==="input"&&K.type==="file")var te=Ex;else if(Tx(K))if(bx)te=DF;else{te=MF;var Tt=xF}else Q=K.nodeName,!Q||Q.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?X&&DT(X.elementType)&&(te=Ex):te=RF;if(te&&(te=te(o,X))){Sx(st,te,c,tt);break t}Tt&&Tt(o,K,X),o==="focusout"&&X&&K.type==="number"&&X.memoizedProps.value!=null&&RT(K,"number",K.value)}switch(Tt=X?$f(X):window,o){case"focusin":(Tx(Tt)||Tt.contentEditable==="true")&&(sd=Tt,qT=X,np=null);break;case"focusout":np=qT=sd=null;break;case"mousedown":YT=!0;break;case"contextmenu":case"mouseup":case"dragend":YT=!1,Ix(st,c,tt);break;case"selectionchange":if(NF)break;case"keydown":case"keyup":Ix(st,c,tt)}var Ot;if(VT)t:{switch(o){case"compositionstart":var Xt="onCompositionStart";break t;case"compositionend":Xt="onCompositionEnd";break t;case"compositionupdate":Xt="onCompositionUpdate";break t}Xt=void 0}else id?vx(o,c)&&(Xt="onCompositionEnd"):o==="keydown"&&c.keyCode===229&&(Xt="onCompositionStart");Xt&&(mx&&c.locale!=="ko"&&(id||Xt!=="onCompositionStart"?Xt==="onCompositionEnd"&&id&&(Ot=cx()):(_a=tt,kT="value"in _a?_a.value:_a.textContent,id=!0)),Tt=Ov(X,Xt),0<Tt.length&&(Xt=new fx(Xt,o,null,c,tt),st.push({event:Xt,listeners:Tt}),Ot?Xt.data=Ot:(Ot=Ax(c),Ot!==null&&(Xt.data=Ot)))),(Ot=EF?bF(o,c):CF(o,c))&&(Xt=Ov(X,"onBeforeInput"),0<Xt.length&&(Tt=new fx("onBeforeInput","beforeinput",null,c,tt),st.push({event:Tt,listeners:Xt}),Tt.data=Ot)),mO(st,o,X,c,tt)}iR(st,l)})}function xp(o,l,c){return{instance:o,listener:l,currentTarget:c}}function Ov(o,l){for(var c=l+"Capture",m=[];o!==null;){var T=o,S=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||S===null||(T=Kf(o,c),T!=null&&m.unshift(xp(o,T,S)),T=Kf(o,l),T!=null&&m.push(xp(o,T,S))),o.tag===3)return m;o=o.return}return[]}function AO(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function oR(o,l,c,m,T){for(var S=l._reactName,M=[];c!==null&&c!==m;){var P=c,F=P.alternate,X=P.stateNode;if(P=P.tag,F!==null&&F===m)break;P!==5&&P!==26&&P!==27||X===null||(F=X,T?(X=Kf(c,S),X!=null&&M.unshift(xp(c,X,F))):T||(X=Kf(c,S),X!=null&&M.push(xp(c,X,F)))),c=c.return}M.length!==0&&o.push({event:l,listeners:M})}var TO=/\r\n?/g,SO=/\u0000|\uFFFD/g;function rR(o){return(typeof o=="string"?o:""+o).replace(TO,`
`).replace(SO,"")}function aR(o,l){return l=rR(l),rR(o)===l}function pe(o,l,c,m,T,S){switch(c){case"children":typeof m=="string"?l==="body"||l==="textarea"&&m===""||td(o,m):(typeof m=="number"||typeof m=="bigint")&&l!=="body"&&td(o,""+m);break;case"className":zy(o,"class",m);break;case"tabIndex":zy(o,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":zy(o,c,m);break;case"style":ax(o,m,S);break;case"data":if(l!=="object"){zy(o,"data",m);break}case"src":case"href":if(m===""&&(l!=="a"||c!=="href")){o.removeAttribute(c);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(c);break}m=Yy(""+m),o.setAttribute(c,m);break;case"action":case"formAction":if(typeof m=="function"){o.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(c==="formAction"?(l!=="input"&&pe(o,l,"name",T.name,T,null),pe(o,l,"formEncType",T.formEncType,T,null),pe(o,l,"formMethod",T.formMethod,T,null),pe(o,l,"formTarget",T.formTarget,T,null)):(pe(o,l,"encType",T.encType,T,null),pe(o,l,"method",T.method,T,null),pe(o,l,"target",T.target,T,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(c);break}m=Yy(""+m),o.setAttribute(c,m);break;case"onClick":m!=null&&(o.onclick=lr);break;case"onScroll":m!=null&&qt("scroll",o);break;case"onScrollEnd":m!=null&&qt("scrollend",o);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(c=m.__html,c!=null){if(T.children!=null)throw Error(n(60));o.innerHTML=c}}break;case"multiple":o.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":o.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){o.removeAttribute("xlink:href");break}c=Yy(""+m),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(c,""+m):o.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(c,""):o.removeAttribute(c);break;case"capture":case"download":m===!0?o.setAttribute(c,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(c,m):o.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?o.setAttribute(c,m):o.removeAttribute(c);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?o.removeAttribute(c):o.setAttribute(c,m);break;case"popover":qt("beforetoggle",o),qt("toggle",o),Gy(o,"popover",m);break;case"xlinkActuate":ar(o,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":ar(o,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":ar(o,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":ar(o,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":ar(o,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":ar(o,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":ar(o,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":ar(o,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":ar(o,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Gy(o,"is",m);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=WB.get(c)||c,Gy(o,c,m))}}function gE(o,l,c,m,T,S){switch(c){case"style":ax(o,m,S);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(c=m.__html,c!=null){if(T.children!=null)throw Error(n(60));o.innerHTML=c}}break;case"children":typeof m=="string"?td(o,m):(typeof m=="number"||typeof m=="bigint")&&td(o,""+m);break;case"onScroll":m!=null&&qt("scroll",o);break;case"onScrollEnd":m!=null&&qt("scrollend",o);break;case"onClick":m!=null&&(o.onclick=lr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zw.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(T=c.endsWith("Capture"),l=c.slice(2,T?c.length-7:void 0),S=o[Ai]||null,S=S!=null?S[c]:null,typeof S=="function"&&o.removeEventListener(l,S,T),typeof m=="function")){typeof S!="function"&&S!==null&&(c in o?o[c]=null:o.hasAttribute(c)&&o.removeAttribute(c)),o.addEventListener(l,m,T);break t}c in o?o[c]=m:m===!0?o.setAttribute(c,""):Gy(o,c,m)}}}function Un(o,l,c){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qt("error",o),qt("load",o);var m=!1,T=!1,S;for(S in c)if(c.hasOwnProperty(S)){var M=c[S];if(M!=null)switch(S){case"src":m=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:pe(o,l,S,M,c,null)}}T&&pe(o,l,"srcSet",c.srcSet,c,null),m&&pe(o,l,"src",c.src,c,null);return;case"input":qt("invalid",o);var P=S=M=T=null,F=null,X=null;for(m in c)if(c.hasOwnProperty(m)){var tt=c[m];if(tt!=null)switch(m){case"name":T=tt;break;case"type":M=tt;break;case"checked":F=tt;break;case"defaultChecked":X=tt;break;case"value":S=tt;break;case"defaultValue":P=tt;break;case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(n(137,l));break;default:pe(o,l,m,tt,c,null)}}ix(o,S,P,F,X,M,T,!1);return;case"select":qt("invalid",o),m=M=S=null;for(T in c)if(c.hasOwnProperty(T)&&(P=c[T],P!=null))switch(T){case"value":S=P;break;case"defaultValue":M=P;break;case"multiple":m=P;default:pe(o,l,T,P,c,null)}l=S,c=M,o.multiple=!!m,l!=null?jc(o,!!m,l,!1):c!=null&&jc(o,!!m,c,!0);return;case"textarea":qt("invalid",o),S=T=m=null;for(M in c)if(c.hasOwnProperty(M)&&(P=c[M],P!=null))switch(M){case"value":m=P;break;case"defaultValue":T=P;break;case"children":S=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(n(91));break;default:pe(o,l,M,P,c,null)}ox(o,m,T,S);return;case"option":for(F in c)if(c.hasOwnProperty(F)&&(m=c[F],m!=null))switch(F){case"selected":o.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:pe(o,l,F,m,c,null)}return;case"dialog":qt("beforetoggle",o),qt("toggle",o),qt("cancel",o),qt("close",o);break;case"iframe":case"object":qt("load",o);break;case"video":case"audio":for(m=0;m<wp.length;m++)qt(wp[m],o);break;case"image":qt("error",o),qt("load",o);break;case"details":qt("toggle",o);break;case"embed":case"source":case"link":qt("error",o),qt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in c)if(c.hasOwnProperty(X)&&(m=c[X],m!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:pe(o,l,X,m,c,null)}return;default:if(DT(l)){for(tt in c)c.hasOwnProperty(tt)&&(m=c[tt],m!==void 0&&gE(o,l,tt,m,c,void 0));return}}for(P in c)c.hasOwnProperty(P)&&(m=c[P],m!=null&&pe(o,l,P,m,c,null))}function EO(o,l,c,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,S=null,M=null,P=null,F=null,X=null,tt=null;for(Q in c){var st=c[Q];if(c.hasOwnProperty(Q)&&st!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":F=st;default:m.hasOwnProperty(Q)||pe(o,l,Q,null,m,st)}}for(var K in m){var Q=m[K];if(st=c[K],m.hasOwnProperty(K)&&(Q!=null||st!=null))switch(K){case"type":S=Q;break;case"name":T=Q;break;case"checked":X=Q;break;case"defaultChecked":tt=Q;break;case"value":M=Q;break;case"defaultValue":P=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(137,l));break;default:Q!==st&&pe(o,l,K,Q,m,st)}}MT(o,M,P,F,X,tt,S,T);return;case"select":Q=M=P=K=null;for(S in c)if(F=c[S],c.hasOwnProperty(S)&&F!=null)switch(S){case"value":break;case"multiple":Q=F;default:m.hasOwnProperty(S)||pe(o,l,S,null,m,F)}for(T in m)if(S=m[T],F=c[T],m.hasOwnProperty(T)&&(S!=null||F!=null))switch(T){case"value":K=S;break;case"defaultValue":P=S;break;case"multiple":M=S;default:S!==F&&pe(o,l,T,S,m,F)}l=P,c=M,m=Q,K!=null?jc(o,!!c,K,!1):!!m!=!!c&&(l!=null?jc(o,!!c,l,!0):jc(o,!!c,c?[]:"",!1));return;case"textarea":Q=K=null;for(P in c)if(T=c[P],c.hasOwnProperty(P)&&T!=null&&!m.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:pe(o,l,P,null,m,T)}for(M in m)if(T=m[M],S=c[M],m.hasOwnProperty(M)&&(T!=null||S!=null))switch(M){case"value":K=T;break;case"defaultValue":Q=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(n(91));break;default:T!==S&&pe(o,l,M,T,m,S)}sx(o,K,Q);return;case"option":for(var yt in c)if(K=c[yt],c.hasOwnProperty(yt)&&K!=null&&!m.hasOwnProperty(yt))switch(yt){case"selected":o.selected=!1;break;default:pe(o,l,yt,null,m,K)}for(F in m)if(K=m[F],Q=c[F],m.hasOwnProperty(F)&&K!==Q&&(K!=null||Q!=null))switch(F){case"selected":o.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:pe(o,l,F,K,m,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Mt in c)K=c[Mt],c.hasOwnProperty(Mt)&&K!=null&&!m.hasOwnProperty(Mt)&&pe(o,l,Mt,null,m,K);for(X in m)if(K=m[X],Q=c[X],m.hasOwnProperty(X)&&K!==Q&&(K!=null||Q!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(n(137,l));break;default:pe(o,l,X,K,m,Q)}return;default:if(DT(l)){for(var me in c)K=c[me],c.hasOwnProperty(me)&&K!==void 0&&!m.hasOwnProperty(me)&&gE(o,l,me,void 0,m,K);for(tt in m)K=m[tt],Q=c[tt],!m.hasOwnProperty(tt)||K===Q||K===void 0&&Q===void 0||gE(o,l,tt,K,m,Q);return}}for(var q in c)K=c[q],c.hasOwnProperty(q)&&K!=null&&!m.hasOwnProperty(q)&&pe(o,l,q,null,m,K);for(st in m)K=m[st],Q=c[st],!m.hasOwnProperty(st)||K===Q||K==null&&Q==null||pe(o,l,st,K,m,Q)}function lR(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function bO(){if(typeof performance.getEntriesByType=="function"){for(var o=0,l=0,c=performance.getEntriesByType("resource"),m=0;m<c.length;m++){var T=c[m],S=T.transferSize,M=T.initiatorType,P=T.duration;if(S&&P&&lR(M)){for(M=0,P=T.responseEnd,m+=1;m<c.length;m++){var F=c[m],X=F.startTime;if(X>P)break;var tt=F.transferSize,st=F.initiatorType;tt&&lR(st)&&(F=F.responseEnd,M+=tt*(F<P?1:(P-X)/(F-X)))}if(--m,l+=8*(S+M)/(T.duration/1e3),o++,10<o)break}}if(0<o)return l/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var yE=null,vE=null;function Vv(o){return o.nodeType===9?o:o.ownerDocument}function uR(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cR(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function AE(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var TE=null;function CO(){var o=window.event;return o&&o.type==="popstate"?o===TE?!1:(TE=o,!0):(TE=null,!1)}var dR=typeof setTimeout=="function"?setTimeout:void 0,_O=typeof clearTimeout=="function"?clearTimeout:void 0,hR=typeof Promise=="function"?Promise:void 0,wO=typeof queueMicrotask=="function"?queueMicrotask:typeof hR<"u"?function(o){return hR.resolve(null).then(o).catch(xO)}:dR;function xO(o){setTimeout(function(){throw o})}function Ga(o){return o==="head"}function fR(o,l){var c=l,m=0;do{var T=c.nextSibling;if(o.removeChild(c),T&&T.nodeType===8)if(c=T.data,c==="/$"||c==="/&"){if(m===0){o.removeChild(T),Id(l);return}m--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")m++;else if(c==="html")Mp(o.ownerDocument.documentElement);else if(c==="head"){c=o.ownerDocument.head,Mp(c);for(var S=c.firstChild;S;){var M=S.nextSibling,P=S.nodeName;S[Xf]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&S.rel.toLowerCase()==="stylesheet"||c.removeChild(S),S=M}}else c==="body"&&Mp(o.ownerDocument.body);c=T}while(c);Id(l)}function pR(o,l){var c=o;o=0;do{var m=c.nextSibling;if(c.nodeType===1?l?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(l?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),m&&m.nodeType===8)if(c=m.data,c==="/$"){if(o===0)break;o--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||o++;c=m}while(c)}function SE(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var c=l;switch(l=l.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":SE(c),wT(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}o.removeChild(c)}}function MO(o,l,c,m){for(;o.nodeType===1;){var T=c;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!m&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(m){if(!o[Xf])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(S=o.getAttribute("rel"),S==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(S!==T.rel||o.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||o.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||o.getAttribute("title")!==(T.title==null?null:T.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(S=o.getAttribute("src"),(S!==(T.src==null?null:T.src)||o.getAttribute("type")!==(T.type==null?null:T.type)||o.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&S&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var S=T.name==null?null:""+T.name;if(T.type==="hidden"&&o.getAttribute("name")===S)return o}else return o;if(o=Ms(o.nextSibling),o===null)break}return null}function RO(o,l,c){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!c||(o=Ms(o.nextSibling),o===null))return null;return o}function mR(o,l){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!l||(o=Ms(o.nextSibling),o===null))return null;return o}function EE(o){return o.data==="$?"||o.data==="$~"}function bE(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function DO(o,l){var c=o.ownerDocument;if(o.data==="$~")o._reactRetry=l;else if(o.data!=="$?"||c.readyState!=="loading")l();else{var m=function(){l(),c.removeEventListener("DOMContentLoaded",m)};c.addEventListener("DOMContentLoaded",m),o._reactRetry=m}}function Ms(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return o}var CE=null;function gR(o){o=o.nextSibling;for(var l=0;o;){if(o.nodeType===8){var c=o.data;if(c==="/$"||c==="/&"){if(l===0)return Ms(o.nextSibling);l--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||l++}o=o.nextSibling}return null}function yR(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var c=o.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(l===0)return o;l--}else c!=="/$"&&c!=="/&"||l++}o=o.previousSibling}return null}function vR(o,l,c){switch(l=Vv(c),o){case"html":if(o=l.documentElement,!o)throw Error(n(452));return o;case"head":if(o=l.head,!o)throw Error(n(453));return o;case"body":if(o=l.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}function Mp(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);wT(o)}var Rs=new Map,AR=new Set;function Hv(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Cr=$.d;$.d={f:IO,r:NO,D:PO,C:LO,L:kO,m:UO,X:FO,S:BO,M:OO};function IO(){var o=Cr.f(),l=Nv();return o||l}function NO(o){var l=Jc(o);l!==null&&l.tag===5&&l.type==="form"?UM(l):Cr.r(o)}var Md=typeof document>"u"?null:document;function TR(o,l,c){var m=Md;if(m&&typeof l=="string"&&l){var T=Ss(l);T='link[rel="'+o+'"][href="'+T+'"]',typeof c=="string"&&(T+='[crossorigin="'+c+'"]'),AR.has(T)||(AR.add(T),o={rel:o,crossOrigin:c,href:l},m.querySelector(T)===null&&(l=m.createElement("link"),Un(l,"link",o),Sn(l),m.head.appendChild(l)))}}function PO(o){Cr.D(o),TR("dns-prefetch",o,null)}function LO(o,l){Cr.C(o,l),TR("preconnect",o,l)}function kO(o,l,c){Cr.L(o,l,c);var m=Md;if(m&&o&&l){var T='link[rel="preload"][as="'+Ss(l)+'"]';l==="image"&&c&&c.imageSrcSet?(T+='[imagesrcset="'+Ss(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(T+='[imagesizes="'+Ss(c.imageSizes)+'"]')):T+='[href="'+Ss(o)+'"]';var S=T;switch(l){case"style":S=Rd(o);break;case"script":S=Dd(o)}Rs.has(S)||(o=y({rel:"preload",href:l==="image"&&c&&c.imageSrcSet?void 0:o,as:l},c),Rs.set(S,o),m.querySelector(T)!==null||l==="style"&&m.querySelector(Rp(S))||l==="script"&&m.querySelector(Dp(S))||(l=m.createElement("link"),Un(l,"link",o),Sn(l),m.head.appendChild(l)))}}function UO(o,l){Cr.m(o,l);var c=Md;if(c&&o){var m=l&&typeof l.as=="string"?l.as:"script",T='link[rel="modulepreload"][as="'+Ss(m)+'"][href="'+Ss(o)+'"]',S=T;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=Dd(o)}if(!Rs.has(S)&&(o=y({rel:"modulepreload",href:o},l),Rs.set(S,o),c.querySelector(T)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Dp(S)))return}m=c.createElement("link"),Un(m,"link",o),Sn(m),c.head.appendChild(m)}}}function BO(o,l,c){Cr.S(o,l,c);var m=Md;if(m&&o){var T=Qc(m).hoistableStyles,S=Rd(o);l=l||"default";var M=T.get(S);if(!M){var P={loading:0,preload:null};if(M=m.querySelector(Rp(S)))P.loading=5;else{o=y({rel:"stylesheet",href:o,"data-precedence":l},c),(c=Rs.get(S))&&_E(o,c);var F=M=m.createElement("link");Sn(F),Un(F,"link",o),F._p=new Promise(function(X,tt){F.onload=X,F.onerror=tt}),F.addEventListener("load",function(){P.loading|=1}),F.addEventListener("error",function(){P.loading|=2}),P.loading|=4,Gv(M,l,m)}M={type:"stylesheet",instance:M,count:1,state:P},T.set(S,M)}}}function FO(o,l){Cr.X(o,l);var c=Md;if(c&&o){var m=Qc(c).hoistableScripts,T=Dd(o),S=m.get(T);S||(S=c.querySelector(Dp(T)),S||(o=y({src:o,async:!0},l),(l=Rs.get(T))&&wE(o,l),S=c.createElement("script"),Sn(S),Un(S,"link",o),c.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},m.set(T,S))}}function OO(o,l){Cr.M(o,l);var c=Md;if(c&&o){var m=Qc(c).hoistableScripts,T=Dd(o),S=m.get(T);S||(S=c.querySelector(Dp(T)),S||(o=y({src:o,async:!0,type:"module"},l),(l=Rs.get(T))&&wE(o,l),S=c.createElement("script"),Sn(S),Un(S,"link",o),c.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},m.set(T,S))}}function SR(o,l,c,m){var T=(T=Ct.current)?Hv(T):null;if(!T)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(l=Rd(c.href),c=Qc(T).hoistableStyles,m=c.get(l),m||(m={type:"style",instance:null,count:0,state:null},c.set(l,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){o=Rd(c.href);var S=Qc(T).hoistableStyles,M=S.get(o);if(M||(T=T.ownerDocument||T,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(o,M),(S=T.querySelector(Rp(o)))&&!S._p&&(M.instance=S,M.state.loading=5),Rs.has(o)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Rs.set(o,c),S||VO(T,o,c,M.state))),l&&m===null)throw Error(n(528,""));return M}if(l&&m!==null)throw Error(n(529,""));return null;case"script":return l=c.async,c=c.src,typeof c=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Dd(c),c=Qc(T).hoistableScripts,m=c.get(l),m||(m={type:"script",instance:null,count:0,state:null},c.set(l,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function Rd(o){return'href="'+Ss(o)+'"'}function Rp(o){return'link[rel="stylesheet"]['+o+"]"}function ER(o){return y({},o,{"data-precedence":o.precedence,precedence:null})}function VO(o,l,c,m){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?m.loading=1:(l=o.createElement("link"),m.preload=l,l.addEventListener("load",function(){return m.loading|=1}),l.addEventListener("error",function(){return m.loading|=2}),Un(l,"link",c),Sn(l),o.head.appendChild(l))}function Dd(o){return'[src="'+Ss(o)+'"]'}function Dp(o){return"script[async]"+o}function bR(o,l,c){if(l.count++,l.instance===null)switch(l.type){case"style":var m=o.querySelector('style[data-href~="'+Ss(c.href)+'"]');if(m)return l.instance=m,Sn(m),m;var T=y({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return m=(o.ownerDocument||o).createElement("style"),Sn(m),Un(m,"style",T),Gv(m,c.precedence,o),l.instance=m;case"stylesheet":T=Rd(c.href);var S=o.querySelector(Rp(T));if(S)return l.state.loading|=4,l.instance=S,Sn(S),S;m=ER(c),(T=Rs.get(T))&&_E(m,T),S=(o.ownerDocument||o).createElement("link"),Sn(S);var M=S;return M._p=new Promise(function(P,F){M.onload=P,M.onerror=F}),Un(S,"link",m),l.state.loading|=4,Gv(S,c.precedence,o),l.instance=S;case"script":return S=Dd(c.src),(T=o.querySelector(Dp(S)))?(l.instance=T,Sn(T),T):(m=c,(T=Rs.get(S))&&(m=y({},c),wE(m,T)),o=o.ownerDocument||o,T=o.createElement("script"),Sn(T),Un(T,"link",m),o.head.appendChild(T),l.instance=T);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(m=l.instance,l.state.loading|=4,Gv(m,c.precedence,o));return l.instance}function Gv(o,l,c){for(var m=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=m.length?m[m.length-1]:null,S=T,M=0;M<m.length;M++){var P=m[M];if(P.dataset.precedence===l)S=P;else if(S!==T)break}S?S.parentNode.insertBefore(o,S.nextSibling):(l=c.nodeType===9?c.head:c,l.insertBefore(o,l.firstChild))}function _E(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function wE(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var zv=null;function CR(o,l,c){if(zv===null){var m=new Map,T=zv=new Map;T.set(c,m)}else T=zv,m=T.get(c),m||(m=new Map,T.set(c,m));if(m.has(o))return m;for(m.set(o,null),c=c.getElementsByTagName(o),T=0;T<c.length;T++){var S=c[T];if(!(S[Xf]||S[Nn]||o==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var M=S.getAttribute(l)||"";M=o+M;var P=m.get(M);P?P.push(S):m.set(M,[S])}}return m}function _R(o,l,c){o=o.ownerDocument||o,o.head.insertBefore(c,l==="title"?o.querySelector("head > title"):null)}function HO(o,l,c){if(c===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function wR(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function GO(o,l,c,m){if(c.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var T=Rd(m.href),S=l.querySelector(Rp(T));if(S){l=S._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(o.count++,o=qv.bind(o),l.then(o,o)),c.state.loading|=4,c.instance=S,Sn(S);return}S=l.ownerDocument||l,m=ER(m),(T=Rs.get(T))&&_E(m,T),S=S.createElement("link"),Sn(S);var M=S;M._p=new Promise(function(P,F){M.onload=P,M.onerror=F}),Un(S,"link",m),c.instance=S}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(c,l),(l=c.state.preload)&&(c.state.loading&3)===0&&(o.count++,c=qv.bind(o),l.addEventListener("load",c),l.addEventListener("error",c))}}var xE=0;function zO(o,l){return o.stylesheets&&o.count===0&&Xv(o,o.stylesheets),0<o.count||0<o.imgCount?function(c){var m=setTimeout(function(){if(o.stylesheets&&Xv(o,o.stylesheets),o.unsuspend){var S=o.unsuspend;o.unsuspend=null,S()}},6e4+l);0<o.imgBytes&&xE===0&&(xE=62500*bO());var T=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&Xv(o,o.stylesheets),o.unsuspend)){var S=o.unsuspend;o.unsuspend=null,S()}},(o.imgBytes>xE?50:800)+l);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(m),clearTimeout(T)}}:null}function qv(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xv(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Yv=null;function Xv(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Yv=new Map,l.forEach(qO,o),Yv=null,qv.call(o))}function qO(o,l){if(!(l.state.loading&4)){var c=Yv.get(o);if(c)var m=c.get(null);else{c=new Map,Yv.set(o,c);for(var T=o.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<T.length;S++){var M=T[S];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(c.set(M.dataset.precedence,M),m=M)}m&&c.set(null,m)}T=l.instance,M=T.getAttribute("data-precedence"),S=c.get(M)||m,S===m&&c.set(null,T),c.set(M,T),this.count++,m=qv.bind(this),T.addEventListener("load",m),T.addEventListener("error",m),S?S.parentNode.insertBefore(T,S.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(T,o.firstChild)),l.state.loading|=4}}var Ip={$$typeof:I,Provider:null,Consumer:null,_currentValue:it,_currentValue2:it,_threadCount:0};function YO(o,l,c,m,T,S,M,P,F){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ET(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ET(0),this.hiddenUpdates=ET(null),this.identifierPrefix=m,this.onUncaughtError=T,this.onCaughtError=S,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function xR(o,l,c,m,T,S,M,P,F,X,tt,st){return o=new YO(o,l,c,M,F,X,tt,st,P),l=1,S===!0&&(l|=24),S=Gi(3,null,null,l),o.current=S,S.stateNode=o,l=rS(),l.refCount++,o.pooledCache=l,l.refCount++,S.memoizedState={element:m,isDehydrated:c,cache:l},cS(S),o}function MR(o){return o?(o=ad,o):ad}function RR(o,l,c,m,T,S){T=MR(T),m.context===null?m.context=T:m.pendingContext=T,m=Ia(l),m.payload={element:c},S=S===void 0?null:S,S!==null&&(m.callback=S),c=Na(o,m,l),c!==null&&(_i(c,o,l),up(c,o,l))}function DR(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var c=o.retryLane;o.retryLane=c!==0&&c<l?c:l}}function ME(o,l){DR(o,l),(o=o.alternate)&&DR(o,l)}function IR(o){if(o.tag===13||o.tag===31){var l=ou(o,67108864);l!==null&&_i(l,o,67108864),ME(o,67108864)}}function NR(o){if(o.tag===13||o.tag===31){var l=$i();l=bT(l);var c=ou(o,l);c!==null&&_i(c,o,l),ME(o,l)}}var $v=!0;function XO(o,l,c,m){var T=G.T;G.T=null;var S=$.p;try{$.p=2,RE(o,l,c,m)}finally{$.p=S,G.T=T}}function $O(o,l,c,m){var T=G.T;G.T=null;var S=$.p;try{$.p=8,RE(o,l,c,m)}finally{$.p=S,G.T=T}}function RE(o,l,c,m){if($v){var T=DE(m);if(T===null)mE(o,l,m,Kv,c),LR(o,m);else if(WO(T,o,l,c,m))m.stopPropagation();else if(LR(o,m),l&4&&-1<KO.indexOf(o)){for(;T!==null;){var S=Jc(T);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var M=tu(S.pendingLanes);if(M!==0){var P=S;for(P.pendingLanes|=2,P.entangledLanes|=2;M;){var F=1<<31-Vi(M);P.entanglements[1]|=F,M&=~F}Mo(S),(ie&6)===0&&(Dv=Fi()+500,_p(0))}}break;case 31:case 13:P=ou(S,2),P!==null&&_i(P,S,2),Nv(),ME(S,2)}if(S=DE(m),S===null&&mE(o,l,m,Kv,c),S===T)break;T=S}T!==null&&m.stopPropagation()}else mE(o,l,m,null,c)}}function DE(o){return o=NT(o),IE(o)}var Kv=null;function IE(o){if(Kv=null,o=Wc(o),o!==null){var l=r(o);if(l===null)o=null;else{var c=l.tag;if(c===13){if(o=a(l),o!==null)return o;o=null}else if(c===31){if(o=u(l),o!==null)return o;o=null}else if(c===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return Kv=o,null}function PR(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(PB()){case Hw:return 2;case Gw:return 8;case By:case LB:return 32;case zw:return 268435456;default:return 32}default:return 32}}var NE=!1,za=null,qa=null,Ya=null,Np=new Map,Pp=new Map,Xa=[],KO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function LR(o,l){switch(o){case"focusin":case"focusout":za=null;break;case"dragenter":case"dragleave":qa=null;break;case"mouseover":case"mouseout":Ya=null;break;case"pointerover":case"pointerout":Np.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pp.delete(l.pointerId)}}function Lp(o,l,c,m,T,S){return o===null||o.nativeEvent!==S?(o={blockedOn:l,domEventName:c,eventSystemFlags:m,nativeEvent:S,targetContainers:[T]},l!==null&&(l=Jc(l),l!==null&&IR(l)),o):(o.eventSystemFlags|=m,l=o.targetContainers,T!==null&&l.indexOf(T)===-1&&l.push(T),o)}function WO(o,l,c,m,T){switch(l){case"focusin":return za=Lp(za,o,l,c,m,T),!0;case"dragenter":return qa=Lp(qa,o,l,c,m,T),!0;case"mouseover":return Ya=Lp(Ya,o,l,c,m,T),!0;case"pointerover":var S=T.pointerId;return Np.set(S,Lp(Np.get(S)||null,o,l,c,m,T)),!0;case"gotpointercapture":return S=T.pointerId,Pp.set(S,Lp(Pp.get(S)||null,o,l,c,m,T)),!0}return!1}function kR(o){var l=Wc(o.target);if(l!==null){var c=r(l);if(c!==null){if(l=c.tag,l===13){if(l=a(c),l!==null){o.blockedOn=l,Ww(o.priority,function(){NR(c)});return}}else if(l===31){if(l=u(c),l!==null){o.blockedOn=l,Ww(o.priority,function(){NR(c)});return}}else if(l===3&&c.stateNode.current.memoizedState.isDehydrated){o.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Wv(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var c=DE(o.nativeEvent);if(c===null){c=o.nativeEvent;var m=new c.constructor(c.type,c);IT=m,c.target.dispatchEvent(m),IT=null}else return l=Jc(c),l!==null&&IR(l),o.blockedOn=c,!1;l.shift()}return!0}function UR(o,l,c){Wv(o)&&c.delete(l)}function JO(){NE=!1,za!==null&&Wv(za)&&(za=null),qa!==null&&Wv(qa)&&(qa=null),Ya!==null&&Wv(Ya)&&(Ya=null),Np.forEach(UR),Pp.forEach(UR)}function Jv(o,l){o.blockedOn===l&&(o.blockedOn=null,NE||(NE=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,JO)))}var Qv=null;function BR(o){Qv!==o&&(Qv=o,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Qv===o&&(Qv=null);for(var l=0;l<o.length;l+=3){var c=o[l],m=o[l+1],T=o[l+2];if(typeof m!="function"){if(IE(m||c)===null)continue;break}var S=Jc(c);S!==null&&(o.splice(l,3),l-=3,DS(S,{pending:!0,data:T,method:c.method,action:m},m,T))}}))}function Id(o){function l(F){return Jv(F,o)}za!==null&&Jv(za,o),qa!==null&&Jv(qa,o),Ya!==null&&Jv(Ya,o),Np.forEach(l),Pp.forEach(l);for(var c=0;c<Xa.length;c++){var m=Xa[c];m.blockedOn===o&&(m.blockedOn=null)}for(;0<Xa.length&&(c=Xa[0],c.blockedOn===null);)kR(c),c.blockedOn===null&&Xa.shift();if(c=(o.ownerDocument||o).$$reactFormReplay,c!=null)for(m=0;m<c.length;m+=3){var T=c[m],S=c[m+1],M=T[Ai]||null;if(typeof S=="function")M||BR(c);else if(M){var P=null;if(S&&S.hasAttribute("formAction")){if(T=S,M=S[Ai]||null)P=M.formAction;else if(IE(T)!==null)continue}else P=M.action;typeof P=="function"?c[m+1]=P:(c.splice(m,3),m-=3),BR(c)}}}function FR(){function o(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(M){return T=M})},focusReset:"manual",scroll:"manual"})}function l(){T!==null&&(T(),T=null),m||setTimeout(c,20)}function c(){if(!m&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,T=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(c,100),function(){m=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),T!==null&&(T(),T=null)}}}function PE(o){this._internalRoot=o}Zv.prototype.render=PE.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(n(409));var c=l.current,m=$i();RR(c,m,o,l,null,null)},Zv.prototype.unmount=PE.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;RR(o.current,2,null,o,null,null),Nv(),l[Kc]=null}};function Zv(o){this._internalRoot=o}Zv.prototype.unstable_scheduleHydration=function(o){if(o){var l=Kw();o={blockedOn:null,target:o,priority:l};for(var c=0;c<Xa.length&&l!==0&&l<Xa[c].priority;c++);Xa.splice(c,0,o),c===0&&kR(o)}};var OR=t.version;if(OR!=="19.2.4")throw Error(n(527,OR,"19.2.4"));$.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=f(l),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var QO={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jv.isDisabled&&jv.supportsFiber)try{zf=jv.inject(QO),Oi=jv}catch{}}return Up.createRoot=function(o,l){if(!s(o))throw Error(n(299));var c=!1,m="",T=XM,S=$M,M=KM;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(T=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(M=l.onRecoverableError)),l=xR(o,1,!1,null,null,c,m,null,T,S,M,FR),o[Kc]=l.current,pE(o),new PE(l)},Up.hydrateRoot=function(o,l,c){if(!s(o))throw Error(n(299));var m=!1,T="",S=XM,M=$M,P=KM,F=null;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(T=c.identifierPrefix),c.onUncaughtError!==void 0&&(S=c.onUncaughtError),c.onCaughtError!==void 0&&(M=c.onCaughtError),c.onRecoverableError!==void 0&&(P=c.onRecoverableError),c.formState!==void 0&&(F=c.formState)),l=xR(o,1,!0,l,c??null,m,T,F,S,M,P,FR),l.context=MR(null),c=l.current,m=$i(),m=bT(m),T=Ia(m),T.callback=null,Na(c,T,m),c=m,l.current.lanes=c,Yf(l,c),Mo(l),o[Kc]=l.current,pE(o),new Zv(l)},Up.version="19.2.4",Up}var JR;function cV(){if(JR)return BE.exports;JR=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),BE.exports=uV(),BE.exports}var dV=cV();const B_=rt.createContext({});function F_(i){const t=rt.useRef(null);return t.current===null&&(t.current=i()),t.current}const MP=typeof window<"u",RP=MP?rt.useLayoutEffect:rt.useEffect,tT=rt.createContext(null);function O_(i,t){i.indexOf(t)===-1&&i.push(t)}function aA(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}const ir=(i,t,e)=>e>t?t:e<i?i:e;let V_=()=>{};const ga={},DP=i=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i);function IP(i){return typeof i=="object"&&i!==null}const NP=i=>/^0[^.\s]+$/u.test(i);function PP(i){let t;return()=>(t===void 0&&(t=i()),t)}const Ks=i=>i,hV=(i,t)=>e=>t(i(e)),_y=(...i)=>i.reduce(hV),Am=(i,t,e)=>{const n=t-i;return n===0?1:(e-i)/n};class H_{constructor(){this.subscriptions=[]}add(t){return O_(this.subscriptions,t),()=>aA(this.subscriptions,t)}notify(t,e,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,e,n);else for(let r=0;r<s;r++){const a=this.subscriptions[r];a&&a(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ao=i=>i*1e3,$s=i=>i/1e3;function LP(i,t){return t?i*(1e3/t):0}const kP=(i,t,e)=>(((1-3*e+3*t)*i+(3*e-6*t))*i+3*t)*i,fV=1e-7,pV=12;function mV(i,t,e,n,s){let r,a,u=0;do a=t+(e-t)/2,r=kP(a,n,s)-i,r>0?e=a:t=a;while(Math.abs(r)>fV&&++u<pV);return a}function wy(i,t,e,n){if(i===t&&e===n)return Ks;const s=r=>mV(r,0,1,i,e);return r=>r===0||r===1?r:kP(s(r),t,n)}const UP=i=>t=>t<=.5?i(2*t)/2:(2-i(2*(1-t)))/2,BP=i=>t=>1-i(1-t),FP=wy(.33,1.53,.69,.99),G_=BP(FP),OP=UP(G_),VP=i=>(i*=2)<1?.5*G_(i):.5*(2-Math.pow(2,-10*(i-1))),z_=i=>1-Math.sin(Math.acos(i)),HP=BP(z_),GP=UP(z_),gV=wy(.42,0,1,1),yV=wy(0,0,.58,1),zP=wy(.42,0,.58,1),vV=i=>Array.isArray(i)&&typeof i[0]!="number",qP=i=>Array.isArray(i)&&typeof i[0]=="number",AV={linear:Ks,easeIn:gV,easeInOut:zP,easeOut:yV,circIn:z_,circInOut:GP,circOut:HP,backIn:G_,backInOut:OP,backOut:FP,anticipate:VP},TV=i=>typeof i=="string",QR=i=>{if(qP(i)){V_(i.length===4);const[t,e,n,s]=i;return wy(t,e,n,s)}else if(TV(i))return AV[i];return i},t0=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function SV(i,t){let e=new Set,n=new Set,s=!1,r=!1;const a=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function h(p){a.has(p)&&(f.schedule(p),i()),p(u)}const f={schedule:(p,y=!1,v=!1)=>{const b=v&&s?e:n;return y&&a.add(p),b.has(p)||b.add(p),p},cancel:p=>{n.delete(p),a.delete(p)},process:p=>{if(u=p,s){r=!0;return}s=!0,[e,n]=[n,e],e.forEach(h),e.clear(),s=!1,r&&(r=!1,f.process(p))}};return f}const EV=40;function YP(i,t){let e=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>e=!0,a=t0.reduce((I,L)=>(I[L]=SV(r),I),{}),{setup:u,read:h,resolveKeyframes:f,preUpdate:p,update:y,preRender:v,render:E,postRender:b}=a,_=()=>{const I=ga.useManualTiming?s.timestamp:performance.now();e=!1,ga.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(I-s.timestamp,EV),1)),s.timestamp=I,s.isProcessing=!0,u.process(s),h.process(s),f.process(s),p.process(s),y.process(s),v.process(s),E.process(s),b.process(s),s.isProcessing=!1,e&&t&&(n=!1,i(_))},w=()=>{e=!0,n=!0,s.isProcessing||i(_)};return{schedule:t0.reduce((I,L)=>{const U=a[L];return I[L]=(k,B=!1,z=!1)=>(e||w(),U.schedule(k,B,z)),I},{}),cancel:I=>{for(let L=0;L<t0.length;L++)a[t0[L]].cancel(I)},state:s,steps:a}}const{schedule:De,cancel:Kl,state:zn,steps:HE}=YP(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ks,!0);let v0;function bV(){v0=void 0}const hi={now:()=>(v0===void 0&&hi.set(zn.isProcessing||ga.useManualTiming?zn.timestamp:performance.now()),v0),set:i=>{v0=i,queueMicrotask(bV)}},XP=i=>t=>typeof t=="string"&&t.startsWith(i),$P=XP("--"),CV=XP("var(--"),q_=i=>CV(i)?_V.test(i.split("/*")[0].trim()):!1,_V=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function ZR(i){return typeof i!="string"?!1:i.split("/*")[0].includes("var(--")}const Uf={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},Tm={...Uf,transform:i=>ir(0,1,i)},e0={...Uf,default:1},mm=i=>Math.round(i*1e5)/1e5,Y_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function wV(i){return i==null}const xV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,X_=(i,t)=>e=>!!(typeof e=="string"&&xV.test(e)&&e.startsWith(i)||t&&!wV(e)&&Object.prototype.hasOwnProperty.call(e,t)),KP=(i,t,e)=>n=>{if(typeof n!="string")return n;const[s,r,a,u]=n.match(Y_);return{[i]:parseFloat(s),[t]:parseFloat(r),[e]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},MV=i=>ir(0,255,i),GE={...Uf,transform:i=>Math.round(MV(i))},xu={test:X_("rgb","red"),parse:KP("red","green","blue"),transform:({red:i,green:t,blue:e,alpha:n=1})=>"rgba("+GE.transform(i)+", "+GE.transform(t)+", "+GE.transform(e)+", "+mm(Tm.transform(n))+")"};function RV(i){let t="",e="",n="",s="";return i.length>5?(t=i.substring(1,3),e=i.substring(3,5),n=i.substring(5,7),s=i.substring(7,9)):(t=i.substring(1,2),e=i.substring(2,3),n=i.substring(3,4),s=i.substring(4,5),t+=t,e+=e,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Sb={test:X_("#"),parse:RV,transform:xu.transform},xy=i=>({test:t=>typeof t=="string"&&t.endsWith(i)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${i}`}),Wa=xy("deg"),nr=xy("%"),At=xy("px"),DV=xy("vh"),IV=xy("vw"),jR={...nr,parse:i=>nr.parse(i)/100,transform:i=>nr.transform(i*100)},zd={test:X_("hsl","hue"),parse:KP("hue","saturation","lightness"),transform:({hue:i,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(i)+", "+nr.transform(mm(t))+", "+nr.transform(mm(e))+", "+mm(Tm.transform(n))+")"},dn={test:i=>xu.test(i)||Sb.test(i)||zd.test(i),parse:i=>xu.test(i)?xu.parse(i):zd.test(i)?zd.parse(i):Sb.parse(i),transform:i=>typeof i=="string"?i:i.hasOwnProperty("red")?xu.transform(i):zd.transform(i),getAnimatableNone:i=>{const t=dn.parse(i);return t.alpha=0,dn.transform(t)}},NV=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function PV(i){var t,e;return isNaN(i)&&typeof i=="string"&&(((t=i.match(Y_))==null?void 0:t.length)||0)+(((e=i.match(NV))==null?void 0:e.length)||0)>0}const WP="number",JP="color",LV="var",kV="var(",tD="${}",UV=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Sm(i){const t=i.toString(),e=[],n={color:[],number:[],var:[]},s=[];let r=0;const u=t.replace(UV,h=>(dn.test(h)?(n.color.push(r),s.push(JP),e.push(dn.parse(h))):h.startsWith(kV)?(n.var.push(r),s.push(LV),e.push(h)):(n.number.push(r),s.push(WP),e.push(parseFloat(h))),++r,tD)).split(tD);return{values:e,split:u,indexes:n,types:s}}function QP(i){return Sm(i).values}function ZP(i){const{split:t,types:e}=Sm(i),n=t.length;return s=>{let r="";for(let a=0;a<n;a++)if(r+=t[a],s[a]!==void 0){const u=e[a];u===WP?r+=mm(s[a]):u===JP?r+=dn.transform(s[a]):r+=s[a]}return r}}const BV=i=>typeof i=="number"?0:dn.test(i)?dn.getAnimatableNone(i):i;function FV(i){const t=QP(i);return ZP(i)(t.map(BV))}const To={test:PV,parse:QP,createTransformer:ZP,getAnimatableNone:FV};function zE(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+(t-i)*6*e:e<1/2?t:e<2/3?i+(t-i)*(2/3-e)*6:i}function OV({hue:i,saturation:t,lightness:e,alpha:n}){i/=360,t/=100,e/=100;let s=0,r=0,a=0;if(!t)s=r=a=e;else{const u=e<.5?e*(1+t):e+t-e*t,h=2*e-u;s=zE(h,u,i+1/3),r=zE(h,u,i),a=zE(h,u,i-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(a*255),alpha:n}}function lA(i,t){return e=>e>0?t:i}const He=(i,t,e)=>i+(t-i)*e,qE=(i,t,e)=>{const n=i*i,s=e*(t*t-n)+n;return s<0?0:Math.sqrt(s)},VV=[Sb,xu,zd],HV=i=>VV.find(t=>t.test(i));function eD(i){const t=HV(i);if(!t)return!1;let e=t.parse(i);return t===zd&&(e=OV(e)),e}const nD=(i,t)=>{const e=eD(i),n=eD(t);if(!e||!n)return lA(i,t);const s={...e};return r=>(s.red=qE(e.red,n.red,r),s.green=qE(e.green,n.green,r),s.blue=qE(e.blue,n.blue,r),s.alpha=He(e.alpha,n.alpha,r),xu.transform(s))},Eb=new Set(["none","hidden"]);function GV(i,t){return Eb.has(i)?e=>e<=0?i:t:e=>e>=1?t:i}function zV(i,t){return e=>He(i,t,e)}function $_(i){return typeof i=="number"?zV:typeof i=="string"?q_(i)?lA:dn.test(i)?nD:XV:Array.isArray(i)?jP:typeof i=="object"?dn.test(i)?nD:qV:lA}function jP(i,t){const e=[...i],n=e.length,s=i.map((r,a)=>$_(r)(r,t[a]));return r=>{for(let a=0;a<n;a++)e[a]=s[a](r);return e}}function qV(i,t){const e={...i,...t},n={};for(const s in e)i[s]!==void 0&&t[s]!==void 0&&(n[s]=$_(i[s])(i[s],t[s]));return s=>{for(const r in n)e[r]=n[r](s);return e}}function YV(i,t){const e=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const r=t.types[s],a=i.indexes[r][n[r]],u=i.values[a]??0;e[s]=u,n[r]++}return e}const XV=(i,t)=>{const e=To.createTransformer(t),n=Sm(i),s=Sm(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?Eb.has(i)&&!s.values.length||Eb.has(t)&&!n.values.length?GV(i,t):_y(jP(YV(n,s),s.values),e):lA(i,t)};function tL(i,t,e){return typeof i=="number"&&typeof t=="number"&&typeof e=="number"?He(i,t,e):$_(i)(i,t)}const $V=i=>{const t=({timestamp:e})=>i(e);return{start:(e=!0)=>De.update(t,e),stop:()=>Kl(t),now:()=>zn.isProcessing?zn.timestamp:hi.now()}},eL=(i,t,e=10)=>{let n="";const s=Math.max(Math.round(t/e),2);for(let r=0;r<s;r++)n+=Math.round(i(r/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},uA=2e4;function K_(i){let t=0;const e=50;let n=i.next(t);for(;!n.done&&t<uA;)t+=e,n=i.next(t);return t>=uA?1/0:t}function KV(i,t=100,e){const n=e({...i,keyframes:[0,t]}),s=Math.min(K_(n),uA);return{type:"keyframes",ease:r=>n.next(s*r).value/t,duration:$s(s)}}const WV=5;function nL(i,t,e){const n=Math.max(t-WV,0);return LP(e-i(n),t-n)}const We={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},YE=.001;function JV({duration:i=We.duration,bounce:t=We.bounce,velocity:e=We.velocity,mass:n=We.mass}){let s,r,a=1-t;a=ir(We.minDamping,We.maxDamping,a),i=ir(We.minDuration,We.maxDuration,$s(i)),a<1?(s=f=>{const p=f*a,y=p*i,v=p-e,E=bb(f,a),b=Math.exp(-y);return YE-v/E*b},r=f=>{const y=f*a*i,v=y*e+e,E=Math.pow(a,2)*Math.pow(f,2)*i,b=Math.exp(-y),_=bb(Math.pow(f,2),a);return(-s(f)+YE>0?-1:1)*((v-E)*b)/_}):(s=f=>{const p=Math.exp(-f*i),y=(f-e)*i+1;return-YE+p*y},r=f=>{const p=Math.exp(-f*i),y=(e-f)*(i*i);return p*y});const u=5/i,h=ZV(s,r,u);if(i=Ao(i),isNaN(h))return{stiffness:We.stiffness,damping:We.damping,duration:i};{const f=Math.pow(h,2)*n;return{stiffness:f,damping:a*2*Math.sqrt(n*f),duration:i}}}const QV=12;function ZV(i,t,e){let n=e;for(let s=1;s<QV;s++)n=n-i(n)/t(n);return n}function bb(i,t){return i*Math.sqrt(1-t*t)}const jV=["duration","bounce"],tH=["stiffness","damping","mass"];function iD(i,t){return t.some(e=>i[e]!==void 0)}function eH(i){let t={velocity:We.velocity,stiffness:We.stiffness,damping:We.damping,mass:We.mass,isResolvedFromDuration:!1,...i};if(!iD(i,tH)&&iD(i,jV))if(t.velocity=0,i.visualDuration){const e=i.visualDuration,n=2*Math.PI/(e*1.2),s=n*n,r=2*ir(.05,1,1-(i.bounce||0))*Math.sqrt(s);t={...t,mass:We.mass,stiffness:s,damping:r}}else{const e=JV({...i,velocity:0});t={...t,...e,mass:We.mass},t.isResolvedFromDuration=!0}return t}function cA(i=We.visualDuration,t=We.bounce){const e=typeof i!="object"?{visualDuration:i,keyframes:[0,1],bounce:t}:i;let{restSpeed:n,restDelta:s}=e;const r=e.keyframes[0],a=e.keyframes[e.keyframes.length-1],u={done:!1,value:r},{stiffness:h,damping:f,mass:p,duration:y,velocity:v,isResolvedFromDuration:E}=eH({...e,velocity:-$s(e.velocity||0)}),b=v||0,_=f/(2*Math.sqrt(h*p)),w=a-r,x=$s(Math.sqrt(h/p)),N=Math.abs(w)<5;n||(n=N?We.restSpeed.granular:We.restSpeed.default),s||(s=N?We.restDelta.granular:We.restDelta.default);let I;if(_<1){const U=bb(x,_);I=k=>{const B=Math.exp(-_*x*k);return a-B*((b+_*x*w)/U*Math.sin(U*k)+w*Math.cos(U*k))}}else if(_===1)I=U=>a-Math.exp(-x*U)*(w+(b+x*w)*U);else{const U=x*Math.sqrt(_*_-1);I=k=>{const B=Math.exp(-_*x*k),z=Math.min(U*k,300);return a-B*((b+_*x*w)*Math.sinh(z)+U*w*Math.cosh(z))/U}}const L={calculatedDuration:E&&y||null,next:U=>{const k=I(U);if(E)u.done=U>=y;else{let B=U===0?b:0;_<1&&(B=U===0?Ao(b):nL(I,U,k));const z=Math.abs(B)<=n,H=Math.abs(a-k)<=s;u.done=z&&H}return u.value=u.done?a:k,u},toString:()=>{const U=Math.min(K_(L),uA),k=eL(B=>L.next(U*B).value,U,30);return U+"ms "+k},toTransition:()=>{}};return L}cA.applyToOptions=i=>{const t=KV(i,100,cA);return i.ease=t.ease,i.duration=Ao(t.duration),i.type="keyframes",i};function Cb({keyframes:i,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:a,min:u,max:h,restDelta:f=.5,restSpeed:p}){const y=i[0],v={done:!1,value:y},E=z=>u!==void 0&&z<u||h!==void 0&&z>h,b=z=>u===void 0?h:h===void 0||Math.abs(u-z)<Math.abs(h-z)?u:h;let _=e*t;const w=y+_,x=a===void 0?w:a(w);x!==w&&(_=x-y);const N=z=>-_*Math.exp(-z/n),I=z=>x+N(z),L=z=>{const H=N(z),j=I(z);v.done=Math.abs(H)<=f,v.value=v.done?x:j};let U,k;const B=z=>{E(v.value)&&(U=z,k=cA({keyframes:[v.value,b(v.value)],velocity:nL(I,z,v.value),damping:s,stiffness:r,restDelta:f,restSpeed:p}))};return B(0),{calculatedDuration:null,next:z=>{let H=!1;return!k&&U===void 0&&(H=!0,L(z),B(z)),U!==void 0&&z>=U?k.next(z-U):(!H&&L(z),v)}}}function nH(i,t,e){const n=[],s=e||ga.mix||tL,r=i.length-1;for(let a=0;a<r;a++){let u=s(i[a],i[a+1]);if(t){const h=Array.isArray(t)?t[a]||Ks:t;u=_y(h,u)}n.push(u)}return n}function iH(i,t,{clamp:e=!0,ease:n,mixer:s}={}){const r=i.length;if(V_(r===t.length),r===1)return()=>t[0];if(r===2&&t[0]===t[1])return()=>t[1];const a=i[0]===i[1];i[0]>i[r-1]&&(i=[...i].reverse(),t=[...t].reverse());const u=nH(t,n,s),h=u.length,f=p=>{if(a&&p<i[0])return t[0];let y=0;if(h>1)for(;y<i.length-2&&!(p<i[y+1]);y++);const v=Am(i[y],i[y+1],p);return u[y](v)};return e?p=>f(ir(i[0],i[r-1],p)):f}function sH(i,t){const e=i[i.length-1];for(let n=1;n<=t;n++){const s=Am(0,t,n);i.push(He(e,1,s))}}function oH(i){const t=[0];return sH(t,i.length-1),t}function rH(i,t){return i.map(e=>e*t)}function aH(i,t){return i.map(()=>t||zP).splice(0,i.length-1)}function gm({duration:i=300,keyframes:t,times:e,ease:n="easeInOut"}){const s=vV(n)?n.map(QR):QR(n),r={done:!1,value:t[0]},a=rH(e&&e.length===t.length?e:oH(t),i),u=iH(a,t,{ease:Array.isArray(s)?s:aH(t,s)});return{calculatedDuration:i,next:h=>(r.value=u(h),r.done=h>=i,r)}}const lH=i=>i!==null;function W_(i,{repeat:t,repeatType:e="loop"},n,s=1){const r=i.filter(lH),u=s<0||t&&e!=="loop"&&t%2===1?0:r.length-1;return!u||n===void 0?r[u]:n}const uH={decay:Cb,inertia:Cb,tween:gm,keyframes:gm,spring:cA};function iL(i){typeof i.type=="string"&&(i.type=uH[i.type])}class J_{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const cH=i=>i/100;class Q_ extends J_{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,s;const{motionValue:e}=this.options;e&&e.updatedAt!==hi.now()&&this.tick(hi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(n=this.options).onStop)==null||s.call(n))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;iL(t);const{type:e=gm,repeat:n=0,repeatDelay:s=0,repeatType:r,velocity:a=0}=t;let{keyframes:u}=t;const h=e||gm;h!==gm&&typeof u[0]!="number"&&(this.mixKeyframes=_y(cH,tL(u[0],u[1])),u=[0,100]);const f=h({...t,keyframes:u});r==="mirror"&&(this.mirroredGenerator=h({...t,keyframes:[...u].reverse(),velocity:-a})),f.calculatedDuration===null&&(f.calculatedDuration=K_(f));const{calculatedDuration:p}=f;this.calculatedDuration=p,this.resolvedDuration=p+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=f}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:n,totalDuration:s,mixKeyframes:r,mirroredGenerator:a,resolvedDuration:u,calculatedDuration:h}=this;if(this.startTime===null)return n.next(0);const{delay:f=0,keyframes:p,repeat:y,repeatType:v,repeatDelay:E,type:b,onUpdate:_,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const x=this.currentTime-f*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?x<0:x>s;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let I=this.currentTime,L=n;if(y){const z=Math.min(this.currentTime,s)/u;let H=Math.floor(z),j=z%1;!j&&z>=1&&(j=1),j===1&&H--,H=Math.min(H,y+1),!!(H%2)&&(v==="reverse"?(j=1-j,E&&(j-=E/u)):v==="mirror"&&(L=a)),I=ir(0,1,j)*u}const U=N?{done:!1,value:p[0]}:L.next(I);r&&(U.value=r(U.value));let{done:k}=U;!N&&h!==null&&(k=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const B=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&k);return B&&b!==Cb&&(U.value=W_(p,this.options,w,this.speed)),_&&_(U.value),B&&this.finish(),U}then(t,e){return this.finished.then(t,e)}get duration(){return $s(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+$s(t)}get time(){return $s(this.currentTime)}set time(t){var e;t=Ao(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(e=this.driver)==null||e.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(hi.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=$s(this.currentTime))}play(){var s,r;if(this.isStopped)return;const{driver:t=$V,startTime:e}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),(r=(s=this.options).onPlay)==null||r.call(s);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=e??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(hi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,e;this.notifyFinished(),this.teardown(),this.state="finished",(e=(t=this.options).onComplete)==null||e.call(t)}cancel(){var t,e;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(e=(t=this.options).onCancel)==null||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var e;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(e=this.driver)==null||e.stop(),t.observe(this)}}function dH(i){for(let t=1;t<i.length;t++)i[t]??(i[t]=i[t-1])}const Mu=i=>i*180/Math.PI,_b=i=>{const t=Mu(Math.atan2(i[1],i[0]));return wb(t)},hH={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:i=>(Math.abs(i[0])+Math.abs(i[3]))/2,rotate:_b,rotateZ:_b,skewX:i=>Mu(Math.atan(i[1])),skewY:i=>Mu(Math.atan(i[2])),skew:i=>(Math.abs(i[1])+Math.abs(i[2]))/2},wb=i=>(i=i%360,i<0&&(i+=360),i),sD=_b,oD=i=>Math.sqrt(i[0]*i[0]+i[1]*i[1]),rD=i=>Math.sqrt(i[4]*i[4]+i[5]*i[5]),fH={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:oD,scaleY:rD,scale:i=>(oD(i)+rD(i))/2,rotateX:i=>wb(Mu(Math.atan2(i[6],i[5]))),rotateY:i=>wb(Mu(Math.atan2(-i[2],i[0]))),rotateZ:sD,rotate:sD,skewX:i=>Mu(Math.atan(i[4])),skewY:i=>Mu(Math.atan(i[1])),skew:i=>(Math.abs(i[1])+Math.abs(i[4]))/2};function xb(i){return i.includes("scale")?1:0}function Mb(i,t){if(!i||i==="none")return xb(t);const e=i.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(e)n=fH,s=e;else{const u=i.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=hH,s=u}if(!s)return xb(t);const r=n[t],a=s[1].split(",").map(mH);return typeof r=="function"?r(a):a[r]}const pH=(i,t)=>{const{transform:e="none"}=getComputedStyle(i);return Mb(e,t)};function mH(i){return parseFloat(i.trim())}const Bf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ff=new Set(Bf),aD=i=>i===Uf||i===At,gH=new Set(["x","y","z"]),yH=Bf.filter(i=>!gH.has(i));function vH(i){const t=[];return yH.forEach(e=>{const n=i.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const $l={width:({x:i},{paddingLeft:t="0",paddingRight:e="0"})=>i.max-i.min-parseFloat(t)-parseFloat(e),height:({y:i},{paddingTop:t="0",paddingBottom:e="0"})=>i.max-i.min-parseFloat(t)-parseFloat(e),top:(i,{top:t})=>parseFloat(t),left:(i,{left:t})=>parseFloat(t),bottom:({y:i},{top:t})=>parseFloat(t)+(i.max-i.min),right:({x:i},{left:t})=>parseFloat(t)+(i.max-i.min),x:(i,{transform:t})=>Mb(t,"x"),y:(i,{transform:t})=>Mb(t,"y")};$l.translateX=$l.x;$l.translateY=$l.y;const Hc=new Set;let Rb=!1,Db=!1,Ib=!1;function sL(){if(Db){const i=Array.from(Hc).filter(n=>n.needsMeasurement),t=new Set(i.map(n=>n.element)),e=new Map;t.forEach(n=>{const s=vH(n);s.length&&(e.set(n,s),n.render())}),i.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=e.get(n);s&&s.forEach(([r,a])=>{var u;(u=n.getValue(r))==null||u.set(a)})}),i.forEach(n=>n.measureEndState()),i.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Db=!1,Rb=!1,Hc.forEach(i=>i.complete(Ib)),Hc.clear()}function oL(){Hc.forEach(i=>{i.readKeyframes(),i.needsMeasurement&&(Db=!0)})}function AH(){Ib=!0,oL(),sL(),Ib=!1}class Z_{constructor(t,e,n,s,r,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=s,this.element=r,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Hc.add(this),Rb||(Rb=!0,De.read(oL),De.resolveKeyframes(sL))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:s}=this;if(t[0]===null){const r=s==null?void 0:s.get(),a=t[t.length-1];if(r!==void 0)t[0]=r;else if(n&&e){const u=n.readValue(e,a);u!=null&&(t[0]=u)}t[0]===void 0&&(t[0]=a),s&&r===void 0&&s.set(t[0])}dH(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Hc.delete(this)}cancel(){this.state==="scheduled"&&(Hc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const TH=i=>i.startsWith("--");function SH(i,t,e){TH(t)?i.style.setProperty(t,e):i.style[t]=e}const EH={};function rL(i,t){const e=PP(i);return()=>EH[t]??e()}const bH=rL(()=>window.ScrollTimeline!==void 0,"scrollTimeline"),aL=rL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Xp=([i,t,e,n])=>`cubic-bezier(${i}, ${t}, ${e}, ${n})`,lD={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xp([0,.65,.55,1]),circOut:Xp([.55,0,1,.45]),backIn:Xp([.31,.01,.66,-.59]),backOut:Xp([.33,1.53,.69,.99])};function lL(i,t){if(i)return typeof i=="function"?aL()?eL(i,t):"ease-out":qP(i)?Xp(i):Array.isArray(i)?i.map(e=>lL(e,t)||lD.easeOut):lD[i]}function CH(i,t,e,{delay:n=0,duration:s=300,repeat:r=0,repeatType:a="loop",ease:u="easeOut",times:h}={},f=void 0){const p={[t]:e};h&&(p.offset=h);const y=lL(u,s);Array.isArray(y)&&(p.easing=y);const v={delay:n,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:r+1,direction:a==="reverse"?"alternate":"normal"};return f&&(v.pseudoElement=f),i.animate(p,v)}function uL(i){return typeof i=="function"&&"applyToOptions"in i}function _H({type:i,...t}){return uL(i)&&aL()?i.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class cL extends J_{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:e,name:n,keyframes:s,pseudoElement:r,allowFlatten:a=!1,finalKeyframe:u,onComplete:h}=t;this.isPseudoElement=!!r,this.allowFlatten=a,this.options=t,V_(typeof t.type!="string");const f=_H(t);this.animation=CH(e,n,s,f,r),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const p=W_(s,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(p):SH(e,n,p),this.animation.cancel()}h==null||h(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,e;(e=(t=this.animation).finish)==null||e.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n,s;const t=(e=this.options)==null?void 0:e.element;!this.isPseudoElement&&(t!=null&&t.isConnected)&&((s=(n=this.animation).commitStyles)==null||s.call(n))}get duration(){var e,n;const t=((n=(e=this.animation.effect)==null?void 0:e.getComputedTiming)==null?void 0:n.call(e).duration)||0;return $s(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+$s(t)}get time(){return $s(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Ao(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&bH()?(this.animation.timeline=t,Ks):e(this)}}const dL={anticipate:VP,backInOut:OP,circInOut:GP};function wH(i){return i in dL}function xH(i){typeof i.ease=="string"&&wH(i.ease)&&(i.ease=dL[i.ease])}const XE=10;class MH extends cL{constructor(t){xH(t),iL(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:n,onComplete:s,element:r,...a}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const u=new Q_({...a,autoplay:!1}),h=Math.max(XE,hi.now()-this.startTime),f=ir(0,XE,h-XE);e.setWithVelocity(u.sample(Math.max(0,h-f)).value,u.sample(h).value,f),u.stop()}}const uD=(i,t)=>t==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(To.test(i)||i==="0")&&!i.startsWith("url("));function RH(i){const t=i[0];if(i.length===1)return!0;for(let e=0;e<i.length;e++)if(i[e]!==t)return!0}function DH(i,t,e,n){const s=i[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const r=i[i.length-1],a=uD(s,t),u=uD(r,t);return!a||!u?!1:RH(i)||(e==="spring"||uL(e))&&n}function Nb(i){i.duration=0,i.type="keyframes"}const IH=new Set(["opacity","clipPath","filter","transform"]),NH=PP(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function PH(i){var p;const{motionValue:t,name:e,repeatDelay:n,repeatType:s,damping:r,type:a}=i;if(!(((p=t==null?void 0:t.owner)==null?void 0:p.current)instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=t.owner.getProps();return NH()&&e&&IH.has(e)&&(e!=="transform"||!f)&&!h&&!n&&s!=="mirror"&&r!==0&&a!=="inertia"}const LH=40;class kH extends J_{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:a="loop",keyframes:u,name:h,motionValue:f,element:p,...y}){var b;super(),this.stop=()=>{var _,w;this._animation&&(this._animation.stop(),(_=this.stopTimeline)==null||_.call(this)),(w=this.keyframeResolver)==null||w.cancel()},this.createdAt=hi.now();const v={autoplay:t,delay:e,type:n,repeat:s,repeatDelay:r,repeatType:a,name:h,motionValue:f,element:p,...y},E=(p==null?void 0:p.KeyframeResolver)||Z_;this.keyframeResolver=new E(u,(_,w,x)=>this.onKeyframesResolved(_,w,v,!x),h,f,p),(b=this.keyframeResolver)==null||b.scheduleResolve()}onKeyframesResolved(t,e,n,s){var w,x;this.keyframeResolver=void 0;const{name:r,type:a,velocity:u,delay:h,isHandoff:f,onUpdate:p}=n;this.resolvedAt=hi.now(),DH(t,r,a,u)||((ga.instantAnimations||!h)&&(p==null||p(W_(t,n,e))),t[0]=t[t.length-1],Nb(n),n.repeat=0);const v={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>LH?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...n,keyframes:t},E=!f&&PH(v),b=(x=(w=v.motionValue)==null?void 0:w.owner)==null?void 0:x.current,_=E?new MH({...v,element:b}):new Q_(v);_.finished.then(()=>{this.notifyFinished()}).catch(Ks),this.pendingTimeline&&(this.stopTimeline=_.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=_}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),AH()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}function hL(i,t,e,n=0,s=1){const r=Array.from(i).sort((f,p)=>f.sortNodePosition(p)).indexOf(t),a=i.size,u=(a-1)*n;return typeof e=="function"?e(r,a):s===1?r*n:u-r*n}const UH=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function BH(i){const t=UH.exec(i);if(!t)return[,];const[,e,n,s]=t;return[`--${e??n}`,s]}function fL(i,t,e=1){const[n,s]=BH(i);if(!n)return;const r=window.getComputedStyle(t).getPropertyValue(n);if(r){const a=r.trim();return DP(a)?parseFloat(a):a}return q_(s)?fL(s,t,e+1):s}const FH={type:"spring",stiffness:500,damping:25,restSpeed:10},OH=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),VH={type:"keyframes",duration:.8},HH={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},GH=(i,{keyframes:t})=>t.length>2?VH:Ff.has(i)?i.startsWith("scale")?OH(t[1]):FH:HH,zH=i=>i!==null;function qH(i,{repeat:t,repeatType:e="loop"},n){const s=i.filter(zH),r=t&&e!=="loop"&&t%2===1?0:s.length-1;return s[r]}function pL(i,t){if(i!=null&&i.inherit&&t){const{inherit:e,...n}=i;return{...t,...n}}return i}function j_(i,t){const e=(i==null?void 0:i[t])??(i==null?void 0:i.default)??i;return e!==i?pL(e,i):e}function YH({when:i,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:s,repeat:r,repeatType:a,repeatDelay:u,from:h,elapsed:f,...p}){return!!Object.keys(p).length}const tw=(i,t,e,n={},s,r)=>a=>{const u=j_(n,i)||{},h=u.delay||n.delay||0;let{elapsed:f=0}=n;f=f-Ao(h);const p={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...u,delay:-f,onUpdate:v=>{t.set(v),u.onUpdate&&u.onUpdate(v)},onComplete:()=>{a(),u.onComplete&&u.onComplete()},name:i,motionValue:t,element:r?void 0:s};YH(u)||Object.assign(p,GH(i,p)),p.duration&&(p.duration=Ao(p.duration)),p.repeatDelay&&(p.repeatDelay=Ao(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let y=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(Nb(p),p.delay===0&&(y=!0)),(ga.instantAnimations||ga.skipAnimations||s!=null&&s.shouldSkipAnimations)&&(y=!0,Nb(p),p.delay=0),p.allowFlatten=!u.type&&!u.ease,y&&!r&&t.get()!==void 0){const v=qH(p.keyframes,u);if(v!==void 0){De.update(()=>{p.onUpdate(v),p.onComplete()});return}}return u.isSync?new Q_(p):new kH(p)};function cD(i){const t=[{},{}];return i==null||i.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function ew(i,t,e,n){if(typeof t=="function"){const[s,r]=cD(n);t=t(e!==void 0?e:i.custom,s,r)}if(typeof t=="string"&&(t=i.variants&&i.variants[t]),typeof t=="function"){const[s,r]=cD(n);t=t(e!==void 0?e:i.custom,s,r)}return t}function nh(i,t,e){const n=i.getProps();return ew(n,t,e!==void 0?e:n.custom,i)}const mL=new Set(["width","height","top","left","right","bottom",...Bf]),dD=30,XH=i=>!isNaN(parseFloat(i));class $H{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var r;const s=hi.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((r=this.events.change)==null||r.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=hi.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=XH(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new H_);const n=this.events[t].add(e);return t==="change"?()=>{n(),De.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=hi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>dD)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,dD);return LP(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,e;(t=this.dependents)==null||t.clear(),(e=this.events.destroy)==null||e.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Pf(i,t){return new $H(i,t)}const Pb=i=>Array.isArray(i);function KH(i,t,e){i.hasValue(t)?i.getValue(t).set(e):i.addValue(t,Pf(e))}function WH(i){return Pb(i)?i[i.length-1]||0:i}function JH(i,t){const e=nh(i,t);let{transitionEnd:n={},transition:s={},...r}=e||{};r={...r,...n};for(const a in r){const u=WH(r[a]);KH(i,a,u)}}const ni=i=>!!(i&&i.getVelocity);function QH(i){return!!(ni(i)&&i.add)}function Lb(i,t){const e=i.getValue("willChange");if(QH(e))return e.add(t);if(!e&&ga.WillChange){const n=new ga.WillChange("auto");i.addValue("willChange",n),n.add(t)}}function nw(i){return i.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const ZH="framerAppearId",gL="data-"+nw(ZH);function yL(i){return i.props[gL]}function jH({protectedKeys:i,needsAnimating:t},e){const n=i.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function vL(i,t,{delay:e=0,transitionOverride:n,type:s}={}){let{transition:r,transitionEnd:a,...u}=t;const h=i.getDefaultTransition();r=r?pL(r,h):h;const f=r==null?void 0:r.reduceMotion;n&&(r=n);const p=[],y=s&&i.animationState&&i.animationState.getState()[s];for(const v in u){const E=i.getValue(v,i.latestValues[v]??null),b=u[v];if(b===void 0||y&&jH(y,v))continue;const _={delay:e,...j_(r||{},v)},w=E.get();if(w!==void 0&&!E.isAnimating&&!Array.isArray(b)&&b===w&&!_.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const L=yL(i);if(L){const U=window.MotionHandoffAnimation(L,v,De);U!==null&&(_.startTime=U,x=!0)}}Lb(i,v);const N=f??i.shouldReduceMotion;E.start(tw(v,E,b,N&&mL.has(v)?{type:!1}:_,i,x));const I=E.animation;I&&p.push(I)}if(a){const v=()=>De.update(()=>{a&&JH(i,a)});p.length?Promise.all(p).then(v):v()}return p}function kb(i,t,e={}){var h;const n=nh(i,t,e.type==="exit"?(h=i.presenceContext)==null?void 0:h.custom:void 0);let{transition:s=i.getDefaultTransition()||{}}=n||{};e.transitionOverride&&(s=e.transitionOverride);const r=n?()=>Promise.all(vL(i,n,e)):()=>Promise.resolve(),a=i.variantChildren&&i.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:y,staggerDirection:v}=s;return tG(i,t,f,p,y,v,e)}:()=>Promise.resolve(),{when:u}=s;if(u){const[f,p]=u==="beforeChildren"?[r,a]:[a,r];return f().then(()=>p())}else return Promise.all([r(),a(e.delay)])}function tG(i,t,e=0,n=0,s=0,r=1,a){const u=[];for(const h of i.variantChildren)h.notify("AnimationStart",t),u.push(kb(h,t,{...a,delay:e+(typeof n=="function"?0:n)+hL(i.variantChildren,h,n,s,r)}).then(()=>h.notify("AnimationComplete",t)));return Promise.all(u)}function eG(i,t,e={}){i.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(r=>kb(i,r,e));n=Promise.all(s)}else if(typeof t=="string")n=kb(i,t,e);else{const s=typeof t=="function"?nh(i,t,e.custom):t;n=Promise.all(vL(i,s,e))}return n.then(()=>{i.notify("AnimationComplete",t)})}const nG={test:i=>i==="auto",parse:i=>i},AL=i=>t=>t.test(i),TL=[Uf,At,nr,Wa,IV,DV,nG],hD=i=>TL.find(AL(i));function iG(i){return typeof i=="number"?i===0:i!==null?i==="none"||i==="0"||NP(i):!0}const sG=new Set(["brightness","contrast","saturate","opacity"]);function oG(i){const[t,e]=i.slice(0,-1).split("(");if(t==="drop-shadow")return i;const[n]=e.match(Y_)||[];if(!n)return i;const s=e.replace(n,"");let r=sG.has(t)?1:0;return n!==e&&(r*=100),t+"("+r+s+")"}const rG=/\b([a-z-]*)\(.*?\)/gu,Ub={...To,getAnimatableNone:i=>{const t=i.match(rG);return t?t.map(oG).join(" "):i}},Bb={...To,getAnimatableNone:i=>{const t=To.parse(i);return To.createTransformer(i)(t.map(n=>typeof n=="number"?0:typeof n=="object"?{...n,alpha:1}:n))}},fD={...Uf,transform:Math.round},aG={rotate:Wa,rotateX:Wa,rotateY:Wa,rotateZ:Wa,scale:e0,scaleX:e0,scaleY:e0,scaleZ:e0,skew:Wa,skewX:Wa,skewY:Wa,distance:At,translateX:At,translateY:At,translateZ:At,x:At,y:At,z:At,perspective:At,transformPerspective:At,opacity:Tm,originX:jR,originY:jR,originZ:At},iw={borderWidth:At,borderTopWidth:At,borderRightWidth:At,borderBottomWidth:At,borderLeftWidth:At,borderRadius:At,borderTopLeftRadius:At,borderTopRightRadius:At,borderBottomRightRadius:At,borderBottomLeftRadius:At,width:At,maxWidth:At,height:At,maxHeight:At,top:At,right:At,bottom:At,left:At,inset:At,insetBlock:At,insetBlockStart:At,insetBlockEnd:At,insetInline:At,insetInlineStart:At,insetInlineEnd:At,padding:At,paddingTop:At,paddingRight:At,paddingBottom:At,paddingLeft:At,paddingBlock:At,paddingBlockStart:At,paddingBlockEnd:At,paddingInline:At,paddingInlineStart:At,paddingInlineEnd:At,margin:At,marginTop:At,marginRight:At,marginBottom:At,marginLeft:At,marginBlock:At,marginBlockStart:At,marginBlockEnd:At,marginInline:At,marginInlineStart:At,marginInlineEnd:At,fontSize:At,backgroundPositionX:At,backgroundPositionY:At,...aG,zIndex:fD,fillOpacity:Tm,strokeOpacity:Tm,numOctaves:fD},lG={...iw,color:dn,backgroundColor:dn,outlineColor:dn,fill:dn,stroke:dn,borderColor:dn,borderTopColor:dn,borderRightColor:dn,borderBottomColor:dn,borderLeftColor:dn,filter:Ub,WebkitFilter:Ub,mask:Bb,WebkitMask:Bb},SL=i=>lG[i],uG=new Set([Ub,Bb]);function EL(i,t){let e=SL(i);return uG.has(e)||(e=To),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const cG=new Set(["auto","none","0"]);function dG(i,t,e){let n=0,s;for(;n<i.length&&!s;){const r=i[n];typeof r=="string"&&!cG.has(r)&&Sm(r).values.length&&(s=i[n]),n++}if(s&&e)for(const r of t)i[r]=EL(e,s)}class hG extends Z_{constructor(t,e,n,s,r){super(t,e,n,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let p=0;p<t.length;p++){let y=t[p];if(typeof y=="string"&&(y=y.trim(),q_(y))){const v=fL(y,e.current);v!==void 0&&(t[p]=v),p===t.length-1&&(this.finalKeyframe=y)}}if(this.resolveNoneKeyframes(),!mL.has(n)||t.length!==2)return;const[s,r]=t,a=hD(s),u=hD(r),h=ZR(s),f=ZR(r);if(h!==f&&$l[n]){this.needsMeasurement=!0;return}if(a!==u)if(aD(a)&&aD(u))for(let p=0;p<t.length;p++){const y=t[p];typeof y=="string"&&(t[p]=parseFloat(y))}else $l[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||iG(t[s]))&&n.push(s);n.length&&dG(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=$l[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const s=e[e.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){var u;const{element:t,name:e,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const s=t.getValue(e);s&&s.jump(this.measuredOrigin,!1);const r=n.length-1,a=n[r];n[r]=$l[e](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([h,f])=>{t.getValue(h).set(f)}),this.resolveNoneKeyframes()}}const fG=new Set(["opacity","clipPath","filter","transform"]);function bL(i,t,e){if(i==null)return[];if(i instanceof EventTarget)return[i];if(typeof i=="string"){let n=document;const s=(e==null?void 0:e[i])??n.querySelectorAll(i);return s?Array.from(s):[]}return Array.from(i).filter(n=>n!=null)}const CL=(i,t)=>t&&typeof i=="number"?t.transform(i):i;function Fb(i){return IP(i)&&"offsetHeight"in i}const{schedule:sw}=YP(queueMicrotask,!1),io={x:!1,y:!1};function _L(){return io.x||io.y}function pG(i){return i==="x"||i==="y"?io[i]?null:(io[i]=!0,()=>{io[i]=!1}):io.x||io.y?null:(io.x=io.y=!0,()=>{io.x=io.y=!1})}function wL(i,t){const e=bL(i),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[e,s,()=>n.abort()]}function mG(i){return!(i.pointerType==="touch"||_L())}function gG(i,t,e={}){const[n,s,r]=wL(i,e);return n.forEach(a=>{let u=!1,h=!1,f;const p=()=>{a.removeEventListener("pointerleave",b)},y=w=>{f&&(f(w),f=void 0),p()},v=w=>{u=!1,window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),h&&(h=!1,y(w))},E=()=>{u=!0,window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",v,s)},b=w=>{if(w.pointerType!=="touch"){if(u){h=!0;return}y(w)}},_=w=>{if(!mG(w))return;h=!1;const x=t(a,w);typeof x=="function"&&(f=x,a.addEventListener("pointerleave",b,s))};a.addEventListener("pointerenter",_,s),a.addEventListener("pointerdown",E,s)}),r}const xL=(i,t)=>t?i===t?!0:xL(i,t.parentElement):!1,ow=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1,yG=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function vG(i){return yG.has(i.tagName)||i.isContentEditable===!0}const AG=new Set(["INPUT","SELECT","TEXTAREA"]);function TG(i){return AG.has(i.tagName)||i.isContentEditable===!0}const A0=new WeakSet;function pD(i){return t=>{t.key==="Enter"&&i(t)}}function $E(i,t){i.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const SG=(i,t)=>{const e=i.currentTarget;if(!e)return;const n=pD(()=>{if(A0.has(e))return;$E(e,"down");const s=pD(()=>{$E(e,"up")}),r=()=>$E(e,"cancel");e.addEventListener("keyup",s,t),e.addEventListener("blur",r,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function mD(i){return ow(i)&&!_L()}const gD=new WeakSet;function EG(i,t,e={}){const[n,s,r]=wL(i,e),a=u=>{const h=u.currentTarget;if(!mD(u)||gD.has(u))return;A0.add(h),e.stopPropagation&&gD.add(u);const f=t(h,u),p=(E,b)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",v),A0.has(h)&&A0.delete(h),mD(E)&&typeof f=="function"&&f(E,{success:b})},y=E=>{p(E,h===window||h===document||e.useGlobalTarget||xL(h,E.target))},v=E=>{p(E,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",v,s)};return n.forEach(u=>{(e.useGlobalTarget?window:u).addEventListener("pointerdown",a,s),Fb(u)&&(u.addEventListener("focus",f=>SG(f,s)),!vG(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),r}function rw(i){return IP(i)&&"ownerSVGElement"in i}const T0=new WeakMap;let Ja;const ML=(i,t,e)=>(n,s)=>s&&s[0]?s[0][i+"Size"]:rw(n)&&"getBBox"in n?n.getBBox()[t]:n[e],bG=ML("inline","width","offsetWidth"),CG=ML("block","height","offsetHeight");function _G({target:i,borderBoxSize:t}){var e;(e=T0.get(i))==null||e.forEach(n=>{n(i,{get width(){return bG(i,t)},get height(){return CG(i,t)}})})}function wG(i){i.forEach(_G)}function xG(){typeof ResizeObserver>"u"||(Ja=new ResizeObserver(wG))}function MG(i,t){Ja||xG();const e=bL(i);return e.forEach(n=>{let s=T0.get(n);s||(s=new Set,T0.set(n,s)),s.add(t),Ja==null||Ja.observe(n)}),()=>{e.forEach(n=>{const s=T0.get(n);s==null||s.delete(t),s!=null&&s.size||Ja==null||Ja.unobserve(n)})}}const S0=new Set;let qd;function RG(){qd=()=>{const i={get width(){return window.innerWidth},get height(){return window.innerHeight}};S0.forEach(t=>t(i))},window.addEventListener("resize",qd)}function DG(i){return S0.add(i),qd||RG(),()=>{S0.delete(i),!S0.size&&typeof qd=="function"&&(window.removeEventListener("resize",qd),qd=void 0)}}function yD(i,t){return typeof i=="function"?DG(i):MG(i,t)}function IG(i){return rw(i)&&i.tagName==="svg"}const NG=[...TL,dn,To],PG=i=>NG.find(AL(i)),vD=()=>({translate:0,scale:1,origin:0,originPoint:0}),Yd=()=>({x:vD(),y:vD()}),AD=()=>({min:0,max:0}),vn=()=>({x:AD(),y:AD()}),LG=new WeakMap;function eT(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}function Em(i){return typeof i=="string"||Array.isArray(i)}const aw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],lw=["initial",...aw];function nT(i){return eT(i.animate)||lw.some(t=>Em(i[t]))}function RL(i){return!!(nT(i)||i.variants)}function kG(i,t,e){for(const n in t){const s=t[n],r=e[n];if(ni(s))i.addValue(n,s);else if(ni(r))i.addValue(n,Pf(s,{owner:i}));else if(r!==s)if(i.hasValue(n)){const a=i.getValue(n);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=i.getStaticValue(n);i.addValue(n,Pf(a!==void 0?a:s,{owner:i}))}}for(const n in e)t[n]===void 0&&i.removeValue(n);return t}const Ob={current:null},DL={current:!1},UG=typeof window<"u";function BG(){if(DL.current=!0,!!UG)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),t=()=>Ob.current=i.matches;i.addEventListener("change",t),t()}else Ob.current=!1}const TD=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let dA={};function IL(i){dA=i}function FG(){return dA}class OG{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:s,skipAnimations:r,blockInitialAnimation:a,visualState:u},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=Z_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const E=hi.now();this.renderScheduledAt<E&&(this.renderScheduledAt=E,De.render(this.render,!1,!0))};const{latestValues:f,renderState:p}=u;this.latestValues=f,this.baseTarget={...f},this.initialValues=e.initial?{...f}:{},this.renderState=p,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.skipAnimationsConfig=r,this.options=h,this.blockInitialAnimation=!!a,this.isControllingVariants=nT(e),this.isVariantNode=RL(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:y,...v}=this.scrapeMotionValuesFromProps(e,{},this);for(const E in v){const b=v[E];f[E]!==void 0&&ni(b)&&b.set(f[E])}}mount(t){var e,n;if(this.hasBeenMounted)for(const s in this.initialValues)(e=this.values.get(s))==null||e.jump(this.initialValues[s]),this.latestValues[s]=this.initialValues[s];this.current=t,LG.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,r)=>this.bindToMotionValue(r,s)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(DL.current||BG(),this.shouldReduceMotion=Ob.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var t;this.projection&&this.projection.unmount(),Kl(this.notifyUpdate),Kl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){if(this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)(),e.accelerate&&fG.has(t)&&this.current instanceof HTMLElement){const{factory:a,keyframes:u,times:h,ease:f,duration:p}=e.accelerate,y=new cL({element:this.current,name:t,keyframes:u,times:h,ease:f,duration:Ao(p)}),v=a(y);this.valueSubscriptions.set(t,()=>{v(),y.cancel()});return}const n=Ff.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=e.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&De.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;typeof window<"u"&&window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{s(),r&&r(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in dA){const e=dA[t];if(!e)continue;const{isEnabled:n,Feature:s}=e;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):vn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<TD.length;n++){const s=TD[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,a=t[r];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=kG(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=Pf(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(DP(n)||NP(n))?n=parseFloat(n):!PG(n)&&To.test(e)&&(n=EL(t,e)),this.setBaseTarget(t,ni(n)?n.get():n)),ni(n)?n.get():n}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var r;const{initial:e}=this.props;let n;if(typeof e=="string"||typeof e=="object"){const a=ew(this.props,e,(r=this.presenceContext)==null?void 0:r.custom);a&&(n=a[t])}if(e&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!ni(s)?s:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new H_),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){sw.render(this.render)}}class NL extends OG{constructor(){super(...arguments),this.KeyframeResolver=hG}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){const n=t.style;return n?n[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ni(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}class Zl{constructor(t){this.isMounted=!1,this.node=t}update(){}}function PL({top:i,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:i,max:n}}}function VG({x:i,y:t}){return{top:t.min,right:i.max,bottom:t.max,left:i.min}}function HG(i,t){if(!t)return i;const e=t({x:i.left,y:i.top}),n=t({x:i.right,y:i.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}function KE(i){return i===void 0||i===1}function Vb({scale:i,scaleX:t,scaleY:e}){return!KE(i)||!KE(t)||!KE(e)}function Au(i){return Vb(i)||LL(i)||i.z||i.rotate||i.rotateX||i.rotateY||i.skewX||i.skewY}function LL(i){return SD(i.x)||SD(i.y)}function SD(i){return i&&i!=="0%"}function hA(i,t,e){const n=i-e,s=t*n;return e+s}function ED(i,t,e,n,s){return s!==void 0&&(i=hA(i,s,n)),hA(i,e,n)+t}function Hb(i,t=0,e=1,n,s){i.min=ED(i.min,t,e,n,s),i.max=ED(i.max,t,e,n,s)}function kL(i,{x:t,y:e}){Hb(i.x,t.translate,t.scale,t.originPoint),Hb(i.y,e.translate,e.scale,e.originPoint)}const bD=.999999999999,CD=1.0000000000001;function GG(i,t,e,n=!1){const s=e.length;if(!s)return;t.x=t.y=1;let r,a;for(let u=0;u<s;u++){r=e[u],a=r.projectionDelta;const{visualElement:h}=r.options;h&&h.props.style&&h.props.style.display==="contents"||(n&&r.options.layoutScroll&&r.scroll&&r!==r.root&&$d(i,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,kL(i,a)),n&&Au(r.latestValues)&&$d(i,r.latestValues))}t.x<CD&&t.x>bD&&(t.x=1),t.y<CD&&t.y>bD&&(t.y=1)}function Xd(i,t){i.min=i.min+t,i.max=i.max+t}function _D(i,t,e,n,s=.5){const r=He(i.min,i.max,s);Hb(i,t,e,r,n)}function $d(i,t){_D(i.x,t.x,t.scaleX,t.scale,t.originX),_D(i.y,t.y,t.scaleY,t.scale,t.originY)}function UL(i,t){return PL(HG(i.getBoundingClientRect(),t))}function zG(i,t,e){const n=UL(i,e),{scroll:s}=t;return s&&(Xd(n.x,s.offset.x),Xd(n.y,s.offset.y)),n}const qG={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},YG=Bf.length;function XG(i,t,e){let n="",s=!0;for(let r=0;r<YG;r++){const a=Bf[r],u=i[a];if(u===void 0)continue;let h=!0;if(typeof u=="number")h=u===(a.startsWith("scale")?1:0);else{const f=parseFloat(u);h=a.startsWith("scale")?f===1:f===0}if(!h||e){const f=CL(u,iw[a]);if(!h){s=!1;const p=qG[a]||a;n+=`${p}(${f}) `}e&&(t[a]=f)}}return n=n.trim(),e?n=e(t,s?"":n):s&&(n="none"),n}function uw(i,t,e){const{style:n,vars:s,transformOrigin:r}=i;let a=!1,u=!1;for(const h in t){const f=t[h];if(Ff.has(h)){a=!0;continue}else if($P(h)){s[h]=f;continue}else{const p=CL(f,iw[h]);h.startsWith("origin")?(u=!0,r[h]=p):n[h]=p}}if(t.transform||(a||e?n.transform=XG(t,i.transform,e):n.transform&&(n.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:p=0}=r;n.transformOrigin=`${h} ${f} ${p}`}}function BL(i,{style:t,vars:e},n,s){const r=i.style;let a;for(a in t)r[a]=t[a];s==null||s.applyProjectionStyles(r,n);for(a in e)r.setProperty(a,e[a])}function wD(i,t){return t.max===t.min?0:i/(t.max-t.min)*100}const Bp={correct:(i,t)=>{if(!t.target)return i;if(typeof i=="string")if(At.test(i))i=parseFloat(i);else return i;const e=wD(i,t.target.x),n=wD(i,t.target.y);return`${e}% ${n}%`}},$G={correct:(i,{treeScale:t,projectionDelta:e})=>{const n=i,s=To.parse(i);if(s.length>5)return n;const r=To.createTransformer(i),a=typeof s[0]!="number"?1:0,u=e.x.scale*t.x,h=e.y.scale*t.y;s[0+a]/=u,s[1+a]/=h;const f=He(u,h,.5);return typeof s[2+a]=="number"&&(s[2+a]/=f),typeof s[3+a]=="number"&&(s[3+a]/=f),r(s)}},Gb={borderRadius:{...Bp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Bp,borderTopRightRadius:Bp,borderBottomLeftRadius:Bp,borderBottomRightRadius:Bp,boxShadow:$G};function FL(i,{layout:t,layoutId:e}){return Ff.has(i)||i.startsWith("origin")||(t||e!==void 0)&&(!!Gb[i]||i==="opacity")}function cw(i,t,e){var a;const n=i.style,s=t==null?void 0:t.style,r={};if(!n)return r;for(const u in n)(ni(n[u])||s&&ni(s[u])||FL(u,i)||((a=e==null?void 0:e.getValue(u))==null?void 0:a.liveStyle)!==void 0)&&(r[u]=n[u]);return r}function KG(i){return window.getComputedStyle(i)}class WG extends NL{constructor(){super(...arguments),this.type="html",this.renderInstance=BL}readValueFromInstance(t,e){var n;if(Ff.has(e))return(n=this.projection)!=null&&n.isProjecting?xb(e):pH(t,e);{const s=KG(t),r=($P(e)?s.getPropertyValue(e):s[e])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:e}){return UL(t,e)}build(t,e,n){uw(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return cw(t,e,n)}}const JG={offset:"stroke-dashoffset",array:"stroke-dasharray"},QG={offset:"strokeDashoffset",array:"strokeDasharray"};function ZG(i,t,e=1,n=0,s=!0){i.pathLength=1;const r=s?JG:QG;i[r.offset]=`${-n}`,i[r.array]=`${t} ${e}`}const jG=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function OL(i,{attrX:t,attrY:e,attrScale:n,pathLength:s,pathSpacing:r=1,pathOffset:a=0,...u},h,f,p){if(uw(i,u,f),h){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:y,style:v}=i;y.transform&&(v.transform=y.transform,delete y.transform),(v.transform||y.transformOrigin)&&(v.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),v.transform&&(v.transformBox=(p==null?void 0:p.transformBox)??"fill-box",delete y.transformBox);for(const E of jG)y[E]!==void 0&&(v[E]=y[E],delete y[E]);t!==void 0&&(y.x=t),e!==void 0&&(y.y=e),n!==void 0&&(y.scale=n),s!==void 0&&ZG(y,s,r,a,!1)}const VL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),HL=i=>typeof i=="string"&&i.toLowerCase()==="svg";function t3(i,t,e,n){BL(i,t,void 0,n);for(const s in t.attrs)i.setAttribute(VL.has(s)?s:nw(s),t.attrs[s])}function GL(i,t,e){const n=cw(i,t,e);for(const s in i)if(ni(i[s])||ni(t[s])){const r=Bf.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[r]=i[s]}return n}class e3 extends NL{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=vn}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Ff.has(e)){const n=SL(e);return n&&n.default||0}return e=VL.has(e)?e:nw(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return GL(t,e,n)}build(t,e,n){OL(t,e,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,e,n,s){t3(t,e,n,s)}mount(t){this.isSVGTag=HL(t.tagName),super.mount(t)}}const n3=lw.length;function zL(i){if(!i)return;if(!i.isControllingVariants){const e=i.parent?zL(i.parent)||{}:{};return i.props.initial!==void 0&&(e.initial=i.props.initial),e}const t={};for(let e=0;e<n3;e++){const n=lw[e],s=i.props[n];(Em(s)||s===!1)&&(t[n]=s)}return t}function qL(i,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==i.length)return!1;for(let n=0;n<e;n++)if(t[n]!==i[n])return!1;return!0}const i3=[...aw].reverse(),s3=aw.length;function o3(i){return t=>Promise.all(t.map(({animation:e,options:n})=>eG(i,e,n)))}function r3(i){let t=o3(i),e=xD(),n=!0;const s=h=>(f,p)=>{var v;const y=nh(i,p,h==="exit"?(v=i.presenceContext)==null?void 0:v.custom:void 0);if(y){const{transition:E,transitionEnd:b,..._}=y;f={...f,..._,...b}}return f};function r(h){t=h(i)}function a(h){const{props:f}=i,p=zL(i.parent)||{},y=[],v=new Set;let E={},b=1/0;for(let w=0;w<s3;w++){const x=i3[w],N=e[x],I=f[x]!==void 0?f[x]:p[x],L=Em(I),U=x===h?N.isActive:null;U===!1&&(b=w);let k=I===p[x]&&I!==f[x]&&L;if(k&&n&&i.manuallyAnimateOnMount&&(k=!1),N.protectedKeys={...E},!N.isActive&&U===null||!I&&!N.prevProp||eT(I)||typeof I=="boolean")continue;if(x==="exit"&&N.isActive&&U!==!0){N.prevResolvedValues&&(E={...E,...N.prevResolvedValues});continue}const B=a3(N.prevProp,I);let z=B||x===h&&N.isActive&&!k&&L||w>b&&L,H=!1;const j=Array.isArray(I)?I:[I];let et=j.reduce(s(x),{});U===!1&&(et={});const{prevResolvedValues:at={}}=N,ft={...at,...et},lt=$=>{z=!0,v.has($)&&(H=!0,v.delete($)),N.needsAnimating[$]=!0;const it=i.getValue($);it&&(it.liveStyle=!1)};for(const $ in ft){const it=et[$],bt=at[$];if(E.hasOwnProperty($))continue;let Et=!1;Pb(it)&&Pb(bt)?Et=!qL(it,bt):Et=it!==bt,Et?it!=null?lt($):v.add($):it!==void 0&&v.has($)?lt($):N.protectedKeys[$]=!0}N.prevProp=I,N.prevResolvedValues=et,N.isActive&&(E={...E,...et}),n&&i.blockInitialAnimation&&(z=!1);const vt=k&&B;z&&(!vt||H)&&y.push(...j.map($=>{const it={type:x};if(typeof $=="string"&&n&&!vt&&i.manuallyAnimateOnMount&&i.parent){const{parent:bt}=i,Et=nh(bt,$);if(bt.enteringChildren&&Et){const{delayChildren:O}=Et.transition||{};it.delay=hL(bt.enteringChildren,i,O)}}return{animation:$,options:it}}))}if(v.size){const w={};if(typeof f.initial!="boolean"){const x=nh(i,Array.isArray(f.initial)?f.initial[0]:f.initial);x&&x.transition&&(w.transition=x.transition)}v.forEach(x=>{const N=i.getBaseTarget(x),I=i.getValue(x);I&&(I.liveStyle=!0),w[x]=N??null}),y.push({animation:w})}let _=!!y.length;return n&&(f.initial===!1||f.initial===f.animate)&&!i.manuallyAnimateOnMount&&(_=!1),n=!1,_?t(y):Promise.resolve()}function u(h,f){var y;if(e[h].isActive===f)return Promise.resolve();(y=i.variantChildren)==null||y.forEach(v=>{var E;return(E=v.animationState)==null?void 0:E.setActive(h,f)}),e[h].isActive=f;const p=a(h);for(const v in e)e[v].protectedKeys={};return p}return{animateChanges:a,setActive:u,setAnimateFunction:r,getState:()=>e,reset:()=>{e=xD()}}}function a3(i,t){return typeof t=="string"?t!==i:Array.isArray(t)?!qL(t,i):!1}function vu(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function xD(){return{animate:vu(!0),whileInView:vu(),whileHover:vu(),whileTap:vu(),whileDrag:vu(),whileFocus:vu(),exit:vu()}}function MD(i,t){i.min=t.min,i.max=t.max}function eo(i,t){MD(i.x,t.x),MD(i.y,t.y)}function RD(i,t){i.translate=t.translate,i.scale=t.scale,i.originPoint=t.originPoint,i.origin=t.origin}const YL=1e-4,l3=1-YL,u3=1+YL,XL=.01,c3=0-XL,d3=0+XL;function fi(i){return i.max-i.min}function h3(i,t,e){return Math.abs(i-t)<=e}function DD(i,t,e,n=.5){i.origin=n,i.originPoint=He(t.min,t.max,i.origin),i.scale=fi(e)/fi(t),i.translate=He(e.min,e.max,i.origin)-i.originPoint,(i.scale>=l3&&i.scale<=u3||isNaN(i.scale))&&(i.scale=1),(i.translate>=c3&&i.translate<=d3||isNaN(i.translate))&&(i.translate=0)}function ym(i,t,e,n){DD(i.x,t.x,e.x,n?n.originX:void 0),DD(i.y,t.y,e.y,n?n.originY:void 0)}function ID(i,t,e){i.min=e.min+t.min,i.max=i.min+fi(t)}function f3(i,t,e){ID(i.x,t.x,e.x),ID(i.y,t.y,e.y)}function ND(i,t,e){i.min=t.min-e.min,i.max=i.min+fi(t)}function fA(i,t,e){ND(i.x,t.x,e.x),ND(i.y,t.y,e.y)}function PD(i,t,e,n,s){return i-=t,i=hA(i,1/e,n),s!==void 0&&(i=hA(i,1/s,n)),i}function p3(i,t=0,e=1,n=.5,s,r=i,a=i){if(nr.test(t)&&(t=parseFloat(t),t=He(a.min,a.max,t/100)-a.min),typeof t!="number")return;let u=He(r.min,r.max,n);i===r&&(u-=t),i.min=PD(i.min,t,e,u,s),i.max=PD(i.max,t,e,u,s)}function LD(i,t,[e,n,s],r,a){p3(i,t[e],t[n],t[s],t.scale,r,a)}const m3=["x","scaleX","originX"],g3=["y","scaleY","originY"];function kD(i,t,e,n){LD(i.x,t,m3,e?e.x:void 0,n?n.x:void 0),LD(i.y,t,g3,e?e.y:void 0,n?n.y:void 0)}function UD(i){return i.translate===0&&i.scale===1}function $L(i){return UD(i.x)&&UD(i.y)}function BD(i,t){return i.min===t.min&&i.max===t.max}function y3(i,t){return BD(i.x,t.x)&&BD(i.y,t.y)}function FD(i,t){return Math.round(i.min)===Math.round(t.min)&&Math.round(i.max)===Math.round(t.max)}function KL(i,t){return FD(i.x,t.x)&&FD(i.y,t.y)}function OD(i){return fi(i.x)/fi(i.y)}function VD(i,t){return i.translate===t.translate&&i.scale===t.scale&&i.originPoint===t.originPoint}function No(i){return[i("x"),i("y")]}function v3(i,t,e){let n="";const s=i.x.translate/t.x,r=i.y.translate/t.y,a=(e==null?void 0:e.z)||0;if((s||r||a)&&(n=`translate3d(${s}px, ${r}px, ${a}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:f,rotate:p,rotateX:y,rotateY:v,skewX:E,skewY:b}=e;f&&(n=`perspective(${f}px) ${n}`),p&&(n+=`rotate(${p}deg) `),y&&(n+=`rotateX(${y}deg) `),v&&(n+=`rotateY(${v}deg) `),E&&(n+=`skewX(${E}deg) `),b&&(n+=`skewY(${b}deg) `)}const u=i.x.scale*t.x,h=i.y.scale*t.y;return(u!==1||h!==1)&&(n+=`scale(${u}, ${h})`),n||"none"}const WL=["TopLeft","TopRight","BottomLeft","BottomRight"],A3=WL.length,HD=i=>typeof i=="string"?parseFloat(i):i,GD=i=>typeof i=="number"||At.test(i);function T3(i,t,e,n,s,r){s?(i.opacity=He(0,e.opacity??1,S3(n)),i.opacityExit=He(t.opacity??1,0,E3(n))):r&&(i.opacity=He(t.opacity??1,e.opacity??1,n));for(let a=0;a<A3;a++){const u=`border${WL[a]}Radius`;let h=zD(t,u),f=zD(e,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||GD(h)===GD(f)?(i[u]=Math.max(He(HD(h),HD(f),n),0),(nr.test(f)||nr.test(h))&&(i[u]+="%")):i[u]=f}(t.rotate||e.rotate)&&(i.rotate=He(t.rotate||0,e.rotate||0,n))}function zD(i,t){return i[t]!==void 0?i[t]:i.borderRadius}const S3=JL(0,.5,HP),E3=JL(.5,.95,Ks);function JL(i,t,e){return n=>n<i?0:n>t?1:e(Am(i,t,n))}function b3(i,t,e){const n=ni(i)?i:Pf(i);return n.start(tw("",n,t,e)),n.animation}function bm(i,t,e,n={passive:!0}){return i.addEventListener(t,e,n),()=>i.removeEventListener(t,e)}const C3=(i,t)=>i.depth-t.depth;class _3{constructor(){this.children=[],this.isDirty=!1}add(t){O_(this.children,t),this.isDirty=!0}remove(t){aA(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(C3),this.isDirty=!1,this.children.forEach(t)}}function w3(i,t){const e=hi.now(),n=({timestamp:s})=>{const r=s-e;r>=t&&(Kl(n),i(r-t))};return De.setup(n,!0),()=>Kl(n)}function E0(i){return ni(i)?i.get():i}class x3{constructor(){this.members=[]}add(t){O_(this.members,t);for(let e=this.members.length-1;e>=0;e--){const n=this.members[e];if(n===t||n===this.lead||n===this.prevLead)continue;const s=n.instance;s&&s.isConnected===!1&&n.isPresent!==!1&&!n.snapshot&&aA(this.members,n)}t.scheduleRender()}remove(t){if(aA(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(s=>t===s);if(e===0)return!1;let n;for(let s=e;s>=0;s--){const r=this.members[s],a=r.instance;if(r.isPresent!==!1&&(!a||a.isConnected!==!1)){n=r;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender();const s=n.options.layoutDependency,r=t.options.layoutDependency;if(!(s!==void 0&&r!==void 0&&s===r)){const h=n.instance;h&&h.isConnected===!1&&!n.snapshot||(t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0))}const{crossfade:u}=t.options;u===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const b0={hasAnimatedSinceResize:!0,hasEverUpdated:!1},WE=["","X","Y","Z"],M3=1e3;let R3=0;function JE(i,t,e,n){const{latestValues:s}=t;s[i]&&(e[i]=s[i],t.setStaticValue(i,0),n&&(n[i]=0))}function QL(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:t}=i.options;if(!t)return;const e=yL(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:s,layoutId:r}=i.options;window.MotionCancelOptimisedAnimation(e,"transform",De,!(s||r))}const{parent:n}=i;n&&!n.hasCheckedOptimisedAppear&&QL(n)}function ZL({attachResizeListener:i,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(a={},u=t==null?void 0:t()){this.id=R3++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(N3),this.nodes.forEach(U3),this.nodes.forEach(B3),this.nodes.forEach(P3)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new _3)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new H_),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const h=this.eventHandlers.get(a);h&&h.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=rw(a)&&!IG(a),this.instance=a;const{layoutId:u,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||u)&&(this.isLayoutDirty=!0),i){let p,y=0;const v=()=>this.root.updateBlockedByResize=!1;De.read(()=>{y=window.innerWidth}),i(a,()=>{const E=window.innerWidth;E!==y&&(y=E,this.root.updateBlockedByResize=!0,p&&p(),p=w3(v,250),b0.hasAnimatedSinceResize&&(b0.hasAnimatedSinceResize=!1,this.nodes.forEach(XD)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||h)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:y,hasRelativeLayoutChanged:v,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||f.getDefaultTransition()||G3,{onLayoutAnimationStart:_,onLayoutAnimationComplete:w}=f.getProps(),x=!this.targetLayout||!KL(this.targetLayout,E),N=!y&&v;if(this.options.layoutRoot||this.resumeFrom||N||y&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const I={...j_(b,"layout"),onPlay:_,onComplete:w};(f.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I),this.setAnimationOrigin(p,N)}else y||XD(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Kl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(F3),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&QL(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const y=this.path[p];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(qD);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(YD);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(k3),this.nodes.forEach(D3),this.nodes.forEach(I3)):this.nodes.forEach(YD),this.clearAllSnapshots();const u=hi.now();zn.delta=ir(0,1e3/60,u-zn.timestamp),zn.timestamp=u,zn.isProcessing=!0,HE.update.process(zn),HE.preRender.process(zn),HE.render.process(zn),zn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,sw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(L3),this.sharedNodes.forEach(O3)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,De.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){De.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!fi(this.snapshot.measuredBox.x)&&!fi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=vn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&this.instance){const h=n(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:h,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!$L(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;a&&this.instance&&(u||Au(this.latestValues)||p)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return a&&(h=this.removeTransform(h)),z3(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:a}=this.options;if(!a)return vn();const u=a.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(q3))){const{scroll:p}=this.root;p&&(Xd(u.x,p.offset.x),Xd(u.y,p.offset.y))}return u}removeElementScroll(a){var h;const u=vn();if(eo(u,a),(h=this.scroll)!=null&&h.wasRoot)return u;for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:y,options:v}=p;p!==this.root&&y&&v.layoutScroll&&(y.wasRoot&&eo(u,a),Xd(u.x,y.offset.x),Xd(u.y,y.offset.y))}return u}applyTransform(a,u=!1){const h=vn();eo(h,a);for(let f=0;f<this.path.length;f++){const p=this.path[f];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&$d(h,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Au(p.latestValues)&&$d(h,p.latestValues)}return Au(this.latestValues)&&$d(h,this.latestValues),h}removeTransform(a){const u=vn();eo(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!Au(f.latestValues))continue;Vb(f.latestValues)&&f.updateSnapshot();const p=vn(),y=f.measurePageBox();eo(p,y),kD(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return Au(this.latestValues)&&kD(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==zn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var E;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(a||h&&this.isSharedProjectionDirty||this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:y}=this.options;if(!this.layout||!(p||y))return;this.resolvedRelativeTargetAt=zn.timestamp;const v=this.getClosestProjectingParent();v&&this.linkedParentVersion!==v.layoutVersion&&!v.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(v&&v.layout?this.createRelativeTarget(v,this.layout.layoutBox,v.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=vn(),this.targetWithTransforms=vn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),f3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):eo(this.target,this.layout.layoutBox),kL(this.target,this.targetDelta)):eo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?this.createRelativeTarget(v,this.target,v.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Vb(this.parent.latestValues)||LL(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,u,h){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=vn(),this.relativeTargetOrigin=vn(),fA(this.relativeTargetOrigin,u,h),eo(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var b;const a=this.getLead(),u=!!this.resumingFrom||this!==a;let h=!0;if((this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===zn.timestamp&&(h=!1),h)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;eo(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,v=this.treeScale.y;GG(this.layoutCorrected,this.treeScale,this.path,u),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=vn());const{target:E}=a;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(RD(this.prevProjectionDelta.x,this.projectionDelta.x),RD(this.prevProjectionDelta.y,this.projectionDelta.y)),ym(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==v||!VD(this.projectionDelta.x,this.prevProjectionDelta.x)||!VD(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),a){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Yd(),this.projectionDelta=Yd(),this.projectionDeltaWithTransform=Yd()}setAnimationOrigin(a,u=!1){const h=this.snapshot,f=h?h.latestValues:{},p={...this.latestValues},y=Yd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=vn(),E=h?h.source:void 0,b=this.layout?this.layout.source:void 0,_=E!==b,w=this.getStack(),x=!w||w.members.length<=1,N=!!(_&&!x&&this.options.crossfade===!0&&!this.path.some(H3));this.animationProgress=0;let I;this.mixTargetDelta=L=>{const U=L/1e3;$D(y.x,a.x,U),$D(y.y,a.y,U),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(fA(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),V3(this.relativeTarget,this.relativeTargetOrigin,v,U),I&&y3(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=vn()),eo(I,this.relativeTarget)),_&&(this.animationValues=p,T3(p,f,this.latestValues,U,N,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=U},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var u,h,f;this.notifyListeners("animationStart"),(u=this.currentAnimation)==null||u.stop(),(f=(h=this.resumingFrom)==null?void 0:h.currentAnimation)==null||f.stop(),this.pendingAnimation&&(Kl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=De.update(()=>{b0.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Pf(0)),this.motionValue.jump(0,!1),this.currentAnimation=b3(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),a.onUpdate&&a.onUpdate(p)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(M3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:p}=a;if(!(!u||!h||!f)){if(this!==a&&this.layout&&f&&jL(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||vn();const y=fi(this.layout.layoutBox.x);h.x.min=a.target.x.min,h.x.max=h.x.min+y;const v=fi(this.layout.layoutBox.y);h.y.min=a.target.y.min,h.y.max=h.y.min+v}eo(u,h),$d(u,p),ym(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new x3),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var u;const{layoutId:a}=this.options;return a?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:a}=this.options;return a?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:h}=a;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(u=!0),!u)return;const f={};h.z&&JE("z",a,f,this.animationValues);for(let p=0;p<WE.length;p++)JE(`rotate${WE[p]}`,a,f,this.animationValues),JE(`skew${WE[p]}`,a,f,this.animationValues);a.render();for(const p in f)a.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);a.scheduleRender()}applyProjectionStyles(a,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=E0(u==null?void 0:u.pointerEvents)||"",a.transform=h?h(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=E0(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!Au(this.latestValues)&&(a.transform=h?h({},""):"none",this.hasProjected=!1);return}a.visibility="";const p=f.animationValues||f.latestValues;this.applyTransformsToTarget();let y=v3(this.projectionDeltaWithTransform,this.treeScale,p);h&&(y=h(p,y)),a.transform=y;const{x:v,y:E}=this.projectionDelta;a.transformOrigin=`${v.origin*100}% ${E.origin*100}% 0`,f.animationValues?a.opacity=f===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:a.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const b in Gb){if(p[b]===void 0)continue;const{correct:_,applyTo:w,isCSSVariable:x}=Gb[b],N=y==="none"?p[b]:_(p[b],f);if(w){const I=w.length;for(let L=0;L<I;L++)a[w[L]]=N}else x?this.options.visualElement.renderState.vars[b]=N:a[b]=N}this.options.layoutId&&(a.pointerEvents=f===this?E0(u==null?void 0:u.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(qD),this.root.sharedNodes.clear()}}}function D3(i){i.updateLayout()}function I3(i){var e;const t=((e=i.resumeFrom)==null?void 0:e.snapshot)||i.snapshot;if(i.isLead()&&i.layout&&t&&i.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=i.layout,{animationType:r}=i.options,a=t.source!==i.layout.source;r==="size"?No(y=>{const v=a?t.measuredBox[y]:t.layoutBox[y],E=fi(v);v.min=n[y].min,v.max=v.min+E}):jL(r,t.layoutBox,n)&&No(y=>{const v=a?t.measuredBox[y]:t.layoutBox[y],E=fi(n[y]);v.max=v.min+E,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[y].max=i.relativeTarget[y].min+E)});const u=Yd();ym(u,n,t.layoutBox);const h=Yd();a?ym(h,i.applyTransform(s,!0),t.measuredBox):ym(h,n,t.layoutBox);const f=!$L(u);let p=!1;if(!i.resumeFrom){const y=i.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:v,layout:E}=y;if(v&&E){const b=vn();fA(b,t.layoutBox,v.layoutBox);const _=vn();fA(_,n,E.layoutBox),KL(b,_)||(p=!0),y.options.layoutRoot&&(i.relativeTarget=_,i.relativeTargetOrigin=b,i.relativeParent=y)}}}i.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:p})}else if(i.isLead()){const{onExitComplete:n}=i.options;n&&n()}i.options.transition=void 0}function N3(i){i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function P3(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function L3(i){i.clearSnapshot()}function qD(i){i.clearMeasurements()}function YD(i){i.isLayoutDirty=!1}function k3(i){const{visualElement:t}=i.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),i.resetTransform()}function XD(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function U3(i){i.resolveTargetDelta()}function B3(i){i.calcProjection()}function F3(i){i.resetSkewAndRotation()}function O3(i){i.removeLeadSnapshot()}function $D(i,t,e){i.translate=He(t.translate,0,e),i.scale=He(t.scale,1,e),i.origin=t.origin,i.originPoint=t.originPoint}function KD(i,t,e,n){i.min=He(t.min,e.min,n),i.max=He(t.max,e.max,n)}function V3(i,t,e,n){KD(i.x,t.x,e.x,n),KD(i.y,t.y,e.y,n)}function H3(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const G3={duration:.45,ease:[.4,0,.1,1]},WD=i=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),JD=WD("applewebkit/")&&!WD("chrome/")?Math.round:Ks;function QD(i){i.min=JD(i.min),i.max=JD(i.max)}function z3(i){QD(i.x),QD(i.y)}function jL(i,t,e){return i==="position"||i==="preserve-aspect"&&!h3(OD(t),OD(e),.2)}function q3(i){var t;return i!==i.root&&((t=i.scroll)==null?void 0:t.wasRoot)}const Y3=ZL({attachResizeListener:(i,t)=>bm(i,"resize",t),measureScroll:()=>{var i,t;return{x:document.documentElement.scrollLeft||((i=document.body)==null?void 0:i.scrollLeft)||0,y:document.documentElement.scrollTop||((t=document.body)==null?void 0:t.scrollTop)||0}},checkIsScrollRoot:()=>!0}),QE={current:void 0},tk=ZL({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!QE.current){const i=new Y3({});i.mount(window),i.setOptions({layoutScroll:!0}),QE.current=i}return QE.current},resetTransform:(i,t)=>{i.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),dw=rt.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"});function ZD(i,t){if(typeof i=="function")return i(t);i!=null&&(i.current=t)}function X3(...i){return t=>{let e=!1;const n=i.map(s=>{const r=ZD(s,t);return!e&&typeof r=="function"&&(e=!0),r});if(e)return()=>{for(let s=0;s<n.length;s++){const r=n[s];typeof r=="function"?r():ZD(i[s],null)}}}}function $3(...i){return rt.useCallback(X3(...i),i)}class K3 extends rt.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const n=e.offsetParent,s=Fb(n)&&n.offsetWidth||0,r=Fb(n)&&n.offsetHeight||0,a=this.props.sizeRef.current;a.height=e.offsetHeight||0,a.width=e.offsetWidth||0,a.top=e.offsetTop,a.left=e.offsetLeft,a.right=s-a.width-a.left,a.bottom=r-a.height-a.top}return null}componentDidUpdate(){}render(){return this.props.children}}function W3({children:i,isPresent:t,anchorX:e,anchorY:n,root:s,pop:r}){var v;const a=rt.useId(),u=rt.useRef(null),h=rt.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:f}=rt.useContext(dw),p=((v=i.props)==null?void 0:v.ref)??(i==null?void 0:i.ref),y=$3(u,p);return rt.useInsertionEffect(()=>{const{width:E,height:b,top:_,left:w,right:x,bottom:N}=h.current;if(t||r===!1||!u.current||!E||!b)return;const I=e==="left"?`left: ${w}`:`right: ${x}`,L=n==="bottom"?`bottom: ${N}`:`top: ${_}`;u.current.dataset.motionPopId=a;const U=document.createElement("style");f&&(U.nonce=f);const k=s??document.head;return k.appendChild(U),U.sheet&&U.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${E}px !important;
            height: ${b}px !important;
            ${I}px !important;
            ${L}px !important;
          }
        `),()=>{k.contains(U)&&k.removeChild(U)}},[t]),W.jsx(K3,{isPresent:t,childRef:u,sizeRef:h,pop:r,children:r===!1?i:rt.cloneElement(i,{ref:y})})}const J3=({children:i,initial:t,isPresent:e,onExitComplete:n,custom:s,presenceAffectsLayout:r,mode:a,anchorX:u,anchorY:h,root:f})=>{const p=F_(Q3),y=rt.useId();let v=!0,E=rt.useMemo(()=>(v=!1,{id:y,initial:t,isPresent:e,custom:s,onExitComplete:b=>{p.set(b,!0);for(const _ of p.values())if(!_)return;n&&n()},register:b=>(p.set(b,!1),()=>p.delete(b))}),[e,p,n]);return r&&v&&(E={...E}),rt.useMemo(()=>{p.forEach((b,_)=>p.set(_,!1))},[e]),rt.useEffect(()=>{!e&&!p.size&&n&&n()},[e]),i=W.jsx(W3,{pop:a==="popLayout",isPresent:e,anchorX:u,anchorY:h,root:f,children:i}),W.jsx(tT.Provider,{value:E,children:i})};function Q3(){return new Map}function ek(i=!0){const t=rt.useContext(tT);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:s}=t,r=rt.useId();rt.useEffect(()=>{if(i)return s(r)},[i]);const a=rt.useCallback(()=>i&&n&&n(r),[r,n,i]);return!e&&n?[!1,a]:[!0]}const n0=i=>i.key||"";function jD(i){const t=[];return rt.Children.forEach(i,e=>{rt.isValidElement(e)&&t.push(e)}),t}const ZE=({children:i,custom:t,initial:e=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:r="sync",propagate:a=!1,anchorX:u="left",anchorY:h="top",root:f})=>{const[p,y]=ek(a),v=rt.useMemo(()=>jD(i),[i]),E=a&&!p?[]:v.map(n0),b=rt.useRef(!0),_=rt.useRef(v),w=F_(()=>new Map),x=rt.useRef(new Set),[N,I]=rt.useState(v),[L,U]=rt.useState(v);RP(()=>{b.current=!1,_.current=v;for(let z=0;z<L.length;z++){const H=n0(L[z]);E.includes(H)?(w.delete(H),x.current.delete(H)):w.get(H)!==!0&&w.set(H,!1)}},[L,E.length,E.join("-")]);const k=[];if(v!==N){let z=[...v];for(let H=0;H<L.length;H++){const j=L[H],et=n0(j);E.includes(et)||(z.splice(H,0,j),k.push(j))}return r==="wait"&&k.length&&(z=k),U(jD(z)),I(v),null}const{forceRender:B}=rt.useContext(B_);return W.jsx(W.Fragment,{children:L.map(z=>{const H=n0(z),j=a&&!p?!1:v===L||E.includes(H),et=()=>{if(x.current.has(H))return;if(x.current.add(H),w.has(H))w.set(H,!0);else return;let at=!0;w.forEach(ft=>{ft||(at=!1)}),at&&(B==null||B(),U(_.current),a&&(y==null||y()),n&&n())};return W.jsx(J3,{isPresent:j,initial:!b.current||e?void 0:!1,custom:t,presenceAffectsLayout:s,mode:r,root:f,onExitComplete:j?void 0:et,anchorX:u,anchorY:h,children:z},H)})})},nk=rt.createContext({strict:!1}),tI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let eI=!1;function Z3(){if(eI)return;const i={};for(const t in tI)i[t]={isEnabled:e=>tI[t].some(n=>!!e[n])};IL(i),eI=!0}function ik(){return Z3(),FG()}function j3(i){const t=ik();for(const e in i)t[e]={...t[e],...i[e]};IL(t)}const tz=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function pA(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||tz.has(i)}let sk=i=>!pA(i);function ez(i){typeof i=="function"&&(sk=t=>t.startsWith("on")?!pA(t):i(t))}try{ez(require("@emotion/is-prop-valid").default)}catch{}function nz(i,t,e){const n={};for(const s in i)s==="values"&&typeof i.values=="object"||(sk(s)||e===!0&&pA(s)||!t&&!pA(s)||i.draggable&&s.startsWith("onDrag"))&&(n[s]=i[s]);return n}const iT=rt.createContext({});function iz(i,t){if(nT(i)){const{initial:e,animate:n}=i;return{initial:e===!1||Em(e)?e:void 0,animate:Em(n)?n:void 0}}return i.inherit!==!1?t:{}}function sz(i){const{initial:t,animate:e}=iz(i,rt.useContext(iT));return rt.useMemo(()=>({initial:t,animate:e}),[nI(t),nI(e)])}function nI(i){return Array.isArray(i)?i.join(" "):i}const hw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ok(i,t,e){for(const n in t)!ni(t[n])&&!FL(n,e)&&(i[n]=t[n])}function oz({transformTemplate:i},t){return rt.useMemo(()=>{const e=hw();return uw(e,t,i),Object.assign({},e.vars,e.style)},[t])}function rz(i,t){const e=i.style||{},n={};return ok(n,e,i),Object.assign(n,oz(i,t)),n}function az(i,t){const e={},n=rz(i,t);return i.drag&&i.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(e.tabIndex=0),e.style=n,e}const rk=()=>({...hw(),attrs:{}});function lz(i,t,e,n){const s=rt.useMemo(()=>{const r=rk();return OL(r,t,HL(n),i.transformTemplate,i.style),{...r.attrs,style:{...r.style}}},[t]);if(i.style){const r={};ok(r,i.style,i),s.style={...r,...s.style}}return s}const uz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function fw(i){return typeof i!="string"||i.includes("-")?!1:!!(uz.indexOf(i)>-1||/[A-Z]/u.test(i))}function cz(i,t,e,{latestValues:n},s,r=!1,a){const h=(a??fw(i)?lz:az)(t,n,s,i),f=nz(t,typeof i=="string",r),p=i!==rt.Fragment?{...f,...h,ref:e}:{},{children:y}=t,v=rt.useMemo(()=>ni(y)?y.get():y,[y]);return rt.createElement(i,{...p,children:v})}function dz({scrapeMotionValuesFromProps:i,createRenderState:t},e,n,s){return{latestValues:hz(e,n,s,i),renderState:t()}}function hz(i,t,e,n){const s={},r=n(i,{});for(const v in r)s[v]=E0(r[v]);let{initial:a,animate:u}=i;const h=nT(i),f=RL(i);t&&f&&!h&&i.inherit!==!1&&(a===void 0&&(a=t.initial),u===void 0&&(u=t.animate));let p=e?e.initial===!1:!1;p=p||a===!1;const y=p?u:a;if(y&&typeof y!="boolean"&&!eT(y)){const v=Array.isArray(y)?y:[y];for(let E=0;E<v.length;E++){const b=ew(i,v[E]);if(b){const{transitionEnd:_,transition:w,...x}=b;for(const N in x){let I=x[N];if(Array.isArray(I)){const L=p?I.length-1:0;I=I[L]}I!==null&&(s[N]=I)}for(const N in _)s[N]=_[N]}}}return s}const ak=i=>(t,e)=>{const n=rt.useContext(iT),s=rt.useContext(tT),r=()=>dz(i,t,n,s);return e?r():F_(r)},fz=ak({scrapeMotionValuesFromProps:cw,createRenderState:hw}),pz=ak({scrapeMotionValuesFromProps:GL,createRenderState:rk}),mz=Symbol.for("motionComponentSymbol");function gz(i,t,e){const n=rt.useRef(e);rt.useInsertionEffect(()=>{n.current=e});const s=rt.useRef(null);return rt.useCallback(r=>{var u;r&&((u=i.onMount)==null||u.call(i,r)),t&&(r?t.mount(r):t.unmount());const a=n.current;if(typeof a=="function")if(r){const h=a(r);typeof h=="function"&&(s.current=h)}else s.current?(s.current(),s.current=null):a(r);else a&&(a.current=r)},[t])}const lk=rt.createContext({});function Pd(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function yz(i,t,e,n,s,r){var I,L;const{visualElement:a}=rt.useContext(iT),u=rt.useContext(nk),h=rt.useContext(tT),f=rt.useContext(dw),p=f.reducedMotion,y=f.skipAnimations,v=rt.useRef(null),E=rt.useRef(!1);n=n||u.renderer,!v.current&&n&&(v.current=n(i,{visualState:t,parent:a,props:e,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:p,skipAnimations:y,isSVG:r}),E.current&&v.current&&(v.current.manuallyAnimateOnMount=!0));const b=v.current,_=rt.useContext(lk);b&&!b.projection&&s&&(b.type==="html"||b.type==="svg")&&vz(v.current,e,s,_);const w=rt.useRef(!1);rt.useInsertionEffect(()=>{b&&w.current&&b.update(e,h)});const x=e[gL],N=rt.useRef(!!x&&!((I=window.MotionHandoffIsComplete)!=null&&I.call(window,x))&&((L=window.MotionHasOptimisedAnimation)==null?void 0:L.call(window,x)));return RP(()=>{E.current=!0,b&&(w.current=!0,window.MotionIsMounted=!0,b.updateFeatures(),b.scheduleRenderMicrotask(),N.current&&b.animationState&&b.animationState.animateChanges())}),rt.useEffect(()=>{b&&(!N.current&&b.animationState&&b.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{var U;(U=window.MotionHandoffMarkAsComplete)==null||U.call(window,x)}),N.current=!1),b.enteringChildren=void 0)}),b}function vz(i,t,e,n){const{layoutId:s,layout:r,drag:a,dragConstraints:u,layoutScroll:h,layoutRoot:f,layoutCrossfade:p}=t;i.projection=new e(i.latestValues,t["data-framer-portal-id"]?void 0:uk(i.parent)),i.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!a||u&&Pd(u),visualElement:i,animationType:typeof r=="string"?r:"both",initialPromotionConfig:n,crossfade:p,layoutScroll:h,layoutRoot:f})}function uk(i){if(i)return i.options.allowProjection!==!1?i.projection:uk(i.parent)}function jE(i,{forwardMotionProps:t=!1,type:e}={},n,s){n&&j3(n);const r=e?e==="svg":fw(i),a=r?pz:fz;function u(f,p){let y;const v={...rt.useContext(dw),...f,layoutId:Az(f)},{isStatic:E}=v,b=sz(f),_=a(f,E);if(!E&&MP){Tz();const w=Sz(v);y=w.MeasureLayout,b.visualElement=yz(i,_,v,s,w.ProjectionNode,r)}return W.jsxs(iT.Provider,{value:b,children:[y&&b.visualElement?W.jsx(y,{visualElement:b.visualElement,...v}):null,cz(i,f,gz(_,b.visualElement,p),_,E,t,r)]})}u.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const h=rt.forwardRef(u);return h[mz]=i,h}function Az({layoutId:i}){const t=rt.useContext(B_).id;return t&&i!==void 0?t+"-"+i:i}function Tz(i,t){rt.useContext(nk).strict}function Sz(i){const t=ik(),{drag:e,layout:n}=t;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(i)||n!=null&&n.isEnabled(i)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function Ez(i,t){if(typeof Proxy>"u")return jE;const e=new Map,n=(r,a)=>jE(r,a,i,t),s=(r,a)=>n(r,a);return new Proxy(s,{get:(r,a)=>a==="create"?n:(e.has(a)||e.set(a,jE(a,void 0,i,t)),e.get(a))})}const bz=(i,t)=>t.isSVG??fw(i)?new e3(t):new WG(t,{allowProjection:i!==rt.Fragment});class Cz extends Zl{constructor(t){super(t),t.animationState||(t.animationState=r3(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();eT(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let _z=0;class wz extends Zl{constructor(){super(...arguments),this.id=_z++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);e&&!t&&s.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const xz={animation:{Feature:Cz},exit:{Feature:wz}};function My(i){return{point:{x:i.pageX,y:i.pageY}}}const Mz=i=>t=>ow(t)&&i(t,My(t));function vm(i,t,e,n){return bm(i,t,Mz(e),n)}const ck=({current:i})=>i?i.ownerDocument.defaultView:null,iI=(i,t)=>Math.abs(i-t);function Rz(i,t){const e=iI(i.x,t.x),n=iI(i.y,t.y);return Math.sqrt(e**2+n**2)}const sI=new Set(["auto","scroll"]);class dk{constructor(t,e,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:r=!1,distanceThreshold:a=3,element:u}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=E=>{this.handleScroll(E.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=eb(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,_=Rz(E.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!_)return;const{point:w}=E,{timestamp:x}=zn;this.history.push({...w,timestamp:x});const{onStart:N,onMove:I}=this.handlers;b||(N&&N(this.lastMoveEvent,E),this.startEvent=this.lastMoveEvent),I&&I(this.lastMoveEvent,E)},this.handlePointerMove=(E,b)=>{this.lastMoveEvent=E,this.lastMoveEventInfo=tb(b,this.transformPagePoint),De.update(this.updatePoint,!0)},this.handlePointerUp=(E,b)=>{this.end();const{onEnd:_,onSessionEnd:w,resumeAnimation:x}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=eb(E.type==="pointercancel"?this.lastMoveEventInfo:tb(b,this.transformPagePoint),this.history);this.startEvent&&_&&_(E,N),w&&w(E,N)},!ow(t))return;this.dragSnapToOrigin=r,this.handlers=e,this.transformPagePoint=n,this.distanceThreshold=a,this.contextWindow=s||window;const h=My(t),f=tb(h,this.transformPagePoint),{point:p}=f,{timestamp:y}=zn;this.history=[{...p,timestamp:y}];const{onSessionStart:v}=e;v&&v(t,eb(f,this.history)),this.removeListeners=_y(vm(this.contextWindow,"pointermove",this.handlePointerMove),vm(this.contextWindow,"pointerup",this.handlePointerUp),vm(this.contextWindow,"pointercancel",this.handlePointerUp)),u&&this.startScrollTracking(u)}startScrollTracking(t){let e=t.parentElement;for(;e;){const n=getComputedStyle(e);(sI.has(n.overflowX)||sI.has(n.overflowY))&&this.scrollPositions.set(e,{x:e.scrollLeft,y:e.scrollTop}),e=e.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0}),window.addEventListener("scroll",this.onWindowScroll),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const e=this.scrollPositions.get(t);if(!e)return;const n=t===window,s=n?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},r={x:s.x-e.x,y:s.y-e.y};r.x===0&&r.y===0||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=r.x,this.lastMoveEventInfo.point.y+=r.y):this.history.length>0&&(this.history[0].x-=r.x,this.history[0].y-=r.y),this.scrollPositions.set(t,s),De.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Kl(this.updatePoint)}}function tb(i,t){return t?{point:t(i.point)}:i}function oI(i,t){return{x:i.x-t.x,y:i.y-t.y}}function eb({point:i},t){return{point:i,delta:oI(i,hk(t)),offset:oI(i,Dz(t)),velocity:Iz(t,.1)}}function Dz(i){return i[0]}function hk(i){return i[i.length-1]}function Iz(i,t){if(i.length<2)return{x:0,y:0};let e=i.length-1,n=null;const s=hk(i);for(;e>=0&&(n=i[e],!(s.timestamp-n.timestamp>Ao(t)));)e--;if(!n)return{x:0,y:0};n===i[0]&&i.length>2&&s.timestamp-n.timestamp>Ao(t)*2&&(n=i[1]);const r=$s(s.timestamp-n.timestamp);if(r===0)return{x:0,y:0};const a={x:(s.x-n.x)/r,y:(s.y-n.y)/r};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Nz(i,{min:t,max:e},n){return t!==void 0&&i<t?i=n?He(t,i,n.min):Math.max(i,t):e!==void 0&&i>e&&(i=n?He(e,i,n.max):Math.min(i,e)),i}function rI(i,t,e){return{min:t!==void 0?i.min+t:void 0,max:e!==void 0?i.max+e-(i.max-i.min):void 0}}function Pz(i,{top:t,left:e,bottom:n,right:s}){return{x:rI(i.x,e,s),y:rI(i.y,t,n)}}function aI(i,t){let e=t.min-i.min,n=t.max-i.max;return t.max-t.min<i.max-i.min&&([e,n]=[n,e]),{min:e,max:n}}function Lz(i,t){return{x:aI(i.x,t.x),y:aI(i.y,t.y)}}function kz(i,t){let e=.5;const n=fi(i),s=fi(t);return s>n?e=Am(t.min,t.max-n,i.min):n>s&&(e=Am(i.min,i.max-s,t.min)),ir(0,1,e)}function Uz(i,t){const e={};return t.min!==void 0&&(e.min=t.min-i.min),t.max!==void 0&&(e.max=t.max-i.min),e}const zb=.35;function Bz(i=zb){return i===!1?i=0:i===!0&&(i=zb),{x:lI(i,"left","right"),y:lI(i,"top","bottom")}}function lI(i,t,e){return{min:uI(i,t),max:uI(i,e)}}function uI(i,t){return typeof i=="number"?i:i[t]||0}const Fz=new WeakMap;class Oz{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=vn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=y=>{e&&this.snapToCursor(My(y).point),this.stopAnimation()},a=(y,v)=>{const{drag:E,dragPropagation:b,onDragStart:_}=this.getProps();if(E&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=pG(E),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),No(x=>{let N=this.getAxisMotionValue(x).get()||0;if(nr.test(N)){const{projection:I}=this.visualElement;if(I&&I.layout){const L=I.layout.layoutBox[x];L&&(N=fi(L)*(parseFloat(N)/100))}}this.originPoint[x]=N}),_&&De.update(()=>_(y,v),!1,!0),Lb(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},u=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v;const{dragPropagation:E,dragDirectionLock:b,onDirectionLock:_,onDrag:w}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:x}=v;if(b&&this.currentDirection===null){this.currentDirection=Hz(x),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",v.point,x),this.updateAxis("y",v.point,x),this.visualElement.render(),w&&De.update(()=>w(y,v),!1,!0)},h=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v,this.stop(y,v),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>{const{dragSnapToOrigin:y}=this.getProps();(y||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:p}=this.getProps();this.panSession=new dk(t,{onSessionStart:r,onStart:a,onMove:u,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:n,contextWindow:ck(this.visualElement),element:this.visualElement.current})}stop(t,e){const n=t||this.latestPointerEvent,s=e||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!s||!n)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:u}=this.getProps();u&&De.postRender(()=>u(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,e,n){const{drag:s}=this.getProps();if(!n||!i0(t,s,this.currentDirection))return;const r=this.getAxisMotionValue(t);let a=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(a=Nz(a,this.constraints[t],this.elastic[t])),r.set(a)}resolveConstraints(){var r;const{dragConstraints:t,dragElastic:e}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,s=this.constraints;t&&Pd(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=Pz(n.layoutBox,t):this.constraints=!1,this.elastic=Bz(e),s!==this.constraints&&!Pd(t)&&n&&this.constraints&&!this.hasMutatedConstraints&&No(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Uz(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Pd(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=zG(n,s.root,this.visualElement.getTransformPagePoint());let a=Lz(s.layout.layoutBox,r);if(e){const u=e(VG(a));this.hasMutatedConstraints=!!u,u&&(a=PL(u))}return a}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:s,dragTransition:r,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=No(p=>{if(!i0(p,e,this.currentDirection))return;let y=h&&h[p]||{};a&&(y={min:0,max:0});const v=s?200:1e6,E=s?40:1e7,b={type:"inertia",velocity:n?t[p]:0,bounceStiffness:v,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...r,...y};return this.startAxisValueAnimation(p,b)});return Promise.all(f).then(u)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return Lb(this.visualElement,t),n.start(tw(t,n,0,e,this.visualElement,!1))}stopAnimation(){No(t=>this.getAxisMotionValue(t).stop())}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[e];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){No(e=>{const{drag:n}=this.getProps();if(!i0(e,n,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(e);if(s&&s.layout){const{min:a,max:u}=s.layout.layoutBox[e],h=r.get()||0;r.set(t[e]-He(a,u,.5)+h)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!Pd(e)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};No(a=>{const u=this.getAxisMotionValue(a);if(u&&this.constraints!==!1){const h=u.get();s[a]=kz({min:h,max:h},this.constraints[a])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.constraints=!1,this.resolveConstraints(),No(a=>{if(!i0(a,t,null))return;const u=this.getAxisMotionValue(a),{min:h,max:f}=this.constraints[a];u.set(He(h,f,s[a]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;Fz.set(this.visualElement,this);const t=this.visualElement.current,e=vm(t,"pointerdown",f=>{const{drag:p,dragListener:y=!0}=this.getProps(),v=f.target,E=v!==t&&TG(v);p&&y&&!E&&this.start(f)});let n;const s=()=>{const{dragConstraints:f}=this.getProps();Pd(f)&&f.current&&(this.constraints=this.resolveRefConstraints(),n||(n=Vz(t,f.current,()=>this.scalePositionWithinConstraints())))},{projection:r}=this.visualElement,a=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),De.read(s);const u=bm(window,"resize",()=>this.scalePositionWithinConstraints()),h=r.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:p})=>{this.isDragging&&p&&(No(y=>{const v=this.getAxisMotionValue(y);v&&(this.originPoint[y]+=f[y].translate,v.set(v.get()+f[y].translate))}),this.visualElement.render())}));return()=>{u(),e(),a(),h&&h(),n&&n()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:a=zb,dragMomentum:u=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:s,dragConstraints:r,dragElastic:a,dragMomentum:u}}}function cI(i){let t=!0;return()=>{if(t){t=!1;return}i()}}function Vz(i,t,e){const n=yD(i,cI(e)),s=yD(t,cI(e));return()=>{n(),s()}}function i0(i,t,e){return(t===!0||t===i)&&(e===null||e===i)}function Hz(i,t=10){let e=null;return Math.abs(i.y)>t?e="y":Math.abs(i.x)>t&&(e="x"),e}class Gz extends Zl{constructor(t){super(t),this.removeGroupControls=Ks,this.removeListeners=Ks,this.controls=new Oz(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ks}update(){const{dragControls:t}=this.node.getProps(),{dragControls:e}=this.node.prevProps||{};t!==e&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const nb=i=>(t,e)=>{i&&De.update(()=>i(t,e),!1,!0)};class zz extends Zl{constructor(){super(...arguments),this.removePointerDownListener=Ks}onPointerDown(t){this.session=new dk(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ck(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:nb(t),onStart:nb(e),onMove:nb(n),onEnd:(r,a)=>{delete this.session,s&&De.postRender(()=>s(r,a))}}}mount(){this.removePointerDownListener=vm(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let ib=!1;class qz extends rt.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:s}=this.props,{projection:r}=t;r&&(e.group&&e.group.add(r),n&&n.register&&s&&n.register(r),ib&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),b0.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:s,isPresent:r}=this.props,{projection:a}=n;return a&&(a.isPresent=r,t.layoutDependency!==e&&a.setOptions({...a.options,layoutDependency:e}),ib=!0,s||t.layoutDependency!==e||e===void 0||t.isPresent!==r?a.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?a.promote():a.relegate()||De.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),sw.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:s}=t;ib=!0,s&&(s.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function fk(i){const[t,e]=ek(),n=rt.useContext(B_);return W.jsx(qz,{...i,layoutGroup:n,switchLayoutGroup:rt.useContext(lk),isPresent:t,safeToRemove:e})}const Yz={pan:{Feature:zz},drag:{Feature:Gz,ProjectionNode:tk,MeasureLayout:fk}};function dI(i,t,e){const{props:n}=i;i.animationState&&n.whileHover&&i.animationState.setActive("whileHover",e==="Start");const s="onHover"+e,r=n[s];r&&De.postRender(()=>r(t,My(t)))}class Xz extends Zl{mount(){const{current:t}=this.node;t&&(this.unmount=gG(t,(e,n)=>(dI(this.node,n,"Start"),s=>dI(this.node,s,"End"))))}unmount(){}}class $z extends Zl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=_y(bm(this.node.current,"focus",()=>this.onFocus()),bm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function hI(i,t,e){const{props:n}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&n.whileTap&&i.animationState.setActive("whileTap",e==="Start");const s="onTap"+(e==="End"?"":e),r=n[s];r&&De.postRender(()=>r(t,My(t)))}class Kz extends Zl{mount(){const{current:t}=this.node;if(!t)return;const{globalTapTarget:e,propagate:n}=this.node.props;this.unmount=EG(t,(s,r)=>(hI(this.node,r,"Start"),(a,{success:u})=>hI(this.node,a,u?"End":"Cancel")),{useGlobalTarget:e,stopPropagation:(n==null?void 0:n.tap)===!1})}unmount(){}}const qb=new WeakMap,sb=new WeakMap,Wz=i=>{const t=qb.get(i.target);t&&t(i)},Jz=i=>{i.forEach(Wz)};function Qz({root:i,...t}){const e=i||document;sb.has(e)||sb.set(e,{});const n=sb.get(e),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(Jz,{root:i,...t})),n[s]}function Zz(i,t,e){const n=Qz(t);return qb.set(i,e),n.observe(i),()=>{qb.delete(i),n.unobserve(i)}}const jz={some:0,all:1};class t4 extends Zl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:s="some",once:r}=t,a={root:e?e.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:jz[s]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,r&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:y}=this.node.getProps(),v=f?p:y;v&&v(h)};return Zz(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(e4(t,e))&&this.startObserver()}unmount(){}}function e4({viewport:i={}},{viewport:t={}}={}){return e=>i[e]!==t[e]}const n4={inView:{Feature:t4},tap:{Feature:Kz},focus:{Feature:$z},hover:{Feature:Xz}},i4={layout:{ProjectionNode:tk,MeasureLayout:fk}},s4={...xz,...n4,...Yz,...i4},Ka=Ez(s4,bz);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r4=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase()),fI=i=>{const t=r4(i);return t.charAt(0).toUpperCase()+t.slice(1)},pk=(...i)=>i.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim(),a4=i=>{for(const t in i)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var l4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=rt.forwardRef(({color:i="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:s="",children:r,iconNode:a,...u},h)=>rt.createElement("svg",{ref:h,...l4,width:t,height:t,stroke:i,strokeWidth:n?Number(e)*24/Number(t):e,className:pk("lucide",s),...!r&&!a4(u)&&{"aria-hidden":"true"},...u},[...a.map(([f,p])=>rt.createElement(f,p)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=(i,t)=>{const e=rt.forwardRef(({className:n,...s},r)=>rt.createElement(u4,{ref:r,iconNode:t,className:pk(`lucide-${o4(fI(i))}`,`lucide-${i}`,n),...s}));return e.displayName=fI(i),e};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],d4=Bi("book-open",c4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],pI=Bi("brain-circuit",h4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],mI=Bi("chevron-right",f4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],m4=Bi("circle-alert",p4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ob=Bi("circle-check",g4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],gI=Bi("circle-x",y4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"M11 14h10",key:"1w8e9d"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v1.344",key:"1e62lh"}],["path",{d:"m17 18 4-4-4-4",key:"z2g111"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 1.793-1.113",key:"bjbb7m"}],["rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",key:"ublpy"}]],A4=Bi("clipboard-paste",v4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],S4=Bi("file-text",T4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],b4=Bi("history",E4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],_4=Bi("rotate-ccw",C4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],x4=Bi("skip-forward",w4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],rb=Bi("sparkles",M4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],D4=Bi("trophy",R4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],N4=Bi("upload",I4);var Fp={exports:{}},ab={},lb,yI;function P4(){if(yI)return lb;yI=1;function i(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return lb=i,i.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},i.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},i.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var n=this._timeouts.shift();if(n===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);else return!1;var s=this;return this._timer=setTimeout(function(){s._attempts++,s._operationTimeoutCb&&(s._timeout=setTimeout(function(){s._operationTimeoutCb(s._attempts)},s._operationTimeout),s._options.unref&&s._timeout.unref()),s._fn(s._attempts)},n),this._options.unref&&this._timer.unref(),!0},i.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},i.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)},i.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)},i.prototype.start=i.prototype.try,i.prototype.errors=function(){return this._errors},i.prototype.attempts=function(){return this._attempts},i.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,n=0,s=0;s<this._errors.length;s++){var r=this._errors[s],a=r.message,u=(t[a]||0)+1;t[a]=u,u>=n&&(e=r,n=u)}return e},lb}var vI;function L4(){return vI||(vI=1,(function(i){var t=P4();i.operation=function(e){var n=i.timeouts(e);return new t(n,{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},i.timeouts=function(e){if(e instanceof Array)return[].concat(e);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var s in e)n[s]=e[s];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var r=[],a=0;a<n.retries;a++)r.push(this.createTimeout(a,n));return e&&e.forever&&!r.length&&r.push(this.createTimeout(a,n)),r.sort(function(u,h){return u-h}),r},i.createTimeout=function(e,n){var s=n.randomize?Math.random()+1:1,r=Math.round(s*Math.max(n.minTimeout,1)*Math.pow(n.factor,e));return r=Math.min(r,n.maxTimeout),r},i.wrap=function(e,n,s){if(n instanceof Array&&(s=n,n=null),!s){s=[];for(var r in e)typeof e[r]=="function"&&s.push(r)}for(var a=0;a<s.length;a++){var u=s[a],h=e[u];e[u]=(function(p){var y=i.operation(n),v=Array.prototype.slice.call(arguments,1),E=v.pop();v.push(function(b){y.retry(b)||(b&&(arguments[0]=y.mainError()),E.apply(this,arguments))}),y.attempt(function(){p.apply(e,v)})}).bind(e,h),e[u].options=n}}})(ab)),ab}var ub,AI;function k4(){return AI||(AI=1,ub=L4()),ub}var TI;function U4(){if(TI)return Fp.exports;TI=1;const i=k4(),t=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class e extends Error{constructor(u){super(),u instanceof Error?(this.originalError=u,{message:u}=u):(this.originalError=new Error(u),this.originalError.stack=this.stack),this.name="AbortError",this.message=u}}const n=(a,u,h)=>{const f=h.retries-(u-1);return a.attemptNumber=u,a.retriesLeft=f,a},s=a=>t.includes(a),r=(a,u)=>new Promise((h,f)=>{u={onFailedAttempt:()=>{},retries:10,...u};const p=i.operation(u);p.attempt(async y=>{try{h(await a(y))}catch(v){if(!(v instanceof Error)){f(new TypeError(`Non-error was thrown: "${v}". You should only throw errors.`));return}if(v instanceof e)p.stop(),f(v.originalError);else if(v instanceof TypeError&&!s(v.message))p.stop(),f(v);else{n(v,y,u);try{await u.onFailedAttempt(v)}catch(E){f(E);return}p.retry(v)||f(p.mainError())}}})});return Fp.exports=r,Fp.exports.default=r,Fp.exports.AbortError=e,Fp.exports}var mk=U4();const B4=eV(mk);var F4={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let O4,V4;function H4(){return{geminiUrl:O4,vertexUrl:V4}}function G4(i,t,e,n){var s,r;if(!(i!=null&&i.baseUrl)){const a=H4();return t?(s=a.vertexUrl)!==null&&s!==void 0?s:e:(r=a.geminiUrl)!==null&&r!==void 0?r:n}return i.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sa{}function dt(i,t){const e=/\{([^}]+)\}/g;return i.replace(e,(n,s)=>{if(Object.prototype.hasOwnProperty.call(t,s)){const r=t[s];return r!=null?String(r):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function A(i,t,e){for(let r=0;r<t.length-1;r++){const a=t[r];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in i))if(Array.isArray(e))i[u]=Array.from({length:e.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(i[u])){const h=i[u];if(Array.isArray(e))for(let f=0;f<h.length;f++){const p=h[f];A(p,t.slice(r+1),e[f])}else for(const f of h)A(f,t.slice(r+1),e)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in i||(i[u]=[{}]);const h=i[u];A(h[0],t.slice(r+1),e);return}(!i[a]||typeof i[a]!="object")&&(i[a]={}),i=i[a]}const n=t[t.length-1],s=i[n];if(s!==void 0){if(!e||typeof e=="object"&&Object.keys(e).length===0||e===s)return;if(typeof s=="object"&&typeof e=="object"&&s!==null&&e!==null)Object.assign(s,e);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else n==="_self"&&typeof e=="object"&&e!==null&&!Array.isArray(e)?Object.assign(i,e):i[n]=e}function g(i,t,e=void 0){try{if(t.length===1&&t[0]==="_self")return i;for(let n=0;n<t.length;n++){if(typeof i!="object"||i===null)return e;const s=t[n];if(s.endsWith("[]")){const r=s.slice(0,-2);if(r in i){const a=i[r];return Array.isArray(a)?a.map(u=>g(u,t.slice(n+1),e)):e}else return e}else i=i[s]}return i}catch(n){if(n instanceof TypeError)return e;throw n}}function z4(i,t){for(const[e,n]of Object.entries(t)){const s=e.split("."),r=n.split("."),a=new Set;let u=-1;for(let h=0;h<s.length;h++)if(s[h]==="*"){u=h;break}if(u!==-1&&r.length>u)for(let h=u;h<r.length;h++){const f=r[h];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&a.add(f)}Yb(i,s,r,0,a)}}function Yb(i,t,e,n,s){if(n>=t.length||typeof i!="object"||i===null)return;const r=t[n];if(r.endsWith("[]")){const a=r.slice(0,-2),u=i;if(a in u&&Array.isArray(u[a]))for(const h of u[a])Yb(h,t,e,n+1,s)}else if(r==="*"){if(typeof i=="object"&&i!==null&&!Array.isArray(i)){const a=i,u=Object.keys(a).filter(f=>!f.startsWith("_")&&!s.has(f)),h={};for(const f of u)h[f]=a[f];for(const[f,p]of Object.entries(h)){const y=[];for(const v of e.slice(n))v==="*"?y.push(f):y.push(v);A(a,y,p)}for(const f of u)delete a[f]}}else{const a=i;r in a&&Yb(a[r],t,e,n+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pw(i){if(typeof i!="string")throw new Error("fromImageBytes must be a string");return i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function q4(i){const t={},e=g(i,["operationName"]);e!=null&&A(t,["operationName"],e);const n=g(i,["resourceName"]);return n!=null&&A(t,["_url","resourceName"],n),t}function Y4(i){const t={},e=g(i,["name"]);e!=null&&A(t,["name"],e);const n=g(i,["metadata"]);n!=null&&A(t,["metadata"],n);const s=g(i,["done"]);s!=null&&A(t,["done"],s);const r=g(i,["error"]);r!=null&&A(t,["error"],r);const a=g(i,["response","generateVideoResponse"]);return a!=null&&A(t,["response"],$4(a)),t}function X4(i){const t={},e=g(i,["name"]);e!=null&&A(t,["name"],e);const n=g(i,["metadata"]);n!=null&&A(t,["metadata"],n);const s=g(i,["done"]);s!=null&&A(t,["done"],s);const r=g(i,["error"]);r!=null&&A(t,["error"],r);const a=g(i,["response"]);return a!=null&&A(t,["response"],K4(a)),t}function $4(i){const t={},e=g(i,["generatedSamples"]);if(e!=null){let r=e;Array.isArray(r)&&(r=r.map(a=>W4(a))),A(t,["generatedVideos"],r)}const n=g(i,["raiMediaFilteredCount"]);n!=null&&A(t,["raiMediaFilteredCount"],n);const s=g(i,["raiMediaFilteredReasons"]);return s!=null&&A(t,["raiMediaFilteredReasons"],s),t}function K4(i){const t={},e=g(i,["videos"]);if(e!=null){let r=e;Array.isArray(r)&&(r=r.map(a=>J4(a))),A(t,["generatedVideos"],r)}const n=g(i,["raiMediaFilteredCount"]);n!=null&&A(t,["raiMediaFilteredCount"],n);const s=g(i,["raiMediaFilteredReasons"]);return s!=null&&A(t,["raiMediaFilteredReasons"],s),t}function W4(i){const t={},e=g(i,["video"]);return e!=null&&A(t,["video"],n5(e)),t}function J4(i){const t={},e=g(i,["_self"]);return e!=null&&A(t,["video"],i5(e)),t}function Q4(i){const t={},e=g(i,["operationName"]);return e!=null&&A(t,["_url","operationName"],e),t}function Z4(i){const t={},e=g(i,["operationName"]);return e!=null&&A(t,["_url","operationName"],e),t}function j4(i){const t={},e=g(i,["name"]);e!=null&&A(t,["name"],e);const n=g(i,["metadata"]);n!=null&&A(t,["metadata"],n);const s=g(i,["done"]);s!=null&&A(t,["done"],s);const r=g(i,["error"]);r!=null&&A(t,["error"],r);const a=g(i,["response"]);return a!=null&&A(t,["response"],t5(a)),t}function t5(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=g(i,["parent"]);n!=null&&A(t,["parent"],n);const s=g(i,["documentName"]);return s!=null&&A(t,["documentName"],s),t}function gk(i){const t={},e=g(i,["name"]);e!=null&&A(t,["name"],e);const n=g(i,["metadata"]);n!=null&&A(t,["metadata"],n);const s=g(i,["done"]);s!=null&&A(t,["done"],s);const r=g(i,["error"]);r!=null&&A(t,["error"],r);const a=g(i,["response"]);return a!=null&&A(t,["response"],e5(a)),t}function e5(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=g(i,["parent"]);n!=null&&A(t,["parent"],n);const s=g(i,["documentName"]);return s!=null&&A(t,["documentName"],s),t}function n5(i){const t={},e=g(i,["uri"]);e!=null&&A(t,["uri"],e);const n=g(i,["encodedVideo"]);n!=null&&A(t,["videoBytes"],pw(n));const s=g(i,["encoding"]);return s!=null&&A(t,["mimeType"],s),t}function i5(i){const t={},e=g(i,["gcsUri"]);e!=null&&A(t,["uri"],e);const n=g(i,["bytesBase64Encoded"]);n!=null&&A(t,["videoBytes"],pw(n));const s=g(i,["mimeType"]);return s!=null&&A(t,["mimeType"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var SI;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(SI||(SI={}));var EI;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(EI||(EI={}));var bI;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(bI||(bI={}));var di;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(di||(di={}));var CI;(function(i){i.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",i.SIMPLE_SEARCH="SIMPLE_SEARCH",i.ELASTIC_SEARCH="ELASTIC_SEARCH"})(CI||(CI={}));var _I;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(_I||(_I={}));var wI;(function(i){i.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",i.HTTP_IN_QUERY="HTTP_IN_QUERY",i.HTTP_IN_HEADER="HTTP_IN_HEADER",i.HTTP_IN_PATH="HTTP_IN_PATH",i.HTTP_IN_BODY="HTTP_IN_BODY",i.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(wI||(wI={}));var xI;(function(i){i.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",i.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",i.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",i.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(xI||(xI={}));var MI;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(MI||(MI={}));var RI;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(RI||(RI={}));var DI;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE",i.VALIDATED="VALIDATED"})(DI||(DI={}));var II;(function(i){i.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH",i.MINIMAL="MINIMAL"})(II||(II={}));var NI;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",i.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",i.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",i.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",i.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(NI||(NI={}));var PI;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(PI||(PI={}));var LI;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(LI||(LI={}));var kI;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",i.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",i.NO_IMAGE="NO_IMAGE",i.IMAGE_RECITATION="IMAGE_RECITATION",i.IMAGE_OTHER="IMAGE_OTHER"})(kI||(kI={}));var UI;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(UI||(UI={}));var BI;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(BI||(BI={}));var FI;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",i.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",i.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(FI||(FI={}));var OI;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.IMAGE_SAFETY="IMAGE_SAFETY",i.MODEL_ARMOR="MODEL_ARMOR",i.JAILBREAK="JAILBREAK"})(OI||(OI={}));var VI;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(VI||(VI={}));var mA;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(mA||(mA={}));var HI;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(HI||(HI={}));var GI;(function(i){i.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",i.TUNING_MODE_FULL="TUNING_MODE_FULL",i.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(GI||(GI={}));var zI;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(zI||(zI={}));var Xb;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Xb||(Xb={}));var qI;(function(i){i.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",i.TUNING_TASK_I2V="TUNING_TASK_I2V",i.TUNING_TASK_T2V="TUNING_TASK_T2V",i.TUNING_TASK_R2V="TUNING_TASK_R2V"})(qI||(qI={}));var YI;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",i.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(YI||(YI={}));var $b;(function(i){i.COLLECTION="COLLECTION"})($b||($b={}));var XI;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(XI||(XI={}));var $I;(function(i){i.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",i.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})($I||($I={}));var gA;(function(i){i.PREDICT="PREDICT",i.EMBED_CONTENT="EMBED_CONTENT"})(gA||(gA={}));var KI;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(KI||(KI={}));var WI;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(WI||(WI={}));var JI;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi",i.zh="zh",i.pt="pt",i.es="es"})(JI||(JI={}));var QI;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(QI||(QI={}));var ZI;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ZI||(ZI={}));var jI;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(jI||(jI={}));var tN;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(tN||(tN={}));var eN;(function(i){i.FOREGROUND="FOREGROUND",i.BACKGROUND="BACKGROUND",i.PROMPT="PROMPT",i.SEMANTIC="SEMANTIC",i.INTERACTIVE="INTERACTIVE"})(eN||(eN={}));var nN;(function(i){i.ASSET="ASSET",i.STYLE="STYLE"})(nN||(nN={}));var iN;(function(i){i.INSERT="INSERT",i.REMOVE="REMOVE",i.REMOVE_STATIC="REMOVE_STATIC",i.OUTPAINT="OUTPAINT"})(iN||(iN={}));var sN;(function(i){i.OPTIMIZED="OPTIMIZED",i.LOSSLESS="LOSSLESS"})(sN||(sN={}));var oN;(function(i){i.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",i.PREFERENCE_TUNING="PREFERENCE_TUNING",i.DISTILLATION="DISTILLATION"})(oN||(oN={}));var rN;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.STATE_PENDING="STATE_PENDING",i.STATE_ACTIVE="STATE_ACTIVE",i.STATE_FAILED="STATE_FAILED"})(rN||(rN={}));var aN;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(aN||(aN={}));var lN;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED",i.REGISTERED="REGISTERED"})(lN||(lN={}));var uN;(function(i){i.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.RESPONSE_REJECTED="RESPONSE_REJECTED",i.NEED_MORE_INPUT="NEED_MORE_INPUT"})(uN||(uN={}));var cN;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(cN||(cN={}));var dN;(function(i){i.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",i.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",i.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(dN||(dN={}));var hN;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.ACTIVITY_START="ACTIVITY_START",i.ACTIVITY_END="ACTIVITY_END"})(hN||(hN={}));var fN;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(fN||(fN={}));var pN;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(pN||(pN={}));var mN;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(mN||(mN={}));var gN;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(gN||(gN={}));var yN;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(yN||(yN={}));var vN;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY",i.VOCALIZATION="VOCALIZATION"})(vN||(vN={}));var Kd;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(Kd||(Kd={}));class Kb{constructor(t){const e={};for(const n of t.headers.entries())e[n[0]]=n[1];this.headers=e,this.responseInternal=t}json(){return this.responseInternal.json()}}class Op{get text(){var t,e,n,s,r,a,u,h;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",p=!1;const y=[];for(const v of(h=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&h!==void 0?h:[]){for(const[E,b]of Object.entries(v))E!=="text"&&E!=="thought"&&E!=="thoughtSignature"&&(b!==null||b!==void 0)&&y.push(E);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;p=!0,f+=v.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?f:void 0}get data(){var t,e,n,s,r,a,u,h;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const p=[];for(const y of(h=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&h!==void 0?h:[]){for(const[v,E]of Object.entries(y))v!=="inlineData"&&(E!==null||E!==void 0)&&p.push(v);y.inlineData&&typeof y.inlineData.data=="string"&&(f+=atob(y.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var t,e,n,s,r,a,u,h;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(h=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||h===void 0?void 0:h.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var t,e,n,s,r,a,u,h,f;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(h=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||h===void 0?void 0:h.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var t,e,n,s,r,a,u,h,f;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(h=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||h===void 0?void 0:h.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.output}}class AN{}class TN{}class s5{}class o5{}class r5{}class a5{}class SN{}class EN{}class bN{}class l5{}class yA{_fromAPIResponse({apiResponse:t,_isVertexAI:e}){const n=new yA;let s;const r=t;return e?s=X4(r):s=Y4(r),Object.assign(n,s),n}}class CN{}class _N{}class wN{}class xN{}class u5{}class c5{}class d5{}class mw{_fromAPIResponse({apiResponse:t,_isVertexAI:e}){const n=new mw,r=j4(t);return Object.assign(n,r),n}}class h5{}class f5{}class p5{}class m5{}class MN{}class g5{get text(){var t,e,n;let s="",r=!1;const a=[];for(const u of(n=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&n!==void 0?n:[]){for(const[h,f]of Object.entries(u))h!=="text"&&h!=="thought"&&f!==null&&a.push(h);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;r=!0,s+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?s:void 0}get data(){var t,e,n;let s="";const r=[];for(const a of(n=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&n!==void 0?n:[]){for(const[u,h]of Object.entries(a))u!=="inlineData"&&h!==null&&r.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(s+=atob(a.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class y5{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class gw{_fromAPIResponse({apiResponse:t,_isVertexAI:e}){const n=new gw,r=gk(t);return Object.assign(n,r),n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ne(i,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(i.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function yk(i,t){const e=ne(i,t);return e?e.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:e.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${e}`:e:""}function vk(i){return Array.isArray(i)?i.map(t=>vA(t)):[vA(i)]}function vA(i){if(typeof i=="object"&&i!==null)return i;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof i}`)}function Ak(i){const t=vA(i);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Tk(i){const t=vA(i);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function RN(i){if(i==null)throw new Error("PartUnion is required");if(typeof i=="object")return i;if(typeof i=="string")return{text:i};throw new Error(`Unsupported part type: ${typeof i}`)}function Sk(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("PartListUnion is required");return Array.isArray(i)?i.map(t=>RN(t)):[RN(i)]}function Wb(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function DN(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function IN(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function Dn(i){if(i==null)throw new Error("ContentUnion is required");return Wb(i)?i:{role:"user",parts:Sk(i)}}function yw(i,t){if(!t)return[];if(i.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{const n=Dn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(i.isVertexAI()){const e=Dn(t);return e.parts&&e.parts.length>0&&e.parts[0].text!==void 0?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>Dn(e)):[Dn(t)]}function ys(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("contents are required");if(!Array.isArray(i)){if(DN(i)||IN(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Dn(i)]}const t=[],e=[],n=Wb(i[0]);for(const s of i){const r=Wb(s);if(r!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)t.push(s);else{if(DN(s)||IN(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");e.push(s)}}return n||t.push({role:"user",parts:Sk(e)}),t}function v5(i,t){i.includes("null")&&(t.nullable=!0);const e=i.filter(n=>n!=="null");if(e.length===1)t.type=Object.values(di).includes(e[0].toUpperCase())?e[0].toUpperCase():di.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const n of e)t.anyOf.push({type:Object.values(di).includes(n.toUpperCase())?n.toUpperCase():di.TYPE_UNSPECIFIED})}}function ih(i){const t={},e=["items"],n=["anyOf"],s=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=i.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(t.nullable=!0,i=r[1]):r[1].type==="null"&&(t.nullable=!0,i=r[0])),i.type instanceof Array&&v5(i.type,t);for(const[a,u]of Object.entries(i))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;t.type=Object.values(di).includes(u.toUpperCase())?u.toUpperCase():di.TYPE_UNSPECIFIED}else if(e.includes(a))t[a]=ih(u);else if(n.includes(a)){const h=[];for(const f of u){if(f.type=="null"){t.nullable=!0;continue}h.push(ih(f))}t[a]=h}else if(s.includes(a)){const h={};for(const[f,p]of Object.entries(u))h[f]=ih(p);t[a]=h}else{if(a==="additionalProperties")continue;t[a]=u}return t}function vw(i){return ih(i)}function Aw(i){if(typeof i=="object")return i;if(typeof i=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:i}}};throw new Error(`Unsupported speechConfig type: ${typeof i}`)}function Tw(i){if("multiSpeakerVoiceConfig"in i)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return i}function Of(i){if(i.functionDeclarations)for(const t of i.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=ih(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=ih(t.response));return i}function Vf(i){if(i==null)throw new Error("tools is required");if(!Array.isArray(i))throw new Error("tools is required and must be an array of Tools");const t=[];for(const e of i)t.push(e);return t}function A5(i,t,e,n=1){const s=!t.startsWith(`${e}/`)&&t.split("/").length===n;return i.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${i.getProject()}/${t}`:t.startsWith(`${e}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}`:s?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}/${t}`:t:s?`${e}/${t}`:t}function Ea(i,t){if(typeof t!="string")throw new Error("name must be a string");return A5(i,t,"cachedContents")}function Ek(i){switch(i){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return i}}function jl(i){return pw(i)}function T5(i){return i!=null&&typeof i=="object"&&"name"in i}function S5(i){return i!=null&&typeof i=="object"&&"video"in i}function E5(i){return i!=null&&typeof i=="object"&&"uri"in i}function bk(i){var t;let e;if(T5(i)&&(e=i.name),!(E5(i)&&(e=i.uri,e===void 0))&&!(S5(i)&&(e=(t=i.video)===null||t===void 0?void 0:t.uri,e===void 0))){if(typeof i=="string"&&(e=i),e===void 0)throw new Error("Could not extract file name from the provided input.");if(e.startsWith("https://")){const s=e.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${e}`);e=s[0]}else e.startsWith("files/")&&(e=e.split("files/")[1]);return e}}function Ck(i,t){let e;return i.isVertexAI()?e=t?"publishers/google/models":"models":e=t?"models":"tunedModels",e}function _k(i){for(const t of["models","tunedModels","publisherModels"])if(b5(i,t))return i[t];return[]}function b5(i,t){return i!==null&&typeof i=="object"&&t in i}function C5(i,t={}){const e=i,n={name:e.name,description:e.description,parametersJsonSchema:e.inputSchema};return e.outputSchema&&(n.responseJsonSchema=e.outputSchema),t.behavior&&(n.behavior=t.behavior),{functionDeclarations:[n]}}function _5(i,t={}){const e=[],n=new Set;for(const s of i){const r=s.name;if(n.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);n.add(r);const a=C5(s,t);a.functionDeclarations&&e.push(...a.functionDeclarations)}return{functionDeclarations:e}}function wk(i,t){let e;if(typeof t=="string")if(i.isVertexAI())if(t.startsWith("gs://"))e={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))e={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))e={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(i.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");e={inlinedRequests:t}}else e=t;const n=[e.gcsUri,e.bigqueryUri].filter(Boolean).length,s=[e.inlinedRequests,e.fileName].filter(Boolean).length;if(i.isVertexAI()){if(s>0||n!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(n>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return e}function w5(i){if(typeof i!="string")return i;const t=i;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function xk(i){if(typeof i!="object"||i===null)return{};const t=i,e=t.inlinedResponses;if(typeof e!="object"||e===null)return i;const s=e.inlinedResponses;if(!Array.isArray(s)||s.length===0)return i;let r=!1;for(const a of s){if(typeof a!="object"||a===null)continue;const h=a.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){r=!0;break}}return r&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),i}function Hf(i,t){const e=t;if(!i.isVertexAI()){if(/batches\/[^/]+$/.test(e))return e.split("/").pop();throw new Error(`Invalid batch job name: ${e}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(e))return e.split("/").pop();if(/^\d+$/.test(e))return e;throw new Error(`Invalid batch job name: ${e}.`)}function Mk(i){const t=i;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}function x5(i){return i.includes("gemini")&&i!=="gemini-embedding-001"||i.includes("maas")}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M5(i){const t={},e=g(i,["responsesFile"]);e!=null&&A(t,["fileName"],e);const n=g(i,["inlinedResponses","inlinedResponses"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>lq(a))),A(t,["inlinedResponses"],r)}const s=g(i,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),A(t,["inlinedEmbedContentResponses"],r)}return t}function R5(i){const t={},e=g(i,["predictionsFormat"]);e!=null&&A(t,["format"],e);const n=g(i,["gcsDestination","outputUriPrefix"]);n!=null&&A(t,["gcsUri"],n);const s=g(i,["bigqueryDestination","outputUri"]);return s!=null&&A(t,["bigqueryUri"],s),t}function D5(i){const t={},e=g(i,["format"]);e!=null&&A(t,["predictionsFormat"],e);const n=g(i,["gcsUri"]);n!=null&&A(t,["gcsDestination","outputUriPrefix"],n);const s=g(i,["bigqueryUri"]);if(s!=null&&A(t,["bigqueryDestination","outputUri"],s),g(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(g(i,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(g(i,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function C0(i){const t={},e=g(i,["name"]);e!=null&&A(t,["name"],e);const n=g(i,["metadata","displayName"]);n!=null&&A(t,["displayName"],n);const s=g(i,["metadata","state"]);s!=null&&A(t,["state"],Mk(s));const r=g(i,["metadata","createTime"]);r!=null&&A(t,["createTime"],r);const a=g(i,["metadata","endTime"]);a!=null&&A(t,["endTime"],a);const u=g(i,["metadata","updateTime"]);u!=null&&A(t,["updateTime"],u);const h=g(i,["metadata","model"]);h!=null&&A(t,["model"],h);const f=g(i,["metadata","output"]);return f!=null&&A(t,["dest"],M5(xk(f))),t}function Jb(i){const t={},e=g(i,["name"]);e!=null&&A(t,["name"],e);const n=g(i,["displayName"]);n!=null&&A(t,["displayName"],n);const s=g(i,["state"]);s!=null&&A(t,["state"],Mk(s));const r=g(i,["error"]);r!=null&&A(t,["error"],r);const a=g(i,["createTime"]);a!=null&&A(t,["createTime"],a);const u=g(i,["startTime"]);u!=null&&A(t,["startTime"],u);const h=g(i,["endTime"]);h!=null&&A(t,["endTime"],h);const f=g(i,["updateTime"]);f!=null&&A(t,["updateTime"],f);const p=g(i,["model"]);p!=null&&A(t,["model"],p);const y=g(i,["inputConfig"]);y!=null&&A(t,["src"],I5(y));const v=g(i,["outputConfig"]);v!=null&&A(t,["dest"],R5(xk(v)));const E=g(i,["completionStats"]);return E!=null&&A(t,["completionStats"],E),t}function I5(i){const t={},e=g(i,["instancesFormat"]);e!=null&&A(t,["format"],e);const n=g(i,["gcsSource","uris"]);n!=null&&A(t,["gcsUri"],n);const s=g(i,["bigquerySource","inputUri"]);return s!=null&&A(t,["bigqueryUri"],s),t}function N5(i,t){const e={};if(g(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(g(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(g(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const n=g(t,["fileName"]);n!=null&&A(e,["fileName"],n);const s=g(t,["inlinedRequests"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>aq(i,a))),A(e,["requests","requests"],r)}return e}function P5(i){const t={},e=g(i,["format"]);e!=null&&A(t,["instancesFormat"],e);const n=g(i,["gcsUri"]);n!=null&&A(t,["gcsSource","uris"],n);const s=g(i,["bigqueryUri"]);if(s!=null&&A(t,["bigquerySource","inputUri"],s),g(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(g(i,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function L5(i){const t={},e=g(i,["data"]);if(e!=null&&A(t,["data"],e),g(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(i,["mimeType"]);return n!=null&&A(t,["mimeType"],n),t}function k5(i,t){const e={},n=g(t,["name"]);return n!=null&&A(e,["_url","name"],Hf(i,n)),e}function U5(i,t){const e={},n=g(t,["name"]);return n!=null&&A(e,["_url","name"],Hf(i,n)),e}function B5(i){const t={},e=g(i,["content"]);e!=null&&A(t,["content"],e);const n=g(i,["citationMetadata"]);n!=null&&A(t,["citationMetadata"],F5(n));const s=g(i,["tokenCount"]);s!=null&&A(t,["tokenCount"],s);const r=g(i,["finishReason"]);r!=null&&A(t,["finishReason"],r);const a=g(i,["avgLogprobs"]);a!=null&&A(t,["avgLogprobs"],a);const u=g(i,["groundingMetadata"]);u!=null&&A(t,["groundingMetadata"],u);const h=g(i,["index"]);h!=null&&A(t,["index"],h);const f=g(i,["logprobsResult"]);f!=null&&A(t,["logprobsResult"],f);const p=g(i,["safetyRatings"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(E=>E)),A(t,["safetyRatings"],v)}const y=g(i,["urlContextMetadata"]);return y!=null&&A(t,["urlContextMetadata"],y),t}function F5(i){const t={},e=g(i,["citationSources"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(s=>s)),A(t,["citations"],n)}return t}function Rk(i){const t={},e=g(i,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(r=>mq(r))),A(t,["parts"],s)}const n=g(i,["role"]);return n!=null&&A(t,["role"],n),t}function O5(i,t){const e={},n=g(i,["displayName"]);if(t!==void 0&&n!=null&&A(t,["batch","displayName"],n),g(i,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return e}function V5(i,t){const e={},n=g(i,["displayName"]);t!==void 0&&n!=null&&A(t,["displayName"],n);const s=g(i,["dest"]);return t!==void 0&&s!=null&&A(t,["outputConfig"],D5(w5(s))),e}function NN(i,t){const e={},n=g(t,["model"]);n!=null&&A(e,["_url","model"],ne(i,n));const s=g(t,["src"]);s!=null&&A(e,["batch","inputConfig"],N5(i,wk(i,s)));const r=g(t,["config"]);return r!=null&&O5(r,e),e}function H5(i,t){const e={},n=g(t,["model"]);n!=null&&A(e,["model"],ne(i,n));const s=g(t,["src"]);s!=null&&A(e,["inputConfig"],P5(wk(i,s)));const r=g(t,["config"]);return r!=null&&V5(r,e),e}function G5(i,t){const e={},n=g(i,["displayName"]);return t!==void 0&&n!=null&&A(t,["batch","displayName"],n),e}function z5(i,t){const e={},n=g(t,["model"]);n!=null&&A(e,["_url","model"],ne(i,n));const s=g(t,["src"]);s!=null&&A(e,["batch","inputConfig"],J5(i,s));const r=g(t,["config"]);return r!=null&&G5(r,e),e}function q5(i,t){const e={},n=g(t,["name"]);return n!=null&&A(e,["_url","name"],Hf(i,n)),e}function Y5(i,t){const e={},n=g(t,["name"]);return n!=null&&A(e,["_url","name"],Hf(i,n)),e}function X5(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=g(i,["name"]);n!=null&&A(t,["name"],n);const s=g(i,["done"]);s!=null&&A(t,["done"],s);const r=g(i,["error"]);return r!=null&&A(t,["error"],r),t}function $5(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=g(i,["name"]);n!=null&&A(t,["name"],n);const s=g(i,["done"]);s!=null&&A(t,["done"],s);const r=g(i,["error"]);return r!=null&&A(t,["error"],r),t}function K5(i,t){const e={},n=g(t,["contents"]);if(n!=null){let r=yw(i,n);Array.isArray(r)&&(r=r.map(a=>a)),A(e,["requests[]","request","content"],r)}const s=g(t,["config"]);return s!=null&&(A(e,["_self"],W5(s,e)),z4(e,{"requests[].*":"requests[].request.*"})),e}function W5(i,t){const e={},n=g(i,["taskType"]);t!==void 0&&n!=null&&A(t,["requests[]","taskType"],n);const s=g(i,["title"]);t!==void 0&&s!=null&&A(t,["requests[]","title"],s);const r=g(i,["outputDimensionality"]);if(t!==void 0&&r!=null&&A(t,["requests[]","outputDimensionality"],r),g(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return e}function J5(i,t){const e={},n=g(t,["fileName"]);n!=null&&A(e,["file_name"],n);const s=g(t,["inlinedRequests"]);return s!=null&&A(e,["requests"],K5(i,s)),e}function Q5(i){const t={};if(g(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=g(i,["fileUri"]);e!=null&&A(t,["fileUri"],e);const n=g(i,["mimeType"]);return n!=null&&A(t,["mimeType"],n),t}function Z5(i){const t={},e=g(i,["id"]);e!=null&&A(t,["id"],e);const n=g(i,["args"]);n!=null&&A(t,["args"],n);const s=g(i,["name"]);if(s!=null&&A(t,["name"],s),g(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function j5(i){const t={},e=g(i,["allowedFunctionNames"]);e!=null&&A(t,["allowedFunctionNames"],e);const n=g(i,["mode"]);if(n!=null&&A(t,["mode"],n),g(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function tq(i,t,e){const n={},s=g(t,["systemInstruction"]);e!==void 0&&s!=null&&A(e,["systemInstruction"],Rk(Dn(s)));const r=g(t,["temperature"]);r!=null&&A(n,["temperature"],r);const a=g(t,["topP"]);a!=null&&A(n,["topP"],a);const u=g(t,["topK"]);u!=null&&A(n,["topK"],u);const h=g(t,["candidateCount"]);h!=null&&A(n,["candidateCount"],h);const f=g(t,["maxOutputTokens"]);f!=null&&A(n,["maxOutputTokens"],f);const p=g(t,["stopSequences"]);p!=null&&A(n,["stopSequences"],p);const y=g(t,["responseLogprobs"]);y!=null&&A(n,["responseLogprobs"],y);const v=g(t,["logprobs"]);v!=null&&A(n,["logprobs"],v);const E=g(t,["presencePenalty"]);E!=null&&A(n,["presencePenalty"],E);const b=g(t,["frequencyPenalty"]);b!=null&&A(n,["frequencyPenalty"],b);const _=g(t,["seed"]);_!=null&&A(n,["seed"],_);const w=g(t,["responseMimeType"]);w!=null&&A(n,["responseMimeType"],w);const x=g(t,["responseSchema"]);x!=null&&A(n,["responseSchema"],vw(x));const N=g(t,["responseJsonSchema"]);if(N!=null&&A(n,["responseJsonSchema"],N),g(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=g(t,["safetySettings"]);if(e!==void 0&&I!=null){let ft=I;Array.isArray(ft)&&(ft=ft.map(lt=>gq(lt))),A(e,["safetySettings"],ft)}const L=g(t,["tools"]);if(e!==void 0&&L!=null){let ft=Vf(L);Array.isArray(ft)&&(ft=ft.map(lt=>vq(Of(lt)))),A(e,["tools"],ft)}const U=g(t,["toolConfig"]);if(e!==void 0&&U!=null&&A(e,["toolConfig"],yq(U)),g(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=g(t,["cachedContent"]);e!==void 0&&k!=null&&A(e,["cachedContent"],Ea(i,k));const B=g(t,["responseModalities"]);B!=null&&A(n,["responseModalities"],B);const z=g(t,["mediaResolution"]);z!=null&&A(n,["mediaResolution"],z);const H=g(t,["speechConfig"]);if(H!=null&&A(n,["speechConfig"],Aw(H)),g(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const j=g(t,["thinkingConfig"]);j!=null&&A(n,["thinkingConfig"],j);const et=g(t,["imageConfig"]);et!=null&&A(n,["imageConfig"],rq(et));const at=g(t,["enableEnhancedCivicAnswers"]);if(at!=null&&A(n,["enableEnhancedCivicAnswers"],at),g(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return n}function eq(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=g(i,["candidates"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(f=>B5(f))),A(t,["candidates"],h)}const s=g(i,["modelVersion"]);s!=null&&A(t,["modelVersion"],s);const r=g(i,["promptFeedback"]);r!=null&&A(t,["promptFeedback"],r);const a=g(i,["responseId"]);a!=null&&A(t,["responseId"],a);const u=g(i,["usageMetadata"]);return u!=null&&A(t,["usageMetadata"],u),t}function nq(i,t){const e={},n=g(t,["name"]);return n!=null&&A(e,["_url","name"],Hf(i,n)),e}function iq(i,t){const e={},n=g(t,["name"]);return n!=null&&A(e,["_url","name"],Hf(i,n)),e}function sq(i){const t={};if(g(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=g(i,["enableWidget"]);return e!=null&&A(t,["enableWidget"],e),t}function oq(i){const t={};if(g(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=g(i,["timeRangeFilter"]);return e!=null&&A(t,["timeRangeFilter"],e),t}function rq(i){const t={},e=g(i,["aspectRatio"]);e!=null&&A(t,["aspectRatio"],e);const n=g(i,["imageSize"]);if(n!=null&&A(t,["imageSize"],n),g(i,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(g(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(g(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function aq(i,t){const e={},n=g(t,["model"]);n!=null&&A(e,["request","model"],ne(i,n));const s=g(t,["contents"]);if(s!=null){let u=ys(s);Array.isArray(u)&&(u=u.map(h=>Rk(h))),A(e,["request","contents"],u)}const r=g(t,["metadata"]);r!=null&&A(e,["metadata"],r);const a=g(t,["config"]);return a!=null&&A(e,["request","generationConfig"],tq(i,a,g(e,["request"],{}))),e}function lq(i){const t={},e=g(i,["response"]);e!=null&&A(t,["response"],eq(e));const n=g(i,["metadata"]);n!=null&&A(t,["metadata"],n);const s=g(i,["error"]);return s!=null&&A(t,["error"],s),t}function uq(i,t){const e={},n=g(i,["pageSize"]);t!==void 0&&n!=null&&A(t,["_query","pageSize"],n);const s=g(i,["pageToken"]);if(t!==void 0&&s!=null&&A(t,["_query","pageToken"],s),g(i,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return e}function cq(i,t){const e={},n=g(i,["pageSize"]);t!==void 0&&n!=null&&A(t,["_query","pageSize"],n);const s=g(i,["pageToken"]);t!==void 0&&s!=null&&A(t,["_query","pageToken"],s);const r=g(i,["filter"]);return t!==void 0&&r!=null&&A(t,["_query","filter"],r),e}function dq(i){const t={},e=g(i,["config"]);return e!=null&&uq(e,t),t}function hq(i){const t={},e=g(i,["config"]);return e!=null&&cq(e,t),t}function fq(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=g(i,["nextPageToken"]);n!=null&&A(t,["nextPageToken"],n);const s=g(i,["operations"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>C0(a))),A(t,["batchJobs"],r)}return t}function pq(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=g(i,["nextPageToken"]);n!=null&&A(t,["nextPageToken"],n);const s=g(i,["batchPredictionJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>Jb(a))),A(t,["batchJobs"],r)}return t}function mq(i){const t={},e=g(i,["mediaResolution"]);e!=null&&A(t,["mediaResolution"],e);const n=g(i,["codeExecutionResult"]);n!=null&&A(t,["codeExecutionResult"],n);const s=g(i,["executableCode"]);s!=null&&A(t,["executableCode"],s);const r=g(i,["fileData"]);r!=null&&A(t,["fileData"],Q5(r));const a=g(i,["functionCall"]);a!=null&&A(t,["functionCall"],Z5(a));const u=g(i,["functionResponse"]);u!=null&&A(t,["functionResponse"],u);const h=g(i,["inlineData"]);h!=null&&A(t,["inlineData"],L5(h));const f=g(i,["text"]);f!=null&&A(t,["text"],f);const p=g(i,["thought"]);p!=null&&A(t,["thought"],p);const y=g(i,["thoughtSignature"]);y!=null&&A(t,["thoughtSignature"],y);const v=g(i,["videoMetadata"]);return v!=null&&A(t,["videoMetadata"],v),t}function gq(i){const t={},e=g(i,["category"]);if(e!=null&&A(t,["category"],e),g(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=g(i,["threshold"]);return n!=null&&A(t,["threshold"],n),t}function yq(i){const t={},e=g(i,["retrievalConfig"]);e!=null&&A(t,["retrievalConfig"],e);const n=g(i,["functionCallingConfig"]);return n!=null&&A(t,["functionCallingConfig"],j5(n)),t}function vq(i){const t={};if(g(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const e=g(i,["computerUse"]);e!=null&&A(t,["computerUse"],e);const n=g(i,["fileSearch"]);n!=null&&A(t,["fileSearch"],n);const s=g(i,["codeExecution"]);if(s!=null&&A(t,["codeExecution"],s),g(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=g(i,["functionDeclarations"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(y=>y)),A(t,["functionDeclarations"],p)}const a=g(i,["googleMaps"]);a!=null&&A(t,["googleMaps"],sq(a));const u=g(i,["googleSearch"]);u!=null&&A(t,["googleSearch"],oq(u));const h=g(i,["googleSearchRetrieval"]);h!=null&&A(t,["googleSearchRetrieval"],h);const f=g(i,["urlContext"]);return f!=null&&A(t,["urlContext"],f),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ya;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents",i.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",i.PAGED_ITEM_DOCUMENTS="documents"})(ya||(ya={}));class Yc{constructor(t,e,n,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(t,n,s)}init(t,e,n){var s,r;this.nameInternal=t,this.pageInternal=e[this.nameInternal]||[],this.sdkHttpResponseInternal=e==null?void 0:e.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!n||Object.keys(n).length===0?a={config:{}}:typeof n=="object"?a=Object.assign({},n):a=n,a.config&&(a.config.pageToken=e.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(r=(s=a.config)===null||s===void 0?void 0:s.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Aq extends Sa{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new Yc(ya.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(e),e),this.create=async e=>(this.apiClient.isVertexAI()&&(e.config=this.formatDestination(e.src,e.config)),this.createInternal(e)),this.createEmbeddings=async e=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(e)}}createInlinedGenerateContentRequest(t){const e=NN(this.apiClient,t),n=e._url,s=dt("{model}:batchGenerateContent",n),u=e.batch.inputConfig.requests,h=u.requests,f=[];for(const p of h){const y=Object.assign({},p);if(y.systemInstruction){const v=y.systemInstruction;delete y.systemInstruction;const E=y.request;E.systemInstruction=v,y.request=E}f.push(y)}return u.requests=f,delete e.config,delete e._url,delete e._query,{path:s,body:e}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,e){const n=e?Object.assign({},e):{},s=Date.now().toString();if(n.displayName||(n.displayName=`genaiBatchJob_${s}`),n.dest===void 0){const r=this.getGcsUri(t),a=this.getBigqueryUri(t);if(r)r.endsWith(".jsonl")?n.dest=`${r.slice(0,-6)}/dest`:n.dest=`${r}_dest_${s}`;else if(a)n.dest=`${a}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return n}async createInternal(t){var e,n,s,r;let a,u="",h={};if(this.apiClient.isVertexAI()){const f=H5(this.apiClient,t);return u=dt("batchPredictionJobs",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),a.then(p=>Jb(p))}else{const f=NN(this.apiClient,t);return u=dt("{model}:batchGenerateContent",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>C0(p))}}async createEmbeddingsInternal(t){var e,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=z5(this.apiClient,t);return r=dt("{model}:asyncBatchEmbedContent",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>C0(h))}}async get(t){var e,n,s,r;let a,u="",h={};if(this.apiClient.isVertexAI()){const f=iq(this.apiClient,t);return u=dt("batchPredictionJobs/{name}",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),a.then(p=>Jb(p))}else{const f=nq(this.apiClient,t);return u=dt("batches/{name}",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>C0(p))}}async cancel(t){var e,n,s,r;let a="",u={};if(this.apiClient.isVertexAI()){const h=U5(this.apiClient,t);a=dt("batchPredictionJobs/{name}:cancel",h._url),u=h._query,delete h._url,delete h._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal})}else{const h=k5(this.apiClient,t);a=dt("batches/{name}:cancel",h._url),u=h._query,delete h._url,delete h._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var e,n,s,r;let a,u="",h={};if(this.apiClient.isVertexAI()){const f=hq(t);return u=dt("batchPredictionJobs",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const y=pq(p),v=new MN;return Object.assign(v,y),v})}else{const f=dq(t);return u=dt("batches",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const y=fq(p),v=new MN;return Object.assign(v,y),v})}}async delete(t){var e,n,s,r;let a,u="",h={};if(this.apiClient.isVertexAI()){const f=Y5(this.apiClient,t);return u=dt("batchPredictionJobs/{name}",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>$5(p))}else{const f=q5(this.apiClient,t);return u=dt("batches/{name}",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>X5(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tq(i){const t={},e=g(i,["data"]);if(e!=null&&A(t,["data"],e),g(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(i,["mimeType"]);return n!=null&&A(t,["mimeType"],n),t}function PN(i){const t={},e=g(i,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(r=>zq(r))),A(t,["parts"],s)}const n=g(i,["role"]);return n!=null&&A(t,["role"],n),t}function Sq(i,t){const e={},n=g(i,["ttl"]);t!==void 0&&n!=null&&A(t,["ttl"],n);const s=g(i,["expireTime"]);t!==void 0&&s!=null&&A(t,["expireTime"],s);const r=g(i,["displayName"]);t!==void 0&&r!=null&&A(t,["displayName"],r);const a=g(i,["contents"]);if(t!==void 0&&a!=null){let p=ys(a);Array.isArray(p)&&(p=p.map(y=>PN(y))),A(t,["contents"],p)}const u=g(i,["systemInstruction"]);t!==void 0&&u!=null&&A(t,["systemInstruction"],PN(Dn(u)));const h=g(i,["tools"]);if(t!==void 0&&h!=null){let p=h;Array.isArray(p)&&(p=p.map(y=>Yq(y))),A(t,["tools"],p)}const f=g(i,["toolConfig"]);if(t!==void 0&&f!=null&&A(t,["toolConfig"],qq(f)),g(i,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return e}function Eq(i,t){const e={},n=g(i,["ttl"]);t!==void 0&&n!=null&&A(t,["ttl"],n);const s=g(i,["expireTime"]);t!==void 0&&s!=null&&A(t,["expireTime"],s);const r=g(i,["displayName"]);t!==void 0&&r!=null&&A(t,["displayName"],r);const a=g(i,["contents"]);if(t!==void 0&&a!=null){let y=ys(a);Array.isArray(y)&&(y=y.map(v=>v)),A(t,["contents"],y)}const u=g(i,["systemInstruction"]);t!==void 0&&u!=null&&A(t,["systemInstruction"],Dn(u));const h=g(i,["tools"]);if(t!==void 0&&h!=null){let y=h;Array.isArray(y)&&(y=y.map(v=>Xq(v))),A(t,["tools"],y)}const f=g(i,["toolConfig"]);t!==void 0&&f!=null&&A(t,["toolConfig"],f);const p=g(i,["kmsKeyName"]);return t!==void 0&&p!=null&&A(t,["encryption_spec","kmsKeyName"],p),e}function bq(i,t){const e={},n=g(t,["model"]);n!=null&&A(e,["model"],yk(i,n));const s=g(t,["config"]);return s!=null&&Sq(s,e),e}function Cq(i,t){const e={},n=g(t,["model"]);n!=null&&A(e,["model"],yk(i,n));const s=g(t,["config"]);return s!=null&&Eq(s,e),e}function _q(i,t){const e={},n=g(t,["name"]);return n!=null&&A(e,["_url","name"],Ea(i,n)),e}function wq(i,t){const e={},n=g(t,["name"]);return n!=null&&A(e,["_url","name"],Ea(i,n)),e}function xq(i){const t={},e=g(i,["sdkHttpResponse"]);return e!=null&&A(t,["sdkHttpResponse"],e),t}function Mq(i){const t={},e=g(i,["sdkHttpResponse"]);return e!=null&&A(t,["sdkHttpResponse"],e),t}function Rq(i){const t={};if(g(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=g(i,["fileUri"]);e!=null&&A(t,["fileUri"],e);const n=g(i,["mimeType"]);return n!=null&&A(t,["mimeType"],n),t}function Dq(i){const t={},e=g(i,["id"]);e!=null&&A(t,["id"],e);const n=g(i,["args"]);n!=null&&A(t,["args"],n);const s=g(i,["name"]);if(s!=null&&A(t,["name"],s),g(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Iq(i){const t={},e=g(i,["allowedFunctionNames"]);e!=null&&A(t,["allowedFunctionNames"],e);const n=g(i,["mode"]);if(n!=null&&A(t,["mode"],n),g(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function Nq(i){const t={},e=g(i,["description"]);e!=null&&A(t,["description"],e);const n=g(i,["name"]);n!=null&&A(t,["name"],n);const s=g(i,["parameters"]);s!=null&&A(t,["parameters"],s);const r=g(i,["parametersJsonSchema"]);r!=null&&A(t,["parametersJsonSchema"],r);const a=g(i,["response"]);a!=null&&A(t,["response"],a);const u=g(i,["responseJsonSchema"]);if(u!=null&&A(t,["responseJsonSchema"],u),g(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function Pq(i,t){const e={},n=g(t,["name"]);return n!=null&&A(e,["_url","name"],Ea(i,n)),e}function Lq(i,t){const e={},n=g(t,["name"]);return n!=null&&A(e,["_url","name"],Ea(i,n)),e}function kq(i){const t={};if(g(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=g(i,["enableWidget"]);return e!=null&&A(t,["enableWidget"],e),t}function Uq(i){const t={};if(g(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=g(i,["timeRangeFilter"]);return e!=null&&A(t,["timeRangeFilter"],e),t}function Bq(i,t){const e={},n=g(i,["pageSize"]);t!==void 0&&n!=null&&A(t,["_query","pageSize"],n);const s=g(i,["pageToken"]);return t!==void 0&&s!=null&&A(t,["_query","pageToken"],s),e}function Fq(i,t){const e={},n=g(i,["pageSize"]);t!==void 0&&n!=null&&A(t,["_query","pageSize"],n);const s=g(i,["pageToken"]);return t!==void 0&&s!=null&&A(t,["_query","pageToken"],s),e}function Oq(i){const t={},e=g(i,["config"]);return e!=null&&Bq(e,t),t}function Vq(i){const t={},e=g(i,["config"]);return e!=null&&Fq(e,t),t}function Hq(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=g(i,["nextPageToken"]);n!=null&&A(t,["nextPageToken"],n);const s=g(i,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),A(t,["cachedContents"],r)}return t}function Gq(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=g(i,["nextPageToken"]);n!=null&&A(t,["nextPageToken"],n);const s=g(i,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),A(t,["cachedContents"],r)}return t}function zq(i){const t={},e=g(i,["mediaResolution"]);e!=null&&A(t,["mediaResolution"],e);const n=g(i,["codeExecutionResult"]);n!=null&&A(t,["codeExecutionResult"],n);const s=g(i,["executableCode"]);s!=null&&A(t,["executableCode"],s);const r=g(i,["fileData"]);r!=null&&A(t,["fileData"],Rq(r));const a=g(i,["functionCall"]);a!=null&&A(t,["functionCall"],Dq(a));const u=g(i,["functionResponse"]);u!=null&&A(t,["functionResponse"],u);const h=g(i,["inlineData"]);h!=null&&A(t,["inlineData"],Tq(h));const f=g(i,["text"]);f!=null&&A(t,["text"],f);const p=g(i,["thought"]);p!=null&&A(t,["thought"],p);const y=g(i,["thoughtSignature"]);y!=null&&A(t,["thoughtSignature"],y);const v=g(i,["videoMetadata"]);return v!=null&&A(t,["videoMetadata"],v),t}function qq(i){const t={},e=g(i,["retrievalConfig"]);e!=null&&A(t,["retrievalConfig"],e);const n=g(i,["functionCallingConfig"]);return n!=null&&A(t,["functionCallingConfig"],Iq(n)),t}function Yq(i){const t={};if(g(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const e=g(i,["computerUse"]);e!=null&&A(t,["computerUse"],e);const n=g(i,["fileSearch"]);n!=null&&A(t,["fileSearch"],n);const s=g(i,["codeExecution"]);if(s!=null&&A(t,["codeExecution"],s),g(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=g(i,["functionDeclarations"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(y=>y)),A(t,["functionDeclarations"],p)}const a=g(i,["googleMaps"]);a!=null&&A(t,["googleMaps"],kq(a));const u=g(i,["googleSearch"]);u!=null&&A(t,["googleSearch"],Uq(u));const h=g(i,["googleSearchRetrieval"]);h!=null&&A(t,["googleSearchRetrieval"],h);const f=g(i,["urlContext"]);return f!=null&&A(t,["urlContext"],f),t}function Xq(i){const t={},e=g(i,["retrieval"]);e!=null&&A(t,["retrieval"],e);const n=g(i,["computerUse"]);if(n!=null&&A(t,["computerUse"],n),g(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=g(i,["codeExecution"]);s!=null&&A(t,["codeExecution"],s);const r=g(i,["enterpriseWebSearch"]);r!=null&&A(t,["enterpriseWebSearch"],r);const a=g(i,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(v=>Nq(v))),A(t,["functionDeclarations"],y)}const u=g(i,["googleMaps"]);u!=null&&A(t,["googleMaps"],u);const h=g(i,["googleSearch"]);h!=null&&A(t,["googleSearch"],h);const f=g(i,["googleSearchRetrieval"]);f!=null&&A(t,["googleSearchRetrieval"],f);const p=g(i,["urlContext"]);return p!=null&&A(t,["urlContext"],p),t}function $q(i,t){const e={},n=g(i,["ttl"]);t!==void 0&&n!=null&&A(t,["ttl"],n);const s=g(i,["expireTime"]);return t!==void 0&&s!=null&&A(t,["expireTime"],s),e}function Kq(i,t){const e={},n=g(i,["ttl"]);t!==void 0&&n!=null&&A(t,["ttl"],n);const s=g(i,["expireTime"]);return t!==void 0&&s!=null&&A(t,["expireTime"],s),e}function Wq(i,t){const e={},n=g(t,["name"]);n!=null&&A(e,["_url","name"],Ea(i,n));const s=g(t,["config"]);return s!=null&&$q(s,e),e}function Jq(i,t){const e={},n=g(t,["name"]);n!=null&&A(e,["_url","name"],Ea(i,n));const s=g(t,["config"]);return s!=null&&Kq(s,e),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qq extends Sa{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new Yc(ya.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(e),e)}async create(t){var e,n,s,r;let a,u="",h={};if(this.apiClient.isVertexAI()){const f=Cq(this.apiClient,t);return u=dt("cachedContents",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),a.then(p=>p)}else{const f=bq(this.apiClient,t);return u=dt("cachedContents",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async get(t){var e,n,s,r;let a,u="",h={};if(this.apiClient.isVertexAI()){const f=Lq(this.apiClient,t);return u=dt("{name}",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),a.then(p=>p)}else{const f=Pq(this.apiClient,t);return u=dt("{name}",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(t){var e,n,s,r;let a,u="",h={};if(this.apiClient.isVertexAI()){const f=wq(this.apiClient,t);return u=dt("{name}",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const y=Mq(p),v=new wN;return Object.assign(v,y),v})}else{const f=_q(this.apiClient,t);return u=dt("{name}",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const y=xq(p),v=new wN;return Object.assign(v,y),v})}}async update(t){var e,n,s,r;let a,u="",h={};if(this.apiClient.isVertexAI()){const f=Jq(this.apiClient,t);return u=dt("{name}",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),a.then(p=>p)}else{const f=Wq(this.apiClient,t);return u=dt("{name}",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async listInternal(t){var e,n,s,r;let a,u="",h={};if(this.apiClient.isVertexAI()){const f=Vq(t);return u=dt("cachedContents",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const y=Gq(p),v=new xN;return Object.assign(v,y),v})}else{const f=Oq(t);return u=dt("cachedContents",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const y=Hq(p),v=new xN;return Object.assign(v,y),v})}}}function AA(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(e[n[s]]=i[n[s]]);return e}function LN(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Dt(i){return this instanceof Dt?(this.v=i,this):new Dt(i)}function So(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(i,t||[]),s,r=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(E){return function(b){return Promise.resolve(b).then(E,y)}}function u(E,b){n[E]&&(s[E]=function(_){return new Promise(function(w,x){r.push([E,_,w,x])>1||h(E,_)})},b&&(s[E]=b(s[E])))}function h(E,b){try{f(n[E](b))}catch(_){v(r[0][3],_)}}function f(E){E.value instanceof Dt?Promise.resolve(E.value.v).then(p,y):v(r[0][2],E)}function p(E){h("next",E)}function y(E){h("throw",E)}function v(E,b){E(b),r.shift(),r.length&&h(r[0][0],r[0][1])}}function Eo(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=i[Symbol.asyncIterator],e;return t?t.call(i):(i=typeof LN=="function"?LN(i):i[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=i[r]&&function(a){return new Promise(function(u,h){a=i[r](a),s(u,h,a.done,a.value)})}}function s(r,a,u,h){Promise.resolve(h).then(function(f){r({value:f,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zq(i){var t;if(i.candidates==null||i.candidates.length===0)return!1;const e=(t=i.candidates[0])===null||t===void 0?void 0:t.content;return e===void 0?!1:Dk(e)}function Dk(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const t of i.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function jq(i){if(i.length!==0){for(const t of i)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function kN(i){if(i===void 0||i.length===0)return[];const t=[],e=i.length;let n=0;for(;n<e;)if(i[n].role==="user")t.push(i[n]),n++;else{const s=[];let r=!0;for(;n<e&&i[n].role==="model";)s.push(i[n]),r&&!Dk(i[n])&&(r=!1),n++;r?t.push(...s):t.pop()}return t}class t6{constructor(t,e){this.modelsModule=t,this.apiClient=e}create(t){return new e6(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class e6{constructor(t,e,n,s={},r=[]){this.apiClient=t,this.modelsModule=e,this.model=n,this.config=s,this.history=r,this.sendPromise=Promise.resolve(),jq(r)}async sendMessage(t){var e;await this.sendPromise;const n=Dn(t.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(e=t.config)!==null&&e!==void 0?e:this.config});return this.sendPromise=(async()=>{var r,a,u;const h=await s,f=(a=(r=h.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content,p=h.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let v=[];p!=null&&(v=(u=p.slice(y))!==null&&u!==void 0?u:[]);const E=f?[f]:[];this.recordHistory(n,E,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(t){var e;await this.sendPromise;const n=Dn(t.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(e=t.config)!==null&&e!==void 0?e:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const r=await s;return this.processStreamResponse(r,n)}getHistory(t=!1){const e=t?kN(this.history):this.history;return structuredClone(e)}processStreamResponse(t,e){return So(this,arguments,function*(){var s,r,a,u,h,f;const p=[];try{for(var y=!0,v=Eo(t),E;E=yield Dt(v.next()),s=E.done,!s;y=!0){u=E.value,y=!1;const b=u;if(Zq(b)){const _=(f=(h=b.candidates)===null||h===void 0?void 0:h[0])===null||f===void 0?void 0:f.content;_!==void 0&&p.push(_)}yield yield Dt(b)}}catch(b){r={error:b}}finally{try{!y&&!s&&(a=v.return)&&(yield Dt(a.call(v)))}finally{if(r)throw r.error}}this.recordHistory(e,p)})}recordHistory(t,e,n){let s=[];e.length>0&&e.every(r=>r.role!==void 0)?s=e:s.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...kN(n)):this.history.push(t),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cm extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Cm.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function n6(i){const t={},e=g(i,["file"]);return e!=null&&A(t,["file"],e),t}function i6(i){const t={},e=g(i,["sdkHttpResponse"]);return e!=null&&A(t,["sdkHttpResponse"],e),t}function s6(i){const t={},e=g(i,["name"]);return e!=null&&A(t,["_url","file"],bk(e)),t}function o6(i){const t={},e=g(i,["sdkHttpResponse"]);return e!=null&&A(t,["sdkHttpResponse"],e),t}function r6(i){const t={},e=g(i,["name"]);return e!=null&&A(t,["_url","file"],bk(e)),t}function a6(i){const t={},e=g(i,["uris"]);return e!=null&&A(t,["uris"],e),t}function l6(i,t){const e={},n=g(i,["pageSize"]);t!==void 0&&n!=null&&A(t,["_query","pageSize"],n);const s=g(i,["pageToken"]);return t!==void 0&&s!=null&&A(t,["_query","pageToken"],s),e}function u6(i){const t={},e=g(i,["config"]);return e!=null&&l6(e,t),t}function c6(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=g(i,["nextPageToken"]);n!=null&&A(t,["nextPageToken"],n);const s=g(i,["files"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),A(t,["files"],r)}return t}function d6(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=g(i,["files"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>r)),A(t,["files"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class h6 extends Sa{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new Yc(ya.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(e),e)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(e=>e)}async download(t){await this.apiClient.downloadFile(t)}async registerFiles(t){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(t){return this.registerFilesInternal(t)}async listInternal(t){var e,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=u6(t);return r=dt("files",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),s.then(h=>{const f=c6(h),p=new h5;return Object.assign(p,f),p})}}async createInternal(t){var e,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=n6(t);return r=dt("upload/v1beta/files",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const f=i6(h),p=new f5;return Object.assign(p,f),p})}}async get(t){var e,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=r6(t);return r=dt("files/{file}",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(t){var e,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=s6(t);return r=dt("files/{file}",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),s.then(h=>{const f=o6(h),p=new p5;return Object.assign(p,f),p})}}async registerFilesInternal(t){var e,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=a6(t);return r=dt("files:register",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const f=d6(h),p=new m5;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _0(i){const t={},e=g(i,["data"]);if(e!=null&&A(t,["data"],e),g(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(i,["mimeType"]);return n!=null&&A(t,["mimeType"],n),t}function f6(i){const t={},e=g(i,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(r=>R6(r))),A(t,["parts"],s)}const n=g(i,["role"]);return n!=null&&A(t,["role"],n),t}function p6(i){const t={};if(g(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=g(i,["fileUri"]);e!=null&&A(t,["fileUri"],e);const n=g(i,["mimeType"]);return n!=null&&A(t,["mimeType"],n),t}function m6(i){const t={},e=g(i,["id"]);e!=null&&A(t,["id"],e);const n=g(i,["args"]);n!=null&&A(t,["args"],n);const s=g(i,["name"]);if(s!=null&&A(t,["name"],s),g(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function g6(i){const t={},e=g(i,["description"]);e!=null&&A(t,["description"],e);const n=g(i,["name"]);n!=null&&A(t,["name"],n);const s=g(i,["parameters"]);s!=null&&A(t,["parameters"],s);const r=g(i,["parametersJsonSchema"]);r!=null&&A(t,["parametersJsonSchema"],r);const a=g(i,["response"]);a!=null&&A(t,["response"],a);const u=g(i,["responseJsonSchema"]);if(u!=null&&A(t,["responseJsonSchema"],u),g(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function y6(i){const t={},e=g(i,["modelSelectionConfig"]);e!=null&&A(t,["modelConfig"],e);const n=g(i,["responseJsonSchema"]);n!=null&&A(t,["responseJsonSchema"],n);const s=g(i,["audioTimestamp"]);s!=null&&A(t,["audioTimestamp"],s);const r=g(i,["candidateCount"]);r!=null&&A(t,["candidateCount"],r);const a=g(i,["enableAffectiveDialog"]);a!=null&&A(t,["enableAffectiveDialog"],a);const u=g(i,["frequencyPenalty"]);u!=null&&A(t,["frequencyPenalty"],u);const h=g(i,["logprobs"]);h!=null&&A(t,["logprobs"],h);const f=g(i,["maxOutputTokens"]);f!=null&&A(t,["maxOutputTokens"],f);const p=g(i,["mediaResolution"]);p!=null&&A(t,["mediaResolution"],p);const y=g(i,["presencePenalty"]);y!=null&&A(t,["presencePenalty"],y);const v=g(i,["responseLogprobs"]);v!=null&&A(t,["responseLogprobs"],v);const E=g(i,["responseMimeType"]);E!=null&&A(t,["responseMimeType"],E);const b=g(i,["responseModalities"]);b!=null&&A(t,["responseModalities"],b);const _=g(i,["responseSchema"]);_!=null&&A(t,["responseSchema"],_);const w=g(i,["routingConfig"]);w!=null&&A(t,["routingConfig"],w);const x=g(i,["seed"]);x!=null&&A(t,["seed"],x);const N=g(i,["speechConfig"]);N!=null&&A(t,["speechConfig"],N);const I=g(i,["stopSequences"]);I!=null&&A(t,["stopSequences"],I);const L=g(i,["temperature"]);L!=null&&A(t,["temperature"],L);const U=g(i,["thinkingConfig"]);U!=null&&A(t,["thinkingConfig"],U);const k=g(i,["topK"]);k!=null&&A(t,["topK"],k);const B=g(i,["topP"]);if(B!=null&&A(t,["topP"],B),g(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function v6(i){const t={};if(g(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=g(i,["enableWidget"]);return e!=null&&A(t,["enableWidget"],e),t}function A6(i){const t={};if(g(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=g(i,["timeRangeFilter"]);return e!=null&&A(t,["timeRangeFilter"],e),t}function T6(i,t){const e={},n=g(i,["generationConfig"]);t!==void 0&&n!=null&&A(t,["setup","generationConfig"],n);const s=g(i,["responseModalities"]);t!==void 0&&s!=null&&A(t,["setup","generationConfig","responseModalities"],s);const r=g(i,["temperature"]);t!==void 0&&r!=null&&A(t,["setup","generationConfig","temperature"],r);const a=g(i,["topP"]);t!==void 0&&a!=null&&A(t,["setup","generationConfig","topP"],a);const u=g(i,["topK"]);t!==void 0&&u!=null&&A(t,["setup","generationConfig","topK"],u);const h=g(i,["maxOutputTokens"]);t!==void 0&&h!=null&&A(t,["setup","generationConfig","maxOutputTokens"],h);const f=g(i,["mediaResolution"]);t!==void 0&&f!=null&&A(t,["setup","generationConfig","mediaResolution"],f);const p=g(i,["seed"]);t!==void 0&&p!=null&&A(t,["setup","generationConfig","seed"],p);const y=g(i,["speechConfig"]);t!==void 0&&y!=null&&A(t,["setup","generationConfig","speechConfig"],Tw(y));const v=g(i,["thinkingConfig"]);t!==void 0&&v!=null&&A(t,["setup","generationConfig","thinkingConfig"],v);const E=g(i,["enableAffectiveDialog"]);t!==void 0&&E!=null&&A(t,["setup","generationConfig","enableAffectiveDialog"],E);const b=g(i,["systemInstruction"]);t!==void 0&&b!=null&&A(t,["setup","systemInstruction"],f6(Dn(b)));const _=g(i,["tools"]);if(t!==void 0&&_!=null){let k=Vf(_);Array.isArray(k)&&(k=k.map(B=>I6(Of(B)))),A(t,["setup","tools"],k)}const w=g(i,["sessionResumption"]);t!==void 0&&w!=null&&A(t,["setup","sessionResumption"],D6(w));const x=g(i,["inputAudioTranscription"]);t!==void 0&&x!=null&&A(t,["setup","inputAudioTranscription"],x);const N=g(i,["outputAudioTranscription"]);t!==void 0&&N!=null&&A(t,["setup","outputAudioTranscription"],N);const I=g(i,["realtimeInputConfig"]);t!==void 0&&I!=null&&A(t,["setup","realtimeInputConfig"],I);const L=g(i,["contextWindowCompression"]);t!==void 0&&L!=null&&A(t,["setup","contextWindowCompression"],L);const U=g(i,["proactivity"]);if(t!==void 0&&U!=null&&A(t,["setup","proactivity"],U),g(i,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return e}function S6(i,t){const e={},n=g(i,["generationConfig"]);t!==void 0&&n!=null&&A(t,["setup","generationConfig"],y6(n));const s=g(i,["responseModalities"]);t!==void 0&&s!=null&&A(t,["setup","generationConfig","responseModalities"],s);const r=g(i,["temperature"]);t!==void 0&&r!=null&&A(t,["setup","generationConfig","temperature"],r);const a=g(i,["topP"]);t!==void 0&&a!=null&&A(t,["setup","generationConfig","topP"],a);const u=g(i,["topK"]);t!==void 0&&u!=null&&A(t,["setup","generationConfig","topK"],u);const h=g(i,["maxOutputTokens"]);t!==void 0&&h!=null&&A(t,["setup","generationConfig","maxOutputTokens"],h);const f=g(i,["mediaResolution"]);t!==void 0&&f!=null&&A(t,["setup","generationConfig","mediaResolution"],f);const p=g(i,["seed"]);t!==void 0&&p!=null&&A(t,["setup","generationConfig","seed"],p);const y=g(i,["speechConfig"]);t!==void 0&&y!=null&&A(t,["setup","generationConfig","speechConfig"],Tw(y));const v=g(i,["thinkingConfig"]);t!==void 0&&v!=null&&A(t,["setup","generationConfig","thinkingConfig"],v);const E=g(i,["enableAffectiveDialog"]);t!==void 0&&E!=null&&A(t,["setup","generationConfig","enableAffectiveDialog"],E);const b=g(i,["systemInstruction"]);t!==void 0&&b!=null&&A(t,["setup","systemInstruction"],Dn(b));const _=g(i,["tools"]);if(t!==void 0&&_!=null){let B=Vf(_);Array.isArray(B)&&(B=B.map(z=>N6(Of(z)))),A(t,["setup","tools"],B)}const w=g(i,["sessionResumption"]);t!==void 0&&w!=null&&A(t,["setup","sessionResumption"],w);const x=g(i,["inputAudioTranscription"]);t!==void 0&&x!=null&&A(t,["setup","inputAudioTranscription"],x);const N=g(i,["outputAudioTranscription"]);t!==void 0&&N!=null&&A(t,["setup","outputAudioTranscription"],N);const I=g(i,["realtimeInputConfig"]);t!==void 0&&I!=null&&A(t,["setup","realtimeInputConfig"],I);const L=g(i,["contextWindowCompression"]);t!==void 0&&L!=null&&A(t,["setup","contextWindowCompression"],L);const U=g(i,["proactivity"]);t!==void 0&&U!=null&&A(t,["setup","proactivity"],U);const k=g(i,["explicitVadSignal"]);return t!==void 0&&k!=null&&A(t,["setup","explicitVadSignal"],k),e}function E6(i,t){const e={},n=g(t,["model"]);n!=null&&A(e,["setup","model"],ne(i,n));const s=g(t,["config"]);return s!=null&&A(e,["config"],T6(s,e)),e}function b6(i,t){const e={},n=g(t,["model"]);n!=null&&A(e,["setup","model"],ne(i,n));const s=g(t,["config"]);return s!=null&&A(e,["config"],S6(s,e)),e}function C6(i){const t={},e=g(i,["musicGenerationConfig"]);return e!=null&&A(t,["musicGenerationConfig"],e),t}function _6(i){const t={},e=g(i,["weightedPrompts"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(s=>s)),A(t,["weightedPrompts"],n)}return t}function w6(i){const t={},e=g(i,["media"]);if(e!=null){let f=vk(e);Array.isArray(f)&&(f=f.map(p=>_0(p))),A(t,["mediaChunks"],f)}const n=g(i,["audio"]);n!=null&&A(t,["audio"],_0(Tk(n)));const s=g(i,["audioStreamEnd"]);s!=null&&A(t,["audioStreamEnd"],s);const r=g(i,["video"]);r!=null&&A(t,["video"],_0(Ak(r)));const a=g(i,["text"]);a!=null&&A(t,["text"],a);const u=g(i,["activityStart"]);u!=null&&A(t,["activityStart"],u);const h=g(i,["activityEnd"]);return h!=null&&A(t,["activityEnd"],h),t}function x6(i){const t={},e=g(i,["media"]);if(e!=null){let f=vk(e);Array.isArray(f)&&(f=f.map(p=>p)),A(t,["mediaChunks"],f)}const n=g(i,["audio"]);n!=null&&A(t,["audio"],Tk(n));const s=g(i,["audioStreamEnd"]);s!=null&&A(t,["audioStreamEnd"],s);const r=g(i,["video"]);r!=null&&A(t,["video"],Ak(r));const a=g(i,["text"]);a!=null&&A(t,["text"],a);const u=g(i,["activityStart"]);u!=null&&A(t,["activityStart"],u);const h=g(i,["activityEnd"]);return h!=null&&A(t,["activityEnd"],h),t}function M6(i){const t={},e=g(i,["setupComplete"]);e!=null&&A(t,["setupComplete"],e);const n=g(i,["serverContent"]);n!=null&&A(t,["serverContent"],n);const s=g(i,["toolCall"]);s!=null&&A(t,["toolCall"],s);const r=g(i,["toolCallCancellation"]);r!=null&&A(t,["toolCallCancellation"],r);const a=g(i,["usageMetadata"]);a!=null&&A(t,["usageMetadata"],P6(a));const u=g(i,["goAway"]);u!=null&&A(t,["goAway"],u);const h=g(i,["sessionResumptionUpdate"]);h!=null&&A(t,["sessionResumptionUpdate"],h);const f=g(i,["voiceActivityDetectionSignal"]);f!=null&&A(t,["voiceActivityDetectionSignal"],f);const p=g(i,["voiceActivity"]);return p!=null&&A(t,["voiceActivity"],L6(p)),t}function R6(i){const t={},e=g(i,["mediaResolution"]);e!=null&&A(t,["mediaResolution"],e);const n=g(i,["codeExecutionResult"]);n!=null&&A(t,["codeExecutionResult"],n);const s=g(i,["executableCode"]);s!=null&&A(t,["executableCode"],s);const r=g(i,["fileData"]);r!=null&&A(t,["fileData"],p6(r));const a=g(i,["functionCall"]);a!=null&&A(t,["functionCall"],m6(a));const u=g(i,["functionResponse"]);u!=null&&A(t,["functionResponse"],u);const h=g(i,["inlineData"]);h!=null&&A(t,["inlineData"],_0(h));const f=g(i,["text"]);f!=null&&A(t,["text"],f);const p=g(i,["thought"]);p!=null&&A(t,["thought"],p);const y=g(i,["thoughtSignature"]);y!=null&&A(t,["thoughtSignature"],y);const v=g(i,["videoMetadata"]);return v!=null&&A(t,["videoMetadata"],v),t}function D6(i){const t={},e=g(i,["handle"]);if(e!=null&&A(t,["handle"],e),g(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function I6(i){const t={};if(g(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const e=g(i,["computerUse"]);e!=null&&A(t,["computerUse"],e);const n=g(i,["fileSearch"]);n!=null&&A(t,["fileSearch"],n);const s=g(i,["codeExecution"]);if(s!=null&&A(t,["codeExecution"],s),g(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=g(i,["functionDeclarations"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(y=>y)),A(t,["functionDeclarations"],p)}const a=g(i,["googleMaps"]);a!=null&&A(t,["googleMaps"],v6(a));const u=g(i,["googleSearch"]);u!=null&&A(t,["googleSearch"],A6(u));const h=g(i,["googleSearchRetrieval"]);h!=null&&A(t,["googleSearchRetrieval"],h);const f=g(i,["urlContext"]);return f!=null&&A(t,["urlContext"],f),t}function N6(i){const t={},e=g(i,["retrieval"]);e!=null&&A(t,["retrieval"],e);const n=g(i,["computerUse"]);if(n!=null&&A(t,["computerUse"],n),g(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=g(i,["codeExecution"]);s!=null&&A(t,["codeExecution"],s);const r=g(i,["enterpriseWebSearch"]);r!=null&&A(t,["enterpriseWebSearch"],r);const a=g(i,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(v=>g6(v))),A(t,["functionDeclarations"],y)}const u=g(i,["googleMaps"]);u!=null&&A(t,["googleMaps"],u);const h=g(i,["googleSearch"]);h!=null&&A(t,["googleSearch"],h);const f=g(i,["googleSearchRetrieval"]);f!=null&&A(t,["googleSearchRetrieval"],f);const p=g(i,["urlContext"]);return p!=null&&A(t,["urlContext"],p),t}function P6(i){const t={},e=g(i,["promptTokenCount"]);e!=null&&A(t,["promptTokenCount"],e);const n=g(i,["cachedContentTokenCount"]);n!=null&&A(t,["cachedContentTokenCount"],n);const s=g(i,["candidatesTokenCount"]);s!=null&&A(t,["responseTokenCount"],s);const r=g(i,["toolUsePromptTokenCount"]);r!=null&&A(t,["toolUsePromptTokenCount"],r);const a=g(i,["thoughtsTokenCount"]);a!=null&&A(t,["thoughtsTokenCount"],a);const u=g(i,["totalTokenCount"]);u!=null&&A(t,["totalTokenCount"],u);const h=g(i,["promptTokensDetails"]);if(h!=null){let E=h;Array.isArray(E)&&(E=E.map(b=>b)),A(t,["promptTokensDetails"],E)}const f=g(i,["cacheTokensDetails"]);if(f!=null){let E=f;Array.isArray(E)&&(E=E.map(b=>b)),A(t,["cacheTokensDetails"],E)}const p=g(i,["candidatesTokensDetails"]);if(p!=null){let E=p;Array.isArray(E)&&(E=E.map(b=>b)),A(t,["responseTokensDetails"],E)}const y=g(i,["toolUsePromptTokensDetails"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(b=>b)),A(t,["toolUsePromptTokensDetails"],E)}const v=g(i,["trafficType"]);return v!=null&&A(t,["trafficType"],v),t}function L6(i){const t={},e=g(i,["type"]);return e!=null&&A(t,["voiceActivityType"],e),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k6(i,t){const e={},n=g(i,["data"]);if(n!=null&&A(e,["data"],n),g(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=g(i,["mimeType"]);return s!=null&&A(e,["mimeType"],s),e}function U6(i,t){const e={},n=g(i,["content"]);n!=null&&A(e,["content"],n);const s=g(i,["citationMetadata"]);s!=null&&A(e,["citationMetadata"],B6(s));const r=g(i,["tokenCount"]);r!=null&&A(e,["tokenCount"],r);const a=g(i,["finishReason"]);a!=null&&A(e,["finishReason"],a);const u=g(i,["avgLogprobs"]);u!=null&&A(e,["avgLogprobs"],u);const h=g(i,["groundingMetadata"]);h!=null&&A(e,["groundingMetadata"],h);const f=g(i,["index"]);f!=null&&A(e,["index"],f);const p=g(i,["logprobsResult"]);p!=null&&A(e,["logprobsResult"],p);const y=g(i,["safetyRatings"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(b=>b)),A(e,["safetyRatings"],E)}const v=g(i,["urlContextMetadata"]);return v!=null&&A(e,["urlContextMetadata"],v),e}function B6(i,t){const e={},n=g(i,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>r)),A(e,["citations"],s)}return e}function F6(i,t,e){const n={},s=g(t,["model"]);s!=null&&A(n,["_url","model"],ne(i,s));const r=g(t,["contents"]);if(r!=null){let a=ys(r);Array.isArray(a)&&(a=a.map(u=>u)),A(n,["contents"],a)}return n}function O6(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const s=g(i,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),A(e,["tokensInfo"],r)}return e}function V6(i,t){const e={},n=g(i,["values"]);n!=null&&A(e,["values"],n);const s=g(i,["statistics"]);return s!=null&&A(e,["statistics"],H6(s)),e}function H6(i,t){const e={},n=g(i,["truncated"]);n!=null&&A(e,["truncated"],n);const s=g(i,["token_count"]);return s!=null&&A(e,["tokenCount"],s),e}function Ry(i,t){const e={},n=g(i,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>J8(a))),A(e,["parts"],r)}const s=g(i,["role"]);return s!=null&&A(e,["role"],s),e}function G6(i,t){const e={},n=g(i,["controlType"]);n!=null&&A(e,["controlType"],n);const s=g(i,["enableControlImageComputation"]);return s!=null&&A(e,["computeControl"],s),e}function z6(i,t){const e={};if(g(i,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(g(i,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(g(i,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function q6(i,t,e){const n={},s=g(i,["systemInstruction"]);t!==void 0&&s!=null&&A(t,["systemInstruction"],Dn(s));const r=g(i,["tools"]);if(t!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>Lk(h))),A(t,["tools"],u)}const a=g(i,["generationConfig"]);return t!==void 0&&a!=null&&A(t,["generationConfig"],k8(a)),n}function Y6(i,t,e){const n={},s=g(t,["model"]);s!=null&&A(n,["_url","model"],ne(i,s));const r=g(t,["contents"]);if(r!=null){let u=ys(r);Array.isArray(u)&&(u=u.map(h=>Ry(h))),A(n,["contents"],u)}const a=g(t,["config"]);return a!=null&&z6(a),n}function X6(i,t,e){const n={},s=g(t,["model"]);s!=null&&A(n,["_url","model"],ne(i,s));const r=g(t,["contents"]);if(r!=null){let u=ys(r);Array.isArray(u)&&(u=u.map(h=>h)),A(n,["contents"],u)}const a=g(t,["config"]);return a!=null&&q6(a,n),n}function $6(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const s=g(i,["totalTokens"]);s!=null&&A(e,["totalTokens"],s);const r=g(i,["cachedContentTokenCount"]);return r!=null&&A(e,["cachedContentTokenCount"],r),e}function K6(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const s=g(i,["totalTokens"]);return s!=null&&A(e,["totalTokens"],s),e}function W6(i,t,e){const n={},s=g(t,["model"]);return s!=null&&A(n,["_url","name"],ne(i,s)),n}function J6(i,t,e){const n={},s=g(t,["model"]);return s!=null&&A(n,["_url","name"],ne(i,s)),n}function Q6(i,t){const e={},n=g(i,["sdkHttpResponse"]);return n!=null&&A(e,["sdkHttpResponse"],n),e}function Z6(i,t){const e={},n=g(i,["sdkHttpResponse"]);return n!=null&&A(e,["sdkHttpResponse"],n),e}function j6(i,t,e){const n={},s=g(i,["outputGcsUri"]);t!==void 0&&s!=null&&A(t,["parameters","storageUri"],s);const r=g(i,["negativePrompt"]);t!==void 0&&r!=null&&A(t,["parameters","negativePrompt"],r);const a=g(i,["numberOfImages"]);t!==void 0&&a!=null&&A(t,["parameters","sampleCount"],a);const u=g(i,["aspectRatio"]);t!==void 0&&u!=null&&A(t,["parameters","aspectRatio"],u);const h=g(i,["guidanceScale"]);t!==void 0&&h!=null&&A(t,["parameters","guidanceScale"],h);const f=g(i,["seed"]);t!==void 0&&f!=null&&A(t,["parameters","seed"],f);const p=g(i,["safetyFilterLevel"]);t!==void 0&&p!=null&&A(t,["parameters","safetySetting"],p);const y=g(i,["personGeneration"]);t!==void 0&&y!=null&&A(t,["parameters","personGeneration"],y);const v=g(i,["includeSafetyAttributes"]);t!==void 0&&v!=null&&A(t,["parameters","includeSafetyAttributes"],v);const E=g(i,["includeRaiReason"]);t!==void 0&&E!=null&&A(t,["parameters","includeRaiReason"],E);const b=g(i,["language"]);t!==void 0&&b!=null&&A(t,["parameters","language"],b);const _=g(i,["outputMimeType"]);t!==void 0&&_!=null&&A(t,["parameters","outputOptions","mimeType"],_);const w=g(i,["outputCompressionQuality"]);t!==void 0&&w!=null&&A(t,["parameters","outputOptions","compressionQuality"],w);const x=g(i,["addWatermark"]);t!==void 0&&x!=null&&A(t,["parameters","addWatermark"],x);const N=g(i,["labels"]);t!==void 0&&N!=null&&A(t,["labels"],N);const I=g(i,["editMode"]);t!==void 0&&I!=null&&A(t,["parameters","editMode"],I);const L=g(i,["baseSteps"]);return t!==void 0&&L!=null&&A(t,["parameters","editConfig","baseSteps"],L),n}function t8(i,t,e){const n={},s=g(t,["model"]);s!=null&&A(n,["_url","model"],ne(i,s));const r=g(t,["prompt"]);r!=null&&A(n,["instances[0]","prompt"],r);const a=g(t,["referenceImages"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(f=>nY(f))),A(n,["instances[0]","referenceImages"],h)}const u=g(t,["config"]);return u!=null&&j6(u,n),n}function e8(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const s=g(i,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>sT(a))),A(e,["generatedImages"],r)}return e}function n8(i,t,e){const n={},s=g(i,["taskType"]);t!==void 0&&s!=null&&A(t,["requests[]","taskType"],s);const r=g(i,["title"]);t!==void 0&&r!=null&&A(t,["requests[]","title"],r);const a=g(i,["outputDimensionality"]);if(t!==void 0&&a!=null&&A(t,["requests[]","outputDimensionality"],a),g(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function i8(i,t,e){const n={};let s=g(e,["embeddingApiType"]);if(s===void 0&&(s="PREDICT"),s==="PREDICT"){const f=g(i,["taskType"]);t!==void 0&&f!=null&&A(t,["instances[]","task_type"],f)}else if(s==="EMBED_CONTENT"){const f=g(i,["taskType"]);t!==void 0&&f!=null&&A(t,["taskType"],f)}let r=g(e,["embeddingApiType"]);if(r===void 0&&(r="PREDICT"),r==="PREDICT"){const f=g(i,["title"]);t!==void 0&&f!=null&&A(t,["instances[]","title"],f)}else if(r==="EMBED_CONTENT"){const f=g(i,["title"]);t!==void 0&&f!=null&&A(t,["title"],f)}let a=g(e,["embeddingApiType"]);if(a===void 0&&(a="PREDICT"),a==="PREDICT"){const f=g(i,["outputDimensionality"]);t!==void 0&&f!=null&&A(t,["parameters","outputDimensionality"],f)}else if(a==="EMBED_CONTENT"){const f=g(i,["outputDimensionality"]);t!==void 0&&f!=null&&A(t,["outputDimensionality"],f)}let u=g(e,["embeddingApiType"]);if(u===void 0&&(u="PREDICT"),u==="PREDICT"){const f=g(i,["mimeType"]);t!==void 0&&f!=null&&A(t,["instances[]","mimeType"],f)}let h=g(e,["embeddingApiType"]);if(h===void 0&&(h="PREDICT"),h==="PREDICT"){const f=g(i,["autoTruncate"]);t!==void 0&&f!=null&&A(t,["parameters","autoTruncate"],f)}else if(h==="EMBED_CONTENT"){const f=g(i,["autoTruncate"]);t!==void 0&&f!=null&&A(t,["autoTruncate"],f)}return n}function s8(i,t,e){const n={},s=g(t,["model"]);s!=null&&A(n,["_url","model"],ne(i,s));const r=g(t,["contents"]);if(r!=null){let f=yw(i,r);Array.isArray(f)&&(f=f.map(p=>p)),A(n,["requests[]","content"],f)}const a=g(t,["content"]);a!=null&&Ry(Dn(a));const u=g(t,["config"]);u!=null&&n8(u,n);const h=g(t,["model"]);return h!==void 0&&A(n,["requests[]","model"],ne(i,h)),n}function o8(i,t,e){const n={},s=g(t,["model"]);s!=null&&A(n,["_url","model"],ne(i,s));let r=g(e,["embeddingApiType"]);if(r===void 0&&(r="PREDICT"),r==="PREDICT"){const h=g(t,["contents"]);if(h!=null){let f=yw(i,h);Array.isArray(f)&&(f=f.map(p=>p)),A(n,["instances[]","content"],f)}}let a=g(e,["embeddingApiType"]);if(a===void 0&&(a="PREDICT"),a==="EMBED_CONTENT"){const h=g(t,["content"]);h!=null&&A(n,["content"],Dn(h))}const u=g(t,["config"]);return u!=null&&i8(u,n,e),n}function r8(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const s=g(i,["embeddings"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),A(e,["embeddings"],a)}const r=g(i,["metadata"]);return r!=null&&A(e,["metadata"],r),e}function a8(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const s=g(i,["predictions[]","embeddings"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>V6(u))),A(e,["embeddings"],a)}const r=g(i,["metadata"]);if(r!=null&&A(e,["metadata"],r),t&&g(t,["embeddingApiType"])==="EMBED_CONTENT"){const a=g(i,["embedding"]),u=g(i,["usageMetadata"]),h=g(i,["truncated"]);if(a){const f={};u&&u.promptTokenCount&&(f.tokenCount=u.promptTokenCount),h&&(f.truncated=h),a.statistics=f,A(e,["embeddings"],[a])}}return e}function l8(i,t){const e={},n=g(i,["endpoint"]);n!=null&&A(e,["name"],n);const s=g(i,["deployedModelId"]);return s!=null&&A(e,["deployedModelId"],s),e}function u8(i,t){const e={};if(g(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(i,["fileUri"]);n!=null&&A(e,["fileUri"],n);const s=g(i,["mimeType"]);return s!=null&&A(e,["mimeType"],s),e}function c8(i,t){const e={},n=g(i,["id"]);n!=null&&A(e,["id"],n);const s=g(i,["args"]);s!=null&&A(e,["args"],s);const r=g(i,["name"]);if(r!=null&&A(e,["name"],r),g(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function d8(i,t){const e={},n=g(i,["allowedFunctionNames"]);n!=null&&A(e,["allowedFunctionNames"],n);const s=g(i,["mode"]);if(s!=null&&A(e,["mode"],s),g(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function h8(i,t){const e={},n=g(i,["description"]);n!=null&&A(e,["description"],n);const s=g(i,["name"]);s!=null&&A(e,["name"],s);const r=g(i,["parameters"]);r!=null&&A(e,["parameters"],r);const a=g(i,["parametersJsonSchema"]);a!=null&&A(e,["parametersJsonSchema"],a);const u=g(i,["response"]);u!=null&&A(e,["response"],u);const h=g(i,["responseJsonSchema"]);if(h!=null&&A(e,["responseJsonSchema"],h),g(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function f8(i,t,e,n){const s={},r=g(t,["systemInstruction"]);e!==void 0&&r!=null&&A(e,["systemInstruction"],Ry(Dn(r)));const a=g(t,["temperature"]);a!=null&&A(s,["temperature"],a);const u=g(t,["topP"]);u!=null&&A(s,["topP"],u);const h=g(t,["topK"]);h!=null&&A(s,["topK"],h);const f=g(t,["candidateCount"]);f!=null&&A(s,["candidateCount"],f);const p=g(t,["maxOutputTokens"]);p!=null&&A(s,["maxOutputTokens"],p);const y=g(t,["stopSequences"]);y!=null&&A(s,["stopSequences"],y);const v=g(t,["responseLogprobs"]);v!=null&&A(s,["responseLogprobs"],v);const E=g(t,["logprobs"]);E!=null&&A(s,["logprobs"],E);const b=g(t,["presencePenalty"]);b!=null&&A(s,["presencePenalty"],b);const _=g(t,["frequencyPenalty"]);_!=null&&A(s,["frequencyPenalty"],_);const w=g(t,["seed"]);w!=null&&A(s,["seed"],w);const x=g(t,["responseMimeType"]);x!=null&&A(s,["responseMimeType"],x);const N=g(t,["responseSchema"]);N!=null&&A(s,["responseSchema"],vw(N));const I=g(t,["responseJsonSchema"]);if(I!=null&&A(s,["responseJsonSchema"],I),g(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=g(t,["safetySettings"]);if(e!==void 0&&L!=null){let lt=L;Array.isArray(lt)&&(lt=lt.map(vt=>iY(vt))),A(e,["safetySettings"],lt)}const U=g(t,["tools"]);if(e!==void 0&&U!=null){let lt=Vf(U);Array.isArray(lt)&&(lt=lt.map(vt=>cY(Of(vt)))),A(e,["tools"],lt)}const k=g(t,["toolConfig"]);if(e!==void 0&&k!=null&&A(e,["toolConfig"],uY(k)),g(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const B=g(t,["cachedContent"]);e!==void 0&&B!=null&&A(e,["cachedContent"],Ea(i,B));const z=g(t,["responseModalities"]);z!=null&&A(s,["responseModalities"],z);const H=g(t,["mediaResolution"]);H!=null&&A(s,["mediaResolution"],H);const j=g(t,["speechConfig"]);if(j!=null&&A(s,["speechConfig"],Aw(j)),g(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const et=g(t,["thinkingConfig"]);et!=null&&A(s,["thinkingConfig"],et);const at=g(t,["imageConfig"]);at!=null&&A(s,["imageConfig"],V8(at));const ft=g(t,["enableEnhancedCivicAnswers"]);if(ft!=null&&A(s,["enableEnhancedCivicAnswers"],ft),g(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function p8(i,t,e,n){const s={},r=g(t,["systemInstruction"]);e!==void 0&&r!=null&&A(e,["systemInstruction"],Dn(r));const a=g(t,["temperature"]);a!=null&&A(s,["temperature"],a);const u=g(t,["topP"]);u!=null&&A(s,["topP"],u);const h=g(t,["topK"]);h!=null&&A(s,["topK"],h);const f=g(t,["candidateCount"]);f!=null&&A(s,["candidateCount"],f);const p=g(t,["maxOutputTokens"]);p!=null&&A(s,["maxOutputTokens"],p);const y=g(t,["stopSequences"]);y!=null&&A(s,["stopSequences"],y);const v=g(t,["responseLogprobs"]);v!=null&&A(s,["responseLogprobs"],v);const E=g(t,["logprobs"]);E!=null&&A(s,["logprobs"],E);const b=g(t,["presencePenalty"]);b!=null&&A(s,["presencePenalty"],b);const _=g(t,["frequencyPenalty"]);_!=null&&A(s,["frequencyPenalty"],_);const w=g(t,["seed"]);w!=null&&A(s,["seed"],w);const x=g(t,["responseMimeType"]);x!=null&&A(s,["responseMimeType"],x);const N=g(t,["responseSchema"]);N!=null&&A(s,["responseSchema"],vw(N));const I=g(t,["responseJsonSchema"]);I!=null&&A(s,["responseJsonSchema"],I);const L=g(t,["routingConfig"]);L!=null&&A(s,["routingConfig"],L);const U=g(t,["modelSelectionConfig"]);U!=null&&A(s,["modelConfig"],U);const k=g(t,["safetySettings"]);if(e!==void 0&&k!=null){let it=k;Array.isArray(it)&&(it=it.map(bt=>bt)),A(e,["safetySettings"],it)}const B=g(t,["tools"]);if(e!==void 0&&B!=null){let it=Vf(B);Array.isArray(it)&&(it=it.map(bt=>Lk(Of(bt)))),A(e,["tools"],it)}const z=g(t,["toolConfig"]);e!==void 0&&z!=null&&A(e,["toolConfig"],z);const H=g(t,["labels"]);e!==void 0&&H!=null&&A(e,["labels"],H);const j=g(t,["cachedContent"]);e!==void 0&&j!=null&&A(e,["cachedContent"],Ea(i,j));const et=g(t,["responseModalities"]);et!=null&&A(s,["responseModalities"],et);const at=g(t,["mediaResolution"]);at!=null&&A(s,["mediaResolution"],at);const ft=g(t,["speechConfig"]);ft!=null&&A(s,["speechConfig"],Aw(ft));const lt=g(t,["audioTimestamp"]);lt!=null&&A(s,["audioTimestamp"],lt);const vt=g(t,["thinkingConfig"]);vt!=null&&A(s,["thinkingConfig"],vt);const G=g(t,["imageConfig"]);if(G!=null&&A(s,["imageConfig"],H8(G)),g(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const $=g(t,["modelArmorConfig"]);return e!==void 0&&$!=null&&A(e,["modelArmorConfig"],$),s}function UN(i,t,e){const n={},s=g(t,["model"]);s!=null&&A(n,["_url","model"],ne(i,s));const r=g(t,["contents"]);if(r!=null){let u=ys(r);Array.isArray(u)&&(u=u.map(h=>Ry(h))),A(n,["contents"],u)}const a=g(t,["config"]);return a!=null&&A(n,["generationConfig"],f8(i,a,n)),n}function BN(i,t,e){const n={},s=g(t,["model"]);s!=null&&A(n,["_url","model"],ne(i,s));const r=g(t,["contents"]);if(r!=null){let u=ys(r);Array.isArray(u)&&(u=u.map(h=>h)),A(n,["contents"],u)}const a=g(t,["config"]);return a!=null&&A(n,["generationConfig"],p8(i,a,n)),n}function FN(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const s=g(i,["candidates"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(p=>U6(p))),A(e,["candidates"],f)}const r=g(i,["modelVersion"]);r!=null&&A(e,["modelVersion"],r);const a=g(i,["promptFeedback"]);a!=null&&A(e,["promptFeedback"],a);const u=g(i,["responseId"]);u!=null&&A(e,["responseId"],u);const h=g(i,["usageMetadata"]);return h!=null&&A(e,["usageMetadata"],h),e}function ON(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const s=g(i,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(y=>y)),A(e,["candidates"],p)}const r=g(i,["createTime"]);r!=null&&A(e,["createTime"],r);const a=g(i,["modelVersion"]);a!=null&&A(e,["modelVersion"],a);const u=g(i,["promptFeedback"]);u!=null&&A(e,["promptFeedback"],u);const h=g(i,["responseId"]);h!=null&&A(e,["responseId"],h);const f=g(i,["usageMetadata"]);return f!=null&&A(e,["usageMetadata"],f),e}function m8(i,t,e){const n={};if(g(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(i,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=g(i,["numberOfImages"]);t!==void 0&&s!=null&&A(t,["parameters","sampleCount"],s);const r=g(i,["aspectRatio"]);t!==void 0&&r!=null&&A(t,["parameters","aspectRatio"],r);const a=g(i,["guidanceScale"]);if(t!==void 0&&a!=null&&A(t,["parameters","guidanceScale"],a),g(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=g(i,["safetyFilterLevel"]);t!==void 0&&u!=null&&A(t,["parameters","safetySetting"],u);const h=g(i,["personGeneration"]);t!==void 0&&h!=null&&A(t,["parameters","personGeneration"],h);const f=g(i,["includeSafetyAttributes"]);t!==void 0&&f!=null&&A(t,["parameters","includeSafetyAttributes"],f);const p=g(i,["includeRaiReason"]);t!==void 0&&p!=null&&A(t,["parameters","includeRaiReason"],p);const y=g(i,["language"]);t!==void 0&&y!=null&&A(t,["parameters","language"],y);const v=g(i,["outputMimeType"]);t!==void 0&&v!=null&&A(t,["parameters","outputOptions","mimeType"],v);const E=g(i,["outputCompressionQuality"]);if(t!==void 0&&E!=null&&A(t,["parameters","outputOptions","compressionQuality"],E),g(i,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(g(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=g(i,["imageSize"]);if(t!==void 0&&b!=null&&A(t,["parameters","sampleImageSize"],b),g(i,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function g8(i,t,e){const n={},s=g(i,["outputGcsUri"]);t!==void 0&&s!=null&&A(t,["parameters","storageUri"],s);const r=g(i,["negativePrompt"]);t!==void 0&&r!=null&&A(t,["parameters","negativePrompt"],r);const a=g(i,["numberOfImages"]);t!==void 0&&a!=null&&A(t,["parameters","sampleCount"],a);const u=g(i,["aspectRatio"]);t!==void 0&&u!=null&&A(t,["parameters","aspectRatio"],u);const h=g(i,["guidanceScale"]);t!==void 0&&h!=null&&A(t,["parameters","guidanceScale"],h);const f=g(i,["seed"]);t!==void 0&&f!=null&&A(t,["parameters","seed"],f);const p=g(i,["safetyFilterLevel"]);t!==void 0&&p!=null&&A(t,["parameters","safetySetting"],p);const y=g(i,["personGeneration"]);t!==void 0&&y!=null&&A(t,["parameters","personGeneration"],y);const v=g(i,["includeSafetyAttributes"]);t!==void 0&&v!=null&&A(t,["parameters","includeSafetyAttributes"],v);const E=g(i,["includeRaiReason"]);t!==void 0&&E!=null&&A(t,["parameters","includeRaiReason"],E);const b=g(i,["language"]);t!==void 0&&b!=null&&A(t,["parameters","language"],b);const _=g(i,["outputMimeType"]);t!==void 0&&_!=null&&A(t,["parameters","outputOptions","mimeType"],_);const w=g(i,["outputCompressionQuality"]);t!==void 0&&w!=null&&A(t,["parameters","outputOptions","compressionQuality"],w);const x=g(i,["addWatermark"]);t!==void 0&&x!=null&&A(t,["parameters","addWatermark"],x);const N=g(i,["labels"]);t!==void 0&&N!=null&&A(t,["labels"],N);const I=g(i,["imageSize"]);t!==void 0&&I!=null&&A(t,["parameters","sampleImageSize"],I);const L=g(i,["enhancePrompt"]);return t!==void 0&&L!=null&&A(t,["parameters","enhancePrompt"],L),n}function y8(i,t,e){const n={},s=g(t,["model"]);s!=null&&A(n,["_url","model"],ne(i,s));const r=g(t,["prompt"]);r!=null&&A(n,["instances[0]","prompt"],r);const a=g(t,["config"]);return a!=null&&m8(a,n),n}function v8(i,t,e){const n={},s=g(t,["model"]);s!=null&&A(n,["_url","model"],ne(i,s));const r=g(t,["prompt"]);r!=null&&A(n,["instances[0]","prompt"],r);const a=g(t,["config"]);return a!=null&&g8(a,n),n}function A8(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const s=g(i,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>I8(u))),A(e,["generatedImages"],a)}const r=g(i,["positivePromptSafetyAttributes"]);return r!=null&&A(e,["positivePromptSafetyAttributes"],Nk(r)),e}function T8(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const s=g(i,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>sT(u))),A(e,["generatedImages"],a)}const r=g(i,["positivePromptSafetyAttributes"]);return r!=null&&A(e,["positivePromptSafetyAttributes"],Pk(r)),e}function S8(i,t,e){const n={},s=g(i,["numberOfVideos"]);if(t!==void 0&&s!=null&&A(t,["parameters","sampleCount"],s),g(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(i,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=g(i,["durationSeconds"]);if(t!==void 0&&r!=null&&A(t,["parameters","durationSeconds"],r),g(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=g(i,["aspectRatio"]);t!==void 0&&a!=null&&A(t,["parameters","aspectRatio"],a);const u=g(i,["resolution"]);t!==void 0&&u!=null&&A(t,["parameters","resolution"],u);const h=g(i,["personGeneration"]);if(t!==void 0&&h!=null&&A(t,["parameters","personGeneration"],h),g(i,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=g(i,["negativePrompt"]);t!==void 0&&f!=null&&A(t,["parameters","negativePrompt"],f);const p=g(i,["enhancePrompt"]);if(t!==void 0&&p!=null&&A(t,["parameters","enhancePrompt"],p),g(i,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const y=g(i,["lastFrame"]);t!==void 0&&y!=null&&A(t,["instances[0]","lastFrame"],oT(y));const v=g(i,["referenceImages"]);if(t!==void 0&&v!=null){let E=v;Array.isArray(E)&&(E=E.map(b=>bY(b))),A(t,["instances[0]","referenceImages"],E)}if(g(i,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(g(i,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function E8(i,t,e){const n={},s=g(i,["numberOfVideos"]);t!==void 0&&s!=null&&A(t,["parameters","sampleCount"],s);const r=g(i,["outputGcsUri"]);t!==void 0&&r!=null&&A(t,["parameters","storageUri"],r);const a=g(i,["fps"]);t!==void 0&&a!=null&&A(t,["parameters","fps"],a);const u=g(i,["durationSeconds"]);t!==void 0&&u!=null&&A(t,["parameters","durationSeconds"],u);const h=g(i,["seed"]);t!==void 0&&h!=null&&A(t,["parameters","seed"],h);const f=g(i,["aspectRatio"]);t!==void 0&&f!=null&&A(t,["parameters","aspectRatio"],f);const p=g(i,["resolution"]);t!==void 0&&p!=null&&A(t,["parameters","resolution"],p);const y=g(i,["personGeneration"]);t!==void 0&&y!=null&&A(t,["parameters","personGeneration"],y);const v=g(i,["pubsubTopic"]);t!==void 0&&v!=null&&A(t,["parameters","pubsubTopic"],v);const E=g(i,["negativePrompt"]);t!==void 0&&E!=null&&A(t,["parameters","negativePrompt"],E);const b=g(i,["enhancePrompt"]);t!==void 0&&b!=null&&A(t,["parameters","enhancePrompt"],b);const _=g(i,["generateAudio"]);t!==void 0&&_!=null&&A(t,["parameters","generateAudio"],_);const w=g(i,["lastFrame"]);t!==void 0&&w!=null&&A(t,["instances[0]","lastFrame"],Co(w));const x=g(i,["referenceImages"]);if(t!==void 0&&x!=null){let L=x;Array.isArray(L)&&(L=L.map(U=>CY(U))),A(t,["instances[0]","referenceImages"],L)}const N=g(i,["mask"]);t!==void 0&&N!=null&&A(t,["instances[0]","mask"],EY(N));const I=g(i,["compressionQuality"]);return t!==void 0&&I!=null&&A(t,["parameters","compressionQuality"],I),n}function b8(i,t){const e={},n=g(i,["name"]);n!=null&&A(e,["name"],n);const s=g(i,["metadata"]);s!=null&&A(e,["metadata"],s);const r=g(i,["done"]);r!=null&&A(e,["done"],r);const a=g(i,["error"]);a!=null&&A(e,["error"],a);const u=g(i,["response","generateVideoResponse"]);return u!=null&&A(e,["response"],x8(u)),e}function C8(i,t){const e={},n=g(i,["name"]);n!=null&&A(e,["name"],n);const s=g(i,["metadata"]);s!=null&&A(e,["metadata"],s);const r=g(i,["done"]);r!=null&&A(e,["done"],r);const a=g(i,["error"]);a!=null&&A(e,["error"],a);const u=g(i,["response"]);return u!=null&&A(e,["response"],M8(u)),e}function _8(i,t,e){const n={},s=g(t,["model"]);s!=null&&A(n,["_url","model"],ne(i,s));const r=g(t,["prompt"]);r!=null&&A(n,["instances[0]","prompt"],r);const a=g(t,["image"]);a!=null&&A(n,["instances[0]","image"],oT(a));const u=g(t,["video"]);u!=null&&A(n,["instances[0]","video"],kk(u));const h=g(t,["source"]);h!=null&&R8(h,n);const f=g(t,["config"]);return f!=null&&S8(f,n),n}function w8(i,t,e){const n={},s=g(t,["model"]);s!=null&&A(n,["_url","model"],ne(i,s));const r=g(t,["prompt"]);r!=null&&A(n,["instances[0]","prompt"],r);const a=g(t,["image"]);a!=null&&A(n,["instances[0]","image"],Co(a));const u=g(t,["video"]);u!=null&&A(n,["instances[0]","video"],Uk(u));const h=g(t,["source"]);h!=null&&D8(h,n);const f=g(t,["config"]);return f!=null&&E8(f,n),n}function x8(i,t){const e={},n=g(i,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>P8(u))),A(e,["generatedVideos"],a)}const s=g(i,["raiMediaFilteredCount"]);s!=null&&A(e,["raiMediaFilteredCount"],s);const r=g(i,["raiMediaFilteredReasons"]);return r!=null&&A(e,["raiMediaFilteredReasons"],r),e}function M8(i,t){const e={},n=g(i,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>L8(u))),A(e,["generatedVideos"],a)}const s=g(i,["raiMediaFilteredCount"]);s!=null&&A(e,["raiMediaFilteredCount"],s);const r=g(i,["raiMediaFilteredReasons"]);return r!=null&&A(e,["raiMediaFilteredReasons"],r),e}function R8(i,t,e){const n={},s=g(i,["prompt"]);t!==void 0&&s!=null&&A(t,["instances[0]","prompt"],s);const r=g(i,["image"]);t!==void 0&&r!=null&&A(t,["instances[0]","image"],oT(r));const a=g(i,["video"]);return t!==void 0&&a!=null&&A(t,["instances[0]","video"],kk(a)),n}function D8(i,t,e){const n={},s=g(i,["prompt"]);t!==void 0&&s!=null&&A(t,["instances[0]","prompt"],s);const r=g(i,["image"]);t!==void 0&&r!=null&&A(t,["instances[0]","image"],Co(r));const a=g(i,["video"]);return t!==void 0&&a!=null&&A(t,["instances[0]","video"],Uk(a)),n}function I8(i,t){const e={},n=g(i,["_self"]);n!=null&&A(e,["image"],G8(n));const s=g(i,["raiFilteredReason"]);s!=null&&A(e,["raiFilteredReason"],s);const r=g(i,["_self"]);return r!=null&&A(e,["safetyAttributes"],Nk(r)),e}function sT(i,t){const e={},n=g(i,["_self"]);n!=null&&A(e,["image"],Ik(n));const s=g(i,["raiFilteredReason"]);s!=null&&A(e,["raiFilteredReason"],s);const r=g(i,["_self"]);r!=null&&A(e,["safetyAttributes"],Pk(r));const a=g(i,["prompt"]);return a!=null&&A(e,["enhancedPrompt"],a),e}function N8(i,t){const e={},n=g(i,["_self"]);n!=null&&A(e,["mask"],Ik(n));const s=g(i,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),A(e,["labels"],r)}return e}function P8(i,t){const e={},n=g(i,["video"]);return n!=null&&A(e,["video"],TY(n)),e}function L8(i,t){const e={},n=g(i,["_self"]);return n!=null&&A(e,["video"],SY(n)),e}function k8(i,t){const e={},n=g(i,["modelSelectionConfig"]);n!=null&&A(e,["modelConfig"],n);const s=g(i,["responseJsonSchema"]);s!=null&&A(e,["responseJsonSchema"],s);const r=g(i,["audioTimestamp"]);r!=null&&A(e,["audioTimestamp"],r);const a=g(i,["candidateCount"]);a!=null&&A(e,["candidateCount"],a);const u=g(i,["enableAffectiveDialog"]);u!=null&&A(e,["enableAffectiveDialog"],u);const h=g(i,["frequencyPenalty"]);h!=null&&A(e,["frequencyPenalty"],h);const f=g(i,["logprobs"]);f!=null&&A(e,["logprobs"],f);const p=g(i,["maxOutputTokens"]);p!=null&&A(e,["maxOutputTokens"],p);const y=g(i,["mediaResolution"]);y!=null&&A(e,["mediaResolution"],y);const v=g(i,["presencePenalty"]);v!=null&&A(e,["presencePenalty"],v);const E=g(i,["responseLogprobs"]);E!=null&&A(e,["responseLogprobs"],E);const b=g(i,["responseMimeType"]);b!=null&&A(e,["responseMimeType"],b);const _=g(i,["responseModalities"]);_!=null&&A(e,["responseModalities"],_);const w=g(i,["responseSchema"]);w!=null&&A(e,["responseSchema"],w);const x=g(i,["routingConfig"]);x!=null&&A(e,["routingConfig"],x);const N=g(i,["seed"]);N!=null&&A(e,["seed"],N);const I=g(i,["speechConfig"]);I!=null&&A(e,["speechConfig"],I);const L=g(i,["stopSequences"]);L!=null&&A(e,["stopSequences"],L);const U=g(i,["temperature"]);U!=null&&A(e,["temperature"],U);const k=g(i,["thinkingConfig"]);k!=null&&A(e,["thinkingConfig"],k);const B=g(i,["topK"]);B!=null&&A(e,["topK"],B);const z=g(i,["topP"]);if(z!=null&&A(e,["topP"],z),g(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function U8(i,t,e){const n={},s=g(t,["model"]);return s!=null&&A(n,["_url","name"],ne(i,s)),n}function B8(i,t,e){const n={},s=g(t,["model"]);return s!=null&&A(n,["_url","name"],ne(i,s)),n}function F8(i,t){const e={};if(g(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(i,["enableWidget"]);return n!=null&&A(e,["enableWidget"],n),e}function O8(i,t){const e={};if(g(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(i,["timeRangeFilter"]);return n!=null&&A(e,["timeRangeFilter"],n),e}function V8(i,t){const e={},n=g(i,["aspectRatio"]);n!=null&&A(e,["aspectRatio"],n);const s=g(i,["imageSize"]);if(s!=null&&A(e,["imageSize"],s),g(i,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(g(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(g(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function H8(i,t){const e={},n=g(i,["aspectRatio"]);n!=null&&A(e,["aspectRatio"],n);const s=g(i,["imageSize"]);s!=null&&A(e,["imageSize"],s);const r=g(i,["personGeneration"]);r!=null&&A(e,["personGeneration"],r);const a=g(i,["outputMimeType"]);a!=null&&A(e,["imageOutputOptions","mimeType"],a);const u=g(i,["outputCompressionQuality"]);return u!=null&&A(e,["imageOutputOptions","compressionQuality"],u),e}function G8(i,t){const e={},n=g(i,["bytesBase64Encoded"]);n!=null&&A(e,["imageBytes"],jl(n));const s=g(i,["mimeType"]);return s!=null&&A(e,["mimeType"],s),e}function Ik(i,t){const e={},n=g(i,["gcsUri"]);n!=null&&A(e,["gcsUri"],n);const s=g(i,["bytesBase64Encoded"]);s!=null&&A(e,["imageBytes"],jl(s));const r=g(i,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function oT(i,t){const e={};if(g(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=g(i,["imageBytes"]);n!=null&&A(e,["bytesBase64Encoded"],jl(n));const s=g(i,["mimeType"]);return s!=null&&A(e,["mimeType"],s),e}function Co(i,t){const e={},n=g(i,["gcsUri"]);n!=null&&A(e,["gcsUri"],n);const s=g(i,["imageBytes"]);s!=null&&A(e,["bytesBase64Encoded"],jl(s));const r=g(i,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function z8(i,t,e,n){const s={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&A(e,["_query","pageSize"],r);const a=g(t,["pageToken"]);e!==void 0&&a!=null&&A(e,["_query","pageToken"],a);const u=g(t,["filter"]);e!==void 0&&u!=null&&A(e,["_query","filter"],u);const h=g(t,["queryBase"]);return e!==void 0&&h!=null&&A(e,["_url","models_url"],Ck(i,h)),s}function q8(i,t,e,n){const s={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&A(e,["_query","pageSize"],r);const a=g(t,["pageToken"]);e!==void 0&&a!=null&&A(e,["_query","pageToken"],a);const u=g(t,["filter"]);e!==void 0&&u!=null&&A(e,["_query","filter"],u);const h=g(t,["queryBase"]);return e!==void 0&&h!=null&&A(e,["_url","models_url"],Ck(i,h)),s}function Y8(i,t,e){const n={},s=g(t,["config"]);return s!=null&&z8(i,s,n),n}function X8(i,t,e){const n={},s=g(t,["config"]);return s!=null&&q8(i,s,n),n}function $8(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const s=g(i,["nextPageToken"]);s!=null&&A(e,["nextPageToken"],s);const r=g(i,["_self"]);if(r!=null){let a=_k(r);Array.isArray(a)&&(a=a.map(u=>Qb(u))),A(e,["models"],a)}return e}function K8(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const s=g(i,["nextPageToken"]);s!=null&&A(e,["nextPageToken"],s);const r=g(i,["_self"]);if(r!=null){let a=_k(r);Array.isArray(a)&&(a=a.map(u=>Zb(u))),A(e,["models"],a)}return e}function W8(i,t){const e={},n=g(i,["maskMode"]);n!=null&&A(e,["maskMode"],n);const s=g(i,["segmentationClasses"]);s!=null&&A(e,["maskClasses"],s);const r=g(i,["maskDilation"]);return r!=null&&A(e,["dilation"],r),e}function Qb(i,t){const e={},n=g(i,["name"]);n!=null&&A(e,["name"],n);const s=g(i,["displayName"]);s!=null&&A(e,["displayName"],s);const r=g(i,["description"]);r!=null&&A(e,["description"],r);const a=g(i,["version"]);a!=null&&A(e,["version"],a);const u=g(i,["_self"]);u!=null&&A(e,["tunedModelInfo"],dY(u));const h=g(i,["inputTokenLimit"]);h!=null&&A(e,["inputTokenLimit"],h);const f=g(i,["outputTokenLimit"]);f!=null&&A(e,["outputTokenLimit"],f);const p=g(i,["supportedGenerationMethods"]);p!=null&&A(e,["supportedActions"],p);const y=g(i,["temperature"]);y!=null&&A(e,["temperature"],y);const v=g(i,["maxTemperature"]);v!=null&&A(e,["maxTemperature"],v);const E=g(i,["topP"]);E!=null&&A(e,["topP"],E);const b=g(i,["topK"]);b!=null&&A(e,["topK"],b);const _=g(i,["thinking"]);return _!=null&&A(e,["thinking"],_),e}function Zb(i,t){const e={},n=g(i,["name"]);n!=null&&A(e,["name"],n);const s=g(i,["displayName"]);s!=null&&A(e,["displayName"],s);const r=g(i,["description"]);r!=null&&A(e,["description"],r);const a=g(i,["versionId"]);a!=null&&A(e,["version"],a);const u=g(i,["deployedModels"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(E=>l8(E))),A(e,["endpoints"],v)}const h=g(i,["labels"]);h!=null&&A(e,["labels"],h);const f=g(i,["_self"]);f!=null&&A(e,["tunedModelInfo"],hY(f));const p=g(i,["defaultCheckpointId"]);p!=null&&A(e,["defaultCheckpointId"],p);const y=g(i,["checkpoints"]);if(y!=null){let v=y;Array.isArray(v)&&(v=v.map(E=>E)),A(e,["checkpoints"],v)}return e}function J8(i,t){const e={},n=g(i,["mediaResolution"]);n!=null&&A(e,["mediaResolution"],n);const s=g(i,["codeExecutionResult"]);s!=null&&A(e,["codeExecutionResult"],s);const r=g(i,["executableCode"]);r!=null&&A(e,["executableCode"],r);const a=g(i,["fileData"]);a!=null&&A(e,["fileData"],u8(a));const u=g(i,["functionCall"]);u!=null&&A(e,["functionCall"],c8(u));const h=g(i,["functionResponse"]);h!=null&&A(e,["functionResponse"],h);const f=g(i,["inlineData"]);f!=null&&A(e,["inlineData"],k6(f));const p=g(i,["text"]);p!=null&&A(e,["text"],p);const y=g(i,["thought"]);y!=null&&A(e,["thought"],y);const v=g(i,["thoughtSignature"]);v!=null&&A(e,["thoughtSignature"],v);const E=g(i,["videoMetadata"]);return E!=null&&A(e,["videoMetadata"],E),e}function Q8(i,t){const e={},n=g(i,["productImage"]);return n!=null&&A(e,["image"],Co(n)),e}function Z8(i,t,e){const n={},s=g(i,["numberOfImages"]);t!==void 0&&s!=null&&A(t,["parameters","sampleCount"],s);const r=g(i,["baseSteps"]);t!==void 0&&r!=null&&A(t,["parameters","baseSteps"],r);const a=g(i,["outputGcsUri"]);t!==void 0&&a!=null&&A(t,["parameters","storageUri"],a);const u=g(i,["seed"]);t!==void 0&&u!=null&&A(t,["parameters","seed"],u);const h=g(i,["safetyFilterLevel"]);t!==void 0&&h!=null&&A(t,["parameters","safetySetting"],h);const f=g(i,["personGeneration"]);t!==void 0&&f!=null&&A(t,["parameters","personGeneration"],f);const p=g(i,["addWatermark"]);t!==void 0&&p!=null&&A(t,["parameters","addWatermark"],p);const y=g(i,["outputMimeType"]);t!==void 0&&y!=null&&A(t,["parameters","outputOptions","mimeType"],y);const v=g(i,["outputCompressionQuality"]);t!==void 0&&v!=null&&A(t,["parameters","outputOptions","compressionQuality"],v);const E=g(i,["enhancePrompt"]);t!==void 0&&E!=null&&A(t,["parameters","enhancePrompt"],E);const b=g(i,["labels"]);return t!==void 0&&b!=null&&A(t,["labels"],b),n}function j8(i,t,e){const n={},s=g(t,["model"]);s!=null&&A(n,["_url","model"],ne(i,s));const r=g(t,["source"]);r!=null&&eY(r,n);const a=g(t,["config"]);return a!=null&&Z8(a,n),n}function tY(i,t){const e={},n=g(i,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>sT(r))),A(e,["generatedImages"],s)}return e}function eY(i,t,e){const n={},s=g(i,["prompt"]);t!==void 0&&s!=null&&A(t,["instances[0]","prompt"],s);const r=g(i,["personImage"]);t!==void 0&&r!=null&&A(t,["instances[0]","personImage","image"],Co(r));const a=g(i,["productImages"]);if(t!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>Q8(h))),A(t,["instances[0]","productImages"],u)}return n}function nY(i,t){const e={},n=g(i,["referenceImage"]);n!=null&&A(e,["referenceImage"],Co(n));const s=g(i,["referenceId"]);s!=null&&A(e,["referenceId"],s);const r=g(i,["referenceType"]);r!=null&&A(e,["referenceType"],r);const a=g(i,["maskImageConfig"]);a!=null&&A(e,["maskImageConfig"],W8(a));const u=g(i,["controlImageConfig"]);u!=null&&A(e,["controlImageConfig"],G6(u));const h=g(i,["styleImageConfig"]);h!=null&&A(e,["styleImageConfig"],h);const f=g(i,["subjectImageConfig"]);return f!=null&&A(e,["subjectImageConfig"],f),e}function Nk(i,t){const e={},n=g(i,["safetyAttributes","categories"]);n!=null&&A(e,["categories"],n);const s=g(i,["safetyAttributes","scores"]);s!=null&&A(e,["scores"],s);const r=g(i,["contentType"]);return r!=null&&A(e,["contentType"],r),e}function Pk(i,t){const e={},n=g(i,["safetyAttributes","categories"]);n!=null&&A(e,["categories"],n);const s=g(i,["safetyAttributes","scores"]);s!=null&&A(e,["scores"],s);const r=g(i,["contentType"]);return r!=null&&A(e,["contentType"],r),e}function iY(i,t){const e={},n=g(i,["category"]);if(n!=null&&A(e,["category"],n),g(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=g(i,["threshold"]);return s!=null&&A(e,["threshold"],s),e}function sY(i,t){const e={},n=g(i,["image"]);return n!=null&&A(e,["image"],Co(n)),e}function oY(i,t,e){const n={},s=g(i,["mode"]);t!==void 0&&s!=null&&A(t,["parameters","mode"],s);const r=g(i,["maxPredictions"]);t!==void 0&&r!=null&&A(t,["parameters","maxPredictions"],r);const a=g(i,["confidenceThreshold"]);t!==void 0&&a!=null&&A(t,["parameters","confidenceThreshold"],a);const u=g(i,["maskDilation"]);t!==void 0&&u!=null&&A(t,["parameters","maskDilation"],u);const h=g(i,["binaryColorThreshold"]);t!==void 0&&h!=null&&A(t,["parameters","binaryColorThreshold"],h);const f=g(i,["labels"]);return t!==void 0&&f!=null&&A(t,["labels"],f),n}function rY(i,t,e){const n={},s=g(t,["model"]);s!=null&&A(n,["_url","model"],ne(i,s));const r=g(t,["source"]);r!=null&&lY(r,n);const a=g(t,["config"]);return a!=null&&oY(a,n),n}function aY(i,t){const e={},n=g(i,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>N8(r))),A(e,["generatedMasks"],s)}return e}function lY(i,t,e){const n={},s=g(i,["prompt"]);t!==void 0&&s!=null&&A(t,["instances[0]","prompt"],s);const r=g(i,["image"]);t!==void 0&&r!=null&&A(t,["instances[0]","image"],Co(r));const a=g(i,["scribbleImage"]);return t!==void 0&&a!=null&&A(t,["instances[0]","scribble"],sY(a)),n}function uY(i,t){const e={},n=g(i,["retrievalConfig"]);n!=null&&A(e,["retrievalConfig"],n);const s=g(i,["functionCallingConfig"]);return s!=null&&A(e,["functionCallingConfig"],d8(s)),e}function cY(i,t){const e={};if(g(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=g(i,["computerUse"]);n!=null&&A(e,["computerUse"],n);const s=g(i,["fileSearch"]);s!=null&&A(e,["fileSearch"],s);const r=g(i,["codeExecution"]);if(r!=null&&A(e,["codeExecution"],r),g(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(i,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(v=>v)),A(e,["functionDeclarations"],y)}const u=g(i,["googleMaps"]);u!=null&&A(e,["googleMaps"],F8(u));const h=g(i,["googleSearch"]);h!=null&&A(e,["googleSearch"],O8(h));const f=g(i,["googleSearchRetrieval"]);f!=null&&A(e,["googleSearchRetrieval"],f);const p=g(i,["urlContext"]);return p!=null&&A(e,["urlContext"],p),e}function Lk(i,t){const e={},n=g(i,["retrieval"]);n!=null&&A(e,["retrieval"],n);const s=g(i,["computerUse"]);if(s!=null&&A(e,["computerUse"],s),g(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=g(i,["codeExecution"]);r!=null&&A(e,["codeExecution"],r);const a=g(i,["enterpriseWebSearch"]);a!=null&&A(e,["enterpriseWebSearch"],a);const u=g(i,["functionDeclarations"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(E=>h8(E))),A(e,["functionDeclarations"],v)}const h=g(i,["googleMaps"]);h!=null&&A(e,["googleMaps"],h);const f=g(i,["googleSearch"]);f!=null&&A(e,["googleSearch"],f);const p=g(i,["googleSearchRetrieval"]);p!=null&&A(e,["googleSearchRetrieval"],p);const y=g(i,["urlContext"]);return y!=null&&A(e,["urlContext"],y),e}function dY(i,t){const e={},n=g(i,["baseModel"]);n!=null&&A(e,["baseModel"],n);const s=g(i,["createTime"]);s!=null&&A(e,["createTime"],s);const r=g(i,["updateTime"]);return r!=null&&A(e,["updateTime"],r),e}function hY(i,t){const e={},n=g(i,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&A(e,["baseModel"],n);const s=g(i,["createTime"]);s!=null&&A(e,["createTime"],s);const r=g(i,["updateTime"]);return r!=null&&A(e,["updateTime"],r),e}function fY(i,t,e){const n={},s=g(i,["displayName"]);t!==void 0&&s!=null&&A(t,["displayName"],s);const r=g(i,["description"]);t!==void 0&&r!=null&&A(t,["description"],r);const a=g(i,["defaultCheckpointId"]);return t!==void 0&&a!=null&&A(t,["defaultCheckpointId"],a),n}function pY(i,t,e){const n={},s=g(i,["displayName"]);t!==void 0&&s!=null&&A(t,["displayName"],s);const r=g(i,["description"]);t!==void 0&&r!=null&&A(t,["description"],r);const a=g(i,["defaultCheckpointId"]);return t!==void 0&&a!=null&&A(t,["defaultCheckpointId"],a),n}function mY(i,t,e){const n={},s=g(t,["model"]);s!=null&&A(n,["_url","name"],ne(i,s));const r=g(t,["config"]);return r!=null&&fY(r,n),n}function gY(i,t,e){const n={},s=g(t,["model"]);s!=null&&A(n,["_url","model"],ne(i,s));const r=g(t,["config"]);return r!=null&&pY(r,n),n}function yY(i,t,e){const n={},s=g(i,["outputGcsUri"]);t!==void 0&&s!=null&&A(t,["parameters","storageUri"],s);const r=g(i,["safetyFilterLevel"]);t!==void 0&&r!=null&&A(t,["parameters","safetySetting"],r);const a=g(i,["personGeneration"]);t!==void 0&&a!=null&&A(t,["parameters","personGeneration"],a);const u=g(i,["includeRaiReason"]);t!==void 0&&u!=null&&A(t,["parameters","includeRaiReason"],u);const h=g(i,["outputMimeType"]);t!==void 0&&h!=null&&A(t,["parameters","outputOptions","mimeType"],h);const f=g(i,["outputCompressionQuality"]);t!==void 0&&f!=null&&A(t,["parameters","outputOptions","compressionQuality"],f);const p=g(i,["enhanceInputImage"]);t!==void 0&&p!=null&&A(t,["parameters","upscaleConfig","enhanceInputImage"],p);const y=g(i,["imagePreservationFactor"]);t!==void 0&&y!=null&&A(t,["parameters","upscaleConfig","imagePreservationFactor"],y);const v=g(i,["labels"]);t!==void 0&&v!=null&&A(t,["labels"],v);const E=g(i,["numberOfImages"]);t!==void 0&&E!=null&&A(t,["parameters","sampleCount"],E);const b=g(i,["mode"]);return t!==void 0&&b!=null&&A(t,["parameters","mode"],b),n}function vY(i,t,e){const n={},s=g(t,["model"]);s!=null&&A(n,["_url","model"],ne(i,s));const r=g(t,["image"]);r!=null&&A(n,["instances[0]","image"],Co(r));const a=g(t,["upscaleFactor"]);a!=null&&A(n,["parameters","upscaleConfig","upscaleFactor"],a);const u=g(t,["config"]);return u!=null&&yY(u,n),n}function AY(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const s=g(i,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>sT(a))),A(e,["generatedImages"],r)}return e}function TY(i,t){const e={},n=g(i,["uri"]);n!=null&&A(e,["uri"],n);const s=g(i,["encodedVideo"]);s!=null&&A(e,["videoBytes"],jl(s));const r=g(i,["encoding"]);return r!=null&&A(e,["mimeType"],r),e}function SY(i,t){const e={},n=g(i,["gcsUri"]);n!=null&&A(e,["uri"],n);const s=g(i,["bytesBase64Encoded"]);s!=null&&A(e,["videoBytes"],jl(s));const r=g(i,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function EY(i,t){const e={},n=g(i,["image"]);n!=null&&A(e,["_self"],Co(n));const s=g(i,["maskMode"]);return s!=null&&A(e,["maskMode"],s),e}function bY(i,t){const e={},n=g(i,["image"]);n!=null&&A(e,["image"],oT(n));const s=g(i,["referenceType"]);return s!=null&&A(e,["referenceType"],s),e}function CY(i,t){const e={},n=g(i,["image"]);n!=null&&A(e,["image"],Co(n));const s=g(i,["referenceType"]);return s!=null&&A(e,["referenceType"],s),e}function kk(i,t){const e={},n=g(i,["uri"]);n!=null&&A(e,["uri"],n);const s=g(i,["videoBytes"]);s!=null&&A(e,["encodedVideo"],jl(s));const r=g(i,["mimeType"]);return r!=null&&A(e,["encoding"],r),e}function Uk(i,t){const e={},n=g(i,["uri"]);n!=null&&A(e,["gcsUri"],n);const s=g(i,["videoBytes"]);s!=null&&A(e,["bytesBase64Encoded"],jl(s));const r=g(i,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _Y(i,t){const e={},n=g(i,["displayName"]);return t!==void 0&&n!=null&&A(t,["displayName"],n),e}function wY(i){const t={},e=g(i,["config"]);return e!=null&&_Y(e,t),t}function xY(i,t){const e={},n=g(i,["force"]);return t!==void 0&&n!=null&&A(t,["_query","force"],n),e}function MY(i){const t={},e=g(i,["name"]);e!=null&&A(t,["_url","name"],e);const n=g(i,["config"]);return n!=null&&xY(n,t),t}function RY(i){const t={},e=g(i,["name"]);return e!=null&&A(t,["_url","name"],e),t}function DY(i,t){const e={},n=g(i,["customMetadata"]);if(t!==void 0&&n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>a)),A(t,["customMetadata"],r)}const s=g(i,["chunkingConfig"]);return t!==void 0&&s!=null&&A(t,["chunkingConfig"],s),e}function IY(i){const t={},e=g(i,["name"]);e!=null&&A(t,["name"],e);const n=g(i,["metadata"]);n!=null&&A(t,["metadata"],n);const s=g(i,["done"]);s!=null&&A(t,["done"],s);const r=g(i,["error"]);r!=null&&A(t,["error"],r);const a=g(i,["response"]);return a!=null&&A(t,["response"],PY(a)),t}function NY(i){const t={},e=g(i,["fileSearchStoreName"]);e!=null&&A(t,["_url","file_search_store_name"],e);const n=g(i,["fileName"]);n!=null&&A(t,["fileName"],n);const s=g(i,["config"]);return s!=null&&DY(s,t),t}function PY(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=g(i,["parent"]);n!=null&&A(t,["parent"],n);const s=g(i,["documentName"]);return s!=null&&A(t,["documentName"],s),t}function LY(i,t){const e={},n=g(i,["pageSize"]);t!==void 0&&n!=null&&A(t,["_query","pageSize"],n);const s=g(i,["pageToken"]);return t!==void 0&&s!=null&&A(t,["_query","pageToken"],s),e}function kY(i){const t={},e=g(i,["config"]);return e!=null&&LY(e,t),t}function UY(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=g(i,["nextPageToken"]);n!=null&&A(t,["nextPageToken"],n);const s=g(i,["fileSearchStores"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),A(t,["fileSearchStores"],r)}return t}function Bk(i,t){const e={},n=g(i,["mimeType"]);t!==void 0&&n!=null&&A(t,["mimeType"],n);const s=g(i,["displayName"]);t!==void 0&&s!=null&&A(t,["displayName"],s);const r=g(i,["customMetadata"]);if(t!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>h)),A(t,["customMetadata"],u)}const a=g(i,["chunkingConfig"]);return t!==void 0&&a!=null&&A(t,["chunkingConfig"],a),e}function BY(i){const t={},e=g(i,["fileSearchStoreName"]);e!=null&&A(t,["_url","file_search_store_name"],e);const n=g(i,["config"]);return n!=null&&Bk(n,t),t}function FY(i){const t={},e=g(i,["sdkHttpResponse"]);return e!=null&&A(t,["sdkHttpResponse"],e),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OY="Content-Type",VY="X-Server-Timeout",HY="User-Agent",jb="x-goog-api-client",GY="1.42.0",zY=`google-genai-sdk/${GY}`,qY="v1beta1",YY="v1beta",XY=5,$Y=[408,429,500,502,503,504];class KY{constructor(t){var e,n,s;this.clientOptions=Object.assign({},t),this.customBaseUrl=(e=t.httpOptions)===null||e===void 0?void 0:e.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const r={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const u=t.project&&t.location||!!t.apiKey;this.customBaseUrl&&!u?(r.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?r.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(r.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:qY}else{if(!this.clientOptions.apiKey)throw new Cm({message:"API key must be set when using the Gemini API.",status:403});r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:YY,r.baseUrl="https://generativelanguage.googleapis.com/"}r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&n.push(t.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),e=new URL(t);return e.protocol=e.protocol=="http:"?"ws":"wss",e.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,e,n){const s=[this.getRequestUrlInternal(e)];return n&&s.push(this.getBaseResourcePath()),t!==""&&s.push(t),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(t,e){return!(e.baseUrl&&e.baseUrlResourceScope===$b.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const n=this.shouldPrependVertexProjectPath(t,e),s=this.constructUrl(t.path,e,n);if(t.queryParams)for(const[a,u]of Object.entries(t.queryParams))s.searchParams.append(a,String(u));let r={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=t.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,e,s.toString(),t.abortSignal),this.unaryApiCall(s,r,t.httpMethod)}patchHttpOptions(t,e){const n=JSON.parse(JSON.stringify(t));for(const[s,r]of Object.entries(e))typeof r=="object"?n[s]=Object.assign(Object.assign({},n[s]),r):r!==void 0&&(n[s]=r);return n}async requestStream(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const n=this.shouldPrependVertexProjectPath(t,e),s=this.constructUrl(t.path,e,n);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let r={};return r.body=t.body,r=await this.includeExtraHttpOptionsToRequestInit(r,e,s.toString(),t.abortSignal),this.streamApiCall(s,r,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,e,n,s){if(e&&e.timeout||s){const r=new AbortController,a=r.signal;if(e.timeout&&(e==null?void 0:e.timeout)>0){const u=setTimeout(()=>r.abort(),e.timeout);u&&typeof u.unref=="function"&&u.unref()}s&&s.addEventListener("abort",()=>{r.abort()}),t.signal=a}return e&&e.extraBody!==null&&WY(t,e.extraBody),t.headers=await this.getHeadersInternal(e,n),t}async unaryApiCall(t,e,n){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:n})).then(async s=>(await VN(s),new Kb(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(t,e,n){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:n})).then(async s=>(await VN(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(t){return So(this,arguments,function*(){var n;const s=(n=t==null?void 0:t.body)===null||n===void 0?void 0:n.getReader(),r=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let a="";const u="data:",h=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:f,value:p}=yield Dt(s.read());if(f){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const y=r.decode(p,{stream:!0});try{const b=JSON.parse(y);if("error"in b){const _=JSON.parse(JSON.stringify(b.error)),w=_.status,x=_.code,N=`got status: ${w}. ${JSON.stringify(b)}`;if(x>=400&&x<600)throw new Cm({message:N,status:x})}}catch(b){if(b.name==="ApiError")throw b}a+=y;let v=-1,E=0;for(;;){v=-1,E=0;for(const w of h){const x=a.indexOf(w);x!==-1&&(v===-1||x<v)&&(v=x,E=w.length)}if(v===-1)break;const b=a.substring(0,v);a=a.substring(v+E);const _=b.trim();if(_.startsWith(u)){const w=_.substring(u.length).trim();try{const x=new Response(w,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield Dt(new Kb(x))}catch(x){throw new Error(`exception parsing stream chunk ${w}. ${x}`)}}}}}finally{s.releaseLock()}})}async apiCall(t,e){var n;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(t,e);const s=this.clientOptions.httpOptions.retryOptions;return B4(async()=>{const a=await fetch(t,e);if(a.ok)return a;throw $Y.includes(a.status)?new Error(`Retryable HTTP Error: ${a.statusText}`):new mk.AbortError(`Non-retryable exception ${a.statusText} sending request`)},{retries:((n=s.attempts)!==null&&n!==void 0?n:XY)-1})}getDefaultHeaders(){const t={},e=zY+" "+this.clientOptions.userAgentExtra;return t[HY]=e,t[jb]=e,t[OY]="application/json",t}async getHeadersInternal(t,e){const n=new Headers;if(t&&t.headers){for(const[s,r]of Object.entries(t.headers))n.append(s,r);t.timeout&&t.timeout>0&&n.append(VY,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,e),n}getFileName(t){var e;let n="";return typeof t=="string"&&(n=t.replace(/[/\\]+$/,""),n=(e=n.split(/[/\\]/).pop())!==null&&e!==void 0?e:""),n}async uploadFile(t,e){var n;const s={};e!=null&&(s.mimeType=e.mimeType,s.name=e.name,s.displayName=e.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const r=this.clientOptions.uploader,a=await r.stat(t);s.sizeBytes=String(a.size);const u=(n=e==null?void 0:e.mimeType)!==null&&n!==void 0?n:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=u;const h={file:s},f=this.getFileName(t),p=dt("upload/v1beta/files",h._url),y=await this.fetchUploadUrl(p,s.sizeBytes,s.mimeType,f,h,e==null?void 0:e.httpOptions);return r.upload(t,y,this)}async uploadFileToFileSearchStore(t,e,n){var s;const r=this.clientOptions.uploader,a=await r.stat(e),u=String(a.size),h=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:a.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${t}:uploadToFileSearchStore`,p=this.getFileName(e),y={};n!=null&&Bk(n,y);const v=await this.fetchUploadUrl(f,u,h,p,y,n==null?void 0:n.httpOptions);return r.uploadToFileSearchStore(e,v,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,e,n,s,r,a){var u;let h={};a?h=a:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e}`,"X-Goog-Upload-Header-Content-Type":`${n}`},s?{"X-Goog-Upload-File-Name":s}:{})};const f=await this.request({path:t,body:JSON.stringify(r),httpMethod:"POST",httpOptions:h});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(u=f==null?void 0:f.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function VN(i){var t;if(i===void 0)throw new Error("response is undefined");if(!i.ok){const e=i.status;let n;!((t=i.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?n=await i.json():n={error:{message:await i.text(),code:i.status,status:i.statusText}};const s=JSON.stringify(n);throw e>=400&&e<600?new Cm({message:s,status:e}):new Error(s)}}function WY(i,t){if(!t||Object.keys(t).length===0)return;if(i.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let e={};if(typeof i.body=="string"&&i.body.length>0)try{const r=JSON.parse(i.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))e=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(r,a){const u=Object.assign({},r);for(const h in a)if(Object.prototype.hasOwnProperty.call(a,h)){const f=a[h],p=u[h];f&&typeof f=="object"&&!Array.isArray(f)&&p&&typeof p=="object"&&!Array.isArray(p)?u[h]=n(p,f):(p&&f&&typeof p!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof p}, New type: ${typeof f}. Overwriting.`),u[h]=f)}return u}const s=n(e,t);i.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JY="mcp_used/unknown";let QY=!1;function Fk(i){for(const t of i)if(ZY(t)||typeof t=="object"&&"inputSchema"in t)return!0;return QY}function Ok(i){var t;const e=(t=i[jb])!==null&&t!==void 0?t:"";i[jb]=(e+` ${JY}`).trimStart()}function ZY(i){return i!==null&&typeof i=="object"&&i instanceof Sw}function jY(i){return So(this,arguments,function*(e,n=100){let s,r=0;for(;r<n;){const a=yield Dt(e.listTools({cursor:s}));for(const u of a.tools)yield yield Dt(u),r++;if(!a.nextCursor)break;s=a.nextCursor}})}class Sw{constructor(t=[],e){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=e}static create(t,e){return new Sw(t,e)}async initialize(){var t,e,n,s;if(this.mcpTools.length>0)return;const r={},a=[];for(const p of this.mcpClients)try{for(var u=!0,h=(e=void 0,Eo(jY(p))),f;f=await h.next(),t=f.done,!t;u=!0){s=f.value,u=!1;const y=s;a.push(y);const v=y.name;if(r[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);r[v]=p}}catch(y){e={error:y}}finally{try{!u&&!t&&(n=h.return)&&await n.call(h)}finally{if(e)throw e.error}}this.mcpTools=a,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),_5(this.mcpTools,this.config)}async callTool(t){await this.initialize();const e=[];for(const n of t)if(n.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[n.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const a=await s.callTool({name:n.name,arguments:n.args},void 0,r);e.push({functionResponse:{name:n.name,response:a.isError?{error:a}:a}})}return e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function tX(i,t,e){const n=new y5;let s;e.data instanceof Blob?s=JSON.parse(await e.data.text()):s=JSON.parse(e.data),Object.assign(n,s),t(n)}class eX{constructor(t,e,n){this.apiClient=t,this.auth=e,this.webSocketFactory=n}async connect(t){var e,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),a=sX(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),h=`${s}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${u}`;let f=()=>{};const p=new Promise(I=>{f=I}),y=t.callbacks,v=function(){f({})},E=this.apiClient,b={onopen:v,onmessage:I=>{tX(E,y.onmessage,I)},onerror:(e=y==null?void 0:y.onerror)!==null&&e!==void 0?e:function(I){},onclose:(n=y==null?void 0:y.onclose)!==null&&n!==void 0?n:function(I){}},_=this.webSocketFactory.create(h,iX(a),b);_.connect(),await p;const N={setup:{model:ne(this.apiClient,t.model)}};return _.send(JSON.stringify(N)),new nX(_,this.apiClient)}}class nX{constructor(t,e){this.conn=t,this.apiClient=e}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const e=_6(t);this.conn.send(JSON.stringify({clientContent:e}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const e=C6(t);this.conn.send(JSON.stringify(e))}sendPlaybackControl(t){const e={playbackControl:t};this.conn.send(JSON.stringify(e))}play(){this.sendPlaybackControl(Kd.PLAY)}pause(){this.sendPlaybackControl(Kd.PAUSE)}stop(){this.sendPlaybackControl(Kd.STOP)}resetContext(){this.sendPlaybackControl(Kd.RESET_CONTEXT)}close(){this.conn.close()}}function iX(i){const t={};return i.forEach((e,n)=>{t[n]=e}),t}function sX(i){const t=new Headers;for(const[e,n]of Object.entries(i))t.append(e,n);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oX="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function rX(i,t,e){const n=new g5;let s;e.data instanceof Blob?s=await e.data.text():e.data instanceof ArrayBuffer?s=new TextDecoder().decode(e.data):s=e.data;const r=JSON.parse(s);if(i.isVertexAI()){const a=M6(r);Object.assign(n,a)}else Object.assign(n,r);t(n)}class aX{constructor(t,e,n){this.apiClient=t,this.auth=e,this.webSocketFactory=n,this.music=new eX(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var e,n,s,r,a,u;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let p;const y=this.apiClient.getHeaders();t.config&&t.config.tools&&Fk(t.config.tools)&&Ok(y);const v=dX(y);if(this.apiClient.isVertexAI()){const H=this.apiClient.getProject(),j=this.apiClient.getLocation(),et=this.apiClient.getApiKey(),at=!!H&&!!j||!!et;this.apiClient.getCustomBaseUrl()&&!at?p=h:(p=`${h}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v,p))}else{const H=this.apiClient.getApiKey();let j="BidiGenerateContent",et="key";H!=null&&H.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),j="BidiGenerateContentConstrained",et="access_token"),p=`${h}/ws/google.ai.generativelanguage.${f}.GenerativeService.${j}?${et}=${H}`}let E=()=>{};const b=new Promise(H=>{E=H}),_=t.callbacks,w=function(){var H;(H=_==null?void 0:_.onopen)===null||H===void 0||H.call(_),E({})},x=this.apiClient,N={onopen:w,onmessage:H=>{rX(x,_.onmessage,H)},onerror:(e=_==null?void 0:_.onerror)!==null&&e!==void 0?e:function(H){},onclose:(n=_==null?void 0:_.onclose)!==null&&n!==void 0?n:function(H){}},I=this.webSocketFactory.create(p,cX(v),N);I.connect(),await b;let L=ne(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&L.startsWith("publishers/")){const H=this.apiClient.getProject(),j=this.apiClient.getLocation();H&&j&&(L=`projects/${H}/locations/${j}/`+L)}let U={};this.apiClient.isVertexAI()&&((s=t.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[mA.AUDIO]}:t.config.responseModalities=[mA.AUDIO]),!((r=t.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const k=(u=(a=t.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],B=[];for(const H of k)if(this.isCallableTool(H)){const j=H;B.push(await j.tool())}else B.push(H);B.length>0&&(t.config.tools=B);const z={model:L,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?U=b6(this.apiClient,z):U=E6(this.apiClient,z),delete U.config,I.send(JSON.stringify(U)),new uX(I,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const lX={turnComplete:!0};class uX{constructor(t,e){this.conn=t,this.apiClient=e}tLiveClientContent(t,e){if(e.turns!==null&&e.turns!==void 0){let n=[];try{n=ys(e.turns),t.isVertexAI()||(n=n.map(s=>Ry(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:n,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClienttToolResponse(t,e){let n=[];if(e.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(e.functionResponses)?n=e.functionResponses:n=[e.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const r of n){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!t.isVertexAI()&&!("id"in r))throw new Error(oX)}return{toolResponse:{functionResponses:n}}}sendClientContent(t){t=Object.assign(Object.assign({},lX),t);const e=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(e))}sendRealtimeInput(t){let e={};this.apiClient.isVertexAI()?e={realtimeInput:x6(t)}:e={realtimeInput:w6(t)},this.conn.send(JSON.stringify(e))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const e=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}}function cX(i){const t={};return i.forEach((e,n)=>{t[n]=e}),t}function dX(i){const t=new Headers;for(const[e,n]of Object.entries(i))t.append(e,n);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HN=10;function GN(i){var t,e,n;if(!((t=i==null?void 0:i.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let s=!1;for(const a of(e=i==null?void 0:i.tools)!==null&&e!==void 0?e:[])if(sh(a)){s=!0;break}if(!s)return!0;const r=(n=i==null?void 0:i.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function sh(i){return"callTool"in i&&typeof i.callTool=="function"}function hX(i){var t,e,n;return(n=(e=(t=i.config)===null||t===void 0?void 0:t.tools)===null||e===void 0?void 0:e.some(s=>sh(s)))!==null&&n!==void 0?n:!1}function zN(i){var t;const e=[];return!((t=i==null?void 0:i.config)===null||t===void 0)&&t.tools&&i.config.tools.forEach((n,s)=>{if(sh(n))return;const r=n;r.functionDeclarations&&r.functionDeclarations.length>0&&e.push(s)}),e}function qN(i){var t;return!(!((t=i==null?void 0:i.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fX extends Sa{constructor(t){super(),this.apiClient=t,this.embedContent=async e=>{if(!this.apiClient.isVertexAI())return await this.embedContentInternal(e);if(e.model.includes("gemini")&&e.model!=="gemini-embedding-001"||e.model.includes("maas")){const s=ys(e.contents);if(s.length>1)throw new Error("The embedContent API for this model only supports one content at a time.");const r=Object.assign(Object.assign({},e),{content:s[0],embeddingApiType:gA.EMBED_CONTENT});return await this.embedContentInternal(r)}else{const s=Object.assign(Object.assign({},e),{embeddingApiType:gA.PREDICT});return await this.embedContentInternal(s)}},this.generateContent=async e=>{var n,s,r,a,u;const h=await this.processParamsMaybeAddMcpUsage(e);if(this.maybeMoveToResponseJsonSchem(e),!hX(e)||GN(e.config))return await this.generateContentInternal(h);const f=zN(e);if(f.length>0){const _=f.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${_}.`)}let p,y;const v=ys(h.contents),E=(r=(s=(n=h.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:HN;let b=0;for(;b<E&&(p=await this.generateContentInternal(h),!(!p.functionCalls||p.functionCalls.length===0));){const _=p.candidates[0].content,w=[];for(const x of(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(sh(x)){const I=await x.callTool(p.functionCalls);w.push(...I)}b++,y={role:"user",parts:w},h.contents=ys(h.contents),h.contents.push(_),h.contents.push(y),qN(h.config)&&(v.push(_),v.push(y))}return qN(h.config)&&(p.automaticFunctionCallingHistory=v),p},this.generateContentStream=async e=>{var n,s,r,a,u;if(this.maybeMoveToResponseJsonSchem(e),GN(e.config)){const y=await this.processParamsMaybeAddMcpUsage(e);return await this.generateContentStreamInternal(y)}const h=zN(e);if(h.length>0){const y=h.map(v=>`tools[${v}]`).join(", ");throw new Error(`Incompatible tools found at ${y}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(r=(s=(n=e==null?void 0:e.config)===null||n===void 0?void 0:n.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||r===void 0?void 0:r.streamFunctionCallArguments,p=(u=(a=e==null?void 0:e.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(f&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(n=>{var s;let r;const a=[];if(n!=null&&n.generatedImages)for(const h of n.generatedImages)h&&(h!=null&&h.safetyAttributes)&&((s=h==null?void 0:h.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?r=h==null?void 0:h.safetyAttributes:a.push(h);let u;return r?u={generatedImages:a,positivePromptSafetyAttributes:r,sdkHttpResponse:n.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:n.sdkHttpResponse},u}),this.list=async e=>{var n;const a={config:Object.assign(Object.assign({},{queryBase:!0}),e==null?void 0:e.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((n=a.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new Yc(ya.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async e=>{const n={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(n.referenceImages=e.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async e=>{let n={numberOfImages:1,mode:"upscale"};e.config&&(n=Object.assign(Object.assign({},n),e.config));const s={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:n};return await this.upscaleImageInternal(s)},this.generateVideos=async e=>{var n,s,r,a,u,h;if((e.prompt||e.image||e.video)&&e.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((n=e.video)===null||n===void 0)&&n.uri&&(!((s=e.video)===null||s===void 0)&&s.videoBytes)?e.video={uri:e.video.uri,mimeType:e.video.mimeType}:!((a=(r=e.source)===null||r===void 0?void 0:r.video)===null||a===void 0)&&a.uri&&(!((h=(u=e.source)===null||u===void 0?void 0:u.video)===null||h===void 0)&&h.videoBytes)&&(e.source.video={uri:e.source.video.uri,mimeType:e.source.video.mimeType})),await this.generateVideosInternal(e)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var e,n,s;const r=(e=t.config)===null||e===void 0?void 0:e.tools;if(!r)return t;const a=await Promise.all(r.map(async h=>sh(h)?await h.tool():h)),u={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:a})};if(u.config.tools=a,t.config&&t.config.tools&&Fk(t.config.tools)){const h=(s=(n=t.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&s!==void 0?s:{};let f=Object.assign({},h);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),Ok(f),u.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:f})}return u}async initAfcToolsMap(t){var e,n,s;const r=new Map;for(const a of(n=(e=t.config)===null||e===void 0?void 0:e.tools)!==null&&n!==void 0?n:[])if(sh(a)){const u=a,h=await u.tool();for(const f of(s=h.functionDeclarations)!==null&&s!==void 0?s:[]){if(!f.name)throw new Error("Function declaration name is required.");if(r.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);r.set(f.name,u)}}return r}async processAfcStream(t){var e,n,s;const r=(s=(n=(e=t.config)===null||e===void 0?void 0:e.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&s!==void 0?s:HN;let a=!1,u=0;const h=await this.initAfcToolsMap(t);return(function(f,p,y){return So(this,arguments,function*(){for(var v,E,b,_,w,x;u<r;){a&&(u++,a=!1);const U=yield Dt(f.processParamsMaybeAddMcpUsage(y)),k=yield Dt(f.generateContentStreamInternal(U)),B=[],z=[];try{for(var N=!0,I=(E=void 0,Eo(k)),L;L=yield Dt(I.next()),v=L.done,!v;N=!0){_=L.value,N=!1;const H=_;if(yield yield Dt(H),H.candidates&&(!((w=H.candidates[0])===null||w===void 0)&&w.content)){z.push(H.candidates[0].content);for(const j of(x=H.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(u<r&&j.functionCall){if(!j.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(j.functionCall.name)){const et=yield Dt(p.get(j.functionCall.name).callTool([j.functionCall]));B.push(...et)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${j.functionCall.name}`)}}}}catch(H){E={error:H}}finally{try{!N&&!v&&(b=I.return)&&(yield Dt(b.call(I)))}finally{if(E)throw E.error}}if(B.length>0){a=!0;const H=new Op;H.candidates=[{content:{role:"user",parts:B}}],yield yield Dt(H);const j=[];j.push(...z),j.push({role:"user",parts:B});const et=ys(y.contents).concat(j);y.contents=et}else break}})})(this,h,t)}async generateContentInternal(t){var e,n,s,r;let a,u="",h={};if(this.apiClient.isVertexAI()){const f=BN(this.apiClient,t);return u=dt("{model}:generateContent",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const y=ON(p),v=new Op;return Object.assign(v,y),v})}else{const f=UN(this.apiClient,t);return u=dt("{model}:generateContent",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const y=FN(p),v=new Op;return Object.assign(v,y),v})}}async generateContentStreamInternal(t){var e,n,s,r;let a,u="",h={};if(this.apiClient.isVertexAI()){const f=BN(this.apiClient,t);return u=dt("{model}:streamGenerateContent?alt=sse",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.requestStream({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}),a.then(function(y){return So(this,arguments,function*(){var v,E,b,_;try{for(var w=!0,x=Eo(y),N;N=yield Dt(x.next()),v=N.done,!v;w=!0){_=N.value,w=!1;const I=_,L=ON(yield Dt(I.json()),t);L.sdkHttpResponse={headers:I.headers};const U=new Op;Object.assign(U,L),yield yield Dt(U)}}catch(I){E={error:I}}finally{try{!w&&!v&&(b=x.return)&&(yield Dt(b.call(x)))}finally{if(E)throw E.error}}})})}else{const f=UN(this.apiClient,t);return u=dt("{model}:streamGenerateContent?alt=sse",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.requestStream({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),a.then(function(y){return So(this,arguments,function*(){var v,E,b,_;try{for(var w=!0,x=Eo(y),N;N=yield Dt(x.next()),v=N.done,!v;w=!0){_=N.value,w=!1;const I=_,L=FN(yield Dt(I.json()),t);L.sdkHttpResponse={headers:I.headers};const U=new Op;Object.assign(U,L),yield yield Dt(U)}}catch(I){E={error:I}}finally{try{!w&&!v&&(b=x.return)&&(yield Dt(b.call(x)))}finally{if(E)throw E.error}}})})}}async embedContentInternal(t){var e,n,s,r;let a,u="",h={};if(this.apiClient.isVertexAI()){const f=o8(this.apiClient,t,t),p=x5(t.model)?"{model}:embedContent":"{model}:predict";return u=dt(p,f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),a.then(y=>{const v=a8(y,t),E=new AN;return Object.assign(E,v),E})}else{const f=s8(this.apiClient,t);return u=dt("{model}:batchEmbedContents",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const y=r8(p),v=new AN;return Object.assign(v,y),v})}}async generateImagesInternal(t){var e,n,s,r;let a,u="",h={};if(this.apiClient.isVertexAI()){const f=v8(this.apiClient,t);return u=dt("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const y=T8(p),v=new TN;return Object.assign(v,y),v})}else{const f=y8(this.apiClient,t);return u=dt("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const y=A8(p),v=new TN;return Object.assign(v,y),v})}}async editImageInternal(t){var e,n;let s,r="",a={};if(this.apiClient.isVertexAI()){const u=t8(this.apiClient,t);return r=dt("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),s.then(h=>{const f=e8(h),p=new s5;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var e,n;let s,r="",a={};if(this.apiClient.isVertexAI()){const u=vY(this.apiClient,t);return r=dt("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),s.then(h=>{const f=AY(h),p=new o5;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var e,n;let s,r="",a={};if(this.apiClient.isVertexAI()){const u=j8(this.apiClient,t);return r=dt("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const f=tY(h),p=new r5;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var e,n;let s,r="",a={};if(this.apiClient.isVertexAI()){const u=rY(this.apiClient,t);return r=dt("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const f=aY(h),p=new a5;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var e,n,s,r;let a,u="",h={};if(this.apiClient.isVertexAI()){const f=B8(this.apiClient,t);return u=dt("{name}",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),a.then(p=>Zb(p))}else{const f=U8(this.apiClient,t);return u=dt("{name}",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>Qb(p))}}async listInternal(t){var e,n,s,r;let a,u="",h={};if(this.apiClient.isVertexAI()){const f=X8(this.apiClient,t);return u=dt("{models_url}",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const y=K8(p),v=new SN;return Object.assign(v,y),v})}else{const f=Y8(this.apiClient,t);return u=dt("{models_url}",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const y=$8(p),v=new SN;return Object.assign(v,y),v})}}async update(t){var e,n,s,r;let a,u="",h={};if(this.apiClient.isVertexAI()){const f=gY(this.apiClient,t);return u=dt("{model}",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),a.then(p=>Zb(p))}else{const f=mY(this.apiClient,t);return u=dt("{name}",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>Qb(p))}}async delete(t){var e,n,s,r;let a,u="",h={};if(this.apiClient.isVertexAI()){const f=J6(this.apiClient,t);return u=dt("{name}",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const y=Z6(p),v=new EN;return Object.assign(v,y),v})}else{const f=W6(this.apiClient,t);return u=dt("{name}",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const y=Q6(p),v=new EN;return Object.assign(v,y),v})}}async countTokens(t){var e,n,s,r;let a,u="",h={};if(this.apiClient.isVertexAI()){const f=X6(this.apiClient,t);return u=dt("{model}:countTokens",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const y=K6(p),v=new bN;return Object.assign(v,y),v})}else{const f=Y6(this.apiClient,t);return u=dt("{model}:countTokens",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const y=$6(p),v=new bN;return Object.assign(v,y),v})}}async computeTokens(t){var e,n;let s,r="",a={};if(this.apiClient.isVertexAI()){const u=F6(this.apiClient,t);return r=dt("{model}:computeTokens",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),s.then(h=>{const f=O6(h),p=new l5;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var e,n,s,r;let a,u="",h={};if(this.apiClient.isVertexAI()){const f=w8(this.apiClient,t);return u=dt("{model}:predictLongRunning",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),a.then(p=>{const y=C8(p),v=new yA;return Object.assign(v,y),v})}else{const f=_8(this.apiClient,t);return u=dt("{model}:predictLongRunning",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>{const y=b8(p),v=new yA;return Object.assign(v,y),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pX extends Sa{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const e=t.operation,n=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=e.name.split("/operations/")[0];let r;n&&"httpOptions"in n&&(r=n.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:s,config:{httpOptions:r}});return e._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:e.name,config:n});return e._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(t){const e=t.operation,n=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=e.name.split("/operations/")[0];let r;n&&"httpOptions"in n&&(r=n.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:s,config:{httpOptions:r}});return e._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:e.name,config:n});return e._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(t){var e,n,s,r;let a,u="",h={};if(this.apiClient.isVertexAI()){const f=Z4(t);return u=dt("{operationName}",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),a}else{const f=Q4(t);return u=dt("{operationName}",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a}}async fetchPredictVideosOperationInternal(t){var e,n;let s,r="",a={};if(this.apiClient.isVertexAI()){const u=q4(t);return r=dt("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mX(i){const t={},e=g(i,["data"]);if(e!=null&&A(t,["data"],e),g(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(i,["mimeType"]);return n!=null&&A(t,["mimeType"],n),t}function gX(i){const t={},e=g(i,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(r=>_X(r))),A(t,["parts"],s)}const n=g(i,["role"]);return n!=null&&A(t,["role"],n),t}function yX(i,t,e){const n={},s=g(t,["expireTime"]);e!==void 0&&s!=null&&A(e,["expireTime"],s);const r=g(t,["newSessionExpireTime"]);e!==void 0&&r!=null&&A(e,["newSessionExpireTime"],r);const a=g(t,["uses"]);e!==void 0&&a!=null&&A(e,["uses"],a);const u=g(t,["liveConnectConstraints"]);e!==void 0&&u!=null&&A(e,["bidiGenerateContentSetup"],CX(i,u));const h=g(t,["lockAdditionalFields"]);return e!==void 0&&h!=null&&A(e,["fieldMask"],h),n}function vX(i,t){const e={},n=g(t,["config"]);return n!=null&&A(e,["config"],yX(i,n,e)),e}function AX(i){const t={};if(g(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=g(i,["fileUri"]);e!=null&&A(t,["fileUri"],e);const n=g(i,["mimeType"]);return n!=null&&A(t,["mimeType"],n),t}function TX(i){const t={},e=g(i,["id"]);e!=null&&A(t,["id"],e);const n=g(i,["args"]);n!=null&&A(t,["args"],n);const s=g(i,["name"]);if(s!=null&&A(t,["name"],s),g(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function SX(i){const t={};if(g(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=g(i,["enableWidget"]);return e!=null&&A(t,["enableWidget"],e),t}function EX(i){const t={};if(g(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=g(i,["timeRangeFilter"]);return e!=null&&A(t,["timeRangeFilter"],e),t}function bX(i,t){const e={},n=g(i,["generationConfig"]);t!==void 0&&n!=null&&A(t,["setup","generationConfig"],n);const s=g(i,["responseModalities"]);t!==void 0&&s!=null&&A(t,["setup","generationConfig","responseModalities"],s);const r=g(i,["temperature"]);t!==void 0&&r!=null&&A(t,["setup","generationConfig","temperature"],r);const a=g(i,["topP"]);t!==void 0&&a!=null&&A(t,["setup","generationConfig","topP"],a);const u=g(i,["topK"]);t!==void 0&&u!=null&&A(t,["setup","generationConfig","topK"],u);const h=g(i,["maxOutputTokens"]);t!==void 0&&h!=null&&A(t,["setup","generationConfig","maxOutputTokens"],h);const f=g(i,["mediaResolution"]);t!==void 0&&f!=null&&A(t,["setup","generationConfig","mediaResolution"],f);const p=g(i,["seed"]);t!==void 0&&p!=null&&A(t,["setup","generationConfig","seed"],p);const y=g(i,["speechConfig"]);t!==void 0&&y!=null&&A(t,["setup","generationConfig","speechConfig"],Tw(y));const v=g(i,["thinkingConfig"]);t!==void 0&&v!=null&&A(t,["setup","generationConfig","thinkingConfig"],v);const E=g(i,["enableAffectiveDialog"]);t!==void 0&&E!=null&&A(t,["setup","generationConfig","enableAffectiveDialog"],E);const b=g(i,["systemInstruction"]);t!==void 0&&b!=null&&A(t,["setup","systemInstruction"],gX(Dn(b)));const _=g(i,["tools"]);if(t!==void 0&&_!=null){let k=Vf(_);Array.isArray(k)&&(k=k.map(B=>xX(Of(B)))),A(t,["setup","tools"],k)}const w=g(i,["sessionResumption"]);t!==void 0&&w!=null&&A(t,["setup","sessionResumption"],wX(w));const x=g(i,["inputAudioTranscription"]);t!==void 0&&x!=null&&A(t,["setup","inputAudioTranscription"],x);const N=g(i,["outputAudioTranscription"]);t!==void 0&&N!=null&&A(t,["setup","outputAudioTranscription"],N);const I=g(i,["realtimeInputConfig"]);t!==void 0&&I!=null&&A(t,["setup","realtimeInputConfig"],I);const L=g(i,["contextWindowCompression"]);t!==void 0&&L!=null&&A(t,["setup","contextWindowCompression"],L);const U=g(i,["proactivity"]);if(t!==void 0&&U!=null&&A(t,["setup","proactivity"],U),g(i,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return e}function CX(i,t){const e={},n=g(t,["model"]);n!=null&&A(e,["setup","model"],ne(i,n));const s=g(t,["config"]);return s!=null&&A(e,["config"],bX(s,e)),e}function _X(i){const t={},e=g(i,["mediaResolution"]);e!=null&&A(t,["mediaResolution"],e);const n=g(i,["codeExecutionResult"]);n!=null&&A(t,["codeExecutionResult"],n);const s=g(i,["executableCode"]);s!=null&&A(t,["executableCode"],s);const r=g(i,["fileData"]);r!=null&&A(t,["fileData"],AX(r));const a=g(i,["functionCall"]);a!=null&&A(t,["functionCall"],TX(a));const u=g(i,["functionResponse"]);u!=null&&A(t,["functionResponse"],u);const h=g(i,["inlineData"]);h!=null&&A(t,["inlineData"],mX(h));const f=g(i,["text"]);f!=null&&A(t,["text"],f);const p=g(i,["thought"]);p!=null&&A(t,["thought"],p);const y=g(i,["thoughtSignature"]);y!=null&&A(t,["thoughtSignature"],y);const v=g(i,["videoMetadata"]);return v!=null&&A(t,["videoMetadata"],v),t}function wX(i){const t={},e=g(i,["handle"]);if(e!=null&&A(t,["handle"],e),g(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function xX(i){const t={};if(g(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const e=g(i,["computerUse"]);e!=null&&A(t,["computerUse"],e);const n=g(i,["fileSearch"]);n!=null&&A(t,["fileSearch"],n);const s=g(i,["codeExecution"]);if(s!=null&&A(t,["codeExecution"],s),g(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=g(i,["functionDeclarations"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(y=>y)),A(t,["functionDeclarations"],p)}const a=g(i,["googleMaps"]);a!=null&&A(t,["googleMaps"],SX(a));const u=g(i,["googleSearch"]);u!=null&&A(t,["googleSearch"],EX(u));const h=g(i,["googleSearchRetrieval"]);h!=null&&A(t,["googleSearchRetrieval"],h);const f=g(i,["urlContext"]);return f!=null&&A(t,["urlContext"],f),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MX(i){const t=[];for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e)){const n=i[e];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const s=Object.keys(n).map(r=>`${e}.${r}`);t.push(...s)}else t.push(e)}return t.join(",")}function RX(i,t){let e=null;const n=i.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const r=n.setup;typeof r=="object"&&r!==null?(i.bidiGenerateContentSetup=r,e=r):delete i.bidiGenerateContentSetup}else n!==void 0&&delete i.bidiGenerateContentSetup;const s=i.fieldMask;if(e){const r=MX(e);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)r?i.fieldMask=r:delete i.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];s.length>0&&(u=s.map(f=>a.includes(f)?`generationConfig.${f}`:f));const h=[];r&&h.push(r),u.length>0&&h.push(...u),h.length>0?i.fieldMask=h.join(","):delete i.fieldMask}else delete i.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?i.fieldMask=s.join(","):delete i.fieldMask;return i}class DX extends Sa{constructor(t){super(),this.apiClient=t}async create(t){var e,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=vX(this.apiClient,t);r=dt("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const h=RX(u,t.config);return s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),s.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IX(i,t){const e={},n=g(i,["force"]);return t!==void 0&&n!=null&&A(t,["_query","force"],n),e}function NX(i){const t={},e=g(i,["name"]);e!=null&&A(t,["_url","name"],e);const n=g(i,["config"]);return n!=null&&IX(n,t),t}function PX(i){const t={},e=g(i,["name"]);return e!=null&&A(t,["_url","name"],e),t}function LX(i,t){const e={},n=g(i,["pageSize"]);t!==void 0&&n!=null&&A(t,["_query","pageSize"],n);const s=g(i,["pageToken"]);return t!==void 0&&s!=null&&A(t,["_query","pageToken"],s),e}function kX(i){const t={},e=g(i,["parent"]);e!=null&&A(t,["_url","parent"],e);const n=g(i,["config"]);return n!=null&&LX(n,t),t}function UX(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=g(i,["nextPageToken"]);n!=null&&A(t,["nextPageToken"],n);const s=g(i,["documents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),A(t,["documents"],r)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BX extends Sa{constructor(t){super(),this.apiClient=t,this.list=async e=>new Yc(ya.PAGED_ITEM_DOCUMENTS,n=>this.listInternal({parent:e.parent,config:n.config}),await this.listInternal(e),e)}async get(t){var e,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=PX(t);return r=dt("{name}",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(t){var e,n;let s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=NX(t);s=dt("{name}",a._url),r=a._query,delete a._url,delete a._query,await this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(t){var e,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=kX(t);return r=dt("{parent}/documents",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const f=UX(h),p=new u5;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FX extends Sa{constructor(t,e=new BX(t)){super(),this.apiClient=t,this.documents=e,this.list=async(n={})=>new Yc(ya.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(n),n)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var e,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=wY(t);return r=dt("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async get(t){var e,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=RY(t);return r=dt("{name}",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(t){var e,n;let s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=MY(t);s=dt("{name}",a._url),r=a._query,delete a._url,delete a._query,await this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(t){var e,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=kY(t);return r=dt("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const f=UY(h),p=new c5;return Object.assign(p,f),p})}}async uploadToFileSearchStoreInternal(t){var e,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=BY(t);return r=dt("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const f=FY(h),p=new d5;return Object.assign(p,f),p})}}async importFile(t){var e,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=NY(t);return r=dt("{file_search_store_name}:importFile",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const f=IY(h),p=new mw;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Vk=function(){const{crypto:i}=globalThis;if(i!=null&&i.randomUUID)return Vk=i.randomUUID.bind(i),i.randomUUID();const t=new Uint8Array(1),e=i?()=>i.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^e()&15>>+n/4).toString(16))};const OX=()=>Vk();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tC(i){return typeof i=="object"&&i!==null&&("name"in i&&i.name==="AbortError"||"message"in i&&String(i.message).includes("FetchRequestCanceledException"))}const eC=i=>{if(i instanceof Error)return i;if(typeof i=="object"&&i!==null){try{if(Object.prototype.toString.call(i)==="[object Error]"){const t=new Error(i.message,i.cause?{cause:i.cause}:{});return i.stack&&(t.stack=i.stack),i.cause&&!t.cause&&(t.cause=i.cause),i.name&&(t.name=i.name),t}}catch{}try{return new Error(JSON.stringify(i))}catch{}}return new Error(i)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Js extends Error{}class gi extends Js{constructor(t,e,n,s){super(`${gi.makeMessage(t,e,n)}`),this.status=t,this.headers=s,this.error=e}static makeMessage(t,e,n){const s=e!=null&&e.message?typeof e.message=="string"?e.message:JSON.stringify(e.message):e?JSON.stringify(e):n;return t&&s?`${t} ${s}`:t?`${t} status code (no body)`:s||"(no status code or body)"}static generate(t,e,n,s){if(!t||!s)return new rT({message:n,cause:eC(e)});const r=e;return t===400?new Gk(t,r,n,s):t===401?new zk(t,r,n,s):t===403?new qk(t,r,n,s):t===404?new Yk(t,r,n,s):t===409?new Xk(t,r,n,s):t===422?new $k(t,r,n,s):t===429?new Kk(t,r,n,s):t>=500?new Wk(t,r,n,s):new gi(t,r,n,s)}}class nC extends gi{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class rT extends gi{constructor({message:t,cause:e}){super(void 0,void 0,t||"Connection error.",void 0),e&&(this.cause=e)}}class Hk extends rT{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Gk extends gi{}class zk extends gi{}class qk extends gi{}class Yk extends gi{}class Xk extends gi{}class $k extends gi{}class Kk extends gi{}class Wk extends gi{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VX=/^[a-z][a-z0-9+.-]*:/i,HX=i=>VX.test(i);let iC=i=>(iC=Array.isArray,iC(i));const GX=iC;let zX=GX;const YN=zX;function qX(i){if(!i)return!0;for(const t in i)return!1;return!0}function YX(i,t){return Object.prototype.hasOwnProperty.call(i,t)}const XX=(i,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Js(`${i} must be an integer`);if(t<0)throw new Js(`${i} must be a positive integer`);return t},$X=i=>{try{return JSON.parse(i)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KX=i=>new Promise(t=>setTimeout(t,i));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ld="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WX(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const JX=()=>{var i,t,e,n,s;const r=WX();if(r==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ld,"X-Stainless-OS":$N(Deno.build.os),"X-Stainless-Arch":XN(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(i=Deno.version)===null||i===void 0?void 0:i.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ld,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(r==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ld,"X-Stainless-OS":$N((e=globalThis.process.platform)!==null&&e!==void 0?e:"unknown"),"X-Stainless-Arch":XN((n=globalThis.process.arch)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const a=QX();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ld,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ld,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function QX(){if(typeof navigator>"u"||!navigator)return null;const i=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:e}of i){const n=e.exec(navigator.userAgent);if(n){const s=n[1]||0,r=n[2]||0,a=n[3]||0;return{browser:t,version:`${s}.${r}.${a}`}}}return null}const XN=i=>i==="x32"?"x32":i==="x86_64"||i==="x64"?"x64":i==="arm"?"arm":i==="aarch64"||i==="arm64"?"arm64":i?`other:${i}`:"unknown",$N=i=>(i=i.toLowerCase(),i.includes("ios")?"iOS":i==="android"?"Android":i==="darwin"?"MacOS":i==="win32"?"Windows":i==="freebsd"?"FreeBSD":i==="openbsd"?"OpenBSD":i==="linux"?"Linux":i?`Other:${i}`:"Unknown");let s0;const ZX=()=>s0??(s0=JX());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jX(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Jk(...i){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...i)}function t$(i){let t=Symbol.asyncIterator in i?i[Symbol.asyncIterator]():i[Symbol.iterator]();return Jk({start(){},async pull(e){const{done:n,value:s}=await t.next();n?e.close():e.enqueue(s)},async cancel(){var e;await((e=t.return)===null||e===void 0?void 0:e.call(t))}})}function Qk(i){if(i[Symbol.asyncIterator])return i;const t=i.getReader();return{async next(){try{const e=await t.read();return e!=null&&e.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function e$(i){var t,e;if(i===null||typeof i!="object")return;if(i[Symbol.asyncIterator]){await((e=(t=i[Symbol.asyncIterator]()).return)===null||e===void 0?void 0:e.call(t));return}const n=i.getReader(),s=n.cancel();n.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const n$=({headers:i,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zk=()=>{var i;if(typeof File>"u"){const{process:t}=globalThis,e=typeof((i=t==null?void 0:t.versions)===null||i===void 0?void 0:i.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function cb(i,t,e){return Zk(),new File(i,t??"unknown_file",e)}function i$(i){return(typeof i=="object"&&i!==null&&("name"in i&&i.name&&String(i.name)||"url"in i&&i.url&&String(i.url)||"filename"in i&&i.filename&&String(i.filename)||"path"in i&&i.path&&String(i.path))||"").split(/[\\/]/).pop()||void 0}const s$=i=>i!=null&&typeof i=="object"&&typeof i[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jk=i=>i!=null&&typeof i=="object"&&typeof i.size=="number"&&typeof i.type=="string"&&typeof i.text=="function"&&typeof i.slice=="function"&&typeof i.arrayBuffer=="function",o$=i=>i!=null&&typeof i=="object"&&typeof i.name=="string"&&typeof i.lastModified=="number"&&jk(i),r$=i=>i!=null&&typeof i=="object"&&typeof i.url=="string"&&typeof i.blob=="function";async function a$(i,t,e){if(Zk(),i=await i,o$(i))return i instanceof File?i:cb([await i.arrayBuffer()],i.name);if(r$(i)){const s=await i.blob();return t||(t=new URL(i.url).pathname.split(/[\\/]/).pop()),cb(await sC(s),t,e)}const n=await sC(i);if(t||(t=i$(i)),!(e!=null&&e.type)){const s=n.find(r=>typeof r=="object"&&"type"in r&&r.type);typeof s=="string"&&(e=Object.assign(Object.assign({},e),{type:s}))}return cb(n,t,e)}async function sC(i){var t,e,n,s,r;let a=[];if(typeof i=="string"||ArrayBuffer.isView(i)||i instanceof ArrayBuffer)a.push(i);else if(jk(i))a.push(i instanceof Blob?i:await i.arrayBuffer());else if(s$(i))try{for(var u=!0,h=Eo(i),f;f=await h.next(),t=f.done,!t;u=!0){s=f.value,u=!1;const p=s;a.push(...await sC(p))}}catch(p){e={error:p}}finally{try{!u&&!t&&(n=h.return)&&await n.call(h)}finally{if(e)throw e.error}}else{const p=(r=i==null?void 0:i.constructor)===null||r===void 0?void 0:r.name;throw new Error(`Unexpected data type: ${typeof i}${p?`; constructor: ${p}`:""}${l$(i)}`)}return a}function l$(i){return typeof i!="object"||i===null?"":`; props: [${Object.getOwnPropertyNames(i).map(e=>`"${e}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class t2{constructor(t){this._client=t}}t2._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function e2(i){return i.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const KN=Object.freeze(Object.create(null)),u$=(i=e2)=>(function(e,...n){if(e.length===1)return e[0];let s=!1;const r=[],a=e.reduce((p,y,v)=>{var E,b,_;/[?#]/.test(y)&&(s=!0);const w=n[v];let x=(s?encodeURIComponent:i)(""+w);return v!==n.length&&(w==null||typeof w=="object"&&w.toString===((_=Object.getPrototypeOf((b=Object.getPrototypeOf((E=w.hasOwnProperty)!==null&&E!==void 0?E:KN))!==null&&b!==void 0?b:KN))===null||_===void 0?void 0:_.toString))&&(x=w+"",r.push({start:p.length+y.length,length:x.length,error:`Value of type ${Object.prototype.toString.call(w).slice(8,-1)} is not a valid path parameter`})),p+y+(v===n.length?"":x)},""),u=a.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let f;for(;(f=h.exec(u))!==null;)r.push({start:f.index,length:f[0].length,error:`Value "${f[0]}" can't be safely passed as a path parameter`});if(r.sort((p,y)=>p.start-y.start),r.length>0){let p=0;const y=r.reduce((v,E)=>{const b=" ".repeat(E.start-p),_="^".repeat(E.length);return p=E.start+E.length,v+b+_},"");throw new Js(`Path parameters result in path with invalid segments:
${r.map(v=>v.error).join(`
`)}
${a}
${y}`)}return a}),o0=u$(e2);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class n2 extends t2{create(t,e){var n;const{api_version:s=this._client.apiVersion}=t,r=AA(t,["api_version"]);if("model"in r&&"agent_config"in r)throw new Js("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in r&&"generation_config"in r)throw new Js("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(o0`/${s}/interactions`,Object.assign(Object.assign({body:r},e),{stream:(n=t.stream)!==null&&n!==void 0?n:!1}))}delete(t,e={},n){const{api_version:s=this._client.apiVersion}=e??{};return this._client.delete(o0`/${s}/interactions/${t}`,n)}cancel(t,e={},n){const{api_version:s=this._client.apiVersion}=e??{};return this._client.post(o0`/${s}/interactions/${t}/cancel`,n)}get(t,e={},n){var s;const r=e??{},{api_version:a=this._client.apiVersion}=r,u=AA(r,["api_version"]);return this._client.get(o0`/${a}/interactions/${t}`,Object.assign(Object.assign({query:u},n),{stream:(s=e==null?void 0:e.stream)!==null&&s!==void 0?s:!1}))}}n2._key=Object.freeze(["interactions"]);class i2 extends n2{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c$(i){let t=0;for(const s of i)t+=s.length;const e=new Uint8Array(t);let n=0;for(const s of i)e.set(s,n),n+=s.length;return e}let r0;function Ew(i){let t;return(r0??(t=new globalThis.TextEncoder,r0=t.encode.bind(t)))(i)}let a0;function WN(i){let t;return(a0??(t=new globalThis.TextDecoder,a0=t.decode.bind(t)))(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aT{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const e=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Ew(t):t;this.buffer=c$([this.buffer,e]);const n=[];let s;for(;(s=d$(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){n.push(WN(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const r=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,a=WN(this.buffer.subarray(0,r));n.push(a),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return n}flush(){return this.buffer.length?this.decode(`
`):[]}}aT.NEWLINE_CHARS=new Set([`
`,"\r"]);aT.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function d$(i,t){for(let s=t??0;s<i.length;s++){if(i[s]===10)return{preceding:s,index:s+1,carriage:!1};if(i[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function h$(i){for(let n=0;n<i.length-1;n++){if(i[n]===10&&i[n+1]===10||i[n]===13&&i[n+1]===13)return n+2;if(i[n]===13&&i[n+1]===10&&n+3<i.length&&i[n+2]===13&&i[n+3]===10)return n+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TA={off:0,error:200,warn:300,info:400,debug:500},JN=(i,t,e)=>{if(i){if(YX(TA,i))return i;ui(e).warn(`${t} was set to ${JSON.stringify(i)}, expected one of ${JSON.stringify(Object.keys(TA))}`)}};function $p(){}function l0(i,t,e){return!t||TA[i]>TA[e]?$p:t[i].bind(t)}const f$={error:$p,warn:$p,info:$p,debug:$p};let QN=new WeakMap;function ui(i){var t;const e=i.logger,n=(t=i.logLevel)!==null&&t!==void 0?t:"off";if(!e)return f$;const s=QN.get(e);if(s&&s[0]===n)return s[1];const r={error:l0("error",e,n),warn:l0("warn",e,n),info:l0("info",e,n),debug:l0("debug",e,n)};return QN.set(e,[n,r]),r}const Tu=i=>(i.options&&(i.options=Object.assign({},i.options),delete i.options.headers),i.headers&&(i.headers=Object.fromEntries((i.headers instanceof Headers?[...i.headers]:Object.entries(i.headers)).map(([t,e])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":e]))),"retryOfRequestLogID"in i&&(i.retryOfRequestLogID&&(i.retryOf=i.retryOfRequestLogID),delete i.retryOfRequestLogID),i);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wd{constructor(t,e,n){this.iterator=t,this.controller=e,this.client=n}static fromSSEResponse(t,e,n){let s=!1;const r=n?ui(n):console;function a(){return So(this,arguments,function*(){var h,f,p,y;if(s)throw new Js("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let v=!1;try{try{for(var E=!0,b=Eo(p$(t,e)),_;_=yield Dt(b.next()),h=_.done,!h;E=!0){y=_.value,E=!1;const w=y;if(!v)if(w.data.startsWith("[DONE]")){v=!0;continue}else try{yield yield Dt(JSON.parse(w.data))}catch(x){throw r.error("Could not parse message into JSON:",w.data),r.error("From chunk:",w.raw),x}}}catch(w){f={error:w}}finally{try{!E&&!h&&(p=b.return)&&(yield Dt(p.call(b)))}finally{if(f)throw f.error}}v=!0}catch(w){if(tC(w))return yield Dt(void 0);throw w}finally{v||e.abort()}})}return new Wd(a,e,n)}static fromReadableStream(t,e,n){let s=!1;function r(){return So(this,arguments,function*(){var h,f,p,y;const v=new aT,E=Qk(t);try{for(var b=!0,_=Eo(E),w;w=yield Dt(_.next()),h=w.done,!h;b=!0){y=w.value,b=!1;const x=y;for(const N of v.decode(x))yield yield Dt(N)}}catch(x){f={error:x}}finally{try{!b&&!h&&(p=_.return)&&(yield Dt(p.call(_)))}finally{if(f)throw f.error}}for(const x of v.flush())yield yield Dt(x)})}function a(){return So(this,arguments,function*(){var h,f,p,y;if(s)throw new Js("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let v=!1;try{try{for(var E=!0,b=Eo(r()),_;_=yield Dt(b.next()),h=_.done,!h;E=!0){y=_.value,E=!1;const w=y;v||w&&(yield yield Dt(JSON.parse(w)))}}catch(w){f={error:w}}finally{try{!E&&!h&&(p=b.return)&&(yield Dt(p.call(b)))}finally{if(f)throw f.error}}v=!0}catch(w){if(tC(w))return yield Dt(void 0);throw w}finally{v||e.abort()}})}return new Wd(a,e,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],e=[],n=this.iterator(),s=r=>({next:()=>{if(r.length===0){const a=n.next();t.push(a),e.push(a)}return r.shift()}});return[new Wd(()=>s(t),this.controller,this.client),new Wd(()=>s(e),this.controller,this.client)]}toReadableStream(){const t=this;let e;return Jk({async start(){e=t[Symbol.asyncIterator]()},async pull(n){try{const{value:s,done:r}=await e.next();if(r)return n.close();const a=Ew(JSON.stringify(s)+`
`);n.enqueue(a)}catch(s){n.error(s)}},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}}function p$(i,t){return So(this,arguments,function*(){var n,s,r,a;if(!i.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Js("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Js("Attempted to iterate over a response with no body");const u=new g$,h=new aT,f=Qk(i.body);try{for(var p=!0,y=Eo(m$(f)),v;v=yield Dt(y.next()),n=v.done,!n;p=!0){a=v.value,p=!1;const E=a;for(const b of h.decode(E)){const _=u.decode(b);_&&(yield yield Dt(_))}}}catch(E){s={error:E}}finally{try{!p&&!n&&(r=y.return)&&(yield Dt(r.call(y)))}finally{if(s)throw s.error}}for(const E of h.flush()){const b=u.decode(E);b&&(yield yield Dt(b))}})}function m$(i){return So(this,arguments,function*(){var e,n,s,r;let a=new Uint8Array;try{for(var u=!0,h=Eo(i),f;f=yield Dt(h.next()),e=f.done,!e;u=!0){r=f.value,u=!1;const p=r;if(p==null)continue;const y=p instanceof ArrayBuffer?new Uint8Array(p):typeof p=="string"?Ew(p):p;let v=new Uint8Array(a.length+y.length);v.set(a),v.set(y,a.length),a=v;let E;for(;(E=h$(a))!==-1;)yield yield Dt(a.slice(0,E)),a=a.slice(E)}}catch(p){n={error:p}}finally{try{!u&&!e&&(s=h.return)&&(yield Dt(s.call(h)))}finally{if(n)throw n.error}}a.length>0&&(yield yield Dt(a))})}class g${constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(t),t.startsWith(":"))return null;let[e,n,s]=y$(t,":");return s.startsWith(" ")&&(s=s.substring(1)),e==="event"?this.event=s:e==="data"&&this.data.push(s),null}}function y$(i,t){const e=i.indexOf(t);return e!==-1?[i.substring(0,e),t,i.substring(e+t.length)]:[i,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function v$(i,t){const{response:e,requestLogID:n,retryOfRequestLogID:s,startTime:r}=t,a=await(async()=>{var u;if(t.options.stream)return ui(i).debug("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller,i):Wd.fromSSEResponse(e,t.controller,i);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const h=e.headers.get("content-type"),f=(u=h==null?void 0:h.split(";")[0])===null||u===void 0?void 0:u.trim();return(f==null?void 0:f.includes("application/json"))||(f==null?void 0:f.endsWith("+json"))?e.headers.get("content-length")==="0"?void 0:await e.json():await e.text()})();return ui(i).debug(`[${n}] response parsed`,Tu({retryOfRequestLogID:s,url:e.url,status:e.status,body:a,durationMs:Date.now()-r})),a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bw extends Promise{constructor(t,e,n=v$){super(s=>{s(null)}),this.responsePromise=e,this.parseResponse=n,this.client=t}_thenUnwrap(t){return new bw(this.client,this.responsePromise,async(e,n)=>t(await this.parseResponse(e,n),n))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,e]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:e}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,e){return this.parse().then(t,e)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const s2=Symbol("brand.privateNullableHeaders");function*A$(i){if(!i)return;if(s2 in i){const{values:n,nulls:s}=i;yield*n.entries();for(const r of s)yield[r,null];return}let t=!1,e;i instanceof Headers?e=i.entries():YN(i)?e=i:(t=!0,e=Object.entries(i??{}));for(let n of e){const s=n[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const r=YN(n[1])?n[1]:[n[1]];let a=!1;for(const u of r)u!==void 0&&(t&&!a&&(a=!0,yield[s,null]),yield[s,u])}}const Vp=i=>{const t=new Headers,e=new Set;for(const n of i){const s=new Set;for(const[r,a]of A$(n)){const u=r.toLowerCase();s.has(u)||(t.delete(r),s.add(u)),a===null?(t.delete(r),e.add(u)):(t.append(r,a),e.delete(u))}}return{[s2]:!0,values:t,nulls:e}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const db=i=>{var t,e,n,s,r,a;if(typeof globalThis.process<"u")return(n=(e=(t=F4)===null||t===void 0?void 0:t[i])===null||e===void 0?void 0:e.trim())!==null&&n!==void 0?n:void 0;if(typeof globalThis.Deno<"u")return(a=(r=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||r===void 0?void 0:r.call(s,i))===null||a===void 0?void 0:a.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var o2;class lT{constructor(t){var e,n,s,r,a,u,h,{baseURL:f=db("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:p=(e=db("GEMINI_API_KEY"))!==null&&e!==void 0?e:null,apiVersion:y="v1beta"}=t,v=AA(t,["baseURL","apiKey","apiVersion"]);const E=Object.assign(Object.assign({apiKey:p,apiVersion:y},v),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=E.baseURL,this.timeout=(n=E.timeout)!==null&&n!==void 0?n:lT.DEFAULT_TIMEOUT,this.logger=(s=E.logger)!==null&&s!==void 0?s:console;const b="warn";this.logLevel=b,this.logLevel=(a=(r=JN(E.logLevel,"ClientOptions.logLevel",this))!==null&&r!==void 0?r:JN(db("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:b,this.fetchOptions=E.fetchOptions,this.maxRetries=(u=E.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(h=E.fetch)!==null&&h!==void 0?h:jX(),this.encoder=n$,this._options=E,this.apiKey=p,this.apiVersion=y,this.clientAdapter=E.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:e}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!e.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const e=Vp([t.headers]);if(!(e.values.has("authorization")||e.values.has("x-goog-api-key"))){if(this.apiKey)return Vp([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Vp([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([e,n])=>typeof n<"u").map(([e,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(e)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(e)}=`;throw new Js(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ld}`}defaultIdempotencyKey(){return`stainless-node-retry-${OX()}`}makeStatusError(t,e,n,s){return gi.generate(t,e,n,s)}buildURL(t,e,n){const s=!this.baseURLOverridden()&&n||this.baseURL,r=HX(t)?new URL(t):new URL(s+(s.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),a=this.defaultQuery();return qX(a)||(e=Object.assign(Object.assign({},a),e)),typeof e=="object"&&e&&!Array.isArray(e)&&(r.search=this.stringifyQuery(e)),r.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const e=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${e}`}}async prepareRequest(t,{url:e,options:n}){}get(t,e){return this.methodRequest("get",t,e)}post(t,e){return this.methodRequest("post",t,e)}patch(t,e){return this.methodRequest("patch",t,e)}put(t,e){return this.methodRequest("put",t,e)}delete(t,e){return this.methodRequest("delete",t,e)}methodRequest(t,e,n){return this.request(Promise.resolve(n).then(s=>Object.assign({method:t,path:e},s)))}request(t,e=null){return new bw(this,this.makeRequest(t,e,void 0))}async makeRequest(t,e,n){var s,r,a;const u=await t,h=(s=u.maxRetries)!==null&&s!==void 0?s:this.maxRetries;e==null&&(e=h),await this.prepareOptions(u);const{req:f,url:p,timeout:y}=await this.buildRequest(u,{retryCount:h-e});await this.prepareRequest(f,{url:p,options:u});const v="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),E=n===void 0?"":`, retryOf: ${n}`,b=Date.now();if(ui(this).debug(`[${v}] sending request`,Tu({retryOfRequestLogID:n,method:u.method,url:p,options:u,headers:f.headers})),!((r=u.signal)===null||r===void 0)&&r.aborted)throw new nC;const _=new AbortController,w=await this.fetchWithTimeout(p,f,y,_).catch(eC),x=Date.now();if(w instanceof globalThis.Error){const I=`retrying, ${e} attempts remaining`;if(!((a=u.signal)===null||a===void 0)&&a.aborted)throw new nC;const L=tC(w)||/timed? ?out/i.test(String(w)+("cause"in w?String(w.cause):""));if(e)return ui(this).info(`[${v}] connection ${L?"timed out":"failed"} - ${I}`),ui(this).debug(`[${v}] connection ${L?"timed out":"failed"} (${I})`,Tu({retryOfRequestLogID:n,url:p,durationMs:x-b,message:w.message})),this.retryRequest(u,e,n??v);throw ui(this).info(`[${v}] connection ${L?"timed out":"failed"} - error; no more retries left`),ui(this).debug(`[${v}] connection ${L?"timed out":"failed"} (error; no more retries left)`,Tu({retryOfRequestLogID:n,url:p,durationMs:x-b,message:w.message})),L?new Hk:new rT({cause:w})}const N=`[${v}${E}] ${f.method} ${p} ${w.ok?"succeeded":"failed"} with status ${w.status} in ${x-b}ms`;if(!w.ok){const I=await this.shouldRetry(w);if(e&&I){const H=`retrying, ${e} attempts remaining`;return await e$(w.body),ui(this).info(`${N} - ${H}`),ui(this).debug(`[${v}] response error (${H})`,Tu({retryOfRequestLogID:n,url:w.url,status:w.status,headers:w.headers,durationMs:x-b})),this.retryRequest(u,e,n??v,w.headers)}const L=I?"error; no more retries left":"error; not retryable";ui(this).info(`${N} - ${L}`);const U=await w.text().catch(H=>eC(H).message),k=$X(U),B=k?void 0:U;throw ui(this).debug(`[${v}] response error (${L})`,Tu({retryOfRequestLogID:n,url:w.url,status:w.status,headers:w.headers,message:B,durationMs:Date.now()-b})),this.makeStatusError(w.status,k,B,w.headers)}return ui(this).info(N),ui(this).debug(`[${v}] response start`,Tu({retryOfRequestLogID:n,url:w.url,status:w.status,headers:w.headers,durationMs:x-b})),{response:w,options:u,controller:_,requestLogID:v,retryOfRequestLogID:n,startTime:b}}async fetchWithTimeout(t,e,n,s){const r=e||{},{signal:a,method:u}=r,h=AA(r,["signal","method"]),f=this._makeAbort(s);a&&a.addEventListener("abort",f,{once:!0});const p=setTimeout(f,n),y=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,v=Object.assign(Object.assign(Object.assign({signal:s.signal},y?{duplex:"half"}:{}),{method:"GET"}),h);u&&(v.method=u.toUpperCase());try{return await this.fetch.call(void 0,t,v)}finally{clearTimeout(p)}}async shouldRetry(t){const e=t.headers.get("x-should-retry");return e==="true"?!0:e==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,e,n,s){var r;let a;const u=s==null?void 0:s.get("retry-after-ms");if(u){const f=parseFloat(u);Number.isNaN(f)||(a=f)}const h=s==null?void 0:s.get("retry-after");if(h&&!a){const f=parseFloat(h);Number.isNaN(f)?a=Date.parse(h)-Date.now():a=f*1e3}if(!(a&&0<=a&&a<60*1e3)){const f=(r=t.maxRetries)!==null&&r!==void 0?r:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(e,f)}return await KX(a),this.makeRequest(t,e-1,n)}calculateDefaultRetryTimeoutMillis(t,e){const r=e-t,a=Math.min(.5*Math.pow(2,r),8),u=1-Math.random()*.25;return a*u*1e3}async buildRequest(t,{retryCount:e=0}={}){var n,s,r;const a=Object.assign({},t),{method:u,path:h,query:f,defaultBaseURL:p}=a,y=this.buildURL(h,f,p);"timeout"in a&&XX("timeout",a.timeout),a.timeout=(n=a.timeout)!==null&&n!==void 0?n:this.timeout;const{bodyHeaders:v,body:E}=this.buildBody({options:a}),b=await this.buildHeaders({options:t,method:u,bodyHeaders:v,retryCount:e});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:b},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&E instanceof globalThis.ReadableStream&&{duplex:"half"}),E&&{body:E}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(r=a.fetchOptions)!==null&&r!==void 0?r:{}),url:y,timeout:a.timeout}}async buildHeaders({options:t,method:e,bodyHeaders:n,retryCount:s}){let r={};this.idempotencyHeader&&e!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=t.idempotencyKey);const a=await this.authHeaders(t);let u=Vp([r,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),ZX()),this._options.defaultHeaders,n,t.headers,a]);return this.validateHeaders(u),u.values}_makeAbort(t){return()=>t.abort()}buildBody({options:{body:t,headers:e}}){if(!t)return{bodyHeaders:void 0,body:void 0};const n=Vp([e]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&n.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:t$(t)}:typeof t=="object"&&n.values.get("content-type")==="application/x-www-form-urlencoded"?{bodyHeaders:{"content-type":"application/x-www-form-urlencoded"},body:this.stringifyQuery(t)}:this.encoder({body:t,headers:n})}}lT.DEFAULT_TIMEOUT=6e4;class In extends lT{constructor(){super(...arguments),this.interactions=new i2(this)}}o2=In;In.GeminiNextGenAPIClient=o2;In.GeminiNextGenAPIClientError=Js;In.APIError=gi;In.APIConnectionError=rT;In.APIConnectionTimeoutError=Hk;In.APIUserAbortError=nC;In.NotFoundError=Yk;In.ConflictError=Xk;In.RateLimitError=Kk;In.BadRequestError=Gk;In.AuthenticationError=zk;In.InternalServerError=Wk;In.PermissionDeniedError=qk;In.UnprocessableEntityError=$k;In.toFile=a$;In.Interactions=i2;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function T$(i,t){const e={},n=g(i,["name"]);return n!=null&&A(e,["_url","name"],n),e}function S$(i,t){const e={},n=g(i,["name"]);return n!=null&&A(e,["_url","name"],n),e}function E$(i,t){const e={},n=g(i,["sdkHttpResponse"]);return n!=null&&A(e,["sdkHttpResponse"],n),e}function b$(i,t){const e={},n=g(i,["sdkHttpResponse"]);return n!=null&&A(e,["sdkHttpResponse"],n),e}function C$(i,t,e){const n={};if(g(i,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=g(i,["tunedModelDisplayName"]);if(t!==void 0&&s!=null&&A(t,["displayName"],s),g(i,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=g(i,["epochCount"]);t!==void 0&&r!=null&&A(t,["tuningTask","hyperparameters","epochCount"],r);const a=g(i,["learningRateMultiplier"]);if(a!=null&&A(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),g(i,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(g(i,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(g(i,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(g(i,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(g(i,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const u=g(i,["batchSize"]);t!==void 0&&u!=null&&A(t,["tuningTask","hyperparameters","batchSize"],u);const h=g(i,["learningRate"]);if(t!==void 0&&h!=null&&A(t,["tuningTask","hyperparameters","learningRate"],h),g(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(g(i,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(g(i,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(g(i,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(g(i,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(g(i,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(g(i,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return n}function _$(i,t,e){const n={};let s=g(e,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const k=g(i,["validationDataset"]);t!==void 0&&k!=null&&A(t,["supervisedTuningSpec"],hb(k))}else if(s==="PREFERENCE_TUNING"){const k=g(i,["validationDataset"]);t!==void 0&&k!=null&&A(t,["preferenceOptimizationSpec"],hb(k))}else if(s==="DISTILLATION"){const k=g(i,["validationDataset"]);t!==void 0&&k!=null&&A(t,["distillationSpec"],hb(k))}const r=g(i,["tunedModelDisplayName"]);t!==void 0&&r!=null&&A(t,["tunedModelDisplayName"],r);const a=g(i,["description"]);t!==void 0&&a!=null&&A(t,["description"],a);let u=g(e,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const k=g(i,["epochCount"]);t!==void 0&&k!=null&&A(t,["supervisedTuningSpec","hyperParameters","epochCount"],k)}else if(u==="PREFERENCE_TUNING"){const k=g(i,["epochCount"]);t!==void 0&&k!=null&&A(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],k)}else if(u==="DISTILLATION"){const k=g(i,["epochCount"]);t!==void 0&&k!=null&&A(t,["distillationSpec","hyperParameters","epochCount"],k)}let h=g(e,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const k=g(i,["learningRateMultiplier"]);t!==void 0&&k!=null&&A(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],k)}else if(h==="PREFERENCE_TUNING"){const k=g(i,["learningRateMultiplier"]);t!==void 0&&k!=null&&A(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],k)}else if(h==="DISTILLATION"){const k=g(i,["learningRateMultiplier"]);t!==void 0&&k!=null&&A(t,["distillationSpec","hyperParameters","learningRateMultiplier"],k)}let f=g(e,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const k=g(i,["exportLastCheckpointOnly"]);t!==void 0&&k!=null&&A(t,["supervisedTuningSpec","exportLastCheckpointOnly"],k)}else if(f==="PREFERENCE_TUNING"){const k=g(i,["exportLastCheckpointOnly"]);t!==void 0&&k!=null&&A(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],k)}else if(f==="DISTILLATION"){const k=g(i,["exportLastCheckpointOnly"]);t!==void 0&&k!=null&&A(t,["distillationSpec","exportLastCheckpointOnly"],k)}let p=g(e,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const k=g(i,["adapterSize"]);t!==void 0&&k!=null&&A(t,["supervisedTuningSpec","hyperParameters","adapterSize"],k)}else if(p==="PREFERENCE_TUNING"){const k=g(i,["adapterSize"]);t!==void 0&&k!=null&&A(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],k)}else if(p==="DISTILLATION"){const k=g(i,["adapterSize"]);t!==void 0&&k!=null&&A(t,["distillationSpec","hyperParameters","adapterSize"],k)}let y=g(e,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const k=g(i,["tuningMode"]);t!==void 0&&k!=null&&A(t,["supervisedTuningSpec","tuningMode"],k)}const v=g(i,["customBaseModel"]);t!==void 0&&v!=null&&A(t,["customBaseModel"],v);let E=g(e,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){const k=g(i,["batchSize"]);t!==void 0&&k!=null&&A(t,["supervisedTuningSpec","hyperParameters","batchSize"],k)}let b=g(e,["config","method"]);if(b===void 0&&(b="SUPERVISED_FINE_TUNING"),b==="SUPERVISED_FINE_TUNING"){const k=g(i,["learningRate"]);t!==void 0&&k!=null&&A(t,["supervisedTuningSpec","hyperParameters","learningRate"],k)}const _=g(i,["labels"]);t!==void 0&&_!=null&&A(t,["labels"],_);const w=g(i,["beta"]);t!==void 0&&w!=null&&A(t,["preferenceOptimizationSpec","hyperParameters","beta"],w);const x=g(i,["baseTeacherModel"]);t!==void 0&&x!=null&&A(t,["distillationSpec","baseTeacherModel"],x);const N=g(i,["tunedTeacherModelSource"]);t!==void 0&&N!=null&&A(t,["distillationSpec","tunedTeacherModelSource"],N);const I=g(i,["sftLossWeightMultiplier"]);t!==void 0&&I!=null&&A(t,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],I);const L=g(i,["outputUri"]);t!==void 0&&L!=null&&A(t,["outputUri"],L);const U=g(i,["encryptionSpec"]);return t!==void 0&&U!=null&&A(t,["encryptionSpec"],U),n}function w$(i,t){const e={},n=g(i,["baseModel"]);n!=null&&A(e,["baseModel"],n);const s=g(i,["preTunedModel"]);s!=null&&A(e,["preTunedModel"],s);const r=g(i,["trainingDataset"]);r!=null&&B$(r);const a=g(i,["config"]);return a!=null&&C$(a,e),e}function x$(i,t){const e={},n=g(i,["baseModel"]);n!=null&&A(e,["baseModel"],n);const s=g(i,["preTunedModel"]);s!=null&&A(e,["preTunedModel"],s);const r=g(i,["trainingDataset"]);r!=null&&F$(r,e,t);const a=g(i,["config"]);return a!=null&&_$(a,e,t),e}function M$(i,t){const e={},n=g(i,["name"]);return n!=null&&A(e,["_url","name"],n),e}function R$(i,t){const e={},n=g(i,["name"]);return n!=null&&A(e,["_url","name"],n),e}function D$(i,t,e){const n={},s=g(i,["pageSize"]);t!==void 0&&s!=null&&A(t,["_query","pageSize"],s);const r=g(i,["pageToken"]);t!==void 0&&r!=null&&A(t,["_query","pageToken"],r);const a=g(i,["filter"]);return t!==void 0&&a!=null&&A(t,["_query","filter"],a),n}function I$(i,t,e){const n={},s=g(i,["pageSize"]);t!==void 0&&s!=null&&A(t,["_query","pageSize"],s);const r=g(i,["pageToken"]);t!==void 0&&r!=null&&A(t,["_query","pageToken"],r);const a=g(i,["filter"]);return t!==void 0&&a!=null&&A(t,["_query","filter"],a),n}function N$(i,t){const e={},n=g(i,["config"]);return n!=null&&D$(n,e),e}function P$(i,t){const e={},n=g(i,["config"]);return n!=null&&I$(n,e),e}function L$(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const s=g(i,["nextPageToken"]);s!=null&&A(e,["nextPageToken"],s);const r=g(i,["tunedModels"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>r2(u))),A(e,["tuningJobs"],a)}return e}function k$(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const s=g(i,["nextPageToken"]);s!=null&&A(e,["nextPageToken"],s);const r=g(i,["tuningJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>oC(u))),A(e,["tuningJobs"],a)}return e}function U$(i,t){const e={},n=g(i,["name"]);n!=null&&A(e,["model"],n);const s=g(i,["name"]);return s!=null&&A(e,["endpoint"],s),e}function B$(i,t){const e={};if(g(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(g(i,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=g(i,["examples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>r)),A(e,["examples","examples"],s)}return e}function F$(i,t,e){const n={};let s=g(e,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const a=g(i,["gcsUri"]);t!==void 0&&a!=null&&A(t,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(s==="PREFERENCE_TUNING"){const a=g(i,["gcsUri"]);t!==void 0&&a!=null&&A(t,["preferenceOptimizationSpec","trainingDatasetUri"],a)}else if(s==="DISTILLATION"){const a=g(i,["gcsUri"]);t!==void 0&&a!=null&&A(t,["distillationSpec","promptDatasetUri"],a)}let r=g(e,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const a=g(i,["vertexDatasetResource"]);t!==void 0&&a!=null&&A(t,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(r==="PREFERENCE_TUNING"){const a=g(i,["vertexDatasetResource"]);t!==void 0&&a!=null&&A(t,["preferenceOptimizationSpec","trainingDatasetUri"],a)}else if(r==="DISTILLATION"){const a=g(i,["vertexDatasetResource"]);t!==void 0&&a!=null&&A(t,["distillationSpec","promptDatasetUri"],a)}if(g(i,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function r2(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const s=g(i,["name"]);s!=null&&A(e,["name"],s);const r=g(i,["state"]);r!=null&&A(e,["state"],Ek(r));const a=g(i,["createTime"]);a!=null&&A(e,["createTime"],a);const u=g(i,["tuningTask","startTime"]);u!=null&&A(e,["startTime"],u);const h=g(i,["tuningTask","completeTime"]);h!=null&&A(e,["endTime"],h);const f=g(i,["updateTime"]);f!=null&&A(e,["updateTime"],f);const p=g(i,["description"]);p!=null&&A(e,["description"],p);const y=g(i,["baseModel"]);y!=null&&A(e,["baseModel"],y);const v=g(i,["_self"]);return v!=null&&A(e,["tunedModel"],U$(v)),e}function oC(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const s=g(i,["name"]);s!=null&&A(e,["name"],s);const r=g(i,["state"]);r!=null&&A(e,["state"],Ek(r));const a=g(i,["createTime"]);a!=null&&A(e,["createTime"],a);const u=g(i,["startTime"]);u!=null&&A(e,["startTime"],u);const h=g(i,["endTime"]);h!=null&&A(e,["endTime"],h);const f=g(i,["updateTime"]);f!=null&&A(e,["updateTime"],f);const p=g(i,["error"]);p!=null&&A(e,["error"],p);const y=g(i,["description"]);y!=null&&A(e,["description"],y);const v=g(i,["baseModel"]);v!=null&&A(e,["baseModel"],v);const E=g(i,["tunedModel"]);E!=null&&A(e,["tunedModel"],E);const b=g(i,["preTunedModel"]);b!=null&&A(e,["preTunedModel"],b);const _=g(i,["supervisedTuningSpec"]);_!=null&&A(e,["supervisedTuningSpec"],_);const w=g(i,["preferenceOptimizationSpec"]);w!=null&&A(e,["preferenceOptimizationSpec"],w);const x=g(i,["distillationSpec"]);x!=null&&A(e,["distillationSpec"],x);const N=g(i,["tuningDataStats"]);N!=null&&A(e,["tuningDataStats"],N);const I=g(i,["encryptionSpec"]);I!=null&&A(e,["encryptionSpec"],I);const L=g(i,["partnerModelTuningSpec"]);L!=null&&A(e,["partnerModelTuningSpec"],L);const U=g(i,["customBaseModel"]);U!=null&&A(e,["customBaseModel"],U);const k=g(i,["experiment"]);k!=null&&A(e,["experiment"],k);const B=g(i,["labels"]);B!=null&&A(e,["labels"],B);const z=g(i,["outputUri"]);z!=null&&A(e,["outputUri"],z);const H=g(i,["pipelineJob"]);H!=null&&A(e,["pipelineJob"],H);const j=g(i,["serviceAccount"]);j!=null&&A(e,["serviceAccount"],j);const et=g(i,["tunedModelDisplayName"]);et!=null&&A(e,["tunedModelDisplayName"],et);const at=g(i,["veoTuningSpec"]);return at!=null&&A(e,["veoTuningSpec"],at),e}function O$(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const s=g(i,["name"]);s!=null&&A(e,["name"],s);const r=g(i,["metadata"]);r!=null&&A(e,["metadata"],r);const a=g(i,["done"]);a!=null&&A(e,["done"],a);const u=g(i,["error"]);return u!=null&&A(e,["error"],u),e}function hb(i,t){const e={},n=g(i,["gcsUri"]);n!=null&&A(e,["validationDatasetUri"],n);const s=g(i,["vertexDatasetResource"]);return s!=null&&A(e,["validationDatasetUri"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class V$ extends Sa{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new Yc(ya.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(e),e),this.get=async e=>await this.getInternal(e),this.tune=async e=>{var n;if(this.apiClient.isVertexAI())if(e.baseModel.startsWith("projects/")){const s={tunedModelName:e.baseModel};!((n=e.config)===null||n===void 0)&&n.preTunedModelCheckpointId&&(s.checkpointId=e.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},e),{preTunedModel:s});return r.baseModel=void 0,await this.tuneInternal(r)}else{const s=Object.assign({},e);return await this.tuneInternal(s)}else{const s=Object.assign({},e),r=await this.tuneMldevInternal(s);let a="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?a=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(a=r.name.split("/operations/")[0]),{name:a,state:Xb.JOB_STATE_QUEUED}}}}async getInternal(t){var e,n,s,r;let a,u="",h={};if(this.apiClient.isVertexAI()){const f=R$(t);return u=dt("{name}",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>oC(p))}else{const f=M$(t);return u=dt("{name}",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>r2(p))}}async listInternal(t){var e,n,s,r;let a,u="",h={};if(this.apiClient.isVertexAI()){const f=P$(t);return u=dt("tuningJobs",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const y=k$(p),v=new CN;return Object.assign(v,y),v})}else{const f=N$(t);return u=dt("tunedModels",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const y=L$(p),v=new CN;return Object.assign(v,y),v})}}async cancel(t){var e,n,s,r;let a,u="",h={};if(this.apiClient.isVertexAI()){const f=S$(t);return u=dt("{name}:cancel",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const y=b$(p),v=new _N;return Object.assign(v,y),v})}else{const f=T$(t);return u=dt("{name}:cancel",f._url),h=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const y=E$(p),v=new _N;return Object.assign(v,y),v})}}async tuneInternal(t){var e,n;let s,r="",a={};if(this.apiClient.isVertexAI()){const u=x$(t,t);return r=dt("tuningJobs",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),s.then(h=>oC(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var e,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=w$(t);return r=dt("tunedModels",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),s.then(h=>O$(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class H${async download(t,e){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const G$=1024*1024*8,z$=3,q$=1e3,Y$=2,SA="x-goog-upload-status";async function X$(i,t,e){var n;const s=await a2(i,t,e),r=await(s==null?void 0:s.json());if(((n=s==null?void 0:s.headers)===null||n===void 0?void 0:n[SA])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return r.file}async function $$(i,t,e){var n;const s=await a2(i,t,e),r=await(s==null?void 0:s.json());if(((n=s==null?void 0:s.headers)===null||n===void 0?void 0:n[SA])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=gk(r),u=new gw;return Object.assign(u,a),u}async function a2(i,t,e){var n,s;let r=0,a=0,u=new Kb(new Response),h="upload";for(r=i.size;a<r;){const f=Math.min(G$,r-a),p=i.slice(a,a+f);a+f>=r&&(h+=", finalize");let y=0,v=q$;for(;y<z$&&(u=await e.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(a),"Content-Length":String(f)}}}),!(!((n=u==null?void 0:u.headers)===null||n===void 0)&&n[SA]));)y++,await W$(v),v=v*Y$;if(a+=f,((s=u==null?void 0:u.headers)===null||s===void 0?void 0:s[SA])!=="active")break;if(r<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function K$(i){return{size:i.size,type:i.type}}function W$(i){return new Promise(t=>setTimeout(t,i))}class J${async upload(t,e,n){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await X$(t,e,n)}async uploadToFileSearchStore(t,e,n){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await $$(t,e,n)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await K$(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Q${create(t,e,n){return new Z$(t,e,n)}}class Z${constructor(t,e,n){this.url=t,this.headers=e,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZN="x-goog-api-key";class j${constructor(t){this.apiKey=t}async addAuthHeaders(t,e){if(t.get(ZN)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(ZN,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const t9="gl-node/";class e9{get interactions(){var t;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new In({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout,maxRetries:(t=e==null?void 0:e.retryOptions)===null||t===void 0?void 0:t.attempts});return this._interactions=n.interactions,this._interactions}constructor(t){var e;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(e=t.vertexai)!==null&&e!==void 0?e:!1,this.apiKey=t.apiKey;const n=G4(t.httpOptions,t.vertexai,void 0,void 0);n&&(t.httpOptions?t.httpOptions.baseUrl=n:t.httpOptions={baseUrl:n}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const s=new j$(this.apiKey);this.apiClient=new KY({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:t9+"web",uploader:new J$,downloader:new H$}),this.models=new fX(this.apiClient),this.live=new aX(this.apiClient,s,new Q$),this.batches=new Aq(this.apiClient),this.chats=new t6(this.models,this.apiClient),this.caches=new Qq(this.apiClient),this.files=new h6(this.apiClient),this.operations=new pX(this.apiClient),this.authTokens=new DX(this.apiClient),this.tunings=new V$(this.apiClient),this.fileSearchStores=new FX(this.apiClient)}}const Cw=new e9({apiKey:"AIzaSyBNmKVIitJLMVH8rPtnMPq7Xo4n6jxttdQ"});async function n9(i){const{question:t,selectedAnswer:e,correctAnswer:n,isCorrect:s,topic:r}=i,a=`
    You are a subject matter expert. Provide a 1-2 sentence technical explanation for this quiz question.
    
    Topic: ${r}
    Question: ${t}
    Student selected: ${e||"Skipped"}
    Correct answer: ${n}
    Result: ${s?"Correct":"Incorrect"}
    
    Rules:
    - DO NOT say "Good job", "Spot on", "Correct", or any praise.
    - DO NOT repeat the question or the answer text unnecessarily.
    - Provide ONLY the scientific/technical explanation of why the correct answer is right and why the other might be wrong.
    - Max 2 sentences.
  `;try{return(await Cw.models.generateContent({model:"gemini-3-flash-preview",contents:a})).text||"I'm sorry, I couldn't generate an explanation right now."}catch(u){return console.error("Error generating AI explanation:",u),"The AI is currently unavailable. The correct answer is: "+n}}async function i9(i,t){const e=`
    Based on the following text extracted from a PDF, generate ${t} multiple-choice questions.
    Each question must have exactly 4 options and 1 correct answer.
    
    Text:
    ${i.substring(0,15e3)} // Limit text size for prompt
  `;try{const n=await Cw.models.generateContent({model:"gemini-3-flash-preview",contents:e,config:{responseMimeType:"application/json",responseSchema:{type:di.ARRAY,items:{type:di.OBJECT,properties:{topic:{type:di.STRING,description:"The specific topic or sub-heading of the question"},q:{type:di.STRING,description:"The question text"},a:{type:di.ARRAY,items:{type:di.STRING},description:"Array of 4 possible answers"},correct:{type:di.INTEGER,description:"The 0-based index of the correct answer in the 'a' array"}},required:["topic","q","a","correct"]}}}});return JSON.parse(n.text||"[]")}catch(n){throw console.error("Error generating questions:",n),new Error("Failed to generate questions from PDF.")}}async function s9(i){const t=i.map(n=>({topic:n.question.topic,isCorrect:n.isCorrect,skipped:n.selectedIdx===null})),e=`
    Analyze these quiz results and provide a 2-3 sentence summary of the student's performance.
    Identify which topics they are struggling with and why (based on common misconceptions in those areas).
    
    Results:
    ${JSON.stringify(t)}
    
    Rules:
    - Be direct and technical.
    - No praise.
    - Focus on identifying patterns in errors.
  `;try{return(await Cw.models.generateContent({model:"gemini-3-flash-preview",contents:e})).text||"Analysis unavailable."}catch(n){return console.error("Error analyzing results:",n),"Could not analyze results at this time."}}const ci=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),rC=[.001,0,0,.001,0,0],fb=1.35,ps={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Za={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},_m="pdfjs_internal_editor_",Ut={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Jt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},o9={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},aC={TRIANGLES:1,LATTICE:2},mn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},w0={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},un={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},kd={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},uT={ERRORS:0,WARNINGS:1,INFOS:5},wm={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Hp={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},r9={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let cT=uT.WARNINGS;function a9(i){Number.isInteger(i)&&(cT=i)}function l9(){return cT}function dT(i){cT>=uT.INFOS&&console.info(`Info: ${i}`)}function It(i){cT>=uT.WARNINGS&&console.warn(`Warning: ${i}`)}function re(i){throw new Error(i)}function oe(i,t){i||re(t)}function u9(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function l2(i,t=null,e=null){if(!i)return null;if(e&&typeof i=="string"){if(e.addDefaultProtocol&&i.startsWith("www.")){const s=i.match(/\./g);(s==null?void 0:s.length)>=2&&(i=`http://${i}`)}if(e.tryConvertEncoding)try{i=m9(i)}catch{}}const n=t?URL.parse(i,t):URL.parse(i);return u9(n)?n:null}function u2(i,t,e=!1){const n=URL.parse(i);return n?(n.hash=t,n.href):e&&l2(i,"http://example.com")?i.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Nt(i,t,e,n=!1){return Object.defineProperty(i,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Xc=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class jN extends Xc{constructor(t,e){super(t,"PasswordException"),this.code=e}}class pb extends Xc{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class lC extends Xc{constructor(t){super(t,"InvalidPDFException")}}class EA extends Xc{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class c9 extends Xc{constructor(t){super(t,"FormatError")}}class Wl extends Xc{constructor(t){super(t,"AbortException")}}function d9(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&re("Invalid argument for bytesToString");const t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);const n=[];for(let s=0;s<t;s+=e){const r=Math.min(s+e,t),a=i.subarray(s,r);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function hT(i){typeof i!="string"&&re("Invalid argument for stringToBytes");const t=i.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=i.charCodeAt(n)&255;return e}function h9(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function f9(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function p9(){try{return new Function(""),!0}catch{return!1}}class Tn{static get isLittleEndian(){return Nt(this,"isLittleEndian",f9())}static get isEvalSupported(){return Nt(this,"isEvalSupported",p9())}static get isOffscreenCanvasSupported(){return Nt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Nt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Nt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Nt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Nt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return Nt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const mb=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var fa,x0,uC;class ht{static makeHexColor(t,e,n){return`#${mb[t]}${mb[e]}${mb[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const s=t[n],r=t[n+1];t[n]=s*e[0]+r*e[2]+e[4],t[n+1]=s*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const s=e[0],r=e[1],a=e[2],u=e[3],h=e[4],f=e[5];for(let p=0;p<6;p+=2){const y=t[n+p],v=t[n+p+1];t[n+p]=y*s+v*a+h,t[n+p+1]=y*r+v*u+f}}static applyInverseTransform(t,e){const n=t[0],s=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-s*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-n*e[1]+s*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,n){const s=e[0],r=e[1],a=e[2],u=e[3],h=e[4],f=e[5],p=t[0],y=t[1],v=t[2],E=t[3];let b=s*p+h,_=b,w=s*v+h,x=w,N=u*y+f,I=N,L=u*E+f,U=L;if(r!==0||a!==0){const k=r*p,B=r*v,z=a*y,H=a*E;b+=z,x+=z,w+=H,_+=H,N+=k,U+=k,L+=B,I+=B}n[0]=Math.min(n[0],b,w,_,x),n[1]=Math.min(n[1],N,L,I,U),n[2]=Math.max(n[2],b,w,_,x),n[3]=Math.max(n[3],N,L,I,U)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],s=t[1],r=t[2],a=t[3],u=n**2+s**2,h=n*r+s*a,f=r**2+a**2,p=(u+f)/2,y=Math.sqrt(p**2-(u*f-h**2));e[0]=Math.sqrt(p+y||1),e[1]=Math.sqrt(p-y||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>s)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),a=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>a?null:[n,r,s,a]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,s,r){r[0]=Math.min(r[0],t,n),r[1]=Math.min(r[1],e,s),r[2]=Math.max(r[2],t,n),r[3]=Math.max(r[3],e,s)}static bezierBoundingBox(t,e,n,s,r,a,u,h,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,h),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,h),D(this,fa,uC).call(this,t,n,r,u,e,s,a,h,3*(-t+3*(n-r)+u),6*(t-2*n+r),3*(n-t),f),D(this,fa,uC).call(this,t,n,r,u,e,s,a,h,3*(-e+3*(s-a)+h),6*(e-2*s+a),3*(s-e),f)}}fa=new WeakSet,x0=function(t,e,n,s,r,a,u,h,f,p){if(f<=0||f>=1)return;const y=1-f,v=f*f,E=v*f,b=y*(y*(y*t+3*f*e)+3*v*n)+E*s,_=y*(y*(y*r+3*f*a)+3*v*u)+E*h;p[0]=Math.min(p[0],b),p[1]=Math.min(p[1],_),p[2]=Math.max(p[2],b),p[3]=Math.max(p[3],_)},uC=function(t,e,n,s,r,a,u,h,f,p,y,v){if(Math.abs(f)<1e-12){Math.abs(p)>=1e-12&&D(this,fa,x0).call(this,t,e,n,s,r,a,u,h,-y/p,v);return}const E=p**2-4*y*f;if(E<0)return;const b=Math.sqrt(E),_=2*f;D(this,fa,x0).call(this,t,e,n,s,r,a,u,h,(-p+b)/_,v),D(this,fa,x0).call(this,t,e,n,s,r,a,u,h,(-p-b)/_,v)},R(ht,fa);function m9(i){return decodeURIComponent(escape(i))}let gb=null,tP=null;function g9(i){return gb||(gb=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,tP=new Map([["","t"]])),i.replaceAll(gb,(t,e,n)=>e?e.normalize("NFKC"):tP.get(n))}function c2(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),d9(i)}const Jd="pdfjs_internal_id_";function y9(i,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,s,...r]=e;if(!i(n)&&!Number.isInteger(n)||!t(s))return!1;const a=r.length;let u=!0;switch(s.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;u=!1;break;default:return!1}for(const h of r)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function qn(i,t,e){return Math.min(Math.max(i,t),e)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(i){return i.reduce((t,e)=>t+e,0)});class xm{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function s(r){var h;if(!r)return;let a=null;const u=r.name;if(u==="#text")a=r.value;else if(xm.shouldBuildText(u))(h=r==null?void 0:r.attributes)!=null&&h.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&e.push({str:a}),!!r.children)for(const f of r.children)s(f)}return s(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class d2{static setupStorage(t,e,n,s,r){const a=s.getValue(e,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(t.textContent=a.value),r==="print")break;t.addEventListener("input",u=>{s.setValue(e,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?t.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",u=>{s.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&t.setAttribute("value",a.value),r==="print")break;t.addEventListener("input",u=>{s.setValue(e,{value:u.target.value})})}break;case"select":if(a.value!==null){t.setAttribute("value",a.value);for(const u of n.children)u.attributes.value===a.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const h=u.target.options,f=h.selectedIndex===-1?"":h[h.selectedIndex].value;s.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:s,linkService:r}){const{attributes:a}=e,u=t instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[h,f]of Object.entries(a))if(f!=null)switch(h){case"class":f.length&&t.setAttribute(h,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,f)}u&&r.addLinkAttributes(t,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(t,a.dataId,e,n)}static render(t){var y,v;const e=t.annotationStorage,n=t.linkService,s=t.xfaHtml,r=t.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:r,linkService:n});const u=r!=="richText",h=t.div;if(h.append(a),t.viewport){const E=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=E}u&&h.setAttribute("class","xfaLayer xfaFont");const f=[];if(s.children.length===0){if(s.value){const E=document.createTextNode(s.value);a.append(E),u&&xm.shouldBuildText(s.name)&&f.push(E)}return{textDivs:f}}const p=[[s,-1,a]];for(;p.length>0;){const[E,b,_]=p.at(-1);if(b+1===E.children.length){p.pop();continue}const w=E.children[++p.at(-1)[1]];if(w===null)continue;const{name:x}=w;if(x==="#text"){const I=document.createTextNode(w.value);f.push(I),_.append(I);continue}const N=(y=w==null?void 0:w.attributes)!=null&&y.xmlns?document.createElementNS(w.attributes.xmlns,x):document.createElement(x);if(_.append(N),w.attributes&&this.setAttributes({html:N,element:w,storage:e,intent:r,linkService:n}),((v=w.children)==null?void 0:v.length)>0)p.push([w,-1,N]);else if(w.value){const I=document.createTextNode(w.value);u&&xm.shouldBuildText(x)&&f.push(I),N.append(I)}}for(const E of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))E.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const _r="http://www.w3.org/2000/svg",Cu=class Cu{};Z(Cu,"CSS",96),Z(Cu,"PDF",72),Z(Cu,"PDF_TO_CSS_UNITS",Cu.CSS/Cu.PDF);let Jl=Cu;async function Dy(i,t="text"){if(Kp(i,document.baseURI)){const e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const s=new XMLHttpRequest;s.open("GET",i,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class Iy{constructor({viewBox:t,userUnit:e,scale:n,rotation:s,offsetX:r=0,offsetY:a=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=s,this.offsetX=r,this.offsetY=a,n*=e;const h=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let p,y,v,E;switch(s%=360,s<0&&(s+=360),s){case 180:p=-1,y=0,v=0,E=1;break;case 90:p=0,y=1,v=1,E=0;break;case 270:p=0,y=-1,v=-1,E=0;break;case 0:p=1,y=0,v=0,E=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(v=-v,E=-E);let b,_,w,x;p===0?(b=Math.abs(f-t[1])*n+r,_=Math.abs(h-t[0])*n+a,w=(t[3]-t[1])*n,x=(t[2]-t[0])*n):(b=Math.abs(h-t[0])*n+r,_=Math.abs(f-t[1])*n+a,w=(t[2]-t[0])*n,x=(t[3]-t[1])*n),this.transform=[p*n,y*n,v*n,E*n,b-p*n*h-v*n*f,_-y*n*h-E*n*f],this.width=w,this.height=x}get rawDims(){const t=this.viewBox;return Nt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new Iy({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:r})}convertToViewportPoint(t,e){const n=[t,e];return ht.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];ht.applyTransform(e,this.transform);const n=[t[2],t[3]];return ht.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return ht.applyInverseTransform(n,this.transform),n}}class _w extends Xc{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function fT(i){const t=i.length;let e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function ww(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function v9(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function A9(i,t="document.pdf"){if(typeof i!="string")return t;if(fT(i))return It('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(i);if(!n)return t;const s=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},r=/\.pdf$/i,a=n.pathname.split("/").at(-1);if(r.test(a))return s(a);if(n.searchParams.size>0){const u=Array.from(n.searchParams.values()).reverse();for(const f of u)if(r.test(f))return s(f);const h=Array.from(n.searchParams.keys()).reverse();for(const f of h)if(r.test(f))return s(f)}if(n.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(h)return s(h[0])}return t}class eP{constructor(){Z(this,"started",Object.create(null));Z(this,"times",[])}time(t){t in this.started&&It(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||It(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:s,end:r}of this.times)t.push(`${n.padEnd(e)} ${r-s}ms
`);return t.join("")}}function Kp(i,t){const e=t?URL.parse(i,t):URL.parse(i);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function Qs(i){i.preventDefault()}function Qe(i){i.preventDefault(),i.stopPropagation()}function T9(i){console.log("Deprecated API usage: "+i)}var Im;class bA{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;d(this,Im)||C(this,Im,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=d(this,Im).exec(t);if(!e)return null;const n=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(e[4],10);a=a>=0&&a<=23?a:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const f=e[7]||"Z";let p=parseInt(e[8],10);p=p>=0&&p<=23?p:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(a+=p,u+=y):f==="+"&&(a-=p,u-=y),new Date(Date.UTC(n,s,r,a,u,h))}}Im=new WeakMap,R(bA,Im);function S9(i,{scale:t=1,rotation:e=0}){const{width:n,height:s}=i.attributes.style,r=[0,0,parseInt(n),parseInt(s)];return new Iy({viewBox:r,userUnit:1,scale:t,rotation:e})}function Ny(i){if(i.startsWith("#")){const t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(It(`Not a valid color format: "${i}"`),[0,0,0])}function E9(i){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of i.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;i.set(e,Ny(n))}t.remove()}function Ve(i){const{a:t,b:e,c:n,d:s,e:r,f:a}=i.getTransform();return[t,e,n,s,r,a]}function Ro(i){const{a:t,b:e,c:n,d:s,e:r,f:a}=i.getTransform().invertSelf();return[t,e,n,s,r,a]}function Gc(i,t,e=!1,n=!0){if(t instanceof Iy){const{pageWidth:s,pageHeight:r}=t.rawDims,{style:a}=i,u=Tn.isCSSRoundSupported,h=`var(--total-scale-factor) * ${s}px`,f=`var(--total-scale-factor) * ${r}px`,p=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,y=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(a.width=p,a.height=y):(a.width=y,a.height=p)}n&&i.setAttribute("data-main-rotation",t.rotation)}class sr{constructor(){const{pixelRatio:t}=sr;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,s,r=-1){let a=1/0,u=1/0,h=1/0;n=sr.capPixels(n,r),n>0&&(a=Math.sqrt(n/(t*e))),s!==-1&&(u=s/t,h=s/e);const f=Math.min(a,u,h);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const cC=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class b9{static get isDarkMode(){var t;return Nt(this,"isDarkMode",!!((t=window==null?void 0:window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches))}}class C9{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),Nt(this,"commentForegroundColor",Ny(n))}}function _9(i,t,e,n){n=Math.min(Math.max(n??1,0),1);const s=255*(1-n);return i=Math.round(i*n+s),t=Math.round(t*n+s),e=Math.round(e*n+s),[i,t,e]}function nP(i,t){const e=i[0]/255,n=i[1]/255,s=i[2]/255,r=Math.max(e,n,s),a=Math.min(e,n,s),u=(r+a)/2;if(r===a)t[0]=t[1]=0;else{const h=r-a;switch(t[1]=u<.5?h/(r+a):h/(2-r-a),r){case e:t[0]=((n-s)/h+(n<s?6:0))*60;break;case n:t[0]=((s-e)/h+2)*60;break;case s:t[0]=((e-n)/h+4)*60;break}}t[2]=u}function dC(i,t){const e=i[0],n=i[1],s=i[2],r=(1-Math.abs(2*s-1))*n,a=r*(1-Math.abs(e/60%2-1)),u=s-r/2;switch(Math.floor(e/60)){case 0:t[0]=r+u,t[1]=a+u,t[2]=u;break;case 1:t[0]=a+u,t[1]=r+u,t[2]=u;break;case 2:t[0]=u,t[1]=r+u,t[2]=a+u;break;case 3:t[0]=u,t[1]=a+u,t[2]=r+u;break;case 4:t[0]=a+u,t[1]=u,t[2]=r+u;break;case 5:case 6:t[0]=r+u,t[1]=u,t[2]=a+u;break}}function iP(i){return i<=.03928?i/12.92:((i+.055)/1.055)**2.4}function sP(i,t,e){dC(i,e),e.map(iP);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];dC(t,e),e.map(iP);const s=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>s?(n+.05)/(s+.05):(s+.05)/(n+.05)}const oP=new Map;function w9(i,t){const e=i[0]+i[1]*256+i[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=oP.get(e);if(n)return n;const s=new Float32Array(9),r=s.subarray(0,3),a=s.subarray(3,6);nP(i,a);const u=s.subarray(6,9);nP(t,u);const h=u[2]<.5,f=h?12:4.5;if(a[2]=h?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),sP(a,u,r)<f){let p,y;h?(p=a[2],y=1):(p=0,y=a[2]);const v=.005;for(;y-p>v;){const E=a[2]=(p+y)/2;h===sP(a,u,r)<f?p=E:y=E}a[2]=h?y:p}return dC(a,r),n=ht.makeHexColor(Math.round(r[0]*255),Math.round(r[1]*255),Math.round(r[2]*255)),oP.set(e,n),n}function h2({html:i,dir:t,className:e},n){const s=document.createDocumentFragment();if(typeof i=="string"){const r=document.createElement("p");r.dir=t||"auto";const a=i.split(/(?:\r\n?|\n)/);for(let u=0,h=a.length;u<h;++u){const f=a[u];r.append(document.createTextNode(f)),u<h-1&&r.append(document.createElement("br"))}s.append(r)}else d2.render({xfaHtml:i,div:s,intent:"richText"});s.firstElementChild.classList.add("richText",e),n.append(s)}function f2(i){const t=new Path2D;if(!i)return t;for(let e=0,n=i.length;e<n;)switch(i[e++]){case Hp.moveTo:t.moveTo(i[e++],i[e++]);break;case Hp.lineTo:t.lineTo(i[e++],i[e++]);break;case Hp.curveTo:t.bezierCurveTo(i[e++],i[e++],i[e++],i[e++],i[e++],i[e++]);break;case Hp.quadraticCurveTo:t.quadraticCurveTo(i[e++],i[e++],i[e++],i[e++]);break;case Hp.closePath:t.closePath();break;default:It(`Unrecognized drawing path operator: ${i[e-1]}`);break}return t}var Dr,oo,rh,ja,Ru,Lf,p2,m2;const Qt=class Qt{constructor(){R(this,Lf)}get pagesNumber(){return d(Qt,ja)}set pagesNumber(t){d(Qt,ja)!==t&&(C(Qt,ja,t),t===0&&(C(Qt,oo,null),C(Qt,Dr,null)))}addListener(t){d(Qt,Ru).push(t)}removeListener(t){const e=d(Qt,Ru).indexOf(t);e>=0&&d(Qt,Ru).splice(e,1)}movePages(t,e,n){D(this,Lf,m2).call(this,!0);const s=d(Qt,oo),r=d(Qt,Dr);d(Qt,rh).set(r);const a=e.length,u=new Uint32Array(a);let h=0;for(let E=0;E<a;E++){const b=e[E]-1;u[E]=s[b],b<n&&(h+=1)}const f=d(Qt,ja);let p=n-h;const y=f-a;p=qn(p,0,y);for(let E=0,b=0;E<f;E++)t.has(E+1)||(s[b++]=s[E]);s.copyWithin(p+a,p,y),s.set(u,p);let v=!1;for(let E=0,b=f;E<b;E++){const _=s[E];v||(v=_!==E+1),r[_-1]=E+1}D(this,Lf,p2).call(this),v||(this.pagesNumber=0)}hasBeenAltered(){return d(Qt,oo)!==null}getPageMappingForSaving(){return{pageIndices:d(Qt,Dr)?d(Qt,Dr).map(t=>t-1):null}}getPrevPageNumber(t){return d(Qt,rh)[d(Qt,oo)[t-1]-1]}getPageNumber(t){var e;return((e=d(Qt,Dr))==null?void 0:e[t-1])??t}getPageId(t){var e;return((e=d(Qt,oo))==null?void 0:e[t-1])??t}static get instance(){return Nt(this,"instance",new Qt)}getMapping(){return d(Qt,oo).subarray(0,this.pagesNumber)}};Dr=new WeakMap,oo=new WeakMap,rh=new WeakMap,ja=new WeakMap,Ru=new WeakMap,Lf=new WeakSet,p2=function(){for(const t of d(Qt,Ru))t()},m2=function(t){if(d(Qt,oo))return;const e=d(Qt,ja),n=new Uint32Array(3*e),s=C(Qt,oo,n.subarray(0,e)),r=C(Qt,Dr,n.subarray(e,2*e));if(t)for(let a=0;a<e;a++)s[a]=r[a]=a+1;C(Qt,rh,n.subarray(2*e))},R(Qt,Dr,null),R(Qt,oo,null),R(Qt,rh,null),R(Qt,ja,0),R(Qt,Ru,[]);let Mm=Qt;var tl,el,Ns,Ps,Nm,nl,ah,lh,Pm,kA,g2,$n,y2,v2,Ud,Wp;const Mr=class Mr{constructor(t){R(this,$n);R(this,tl,null);R(this,el,null);R(this,Ns);R(this,Ps,null);R(this,Nm,null);R(this,nl,null);R(this,ah,null);R(this,lh,null);C(this,Ns,t),d(Mr,Pm)||C(Mr,Pm,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=C(this,tl,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=d(this,Ns)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Qs,{signal:e}),t.addEventListener("pointerdown",D(Mr,kA,g2),{signal:e}));const n=C(this,Ps,document.createElement("div"));n.className="buttons",t.append(n);const s=d(this,Ns).toolbarPosition;if(s){const{style:r}=t,a=d(this,Ns)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return d(this,tl)}hide(){var t;d(this,tl).classList.add("hidden"),(t=d(this,el))==null||t.hideDropdown()}show(){var t,e;d(this,tl).classList.remove("hidden"),(t=d(this,Nm))==null||t.shown(),(e=d(this,nl))==null||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=d(this,Ns),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",d(Mr,Pm)[t]),D(this,$n,Ud).call(this,n)&&n.addEventListener("click",s=>{e.delete()},{signal:e._signal}),d(this,Ps).append(n)}async addAltText(t){const e=await t.render();D(this,$n,Ud).call(this,e),d(this,Ps).append(e,d(this,$n,Wp)),C(this,Nm,t)}addComment(t,e=null){if(d(this,nl))return;const n=t.renderForToolbar();if(!n)return;D(this,$n,Ud).call(this,n);const s=C(this,ah,d(this,$n,Wp));e?(d(this,Ps).insertBefore(n,e),d(this,Ps).insertBefore(s,e)):d(this,Ps).append(n,s),C(this,nl,t),t.toolbar=this}addColorPicker(t){if(d(this,el))return;C(this,el,t);const e=t.renderButton();D(this,$n,Ud).call(this,e),d(this,Ps).append(e,d(this,$n,Wp))}async addEditSignatureButton(t){const e=C(this,lh,await t.renderEditButton(d(this,Ns)));D(this,$n,Ud).call(this,e),d(this,Ps).append(e,d(this,$n,Wp))}removeButton(t){var e,n;switch(t){case"comment":(e=d(this,nl))==null||e.removeToolbarCommentButton(),C(this,nl,null),(n=d(this,ah))==null||n.remove(),C(this,ah,null);break}}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,n){if(!e&&t==="comment")return;const s=d(this,Ps).querySelector(n);s&&t==="comment"&&this.addComment(e,s)}updateEditSignatureButton(t){d(this,lh)&&(d(this,lh).title=t)}remove(){var t;d(this,tl).remove(),(t=d(this,el))==null||t.destroy(),C(this,el,null)}};tl=new WeakMap,el=new WeakMap,Ns=new WeakMap,Ps=new WeakMap,Nm=new WeakMap,nl=new WeakMap,ah=new WeakMap,lh=new WeakMap,Pm=new WeakMap,kA=new WeakSet,g2=function(t){t.stopPropagation()},$n=new WeakSet,y2=function(t){d(this,Ns)._focusEventsAllowed=!1,Qe(t)},v2=function(t){d(this,Ns)._focusEventsAllowed=!0,Qe(t)},Ud=function(t){const e=d(this,Ns)._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",D(this,$n,y2).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",D(this,$n,v2).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Qs,{signal:e}),!0)},Wp=function(){const t=document.createElement("div");return t.className="divider",t},R(Mr,kA),R(Mr,Pm,null);let hC=Mr;var Lm,Du,Ir,va,A2,T2,fC;class x9{constructor(t){R(this,va);R(this,Lm,null);R(this,Du,null);R(this,Ir);C(this,Ir,t)}show(t,e,n){const[s,r]=D(this,va,T2).call(this,e,n),{style:a}=d(this,Du)||C(this,Du,D(this,va,A2).call(this));t.append(d(this,Du)),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){d(this,Du).remove()}}Lm=new WeakMap,Du=new WeakMap,Ir=new WeakMap,va=new WeakSet,A2=function(){const t=C(this,Du,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=d(this,Ir)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Qs,{signal:e});const n=C(this,Lm,document.createElement("div"));return n.className="buttons",t.append(n),d(this,Ir).hasCommentManager()&&D(this,va,fC).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{d(this,Ir).commentSelection("floating_button")}),D(this,va,fC).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{d(this,Ir).highlightSelection("floating_button")}),t},T2=function(t,e){let n=0,s=0;for(const r of t){const a=r.y+r.height;if(a<n)continue;const u=r.x+(e?r.width:0);if(a>n){s=u,n=a;continue}e?u>s&&(s=u):u<s&&(s=u)}return[e?1-s:s,n]},fC=function(t,e,n,s){const r=document.createElement("button");r.classList.add("basic",t),r.tabIndex=0,r.setAttribute("data-l10n-id",e);const a=document.createElement("span");r.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",n);const u=d(this,Ir)._signal;u instanceof AbortSignal&&!u.aborted&&(r.addEventListener("contextmenu",Qs,{signal:u}),r.addEventListener("click",s,{signal:u})),d(this,Lm).append(r)};function S2(i,t,e){for(const n of e)t.addEventListener(n,i[n].bind(i))}var Iu,Nu,uh,Pu;const ge=class ge{static initializeAndAddPointerId(t){(d(ge,Nu)||C(ge,Nu,new Set)).add(t)}static setPointer(t,e){d(ge,Iu)||C(ge,Iu,e),d(ge,Pu)??C(ge,Pu,t)}static setTimeStamp(t){C(ge,uh,t)}static isSamePointerId(t){return d(ge,Iu)===t}static isSamePointerIdOrRemove(t){var e;return d(ge,Iu)===t?!0:((e=d(ge,Nu))==null||e.delete(t),!1)}static isSamePointerType(t){return d(ge,Pu)===t}static isInitializedAndDifferentPointerType(t){return d(ge,Pu)!==null&&!ge.isSamePointerType(t)}static isSameTimeStamp(t){return d(ge,uh)===t}static isUsingMultiplePointers(){var t;return((t=d(ge,Nu))==null?void 0:t.size)>=1}static clearPointerType(){C(ge,Pu,null)}static clearPointerIds(){C(ge,Iu,NaN),C(ge,Nu,null)}static clearTimeStamp(){C(ge,uh,NaN)}};Iu=new WeakMap,Nu=new WeakMap,uh=new WeakMap,Pu=new WeakMap,R(ge,Iu,NaN),R(ge,Nu,null),R(ge,uh,NaN),R(ge,Pu,null);let Jn=ge;var UA;class M9{constructor(){R(this,UA,0)}get id(){return`${_m}${pn(this,UA)._++}`}}UA=new WeakMap;var ch,km,Qn,dh,M0;const Lw=class Lw{constructor(){R(this,dh);R(this,ch,c2());R(this,km,0);R(this,Qn,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const r=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Nt(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:n,size:s,type:r}=t;return D(this,dh,M0).call(this,`${e}_${n}_${s}_${r}`,t)}async getFromUrl(t){return D(this,dh,M0).call(this,t,t)}async getFromBlob(t,e){const n=await e;return D(this,dh,M0).call(this,t,n)}async getFromId(t){d(this,Qn)||C(this,Qn,new Map);const e=d(this,Qn).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){d(this,Qn)||C(this,Qn,new Map);let n=d(this,Qn).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${d(this,ch)}_${pn(this,km)._++}`,refCounter:1,isSvg:!1},d(this,Qn).set(t,n),d(this,Qn).set(n.id,n),n}getSvgUrl(t){const e=d(this,Qn).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var s;d(this,Qn)||C(this,Qn,new Map);const e=d(this,Qn).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=r.convertToBlob()}(s=n.close)==null||s.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${d(this,ch)}_`)}};ch=new WeakMap,km=new WeakMap,Qn=new WeakMap,dh=new WeakSet,M0=async function(t,e){d(this,Qn)||C(this,Qn,new Map);let n=d(this,Qn).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${d(this,ch)}_${pn(this,km)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(n.url=e,s=await Dy(e,"blob")):e instanceof File?s=n.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const r=Lw._isSVGFittingCanvas,a=new FileReader,u=new Image,h=new Promise((f,p)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,f()},a.onload=async()=>{const y=n.svgUrl=a.result;u.src=await r?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=a.onerror=p});a.readAsDataURL(s),await h}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){It(s),n=null}return d(this,Qn).set(t,n),n&&d(this,Qn).set(n.id,n),n};let pC=Lw;var tn,il,Um,Fe;class R9{constructor(t=128){R(this,tn,[]);R(this,il,!1);R(this,Um);R(this,Fe,-1);C(this,Um,t)}add({cmd:t,undo:e,post:n,mustExec:s,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:u=!1}){if(s&&t(),d(this,il))return;const h={cmd:t,undo:e,post:n,type:r};if(d(this,Fe)===-1){d(this,tn).length>0&&(d(this,tn).length=0),C(this,Fe,0),d(this,tn).push(h);return}if(a&&d(this,tn)[d(this,Fe)].type===r){u&&(h.undo=d(this,tn)[d(this,Fe)].undo),d(this,tn)[d(this,Fe)]=h;return}const f=d(this,Fe)+1;f===d(this,Um)?d(this,tn).splice(0,1):(C(this,Fe,f),f<d(this,tn).length&&d(this,tn).splice(f)),d(this,tn).push(h)}undo(){if(d(this,Fe)===-1)return;C(this,il,!0);const{undo:t,post:e}=d(this,tn)[d(this,Fe)];t(),e==null||e(),C(this,il,!1),C(this,Fe,d(this,Fe)-1)}redo(){if(d(this,Fe)<d(this,tn).length-1){C(this,Fe,d(this,Fe)+1),C(this,il,!0);const{cmd:t,post:e}=d(this,tn)[d(this,Fe)];t(),e==null||e(),C(this,il,!1)}}hasSomethingToUndo(){return d(this,Fe)!==-1}hasSomethingToRedo(){return d(this,Fe)<d(this,tn).length-1}cleanType(t){if(d(this,Fe)!==-1){for(let e=d(this,Fe);e>=0;e--)if(d(this,tn)[e].type!==t){d(this,tn).splice(e+1,d(this,Fe)-e),C(this,Fe,e);return}d(this,tn).length=0,C(this,Fe,-1)}}destroy(){C(this,tn,null)}}tn=new WeakMap,il=new WeakMap,Um=new WeakMap,Fe=new WeakMap;var BA,E2;class Py{constructor(t){R(this,BA);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Tn.platform;for(const[n,s,r={}]of t)for(const a of n){const u=a.startsWith("mac+");e&&u?(this.callbacks.set(a.slice(4),{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1))):!e&&!u&&(this.callbacks.set(a,{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(D(this,BA,E2).call(this,e));if(!n)return;const{callback:s,options:{bubbles:r=!1,args:a=[],checker:u=null}}=n;u&&!u(t,e)||(s.bind(t,...a,e)(),r||Qe(e))}}BA=new WeakSet,E2=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const FA=class FA{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return E9(t),Nt(this,"_colors",t)}convert(t){const e=Ny(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,s]of this._colors)if(s.every((r,a)=>r===e[a]))return FA._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?ht.makeHexColor(...e):t}};Z(FA,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let mC=FA;var hh,Wi,fh,Oe,en,ph,Ls,mh,ks,Zn,sl,ol,gh,rl,Po,Us,Lu,Bm,Fm,yh,Om,Lo,al,vh,ll,ko,OA,ul,Ah,Vm,cl,ku,Th,dl,Hm,cn,ce,Nr,hl,fl,Gm,Sh,zm,pl,Uo,Pr,qm,Ym,Bs,ct,R0,gC,b2,C2,Jp,_2,w2,x2,yC,M2,R2,D2,I2,si,wr,N2,P2,vC,L2,Qp,AC;const Zd=class Zd{constructor(t,e,n,s,r,a,u,h,f,p,y,v,E,b,_,w){R(this,ct);R(this,hh,new AbortController);R(this,Wi,null);R(this,fh,null);R(this,Oe,new Map);R(this,en,new Map);R(this,ph,null);R(this,Ls,null);R(this,mh,null);R(this,ks,new R9);R(this,Zn,null);R(this,sl,null);R(this,ol,null);R(this,gh,0);R(this,rl,new Set);R(this,Po,null);R(this,Us,null);R(this,Lu,new Set);Z(this,"_editorUndoBar",null);R(this,Bm,!1);R(this,Fm,!1);R(this,yh,!1);R(this,Om,null);R(this,Lo,null);R(this,al,null);R(this,vh,null);R(this,ll,!1);R(this,ko,null);R(this,OA,new M9);R(this,ul,!1);R(this,Ah,!1);R(this,Vm,!1);R(this,cl,null);R(this,ku,null);R(this,Th,null);R(this,dl,null);R(this,Hm,null);R(this,cn,Ut.NONE);R(this,ce,new Set);R(this,Nr,null);R(this,hl,null);R(this,fl,null);R(this,Gm,null);R(this,Sh,null);R(this,zm,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});R(this,pl,[0,0]);R(this,Uo,null);R(this,Pr,null);R(this,qm,null);R(this,Ym,null);R(this,Bs,null);const x=this._signal=d(this,hh).signal;C(this,Pr,t),C(this,qm,e),C(this,Ym,n),C(this,ph,s),C(this,Zn,r),C(this,hl,a),C(this,Sh,h),this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:x}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:x}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:x}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:x}),u._on("setpreference",this.onSetPreference.bind(this),{signal:x}),u._on("switchannotationeditorparams",N=>this.updateParams(N.type,N.value),{signal:x}),u._on("pagesedited",this.onPagesEdited.bind(this),{signal:x}),window.addEventListener("pointerdown",()=>{C(this,Ah,!0)},{capture:!0,signal:x}),window.addEventListener("pointerup",()=>{C(this,Ah,!1)},{capture:!0,signal:x}),D(this,ct,_2).call(this),D(this,ct,I2).call(this),D(this,ct,yC).call(this),C(this,Ls,h.annotationStorage),C(this,Om,h.filterFactory),C(this,fl,f),C(this,vh,p||null),C(this,Bm,y),C(this,Fm,v),C(this,yh,E),C(this,Hm,b||null),this.viewParameters={realScale:Jl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=_||null,this._supportsPinchToZoom=w!==!1,r==null||r.setSidebarUiManager(this)}static get _keyboardManager(){const t=Zd.prototype,e=a=>d(a,Pr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Nt(this,"_keyboardManager",new Py([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(a,{target:u})=>!(u instanceof HTMLButtonElement)&&d(a,Pr).contains(u)&&!a.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(a,{target:u})=>!(u instanceof HTMLButtonElement)&&d(a,Pr).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,n,s,r,a,u,h,f;(t=d(this,Bs))==null||t.resolve(),C(this,Bs,null),(e=d(this,hh))==null||e.abort(),C(this,hh,null),this._signal=null;for(const p of d(this,en).values())p.destroy();d(this,en).clear(),d(this,Oe).clear(),d(this,Lu).clear(),(n=d(this,dl))==null||n.clear(),C(this,Wi,null),d(this,ce).clear(),d(this,ks).destroy(),(s=d(this,ph))==null||s.destroy(),(r=d(this,Zn))==null||r.destroy(),(a=d(this,hl))==null||a.destroy(),(u=d(this,ko))==null||u.hide(),C(this,ko,null),(h=d(this,Th))==null||h.destroy(),C(this,Th,null),C(this,fh,null),d(this,Lo)&&(clearTimeout(d(this,Lo)),C(this,Lo,null)),d(this,Uo)&&(clearTimeout(d(this,Uo)),C(this,Uo,null)),(f=this._editorUndoBar)==null||f.destroy(),C(this,Sh,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return d(this,Hm)}get useNewAltTextFlow(){return d(this,Fm)}get useNewAltTextWhenAddingImage(){return d(this,yh)}get hcmFilter(){return Nt(this,"hcmFilter",d(this,fl)?d(this,Om).addHCMFilter(d(this,fl).foreground,d(this,fl).background):"none")}get direction(){return Nt(this,"direction",getComputedStyle(d(this,Pr)).direction)}get _highlightColors(){return Nt(this,"_highlightColors",d(this,vh)?new Map(d(this,vh).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Nt(this,"highlightColors",null);const e=new Map,n=!!d(this,fl);for(const[s,r]of t){const a=s.endsWith("_HCM");if(n&&a){e.set(s.replace("_HCM",""),r);continue}!n&&!a&&e.set(s,r)}return Nt(this,"highlightColors",e)}get highlightColorNames(){return Nt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),C(this,ol,t)}setMainHighlightColorPicker(t){C(this,Th,t)}editAltText(t,e=!1){var n;(n=d(this,ph))==null||n.editAltText(this,t,e)}hasCommentManager(){return!!d(this,Zn)}editComment(t,e,n,s){var r;(r=d(this,Zn))==null||r.showDialog(this,t,e,n,s)}selectComment(t,e){const n=d(this,en).get(t),s=n==null?void 0:n.getEditorByUID(e);s==null||s.toggleComment(!0,!0)}updateComment(t){var e;(e=d(this,Zn))==null||e.updateComment(t.getData())}updatePopupColor(t){var e;(e=d(this,Zn))==null||e.updatePopupColor(t)}removeComment(t){var e;(e=d(this,Zn))==null||e.removeComments([t.uid])}deleteComment(t,e){const n=()=>{t.comment=e},s=()=>{var r;(r=this._editorUndoBar)==null||r.show(n,"comment"),this.toggleComment(null),t.comment=null};this.addCommands({cmd:s,undo:n,mustExec:!0})}toggleComment(t,e,n=void 0){var s;(s=d(this,Zn))==null||s.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){var n;return t&&((n=d(this,Zn))==null?void 0:n.makeCommentColor(t,e))||null}getCommentDialogElement(){var t;return((t=d(this,Zn))==null?void 0:t.dialogElement)||null}async waitForEditorsRendered(t){if(d(this,en).has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),s=r=>{r.pageNumber===t&&(this._eventBus._off("editorsrendered",s),e())};this._eventBus.on("editorsrendered",s),await n}getSignature(t){var e;(e=d(this,hl))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return d(this,hl)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":C(this,yh,e);break}}onPagesEdited({pagesMapper:t}){for(const s of d(this,Oe).values())s.updatePageIndex(t.getPrevPageNumber(s.pageIndex+1)-1);const e=d(this,en),n=C(this,en,new Map);for(const[s,r]of e){const a=t.getPrevPageNumber(s+1)-1;if(a===-1){r.destroy();continue}n.set(a,r),r.updatePageIndex(a)}}onPageChanging({pageNumber:t}){C(this,gh,t-1)}focusMainContainer(){d(this,Pr).focus()}findParent(t,e){for(const n of d(this,en).values()){const{x:s,y:r,width:a,height:u}=n.div.getBoundingClientRect();if(t>=s&&t<=s+a&&e>=r&&e<=r+u)return n}return null}disableUserSelect(t=!1){d(this,qm).classList.toggle("noUserSelect",t)}addShouldRescale(t){d(this,Lu).add(t)}removeShouldRescale(t){d(this,Lu).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Jl.PDF_TO_CSS_UNITS;for(const n of d(this,Lu))n.onScaleChanging();(e=d(this,ol))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:s,anchorOffset:r,focusNode:a,focusOffset:u}=n,h=n.toString(),p=D(this,ct,R0).call(this,n).closest(".textLayer"),y=this.getSelectionBoxes(p);if(!y)return;n.empty();const v=D(this,ct,gC).call(this,p),E=d(this,cn)===Ut.NONE,b=()=>{const _=v==null?void 0:v.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:s,anchorOffset:r,focusNode:a,focusOffset:u,text:h});E&&this.showAllEditors("highlight",!0,!0),e&&(_==null||_.editComment())};if(E){this.switchToMode(Ut.HIGHLIGHT,b);return}b()}commentSelection(t=""){this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!d(this,Ls))return null;const e=`${_m}${t}`,n=d(this,Ls).getRawValue(e);return n&&d(this,Ls).remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&d(this,Ls)&&!d(this,Ls).has(t.id)&&d(this,Ls).setValue(t.id,t)}a11yAlert(t,e=null){const n=d(this,Ym);n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,d(this,ll)&&(C(this,ll,!1),D(this,ct,Jp).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of d(this,ce))if(e.div.contains(t)){C(this,ku,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!d(this,ku))return;const[t,e]=d(this,ku);C(this,ku,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){D(this,ct,yC).call(this),this.setEditingState(!0)}removeEditListeners(){D(this,ct,M2).call(this),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of d(this,Us))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of d(this,Us))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=d(this,Wi))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of d(this,ce)){const r=s.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const a of d(this,Us))if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){It(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const h of n){const f=await s.deserialize(h);if(!f)return;r.push(f)}const a=()=>{for(const h of r)D(this,ct,vC).call(this,h);D(this,ct,AC).call(this,r)},u=()=>{for(const h of r)h.remove()};this.addCommands({cmd:a,undo:u,mustExec:!0})}catch(r){It(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),d(this,cn)!==Ut.NONE&&!this.isEditorHandlingKeyboard&&Zd._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,d(this,ll)&&(C(this,ll,!1),D(this,ct,Jp).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(t){t?(D(this,ct,w2).call(this),D(this,ct,R2).call(this),D(this,ct,si).call(this,{isEditing:d(this,cn)!==Ut.NONE,isEmpty:D(this,ct,Qp).call(this),hasSomethingToUndo:d(this,ks).hasSomethingToUndo(),hasSomethingToRedo:d(this,ks).hasSomethingToRedo(),hasSelectedEditor:!1})):(D(this,ct,x2).call(this),D(this,ct,D2).call(this),D(this,ct,si).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!d(this,Us)){C(this,Us,t);for(const e of d(this,Us))D(this,ct,wr).call(this,e.defaultPropertiesToUpdate)}}getId(){return d(this,OA).id}get currentLayer(){return d(this,en).get(d(this,gh))}getLayer(t){return d(this,en).get(t)}get currentPageIndex(){return d(this,gh)}addLayer(t){d(this,en).set(t.pageIndex,t),d(this,ul)?t.enable():t.disable()}removeLayer(t){d(this,en).delete(t.pageIndex)}async updateMode(t,e=null,n=!1,s=!1,r=!1,a=!1){var u,h,f,p,y,v;if(d(this,cn)!==t&&!(d(this,Bs)&&(await d(this,Bs).promise,!d(this,Bs)))){if(C(this,Bs,Promise.withResolvers()),(u=d(this,ol))==null||u.commitOrRemove(),d(this,cn)===Ut.POPUP&&((h=d(this,Zn))==null||h.hideSidebar()),(f=d(this,Zn))==null||f.destroyPopup(),C(this,cn,t),t===Ut.NONE){this.setEditingState(!1),D(this,ct,P2).call(this);for(const E of d(this,Oe).values())E.hideStandaloneCommentButton();(p=this._editorUndoBar)==null||p.hide(),this.toggleComment(null),d(this,Bs).resolve();return}for(const E of d(this,Oe).values())E.addStandaloneCommentButton();t===Ut.SIGNATURE&&await((y=d(this,hl))==null?void 0:y.loadSignatures()),n&&Jn.clearPointerType(),this.setEditingState(!0),await D(this,ct,N2).call(this),this.unselectAll();for(const E of d(this,en).values())E.updateMode(t);if(t===Ut.POPUP){d(this,fh)||C(this,fh,await d(this,Sh).getAnnotationsByType(new Set(d(this,Us).map(_=>_._editorType))));const E=new Set,b=[];for(const _ of d(this,Oe).values()){const{annotationElementId:w,hasComment:x,deleted:N}=_;w&&E.add(w),x&&!N&&b.push(_.getData())}for(const _ of d(this,fh)){const{id:w,popupRef:x,contentsObj:N}=_;x&&(N!=null&&N.str)&&!E.has(w)&&!d(this,rl).has(w)&&b.push(_)}(v=d(this,Zn))==null||v.showSidebar(b)}if(!e){s&&this.addNewEditorFromKeyboard(),d(this,Bs).resolve();return}for(const E of d(this,Oe).values())E.uid===e?(this.setSelected(E),a?E.editComment():r?E.enterInEditMode():E.focus()):E.unselect();d(this,Bs).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==d(this,cn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(d(this,Us)){switch(t){case Jt.CREATE:this.currentLayer.addNewEditor(e);return;case Jt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(d(this,Gm)||C(this,Gm,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of d(this,ce))n.updateParams(t,e);else for(const n of d(this,Us))n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var r;for(const a of d(this,Oe).values())a.editorType===t&&a.show(e);(((r=d(this,Gm))==null?void 0:r.get(Jt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&D(this,ct,wr).call(this,[[Jt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(d(this,Vm)!==t){C(this,Vm,t);for(const e of d(this,en).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(const e of d(this,Oe).values())e.pageIndex===t&&(yield e)}getEditor(t){return d(this,Oe).get(t)}addEditor(t){d(this,Oe).set(t.id,t)}removeEditor(t){var e,n;t.div.contains(document.activeElement)&&(d(this,Lo)&&clearTimeout(d(this,Lo)),C(this,Lo,setTimeout(()=>{this.focusMainContainer(),C(this,Lo,null)},0))),d(this,Oe).delete(t.id),t.annotationElementId&&((e=d(this,dl))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!d(this,rl).has(t.annotationElementId))&&((n=d(this,Ls))==null||n.remove(t.id))}addDeletedAnnotationElement(t){d(this,rl).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return d(this,rl).has(t)}removeDeletedAnnotationElement(t){d(this,rl).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){d(this,Wi)!==t&&(C(this,Wi,t),t&&D(this,ct,wr).call(this,t.propertiesToUpdate))}updateUI(t){d(this,ct,L2)===t&&D(this,ct,wr).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){D(this,ct,wr).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(d(this,ce).has(t)){d(this,ce).delete(t),t.unselect(),D(this,ct,si).call(this,{hasSelectedEditor:this.hasSelection});return}d(this,ce).add(t),t.select(),D(this,ct,wr).call(this,t.propertiesToUpdate),D(this,ct,si).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.uid}),(e=d(this,ol))==null||e.commitOrRemove();for(const n of d(this,ce))n!==t&&n.unselect();d(this,ce).clear(),d(this,ce).add(t),t.select(),D(this,ct,wr).call(this,t.propertiesToUpdate),D(this,ct,si).call(this,{hasSelectedEditor:!0})}isSelected(t){return d(this,ce).has(t)}get firstSelectedEditor(){return d(this,ce).values().next().value}unselect(t){t.unselect(),d(this,ce).delete(t),D(this,ct,si).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return d(this,ce).size!==0}get isEnterHandled(){return d(this,ce).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;d(this,ks).undo(),D(this,ct,si).call(this,{hasSomethingToUndo:d(this,ks).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:D(this,ct,Qp).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){d(this,ks).redo(),D(this,ct,si).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:d(this,ks).hasSomethingToRedo(),isEmpty:D(this,ct,Qp).call(this)})}addCommands(t){d(this,ks).add(t),D(this,ct,si).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:D(this,ct,Qp).call(this)})}cleanUndoStack(t){d(this,ks).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...d(this,ce)],n=()=>{var a;(a=this._editorUndoBar)==null||a.show(s,e.length===1?e[0].editorType:e.length);for(const u of e)u.remove()},s=()=>{for(const a of e)D(this,ct,vC).call(this,a)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){var t;(t=d(this,Wi))==null||t.commitOrRemove()}hasSomethingToControl(){return d(this,Wi)||this.hasSelection}selectAll(){for(const t of d(this,ce))t.commit();D(this,ct,AC).call(this,d(this,Oe).values())}unselectAll(){var t;if(!(d(this,Wi)&&(d(this,Wi).commitOrRemove(),d(this,cn)!==Ut.NONE))&&!((t=d(this,ol))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of d(this,ce))e.unselect();d(this,ce).clear(),D(this,ct,si).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;d(this,pl)[0]+=t,d(this,pl)[1]+=e;const[s,r]=d(this,pl),a=[...d(this,ce)],u=1e3;d(this,Uo)&&clearTimeout(d(this,Uo)),C(this,Uo,setTimeout(()=>{C(this,Uo,null),d(this,pl)[0]=d(this,pl)[1]=0,this.addCommands({cmd:()=>{for(const h of a)d(this,Oe).has(h.id)&&(h.translateInPage(s,r),h.translationDone())},undo:()=>{for(const h of a)d(this,Oe).has(h.id)&&(h.translateInPage(-s,-r),h.translationDone())},mustExec:!1})},u));for(const h of a)h.translateInPage(t,e),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),C(this,Po,new Map);for(const t of d(this,ce))d(this,Po).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!d(this,Po))return!1;this.disableUserSelect(!1);const t=d(this,Po);C(this,Po,null);let e=!1;for(const[{x:s,y:r,pageIndex:a},u]of t)u.newX=s,u.newY=r,u.newPageIndex=a,e||(e=s!==u.savedX||r!==u.savedY||a!==u.savedPageIndex);if(!e)return!1;const n=(s,r,a,u)=>{if(d(this,Oe).has(s.id)){const h=d(this,en).get(u);h?s._setParentAndPosition(h,r,a):(s.pageIndex=u,s.x=r,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:a,newPageIndex:u}]of t)n(s,r,a,u)},undo:()=>{for(const[s,{savedX:r,savedY:a,savedPageIndex:u}]of t)n(s,r,a,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(d(this,Po))for(const n of d(this,Po).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||d(this,ce).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return d(this,Wi)===t}getActive(){return d(this,Wi)}getMode(){return d(this,cn)}isEditingMode(){return d(this,cn)!==Ut.NONE}get imageManager(){return Nt(this,"imageManager",new pC)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,p=e.rangeCount;f<p;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:s,width:r,height:a}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,p,y,v)=>({x:(p-s)/a,y:1-(f+y-n)/r,width:v/a,height:y/r});break;case"180":u=(f,p,y,v)=>({x:1-(f+y-n)/r,y:1-(p+v-s)/a,width:y/r,height:v/a});break;case"270":u=(f,p,y,v)=>({x:1-(p+v-s)/a,y:(f-n)/r,width:v/a,height:y/r});break;default:u=(f,p,y,v)=>({x:(f-n)/r,y:(p-s)/a,width:y/r,height:v/a});break}const h=[];for(let f=0,p=e.rangeCount;f<p;f++){const y=e.getRangeAt(f);if(!y.collapsed)for(const{x:v,y:E,width:b,height:_}of y.getClientRects())b===0||_===0||h.push(u(v,E,b,_))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(d(this,mh)||C(this,mh,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=d(this,mh))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=d(this,mh))==null?void 0:s.get(t.data.id);if(!e)return;const n=d(this,Ls).getRawValue(e);n&&(d(this,cn)===Ut.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){var r;const s=(r=d(this,dl))==null?void 0:r.get(t);s&&(s.setCanvas(e,n),d(this,dl).delete(t))}addMissingCanvas(t,e){(d(this,dl)||C(this,dl,new Map)).set(t,e)}};hh=new WeakMap,Wi=new WeakMap,fh=new WeakMap,Oe=new WeakMap,en=new WeakMap,ph=new WeakMap,Ls=new WeakMap,mh=new WeakMap,ks=new WeakMap,Zn=new WeakMap,sl=new WeakMap,ol=new WeakMap,gh=new WeakMap,rl=new WeakMap,Po=new WeakMap,Us=new WeakMap,Lu=new WeakMap,Bm=new WeakMap,Fm=new WeakMap,yh=new WeakMap,Om=new WeakMap,Lo=new WeakMap,al=new WeakMap,vh=new WeakMap,ll=new WeakMap,ko=new WeakMap,OA=new WeakMap,ul=new WeakMap,Ah=new WeakMap,Vm=new WeakMap,cl=new WeakMap,ku=new WeakMap,Th=new WeakMap,dl=new WeakMap,Hm=new WeakMap,cn=new WeakMap,ce=new WeakMap,Nr=new WeakMap,hl=new WeakMap,fl=new WeakMap,Gm=new WeakMap,Sh=new WeakMap,zm=new WeakMap,pl=new WeakMap,Uo=new WeakMap,Pr=new WeakMap,qm=new WeakMap,Ym=new WeakMap,Bs=new WeakMap,ct=new WeakSet,R0=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},gC=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of d(this,en).values())if(n.hasTextLayer(t))return n;return null},b2=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=D(this,ct,R0).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(d(this,ko)||C(this,ko,new x9(this)),d(this,ko).show(n,s,this.direction==="ltr"))},C2=function(){var r,a,u;const t=document.getSelection();if(!t||t.isCollapsed){d(this,Nr)&&((r=d(this,ko))==null||r.hide(),C(this,Nr,null),D(this,ct,si).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===d(this,Nr))return;const s=D(this,ct,R0).call(this,t).closest(".textLayer");if(!s){d(this,Nr)&&((a=d(this,ko))==null||a.hide(),C(this,Nr,null),D(this,ct,si).call(this,{hasSelectedText:!1}));return}if((u=d(this,ko))==null||u.hide(),C(this,Nr,e),D(this,ct,si).call(this,{hasSelectedText:!0}),!(d(this,cn)!==Ut.HIGHLIGHT&&d(this,cn)!==Ut.NONE)&&(d(this,cn)===Ut.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),C(this,ll,this.isShiftKeyDown),!this.isShiftKeyDown)){const h=d(this,cn)===Ut.HIGHLIGHT?D(this,ct,gC).call(this,s):null;if(h==null||h.toggleDrawing(),d(this,Ah)){const f=new AbortController,p=this.combinedSignal(f),y=v=>{v.type==="pointerup"&&v.button!==0||(f.abort(),h==null||h.toggleDrawing(!0),v.type==="pointerup"&&D(this,ct,Jp).call(this,"main_toolbar"))};window.addEventListener("pointerup",y,{signal:p}),window.addEventListener("blur",y,{signal:p})}else h==null||h.toggleDrawing(!0),D(this,ct,Jp).call(this,"main_toolbar")}},Jp=function(t=""){d(this,cn)===Ut.HIGHLIGHT?this.highlightSelection(t):d(this,Bm)&&D(this,ct,b2).call(this)},_2=function(){document.addEventListener("selectionchange",D(this,ct,C2).bind(this),{signal:this._signal})},w2=function(){if(d(this,al))return;C(this,al,new AbortController);const t=this.combinedSignal(d(this,al));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},x2=function(){var t;(t=d(this,al))==null||t.abort(),C(this,al,null)},yC=function(){if(d(this,cl))return;C(this,cl,new AbortController);const t=this.combinedSignal(d(this,cl));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},M2=function(){var t;(t=d(this,cl))==null||t.abort(),C(this,cl,null)},R2=function(){if(d(this,sl))return;C(this,sl,new AbortController);const t=this.combinedSignal(d(this,sl));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},D2=function(){var t;(t=d(this,sl))==null||t.abort(),C(this,sl,null)},I2=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},si=function(t){Object.entries(t).some(([n,s])=>d(this,zm)[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(d(this,zm),t)}),d(this,cn)===Ut.HIGHLIGHT&&t.hasSelectedEditor===!1&&D(this,ct,wr).call(this,[[Jt.HIGHLIGHT_FREE,!0]]))},wr=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},N2=async function(){if(!d(this,ul)){C(this,ul,!0);const t=[];for(const e of d(this,en).values())t.push(e.enable());await Promise.all(t);for(const e of d(this,Oe).values())e.enable()}},P2=function(){if(this.unselectAll(),d(this,ul)){C(this,ul,!1);for(const t of d(this,en).values())t.disable();for(const t of d(this,Oe).values())t.disable()}},vC=function(t){const e=d(this,en).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},L2=function(){let t=null;for(t of d(this,ce));return t},Qp=function(){if(d(this,Oe).size===0)return!0;if(d(this,Oe).size===1)for(const t of d(this,Oe).values())return t.isEmpty();return!1},AC=function(t){for(const e of d(this,ce))e.unselect();d(this,ce).clear();for(const e of t)e.isEmpty()||(d(this,ce).add(e),e.select());D(this,ct,si).call(this,{hasSelectedEditor:this.hasSelection})},Z(Zd,"TRANSLATE_SMALL",1),Z(Zd,"TRANSLATE_BIG",10);let zc=Zd;var bn,Bo,ro,Eh,Fo,Ji,bh,Oo,Mi,Lr,Uu,Vo,ml,vo,Zp,D0;const oi=class oi{constructor(t){R(this,vo);R(this,bn,null);R(this,Bo,!1);R(this,ro,null);R(this,Eh,null);R(this,Fo,null);R(this,Ji,null);R(this,bh,!1);R(this,Oo,null);R(this,Mi,null);R(this,Lr,null);R(this,Uu,null);R(this,Vo,!1);C(this,Mi,t),C(this,Vo,t._uiManager.useNewAltTextFlow),d(oi,ml)||C(oi,ml,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){oi._l10n??(oi._l10n=t)}async render(){const t=C(this,ro,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=C(this,Eh,document.createElement("span"));t.append(e),d(this,Vo)?(t.classList.add("new"),t.setAttribute("data-l10n-id",d(oi,ml).missing),e.setAttribute("data-l10n-id",d(oi,ml)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=d(this,Mi)._uiManager._signal;t.addEventListener("contextmenu",Qs,{signal:n}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const s=r=>{r.preventDefault(),d(this,Mi)._uiManager.editAltText(d(this,Mi)),d(this,Vo)&&d(this,Mi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:d(this,vo,Zp)}})};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(C(this,bh,!0),s(r))},{signal:n}),await D(this,vo,D0).call(this),t}finish(){d(this,ro)&&(d(this,ro).focus({focusVisible:d(this,bh)}),C(this,bh,!1))}isEmpty(){return d(this,Vo)?d(this,bn)===null:!d(this,bn)&&!d(this,Bo)}hasData(){return d(this,Vo)?d(this,bn)!==null||!!d(this,Lr):this.isEmpty()}get guessedText(){return d(this,Lr)}async setGuessedText(t){d(this,bn)===null&&(C(this,Lr,t),C(this,Uu,await oi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),D(this,vo,D0).call(this))}toggleAltTextBadge(t=!1){var e;if(!d(this,Vo)||d(this,bn)){(e=d(this,Oo))==null||e.remove(),C(this,Oo,null);return}if(!d(this,Oo)){const n=C(this,Oo,document.createElement("div"));n.className="noAltTextBadge",d(this,Mi).div.append(n)}d(this,Oo).classList.toggle("hidden",!t)}serialize(t){let e=d(this,bn);return!t&&d(this,Lr)===e&&(e=d(this,Uu)),{altText:e,decorative:d(this,Bo),guessedText:d(this,Lr),textWithDisclaimer:d(this,Uu)}}get data(){return{altText:d(this,bn),decorative:d(this,Bo)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:s,cancel:r=!1}){n&&(C(this,Lr,n),C(this,Uu,s)),!(d(this,bn)===t&&d(this,Bo)===e)&&(r||(C(this,bn,t),C(this,Bo,e)),D(this,vo,D0).call(this))}toggle(t=!1){d(this,ro)&&(!t&&d(this,Ji)&&(clearTimeout(d(this,Ji)),C(this,Ji,null)),d(this,ro).disabled=!t)}shown(){d(this,Mi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:d(this,vo,Zp)}})}destroy(){var t,e;(t=d(this,ro))==null||t.remove(),C(this,ro,null),C(this,Eh,null),C(this,Fo,null),(e=d(this,Oo))==null||e.remove(),C(this,Oo,null)}};bn=new WeakMap,Bo=new WeakMap,ro=new WeakMap,Eh=new WeakMap,Fo=new WeakMap,Ji=new WeakMap,bh=new WeakMap,Oo=new WeakMap,Mi=new WeakMap,Lr=new WeakMap,Uu=new WeakMap,Vo=new WeakMap,ml=new WeakMap,vo=new WeakSet,Zp=function(){return d(this,bn)&&"added"||d(this,bn)===null&&this.guessedText&&"review"||"missing"},D0=async function(){var s,r,a;const t=d(this,ro);if(!t)return;if(d(this,Vo)){if(t.classList.toggle("done",!!d(this,bn)),t.setAttribute("data-l10n-id",d(oi,ml)[d(this,vo,Zp)]),(s=d(this,Eh))==null||s.setAttribute("data-l10n-id",d(oi,ml)[`${d(this,vo,Zp)}-label`]),!d(this,bn)){(r=d(this,Fo))==null||r.remove();return}}else{if(!d(this,bn)&&!d(this,Bo)){t.classList.remove("done"),(a=d(this,Fo))==null||a.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=d(this,Fo);if(!e){C(this,Fo,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${d(this,Mi).id}`;const u=100,h=d(this,Mi)._uiManager._signal;h.addEventListener("abort",()=>{clearTimeout(d(this,Ji)),C(this,Ji,null)},{once:!0}),t.addEventListener("mouseenter",()=>{C(this,Ji,setTimeout(()=>{C(this,Ji,null),d(this,Fo).classList.add("show"),d(this,Mi)._reportTelemetry({action:"alt_text_tooltip"})},u))},{signal:h}),t.addEventListener("mouseleave",()=>{var f;d(this,Ji)&&(clearTimeout(d(this,Ji)),C(this,Ji,null)),(f=d(this,Fo))==null||f.classList.remove("show")},{signal:h})}d(this,Bo)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=d(this,bn)),e.parentNode||t.append(e);const n=d(this,Mi).getElementForAltText();n==null||n.setAttribute("aria-describedby",e.id)},R(oi,ml,null),Z(oi,"_l10n",null);let CA=oi;var Fn,Fs,Bu,Me,Xm,gl,Os,yl,vl,Fu,$m,TC;class u0{constructor(t){R(this,$m);R(this,Fn,null);R(this,Fs,null);R(this,Bu,!1);R(this,Me,null);R(this,Xm,null);R(this,gl,null);R(this,Os,null);R(this,yl,null);R(this,vl,!1);R(this,Fu,null);C(this,Me,t)}renderForToolbar(){const t=C(this,Fs,document.createElement("button"));return t.className="comment",D(this,$m,TC).call(this,t,!1)}renderForStandalone(){const t=C(this,Fn,document.createElement("button"));t.className="annotationCommentButton";const e=d(this,Me).commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(d(this,Me)._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const s=d(this,Me).commentButtonColor;s&&(n.backgroundColor=s)}return D(this,$m,TC).call(this,t,!0)}focusButton(){setTimeout(()=>{var t;(t=d(this,Fn)??d(this,Fs))==null||t.focus()},0)}onUpdatedColor(){if(!d(this,Fn))return;const t=d(this,Me).commentButtonColor;t&&(d(this,Fn).style.backgroundColor=t),d(this,Me)._uiManager.updatePopupColor(d(this,Me))}get commentButtonWidth(){var t;return(((t=d(this,Fn))==null?void 0:t.getBoundingClientRect().width)??0)/d(this,Me).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(d(this,Fu))return d(this,Fu);if(!d(this,Fn))return null;const{x:t,y:e,height:n}=d(this,Fn).getBoundingClientRect(),{x:s,y:r,width:a,height:u}=d(this,Me).parent.boundingClientRect;return[(t-s)/a,(e+n-r)/u]}set commentPopupPositionInLayer(t){C(this,Fu,t)}hasDefaultPopupPosition(){return d(this,Fu)===null}removeStandaloneCommentButton(){var t;(t=d(this,Fn))==null||t.remove(),C(this,Fn,null)}removeToolbarCommentButton(){var t;(t=d(this,Fs))==null||t.remove(),C(this,Fs,null)}setCommentButtonStates({selected:t,hasPopup:e}){d(this,Fn)&&(d(this,Fn).classList.toggle("selected",t),d(this,Fn).ariaExpanded=e)}edit(t){const e=this.commentPopupPositionInLayer;let n,s;if(e)[n,s]=e;else{[n,s]=d(this,Me).commentButtonPosition;const{width:p,height:y,x:v,y:E}=d(this,Me);n=v+n*p,s=E+s*y}const r=d(this,Me).parent.boundingClientRect,{x:a,y:u,width:h,height:f}=r;d(this,Me)._uiManager.editComment(d(this,Me),a+n*h,u+s*f,{...t,parentDimensions:r})}finish(){d(this,Fs)&&(d(this,Fs).focus({focusVisible:d(this,Bu)}),C(this,Bu,!1))}isDeleted(){return d(this,vl)||d(this,Os)===""}isEmpty(){return d(this,Os)===null}hasBeenEdited(){return this.isDeleted()||d(this,Os)!==d(this,Xm)}serialize(){return this.data}get data(){return{text:d(this,Os),richText:d(this,gl),date:d(this,yl),deleted:this.isDeleted()}}set data(t){if(t!==d(this,Os)&&C(this,gl,null),t===null){C(this,Os,""),C(this,vl,!0);return}C(this,Os,t),C(this,yl,new Date),C(this,vl,!1)}restoreData({text:t,richText:e,date:n}){C(this,Os,t),C(this,gl,e),C(this,yl,n),C(this,vl,!1)}setInitialText(t,e=null){C(this,Xm,t),this.data=t,C(this,yl,null),C(this,gl,e)}shown(){}destroy(){var t,e;(t=d(this,Fs))==null||t.remove(),C(this,Fs,null),(e=d(this,Fn))==null||e.remove(),C(this,Fn,null),C(this,Os,""),C(this,gl,null),C(this,yl,null),C(this,Me,null),C(this,Bu,!1),C(this,vl,!1)}}Fn=new WeakMap,Fs=new WeakMap,Bu=new WeakMap,Me=new WeakMap,Xm=new WeakMap,gl=new WeakMap,Os=new WeakMap,yl=new WeakMap,vl=new WeakMap,Fu=new WeakMap,$m=new WeakSet,TC=function(t,e){if(!d(this,Me)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[d(this,Me)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=d(this,Me)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",Qs,{signal:n}),e&&(t.addEventListener("focusin",r=>{d(this,Me)._focusEventsAllowed=!1,Qe(r)},{capture:!0,signal:n}),t.addEventListener("focusout",r=>{d(this,Me)._focusEventsAllowed=!0,Qe(r)},{capture:!0,signal:n})),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const s=r=>{r.preventDefault(),t===d(this,Fs)?this.edit():d(this,Me).toggleComment(!0)};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(C(this,Bu,!0),s(r))},{signal:n}),t.addEventListener("pointerenter",()=>{d(this,Me).toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{d(this,Me).toggleComment(!1,!1)},{signal:n}),t};var Ch,Ou,Km,Wm,Jm,Qm,Zm,kr,Vu,Ur,Hu,Br,Ql,k2,U2,B2;const kw=class kw{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:s=null,onPinching:r=null,onPinchEnd:a=null,signal:u}){R(this,Ql);R(this,Ch);R(this,Ou,!1);R(this,Km,null);R(this,Wm);R(this,Jm);R(this,Qm);R(this,Zm);R(this,kr,null);R(this,Vu);R(this,Ur,null);R(this,Hu);R(this,Br,null);C(this,Ch,t),C(this,Km,n),C(this,Wm,e),C(this,Jm,s),C(this,Qm,r),C(this,Zm,a),C(this,Hu,new AbortController),C(this,Vu,AbortSignal.any([u,d(this,Hu).signal])),t.addEventListener("touchstart",D(this,Ql,k2).bind(this),{passive:!1,signal:d(this,Vu)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/sr.pixelRatio}destroy(){var t,e;(t=d(this,Hu))==null||t.abort(),C(this,Hu,null),(e=d(this,kr))==null||e.abort(),C(this,kr,null)}};Ch=new WeakMap,Ou=new WeakMap,Km=new WeakMap,Wm=new WeakMap,Jm=new WeakMap,Qm=new WeakMap,Zm=new WeakMap,kr=new WeakMap,Vu=new WeakMap,Ur=new WeakMap,Hu=new WeakMap,Br=new WeakMap,Ql=new WeakSet,k2=function(t){var s,r,a;if((s=d(this,Wm))!=null&&s.call(this))return;if(t.touches.length===1){if(d(this,kr))return;const u=C(this,kr,new AbortController),h=AbortSignal.any([d(this,Vu),u.signal]),f=d(this,Ch),p={capture:!0,signal:h,passive:!1},y=v=>{var E;v.pointerType==="touch"&&((E=d(this,kr))==null||E.abort(),C(this,kr,null))};f.addEventListener("pointerdown",v=>{v.pointerType==="touch"&&(Qe(v),y(v))},p),f.addEventListener("pointerup",y,p),f.addEventListener("pointercancel",y,p);return}if(!d(this,Br)){C(this,Br,new AbortController);const u=AbortSignal.any([d(this,Vu),d(this,Br).signal]),h=d(this,Ch),f={signal:u,capture:!1,passive:!1};h.addEventListener("touchmove",D(this,Ql,U2).bind(this),f);const p=D(this,Ql,B2).bind(this);h.addEventListener("touchend",p,f),h.addEventListener("touchcancel",p,f),f.capture=!0,h.addEventListener("pointerdown",Qe,f),h.addEventListener("pointermove",Qe,f),h.addEventListener("pointercancel",Qe,f),h.addEventListener("pointerup",Qe,f),(r=d(this,Jm))==null||r.call(this)}if(Qe(t),t.touches.length!==2||(a=d(this,Km))!=null&&a.call(this)){C(this,Ur,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),C(this,Ur,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},U2=function(t){var L;if(!d(this,Ur)||t.touches.length!==2)return;Qe(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:s,screenY:r}=e,{screenX:a,screenY:u}=n,h=d(this,Ur),{touch0X:f,touch0Y:p,touch1X:y,touch1Y:v}=h,E=y-f,b=v-p,_=a-s,w=u-r,x=Math.hypot(_,w)||1,N=Math.hypot(E,b)||1;if(!d(this,Ou)&&Math.abs(N-x)<=kw.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=s,h.touch0Y=r,h.touch1X=a,h.touch1Y=u,!d(this,Ou)){C(this,Ou,!0);return}const I=[(s+a)/2,(r+u)/2];(L=d(this,Qm))==null||L.call(this,I,N,x)},B2=function(t){var e;t.touches.length>=2||(d(this,Br)&&(d(this,Br).abort(),C(this,Br,null),(e=d(this,Zm))==null||e.call(this)),d(this,Ur)&&(Qe(t),C(this,Ur,null),C(this,Ou,!1)))};let _A=kw;var Gu,ao,Ue,de,Fr,_h,Al,jm,On,zu,Or,Vs,Tl,tg,qu,Qi,eg,Yu,Vr,Ho,wh,xh,Hs,Xu,ng,VA,Rt,SC,ig,EC,I0,F2,O2,bC,N0,CC,V2,H2,G2,_C,z2,wC,q2,Y2,X2,xC,jp;const kt=class kt{constructor(t){R(this,Rt);R(this,Gu,null);R(this,ao,null);R(this,Ue,null);R(this,de,null);R(this,Fr,null);R(this,_h,!1);R(this,Al,null);R(this,jm,"");R(this,On,null);R(this,zu,null);R(this,Or,null);R(this,Vs,null);R(this,Tl,null);R(this,tg,"");R(this,qu,!1);R(this,Qi,null);R(this,eg,!1);R(this,Yu,!1);R(this,Vr,!1);R(this,Ho,null);R(this,wh,0);R(this,xh,0);R(this,Hs,null);R(this,Xu,null);Z(this,"isSelected",!1);Z(this,"_isCopy",!1);Z(this,"_editToolbar",null);Z(this,"_initialOptions",Object.create(null));Z(this,"_initialData",null);Z(this,"_isVisible",!0);Z(this,"_uiManager",null);Z(this,"_focusEventsAllowed",!0);R(this,ng,!1);R(this,VA,kt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[r,a];const[u,h]=this.parentDimensions;this.x=t.x/u,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=kt.prototype._resizeWithKeyboard,e=zc.TRANSLATE_SMALL,n=zc.TRANSLATE_BIG;return Nt(this,"_resizerKeyboardManager",new Py([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],kt.prototype._stopResizingWithKeyboard]]))}updatePageIndex(t){this.pageIndex=t}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Nt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new D9({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(kt._l10n??(kt._l10n=t),kt._l10nResizer||(kt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),kt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);kt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){re("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return d(this,ng)}set _isDraggable(t){var e;C(this,ng,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=d(this,VA)}setParent(t){var e;t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(D(this,Rt,jp).call(this),(e=d(this,Vs))==null||e.remove(),C(this,Vs,null)),this.parent=t}focusin(t){this._focusEventsAllowed&&(d(this,qu)?C(this,qu,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,s){const[r,a]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(t+n)/r,this.y=(e+s)/a,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,s]=this.parentDimensions;this.setAt(t*n,e*s,this.width*n,this.height*s),this._onTranslated()}translate(t,e){D(this,Rt,SC).call(this,this.parentDimensions,t,e)}translateInPage(t,e){d(this,Qi)||C(this,Qi,[this.x,this.y,this.width,this.height]),D(this,Rt,SC).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){d(this,Qi)||C(this,Qi,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[s,r]}=this;if(this.x+=t/s,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:u}=this;const[h,f]=this.getBaseTranslation();a+=h,u+=f;const{style:p}=n;p.left=`${(100*a).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(a,u),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!d(this,Qi)&&(d(this,Qi)[0]!==this.x||d(this,Qi)[1]!==this.y)}get _hasBeenResized(){return!!d(this,Qi)&&(d(this,Qi)[2]!==this.width||d(this,Qi)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=kt,s=n/t,r=n/e;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,s]}=this;let{x:r,y:a,width:u,height:h}=this;if(u*=n,h*=s,r*=n,a*=s,this._mustFixPosition)switch(t){case 0:r=qn(r,0,n-u),a=qn(a,0,s-h);break;case 90:r=qn(r,0,n-h),a=qn(a,u,s);break;case 180:r=qn(r,u,n),a=qn(a,h,s);break;case 270:r=qn(r,h,n),a=qn(a,0,s-u);break}this.x=r/=n,this.y=a/=s;const[f,p]=this.getBaseTranslation();r+=f,a+=p,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return D(n=kt,ig,EC).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return D(n=kt,ig,EC).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=d(this,Ue))==null||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||d(this,Yu))return this._editToolbar;this._editToolbar=new hC(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var t;(t=this._editToolbar)==null||t.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var t;(t=this._editToolbar)==null||t.removeButton("comment")}removeEditToolbar(){var t,e;(t=this._editToolbar)==null||t.remove(),this._editToolbar=null,(e=d(this,Ue))==null||e.destroy()}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return d(this,Ue)||(CA.initialize(kt._l10n),C(this,Ue,new CA(this)),d(this,Gu)&&(d(this,Ue).data=d(this,Gu),C(this,Gu,null))),d(this,Ue)}get altTextData(){var t;return(t=d(this,Ue))==null?void 0:t.data}set altTextData(t){d(this,Ue)&&(d(this,Ue).data=t)}get guessedAltText(){var t;return(t=d(this,Ue))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=d(this,Ue))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=d(this,Ue))==null?void 0:e.serialize(t)}hasAltText(){return!!d(this,Ue)&&!d(this,Ue).isEmpty()}hasAltTextData(){var t;return((t=d(this,Ue))==null?void 0:t.hasData())??!1}focusCommentButton(){var t;(t=d(this,de))==null||t.focusButton()}addCommentButton(){return this.canAddComment?d(this,de)||C(this,de,new u0(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(d(this,Fr)){this._uiManager.isEditingMode()&&d(this,Fr).classList.remove("hidden");return}this.hasComment&&(C(this,Fr,d(this,de).renderForStandalone()),this.div.append(d(this,Fr)))}}removeStandaloneCommentButton(){d(this,de).removeStandaloneCommentButton(),C(this,Fr,null)}hideStandaloneCommentButton(){var t;(t=d(this,Fr))==null||t.classList.add("hidden")}get comment(){if(!d(this,de))return null;const{data:{richText:t,text:e,date:n,deleted:s}}=d(this,de);return{text:e,richText:t,date:n,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){d(this,de)||C(this,de,new u0(this)),typeof t=="object"&&t!==null?d(this,de).restoreData(t):d(this,de).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(d(this,de)||C(this,de,new u0(this)),d(this,de).setInitialText(t,n),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){var t;return(t=d(this,de))==null?void 0:t.hasBeenEdited()}get hasDeletedComment(){var t;return(t=d(this,de))==null?void 0:t.isDeleted()}get hasComment(){return!!d(this,de)&&!d(this,de).isEmpty()&&!d(this,de).isDeleted()}async editComment(t){d(this,de)||C(this,de,new u0(this)),d(this,de).edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){d(this,de).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,s]=t.rect,[r]=this.pageDimensions,[a]=this.pageTranslation,u=a+r+1,h=s-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,f,s]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){d(this,de).data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var a;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=d(this,_h)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),D(this,Rt,wC).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[s,r]=this.getInitialTranslation();return this.translate(s,r),S2(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(d(this,Xu)||C(this,Xu,new _A({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:D(this,Rt,V2).bind(this),onPinching:D(this,Rt,H2).bind(this),onPinchEnd:D(this,Rt,G2).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(a=this._uiManager._editorUndoBar)==null||a.hide(),t}pointerdown(t){const{isMac:e}=Tn.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(C(this,qu,!0),this._isDraggable){D(this,Rt,z2).call(this,t);return}D(this,Rt,_C).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){d(this,Ho)&&clearTimeout(d(this,Ho)),C(this,Ho,setTimeout(()=>{var t;C(this,Ho,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const s=this.parentScale,[r,a]=this.pageDimensions,[u,h]=this.pageTranslation,f=t/s,p=e/s,y=this.x*r,v=this.y*a,E=this.width*r,b=this.height*a;switch(n){case 0:return[y+f+u,a-v-p-b+h,y+f+E+u,a-v-p+h];case 90:return[y+p+u,a-v+f+h,y+p+b+u,a-v+f+E+h];case 180:return[y-f-E+u,a-v+p+h,y-f+u,a-v+p+b+h];case 270:return[y-p-b+u,a-v-f-E+h,y-p+u,a-v-f+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,s,r,a]=t,u=r-n,h=a-s;switch(this.rotation){case 0:return[n,e-a,u,h];case 90:return[n,e-s,h,u];case 180:return[r,e-s,u,h];case 270:return[r,e-a,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&kt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var t;(t=d(this,de))==null||t.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:s,deleted:r,richText:a},uid:u,pageIndex:h,creationDate:f,modificationDate:p}=this;return{id:u,pageIndex:h,rect:this.getPDFRect(),richText:a,contentsObj:{str:t},creationDate:f,modificationDate:n||p,popupRef:!r,color:e,opacity:s}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),C(this,Yu,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),C(this,Yu,!1),!0):!1}isInEditMode(){return d(this,Yu)}shouldGetKeyboardEvents(){return d(this,Vr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:r,innerWidth:a}=window;return e<a&&s>0&&t<r&&n>0}rebuild(){D(this,Rt,wC).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(t,e,n){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});s.rotation=t.rotation,C(s,Gu,t.accessibilityData),s._isCopy=t.isCopy||!1;const[r,a]=s.pageDimensions,[u,h,f,p]=s.getRectInCurrentCoords(t.rect,a);return s.x=u/r,s.y=h/a,s.width=f/r,s.height=p/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e,n;if((t=d(this,Tl))==null||t.abort(),C(this,Tl,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),d(this,Ho)&&(clearTimeout(d(this,Ho)),C(this,Ho,null)),D(this,Rt,jp).call(this),this.removeEditToolbar(),d(this,Hs)){for(const s of d(this,Hs).values())clearTimeout(s);C(this,Hs,null)}this.parent=null,(e=d(this,Xu))==null||e.destroy(),C(this,Xu,null),(n=d(this,Vs))==null||n.remove(),C(this,Vs,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(D(this,Rt,F2).call(this),d(this,On).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,s,r,a]=this.getPDFRect();return[kt._round(n+(r-n)*t),kt._round(s+(a-s)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return d(this,de).commentPopupPositionInLayer}set commentPopupPosition(t){d(this,de).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return d(this,de).hasDefaultPopupPosition()}get commentButtonWidth(){return d(this,de).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){var e;(e=d(this,de))==null||e.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),C(this,Or,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=d(this,On).children;if(!d(this,ao)){C(this,ao,Array.from(e));const a=D(this,Rt,q2).bind(this),u=D(this,Rt,Y2).bind(this),h=this._uiManager._signal;for(const f of d(this,ao)){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",a,{signal:h}),f.addEventListener("blur",u,{signal:h}),f.addEventListener("focus",D(this,Rt,X2).bind(this,p),{signal:h}),f.setAttribute("data-l10n-id",kt._l10nResizer[p])}}const n=d(this,ao)[0];let s=0;for(const a of e){if(a===n)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(d(this,ao).length/4);if(r!==s){if(r<s)for(let u=0;u<s-r;u++)d(this,On).append(d(this,On).firstElementChild);else if(r>s)for(let u=0;u<r-s;u++)d(this,On).firstElementChild.before(d(this,On).lastElementChild);let a=0;for(const u of e){const f=d(this,ao)[a++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",kt._l10nResizer[f])}}D(this,Rt,xC).call(this,0),C(this,Vr,!0),d(this,On).firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){d(this,Vr)&&D(this,Rt,CC).call(this,d(this,tg),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){D(this,Rt,jp).call(this),this.div.focus()}select(){var t,e,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(n=d(this,Ue))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var t;return(t=this.div)==null?void 0:t.focus({preventScroll:!0})},0)}unselect(){var t,e,n,s,r;this.isSelected&&(this.isSelected=!1,(t=d(this,On))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=d(this,Ue))==null||r.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return d(this,eg)}set isEditing(t){C(this,eg,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){d(this,Hs)||C(this,Hs,new Map);const{action:n}=t;let s=d(this,Hs).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),d(this,Hs).delete(n),d(this,Hs).size===0&&C(this,Hs,null)},kt._telemetryTimeout),d(this,Hs).set(n,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),C(this,_h,!1)}disable(){this.div&&(this.div.tabIndex=-1),C(this,_h,!0)}updateFakeAnnotationElement(t){if(!d(this,Vs)&&!this.deleted){C(this,Vs,t.addFakeAnnotation(this));return}if(this.deleted){d(this,Vs).remove(),C(this,Vs,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&d(this,Vs).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Gu=new WeakMap,ao=new WeakMap,Ue=new WeakMap,de=new WeakMap,Fr=new WeakMap,_h=new WeakMap,Al=new WeakMap,jm=new WeakMap,On=new WeakMap,zu=new WeakMap,Or=new WeakMap,Vs=new WeakMap,Tl=new WeakMap,tg=new WeakMap,qu=new WeakMap,Qi=new WeakMap,eg=new WeakMap,Yu=new WeakMap,Vr=new WeakMap,Ho=new WeakMap,wh=new WeakMap,xh=new WeakMap,Hs=new WeakMap,Xu=new WeakMap,ng=new WeakMap,VA=new WeakMap,Rt=new WeakSet,SC=function([t,e],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},ig=new WeakSet,EC=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},I0=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},F2=function(){if(d(this,On))return;C(this,On,document.createElement("div")),d(this,On).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const s=document.createElement("div");d(this,On).append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",D(this,Rt,O2).bind(this,n),{signal:e}),s.addEventListener("contextmenu",Qs,{signal:e}),s.tabIndex=-1}this.div.prepend(d(this,On))},O2=function(t,e){var p;e.preventDefault();const{isMac:n}=Tn.platform;if(e.button!==0||e.ctrlKey&&n)return;(p=d(this,Ue))==null||p.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,C(this,zu,[e.screenX,e.screenY]);const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",D(this,Rt,CC).bind(this,t),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Qe,{passive:!1,signal:a}),window.addEventListener("contextmenu",Qs,{signal:a}),C(this,Or,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{var y;r.abort(),this.parent.togglePointerEvents(!0),(y=d(this,Ue))==null||y.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=u,this.div.style.cursor=h,D(this,Rt,N0).call(this)};window.addEventListener("pointerup",f,{signal:a}),window.addEventListener("blur",f,{signal:a})},bC=function(t,e,n,s){this.width=n,this.height=s,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()},N0=function(){if(!d(this,Or))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:s}=d(this,Or);C(this,Or,null);const r=this.x,a=this.y,u=this.width,h=this.height;r===t&&a===e&&u===n&&h===s||this.addCommands({cmd:D(this,Rt,bC).bind(this,r,a,u,h),undo:D(this,Rt,bC).bind(this,t,e,n,s),mustExec:!0})},CC=function(t,e){const[n,s]=this.parentDimensions,r=this.x,a=this.y,u=this.width,h=this.height,f=kt.MIN_SIZE/n,p=kt.MIN_SIZE/s,y=D(this,Rt,I0).call(this,this.rotation),v=(G,$)=>[y[0]*G+y[2]*$,y[1]*G+y[3]*$],E=D(this,Rt,I0).call(this,360-this.rotation),b=(G,$)=>[E[0]*G+E[2]*$,E[1]*G+E[3]*$];let _,w,x=!1,N=!1;switch(t){case"topLeft":x=!0,_=(G,$)=>[0,0],w=(G,$)=>[G,$];break;case"topMiddle":_=(G,$)=>[G/2,0],w=(G,$)=>[G/2,$];break;case"topRight":x=!0,_=(G,$)=>[G,0],w=(G,$)=>[0,$];break;case"middleRight":N=!0,_=(G,$)=>[G,$/2],w=(G,$)=>[0,$/2];break;case"bottomRight":x=!0,_=(G,$)=>[G,$],w=(G,$)=>[0,0];break;case"bottomMiddle":_=(G,$)=>[G/2,$],w=(G,$)=>[G/2,0];break;case"bottomLeft":x=!0,_=(G,$)=>[0,$],w=(G,$)=>[G,0];break;case"middleLeft":N=!0,_=(G,$)=>[0,$/2],w=(G,$)=>[G,$/2];break}const I=_(u,h),L=w(u,h);let U=v(...L);const k=kt._round(r+U[0]),B=kt._round(a+U[1]);let z=1,H=1,j,et;if(e.fromKeyboard)({deltaX:j,deltaY:et}=e);else{const{screenX:G,screenY:$}=e,[it,bt]=d(this,zu);[j,et]=this.screenToPageTranslation(G-it,$-bt),d(this,zu)[0]=G,d(this,zu)[1]=$}if([j,et]=b(j/n,et/s),x){const G=Math.hypot(u,h);z=H=Math.max(Math.min(Math.hypot(L[0]-I[0]-j,L[1]-I[1]-et)/G,1/u,1/h),f/u,p/h)}else N?z=qn(Math.abs(L[0]-I[0]-j),f,1)/u:H=qn(Math.abs(L[1]-I[1]-et),p,1)/h;const at=kt._round(u*z),ft=kt._round(h*H);U=v(...w(at,ft));const lt=k-U[0],vt=B-U[1];d(this,Qi)||C(this,Qi,[this.x,this.y,this.width,this.height]),this.width=at,this.height=ft,this.x=lt,this.y=vt,this.setDims(),this.fixAndSetPosition(),this._onResizing()},V2=function(){var t;C(this,Or,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=d(this,Ue))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},H2=function(t,e,n){let r=.7*(n/e)+1-.7;if(r===1)return;const a=D(this,Rt,I0).call(this,this.rotation),u=(k,B)=>[a[0]*k+a[2]*B,a[1]*k+a[3]*B],[h,f]=this.parentDimensions,p=this.x,y=this.y,v=this.width,E=this.height,b=kt.MIN_SIZE/h,_=kt.MIN_SIZE/f;r=Math.max(Math.min(r,1/v,1/E),b/v,_/E);const w=kt._round(v*r),x=kt._round(E*r);if(w===v&&x===E)return;d(this,Qi)||C(this,Qi,[p,y,v,E]);const N=u(v/2,E/2),I=kt._round(p+N[0]),L=kt._round(y+N[1]),U=u(w/2,x/2);this.x=I-U[0],this.y=L-U[1],this.width=w,this.height=x,this.setDims(),this.fixAndSetPosition(),this._onResizing()},G2=function(){var t;(t=d(this,Ue))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),D(this,Rt,N0).call(this)},_C=function(t){const{isMac:e}=Tn.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},z2=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const s=new AbortController,r=this._uiManager.combinedSignal(s),a={capture:!0,passive:!1,signal:r},u=f=>{s.abort(),C(this,Al,null),C(this,qu,!1),this._uiManager.endDragSession()||D(this,Rt,_C).call(this,f),n&&this._onStopDragging()};e&&(C(this,wh,t.clientX),C(this,xh,t.clientY),C(this,Al,t.pointerId),C(this,jm,t.pointerType),window.addEventListener("pointermove",f=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:y,pointerId:v}=f;if(v!==d(this,Al)){Qe(f);return}const[E,b]=this.screenToPageTranslation(p-d(this,wh),y-d(this,xh));C(this,wh,p),C(this,xh,y),this._uiManager.dragSelectedEditors(E,b)},a),window.addEventListener("touchmove",Qe,a),window.addEventListener("pointerdown",f=>{f.pointerType===d(this,jm)&&(d(this,Xu)||f.isPrimary)&&u(f),Qe(f)},a));const h=f=>{if(!d(this,Al)||d(this,Al)===f.pointerId){u(f);return}Qe(f)};window.addEventListener("pointerup",h,{signal:r}),window.addEventListener("blur",h,{signal:r})},wC=function(){if(d(this,Tl)||!this.div)return;C(this,Tl,new AbortController);const t=this._uiManager.combinedSignal(d(this,Tl));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},q2=function(t){kt._resizerKeyboardManager.exec(this,t)},Y2=function(t){var e;d(this,Vr)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==d(this,On)&&D(this,Rt,jp).call(this)},X2=function(t){C(this,tg,d(this,Vr)?t:"")},xC=function(t){if(d(this,ao))for(const e of d(this,ao))e.tabIndex=t},jp=function(){C(this,Vr,!1),D(this,Rt,xC).call(this,-1),D(this,Rt,N0).call(this)},R(kt,ig),Z(kt,"_l10n",null),Z(kt,"_l10nResizer",null),Z(kt,"_borderLineWidth",-1),Z(kt,"_colorManager",new mC),Z(kt,"_zIndex",1),Z(kt,"_telemetryTimeout",1e3);let Re=kt;class D9 extends Re{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const rP=3285377520,Ds=4294901760,Do=65535;class $2{constructor(t){this.h1=t?t&4294967295:rP,this.h2=t?t&4294967295:rP}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let _=0,w=t.length;_<w;_++){const x=t.charCodeAt(_);x<=255?e[n++]=x:(e[n++]=x>>>8,e[n++]=x&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,r=n-s*4,a=new Uint32Array(e.buffer,0,s);let u=0,h=0,f=this.h1,p=this.h2;const y=3432918353,v=461845907,E=y&Do,b=v&Do;for(let _=0;_<s;_++)_&1?(u=a[_],u=u*y&Ds|u*E&Do,u=u<<15|u>>>17,u=u*v&Ds|u*b&Do,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(h=a[_],h=h*y&Ds|h*E&Do,h=h<<15|h>>>17,h=h*v&Ds|h*b&Do,p^=h,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,r){case 3:u^=e[s*4+2]<<16;case 2:u^=e[s*4+1]<<8;case 1:u^=e[s*4],u=u*y&Ds|u*E&Do,u=u<<15|u>>>17,u=u*v&Ds|u*b&Do,s&1?f^=u:p^=u}this.h1=f,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Ds|t*36045&Do,e=e*4283543511&Ds|((e<<16|t>>>16)*2950163797&Ds)>>>16,t^=e>>>1,t=t*444984403&Ds|t*60499&Do,e=e*3301882366&Ds|((e<<16|t>>>16)*3120437893&Ds)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const MC=Object.freeze({map:null,hash:"",transfer:void 0});var $u,Ku,Hr,Vn,HA,K2;class xw{constructor(){R(this,HA);R(this,$u,!1);R(this,Ku,null);R(this,Hr,null);R(this,Vn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=d(this,Vn).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return d(this,Vn).get(t)}remove(t){const e=d(this,Vn).get(t);if(e!==void 0&&(e instanceof Re&&d(this,Hr).delete(e.annotationElementId),d(this,Vn).delete(t),d(this,Vn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of d(this,Vn).values())if(n instanceof Re)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=d(this,Vn).get(t);let s=!1;if(n!==void 0)for(const[r,a]of Object.entries(e))n[r]!==a&&(s=!0,n[r]=a);else s=!0,d(this,Vn).set(t,e);s&&D(this,HA,K2).call(this),e instanceof Re&&((d(this,Hr)||C(this,Hr,new Map)).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return d(this,Vn).has(t)}get size(){return d(this,Vn).size}resetModified(){d(this,$u)&&(C(this,$u,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new W2(this)}get serializable(){if(d(this,Vn).size===0)return MC;const t=new Map,e=new $2,n=[],s=Object.create(null);let r=!1;for(const[a,u]of d(this,Vn)){const h=u instanceof Re?u.serialize(!1,s):u;u.page&&(u.pageIndex=u.page._pageIndex,delete u.page),h&&(t.set(a,h),e.update(`${a}:${JSON.stringify(h)}`),r||(r=!!h.bitmap))}if(r)for(const a of t.values())a.bitmap&&n.push(a.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:MC}get editorStats(){let t=null;const e=new Map;let n=0,s=0;for(const r of d(this,Vn).values()){if(!(r instanceof Re)){r.popup&&(r.popup.deleted?s+=1:n+=1);continue}r.isCommentDeleted?s+=1:r.hasEditedComment&&(n+=1);const a=r.telemetryFinalData;if(!a)continue;const{type:u}=a;e.has(u)||e.set(u,Object.getPrototypeOf(r).constructor),t||(t=Object.create(null));const h=t[u]||(t[u]=new Map);for(const[f,p]of Object.entries(a)){if(f==="type")continue;let y=h.get(f);y||(y=new Map,h.set(f,y));const v=y.get(p)??0;y.set(p,v+1)}}if((s>0||n>0)&&(t||(t=Object.create(null)),t.comments={deleted:s,edited:n}),!t)return null;for(const[r,a]of e)t[r]=a.computeTelemetryFinalData(t[r]);return t}resetModifiedIds(){C(this,Ku,null)}updateEditor(t,e){var s;const n=(s=d(this,Hr))==null?void 0:s.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){var e;return((e=d(this,Hr))==null?void 0:e.get(t))||null}get modifiedIds(){if(d(this,Ku))return d(this,Ku);const t=[];if(d(this,Hr))for(const e of d(this,Hr).values())e.serialize()&&t.push(e.annotationElementId);return C(this,Ku,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return d(this,Vn).entries()}}$u=new WeakMap,Ku=new WeakMap,Hr=new WeakMap,Vn=new WeakMap,HA=new WeakSet,K2=function(){d(this,$u)||(C(this,$u,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var sg;class W2 extends xw{constructor(e){super();R(this,sg);const{map:n,hash:s,transfer:r}=e.serializable,a=structuredClone(n,r?{transfer:r}:null);C(this,sg,{map:a,hash:s,transfer:r})}get print(){re("Should not call PrintAnnotationStorage.print")}get serializable(){return d(this,sg)}get modifiedIds(){return Nt(this,"modifiedIds",{ids:new Set,hash:""})}}sg=new WeakMap;var Mh;class I9{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){R(this,Mh,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),d(this,Mh).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||d(this,Mh).has(t.loadedName))){if(oe(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:r,style:a}=t,u=new FontFace(s,r,a);this.addNativeFontFace(u);try{await u.load(),d(this,Mh).add(s),n==null||n(t)}catch{It(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}re("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw It(`Failed to load font '${n.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Nt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Nt(this,"isSyncFontLoadingSupported",ci||Tn.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(oe(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:e,callback:t};return n.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Nt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(L,U){return L.charCodeAt(U)<<24|L.charCodeAt(U+1)<<16|L.charCodeAt(U+2)<<8|L.charCodeAt(U+3)&255}function s(L,U,k,B){const z=L.substring(0,U),H=L.substring(U+k);return z+B+H}let r,a;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let f=0;function p(L,U){if(++f>30){It("Load test font never loaded."),U();return}if(h.font="30px "+L,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){U();return}setTimeout(p.bind(null,L,U))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=s(v,976,y.length,y);const b=16,_=1482184792;let w=n(v,b);for(r=0,a=y.length-3;r<a;r+=4)w=w-_+n(y,r)|0;r<y.length&&(w=w-_+n(y+"XXX",r)|0),v=s(v,b,4,h9(w));const x=`url(data:font/opentype;base64,${btoa(v)});`,N=`@font-face {font-family:"${y}";src:${x}}`;this.insertRule(N);const I=this._document.createElement("div");I.style.visibility="hidden",I.style.width=I.style.height="10px",I.style.position="absolute",I.style.top=I.style.left="0px";for(const L of[t.loadedName,y]){const U=this._document.createElement("span");U.textContent="Hi",U.style.fontFamily=L,I.append(U)}this._document.body.append(I),p(y,()=>{I.remove(),e.complete()})}}Mh=new WeakMap;var ye;class N9{constructor(t,e=null,n,s){R(this,ye);this.compiledGlyphs=Object.create(null),C(this,ye,t),this._inspectFont=e,n&&Object.assign(this,n),s&&(this.charProcOperatorList=s)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let s;try{s=t.get(n)}catch(a){It(`getPathGenerator - ignoring character: "${a}".`)}const r=f2(s==null?void 0:s.path);return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=r}get black(){return d(this,ye).black}get bold(){return d(this,ye).bold}get disableFontFace(){return d(this,ye).disableFontFace??!1}set disableFontFace(t){Nt(this,"disableFontFace",!!t)}get fontExtraProperties(){return d(this,ye).fontExtraProperties??!1}get isInvalidPDFjsFont(){return d(this,ye).isInvalidPDFjsFont}get isType3Font(){return d(this,ye).isType3Font}get italic(){return d(this,ye).italic}get missingFile(){return d(this,ye).missingFile}get remeasure(){return d(this,ye).remeasure}get vertical(){return d(this,ye).vertical}get ascent(){return d(this,ye).ascent}get defaultWidth(){return d(this,ye).defaultWidth}get descent(){return d(this,ye).descent}get bbox(){return d(this,ye).bbox}set bbox(t){Nt(this,"bbox",t)}get fontMatrix(){return d(this,ye).fontMatrix}get fallbackName(){return d(this,ye).fallbackName}get loadedName(){return d(this,ye).loadedName}get mimetype(){return d(this,ye).mimetype}get name(){return d(this,ye).name}get data(){return d(this,ye).data}clearData(){d(this,ye).clearData()}get cssFontInfo(){return d(this,ye).cssFontInfo}get systemFontInfo(){return d(this,ye).systemFontInfo}get defaultVMetrics(){return d(this,ye).defaultVMetrics}}ye=new WeakMap;var Rh,Dh,og,Ih,P0;const jd=class jd{constructor(t){R(this,Ih);R(this,Rh);R(this,Dh);R(this,og);C(this,Rh,t),C(this,Dh,new DataView(d(this,Rh))),C(this,og,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let s=0;for(const f of jd.strings){const p=e.encode(t[f]);n[f]=p,s+=4+p.length}const r=new ArrayBuffer(s),a=new Uint8Array(r),u=new DataView(r);let h=0;for(const f of jd.strings){const p=n[f],y=p.length;u.setUint32(h,y),a.set(p,h+4),h+=4+y}return oe(h===r.byteLength,"CssFontInfo.write: Buffer overflow"),r}get fontFamily(){return D(this,Ih,P0).call(this,0)}get fontWeight(){return D(this,Ih,P0).call(this,1)}get italicAngle(){return D(this,Ih,P0).call(this,2)}};Rh=new WeakMap,Dh=new WeakMap,og=new WeakMap,Ih=new WeakSet,P0=function(t){oe(t<jd.strings.length,"Invalid string index");let e=0;for(let s=0;s<t;s++)e+=d(this,Dh).getUint32(e)+4;const n=d(this,Dh).getUint32(e);return d(this,og).decode(new Uint8Array(d(this,Rh),e+4,n))},Z(jd,"strings",["fontFamily","fontWeight","italicAngle"]);let wA=jd;var Sl,Go,Wu,Ju,tm;const th=class th{constructor(t){R(this,Ju);R(this,Sl);R(this,Go);R(this,Wu);C(this,Sl,t),C(this,Go,new DataView(d(this,Sl))),C(this,Wu,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let s=0;for(const v of th.strings){const E=e.encode(t[v]);n[v]=E,s+=4+E.length}s+=4;let r,a,u=1+s;t.style&&(r=e.encode(t.style.style),a=e.encode(t.style.weight),u+=4+r.length+4+a.length);const h=new ArrayBuffer(u),f=new Uint8Array(h),p=new DataView(h);let y=0;p.setUint8(y++,t.guessFallback?1:0),p.setUint32(y,0),y+=4,s=0;for(const v of th.strings){const E=n[v],b=E.length;s+=4+b,p.setUint32(y,b),f.set(E,y+4),y+=4+b}return p.setUint32(y-s-4,s),t.style&&(p.setUint32(y,r.length),f.set(r,y+4),y+=4+r.length,p.setUint32(y,a.length),f.set(a,y+4),y+=4+a.length),oe(y<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(y)}get guessFallback(){return d(this,Go).getUint8(0)!==0}get css(){return D(this,Ju,tm).call(this,0)}get loadedName(){return D(this,Ju,tm).call(this,1)}get baseFontName(){return D(this,Ju,tm).call(this,2)}get src(){return D(this,Ju,tm).call(this,3)}get style(){let t=1;t+=4+d(this,Go).getUint32(t);const e=d(this,Go).getUint32(t),n=d(this,Wu).decode(new Uint8Array(d(this,Sl),t+4,e));t+=4+e;const s=d(this,Go).getUint32(t),r=d(this,Wu).decode(new Uint8Array(d(this,Sl),t+4,s));return{style:n,weight:r}}};Sl=new WeakMap,Go=new WeakMap,Wu=new WeakMap,Ju=new WeakSet,tm=function(t){oe(t<th.strings.length,"Invalid string index");let e=5;for(let s=0;s<t;s++)e+=d(this,Go).getUint32(e)+4;const n=d(this,Go).getUint32(e);return d(this,Wu).decode(new Uint8Array(d(this,Sl),e+4,n))},Z(th,"strings",["css","loadedName","baseFontName","src"]);let xA=th;var Nh,Ph,Lh,kh,Zi,zo,rg,ve,Je,no,L0,em;const Ft=class Ft{constructor({data:t,extra:e}){R(this,Je);R(this,zo);R(this,rg);R(this,ve);C(this,zo,t),C(this,rg,new TextDecoder),C(this,ve,new DataView(d(this,zo))),e&&Object.assign(this,e)}get black(){return D(this,Je,no).call(this,0)}get bold(){return D(this,Je,no).call(this,1)}get disableFontFace(){return D(this,Je,no).call(this,2)}get fontExtraProperties(){return D(this,Je,no).call(this,3)}get isInvalidPDFjsFont(){return D(this,Je,no).call(this,4)}get isType3Font(){return D(this,Je,no).call(this,5)}get italic(){return D(this,Je,no).call(this,6)}get missingFile(){return D(this,Je,no).call(this,7)}get remeasure(){return D(this,Je,no).call(this,8)}get vertical(){return D(this,Je,no).call(this,9)}get ascent(){return D(this,Je,L0).call(this,0)}get defaultWidth(){return D(this,Je,L0).call(this,1)}get descent(){return D(this,Je,L0).call(this,2)}get bbox(){let t=d(Ft,Ph);if(d(this,ve).getUint8(t)===0)return;t+=1;const n=[];for(let s=0;s<4;s++)n.push(d(this,ve).getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=d(Ft,Lh);if(d(this,ve).getUint8(t)===0)return;t+=1;const n=[];for(let s=0;s<6;s++)n.push(d(this,ve).getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=d(Ft,kh);if(d(this,ve).getUint8(t)===0)return;t+=1;const n=[];for(let s=0;s<3;s++)n.push(d(this,ve).getInt16(t,!0)),t+=2;return n}get fallbackName(){return D(this,Je,em).call(this,0)}get loadedName(){return D(this,Je,em).call(this,1)}get mimetype(){return D(this,Je,em).call(this,2)}get name(){return D(this,Je,em).call(this,3)}get data(){let t=d(Ft,Zi);const e=d(this,ve).getUint32(t);t+=4+e;const n=d(this,ve).getUint32(t);t+=4+n;const s=d(this,ve).getUint32(t);t+=4+s;const r=d(this,ve).getUint32(t);if(r!==0)return new Uint8Array(d(this,zo),t+4,r)}clearData(){let t=d(Ft,Zi);const e=d(this,ve).getUint32(t);t+=4+e;const n=d(this,ve).getUint32(t);t+=4+n;const s=d(this,ve).getUint32(t);t+=4+s;const r=d(this,ve).getUint32(t);new Uint8Array(d(this,zo),t+4,r).fill(0),d(this,ve).setUint32(t,0)}get cssFontInfo(){let t=d(Ft,Zi);const e=d(this,ve).getUint32(t);t+=4+e;const n=d(this,ve).getUint32(t);t+=4+n;const s=d(this,ve).getUint32(t);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(d(this,zo),t+4,s)),new wA(r.buffer)}get systemFontInfo(){let t=d(Ft,Zi);const e=d(this,ve).getUint32(t);t+=4+e;const n=d(this,ve).getUint32(t);if(n===0)return null;const s=new Uint8Array(n);return s.set(new Uint8Array(d(this,zo),t+4,n)),new xA(s.buffer)}static write(t){const e=t.systemFontInfo?xA.write(t.systemFontInfo):null,n=t.cssFontInfo?wA.write(t.cssFontInfo):null,s=new TextEncoder,r={};let a=0;for(const _ of Ft.strings)r[_]=s.encode(t[_]),a+=4+r[_].length;const u=d(Ft,Zi)+4+a+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),h=new ArrayBuffer(u),f=new Uint8Array(h),p=new DataView(h);let y=0;const v=Ft.bools.length;let E=0,b=0;for(let _=0;_<v;_++){const w=t[Ft.bools[_]];E|=(w===void 0?0:w?2:1)<<b,b+=2,(b===8||_===v-1)&&(p.setUint8(y++,E),E=0,b=0)}oe(y===d(Ft,Nh),"FontInfo.write: Boolean properties offset mismatch");for(const _ of Ft.numbers)p.setFloat64(y,t[_]),y+=8;if(oe(y===d(Ft,Ph),"FontInfo.write: Number properties offset mismatch"),t.bbox){p.setUint8(y++,4);for(const _ of t.bbox)p.setInt16(y,_,!0),y+=2}else p.setUint8(y++,0),y+=8;if(oe(y===d(Ft,Lh),"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){p.setUint8(y++,6);for(const _ of t.fontMatrix)p.setFloat64(y,_,!0),y+=8}else p.setUint8(y++,0),y+=48;if(oe(y===d(Ft,kh),"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){p.setUint8(y++,1);for(const _ of t.defaultVMetrics)p.setInt16(y,_,!0),y+=2}else p.setUint8(y++,0),y+=6;oe(y===d(Ft,Zi),"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(d(Ft,Zi),0),y+=4;for(const _ of Ft.strings){const w=r[_],x=w.length;p.setUint32(y,x),f.set(w,y+4),y+=4+x}if(p.setUint32(d(Ft,Zi),y-d(Ft,Zi)-4),!e)p.setUint32(y,0),y+=4;else{const _=e.byteLength;p.setUint32(y,_),oe(y+4+_<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),y+4),y+=4+_}if(!n)p.setUint32(y,0),y+=4;else{const _=n.byteLength;p.setUint32(y,_),oe(y+4+_<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(n),y+4),y+=4+_}return t.data===void 0?(p.setUint32(y,0),y+=4):(p.setUint32(y,t.data.length),f.set(t.data,y+4),y+=4+t.data.length),oe(y<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(y)}};Nh=new WeakMap,Ph=new WeakMap,Lh=new WeakMap,kh=new WeakMap,Zi=new WeakMap,zo=new WeakMap,rg=new WeakMap,ve=new WeakMap,Je=new WeakSet,no=function(t){oe(t<Ft.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,s=d(this,ve).getUint8(e)>>n&3;return s===0?void 0:s===2},L0=function(t){return oe(t<Ft.numbers.length,"Invalid number index"),d(this,ve).getFloat64(d(Ft,Nh)+t*8)},em=function(t){oe(t<Ft.strings.length,"Invalid string index");let e=d(Ft,Zi)+4;for(let r=0;r<t;r++)e+=d(this,ve).getUint32(e)+4;const n=d(this,ve).getUint32(e),s=new Uint8Array(n);return s.set(new Uint8Array(d(this,zo),e+4,n)),d(this,rg).decode(s)},Z(Ft,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),Z(Ft,"numbers",["ascent","defaultWidth","descent"]),Z(Ft,"strings",["fallbackName","loadedName","mimetype","name"]),R(Ft,Nh,Math.ceil(Ft.bools.length*2/8)),R(Ft,Ph,d(Ft,Nh)+Ft.numbers.length*8),R(Ft,Lh,d(Ft,Ph)+1+8),R(Ft,kh,d(Ft,Lh)+1+48),R(Ft,Zi,d(Ft,kh)+1+6);let RC=Ft;var ag,lg,ug,cg,dg,hg,fg,pg;const xe=class xe{constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,n=null,s=[],r=[],a=[],u=[],h=null,f=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,n=t[2],a=t[3],e===1?s.push(...t[4],...t[5]):s.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,h=t[1],s=t[2],r=t[3],u=t[4]||[],n=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const p=Math.floor(s.length/2),y=Math.floor(r.length/3),v=a.length,E=u.length;let b=0;for(const U of u)b+=1,b=Math.ceil(b/4)*4,b+=4+U.coords.length*4,b+=4+U.colors.length*4,U.verticesPerRow!==void 0&&(b+=4);const _=20+p*8+y*3+v*8+(n?16:0)+(f?3:0)+b,w=new ArrayBuffer(_),x=new DataView(w),N=new Uint8Array(w);x.setUint8(d(xe,ag),e),x.setUint8(d(xe,lg),n?1:0),x.setUint8(d(xe,ug),f?1:0),x.setUint8(d(xe,cg),h),x.setUint32(d(xe,dg),p,!0),x.setUint32(d(xe,hg),y,!0),x.setUint32(d(xe,fg),v,!0),x.setUint32(d(xe,pg),E,!0);let I=20;new Float32Array(w,I,p*2).set(s),I+=p*8,N.set(r,I),I+=y*3;for(const[U,k]of a)x.setFloat32(I,U,!0),I+=4,x.setUint32(I,parseInt(k.slice(1),16),!0),I+=4;if(n)for(const U of n)x.setFloat32(I,U,!0),I+=4;f&&(N.set(f,I),I+=3);for(let U=0;U<u.length;U++){const k=u[U];x.setUint8(I,k.type),I+=1,I=Math.ceil(I/4)*4,x.setUint32(I,k.coords.length,!0),I+=4,new Int32Array(w,I,k.coords.length).set(k.coords),I+=k.coords.length*4,x.setUint32(I,k.colors.length,!0),I+=4,new Int32Array(w,I,k.colors.length).set(k.colors),I+=k.colors.length*4,k.verticesPerRow!==void 0&&(x.setUint32(I,k.verticesPerRow,!0),I+=4)}return w}getIR(){const t=this.view,e=this.data[d(xe,ag)],n=!!this.data[d(xe,lg)],s=!!this.data[d(xe,ug)],r=t.getUint32(d(xe,dg),!0),a=t.getUint32(d(xe,hg),!0),u=t.getUint32(d(xe,fg),!0),h=t.getUint32(d(xe,pg),!0);let f=20;const p=new Float32Array(this.buffer,f,r*2);f+=r*8;const y=new Uint8Array(this.buffer,f,a*3);f+=a*3;const v=[];for(let w=0;w<u;++w){const x=t.getFloat32(f,!0);f+=4;const N=t.getUint32(f,!0);f+=4,v.push([x,`#${N.toString(16).padStart(6,"0")}`])}let E=null;if(n){E=[];for(let w=0;w<4;++w)E.push(t.getFloat32(f,!0)),f+=4}let b=null;s&&(b=new Uint8Array(this.buffer,f,3),f+=3);const _=[];for(let w=0;w<h;++w){const x=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const N=t.getUint32(f,!0);f+=4;const I=new Int32Array(this.buffer,f,N);f+=N*4;const L=t.getUint32(f,!0);f+=4;const U=new Int32Array(this.buffer,f,L);f+=L*4;const k={type:x,coords:I,colors:U};x===aC.LATTICE&&(k.verticesPerRow=t.getUint32(f,!0),f+=4),_.push(k)}if(e===1)return["RadialAxial","axial",E,v,Array.from(p.slice(0,2)),Array.from(p.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",E,v,[p[0],p[1]],[p[3],p[4]],p[2],p[5]];if(e===3){const w=this.data[d(xe,cg)];let x=null;if(p.length>0){let N=p[0],I=p[0],L=p[1],U=p[1];for(let k=0;k<p.length;k+=2){const B=p[k],z=p[k+1];N=N>B?B:N,L=L>z?z:L,I=I<B?B:I,U=U<z?z:U}x=[N,L,I,U]}return["Mesh",w,p,y,_,x,E,b]}throw new Error(`Unsupported pattern kind: ${e}`)}};ag=new WeakMap,lg=new WeakMap,ug=new WeakMap,cg=new WeakMap,dg=new WeakMap,hg=new WeakMap,fg=new WeakMap,pg=new WeakMap,R(xe,ag,0),R(xe,lg,1),R(xe,ug,2),R(xe,cg,3),R(xe,dg,4),R(xe,hg,8),R(xe,fg,12),R(xe,pg,16);let DC=xe;var Uh;class P9{constructor(t){R(this,Uh);C(this,Uh,t)}static write(t){let e,n;return Tn.isFloat16ArraySupported?(n=new ArrayBuffer(t.length*2),e=new Float16Array(n)):(n=new ArrayBuffer(t.length*4),e=new Float32Array(n)),e.set(t),n}get path(){return Tn.isFloat16ArraySupported?new Float16Array(d(this,Uh)):new Float32Array(d(this,Uh))}}Uh=new WeakMap;function L9(i){if(i instanceof URL)return i.href;if(typeof i=="string"){if(ci)return i;const t=URL.parse(i,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function k9(i){if(ci&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return hT(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function c0(i){if(typeof i!="string")return null;if(i.endsWith("/"))return i;throw new Error(`Invalid factory url: "${i}" must include trailing slash.`)}const IC=i=>typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0,U9=i=>typeof i=="object"&&typeof(i==null?void 0:i.name)=="string",B9=y9.bind(null,IC,U9);var Gr,GA;class F9{constructor(){R(this,Gr,new Map);R(this,GA,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};d(this,GA).then(()=>{for(const[s]of d(this,Gr))s.call(this,n)})}addEventListener(t,e,n=null){let s=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted){It("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(t,e);s=()=>r.removeEventListener("abort",a),r.addEventListener("abort",a)}d(this,Gr).set(e,s)}removeEventListener(t,e){const n=d(this,Gr).get(e);n==null||n(),d(this,Gr).delete(e)}terminate(){for(const[,t]of d(this,Gr))t==null||t();d(this,Gr).clear()}}Gr=new WeakMap,GA=new WeakMap;const d0={DATA:1,ERROR:2},ln={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function aP(){}function wi(i){if(i instanceof Wl||i instanceof lC||i instanceof jN||i instanceof EA||i instanceof pb)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||re('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Wl(i.message);case"InvalidPDFException":return new lC(i.message);case"PasswordException":return new jN(i.message,i.code);case"ResponseException":return new EA(i.message,i.status,i.missing);case"UnknownErrorException":return new pb(i.message,i.details)}return new pb(i.message,i.toString())}var Bh,Ws,J2,Q2,Z2,k0;class nm{constructor(t,e,n){R(this,Ws);R(this,Bh,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",D(this,Ws,J2).bind(this),{signal:d(this,Bh).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},n)}catch(a){r.reject(a)}return r.promise}sendWithStream(t,e,n,s){const r=this.streamId++,a=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:f=>{const p=Promise.withResolvers();return this.streamControllers[r]={controller:f,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:a,targetName:u,action:t,streamId:r,data:e,desiredSize:f.desiredSize},s),p.promise},pull:f=>{const p=Promise.withResolvers();return this.streamControllers[r].pullCall=p,h.postMessage({sourceName:a,targetName:u,stream:ln.PULL,streamId:r,desiredSize:f.desiredSize}),p.promise},cancel:f=>{oe(f instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[r].cancelCall=p,this.streamControllers[r].isClosed=!0,h.postMessage({sourceName:a,targetName:u,stream:ln.CANCEL,streamId:r,reason:wi(f)}),p.promise}},n)}destroy(){var t;(t=d(this,Bh))==null||t.abort(),C(this,Bh,null)}}Bh=new WeakMap,Ws=new WeakSet,J2=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){D(this,Ws,Z2).call(this,t);return}if(t.callback){const n=t.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===d0.DATA)s.resolve(t.data);else if(t.callback===d0.ERROR)s.reject(wi(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,s=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(a){r.postMessage({sourceName:n,targetName:s,callback:d0.DATA,callbackId:t.callbackId,data:a})},function(a){r.postMessage({sourceName:n,targetName:s,callback:d0.ERROR,callbackId:t.callbackId,reason:wi(a)})});return}if(t.streamId){D(this,Ws,Q2).call(this,t);return}e(t.data)},Q2=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,r=this.comObj,a=this,u=this.actionHandler[t.action],h={enqueue(f,p=1,y){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=p,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:s,stream:ln.ENQUEUE,streamId:e,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:ln.CLOSE,streamId:e}),delete a.streamSinks[e])},error(f){oe(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:ln.ERROR,streamId:e,reason:wi(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(u,t.data,h).then(function(){r.postMessage({sourceName:n,targetName:s,stream:ln.START_COMPLETE,streamId:e,success:!0})},function(f){r.postMessage({sourceName:n,targetName:s,stream:ln.START_COMPLETE,streamId:e,reason:wi(f)})})},Z2=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,r=this.comObj,a=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case ln.START_COMPLETE:t.success?a.startCall.resolve():a.startCall.reject(wi(t.reason));break;case ln.PULL_COMPLETE:t.success?a.pullCall.resolve():a.pullCall.reject(wi(t.reason));break;case ln.PULL:if(!u){r.postMessage({sourceName:n,targetName:s,stream:ln.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||aP).then(function(){r.postMessage({sourceName:n,targetName:s,stream:ln.PULL_COMPLETE,streamId:e,success:!0})},function(f){r.postMessage({sourceName:n,targetName:s,stream:ln.PULL_COMPLETE,streamId:e,reason:wi(f)})});break;case ln.ENQUEUE:if(oe(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(t.chunk);break;case ln.CLOSE:if(oe(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),D(this,Ws,k0).call(this,a,e);break;case ln.ERROR:oe(a,"error should have stream controller"),a.controller.error(wi(t.reason)),D(this,Ws,k0).call(this,a,e);break;case ln.CANCEL_COMPLETE:t.success?a.cancelCall.resolve():a.cancelCall.reject(wi(t.reason)),D(this,Ws,k0).call(this,a,e);break;case ln.CANCEL:if(!u)break;const h=wi(t.reason);Promise.try(u.onCancel||aP,h).then(function(){r.postMessage({sourceName:n,targetName:s,stream:ln.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){r.postMessage({sourceName:n,targetName:s,stream:ln.CANCEL_COMPLETE,streamId:e,reason:wi(f)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},k0=async function(t,e){var n,s,r;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(s=t.pullCall)==null?void 0:s.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var mg;class j2{constructor({enableHWA:t=!1}){R(this,mg,!1);C(this,mg,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!d(this,mg)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){re("Abstract method `_createCanvas` called.")}}mg=new WeakMap;class O9 extends j2{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class tU{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){re("Abstract method `_fetch` called.")}}class lP extends tU{async _fetch(t){const e=await Dy(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):hT(e)}}class eU{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,s,r){return"none"}destroy(t=!1){}}var Qu,Fh,zr,qr,jn,Zu,ju,mt,Wn,im,Bd,U0,Fd,nU,NC,Od,sm,om,PC,rm;class V9 extends eU{constructor({docId:e,ownerDocument:n=globalThis.document}){super();R(this,mt);R(this,Qu);R(this,Fh);R(this,zr);R(this,qr);R(this,jn);R(this,Zu);R(this,ju,0);C(this,qr,e),C(this,jn,n)}addFilter(e){if(!e)return"none";let n=d(this,mt,Wn).get(e);if(n)return n;const[s,r,a]=D(this,mt,U0).call(this,e),u=e.length===1?s:`${s}${r}${a}`;if(n=d(this,mt,Wn).get(u),n)return d(this,mt,Wn).set(e,n),n;const h=`g_${d(this,qr)}_transfer_map_${pn(this,ju)._++}`,f=D(this,mt,Fd).call(this,h);d(this,mt,Wn).set(e,f),d(this,mt,Wn).set(u,f);const p=D(this,mt,Od).call(this,h);return D(this,mt,om).call(this,s,r,a,p),f}addHCMFilter(e,n){var b;const s=`${e}-${n}`,r="base";let a=d(this,mt,im).get(r);if((a==null?void 0:a.key)===s||(a?((b=a.filter)==null||b.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},d(this,mt,im).set(r,a)),!e||!n))return a.url;const u=D(this,mt,rm).call(this,e);e=ht.makeHexColor(...u);const h=D(this,mt,rm).call(this,n);if(n=ht.makeHexColor(...h),d(this,mt,Bd).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return a.url;const f=new Array(256);for(let _=0;_<=255;_++){const w=_/255;f[_]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const p=f.join(","),y=`g_${d(this,qr)}_hcm_filter`,v=a.filter=D(this,mt,Od).call(this,y);D(this,mt,om).call(this,p,p,p,v),D(this,mt,NC).call(this,v);const E=(_,w)=>{const x=u[_]/255,N=h[_]/255,I=new Array(w+1);for(let L=0;L<=w;L++)I[L]=x+L/w*(N-x);return I.join(",")};return D(this,mt,om).call(this,E(0,5),E(1,5),E(2,5),v),a.url=D(this,mt,Fd).call(this,y),a.url}addAlphaFilter(e){let n=d(this,mt,Wn).get(e);if(n)return n;const[s]=D(this,mt,U0).call(this,[e]),r=`alpha_${s}`;if(n=d(this,mt,Wn).get(r),n)return d(this,mt,Wn).set(e,n),n;const a=`g_${d(this,qr)}_alpha_map_${pn(this,ju)._++}`,u=D(this,mt,Fd).call(this,a);d(this,mt,Wn).set(e,u),d(this,mt,Wn).set(r,u);const h=D(this,mt,Od).call(this,a);return D(this,mt,PC).call(this,s,h),u}addLuminosityFilter(e){let n=d(this,mt,Wn).get(e||"luminosity");if(n)return n;let s,r;if(e?([s]=D(this,mt,U0).call(this,[e]),r=`luminosity_${s}`):r="luminosity",n=d(this,mt,Wn).get(r),n)return d(this,mt,Wn).set(e,n),n;const a=`g_${d(this,qr)}_luminosity_map_${pn(this,ju)._++}`,u=D(this,mt,Fd).call(this,a);d(this,mt,Wn).set(e,u),d(this,mt,Wn).set(r,u);const h=D(this,mt,Od).call(this,a);return D(this,mt,nU).call(this,h),e&&D(this,mt,PC).call(this,s,h),u}addHighlightHCMFilter(e,n,s,r,a){var N;const u=`${n}-${s}-${r}-${a}`;let h=d(this,mt,im).get(e);if((h==null?void 0:h.key)===u||(h?((N=h.filter)==null||N.remove(),h.key=u,h.url="none",h.filter=null):(h={key:u,url:"none",filter:null},d(this,mt,im).set(e,h)),!n||!s))return h.url;const[f,p]=[n,s].map(D(this,mt,rm).bind(this));let y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),v=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[E,b]=[r,a].map(D(this,mt,rm).bind(this));v<y&&([y,v,E,b]=[v,y,b,E]),d(this,mt,Bd).style.color="";const _=(I,L,U)=>{const k=new Array(256),B=(v-y)/U,z=I/255,H=(L-I)/(255*U);let j=0;for(let et=0;et<=U;et++){const at=Math.round(y+et*B),ft=z+et*H;for(let lt=j;lt<=at;lt++)k[lt]=ft;j=at+1}for(let et=j;et<256;et++)k[et]=k[j-1];return k.join(",")},w=`g_${d(this,qr)}_hcm_${e}_filter`,x=h.filter=D(this,mt,Od).call(this,w);return D(this,mt,NC).call(this,x),D(this,mt,om).call(this,_(E[0],b[0],5),_(E[1],b[1],5),_(E[2],b[2],5),x),h.url=D(this,mt,Fd).call(this,w),h.url}destroy(e=!1){var n,s,r,a;e&&((n=d(this,Zu))!=null&&n.size)||((s=d(this,zr))==null||s.parentNode.parentNode.remove(),C(this,zr,null),(r=d(this,Fh))==null||r.clear(),C(this,Fh,null),(a=d(this,Zu))==null||a.clear(),C(this,Zu,null),C(this,ju,0))}}Qu=new WeakMap,Fh=new WeakMap,zr=new WeakMap,qr=new WeakMap,jn=new WeakMap,Zu=new WeakMap,ju=new WeakMap,mt=new WeakSet,Wn=function(){return d(this,Fh)||C(this,Fh,new Map)},im=function(){return d(this,Zu)||C(this,Zu,new Map)},Bd=function(){if(!d(this,zr)){const e=d(this,jn).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=d(this,jn).createElementNS(_r,"svg");s.setAttribute("width",0),s.setAttribute("height",0),C(this,zr,d(this,jn).createElementNS(_r,"defs")),e.append(s),s.append(d(this,zr)),d(this,jn).body.append(e)}return d(this,zr)},U0=function(e){if(e.length===1){const f=e[0],p=new Array(256);for(let v=0;v<256;v++)p[v]=f[v]/255;const y=p.join(",");return[y,y,y]}const[n,s,r]=e,a=new Array(256),u=new Array(256),h=new Array(256);for(let f=0;f<256;f++)a[f]=n[f]/255,u[f]=s[f]/255,h[f]=r[f]/255;return[a.join(","),u.join(","),h.join(",")]},Fd=function(e){if(d(this,Qu)===void 0){C(this,Qu,"");const n=d(this,jn).URL;n!==d(this,jn).baseURI&&(fT(n)?It('#createUrl: ignore "data:"-URL for performance reasons.'):C(this,Qu,u2(n,"")))}return`url(${d(this,Qu)}#${e})`},nU=function(e){const n=d(this,jn).createElementNS(_r,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},NC=function(e){const n=d(this,jn).createElementNS(_r,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},Od=function(e){const n=d(this,jn).createElementNS(_r,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),d(this,mt,Bd).append(n),n},sm=function(e,n,s){const r=d(this,jn).createElementNS(_r,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),e.append(r)},om=function(e,n,s,r){const a=d(this,jn).createElementNS(_r,"feComponentTransfer");r.append(a),D(this,mt,sm).call(this,a,"feFuncR",e),D(this,mt,sm).call(this,a,"feFuncG",n),D(this,mt,sm).call(this,a,"feFuncB",s)},PC=function(e,n){const s=d(this,jn).createElementNS(_r,"feComponentTransfer");n.append(s),D(this,mt,sm).call(this,s,"feFuncA",e)},rm=function(e){return d(this,mt,Bd).style.color=e,Ny(getComputedStyle(d(this,mt,Bd)).getPropertyValue("color"))};class iU{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){re("Abstract method `_fetch` called.")}}class uP extends iU{async _fetch(t){const e=await Dy(t,"arraybuffer");return new Uint8Array(e)}}class sU{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){re("Abstract method `_fetch` called.")}}class cP extends sU{async _fetch(t){const e=await Dy(t,"arraybuffer");return new Uint8Array(e)}}ci&&It("Please use the `legacy` build in Node.js environments.");async function Mw(i){const e=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(e)}class H9 extends eU{}class G9 extends j2{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class z9 extends tU{async _fetch(t){return Mw(t)}}class q9 extends iU{async _fetch(t){return Mw(t)}}class Y9 extends sU{async _fetch(t){return Mw(t)}}const Nd="__forcedDependency",{floor:dP,ceil:hP}=Math;function h0(i,t,e,n,s,r){i[t*4+0]=Math.min(i[t*4+0],e),i[t*4+1]=Math.min(i[t*4+1],n),i[t*4+2]=Math.max(i[t*4+2],s),i[t*4+3]=Math.max(i[t*4+3],r)}const LC=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Oh,El;class X9{constructor(t,e){R(this,Oh);R(this,El);C(this,Oh,t),C(this,El,e)}get length(){return d(this,Oh).length}isEmpty(t){return d(this,Oh)[t]===LC}minX(t){return d(this,El)[t*4+0]/256}minY(t){return d(this,El)[t*4+1]/256}maxX(t){return(d(this,El)[t*4+2]+1)/256}maxY(t){return(d(this,El)[t*4+3]+1)/256}}Oh=new WeakMap,El=new WeakMap;const f0=(i,t)=>{if(!i)return;let e=i.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},i.set(t,e)),e};var Ri,Di,tc,lo,ec,Yr,he,Ae,Xr,Ii,gg,Vh,nc,ic,$r,ti,qo,yg,kC;class $9{constructor(t,e,n=!1){R(this,yg);R(this,Ri,{__proto__:null});R(this,Di,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Nd]:[]});R(this,tc,new Map);R(this,lo,[]);R(this,ec,[]);R(this,Yr,[[1,0,0,1,0,0]]);R(this,he,[-1/0,-1/0,1/0,1/0]);R(this,Ae,new Float64Array([1/0,1/0,-1/0,-1/0]));R(this,Xr,-1);R(this,Ii,new Set);R(this,gg,new Map);R(this,Vh,new Map);R(this,nc);R(this,ic);R(this,$r);R(this,ti);R(this,qo);C(this,nc,t.width),C(this,ic,t.height),D(this,yg,kC).call(this,e),n&&C(this,qo,new Map)}growOperationsCount(t){t>=d(this,ti).length&&D(this,yg,kC).call(this,t,d(this,ti))}save(t){return C(this,Ri,{__proto__:d(this,Ri)}),C(this,Di,{__proto__:d(this,Di),transform:{__proto__:d(this,Di).transform},moveText:{__proto__:d(this,Di).moveText},sameLineText:{__proto__:d(this,Di).sameLineText},[Nd]:{__proto__:d(this,Di)[Nd]}}),C(this,he,{__proto__:d(this,he)}),d(this,lo).push(t),this}restore(t){var s;const e=Object.getPrototypeOf(d(this,Ri));if(e===null)return this;C(this,Ri,e),C(this,Di,Object.getPrototypeOf(d(this,Di))),C(this,he,Object.getPrototypeOf(d(this,he)));const n=d(this,lo).pop();return n!==void 0&&((s=f0(d(this,qo),t))==null||s.dependencies.add(n),d(this,ti)[t]=d(this,ti)[n]),this}recordOpenMarker(t){return d(this,lo).push(t),this}getOpenMarker(){return d(this,lo).length===0?null:d(this,lo).at(-1)}recordCloseMarker(t){var n;const e=d(this,lo).pop();return e!==void 0&&((n=f0(d(this,qo),t))==null||n.dependencies.add(e),d(this,ti)[t]=d(this,ti)[e]),this}beginMarkedContent(t){return d(this,ec).push(t),this}endMarkedContent(t){var n;const e=d(this,ec).pop();return e!==void 0&&((n=f0(d(this,qo),t))==null||n.dependencies.add(e),d(this,ti)[t]=d(this,ti)[e]),this}pushBaseTransform(t){return d(this,Yr).push(ht.multiplyByDOMMatrix(d(this,Yr).at(-1),t.getTransform())),this}popBaseTransform(){return d(this,Yr).length>1&&d(this,Yr).pop(),this}recordSimpleData(t,e){return d(this,Ri)[t]=e,this}recordIncrementalData(t,e){return d(this,Di)[t].push(e),this}resetIncrementalData(t,e){return d(this,Di)[t].length=0,this}recordNamedData(t,e){return d(this,tc).set(t,e),this}recordSimpleDataFromNamed(t,e,n){d(this,Ri)[t]=d(this,tc).get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Nd,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in d(this,Ri)&&this.recordFutureForcedDependency(e,d(this,Ri)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of d(this,Ii))this.recordFutureForcedDependency(Nd,t);return this}resetBBox(t){return d(this,Xr)!==t&&(C(this,Xr,t),d(this,Ae)[0]=1/0,d(this,Ae)[1]=1/0,d(this,Ae)[2]=-1/0,d(this,Ae)[3]=-1/0),this}recordClipBox(t,e,n,s,r,a){const u=ht.multiplyByDOMMatrix(d(this,Yr).at(-1),e.getTransform()),h=[1/0,1/0,-1/0,-1/0];ht.axialAlignedBoundingBox([n,r,s,a],u,h);const f=ht.intersect(d(this,he),h);return f?(d(this,he)[0]=f[0],d(this,he)[1]=f[1],d(this,he)[2]=f[2],d(this,he)[3]=f[3]):(d(this,he)[0]=d(this,he)[1]=1/0,d(this,he)[2]=d(this,he)[3]=-1/0),this}recordBBox(t,e,n,s,r,a){const u=d(this,he);if(u[0]===1/0)return this;const h=ht.multiplyByDOMMatrix(d(this,Yr).at(-1),e.getTransform());if(u[0]===-1/0)return ht.axialAlignedBoundingBox([n,r,s,a],h,d(this,Ae)),this;const f=[1/0,1/0,-1/0,-1/0];return ht.axialAlignedBoundingBox([n,r,s,a],h,f),d(this,Ae)[0]=Math.min(d(this,Ae)[0],Math.max(f[0],u[0])),d(this,Ae)[1]=Math.min(d(this,Ae)[1],Math.max(f[1],u[1])),d(this,Ae)[2]=Math.max(d(this,Ae)[2],Math.min(f[2],u[2])),d(this,Ae)[3]=Math.max(d(this,Ae)[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,e,n,s=1,r=0,a=0,u){const h=n.bbox;let f,p;if(h&&(f=h[2]!==h[0]&&h[3]!==h[1]&&d(this,Vh).get(n),f!==!1&&(p=[0,0,0,0],ht.axialAlignedBoundingBox(h,n.fontMatrix,p),(s!==1||r!==0||a!==0)&&ht.scaleMinMax([s,0,0,-s,r,a],p),f)))return this.recordBBox(t,e,p[0],p[2],p[1],p[3]);if(!u)return this.recordFullPageBBox(t);const y=u();return h&&p&&f===void 0&&(f=p[0]<=r-y.actualBoundingBoxLeft&&p[2]>=r+y.actualBoundingBoxRight&&p[1]<=a-y.actualBoundingBoxAscent&&p[3]>=a+y.actualBoundingBoxDescent,d(this,Vh).set(n,f),f)?this.recordBBox(t,e,p[0],p[2],p[1],p[3]):this.recordBBox(t,e,r-y.actualBoundingBoxLeft,r+y.actualBoundingBoxRight,a-y.actualBoundingBoxAscent,a+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return d(this,Ae)[0]=Math.max(0,d(this,he)[0]),d(this,Ae)[1]=Math.max(0,d(this,he)[1]),d(this,Ae)[2]=Math.min(d(this,nc),d(this,he)[2]),d(this,Ae)[3]=Math.min(d(this,ic),d(this,he)[3]),this}getSimpleIndex(t){return d(this,Ri)[t]}recordDependencies(t,e){const n=d(this,Ii),s=d(this,Ri),r=d(this,Di);for(const a of e)a in d(this,Ri)?n.add(s[a]):a in r&&r[a].forEach(n.add,n);return this}recordNamedDependency(t,e){return d(this,tc).has(e)&&d(this,Ii).add(d(this,tc).get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[Nd]),d(this,qo)){const n=f0(d(this,qo),t),{dependencies:s}=n;d(this,Ii).forEach(s.add,s),d(this,lo).forEach(s.add,s),d(this,ec).forEach(s.add,s),s.delete(t),n.isRenderingOperation=!0}if(d(this,Xr)===t){const n=dP(d(this,Ae)[0]*256/d(this,nc)),s=dP(d(this,Ae)[1]*256/d(this,ic)),r=hP(d(this,Ae)[2]*256/d(this,nc)),a=hP(d(this,Ae)[3]*256/d(this,ic));h0(d(this,$r),t,n,s,r,a);for(const u of d(this,Ii))u!==t&&h0(d(this,$r),u,n,s,r,a);for(const u of d(this,lo))u!==t&&h0(d(this,$r),u,n,s,r,a);for(const u of d(this,ec))u!==t&&h0(d(this,$r),u,n,s,r,a);e||(d(this,Ii).clear(),C(this,Xr,-1))}return this}recordShowTextOperation(t,e=!1){const n=Array.from(d(this,Ii));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const s of n)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(t,e=!1){return d(this,Xr)===t&&(C(this,Xr,-1),d(this,he)[0]=Math.max(d(this,he)[0],d(this,Ae)[0]),d(this,he)[1]=Math.max(d(this,he)[1],d(this,Ae)[1]),d(this,he)[2]=Math.min(d(this,he)[2],d(this,Ae)[2]),d(this,he)[3]=Math.min(d(this,he)[3],d(this,Ae)[3]),e||d(this,Ii).clear()),this}_takePendingDependencies(){const t=d(this,Ii);return C(this,Ii,new Set),t}_extractOperation(t){const e=d(this,gg).get(t);return d(this,gg).delete(t),e}_pushPendingDependencies(t){for(const e of t)d(this,Ii).add(e)}take(){return d(this,Vh).clear(),new X9(d(this,ti),d(this,$r))}takeDebugMetadata(){return d(this,qo)}}Ri=new WeakMap,Di=new WeakMap,tc=new WeakMap,lo=new WeakMap,ec=new WeakMap,Yr=new WeakMap,he=new WeakMap,Ae=new WeakMap,Xr=new WeakMap,Ii=new WeakMap,gg=new WeakMap,Vh=new WeakMap,nc=new WeakMap,ic=new WeakMap,$r=new WeakMap,ti=new WeakMap,qo=new WeakMap,yg=new WeakSet,kC=function(t,e){const n=new ArrayBuffer(t*4);C(this,$r,new Uint8ClampedArray(n)),C(this,ti,new Uint32Array(n)),e&&e.length>0?(d(this,ti).set(e),d(this,ti).fill(LC,e.length)):d(this,ti).fill(LC)};var Ce,Xe,uo,Hh,Gh;const Uw=class Uw{constructor(t,e,n){R(this,Ce);R(this,Xe);R(this,uo);R(this,Hh,0);R(this,Gh,0);if(t instanceof Uw&&d(t,uo)===!!n)return t;C(this,Ce,t),C(this,Xe,e),C(this,uo,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(t){return pn(this,Gh)._++,d(this,Ce).save(d(this,Xe)),this}restore(t){return d(this,Gh)>0&&(d(this,Ce).restore(d(this,Xe)),pn(this,Gh)._--),this}recordOpenMarker(t){return pn(this,Hh)._++,this}getOpenMarker(){return d(this,Hh)>0?d(this,Xe):d(this,Ce).getOpenMarker()}recordCloseMarker(t){return pn(this,Hh)._--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return d(this,Ce).pushBaseTransform(t),this}popBaseTransform(){return d(this,Ce).popBaseTransform(),this}recordSimpleData(t,e){return d(this,Ce).recordSimpleData(t,d(this,Xe)),this}recordIncrementalData(t,e){return d(this,Ce).recordIncrementalData(t,d(this,Xe)),this}resetIncrementalData(t,e){return d(this,Ce).resetIncrementalData(t,d(this,Xe)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return d(this,Ce).recordSimpleDataFromNamed(t,e,d(this,Xe)),this}recordFutureForcedDependency(t,e){return d(this,Ce).recordFutureForcedDependency(t,d(this,Xe)),this}inheritSimpleDataAsFutureForcedDependencies(t){return d(this,Ce).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return d(this,Ce).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return d(this,uo)||d(this,Ce).resetBBox(d(this,Xe)),this}recordClipBox(t,e,n,s,r,a){return d(this,uo)||d(this,Ce).recordClipBox(d(this,Xe),e,n,s,r,a),this}recordBBox(t,e,n,s,r,a){return d(this,uo)||d(this,Ce).recordBBox(d(this,Xe),e,n,s,r,a),this}recordCharacterBBox(t,e,n,s,r,a,u){return d(this,uo)||d(this,Ce).recordCharacterBBox(d(this,Xe),e,n,s,r,a,u),this}recordFullPageBBox(t){return d(this,uo)||d(this,Ce).recordFullPageBBox(d(this,Xe)),this}getSimpleIndex(t){return d(this,Ce).getSimpleIndex(t)}recordDependencies(t,e){return d(this,Ce).recordDependencies(d(this,Xe),e),this}recordNamedDependency(t,e){return d(this,Ce).recordNamedDependency(d(this,Xe),e),this}recordOperation(t){return d(this,Ce).recordOperation(d(this,Xe),!0),this}recordShowTextOperation(t){return d(this,Ce).recordShowTextOperation(d(this,Xe),!0),this}bboxToClipBoxDropOperation(t){return d(this,uo)||d(this,Ce).bboxToClipBoxDropOperation(d(this,Xe),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Ce=new WeakMap,Xe=new WeakMap,uo=new WeakMap,Hh=new WeakMap,Gh=new WeakMap;let MA=Uw;const Is={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Yn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function UC(i,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,n),i.clip(s)}class Rw{isModifyingCurrentTransform(){return!1}getPattern(){re("Abstract method `getPattern` called.")}}class K9 extends Rw{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let n,s=this._p0,r=this._p1;if(e&&(s=s.slice(),r=r.slice(),ht.applyTransform(s,e),ht.applyTransform(r,e)),this._type==="axial")n=t.createLinearGradient(s[0],s[1],r[0],r[1]);else if(this._type==="radial"){let a=this._r0,u=this._r1;if(e){const h=new Float32Array(2);ht.singularValueDecompose2dScale(e,h),a*=h[0],u*=h[0]}n=t.createRadialGradient(s[0],s[1],a,r[0],r[1],u)}for(const a of this._colorStops)n.addColorStop(a[0],a[1]);return n}getPattern(t,e,n,s){let r;if(s===Yn.STROKE||s===Yn.FILL){if(this.isOriginBased()){let v=ht.transform(n,e.baseTransform);this.matrix&&(v=ht.transform(v,this.matrix));const E=.001,b=Math.hypot(v[0],v[1]),_=Math.hypot(v[2],v[3]),w=(v[0]*v[2]+v[1]*v[3])/(b*_);if(Math.abs(w)<E)if(this.isRadial()){if(Math.abs(b-_)<E)return this._createGradient(t,v)}else return this._createGradient(t,v)}const a=e.current.getClippedPathBoundingBox(s,Ve(t))||[0,0,0,0],u=Math.ceil(a[2]-a[0])||1,h=Math.ceil(a[3]-a[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,h),p=f.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-a[0],-a[1]),n=ht.transform(n,[1,0,0,1,a[0],a[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),UC(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),r=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(n);r.setTransform(y)}else UC(t,this._bbox),r=this._createGradient(t);return r}}function yb(i,t,e,n,s,r,a,u){const h=t.coords,f=t.colors,p=i.data,y=i.width*4;let v;h[e+1]>h[n+1]&&(v=e,e=n,n=v,v=r,r=a,a=v),h[n+1]>h[s+1]&&(v=n,n=s,s=v,v=a,a=u,u=v),h[e+1]>h[n+1]&&(v=e,e=n,n=v,v=r,r=a,a=v);const E=(h[e]+t.offsetX)*t.scaleX,b=(h[e+1]+t.offsetY)*t.scaleY,_=(h[n]+t.offsetX)*t.scaleX,w=(h[n+1]+t.offsetY)*t.scaleY,x=(h[s]+t.offsetX)*t.scaleX,N=(h[s+1]+t.offsetY)*t.scaleY;if(b>=N)return;const I=f[r],L=f[r+1],U=f[r+2],k=f[a],B=f[a+1],z=f[a+2],H=f[u],j=f[u+1],et=f[u+2],at=Math.round(b),ft=Math.round(N);let lt,vt,G,$,it,bt,Et,O;for(let J=at;J<=ft;J++){if(J<w){const _t=J<b?0:(b-J)/(b-w);lt=E-(E-_)*_t,vt=I-(I-k)*_t,G=L-(L-B)*_t,$=U-(U-z)*_t}else{let _t;J>N?_t=1:w===N?_t=0:_t=(w-J)/(w-N),lt=_-(_-x)*_t,vt=k-(k-H)*_t,G=B-(B-j)*_t,$=z-(z-et)*_t}let ot;J<b?ot=0:J>N?ot=1:ot=(b-J)/(b-N),it=E-(E-x)*ot,bt=I-(I-H)*ot,Et=L-(L-j)*ot,O=U-(U-et)*ot;const ut=Math.round(Math.min(lt,it)),pt=Math.round(Math.max(lt,it));let Ct=y*J+ut*4;for(let _t=ut;_t<=pt;_t++)ot=(lt-_t)/(lt-it),ot<0?ot=0:ot>1&&(ot=1),p[Ct++]=vt-(vt-bt)*ot|0,p[Ct++]=G-(G-Et)*ot|0,p[Ct++]=$-($-O)*ot|0,p[Ct++]=255}}function W9(i,t,e){const n=t.coords,s=t.colors;let r,a;switch(t.type){case aC.LATTICE:const u=t.verticesPerRow,h=Math.floor(n.length/u)-1,f=u-1;for(r=0;r<h;r++){let p=r*u;for(let y=0;y<f;y++,p++)yb(i,e,n[p],n[p+1],n[p+u],s[p],s[p+1],s[p+u]),yb(i,e,n[p+u+1],n[p+1],n[p+u],s[p+u+1],s[p+1],s[p+u])}break;case aC.TRIANGLES:for(r=0,a=n.length;r<a;r+=3)yb(i,e,n[r],n[r+1],n[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class J9 extends Rw{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-h,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),E=f/y,b=p/v,_={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/E,scaleY:1/b},w=y+4,x=v+4,N=n.getCanvas("mesh",w,x),I=N.context,L=I.createImageData(y,v);if(e){const k=L.data;for(let B=0,z=k.length;B<z;B+=4)k[B]=e[0],k[B+1]=e[1],k[B+2]=e[2],k[B+3]=255}for(const k of this._figures)W9(L,k,_);return I.putImageData(L,2,2),{canvas:N.canvas,offsetX:u-2*E,offsetY:h-2*b,scaleX:E,scaleY:b}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,s){UC(t,this._bbox);const r=new Float32Array(2);if(s===Yn.SHADING)ht.singularValueDecompose2dScale(Ve(t),r);else if(this.matrix){ht.singularValueDecompose2dScale(this.matrix,r);const[u,h]=r;ht.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=u,r[1]*=h}else ht.singularValueDecompose2dScale(e.baseTransform,r);const a=this._createMeshCanvas(r,s===Yn.SHADING?null:this._background,e.cachedCanvases);return s!==Yn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(a.offsetX,a.offsetY),t.scale(a.scaleX,a.scaleY),t.createPattern(a.canvas,"no-repeat")}}class Q9 extends Rw{getPattern(){return"hotpink"}}function Z9(i){switch(i[0]){case"RadialAxial":return new K9(i);case"Mesh":return new J9(i);case"Dummy":return new Q9}throw new Error(`Unknown IR type: ${i[0]}`)}const fP={COLORED:1,UNCOLORED:2},zA=class zA{constructor(t,e,n,s){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(t,e){var bt,Et;const{bbox:n,operatorList:s,paintType:r,tilingType:a,color:u,canvasGraphicsFactory:h}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),dT("TilingType: "+a);const y=n[0],v=n[1],E=n[2],b=n[3],_=E-y,w=b-v,x=new Float32Array(2);ht.singularValueDecompose2dScale(this.matrix,x);const[N,I]=x;ht.singularValueDecompose2dScale(this.baseTransform,x);const L=N*x[0],U=I*x[1];let k=_,B=w,z=!1,H=!1;const j=Math.ceil(f*L),et=Math.ceil(p*U),at=Math.ceil(_*L),ft=Math.ceil(w*U);j>=at?k=f:z=!0,et>=ft?B=p:H=!0;const lt=this.getSizeAndScale(k,this.ctx.canvas.width,L),vt=this.getSizeAndScale(B,this.ctx.canvas.height,U),G=t.cachedCanvases.getCanvas("pattern",lt.size,vt.size),$=G.context,it=h.createCanvasGraphics($,e);if(it.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(it,r,u),$.translate(-lt.scale*y,-vt.scale*v),it.transform(0,lt.scale,0,0,vt.scale,0,0),$.save(),(bt=it.dependencyTracker)==null||bt.save(),this.clipBbox(it,y,v,E,b),it.baseTransform=Ve(it.ctx),it.executeOperatorList(s),it.endDrawing(),(Et=it.dependencyTracker)==null||Et.restore(),$.restore(),z||H){const O=G.canvas;z&&(k=f),H&&(B=p);const J=this.getSizeAndScale(k,this.ctx.canvas.width,L),ot=this.getSizeAndScale(B,this.ctx.canvas.height,U),ut=J.size,pt=ot.size,Ct=t.cachedCanvases.getCanvas("pattern-workaround",ut,pt),_t=Ct.context,ze=z?Math.floor(_/f):0,Ee=H?Math.floor(w/p):0;for(let yi=0;yi<=ze;yi++)for(let xt=0;xt<=Ee;xt++)_t.drawImage(O,ut*yi,pt*xt,ut,pt,0,0,ut,pt);return{canvas:Ct.canvas,scaleX:J.scale,scaleY:ot.scale,offsetX:y,offsetY:v}}return{canvas:G.canvas,scaleX:lt.scale,scaleY:vt.scale,offsetX:y,offsetY:v}}getSizeAndScale(t,e,n){const s=Math.max(zA.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*n);return r>=s?r=s:n=r/t,{scale:n,size:r}}clipBbox(t,e,n,s,r){const a=s-e,u=r-n;t.ctx.rect(e,n,a,u),ht.axialAlignedBoundingBox([e,n,s,r],Ve(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const s=t.ctx,r=t.current;switch(e){case fP.COLORED:const{fillStyle:a,strokeStyle:u}=this.ctx;s.fillStyle=r.fillColor=a,s.strokeStyle=r.strokeColor=u;break;case fP.UNCOLORED:s.fillStyle=s.strokeStyle=n,r.fillColor=r.strokeColor=n;break;default:throw new c9(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,s,r){let a=n;s!==Yn.SHADING&&(a=ht.transform(a,e.baseTransform),this.matrix&&(a=ht.transform(a,this.matrix)));const u=this.createPatternCanvas(e,r);let h=new DOMMatrix(a);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(h),f}};Z(zA,"MAX_PATTERN_SIZE",3e3);let BC=zA;function j9({src:i,srcPos:t=0,dest:e,width:n,height:s,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const u=Tn.isLittleEndian?4278190080:255,[h,f]=a?[r,u]:[u,r],p=n>>3,y=n&7,v=i.length;e=new Uint32Array(e.buffer);let E=0;for(let b=0;b<s;b++){for(const w=t+p;t<w;t++){const x=t<v?i[t]:255;e[E++]=x&128?f:h,e[E++]=x&64?f:h,e[E++]=x&32?f:h,e[E++]=x&16?f:h,e[E++]=x&8?f:h,e[E++]=x&4?f:h,e[E++]=x&2?f:h,e[E++]=x&1?f:h}if(y===0)continue;const _=t<v?i[t++]:255;for(let w=0;w<y;w++)e[E++]=_&1<<7-w?f:h}return{srcPos:t,destPos:E}}const pP=16,mP=100,tK=15,gP=10,Ui=16,vb=new DOMMatrix,ms=new Float32Array(2),Qd=new Float32Array([1/0,1/0,-1/0,-1/0]);function eK(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},i.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},i.transform=function(e,n,s,r,a,u){t.transform(e,n,s,r,a,u),this.__originalTransform(e,n,s,r,a,u)},i.setTransform=function(e,n,s,r,a,u){t.setTransform(e,n,s,r,a,u),this.__originalSetTransform(e,n,s,r,a,u)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(e){t.rotate(e),this.__originalRotate(e)},i.clip=function(e){t.clip(e),this.__originalClip(e)},i.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},i.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},i.bezierCurveTo=function(e,n,s,r,a,u){t.bezierCurveTo(e,n,s,r,a,u),this.__originalBezierCurveTo(e,n,s,r,a,u)},i.rect=function(e,n,s,r){t.rect(e,n,s,r),this.__originalRect(e,n,s,r)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class nK{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,n)):(s=this.canvasFactory.create(e,n),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function p0(i,t,e,n,s,r,a,u,h,f){const[p,y,v,E,b,_]=Ve(i);if(y===0&&v===0){const N=a*p+b,I=Math.round(N),L=u*E+_,U=Math.round(L),k=(a+h)*p+b,B=Math.abs(Math.round(k)-I)||1,z=(u+f)*E+_,H=Math.abs(Math.round(z)-U)||1;return i.setTransform(Math.sign(p),0,0,Math.sign(E),I,U),i.drawImage(t,e,n,s,r,0,0,B,H),i.setTransform(p,y,v,E,b,_),[B,H]}if(p===0&&E===0){const N=u*v+b,I=Math.round(N),L=a*y+_,U=Math.round(L),k=(u+f)*v+b,B=Math.abs(Math.round(k)-I)||1,z=(a+h)*y+_,H=Math.abs(Math.round(z)-U)||1;return i.setTransform(0,Math.sign(y),Math.sign(v),0,I,U),i.drawImage(t,e,n,s,r,0,0,H,B),i.setTransform(p,y,v,E,b,_),[H,B]}i.drawImage(t,e,n,s,r,a,u,h,f);const w=Math.hypot(p,y),x=Math.hypot(v,E);return[w*h,x*f]}class yP{constructor(t,e,n){Z(this,"alphaIsShape",!1);Z(this,"fontSize",0);Z(this,"fontSizeScale",1);Z(this,"textMatrix",null);Z(this,"textMatrixScale",1);Z(this,"fontMatrix",rC);Z(this,"leading",0);Z(this,"x",0);Z(this,"y",0);Z(this,"lineX",0);Z(this,"lineY",0);Z(this,"charSpacing",0);Z(this,"wordSpacing",0);Z(this,"textHScale",1);Z(this,"textRenderingMode",mn.FILL);Z(this,"textRise",0);Z(this,"fillColor","#000000");Z(this,"strokeColor","#000000");Z(this,"patternFill",!1);Z(this,"patternStroke",!1);Z(this,"fillAlpha",1);Z(this,"strokeAlpha",1);Z(this,"lineWidth",1);Z(this,"activeSMask",null);Z(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Qd.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Yn.FILL,e=null){const n=this.minMax.slice();if(t===Yn.STROKE){e||re("Stroke bounding box must include transform."),ht.singularValueDecompose2dScale(e,ms);const s=ms[0]*this.lineWidth/2,r=ms[1]*this.lineWidth/2;n[0]-=s,n[1]-=r,n[2]+=s,n[3]+=r}return n}updateClipFromPath(){const t=ht.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Qd,0)}getClippedPathBoundingBox(t=Yn.FILL,e=null){return ht.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function vP(i,t){if(t instanceof ImageData){i.putImageData(t,0,0);return}const e=t.height,n=t.width,s=e%Ui,r=(e-s)/Ui,a=s===0?r:r+1,u=i.createImageData(n,Ui);let h=0,f;const p=t.data,y=u.data;let v,E,b,_;if(t.kind===w0.GRAYSCALE_1BPP){const w=p.byteLength,x=new Uint32Array(y.buffer,0,y.byteLength>>2),N=x.length,I=n+7>>3,L=4294967295,U=Tn.isLittleEndian?4278190080:255;for(v=0;v<a;v++){for(b=v<r?Ui:s,f=0,E=0;E<b;E++){const k=w-h;let B=0;const z=k>I?n:k*8-7,H=z&-8;let j=0,et=0;for(;B<H;B+=8)et=p[h++],x[f++]=et&128?L:U,x[f++]=et&64?L:U,x[f++]=et&32?L:U,x[f++]=et&16?L:U,x[f++]=et&8?L:U,x[f++]=et&4?L:U,x[f++]=et&2?L:U,x[f++]=et&1?L:U;for(;B<z;B++)j===0&&(et=p[h++],j=128),x[f++]=et&j?L:U,j>>=1}for(;f<N;)x[f++]=0;i.putImageData(u,0,v*Ui)}}else if(t.kind===w0.RGBA_32BPP){for(E=0,_=n*Ui*4,v=0;v<r;v++)y.set(p.subarray(h,h+_)),h+=_,i.putImageData(u,0,E),E+=Ui;v<a&&(_=n*s*4,y.set(p.subarray(h,h+_)),i.putImageData(u,0,E))}else if(t.kind===w0.RGB_24BPP)for(b=Ui,_=n*b,v=0;v<a;v++){for(v>=r&&(b=s,_=n*b),f=0,E=_;E--;)y[f++]=p[h++],y[f++]=p[h++],y[f++]=p[h++],y[f++]=255;i.putImageData(u,0,v*Ui)}else throw new Error(`bad image kind: ${t.kind}`)}function AP(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,s=e%Ui,r=(e-s)/Ui,a=s===0?r:r+1,u=i.createImageData(n,Ui);let h=0;const f=t.data,p=u.data;for(let y=0;y<a;y++){const v=y<r?Ui:s;({srcPos:h}=j9({src:f,srcPos:h,dest:p,width:n,height:v,nonBlackColor:0})),i.putImageData(u,0,y*Ui)}}function Gp(i,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)i[n]!==void 0&&(t[n]=i[n]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function m0(i){i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0);const{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}function TP(i,t){if(t)return!0;ht.singularValueDecompose2dScale(i,ms);const e=Math.fround(sr.pixelRatio*Jl.PDF_TO_CSS_UNITS);return ms[0]<=e&&ms[1]<=e}const iK=["butt","round","square"],sK=["miter","round","bevel"],oK={},SP={};var bo,FC,OC,VC;const Bw=class Bw{constructor(t,e,n,s,r,{optionalContentConfig:a,markedContentStack:u=null},h,f,p){R(this,bo);this.ctx=t,this.current=new yP(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=a,this.cachedCanvases=new nK(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(t,e,n=null){var s;return typeof e=="string"?((s=this.dependencyTracker)==null||s.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:s=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=u,n){const h=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Ve(this.compositeCtx))}this.ctx.save(),m0(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Ve(this.ctx)}executeOperatorList(t,e,n,s,r){var x;const a=t.argsArray,u=t.fnArray;let h=e||0;const f=a.length;if(f===h)return h;const p=f-h>gP&&typeof n=="function",y=p?Date.now()+tK:0;let v=0;const E=this.commonObjs,b=this.objs;let _,w;for(;;){if(s!==void 0&&h===s.nextBreakPoint)return s.breakIt(h,n),h;if(!r||r(h))if(_=u[h],w=a[h]??null,_!==wm.dependency)w===null?this[_](h):this[_](h,...w);else for(const N of w){(x=this.dependencyTracker)==null||x.recordNamedData(N,h);const I=N.startsWith("g_")?E:b;if(!I.has(N))return I.get(N,n),h}if(h++,h===f)return h;if(p&&++v>gP){if(Date.now()>y)return n(),h;v=0}}}endDrawing(){D(this,bo,FC).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),D(this,bo,OC).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,s=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),u=n,h=s,f="prescale1",p,y;for(;r>2&&u>1||a>2&&h>1;){let v=u,E=h;r>2&&u>1&&(v=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),r/=u/v),a>2&&h>1&&(E=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,a/=h/E),p=this.cachedCanvases.getCanvas(f,v,E),y=p.context,y.clearRect(0,0,v,E),y.drawImage(t,0,0,u,h,0,0,v,E),t=p.canvas,u=v,h=E,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:h}}_createMaskCanvas(t,e){var j,et;const n=this.ctx,{width:s,height:r}=e,a=this.current.fillColor,u=this.current.patternFill,h=Ve(n);let f,p,y,v;if((e.bitmap||e.data)&&e.count>1){const at=e.bitmap||e.data.buffer;p=JSON.stringify(u?h:[h.slice(0,4),a]),f=this._cachedBitmapsMap.get(at),f||(f=new Map,this._cachedBitmapsMap.set(at,f));const ft=f.get(p);if(ft&&!u){const lt=Math.round(Math.min(h[0],h[2])+h[4]),vt=Math.round(Math.min(h[1],h[3])+h[5]);return(j=this.dependencyTracker)==null||j.recordDependencies(t,Is.transformAndFill),{canvas:ft,offsetX:lt,offsetY:vt}}y=ft}y||(v=this.cachedCanvases.getCanvas("maskCanvas",s,r),AP(v.context,e));let E=ht.transform(h,[1/s,0,0,-1/r,0,0]);E=ht.transform(E,[1,0,0,1,0,-r]);const b=Qd.slice();ht.axialAlignedBoundingBox([0,0,s,r],E,b);const[_,w,x,N]=b,I=Math.round(x-_)||1,L=Math.round(N-w)||1,U=this.cachedCanvases.getCanvas("fillCanvas",I,L),k=U.context,B=_,z=w;k.translate(-B,-z),k.transform(...E),y||(y=this._scaleImage(v.canvas,Ro(k)),y=y.img,f&&u&&f.set(p,y)),k.imageSmoothingEnabled=TP(Ve(k),e.interpolate),p0(k,y,0,0,y.width,y.height,0,0,s,r),k.globalCompositeOperation="source-in";const H=ht.transform(Ro(k),[1,0,0,1,-B,-z]);return k.fillStyle=u?a.getPattern(n,this,H,Yn.FILL,t):a,k.fillRect(0,0,s,r),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,U.canvas)),(et=this.dependencyTracker)==null||et.recordDependencies(t,Is.transformAndFill),{canvas:U.canvas,offsetX:Math.round(B),offsetY:Math.round(z)}}setLineWidth(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",t),this.ctx.lineCap=iK[e]}setLineJoin(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",t),this.ctx.lineJoin=sK[e]}setMiterLimit(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("dash",t);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){var n,s,r,a,u;for(const[h,f]of e)switch(h){case"LW":this.setLineWidth(t,f);break;case"LC":this.setLineCap(t,f);break;case"LJ":this.setLineJoin(t,f);break;case"ML":this.setMiterLimit(t,f);break;case"D":this.setDash(t,f[0],f[1]);break;case"RI":this.setRenderingIntent(t,f);break;case"FL":this.setFlatness(t,f);break;case"Font":this.setFont(t,f[0],f[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=f;break;case"ca":(s=this.dependencyTracker)==null||s.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=f;break;case"BM":(r=this.dependencyTracker)==null||r.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=f;break;case"SMask":(a=this.dependencyTracker)==null||a.recordSimpleData("SMask",t),this.current.activeSMask=f?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(u=this.dependencyTracker)==null||u.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(f);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(s,e,n);this.suspendedCtx=this.ctx;const a=this.ctx=r.context;a.setTransform(this.suspendedCtx.getTransform()),Gp(this.suspendedCtx,a),eK(a,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Gp(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,s){const r=s[0],a=s[1],u=s[2]-r,h=s[3]-a;u===0||h===0||(this.genericComposeSMask(e.context,n,u,h,e.subtype,e.backdrop,e.transferMap,r,a,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,s,r,a,u,h,f,p,y){let v=t.canvas,E=h-p,b=f-y;if(a)if(E<0||b<0||E+n>v.width||b+s>v.height){const w=this.cachedCanvases.getCanvas("maskExtension",n,s),x=w.context;x.drawImage(v,-E,-b),x.globalCompositeOperation="destination-atop",x.fillStyle=a,x.fillRect(0,0,n,s),x.globalCompositeOperation="source-over",v=w.canvas,E=b=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const w=new Path2D;w.rect(E,b,n,s),t.clip(w),t.globalCompositeOperation="destination-atop",t.fillStyle=a,t.fillRect(E,b,n,s),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const _=new Path2D;_.rect(h,f,n,s),e.clip(_),e.globalCompositeOperation="destination-in",e.drawImage(v,E,b,n,s,h,f,n,s),e.restore()}save(t){var n;this.inSMaskMode&&Gp(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),(n=this.dependencyTracker)==null||n.save(t)}restore(t){var e;if((e=this.dependencyTracker)==null||e.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Gp(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,s,r,a,u){var h;(h=this.dependencyTracker)==null||h.recordIncrementalData("transform",t),this.ctx.transform(e,n,s,r,a,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,s){let[r]=n;if(!s){r||(r=n[0]=new Path2D),this[e](t,r);return}if(this.dependencyTracker!==null){const a=e===wm.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,s[0]-a,s[2]+a,s[1]-a,s[3]+a).recordDependencies(t,["transform"])}r instanceof Path2D||(r=n[0]=f2(r)),ht.axialAlignedBoundingBox(s,Ve(this.ctx),this.current.minMax),this[e](t,r),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){var a;const s=this.ctx,r=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&(r!=null&&r.getPattern)){const u=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=r.getPattern(s,this,Ro(s),Yn.STROKE,t),u){const h=new Path2D;h.addPath(e,s.getTransform().invertSelf().multiplySelf(u)),e=h}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);(a=this.dependencyTracker)==null||a.recordDependencies(t,Is.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Yn.STROKE,Ve(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){var f,p,y;const s=this.ctx,r=this.current.fillColor,a=this.current.patternFill;let u=!1;if(a){const v=r.isModifyingCurrentTransform()?s.getTransform():null;if((f=this.dependencyTracker)==null||f.save(t),s.save(),s.fillStyle=r.getPattern(s,this,Ro(s),Yn.FILL,t),v){const E=new Path2D;E.addPath(e,s.getTransform().invertSelf().multiplySelf(v)),e=E}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),(p=this.dependencyTracker)==null||p.recordDependencies(t,Is.fill),u&&(s.restore(),(y=this.dependencyTracker)==null||y.restore(t)),n&&this.consumePath(t,e,h)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){var n;this.ctx.fill(e),(n=this.dependencyTracker)==null||n.recordDependencies(t,Is.rawFillPath).recordOperation(t)}clip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=oK}eoClip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=SP}beginText(t){var e;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(e=this.dependencyTracker)==null||e.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;e!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",t),s.recordCloseMarker(t)}if(e!==void 0){const s=new Path2D,r=n.getTransform().invertSelf();for(const{transform:a,x:u,y:h,fontSize:f,path:p}of e)p&&s.addPath(p,new DOMMatrix(a).preMultiplySelf(r).translate(u,h).scale(f,-f));n.clip(s)}delete this.pendingTextPaths}setCharSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){var y,v;(y=this.dependencyTracker)==null||y.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const s=this.commonObjs.get(e),r=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=s.fontMatrix||rC,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&It("Invalid font matrix for font "+e),n<0?(n=-n,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const a=s.loadedName||"sans-serif",u=((v=s.systemFontInfo)==null?void 0:v.css)||`"${a}", ${s.fallbackName}`;let h="normal";s.black?h="900":s.bold&&(h="bold");const f=s.italic?"italic":"normal";let p=n;n<pP?p=pP:n>mP&&(p=mP),this.current.fontSizeScale=n/p,this.ctx.font=`${f} ${h} ${p}px ${u}`}setTextRenderingMode(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){var e;this.moveText(t,0,this.current.leading),(e=this.dependencyTracker)==null||e.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}paintChar(t,e,n,s,r,a){var x,N,I,L;const u=this.ctx,h=this.current,f=h.font,p=h.textRenderingMode,y=h.fontSize/h.fontSizeScale,v=p&mn.FILL_STROKE_MASK,E=!!(p&mn.ADD_TO_PATH_FLAG),b=h.patternFill&&!f.missingFile,_=h.patternStroke&&!f.missingFile;let w;if((f.disableFontFace||E||b||_)&&!f.missingFile&&(w=f.getPathGenerator(this.commonObjs,e)),w&&(f.disableFontFace||b||_)){u.save(),u.translate(n,s),u.scale(y,-y),(x=this.dependencyTracker)==null||x.recordCharacterBBox(t,u,f);let U;if(v===mn.FILL||v===mn.FILL_STROKE)if(r){U=u.getTransform(),u.setTransform(...r);const k=D(this,bo,VC).call(this,w,U,r);u.fill(k)}else u.fill(w);if(v===mn.STROKE||v===mn.FILL_STROKE)if(a){U||(U=u.getTransform()),u.setTransform(...a);const{a:k,b:B,c:z,d:H}=U,j=ht.inverseTransform(a),et=ht.transform([k,B,z,H,0,0],j);ht.singularValueDecompose2dScale(et,ms),u.lineWidth*=Math.max(ms[0],ms[1])/y,u.stroke(D(this,bo,VC).call(this,w,U,a))}else u.lineWidth/=y,u.stroke(w);u.restore()}else(v===mn.FILL||v===mn.FILL_STROKE)&&(u.fillText(e,n,s),(N=this.dependencyTracker)==null||N.recordCharacterBBox(t,u,f,y,n,s,()=>u.measureText(e))),(v===mn.STROKE||v===mn.FILL_STROKE)&&(this.dependencyTracker&&((I=this.dependencyTracker)==null||I.recordCharacterBBox(t,u,f,y,n,s,()=>u.measureText(e)).recordDependencies(t,Is.stroke)),u.strokeText(e,n,s));E&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ve(u),x:n,y:s,fontSize:y,path:w}),(L=this.dependencyTracker)==null||L.recordCharacterBBox(t,u,f,y,n,s))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){n=!0;break}return Nt(this,"isFontSubpixelAAEnabled",n)}showText(t,e){var et,at,ft,lt;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,Is.showText).resetBBox(t),this.current.textRenderingMode&mn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,s=n.font;if(s.isType3Font){this.showType3Text(t,e),(et=this.dependencyTracker)==null||et.recordShowTextOperation(t);return}const r=n.fontSize;if(r===0){(at=this.dependencyTracker)==null||at.recordOperation(t);return}const a=this.ctx,u=n.fontSizeScale,h=n.charSpacing,f=n.wordSpacing,p=n.fontDirection,y=n.textHScale*p,v=e.length,E=s.vertical,b=E?1:-1,_=s.defaultVMetrics,w=r*n.fontMatrix[0],x=n.textRenderingMode===mn.FILL&&!s.disableFontFace&&!n.patternFill;a.save(),n.textMatrix&&a.transform(...n.textMatrix),a.translate(n.x,n.y+n.textRise),p>0?a.scale(y,-1):a.scale(y,1);let N,I;const L=n.textRenderingMode&mn.FILL_STROKE_MASK,U=L===mn.FILL||L===mn.FILL_STROKE,k=L===mn.STROKE||L===mn.FILL_STROKE;if(U&&n.patternFill){a.save();const vt=n.fillColor.getPattern(a,this,Ro(a),Yn.FILL,t);N=Ve(a),a.restore(),a.fillStyle=vt}if(k&&n.patternStroke){a.save();const vt=n.strokeColor.getPattern(a,this,Ro(a),Yn.STROKE,t);I=Ve(a),a.restore(),a.strokeStyle=vt}let B=n.lineWidth;const z=n.textMatrixScale;if(z===0||B===0?k&&(B=this.getSinglePixelWidth()):B/=z,u!==1&&(a.scale(u,u),B/=u),a.lineWidth=B,s.isInvalidPDFjsFont){const vt=[];let G=0;for(const it of e)vt.push(it.unicode),G+=it.width;const $=vt.join("");if(a.fillText($,0,0),this.dependencyTracker!==null){const it=a.measureText($);this.dependencyTracker.recordBBox(t,this.ctx,-it.actualBoundingBoxLeft,it.actualBoundingBoxRight,-it.actualBoundingBoxAscent,it.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=G*w*y,a.restore(),this.compose();return}let H=0,j;for(j=0;j<v;++j){const vt=e[j];if(typeof vt=="number"){H+=b*vt*r/1e3;continue}let G=!1;const $=(vt.isSpace?f:0)+h,it=vt.fontChar,bt=vt.accent;let Et,O,J=vt.width;if(E){const pt=vt.vmetric||_,Ct=-(vt.vmetric?pt[1]:J*.5)*w,_t=pt[2]*w;J=pt?-pt[0]:J,Et=Ct/u,O=(H+_t)/u}else Et=H/u,O=0;let ot;if(s.remeasure&&J>0){ot=a.measureText(it);const pt=ot.width*1e3/r*u;if(J<pt&&this.isFontSubpixelAAEnabled){const Ct=J/pt;G=!0,a.save(),a.scale(Ct,1),Et/=Ct}else J!==pt&&(Et+=(J-pt)/2e3*r/u)}if(this.contentVisible&&(vt.isInFont||s.missingFile)){if(x&&!bt)a.fillText(it,Et,O),(ft=this.dependencyTracker)==null||ft.recordCharacterBBox(t,a,ot?{bbox:null}:s,r/u,Et,O,()=>ot??a.measureText(it));else if(this.paintChar(t,it,Et,O,N,I),bt){const pt=Et+r*bt.offset.x/u,Ct=O-r*bt.offset.y/u;this.paintChar(t,bt.fontChar,pt,Ct,N,I)}}const ut=E?J*w-$*p:J*w+$*p;H+=ut,G&&a.restore()}E?n.y-=H:n.x+=H*y,a.restore(),this.compose(),(lt=this.dependencyTracker)==null||lt.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,s=this.current,r=s.font,a=s.fontSize,u=s.fontDirection,h=r.vertical?1:-1,f=s.charSpacing,p=s.wordSpacing,y=s.textHScale*u,v=s.fontMatrix||rC,E=e.length,b=s.textRenderingMode===mn.INVISIBLE;let _,w,x,N;if(b||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),s.textMatrix&&n.transform(...s.textMatrix),n.translate(s.x,s.y+s.textRise),n.scale(y,u);const I=this.dependencyTracker;for(this.dependencyTracker=I?new MA(I,t):null,_=0;_<E;++_){if(w=e[_],typeof w=="number"){N=h*w*a/1e3,this.ctx.translate(N,0),s.x+=N*y;continue}const L=(w.isSpace?p:0)+f,U=r.charProcOperatorList[w.operatorListId];U?this.contentVisible&&(this.save(),n.scale(a,a),n.transform(...v),this.executeOperatorList(U),this.restore()):It(`Type3 character "${w.operatorListId}" is not available.`);const k=[w.width,0];ht.applyTransform(k,v),x=k[0]*a+L,n.translate(x,0),s.x+=x*y}n.restore(),I&&(this.dependencyTracker=I)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,s,r,a,u){var f;const h=new Path2D;h.rect(s,r,a-s,u-r),this.ctx.clip(h),(f=this.dependencyTracker)==null||f.recordBBox(t,this.ctx,s,a,r,u).recordClipBox(t,this.ctx,s,a,r,u),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const s=this.baseTransform||Ve(this.ctx),r={createCanvasGraphics:(a,u)=>new Bw(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new MA(this.dependencyTracker,u,!0):null)};n=new BC(e,this.ctx,r,s)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=Z9(this.getObject(t,e)),this.cachedPatterns.set(e,s)),n&&(s.matrix=n),s}shadingFill(t,e){var a;if(!this.contentVisible)return;const n=this.ctx;this.save(t);const s=this._getPattern(t,e);n.fillStyle=s.getPattern(n,this,Ro(n),Yn.SHADING,t);const r=Ro(n);if(r){const{width:u,height:h}=n.canvas,f=Qd.slice();ht.axialAlignedBoundingBox([0,0,u,h],r,f);const[p,y,v,E]=f;this.ctx.fillRect(p,y,v-p,E-y)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(a=this.dependencyTracker)==null||a.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,Is.transform).recordDependencies(t,Is.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){re("Should not call beginInlineImage")}beginImageData(){re("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){var s;if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Ve(this.ctx),n)){ht.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[r,a,u,h]=n,f=new Path2D;f.rect(r,a,u-r,h-a),this.ctx.clip(f),(s=this.dependencyTracker)==null||s.recordClipBox(t,this.ctx,r,u,a,h),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){var I;if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||dT("TODO: Support non-isolated groups."),e.knockout&&It("Knockout groups not supported.");const s=Ve(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=Qd.slice();ht.axialAlignedBoundingBox(e.bbox,Ve(n),r);const a=[0,0,n.canvas.width,n.canvas.height];r=ht.intersect(r,a)||[0,0,0,0];const u=Math.floor(r[0]),h=Math.floor(r[1]),f=Math.max(Math.ceil(r[2])-u,1),p=Math.max(Math.ceil(r[3])-h,1);this.current.startNewPathAndClipBox([0,0,f,p]);let y="groupAt"+this.groupLevel;e.smask&&(y+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(y,f,p),E=v.context;E.translate(-u,-h),E.transform(...s);let b=new Path2D;const[_,w,x,N]=e.bbox;if(b.rect(_,w,x-_,N-w),e.matrix){const L=new Path2D;L.addPath(b,new DOMMatrix(e.matrix)),b=L}E.clip(b),e.smask&&this.smaskStack.push({canvas:v.canvas,context:E,offsetX:u,offsetY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(u,h),n.save()),Gp(n,E),this.ctx=E,(I=this.dependencyTracker)==null||I.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){var r;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,(r=this.dependencyTracker)==null||r.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=Ve(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...a);const u=Qd.slice();ht.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],a,u),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(u)}}beginAnnotation(t,e,n,s,r,a){if(D(this,bo,FC).call(this),m0(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const u=n[2]-n[0],h=n[3]-n[1];if(a&&this.annotationCanvasMap){s=s.slice(),s[4]-=n[0],s[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=u,n[3]=h,ht.singularValueDecompose2dScale(Ve(this.ctx),ms);const{viewportScale:f}=this,p=Math.ceil(u*this.outputScaleX*f),y=Math.ceil(h*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,y);const{canvas:v,context:E}=this.annotationCanvas;this.annotationCanvasMap.set(e,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=E,this.ctx.save(),this.ctx.setTransform(ms[0],0,0,-ms[1],0,h*ms[1]),m0(this.ctx)}else{m0(this.ctx),this.endPath(t);const f=new Path2D;f.rect(n[0],n[1],u,h),this.ctx.clip(f)}}this.current=new yP(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...s),this.transform(t,...r)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),D(this,bo,OC).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){var u;if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const s=this.ctx,r=this._createMaskCanvas(t,e),a=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(a,r.offsetX,r.offsetY),(u=this.dependencyTracker)==null||u.resetBBox(t).recordBBox(t,this.ctx,r.offsetX,r.offsetX+a.width,r.offsetY,r.offsetY+a.height).recordOperation(t),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,s=0,r=0,a,u){var y,v,E;if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const h=this.ctx;h.save();const f=Ve(h);h.transform(n,s,r,a,0,0);const p=this._createMaskCanvas(t,e);h.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]),(y=this.dependencyTracker)==null||y.resetBBox(t);for(let b=0,_=u.length;b<_;b+=2){const w=ht.transform(f,[n,s,r,a,u[b],u[b+1]]);h.drawImage(p.canvas,w[4],w[5]),(v=this.dependencyTracker)==null||v.recordBBox(t,this.ctx,w[4],w[4]+p.canvas.width,w[5],w[5]+p.canvas.height)}h.restore(),this.compose(),(E=this.dependencyTracker)==null||E.recordOperation(t)}paintImageMaskXObjectGroup(t,e){var a,u,h;if(!this.contentVisible)return;const n=this.ctx,s=this.current.fillColor,r=this.current.patternFill;(a=this.dependencyTracker)==null||a.resetBBox(t).recordDependencies(t,Is.transformAndFill);for(const f of e){const{data:p,width:y,height:v,transform:E}=f,b=this.cachedCanvases.getCanvas("maskCanvas",y,v),_=b.context;_.save();const w=this.getObject(t,p,f);AP(_,w),_.globalCompositeOperation="source-in",_.fillStyle=r?s.getPattern(_,this,Ro(n),Yn.FILL,t):s,_.fillRect(0,0,y,v),_.restore(),n.save(),n.transform(...E),n.scale(1,-1),p0(n,b.canvas,0,0,y,v,0,-1,1,1),(u=this.dependencyTracker)==null||u.recordBBox(t,n,0,y,0,v),n.restore()}this.compose(),(h=this.dependencyTracker)==null||h.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){It("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,s,r){if(!this.contentVisible)return;const a=this.getObject(t,e);if(!a){It("Dependent image isn't ready yet");return}const u=a.width,h=a.height,f=[];for(let p=0,y=r.length;p<y;p+=2)f.push({transform:[n,0,0,s,r[p],r[p+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(t,a,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:s}=t,r=this.cachedCanvases.getCanvas("inlineImage",n,s),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(e,0,0),a.filter="none",r.canvas}paintInlineImageXObject(t,e){var f;if(!this.contentVisible)return;const n=e.width,s=e.height,r=this.ctx;this.save(t);const{filter:a}=r;a!=="none"&&a!==""&&(r.filter="none"),r.scale(1/n,-1/s);let u;if(e.bitmap)u=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)u=e;else{const y=this.cachedCanvases.getCanvas("inlineImage",n,s).context;vP(y,e),u=this.applyTransferMapsToCanvas(y)}const h=this._scaleImage(u,Ro(r));r.imageSmoothingEnabled=TP(Ve(r),e.interpolate),(f=this.dependencyTracker)==null||f.resetBBox(t).recordBBox(t,r,0,n,-s,0).recordDependencies(t,Is.imageXObject).recordOperation(t),p0(r,h.img,0,0,h.paintWidth,h.paintHeight,0,-s,n,s),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){var a,u,h;if(!this.contentVisible)return;const s=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const f=e.width,p=e.height,v=this.cachedCanvases.getCanvas("inlineImage",f,p).context;vP(v,e),r=this.applyTransferMapsToCanvas(v)}(a=this.dependencyTracker)==null||a.resetBBox(t);for(const f of n)s.save(),s.transform(...f.transform),s.scale(1,-1),p0(s,r,f.x,f.y,f.w,f.h,0,-1,1,1),(u=this.dependencyTracker)==null||u.recordBBox(t,s,0,1,-1,0),s.restore();(h=this.dependencyTracker)==null||h.recordOperation(t),this.compose()}paintSolidColorImageMask(t){var e;this.contentVisible&&((e=this.dependencyTracker)==null||e.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,Is.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){var e;(e=this.dependencyTracker)==null||e.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){var a,u;const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const r=this.ctx;this.pendingClip?(s||(this.pendingClip===SP?r.clip(e,"evenodd"):r.clip(e)),this.pendingClip=null,(a=this.dependencyTracker)==null||a.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):(u=this.dependencyTracker)==null||u.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Ve(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:s,d:r}=this.ctx.getTransform();let a,u;if(n===0&&s===0){const h=Math.abs(e),f=Math.abs(r);if(h===f)if(t===0)a=u=1/h;else{const p=h*t;a=u=p<1?1/p:1}else if(t===0)a=1/h,u=1/f;else{const p=h*t,y=f*t;a=p<1?1/p:1,u=y<1?1/y:1}}else{const h=Math.abs(e*r-n*s),f=Math.hypot(e,n),p=Math.hypot(s,r);if(t===0)a=p/h,u=f/h;else{const y=t*h;a=p>y?p/y:1,u=f>y?f/y:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:s}}=this,[r,a]=this.getScaleForStroking();if(r===a){n.lineWidth=(s||1)*r,n.stroke(t);return}const u=n.getLineDash();e&&n.save(),n.scale(r,a),vb.a=1/r,vb.d=1/a;const h=new Path2D;if(h.addPath(t,vb),u.length>0){const f=Math.max(r,a);n.setLineDash(u.map(p=>p/f)),n.lineDashOffset/=f}n.lineWidth=s||1,n.stroke(h),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};bo=new WeakSet,FC=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},OC=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},VC=function(t,e,n){const s=new Path2D;return s.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),s};let oh=Bw;for(const i in wm)oh.prototype[i]!==void 0&&(oh.prototype[wm[i]]=oh.prototype[i]);var vg,Ag;class er{static get workerPort(){return d(this,vg)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");C(this,vg,t)}static get workerSrc(){return d(this,Ag)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");C(this,Ag,t)}}vg=new WeakMap,Ag=new WeakMap,R(er,vg,null),R(er,Ag,"");var zh,Tg;class rK{constructor({parsedData:t,rawData:e}){R(this,zh);R(this,Tg);C(this,zh,t),C(this,Tg,e)}getRaw(){return d(this,Tg)}get(t){return d(this,zh).get(t)??null}[Symbol.iterator](){return d(this,zh).entries()}}zh=new WeakMap,Tg=new WeakMap;const Vd=Symbol("INTERNAL");var Sg,Eg,bg,qh;class aK{constructor(t,{name:e,intent:n,usage:s,rbGroups:r}){R(this,Sg,!1);R(this,Eg,!1);R(this,bg,!1);R(this,qh,!0);C(this,Sg,!!(t&ps.DISPLAY)),C(this,Eg,!!(t&ps.PRINT)),this.name=e,this.intent=n,this.usage=s,this.rbGroups=r}get visible(){if(d(this,bg))return d(this,qh);if(!d(this,qh))return!1;const{print:t,view:e}=this.usage;return d(this,Sg)?(e==null?void 0:e.viewState)!=="OFF":d(this,Eg)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==Vd&&re("Internal method `_setVisible` called."),C(this,bg,n),C(this,qh,e)}}Sg=new WeakMap,Eg=new WeakMap,bg=new WeakMap,qh=new WeakMap;var bl,Te,Yh,Xh,Cg,HC;class lK{constructor(t,e=ps.DISPLAY){R(this,Cg);R(this,bl,null);R(this,Te,new Map);R(this,Yh,null);R(this,Xh,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,C(this,Xh,t.order);for(const n of t.groups)d(this,Te).set(n.id,new aK(e,n));if(t.baseState==="OFF")for(const n of d(this,Te).values())n._setVisible(Vd,!1);for(const n of t.on)d(this,Te).get(n)._setVisible(Vd,!0);for(const n of t.off)d(this,Te).get(n)._setVisible(Vd,!1);C(this,Yh,this.getHash())}}isVisible(t){if(d(this,Te).size===0)return!0;if(!t)return dT("Optional content group not defined."),!0;if(t.type==="OCG")return d(this,Te).has(t.id)?d(this,Te).get(t.id).visible:(It(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return D(this,Cg,HC).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!d(this,Te).has(e))return It(`Optional content group not found: ${e}`),!0;if(d(this,Te).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!d(this,Te).has(e))return It(`Optional content group not found: ${e}`),!0;if(!d(this,Te).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!d(this,Te).has(e))return It(`Optional content group not found: ${e}`),!0;if(!d(this,Te).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!d(this,Te).has(e))return It(`Optional content group not found: ${e}`),!0;if(d(this,Te).get(e).visible)return!1}return!0}return It(`Unknown optional content policy ${t.policy}.`),!0}return It(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var r;const s=d(this,Te).get(t);if(!s){It(`Optional content group not found: ${t}`);return}if(n&&e&&s.rbGroups.length)for(const a of s.rbGroups)for(const u of a)u!==t&&((r=d(this,Te).get(u))==null||r._setVisible(Vd,!1,!0));s._setVisible(Vd,!!e,!0),C(this,bl,null)}setOCGState({state:t,preserveRB:e}){let n;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const r=d(this,Te).get(s);if(r)switch(n){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!r.visible,e);break}}C(this,bl,null)}get hasInitialVisibility(){return d(this,Yh)===null||this.getHash()===d(this,Yh)}getOrder(){return d(this,Te).size?d(this,Xh)?d(this,Xh).slice():[...d(this,Te).keys()]:null}getGroup(t){return d(this,Te).get(t)||null}getHash(){if(d(this,bl)!==null)return d(this,bl);const t=new $2;for(const[e,n]of d(this,Te))t.update(`${e}:${n.visible}`);return C(this,bl,t.hexdigest())}[Symbol.iterator](){return d(this,Te).entries()}}bl=new WeakMap,Te=new WeakMap,Yh=new WeakMap,Xh=new WeakMap,Cg=new WeakSet,HC=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let s=1;s<e;s++){const r=t[s];let a;if(Array.isArray(r))a=D(this,Cg,HC).call(this,r);else if(d(this,Te).has(r))a=d(this,Te).get(r).visible;else return It(`Optional content group not found: ${r}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};var _g,wg;class pT{constructor(t,e,n){R(this,_g,null);R(this,wg,null);Z(this,"_fullReader",null);Z(this,"_rangeReaders",new Set);Z(this,"_source",null);this._source=t,C(this,_g,e),C(this,wg,n)}get _progressiveDataLength(){var t;return((t=this._fullReader)==null?void 0:t._loaded)??0}getFullReader(){return oe(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new(d(this,_g))(this)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new(d(this,wg))(this,t,e);return this._rangeReaders.add(n),n}cancelAllRequests(t){var e;(e=this._fullReader)==null||e.cancel(t);for(const n of new Set(this._rangeReaders))n.cancel(t)}}_g=new WeakMap,wg=new WeakMap;class mT{constructor(t){Z(this,"onProgress",null);Z(this,"_contentLength",0);Z(this,"_filename",null);Z(this,"_headersCapability",Promise.withResolvers());Z(this,"_isRangeSupported",!1);Z(this,"_isStreamingSupported",!1);Z(this,"_loaded",0);Z(this,"_stream",null);this._stream=t}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){re("Abstract method `read` called")}cancel(t){re("Abstract method `cancel` called")}}class gT{constructor(t,e,n){Z(this,"_stream",null);this._stream=t}async read(){re("Abstract method `read` called")}cancel(t){re("Abstract method `cancel` called")}}function EP(i){return i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer}var xg,GC;class uK extends pT{constructor(e){super(e,cK,dK);R(this,xg);Z(this,"_progressiveDone",!1);Z(this,"_queuedChunks",[]);const{pdfDataRangeTransport:n}=e,{initialData:s,progressiveDone:r}=n;if((s==null?void 0:s.length)>0){const a=EP(s);this._queuedChunks.push(a)}this._progressiveDone=r,n.addRangeListener((a,u)=>{D(this,xg,GC).call(this,a,u)}),n.addProgressListener((a,u)=>{var h,f;u!==void 0&&((f=(h=this._fullReader)==null?void 0:h.onProgress)==null||f.call(h,{loaded:a,total:u}))}),n.addProgressiveReadListener(a=>{D(this,xg,GC).call(this,void 0,a)}),n.addProgressiveDoneListener(()=>{var a;(a=this._fullReader)==null||a.progressiveDone(),this._progressiveDone=!0}),n.transportReady()}getFullReader(){const e=super.getFullReader();return this._queuedChunks=null,e}getRangeReader(e,n){const s=super.getRangeReader(e,n);return s&&(s.onDone=()=>this._rangeReaders.delete(s),this._source.pdfDataRangeTransport.requestDataRange(e,n)),s}cancelAllRequests(e){super.cancelAllRequests(e),this._source.pdfDataRangeTransport.abort()}}xg=new WeakSet,GC=function(e,n){const s=EP(n);if(e===void 0)this._fullReader?this._fullReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.keys().find(a=>a._begin===e);oe(r,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),r._enqueue(s)}};class cK extends mT{constructor(e){super(e);Z(this,"_done",!1);Z(this,"_queuedChunks",null);Z(this,"_requests",[]);const{pdfDataRangeTransport:n,disableRange:s,disableStream:r}=e._source,{length:a,contentDispositionFilename:u}=n;this._queuedChunks=e._queuedChunks||[];for(const h of this._queuedChunks)this._loaded+=h.byteLength;this._done=e._progressiveDone,this._contentLength=a,this._isStreamingSupported=!r,this._isRangeSupported=!s,ww(u)&&(this._filename=u),this._headersCapability.resolve()}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class dK extends gT{constructor(e,n,s){super(e,n,s);Z(this,"onDone",null);Z(this,"_begin",-1);Z(this,"_done",!1);Z(this,"_queuedChunk",null);Z(this,"_requests",[]);this._begin=n}_enqueue(e){var n;if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,(n=this.onDone)==null||n.call(this)}}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){var n;this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,(n=this.onDone)==null||n.call(this)}}function hK(i){let t=!0,e=n("filename\\*","i").exec(i);if(e){e=e[1];let p=u(e);return p=unescape(p),p=h(p),p=f(p),r(p)}if(e=a(i),e){const p=f(e);return r(p)}if(e=n("filename","i").exec(i),e){e=e[1];let p=u(e);return p=f(p),r(p)}function n(p,y){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function s(p,y){if(p){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const v=new TextDecoder(p,{fatal:!0}),E=hT(y);y=v.decode(E),t=!1}catch{}}return y}function r(p){return t&&/[\x80-\xff]/.test(p)&&(p=s("utf-8",p),t&&(p=s("iso-8859-1",p))),p}function a(p){const y=[];let v;const E=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=E.exec(p))!==null;){let[,_,w,x]=v;if(_=parseInt(_,10),_ in y){if(_===0)break;continue}y[_]=[w,x]}const b=[];for(let _=0;_<y.length&&_ in y;++_){let[w,x]=y[_];x=u(x),w&&(x=unescape(x),_===0&&(x=h(x))),b.push(x)}return b.join("")}function u(p){if(p.startsWith('"')){const y=p.slice(1).split('\\"');for(let v=0;v<y.length;++v){const E=y[v].indexOf('"');E!==-1&&(y[v]=y[v].slice(0,E),y.length=v+1),y[v]=y[v].replaceAll(/\\(.)/g,"$1")}p=y.join('"')}return p}function h(p){const y=p.indexOf("'");if(y===-1)return p;const v=p.slice(0,y),b=p.slice(y+1).replace(/^[^']*'/,"");return s(v,b)}function f(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,v,E,b){if(E==="q"||E==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(_,w){return String.fromCharCode(parseInt(w,16))}),s(v,b);try{b=atob(b)}catch{}return s(v,b)})}return""}function oU(i,t){const e=new Headers;if(!i||!t||typeof t!="object")return e;for(const n in t){const s=t[n];s!==void 0&&e.append(n,s)}return e}function yT(i){var t;return((t=URL.parse(i))==null?void 0:t.origin)??null}function rU({responseHeaders:i,isHttp:t,rangeChunkSize:e,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(i.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*e)||n||!t||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function aU(i){const t=i.get("Content-Disposition");if(t){let e=hK(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(ww(e))return e}return null}function vT(i,t){return new EA(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i,i===404||i===0&&t.startsWith("file:"))}function lU(i,t){if(i!==t)throw new Error(`Expected range response-origin "${i}" to match "${t}".`)}function uU(i,t,e,n){return fetch(i,{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"})}function cU(i,t){if(i!==200&&i!==206)throw vT(i,t)}function dU(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(It(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class fK extends pT{constructor(e){super(e,pK,mK);Z(this,"_responseOrigin",null);this.isHttp=/^https?:/i.test(e.url),this.headers=oU(this.isHttp,e.httpHeaders)}}class pK extends mT{constructor(e){super(e);Z(this,"_abortController",new AbortController);Z(this,"_reader",null);const{disableRange:n,disableStream:s,length:r,rangeChunkSize:a,url:u,withCredentials:h}=e._source;this._contentLength=r,this._isStreamingSupported=!s,this._isRangeSupported=!n;const f=new Headers(e.headers);uU(u,f,h,this._abortController).then(p=>{e._responseOrigin=yT(p.url),cU(p.status,u),this._reader=p.body.getReader();const y=p.headers,{allowRangeRequests:v,suggestedLength:E}=rU({responseHeaders:y,isHttp:e.isHttp,rangeChunkSize:a,disableRange:n});this._isRangeSupported=v,this._contentLength=E||this._contentLength,this._filename=aU(y),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Wl("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){var s;await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:dU(e),done:!1})}cancel(e){var n;(n=this._reader)==null||n.cancel(e),this._abortController.abort()}}class mK extends gT{constructor(e,n,s){super(e,n,s);Z(this,"_abortController",new AbortController);Z(this,"_readCapability",Promise.withResolvers());Z(this,"_reader",null);const{url:r,withCredentials:a}=e._source,u=new Headers(e.headers);u.append("Range",`bytes=${n}-${s-1}`),uU(r,u,a,this._abortController).then(h=>{const f=yT(h.url);lU(f,e._responseOrigin),cU(h.status,r),this._reader=h.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:{value:dU(e),done:!1}}cancel(e){var n;(n=this._reader)==null||n.cancel(e),this._abortController.abort()}}const Ab=200,bP=206;function gK(i){return typeof i!="string"?i:hT(i).buffer}var Yo,kf,hU,fU;class yK extends pT{constructor(e){super(e,vK,AK);R(this,kf);R(this,Yo,new WeakMap);Z(this,"_responseOrigin",null);this.url=e.url,this.isHttp=/^https?:/i.test(this.url),this.headers=oU(this.isHttp,e.httpHeaders)}_request(e){const n=new XMLHttpRequest,s={validateStatus:null,onHeadersReceived:e.onHeadersReceived,onDone:e.onDone,onError:e.onError,onProgress:e.onProgress};d(this,Yo).set(n,s),n.open("GET",this.url),n.withCredentials=this._source.withCredentials;for(const[r,a]of this.headers)n.setRequestHeader(r,a);return this.isHttp&&"begin"in e&&"end"in e?(n.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.validateStatus=r=>r===bP||r===Ab):s.validateStatus=r=>r===Ab,n.responseType="arraybuffer",oe(e.onError,"Expected `onError` callback to be provided."),n.onerror=()=>e.onError(n.status),n.onreadystatechange=D(this,kf,fU).bind(this,n),n.onprogress=D(this,kf,hU).bind(this,n),n.send(null),n}_abortRequest(e){d(this,Yo).has(e)&&(d(this,Yo).delete(e),e.abort())}getRangeReader(e,n){const s=super.getRangeReader(e,n);return s&&(s.onClosed=()=>this._rangeReaders.delete(s)),s}}Yo=new WeakMap,kf=new WeakSet,hU=function(e,n){var r;const s=d(this,Yo).get(e);(r=s==null?void 0:s.onProgress)==null||r.call(s,n)},fU=function(e,n){const s=d(this,Yo).get(e);if(!s||(e.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),e.readyState!==4)||!d(this,Yo).has(e))return;if(d(this,Yo).delete(e),e.status===0&&this.isHttp){s.onError(e.status);return}const r=e.status||Ab;if(!s.validateStatus(r)){s.onError(e.status);return}const a=gK(e.response);if(r===bP){const u=e.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(u)?s.onDone(a):(It('Missing or invalid "Content-Range" header.'),s.onError(0))}else a?s.onDone(a):s.onError(e.status)};var or,pU,mU,gU,yU;class vK extends mT{constructor(e){super(e);R(this,or);Z(this,"_cachedChunks",[]);Z(this,"_done",!1);Z(this,"_requests",[]);Z(this,"_storedError",null);const{length:n}=e._source;this._contentLength=n,this._fullRequestXhr=e._request({onHeadersReceived:D(this,or,pU).bind(this),onDone:D(this,or,mU).bind(this),onError:D(this,or,gU).bind(this),onProgress:D(this,or,yU).bind(this)})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}or=new WeakSet,pU=function(){const e=this._stream,{disableRange:n,rangeChunkSize:s}=e._source,r=this._fullRequestXhr;e._responseOrigin=yT(r.responseURL);const a=r.getAllResponseHeaders(),u=new Headers(a?a.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(p=>{const[y,...v]=p.split(": ");return[y,v.join(": ")]}):[]),{allowRangeRequests:h,suggestedLength:f}=rU({responseHeaders:u,isHttp:e.isHttp,rangeChunkSize:s,disableRange:n});h&&(this._isRangeSupported=!0),this._contentLength=f||this._contentLength,this._filename=aU(u),this._isRangeSupported&&e._abortRequest(r),this._headersCapability.resolve()},mU=function(e){if(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._cachedChunks.push(e),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}},gU=function(e){this._storedError=vT(e,this._stream.url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0},yU=function(e){var n;(n=this.onProgress)==null||n.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})};var Aa,vU,AU,zC;class AK extends gT{constructor(e,n,s){super(e,n,s);R(this,Aa);Z(this,"onClosed",null);Z(this,"_done",!1);Z(this,"_queuedChunk",null);Z(this,"_requests",[]);Z(this,"_storedError",null);this._requestXhr=e._request({begin:n,end:s,onHeadersReceived:D(this,Aa,vU).bind(this),onDone:D(this,Aa,AU).bind(this),onError:D(this,Aa,zC).bind(this),onProgress:null})}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){var n;this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),(n=this.onClosed)==null||n.call(this)}}Aa=new WeakSet,vU=function(){var n;const e=yT((n=this._requestXhr)==null?void 0:n.responseURL);try{lU(e,this._stream._responseOrigin)}catch(s){this._storedError=s,D(this,Aa,zC).call(this,0)}},AU=function(e){var n;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,(n=this.onClosed)==null||n.call(this)},zC=function(e){this._storedError??(this._storedError=vT(e,this._stream.url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null};const TK=/^[a-z][a-z0-9\-+.]+:/i;function SK(i){if(TK.test(i))return new URL(i);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(i))}function TU(i){const{Readable:t}=process.getBuiltinModule("stream");return typeof t.toWeb=="function"?t.toWeb(i):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(i)}function SU(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(It(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class EK extends pT{constructor(t){super(t,bK,CK),this.url=SK(t.url),oe(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class bK extends mT{constructor(e){super(e);Z(this,"_reader",null);const{disableRange:n,disableStream:s,length:r,rangeChunkSize:a}=e._source;this._contentLength=r,this._isStreamingSupported=!s,this._isRangeSupported=!n;const u=e.url,h=process.getBuiltinModule("fs");h.promises.lstat(u).then(f=>{const p=h.createReadStream(u),y=TU(p);this._reader=y.getReader();const{size:v}=f;v<=2*a&&(this._isRangeSupported=!1),this._contentLength=v,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Wl("Streaming is disabled.")),this._headersCapability.resolve()}).catch(f=>{f.code==="ENOENT"&&(f=vT(0,u.href)),this._headersCapability.reject(f)})}async read(){var s;await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:SU(e),done:!1})}cancel(e){var n;(n=this._reader)==null||n.cancel(e)}}class CK extends gT{constructor(e,n,s){super(e,n,s);Z(this,"_readCapability",Promise.withResolvers());Z(this,"_reader",null);const r=e.url,a=process.getBuiltinModule("fs");try{const u=a.createReadStream(r,{start:n,end:s-1}),h=TU(u);this._reader=h.getReader(),this._readCapability.resolve()}catch(u){this._readCapability.reject(u)}}async read(){await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:{value:SU(e),done:!1}}cancel(e){var n;(n=this._reader)==null||n.cancel(e)}}const zp=Symbol("INITIAL_DATA");var ji,Mg,qC;class EU{constructor(){R(this,Mg);R(this,ji,Object.create(null))}get(t,e=null){if(e){const s=D(this,Mg,qC).call(this,t);return s.promise.then(()=>e(s.data)),null}const n=d(this,ji)[t];if(!n||n.data===zp)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=d(this,ji)[t];return!!e&&e.data!==zp}delete(t){const e=d(this,ji)[t];return!e||e.data===zp?!1:(delete d(this,ji)[t],!0)}resolve(t,e=null){const n=D(this,Mg,qC).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in d(this,ji)){const{data:n}=d(this,ji)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}C(this,ji,Object.create(null))}*[Symbol.iterator](){for(const t in d(this,ji)){const{data:e}=d(this,ji)[t];e!==zp&&(yield[t,e])}}}ji=new WeakMap,Mg=new WeakSet,qC=function(t){var e;return(e=d(this,ji))[t]||(e[t]={...Promise.withResolvers(),data:zp})};const _K=1e5,CP=30;var xP,Cl,Ni,Rg,Dg,sc,Kr,Ig,Ng,oc,Pg,$h,_l,Kh,Lg,Wh,rc,kg,Ug,Jh,ac,Bg,Qh,Zh,Ta,bU,CU,YC,As,B0,XC,_U,wU;const Bn=class Bn{constructor({textContentSource:t,container:e,viewport:n}){R(this,Ta);R(this,Cl,Promise.withResolvers());R(this,Ni,null);R(this,Rg,!1);R(this,Dg,!!((xP=globalThis.FontInspector)!=null&&xP.enabled));R(this,sc,null);R(this,Kr,null);R(this,Ig,0);R(this,Ng,0);R(this,oc,null);R(this,Pg,null);R(this,$h,0);R(this,_l,0);R(this,Kh,Object.create(null));R(this,Lg,[]);R(this,Wh,null);R(this,rc,[]);R(this,kg,new WeakMap);R(this,Ug,null);var h;if(t instanceof ReadableStream)C(this,Wh,t);else if(typeof t=="object")C(this,Wh,new ReadableStream({start(f){f.enqueue(t),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');C(this,Ni,C(this,Pg,e)),C(this,_l,n.scale*sr.pixelRatio),C(this,$h,n.rotation),C(this,Kr,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:a,pageY:u}=n.rawDims;C(this,Ug,[1,0,0,-1,-a,u+r]),C(this,Ng,s),C(this,Ig,r),D(h=Bn,As,_U).call(h),e.style.setProperty("--min-font-size",d(Bn,Qh)),Gc(e,n),d(this,Cl).promise.finally(()=>{d(Bn,Zh).delete(this),C(this,Kr,null),C(this,Kh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Tn.platform;return Nt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{d(this,oc).read().then(({value:e,done:n})=>{if(n){d(this,Cl).resolve();return}d(this,sc)??C(this,sc,e.lang),Object.assign(d(this,Kh),e.styles),D(this,Ta,bU).call(this,e.items),t()},d(this,Cl).reject)};return C(this,oc,d(this,Wh).getReader()),d(Bn,Zh).add(this),t(),d(this,Cl).promise}update({viewport:t,onBefore:e=null}){var r;const n=t.scale*sr.pixelRatio,s=t.rotation;if(s!==d(this,$h)&&(e==null||e(),C(this,$h,s),Gc(d(this,Pg),{rotation:s})),n!==d(this,_l)){e==null||e(),C(this,_l,n);const a={div:null,properties:null,ctx:D(r=Bn,As,B0).call(r,d(this,sc))};for(const u of d(this,rc))a.properties=d(this,kg).get(u),a.div=u,D(this,Ta,YC).call(this,a)}}cancel(){var e;const t=new Wl("TextLayer task cancelled.");(e=d(this,oc))==null||e.cancel(t).catch(()=>{}),C(this,oc,null),d(this,Cl).reject(t)}get textDivs(){return d(this,rc)}get textContentItemsStr(){return d(this,Lg)}static cleanup(){if(!(d(this,Zh).size>0)){d(this,Jh).clear();for(const{canvas:t}of d(this,ac).values())t.remove();d(this,ac).clear()}}};Cl=new WeakMap,Ni=new WeakMap,Rg=new WeakMap,Dg=new WeakMap,sc=new WeakMap,Kr=new WeakMap,Ig=new WeakMap,Ng=new WeakMap,oc=new WeakMap,Pg=new WeakMap,$h=new WeakMap,_l=new WeakMap,Kh=new WeakMap,Lg=new WeakMap,Wh=new WeakMap,rc=new WeakMap,kg=new WeakMap,Ug=new WeakMap,Jh=new WeakMap,ac=new WeakMap,Bg=new WeakMap,Qh=new WeakMap,Zh=new WeakMap,Ta=new WeakSet,bU=function(t){var s,r;if(d(this,Rg))return;(r=d(this,Kr)).ctx??(r.ctx=D(s=Bn,As,B0).call(s,d(this,sc)));const e=d(this,rc),n=d(this,Lg);for(const a of t){if(e.length>_K){It("Ignoring additional textDivs for performance reasons."),C(this,Rg,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const u=d(this,Ni);C(this,Ni,document.createElement("span")),d(this,Ni).classList.add("markedContent"),a.id&&d(this,Ni).setAttribute("id",`${a.id}`),a.tag==="Artifact"&&(d(this,Ni).ariaHidden=!0),u.append(d(this,Ni))}else a.type==="endMarkedContent"&&C(this,Ni,d(this,Ni).parentNode);continue}n.push(a.str),D(this,Ta,CU).call(this,a)}},CU=function(t){var b;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};d(this,rc).push(e);const s=ht.transform(d(this,Ug),t.transform);let r=Math.atan2(s[1],s[0]);const a=d(this,Kh)[t.fontName];a.vertical&&(r+=Math.PI/2);let u=d(this,Dg)&&a.fontSubstitution||a.fontFamily;u=Bn.fontFamilyMap.get(u)||u;const h=Math.hypot(s[2],s[3]),f=h*D(b=Bn,As,wU).call(b,u,a,d(this,sc));let p,y;r===0?(p=s[4],y=s[5]-f):(p=s[4]+f*Math.sin(r),y=s[5]-f*Math.cos(r));const v=e.style;v.left=`${(100*p/d(this,Ng)).toFixed(2)}%`,v.top=`${(100*y/d(this,Ig)).toFixed(2)}%`,v.setProperty("--font-height",`${h.toFixed(2)}px`),v.fontFamily=u,n.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,d(this,Dg)&&(e.dataset.fontName=a.fontSubstitutionLoadedName||t.fontName),r!==0&&(n.angle=r*(180/Math.PI));let E=!1;if(t.str.length>1)E=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const _=Math.abs(t.transform[0]),w=Math.abs(t.transform[3]);_!==w&&Math.max(_,w)/Math.min(_,w)>1.5&&(E=!0)}if(E&&(n.canvasWidth=a.vertical?t.height:t.width),d(this,kg).set(e,n),d(this,Kr).div=e,d(this,Kr).properties=n,D(this,Ta,YC).call(this,d(this,Kr)),n.hasText&&d(this,Ni).append(e),n.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),d(this,Ni).append(_)}},YC=function(t){var a;const{div:e,properties:n,ctx:s}=t,{style:r}=e;if(n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=r,{canvasWidth:h,fontSize:f}=n;D(a=Bn,As,XC).call(a,s,f*d(this,_l),u);const{width:p}=s.measureText(e.textContent);p>0&&r.setProperty("--scale-x",h*d(this,_l)/p)}n.angle!==0&&r.setProperty("--rotate",`${n.angle}deg`)},As=new WeakSet,B0=function(t=null){let e=d(this,ac).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),d(this,ac).set(t,e),d(this,Bg).set(e,{size:0,family:""})}return e},XC=function(t,e,n){const s=d(this,Bg).get(t);e===s.size&&n===s.family||(t.font=`${e}px ${n}`,s.size=e,s.family=n)},_U=function(){if(d(this,Qh)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),C(this,Qh,t.getBoundingClientRect().height),t.remove()},wU=function(t,e,n){const s=d(this,Jh).get(t);if(s)return s;const r=D(this,As,B0).call(this,n);r.canvas.width=r.canvas.height=CP,D(this,As,XC).call(this,r,CP,t);const a=r.measureText(""),u=a.fontBoundingBoxAscent,h=Math.abs(a.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let f=.8;return u?f=u/(u+h):(Tn.platform.isFirefox&&It("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),d(this,Jh).set(t,f),f},R(Bn,As),R(Bn,Jh,new Map),R(Bn,ac,new Map),R(Bn,Bg,new WeakMap),R(Bn,Qh,null),R(Bn,Zh,new Set);let Rm=Bn;const wK=100;function xU(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const t=new $C,{docId:e}=t,n=i.url?L9(i.url):null,s=i.data?k9(i.data):null,r=i.httpHeaders||null,a=i.withCredentials===!0,u=i.password??null,h=i.range instanceof MU?i.range:null,f=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:2**16;let p=i.worker instanceof Dm?i.worker:null;const y=i.verbosity,v=typeof i.docBaseUrl=="string"&&!fT(i.docBaseUrl)?i.docBaseUrl:null,E=c0(i.cMapUrl),b=i.cMapPacked!==!1,_=i.CMapReaderFactory||(ci?z9:lP),w=c0(i.iccUrl),x=c0(i.standardFontDataUrl),N=i.StandardFontDataFactory||(ci?q9:uP),I=c0(i.wasmUrl),L=i.WasmFactory||(ci?Y9:cP),U=i.stopAtErrors!==!0,k=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,B=i.isEvalSupported!==!1,z=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!ci,H=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!ci&&(Tn.platform.isFirefox||!globalThis.chrome),j=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,et=typeof i.disableFontFace=="boolean"?i.disableFontFace:ci,at=i.fontExtraProperties===!0,ft=i.enableXfa===!0,lt=i.ownerDocument||globalThis.document,vt=i.disableRange===!0,G=i.disableStream===!0,$=i.disableAutoFetch===!0,it=i.pdfBug===!0,bt=i.CanvasFactory||(ci?G9:O9),Et=i.FilterFactory||(ci?H9:V9),O=i.enableHWA===!0,J=i.useWasm!==!1,ot=h?h.length:i.length??NaN,ut=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!ci&&!et,pt=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:!!(_===lP&&N===uP&&L===cP&&E&&x&&I&&Kp(E,document.baseURI)&&Kp(x,document.baseURI)&&Kp(I,document.baseURI)),Ct=null;a9(y);const _t={canvasFactory:new bt({ownerDocument:lt,enableHWA:O}),filterFactory:new Et({docId:e,ownerDocument:lt}),cMapReaderFactory:pt?null:new _({baseUrl:E,isCompressed:b}),standardFontDataFactory:pt?null:new N({baseUrl:x}),wasmFactory:pt?null:new L({baseUrl:I})};p||(p=Dm.create({verbosity:y,port:er.workerPort}),t._worker=p);const ze={docId:e,apiVersion:"5.4.624",data:s,password:u,disableAutoFetch:$,rangeChunkSize:f,length:ot,docBaseUrl:v,enableXfa:ft,evaluatorOptions:{maxImageSize:k,disableFontFace:et,ignoreErrors:U,isEvalSupported:B,isOffscreenCanvasSupported:z,isImageDecoderSupported:H,canvasMaxAreaInBytes:j,fontExtraProperties:at,useSystemFonts:ut,useWasm:J,useWorkerFetch:pt,cMapUrl:E,iccUrl:w,standardFontDataUrl:x,wasmUrl:I}},Ee={ownerDocument:lt,pdfBug:it,styleElement:Ct,enableHWA:O,loadingParams:{disableAutoFetch:$,enableXfa:ft}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const yi=p.messageHandler.sendWithPromise("GetDocRequest",ze,s?[s.buffer]:null);let xt;if(h)xt=new uK({pdfDataRangeTransport:h,disableRange:vt,disableStream:G});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Lt=Kp(n)?fK:ci?EK:yK;xt=new Lt({url:n,length:ot,httpHeaders:r,withCredentials:a,rangeChunkSize:f,disableRange:vt,disableStream:G})}return yi.then(Lt=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Kt=new nm(e,Lt,p.port),we=new RK(Kt,t,xt,Ee,_t);t._transport=we,Kt.send("Ready",null)})}).catch(t._capability.reject),t}var qA;const YA=class YA{constructor(){Z(this,"_capability",Promise.withResolvers());Z(this,"_transport",null);Z(this,"_worker",null);Z(this,"docId",`d${pn(YA,qA)._++}`);Z(this,"destroyed",!1);Z(this,"onPassword",null);Z(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,n,s;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(r){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,r}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};qA=new WeakMap,R(YA,qA,0);let $C=YA;var lc,Fg,Og,Vg,Hg;class MU{constructor(t,e,n=!1,s=null){R(this,lc,Promise.withResolvers());R(this,Fg,[]);R(this,Og,[]);R(this,Vg,[]);R(this,Hg,[]);this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=s}addRangeListener(t){d(this,Hg).push(t)}addProgressListener(t){d(this,Vg).push(t)}addProgressiveReadListener(t){d(this,Og).push(t)}addProgressiveDoneListener(t){d(this,Fg).push(t)}onDataRange(t,e){for(const n of d(this,Hg))n(t,e)}onDataProgress(t,e){d(this,lc).promise.then(()=>{for(const n of d(this,Vg))n(t,e)})}onDataProgressiveRead(t){d(this,lc).promise.then(()=>{for(const e of d(this,Og))e(t)})}onDataProgressiveDone(){d(this,lc).promise.then(()=>{for(const t of d(this,Fg))t()})}transportReady(){d(this,lc).resolve()}requestDataRange(t,e){re("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}lc=new WeakMap,Fg=new WeakMap,Og=new WeakMap,Vg=new WeakMap,Hg=new WeakMap;class xK{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Nt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Wr,Gg,uc,am;class MK{constructor(t,e,n,s=!1){R(this,uc);R(this,Wr,!1);R(this,Gg,Mm.instance);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=s?new eP:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new EU,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(t){this._pageIndex=t-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:r=!1}={}){return new Iy({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Nt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:s="display",annotationMode:r=Za.ENABLE,transform:a=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:y=null,isEditing:v=!1,recordOperations:E=!1,operationsFilter:b=null}){var H,j,et;(H=this._stats)==null||H.time("Overall");const _=this._transport.getRenderingIntent(s,r,y,v),{renderingIntent:w,cacheKey:x}=_;C(this,Wr,!1),h||(h=this._transport.getOptionalContentConfig(w));let N=this._intentStates.get(x);N||(N=Object.create(null),this._intentStates.set(x,N)),N.streamReaderCancelTimeout&&(clearTimeout(N.streamReaderCancelTimeout),N.streamReaderCancelTimeout=null);const I=!!(w&ps.PRINT);N.displayReadyCapability||(N.displayReadyCapability=Promise.withResolvers(),N.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(j=this._stats)==null||j.time("Page Request"),this._pumpOperatorList(_));const L=!!(this._pdfBug&&((et=globalThis.StepperManager)!=null&&et.enabled)),U=!this.recordedBBoxes&&(E||L),k=at=>{var ft,lt;if(N.renderTasks.delete(B),U){const vt=(ft=B.gfx)==null?void 0:ft.dependencyTracker.take();vt&&(B.stepper&&B.stepper.setOperatorBBoxes(vt,B.gfx.dependencyTracker.takeDebugMetadata()),E&&(this.recordedBBoxes=vt))}I&&C(this,Wr,!0),D(this,uc,am).call(this),at?(B.capability.reject(at),this._abortOperatorList({intentState:N,reason:at instanceof Error?at:new Error(at)})):B.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(lt=globalThis.Stats)!=null&&lt.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},B=new KC({callback:k,params:{canvas:e,canvasContext:t,dependencyTracker:U?new $9(e,N.operatorList.length,L):null,viewport:n,transform:a,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:N.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!I,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:b});(N.renderTasks||(N.renderTasks=new Set)).add(B);const z=B.task;return Promise.all([N.displayReadyCapability.promise,h]).then(([at,ft])=>{var lt;if(this.destroyed){k();return}if((lt=this._stats)==null||lt.time("Rendering"),!(ft.renderingIntent&w))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");B.initializeGraphics({transparency:at,optionalContentConfig:ft}),B.operatorListChanged()}).catch(k),z}getOperatorList({intent:t="display",annotationMode:e=Za.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){var f;function r(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const a=this._transport.getRenderingIntent(t,e,n,s,!0);let u=this._intentStates.get(a.cacheKey);u||(u=Object.create(null),this._intentStates.set(a.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=r,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||(u.renderTasks=new Set)).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(a)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:d(this,Gg).getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>xm.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,s){function r(){a.read().then(function({value:h,done:f}){if(f){n(u);return}u.lang??(u.lang=h.lang),Object.assign(u.styles,h.styles),u.items.push(...h.items),r()},s)}const a=e.getReader(),u={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),C(this,Wr,!1),Promise.all(t)}cleanup(t=!1){C(this,Wr,!0);const e=D(this,uc,am).call(this);return t&&e&&this._stats&&(this._stats=new eP),e}_startRenderPage(t,e){var s,r;const n=this._intentStates.get(e);n&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=n.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let n=0,s=t.length;n<s;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&D(this,uc,am).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:s}){const{map:r,transfer:a}=n,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:d(this,Gg).getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:s},a).getReader(),f=this._intentStates.get(e);f.streamReader=h;const p=()=>{h.read().then(({value:y,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,f),p())},y=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();D(this,uc,am).call(this)}if(f.displayReadyCapability)f.displayReadyCapability.reject(y);else if(f.opListReadCapability)f.opListReadCapability.reject(y);else throw y}})};p()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof _w){let s=wK;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new Wl(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Wr=new WeakMap,Gg=new WeakMap,uc=new WeakSet,am=function(){if(!d(this,Wr)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),C(this,Wr,!1),!0};var wl,co,Jr,cc,XA,dc,hc,pi,F0,RU,DU,lm,jh,O0;const ke=class ke{constructor({name:t=null,port:e=null,verbosity:n=l9()}={}){R(this,pi);R(this,wl,Promise.withResolvers());R(this,co,null);R(this,Jr,null);R(this,cc,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(d(ke,hc).has(e))throw new Error("Cannot use more than one PDFWorker per port.");d(ke,hc).set(e,this),D(this,pi,RU).call(this,e)}else D(this,pi,DU).call(this)}get promise(){return d(this,wl).promise}get port(){return d(this,Jr)}get messageHandler(){return d(this,co)}destroy(){var t,e;this.destroyed=!0,(t=d(this,cc))==null||t.terminate(),C(this,cc,null),d(ke,hc).delete(d(this,Jr)),C(this,Jr,null),(e=d(this,co))==null||e.destroy(),C(this,co,null)}static create(t){const e=d(this,hc).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new ke(t)}static get workerSrc(){if(er.workerSrc)return er.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Nt(this,"_setupFakeWorkerGlobal",(async()=>d(this,jh,O0)?d(this,jh,O0):(await import(this.workerSrc)).WorkerMessageHandler)())}};wl=new WeakMap,co=new WeakMap,Jr=new WeakMap,cc=new WeakMap,XA=new WeakMap,dc=new WeakMap,hc=new WeakMap,pi=new WeakSet,F0=function(){d(this,wl).resolve(),d(this,co).send("configure",{verbosity:this.verbosity})},RU=function(t){C(this,Jr,t),C(this,co,new nm("main","worker",t)),d(this,co).on("ready",()=>{}),D(this,pi,F0).call(this)},DU=function(){if(d(ke,dc)||d(ke,jh,O0)){D(this,pi,lm).call(this);return}let{workerSrc:t}=ke;try{ke._isSameOrigin(window.location,t)||(t=ke._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new nm("main","worker",e),s=()=>{r.abort(),n.destroy(),e.terminate(),this.destroyed?d(this,wl).reject(new Error("Worker was destroyed")):D(this,pi,lm).call(this)},r=new AbortController;e.addEventListener("error",()=>{d(this,cc)||s()},{signal:r.signal}),n.on("test",u=>{if(r.abort(),this.destroyed||!u){s();return}C(this,co,n),C(this,Jr,e),C(this,cc,e),D(this,pi,F0).call(this)}),n.on("ready",u=>{if(r.abort(),this.destroyed){s();return}try{a()}catch{D(this,pi,lm).call(this)}});const a=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};a();return}catch{dT("The worker has been disabled.")}D(this,pi,lm).call(this)},lm=function(){d(ke,dc)||(It("Setting up fake worker."),C(ke,dc,!0)),ke._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){d(this,wl).reject(new Error("Worker was destroyed"));return}const e=new F9;C(this,Jr,e);const n=`fake${pn(ke,XA)._++}`,s=new nm(n+"_worker",n,e);t.setup(s,e),C(this,co,new nm(n,n+"_worker",e)),D(this,pi,F0).call(this)}).catch(t=>{d(this,wl).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},jh=new WeakSet,O0=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},R(ke,jh),R(ke,XA,0),R(ke,dc,!1),R(ke,hc,new WeakMap),ci&&(C(ke,dc,!0),er.workerSrc||(er.workerSrc="./pdf.worker.mjs")),ke._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const s=new URL(e,n);return n.origin===s.origin},ke._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},ke.fromPort=t=>{if(T9("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return ke.create(t)};let Dm=ke;var ts,Qr,Zr,Gs,xl,tf,jr,Pi,vs,IU,um,V0;class RK{constructor(t,e,n,s,r){R(this,vs);Z(this,"downloadInfoCapability",Promise.withResolvers());R(this,ts,null);R(this,Qr,new Map);R(this,Zr,null);R(this,Gs,new Map);R(this,xl,new Map);R(this,tf,new Map);R(this,jr,null);R(this,Pi,Mm.instance);this.messageHandler=t,this.loadingTask=e,C(this,Zr,n),this.commonObjs=new EU,this.fontLoader=new I9({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.enableHWA=s.enableHWA,this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),d(this,Pi).addListener(D(this,vs,IU).bind(this))}get annotationStorage(){return Nt(this,"annotationStorage",new xw)}getRenderingIntent(t,e=Za.ENABLE,n=null,s=!1,r=!1){let a=ps.DISPLAY,u=MC;switch(t){case"any":a=ps.ANY;break;case"display":break;case"print":a=ps.PRINT;break;default:It(`getRenderingIntent - invalid intent: ${t}`)}const h=a&ps.PRINT&&n instanceof W2?n:this.annotationStorage;switch(e){case Za.DISABLE:a+=ps.ANNOTATIONS_DISABLE;break;case Za.ENABLE:break;case Za.ENABLE_FORMS:a+=ps.ANNOTATIONS_FORMS;break;case Za.ENABLE_STORAGE:a+=ps.ANNOTATIONS_STORAGE,u=h.serializable;break;default:It(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(a+=ps.IS_EDITING),r&&(a+=ps.OPLIST);const{ids:f,hash:p}=h.modifiedIds,y=[a,u.hash,p];return{renderingIntent:a,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=d(this,jr))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of d(this,Gs).values())t.push(s._destroy());d(this,Gs).clear(),d(this,xl).clear(),d(this,tf).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s,r;this.commonObjs.clear(),this.fontLoader.clear(),d(this,Qr).clear(),this.filterFactory.destroy(),Rm.cleanup(),(s=d(this,Zr))==null||s.cancelAllRequests(new Wl("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,s)=>{oe(d(this,Zr),"GetReader - no `BasePDFStream` instance available."),C(this,ts,d(this,Zr).getFullReader()),d(this,ts).onProgress=r=>D(this,vs,V0).call(this,r),s.onPull=()=>{d(this,ts).read().then(function({value:r,done:a}){if(a){s.close();return}oe(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{d(this,ts).cancel(r),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("ReaderHeadersReady",async n=>{await d(this,ts).headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:a}=d(this,ts);return s&&r&&(d(this,ts).onProgress=null),{isStreamingSupported:s,isRangeSupported:r,contentLength:a}}),t.on("GetRangeReader",(n,s)=>{oe(d(this,Zr),"GetRangeReader - no `BasePDFStream` instance available.");const r=d(this,Zr).getRangeReader(n.begin,n.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:a,done:u}){if(u){s.close();return}oe(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{r.cancel(a),s.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:n})=>{d(this,Pi).pagesNumber=n.numPages,this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new xK(n,this))}),t.on("DocException",n=>{e._capability.reject(wi(n))}),t.on("PasswordRequest",n=>{C(this,jr,Promise.withResolvers());try{if(!e.onPassword)throw wi(n);const s=r=>{r instanceof Error?d(this,jr).reject(r):d(this,jr).resolve({password:r})};e.onPassword(s,n.code)}catch(s){d(this,jr).reject(s)}return d(this,jr).promise}),t.on("DataLoaded",n=>{D(this,vs,V0).call(this,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;d(this,Gs).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,s,r])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":if("error"in r){const v=r.error;It(`Error during font loading: ${v}`),this.commonObjs.resolve(n,v);break}const u=new RC(r),h=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(v,E)=>globalThis.FontInspector.fontAdded(v,E):null,f=new N9(u,h,r.extra,r.charProcOperatorList);this.fontLoader.bind(f).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!f.fontExtraProperties&&f.data&&f.clearData(),this.commonObjs.resolve(n,f)});break;case"CopyLocalImage":const{imageRef:p}=r;oe(p,"The imageRef must be defined.");for(const v of d(this,Gs).values())for(const[,E]of v.objs)if((E==null?void 0:E.ref)===p)return E.dataLen?(this.commonObjs.resolve(n,structuredClone(E)),E.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new P9(r));break;case"Image":this.commonObjs.resolve(n,r);break;case"Pattern":const y=new DC(r);this.commonObjs.resolve(n,y.getIR());break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([n,s,r,a])=>{var h;if(this.destroyed)return;const u=d(this,Gs).get(s);if(!u.objs.has(n)){if(u._intentStates.size===0){(h=a==null?void 0:a.bitmap)==null||h.close();return}switch(r){case"Image":case"Pattern":u.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",n=>{this.destroyed||D(this,vs,V0).call(this,n)}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[n.type];if(!s)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&It("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=d(this,ts))==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>d(this,Pi).pagesNumber)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=d(this,Pi).getPageId(t)-1,s=d(this,xl).get(e);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&d(this,tf).set(a.refStr,n);const u=new MK(e,a,this,this._params.pdfBug);return d(this,Gs).set(e,u),u});return d(this,xl).set(e,r),r}async getPageIndex(t){if(!IC(t))throw new Error("Invalid pageIndex request.");const e=await this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen});return d(this,Pi).getPageNumber(e+1)-1}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:d(this,Pi).getPageId(t+1)-1,intent:e})}getFieldObjects(){return D(this,vs,um).call(this,"GetFieldObjects")}hasJSActions(){return D(this,vs,um).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return D(this,vs,um).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:d(this,Pi).getPageId(t+1)-1})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:d(this,Pi).getPageId(t+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return D(this,vs,um).call(this,"GetOptionalContentConfig").then(e=>new lK(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=d(this,Qr).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(s=>{var r,a;return{info:s[0],metadata:s[1]?new rK(s[1]):null,contentDispositionFilename:((r=d(this,ts))==null?void 0:r.filename)??null,contentLength:((a=d(this,ts))==null?void 0:a.contentLength)??null,hasStructTree:s[2]}});return d(this,Qr).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of d(this,Gs).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),d(this,Qr).clear(),this.filterFactory.destroy(!0),Rm.cleanup()}}cachedPageNumber(t){if(!IC(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`,n=d(this,tf).get(e);return n>=0?d(this,Pi).getPageNumber(n+1):null}}ts=new WeakMap,Qr=new WeakMap,Zr=new WeakMap,Gs=new WeakMap,xl=new WeakMap,tf=new WeakMap,jr=new WeakMap,Pi=new WeakMap,vs=new WeakSet,IU=function(){const t=new Map,e=new Map;for(let n=0,s=d(this,Pi).pagesNumber;n<s;n++){const r=d(this,Pi).getPrevPageNumber(n+1)-1,a=d(this,Gs).get(r);a&&t.set(n,a);const u=d(this,xl).get(r);u&&e.set(n,u)}C(this,Gs,t),C(this,xl,e)},um=function(t,e=null){const n=d(this,Qr).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,e);return d(this,Qr).set(t,s),s},V0=function({loaded:t,total:e}){var n,s;(s=(n=this.loadingTask).onProgress)==null||s.call(n,{loaded:t,total:e,percent:qn(Math.round(t/e*100),0,100)})};class DK{constructor(t){Z(this,"_internalRenderTask",null);Z(this,"onContinue",null);Z(this,"onError",null);this._internalRenderTask=t}get promise(){return this._internalRenderTask.capability.promise}cancel(t=0){this._internalRenderTask.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this._internalRenderTask.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this._internalRenderTask;return t.form||t.canvas&&(e==null?void 0:e.size)>0}}var Ml,fc;const _u=class _u{constructor({callback:t,params:e,objs:n,commonObjs:s,annotationCanvasMap:r,operatorList:a,pageIndex:u,canvasFactory:h,filterFactory:f,useRequestAnimationFrame:p=!1,pdfBug:y=!1,pageColors:v=null,enableHWA:E=!1,operationsFilter:b=null}){R(this,Ml,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=f,this._pdfBug=y,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new DK(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=E,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=b}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var h,f;if(this.cancelled)return;if(this._canvas){if(d(_u,fc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");d(_u,fc).add(this._canvas)}this._pdfBug&&((h=globalThis.StepperManager)!=null&&h.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:s,background:r,dependencyTracker:a}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new oh(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:s,viewport:n,transparency:t,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(t=null,e=0){var n,s,r;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),d(this,Ml)&&(window.cancelAnimationFrame(d(this,Ml)),C(this,Ml,null)),d(_u,fc).delete(this._canvas),t||(t=new _w(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(r=(s=this.task).onError)==null||r.call(s,t)}operatorListChanged(){var t,e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.gfx.dependencyTracker)==null||t.growOperationsCount(this.operatorList.fnArray.length),(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?C(this,Ml,window.requestAnimationFrame(()=>{C(this,Ml,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),d(_u,fc).delete(this._canvas),this.callback())))}};Ml=new WeakMap,fc=new WeakMap,R(_u,fc,new WeakSet);let KC=_u;const IK="5.4.624",NK="384c6208b";var es,pc,ef,yn,zg,nf,ta,qg,Rl,ho,Yg,Se,WC,JC,QC,Su,NU,Qa;const xi=class xi{constructor({editor:t=null,uiManager:e=null}){R(this,Se);R(this,es,null);R(this,pc,null);R(this,ef);R(this,yn,null);R(this,zg,!1);R(this,nf,!1);R(this,ta,null);R(this,qg);R(this,Rl,null);R(this,ho,null);var n,s;t?(C(this,nf,!1),C(this,ta,t)):C(this,nf,!0),C(this,ho,(t==null?void 0:t._uiManager)||e),C(this,qg,d(this,ho)._eventBus),C(this,ef,((n=t==null?void 0:t.color)==null?void 0:n.toUpperCase())||((s=d(this,ho))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),d(xi,Yg)||C(xi,Yg,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Nt(this,"_keyboardManager",new Py([[["Escape","mac+Escape"],xi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],xi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],xi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],xi.prototype._moveToPrevious],[["Home","mac+Home"],xi.prototype._moveToBeginning],[["End","mac+End"],xi.prototype._moveToEnd]]))}renderButton(){const t=C(this,es,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",d(this,ta)&&(t.ariaControls=`${d(this,ta).id}_colorpicker_dropdown`);const e=d(this,ho)._signal;t.addEventListener("click",D(this,Se,Su).bind(this),{signal:e}),t.addEventListener("keydown",D(this,Se,QC).bind(this),{signal:e});const n=C(this,pc,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=d(this,ef),t.append(n),t}renderMainDropdown(){const t=C(this,yn,D(this,Se,WC).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===d(this,es)){D(this,Se,Su).call(this,t);return}const e=t.target.getAttribute("data-color");e&&D(this,Se,JC).call(this,e,t)}_moveToNext(t){var e,n;if(!d(this,Se,Qa)){D(this,Se,Su).call(this,t);return}if(t.target===d(this,es)){(e=d(this,yn).firstElementChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=d(this,yn))==null?void 0:e.firstElementChild)||t.target===d(this,es)){d(this,Se,Qa)&&this._hideDropdownFromKeyboard();return}d(this,Se,Qa)||D(this,Se,Su).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!d(this,Se,Qa)){D(this,Se,Su).call(this,t);return}(e=d(this,yn).firstElementChild)==null||e.focus()}_moveToEnd(t){var e;if(!d(this,Se,Qa)){D(this,Se,Su).call(this,t);return}(e=d(this,yn).lastElementChild)==null||e.focus()}hideDropdown(){var t,e;(t=d(this,yn))==null||t.classList.add("hidden"),d(this,es).ariaExpanded="false",(e=d(this,Rl))==null||e.abort(),C(this,Rl,null)}_hideDropdownFromKeyboard(){var t;if(!d(this,nf)){if(!d(this,Se,Qa)){(t=d(this,ta))==null||t.unselect();return}this.hideDropdown(),d(this,es).focus({preventScroll:!0,focusVisible:d(this,zg)})}}updateColor(t){if(d(this,pc)&&(d(this,pc).style.backgroundColor=t),!d(this,yn))return;const e=d(this,ho).highlightColors.values();for(const n of d(this,yn).children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;(t=d(this,es))==null||t.remove(),C(this,es,null),C(this,pc,null),(e=d(this,yn))==null||e.remove(),C(this,yn,null)}};es=new WeakMap,pc=new WeakMap,ef=new WeakMap,yn=new WeakMap,zg=new WeakMap,nf=new WeakMap,ta=new WeakMap,qg=new WeakMap,Rl=new WeakMap,ho=new WeakMap,Yg=new WeakMap,Se=new WeakSet,WC=function(){const t=document.createElement("div"),e=d(this,ho)._signal;t.addEventListener("contextmenu",Qs,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),d(this,ta)&&(t.id=`${d(this,ta).id}_colorpicker_dropdown`);for(const[n,s]of d(this,ho).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=n,r.setAttribute("data-l10n-id",d(xi,Yg)[n]);const a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=s,r.ariaSelected=s===d(this,ef),r.addEventListener("click",D(this,Se,JC).bind(this,s),{signal:e}),t.append(r)}return t.addEventListener("keydown",D(this,Se,QC).bind(this),{signal:e}),t},JC=function(t,e){e.stopPropagation(),d(this,qg).dispatch("switchannotationeditorparams",{source:this,type:Jt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},QC=function(t){xi._keyboardManager.exec(this,t)},Su=function(t){if(d(this,Se,Qa)){this.hideDropdown();return}if(C(this,zg,t.detail===0),d(this,Rl)||(C(this,Rl,new AbortController),window.addEventListener("pointerdown",D(this,Se,NU).bind(this),{signal:d(this,ho).combinedSignal(d(this,Rl))})),d(this,es).ariaExpanded="true",d(this,yn)){d(this,yn).classList.remove("hidden");return}const e=C(this,yn,D(this,Se,WC).call(this));d(this,es).append(e)},NU=function(t){var e;(e=d(this,yn))!=null&&e.contains(t.target)||this.hideDropdown()},Qa=function(){return d(this,yn)&&!d(this,yn).classList.contains("hidden")},R(xi,Yg,null);let RA=xi;var Xo,Xg,sf,$g;const wu=class wu{constructor(t){R(this,Xo,null);R(this,Xg,null);R(this,sf,null);C(this,Xg,t),C(this,sf,t._uiManager),d(wu,$g)||C(wu,$g,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(d(this,Xo))return d(this,Xo);const{editorType:t,colorType:e,color:n}=d(this,Xg),s=C(this,Xo,document.createElement("input"));return s.type="color",s.value=n||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",d(wu,$g)[t]),s.addEventListener("input",()=>{d(this,sf).updateParams(e,s.value)},{signal:d(this,sf)._signal}),s}update(t){d(this,Xo)&&(d(this,Xo).value=t)}destroy(){var t;(t=d(this,Xo))==null||t.remove(),C(this,Xo,null)}hideDropdown(){}};Xo=new WeakMap,Xg=new WeakMap,sf=new WeakMap,$g=new WeakMap,R(wu,$g,null);let DA=wu;function _P(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function qp(i){return Math.max(0,Math.min(255,255*i))}class wP{static CMYK_G([t,e,n,s]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=qp(t),[t,t,t]}static G_HTML([t]){const e=_P(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(qp)}static RGB_HTML(t){return`#${t.map(_P).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,n+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,n,s]){return[qp(1-Math.min(1,t+s)),qp(1-Math.min(1,n+s)),qp(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const s=1-t,r=1-e,a=1-n,u=Math.min(s,r,a);return["CMYK",s,r,a,u]}}class PK{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){re("Abstract method `_createSVG` called.")}}class IA extends PK{_createSVG(t){return document.createElementNS(_r,t)}}const LK=9,qc=new WeakSet,kK=new Date().getTimezoneOffset()*60*1e3;class Tb{static create(t){switch(t.data.annotationType){case un.LINK:return new Dw(t);case un.TEXT:return new BK(t);case un.WIDGET:switch(t.data.fieldType){case"Tx":return new FK(t);case"Btn":return t.data.radioButton?new kU(t):t.data.checkBox?new VK(t):new HK(t);case"Ch":return new GK(t);case"Sig":return new OK(t)}return new $c(t);case un.POPUP:return new jC(t);case un.FREETEXT:return new VU(t);case un.LINE:return new qK(t);case un.SQUARE:return new YK(t);case un.CIRCLE:return new XK(t);case un.POLYLINE:return new HU(t);case un.CARET:return new KK(t);case un.INK:return new Iw(t);case un.POLYGON:return new $K(t);case un.HIGHLIGHT:return new GU(t);case un.UNDERLINE:return new WK(t);case un.SQUIGGLY:return new JK(t);case un.STRIKEOUT:return new QK(t);case un.STAMP:return new zU(t);case un.FILEATTACHMENT:return new ZK(t);default:return new Ge(t)}}}var mc,of,zs,Kg,ZC;const Fw=class Fw{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){R(this,Kg);R(this,mc,null);R(this,of,!1);R(this,zs,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t!=null&&t.str||e!=null&&e.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Fw._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:t}=this,e=(n=this.annotationStorage)==null?void 0:n.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var u;const t=(u=this.annotationStorage)==null?void 0:u.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:s}=this.data;let r=-1/0,a=-1/0;if((e==null?void 0:e.length)>=8){for(let h=0;h<e.length;h+=8)e[h+1]>a?(a=e[h+1],r=e[h+2]):e[h+1]===a&&(r=Math.max(r,e[h+2]));return[r,a]}if((n==null?void 0:n.length)>=1){for(const h of n)for(let f=0,p=h.length;f<p;f+=2)h[f+1]>a?(a=h[f+1],r=h[f]):h[f+1]===a&&(r=Math.max(r,h[f]));if(r!==1/0)return[r,a]}return s?[s[2],s[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:a}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-r)/n,t[1]=100*(t[1]-a)/s,t}get commentText(){var e,n,s;const{data:t}=this;return((n=(e=this.annotationStorage.getRawValue(`${_m}${t.id}`))==null?void 0:e.popup)==null?void 0:n.contents)||((s=t.contentsObj)==null?void 0:s.str)||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${_m}${e.id}`,{id:e.id,annotationType:e.annotationType,page:this.parent.page,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){var t,e;(e=((t=d(this,zs))==null?void 0:t.popup)||this.popup)==null||e.remove(),C(this,zs,this.popup=null)}updateEdited(t){var r;if(!this.container)return;t.rect&&(d(this,mc)||C(this,mc,{rect:this.data.rect.slice(0)}));const{rect:e,popup:n}=t;e&&D(this,Kg,ZC).call(this,e);let s=((r=d(this,zs))==null?void 0:r.popup)||this.popup;!s&&(n!=null&&n.text)&&(this._createPopup(n),s=d(this,zs).popup),s&&(s.updateEdited(t),n!=null&&n.deleted&&(s.remove(),C(this,zs,null),this.popup=null))}resetEdited(){var t;d(this,mc)&&(D(this,Kg,ZC).call(this,d(this,mc).rect),(t=d(this,zs))==null||t.popup.resetEdited(),C(this,mc,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),!(this instanceof $c)&&!(this instanceof Dw)&&(r.tabIndex=0);const{style:a}=r;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof jC){const{rotation:_}=e;return!e.hasOwnCanvas&&_!==0&&this.setRotation(_,r),r}const{width:u,height:h}=this;if(!t&&e.borderStyle.width>0){a.borderWidth=`${e.borderStyle.width}px`;const _=e.borderStyle.horizontalCornerRadius,w=e.borderStyle.verticalCornerRadius;if(_>0||w>0){const N=`calc(${_}px * var(--total-scale-factor)) / calc(${w}px * var(--total-scale-factor))`;a.borderRadius=N}else if(this instanceof kU){const N=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;a.borderRadius=N}switch(e.borderStyle.style){case kd.SOLID:a.borderStyle="solid";break;case kd.DASHED:a.borderStyle="dashed";break;case kd.BEVELED:It("Unimplemented border style: beveled");break;case kd.INSET:It("Unimplemented border style: inset");break;case kd.UNDERLINE:a.borderBottomStyle="solid";break}const x=e.borderColor||null;x?(C(this,of,!0),a.borderColor=ht.makeHexColor(x[0]|0,x[1]|0,x[2]|0)):a.borderWidth=0}const f=ht.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:y,pageX:v,pageY:E}=s.rawDims;a.left=`${100*(f[0]-v)/p}%`,a.top=`${100*(f[1]-E)/y}%`;const{rotation:b}=e;return e.hasOwnCanvas||b===0?(a.width=`${100*u/p}%`,a.height=`${100*h/y}%`):this.setRotation(b,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims;let{width:r,height:a}=this;t%180!==0&&([r,a]=[a,r]),e.style.width=`${100*r/n}%`,e.style.height=`${100*a/s}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,s)=>{const r=s.detail[e],a=r[0],u=r.slice(1);s.target.style[n]=wP[`${a}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:wP[`${a}_rgb`](u)})};return Nt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const s of Object.keys(e.detail)){const r=t[s]||n[s];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[s,r]of Object.entries(e)){const a=n[s];if(a){const u={detail:{[s]:r},target:t};a(u),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,s,r]=this.data.rect.map(_=>Math.fround(_));if(t.length===8){const[_,w,x,N]=t.subarray(2,6);if(s===_&&r===w&&e===x&&n===N)return}const{style:a}=this.container;let u;if(d(this,of)){const{borderColor:_,borderWidth:w}=a;a.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${_}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const h=s-e,f=r-n,{svgFactory:p}=this,y=p.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const v=p.createElement("defs");y.append(v);const E=p.createElement("clipPath"),b=`clippath_${this.data.id}`;E.setAttribute("id",b),E.setAttribute("clipPathUnits","objectBoundingBox"),v.append(E);for(let _=2,w=t.length;_<w;_+=8){const x=t[_],N=t[_+1],I=t[_+2],L=t[_+3],U=p.createElement("rect"),k=(I-e)/h,B=(r-N)/f,z=(x-I)/h,H=(N-L)/f;U.setAttribute("x",k),U.setAttribute("y",B),U.setAttribute("width",z),U.setAttribute("height",H),E.append(U),u==null||u.push(`<rect vector-effect="non-scaling-stroke" x="${k}" y="${B}" width="${z}" height="${H}"/>`)}d(this,of)&&(u.push("</g></svg>')"),a.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${b})`}_createPopup(t=null){const{data:e}=this;let n,s;t?(n={str:t.text},s=t.date):(n=e.contentsObj,s=e.modificationDate),C(this,zs,new jC({data:{color:e.color,titleObj:e.titleObj,modificationDate:s,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(d(this,zs)||this.popup||this.data.popupRef)}get extraPopupElement(){return d(this,zs)}render(){re("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:r,id:a,exportValues:u}of s){if(r===-1||a===e)continue;const h=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${a}"]`);if(f&&!qc.has(f)){It(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:h,domElement:f})}return n}for(const s of document.getElementsByName(t)){const{exportValue:r}=s,a=s.getAttribute("data-element-id");a!==e&&qc.has(s)&&n.push({id:a,exportValue:r,domElement:s})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};mc=new WeakMap,of=new WeakMap,zs=new WeakMap,Kg=new WeakSet,ZC=function(t){const{container:{style:e},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:u,pageY:h}}}}=this;n==null||n.splice(0,4,...t),e.left=`${100*(t[0]-u)/r}%`,e.top=`${100*(a-t[3]+h)/a}%`,s===0?(e.width=`${100*(t[2]-t[0])/r}%`,e.height=`${100*(t[3]-t[1])/a}%`):this.setRotation(s)};let Ge=Fw;class UK extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var gs,Eu,PU,LU;class Dw extends Ge{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});R(this,gs);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let r=!1;return e.url?(n.addLinkAttributes(s,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(s,e.action,e.overlaidText),r=!0):e.attachment?(D(this,gs,PU).call(this,s,e.attachment,e.overlaidText,e.attachmentDest),r=!0):e.setOCGState?(D(this,gs,LU).call(this,s,e.setOCGState,e.overlaidText),r=!0):e.dest?(this._bindLink(s,e.dest,e.overlaidText),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),r=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&(this.contentElement=s,this.container.append(s)),this.container}_bindLink(e,n,s=""){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&D(this,gs,Eu).call(this),s&&(e.title=s)}_bindNamedAction(e,n,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),s&&(e.title=s),D(this,gs,Eu).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const a=s.get(r);a&&(e[a]=()=>{var u;return(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1})}n.overlaidText&&(e.title=n.overlaidText),e.onclick||(e.onclick=()=>!1),D(this,gs,Eu).call(this)}_bindResetFormAction(e,n){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),D(this,gs,Eu).call(this),!this._fieldObjects){It('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var y;s==null||s();const{fields:r,refs:a,include:u}=n,h=[];if(r.length!==0||a.length!==0){const v=new Set(a);for(const E of r){const b=this._fieldObjects[E]||[];for(const{id:_}of b)v.add(_)}for(const E of Object.values(this._fieldObjects))for(const b of E)v.has(b.id)===u&&h.push(b)}else for(const v of Object.values(this._fieldObjects))h.push(...v);const f=this.annotationStorage,p=[];for(const v of h){const{id:E}=v;switch(p.push(E),v.type){case"text":{const _=v.defaultValue||"";f.setValue(E,{value:_});break}case"checkbox":case"radiobutton":{const _=v.defaultValue===v.exportValues;f.setValue(E,{value:_});break}case"combobox":case"listbox":{const _=v.defaultValue||"";f.setValue(E,{value:_});break}default:continue}const b=document.querySelector(`[data-element-id="${E}"]`);if(b){if(!qc.has(b)){It(`_bindResetFormAction - element not allowed: ${E}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:p,name:"ResetForm"}})),!1}}}gs=new WeakSet,Eu=function(){this.container.setAttribute("data-internal-link","")},PU=function(e,n,s="",r=null){e.href=this.linkService.getAnchorUrl(""),n.description?e.title=n.description:s&&(e.title=s),e.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(n.content,n.filename,r),!1},D(this,gs,Eu).call(this)},LU=function(e,n,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),s&&(e.title=s),D(this,gs,Eu).call(this)};class BK extends Ge{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class $c extends Ge{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Tn.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,s,r){n.includes("mouse")?t.addEventListener(n,a=>{var u;(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):t.addEventListener(n,a=>{var u;if(n==="blur"){if(!e.focused||!a.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}r&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a)}}))})}_setEventListeners(t,e,n,s){var r,a,u;for(const[h,f]of n)(f==="Action"||(r=this.data.actions)!=null&&r[f])&&((f==="Focus"||f==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,h,f,s),f==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(t,e,"blur","Blur",null):f==="Blur"&&!((u=this.data.actions)!=null&&u.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":ht.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||LK,r=t.style;let a;const u=2,h=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(f/(fb*s))||1,y=f/p;a=Math.min(s,h(y/fb))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);a=Math.min(s,h(f/fb))}r.fontSize=`calc(${a}px * var(--total-scale-factor))`,r.color=ht.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class FK extends $c{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,s){const r=this.annotationStorage;for(const a of this._getElementsByName(t.name,t.id))a.domElement&&(a.domElement[e]=n),r.setValue(a.id,{[s]:n})}render(){var s,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let u=a.value||"";const h=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;h&&u.length>h&&(u=u.slice(0,h));let f=a.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const p={userValue:u,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=f??u,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",f??u),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),qc.add(n),this.contentElement=n,n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:y,datetimeType:v,timeStep:E}=this.data,b=!!v&&this.enableScripting;y&&(n.title=y),this._setRequired(n,this.data.required),h&&(n.maxLength=h),n.addEventListener("input",w=>{t.setValue(e,{value:w.target.value}),this.setPropertyOnSiblings(n,"value",w.target.value,"value"),p.formattedValue=null}),n.addEventListener("resetform",w=>{const x=this.data.defaultFieldValue??"";n.value=p.userValue=x,p.formattedValue=null});let _=w=>{const{formattedValue:x}=p;x!=null&&(w.target.value=x),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",x=>{var I;if(p.focused)return;const{target:N}=x;if(b&&(N.type=v,E&&(N.step=E)),p.userValue){const L=p.userValue;if(b)if(v==="time"){const U=new Date(L),k=[U.getHours(),U.getMinutes(),U.getSeconds()];N.value=k.map(B=>B.toString().padStart(2,"0")).join(":")}else N.value=new Date(L-kK).toISOString().split(v==="date"?"T":".",1)[0];else N.value=L}p.lastCommittedValue=N.value,p.commitKey=1,(I=this.data.actions)!=null&&I.Focus||(p.focused=!0)}),n.addEventListener("updatefromsandbox",x=>{this.showElementAndHideCanvas(x.target);const N={value(I){p.userValue=I.detail.value??"",b||t.setValue(e,{value:p.userValue.toString()}),I.target.value=p.userValue},formattedValue(I){const{formattedValue:L}=I.detail;p.formattedValue=L,L!=null&&I.target!==document.activeElement&&(I.target.value=L);const U={formattedValue:L};b&&(U.value=L),t.setValue(e,U)},selRange(I){I.target.setSelectionRange(...I.detail.selRange)},charLimit:I=>{var B;const{charLimit:L}=I.detail,{target:U}=I;if(L===0){U.removeAttribute("maxLength");return}U.setAttribute("maxLength",L);let k=p.userValue;!k||k.length<=L||(k=k.slice(0,L),U.value=p.userValue=k,t.setValue(e,{value:k}),(B=this.linkService.eventBus)==null||B.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:k,willCommit:!0,commitKey:1,selStart:U.selectionStart,selEnd:U.selectionEnd}}))}};this._dispatchEventFromSandbox(N,x)}),n.addEventListener("keydown",x=>{var L;p.commitKey=1;let N=-1;if(x.key==="Escape"?N=0:x.key==="Enter"&&!this.data.multiLine?N=2:x.key==="Tab"&&(p.commitKey=3),N===-1)return;const{value:I}=x.target;p.lastCommittedValue!==I&&(p.lastCommittedValue=I,p.userValue=I,(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:I,willCommit:!0,commitKey:N,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}}))});const w=_;_=null,n.addEventListener("blur",x=>{var L,U;if(!p.focused||!x.relatedTarget)return;(L=this.data.actions)!=null&&L.Blur||(p.focused=!1);const{target:N}=x;let{value:I}=N;if(b){if(I&&v==="time"){const k=I.split(":").map(B=>parseInt(B,10));I=new Date(2e3,0,1,k[0],k[1],k[2]||0).valueOf(),N.step=""}else I.includes("T")||(I=`${I}T00:00`),I=new Date(I).valueOf();N.type="text"}p.userValue=I,p.lastCommittedValue!==I&&((U=this.linkService.eventBus)==null||U.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:I,willCommit:!0,commitKey:p.commitKey,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}})),w(x)}),(r=this.data.actions)!=null&&r.Keystroke&&n.addEventListener("beforeinput",x=>{var H;p.lastCommittedValue=null;const{data:N,target:I}=x,{value:L,selectionStart:U,selectionEnd:k}=I;let B=U,z=k;switch(x.inputType){case"deleteWordBackward":{const j=L.substring(0,U).match(/\w*[^\w]*$/);j&&(B-=j[0].length);break}case"deleteWordForward":{const j=L.substring(U).match(/^[^\w]*\w*/);j&&(z+=j[0].length);break}case"deleteContentBackward":U===k&&(B-=1);break;case"deleteContentForward":U===k&&(z+=1);break}x.preventDefault(),(H=this.linkService.eventBus)==null||H.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:L,change:N||"",willCommit:!1,selStart:B,selEnd:z}})}),this._setEventListeners(n,p,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],x=>x.target.value)}if(_&&n.addEventListener("blur",_),this.data.comb){const x=(this.data.rect[2]-this.data.rect[0])/h;n.classList.add("comb"),n.style.letterSpacing=`calc(${x}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class OK extends $c{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class VK extends $c{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return qc.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=0,r.addEventListener("change",a=>{const{name:u,checked:h}=a.target;for(const f of this._getElementsByName(u,n)){const p=h&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}t.setValue(n,{value:h})}),r.addEventListener("resetform",a=>{const u=e.defaultFieldValue||"Off";a.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const u={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(n,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class kU extends $c{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(n,{value:s})),s)for(const a of this._getElementsByName(e.fieldName,n))t.setValue(a.id,{value:!1});const r=document.createElement("input");if(qc.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",a=>{const{name:u,checked:h}=a.target;for(const f of this._getElementsByName(u,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:h})}),r.addEventListener("resetform",a=>{const u=e.defaultFieldValue;a.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const a=e.buttonValue;r.addEventListener("updatefromsandbox",u=>{const h={value:f=>{const p=a===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const v=p&&y.id===n;y.domElement&&(y.domElement.checked=v),t.setValue(y.id,{value:v})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class HK extends Dw{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class GK extends $c{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");qc.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",p=>{const y=this.data.defaultFieldValue;for(const v of s.options)v.selected=v.value===y});for(const p of this.data.options){const y=document.createElement("option");y.textContent=p.displayValue,y.value=p.exportValue,n.value.includes(p.exportValue)&&(y.setAttribute("selected",!0),r=!1),s.append(y)}let a=null;if(r){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),s.prepend(p),a=()=>{p.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const u=p=>{const y=p?"value":"textContent",{options:v,multiple:E}=s;return E?Array.prototype.filter.call(v,b=>b.selected).map(b=>b[y]):v.selectedIndex===-1?null:v[v.selectedIndex][y]};let h=u(!1);const f=p=>{const y=p.target.options;return Array.prototype.map.call(y,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",p=>{const y={value(v){a==null||a();const E=v.detail.value,b=new Set(Array.isArray(E)?E:[E]);for(const _ of s.options)_.selected=b.has(_.value);t.setValue(e,{value:u(!0)}),h=u(!1)},multipleSelection(v){s.multiple=!0},remove(v){const E=s.options,b=v.detail.remove;E[b].selected=!1,s.remove(b),E.length>0&&Array.prototype.findIndex.call(E,w=>w.selected)===-1&&(E[0].selected=!0),t.setValue(e,{value:u(!0),items:f(v)}),h=u(!1)},clear(v){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),h=u(!1)},insert(v){const{index:E,displayValue:b,exportValue:_}=v.detail.insert,w=s.children[E],x=document.createElement("option");x.textContent=b,x.value=_,w?w.before(x):s.append(x),t.setValue(e,{value:u(!0),items:f(v)}),h=u(!1)},items(v){const{items:E}=v.detail;for(;s.length!==0;)s.remove(0);for(const b of E){const{displayValue:_,exportValue:w}=b,x=document.createElement("option");x.textContent=_,x.value=w,s.append(x)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(v)}),h=u(!1)},indices(v){const E=new Set(v.detail.indices);for(const b of v.target.options)b.selected=E.has(b.index);t.setValue(e,{value:u(!0)}),h=u(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(y,p)}),s.addEventListener("input",p=>{var E;const y=u(!0),v=u(!1);t.setValue(e,{value:y}),p.preventDefault(),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:v,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):s.addEventListener("input",function(p){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}var Wg,t_;class jC extends Ge{constructor(e){const{data:n,elements:s,parent:r}=e,a=!!r._commentManager;super(e,{isRenderable:!a&&Ge._hasPopupData(n)});R(this,Wg);if(this.elements=s,a&&Ge._hasPopupData(n)){const u=this.popup=D(this,Wg,t_).call(this);for(const h of s)h.popup=u}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const n=this.popup=D(this,Wg,t_).call(this),s=[];for(const r of this.elements)r.popup=n,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${Jd}${r}`).join(",")),this.container}}Wg=new WeakSet,t_=function(){return new zK({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var ns,Dl,$A,KA,rf,af,$e,$o,Il,gc,lf,uf,Ko,is,ea,na,Ke,ia,Nl,Jg,sa,cf,yc,Pl,Cn,Ll,Ht,H0,e_,n_,i_,G0,s_,UU,BU,FU,OU,z0,q0,o_;class zK{constructor({container:t,color:e,elements:n,titleObj:s,modificationDate:r,contentsObj:a,richText:u,parent:h,rect:f,parentRect:p,open:y,commentManager:v=null}){R(this,Ht);R(this,ns,null);R(this,Dl,D(this,Ht,FU).bind(this));R(this,$A,D(this,Ht,o_).bind(this));R(this,KA,D(this,Ht,q0).bind(this));R(this,rf,D(this,Ht,z0).bind(this));R(this,af,null);R(this,$e,null);R(this,$o,null);R(this,Il,null);R(this,gc,null);R(this,lf,null);R(this,uf,null);R(this,Ko,!1);R(this,is,null);R(this,ea,null);R(this,na,null);R(this,Ke,null);R(this,ia,null);R(this,Nl,null);R(this,Jg,null);R(this,sa,null);R(this,cf,null);R(this,yc,null);R(this,Pl,!1);R(this,Cn,null);R(this,Ll,null);C(this,$e,t),C(this,cf,s),C(this,$o,a),C(this,sa,u),C(this,lf,h),C(this,af,e),C(this,Jg,f),C(this,uf,p),C(this,gc,n),C(this,ns,v),C(this,Cn,n[0]),C(this,Il,bA.toDateObject(r)),this.trigger=n.flatMap(E=>E.getElementsToTriggerPopup()),v||(D(this,Ht,H0).call(this),d(this,$e).hidden=!0,y&&D(this,Ht,z0).call(this))}renderCommentButton(){if(d(this,Ke)){d(this,Ke).parentNode||d(this,Cn).container.after(d(this,Ke));return}if(d(this,ia)||D(this,Ht,e_).call(this),!d(this,ia))return;const{signal:t}=C(this,ea,new AbortController),e=d(this,Cn).hasOwnCommentButton,n=()=>{d(this,ns).toggleCommentPopup(this,!0,void 0,!e)},s=()=>{d(this,ns).toggleCommentPopup(this,!1,!0,!e)},r=()=>{d(this,ns).toggleCommentPopup(this,!1,!1)};if(e){C(this,Ke,d(this,Cn).container);for(const a of this.trigger)a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.addEventListener("keydown",d(this,Dl),{signal:t}),a.addEventListener("click",n,{signal:t}),a.addEventListener("pointerenter",s,{signal:t}),a.addEventListener("pointerleave",r,{signal:t}),a.classList.add("popupTriggerArea")}else{const a=C(this,Ke,document.createElement("button"));a.className="annotationCommentButton";const u=d(this,Cn).container;a.style.zIndex=u.style.zIndex+1,a.tabIndex=0,a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.setAttribute("data-l10n-id","pdfjs-show-comment-button"),D(this,Ht,i_).call(this),D(this,Ht,n_).call(this),a.addEventListener("keydown",d(this,Dl),{signal:t}),a.addEventListener("click",n,{signal:t}),a.addEventListener("pointerenter",s,{signal:t}),a.addEventListener("pointerleave",r,{signal:t}),u.after(a)}}get commentButtonColor(){const{color:t,opacity:e}=d(this,Cn).commentData;return t?d(this,lf)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{var t;(t=d(this,Ke))==null||t.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:s,modificationDate:r}=d(this,Cn).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:s,modificationDate:r}}get elementBeforePopup(){return d(this,Ke)}get comment(){return d(this,Ll)||C(this,Ll,d(this,Cn).commentText),d(this,Ll)}set comment(t){t!==this.comment&&(d(this,Cn).commentText=C(this,Ll,t))}focus(){var t;(t=d(this,Cn).container)==null||t.focus()}get parentBoundingClientRect(){return d(this,Cn).layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){d(this,Ke)&&(d(this,Ke).classList.toggle("selected",t),d(this,Ke).ariaExpanded=e)}setSelectedCommentButton(t){d(this,Ke).classList.toggle("selected",t)}get commentPopupPosition(){if(d(this,Nl))return d(this,Nl);const{x:t,y:e,height:n}=d(this,Ke).getBoundingClientRect(),{x:s,y:r,width:a,height:u}=d(this,Cn).layer.getBoundingClientRect();return[(t-s)/a,(e+n-r)/u]}set commentPopupPosition(t){C(this,Nl,t)}hasDefaultPopupPosition(){return d(this,Nl)===null}get commentButtonPosition(){return d(this,ia)}get commentButtonWidth(){return d(this,Ke).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=d(this,Nl)||this.commentButtonPosition.map(f=>f/100),s=this.parentBoundingClientRect,{x:r,y:a,width:u,height:h}=s;d(this,ns).showDialog(null,this,r+e*u,a+n*h,{...t,parentDimensions:s})}render(){var n,s;if(d(this,is))return;const t=C(this,is,document.createElement("div"));if(t.className="popup",d(this,af)){const r=t.style.outlineColor=ht.makeHexColor(...d(this,af));t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const e=document.createElement("span");if(e.className="header",(n=d(this,cf))!=null&&n.str){const r=document.createElement("span");r.className="title",e.append(r),{dir:r.dir,str:r.textContent}=d(this,cf)}if(t.append(e),d(this,Il)){const r=document.createElement("time");r.className="popupDate",r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:d(this,Il).valueOf()})),r.dateTime=d(this,Il).toISOString(),e.append(r)}h2({html:d(this,Ht,G0)||d(this,$o).str,dir:(s=d(this,$o))==null?void 0:s.dir,className:"popupContent"},t),d(this,$e).append(t)}updateEdited({rect:t,popup:e,deleted:n}){var s;if(d(this,ns)){n?(this.remove(),C(this,Ll,null)):e&&(e.deleted?this.remove():(D(this,Ht,i_).call(this),C(this,Ll,e.text))),t&&(C(this,ia,null),D(this,Ht,e_).call(this),D(this,Ht,n_).call(this));return}if(n||e!=null&&e.deleted){this.remove();return}D(this,Ht,H0).call(this),d(this,yc)||C(this,yc,{contentsObj:d(this,$o),richText:d(this,sa)}),t&&C(this,na,null),e&&e.text&&(C(this,sa,D(this,Ht,BU).call(this,e.text)),C(this,Il,bA.toDateObject(e.date)),C(this,$o,null)),(s=d(this,is))==null||s.remove(),C(this,is,null)}resetEdited(){var t;d(this,yc)&&({contentsObj:pn(this,$o)._,richText:pn(this,sa)._}=d(this,yc),C(this,yc,null),(t=d(this,is))==null||t.remove(),C(this,is,null),C(this,na,null))}remove(){var t,e,n;if((t=d(this,ea))==null||t.abort(),C(this,ea,null),(e=d(this,is))==null||e.remove(),C(this,is,null),C(this,Pl,!1),C(this,Ko,!1),(n=d(this,Ke))==null||n.remove(),C(this,Ke,null),this.trigger)for(const s of this.trigger)s.classList.remove("popupTriggerArea")}forceHide(){C(this,Pl,this.isVisible),d(this,Pl)&&(d(this,$e).hidden=!0)}maybeShow(){d(this,ns)||(D(this,Ht,H0).call(this),d(this,Pl)&&(d(this,is)||D(this,Ht,q0).call(this),C(this,Pl,!1),d(this,$e).hidden=!1))}get isVisible(){return d(this,ns)?!1:d(this,$e).hidden===!1}}ns=new WeakMap,Dl=new WeakMap,$A=new WeakMap,KA=new WeakMap,rf=new WeakMap,af=new WeakMap,$e=new WeakMap,$o=new WeakMap,Il=new WeakMap,gc=new WeakMap,lf=new WeakMap,uf=new WeakMap,Ko=new WeakMap,is=new WeakMap,ea=new WeakMap,na=new WeakMap,Ke=new WeakMap,ia=new WeakMap,Nl=new WeakMap,Jg=new WeakMap,sa=new WeakMap,cf=new WeakMap,yc=new WeakMap,Pl=new WeakMap,Cn=new WeakMap,Ll=new WeakMap,Ht=new WeakSet,H0=function(){var e;if(d(this,ea))return;C(this,ea,new AbortController);const{signal:t}=d(this,ea);for(const n of this.trigger)n.addEventListener("click",d(this,rf),{signal:t}),n.addEventListener("pointerenter",d(this,KA),{signal:t}),n.addEventListener("pointerleave",d(this,$A),{signal:t}),n.classList.add("popupTriggerArea");for(const n of d(this,gc))(e=n.container)==null||e.addEventListener("keydown",d(this,Dl),{signal:t})},e_=function(){const t=d(this,gc).find(e=>e.hasCommentButton);t&&C(this,ia,t._normalizePoint(t.commentButtonPosition))},n_=function(){if(d(this,Cn).extraPopupElement&&!d(this,Cn).editor)return;d(this,Ke)||this.renderCommentButton();const[t,e]=d(this,ia),{style:n}=d(this,Ke);n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`},i_=function(){d(this,Cn).extraPopupElement||(d(this,Ke)||this.renderCommentButton(),d(this,Ke).style.backgroundColor=this.commentButtonColor||"")},G0=function(){const t=d(this,sa),e=d(this,$o);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&d(this,sa).html||null},s_=function(){var t,e,n;return((n=(e=(t=d(this,Ht,G0))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},UU=function(){var t,e,n;return((n=(e=(t=d(this,Ht,G0))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},BU=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:d(this,Ht,UU),fontSize:d(this,Ht,s_)?`calc(${d(this,Ht,s_)}px * var(--total-scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:s});return n},FU=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&d(this,Ko))&&D(this,Ht,z0).call(this)},OU=function(){if(d(this,na)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:s,pageY:r}}}=d(this,lf);let a=!!d(this,uf),u=a?d(this,uf):d(this,Jg);for(const b of d(this,gc))if(!u||ht.intersect(b.data.rect,u)!==null){u=b.data.rect,a=!0;break}const h=ht.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),p=a?u[2]-u[0]+5:0,y=h[0]+p,v=h[1];C(this,na,[100*(y-s)/e,100*(v-r)/n]);const{style:E}=d(this,$e);E.left=`${d(this,na)[0]}%`,E.top=`${d(this,na)[1]}%`},z0=function(){if(d(this,ns)){d(this,ns).toggleCommentPopup(this,!1);return}C(this,Ko,!d(this,Ko)),d(this,Ko)?(D(this,Ht,q0).call(this),d(this,$e).addEventListener("click",d(this,rf)),d(this,$e).addEventListener("keydown",d(this,Dl))):(D(this,Ht,o_).call(this),d(this,$e).removeEventListener("click",d(this,rf)),d(this,$e).removeEventListener("keydown",d(this,Dl)))},q0=function(){d(this,is)||this.render(),this.isVisible?d(this,Ko)&&d(this,$e).classList.add("focused"):(D(this,Ht,OU).call(this),d(this,$e).hidden=!1,d(this,$e).style.zIndex=parseInt(d(this,$e).style.zIndex)+1e3)},o_=function(){d(this,$e).classList.remove("focused"),!(d(this,Ko)||!this.isVisible)&&(d(this,$e).hidden=!0,d(this,$e).style.zIndex=parseInt(d(this,$e).style.zIndex)-1e3)};class VU extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Ut.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Qg;class qK extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});R(this,Qg,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:s}=this,r=this.svgFactory.create(n,s,!0),a=C(this,Qg,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return d(this,Qg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Qg=new WeakMap;var Zg;class YK extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});R(this,Zg,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:s}=this,r=this.svgFactory.create(n,s,!0),a=e.borderStyle.width,u=C(this,Zg,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",a/2),u.setAttribute("y",a/2),u.setAttribute("width",n-a),u.setAttribute("height",s-a),u.setAttribute("stroke-width",a||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),r.append(u),this.container.append(r),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return d(this,Zg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zg=new WeakMap;var jg;class XK extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});R(this,jg,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:s}=this,r=this.svgFactory.create(n,s,!0),a=e.borderStyle.width,u=C(this,jg,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",n/2),u.setAttribute("cy",s/2),u.setAttribute("rx",n/2-a/2),u.setAttribute("ry",s/2-a/2),u.setAttribute("stroke-width",a||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),r.append(u),this.container.append(r),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return d(this,jg)}addHighlightArea(){this.container.classList.add("highlightArea")}}jg=new WeakMap;var ty;class HU extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});R(this,ty,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:s,popupRef:r},width:a,height:u}=this;if(!n)return this.container;const h=this.svgFactory.create(a,u,!0);let f=[];for(let y=0,v=n.length;y<v;y+=2){const E=n[y]-e[0],b=e[3]-n[y+1];f.push(`${E},${b}`)}f=f.join(" ");const p=C(this,ty,this.svgFactory.createElement(this.svgElementName));return p.setAttribute("points",f),p.setAttribute("stroke-width",s.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),h.append(p),this.container.append(h),!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return d(this,ty)}addHighlightArea(){this.container.classList.add("highlightArea")}}ty=new WeakMap;class $K extends HU{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class KK extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var ey,vc,ny,r_;class Iw extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});R(this,ny);R(this,ey,null);R(this,vc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ut.HIGHLIGHT:Ut.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:s,borderStyle:r,popupRef:a}}=this,{transform:u,width:h,height:f}=D(this,ny,r_).call(this,n,e),p=this.svgFactory.create(h,f,!0),y=C(this,ey,this.svgFactory.createElement("svg:g"));p.append(y),y.setAttribute("stroke-width",r.width||1),y.setAttribute("stroke-linecap","round"),y.setAttribute("stroke-linejoin","round"),y.setAttribute("stroke-miterlimit",10),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),y.setAttribute("transform",u);for(let v=0,E=s.length;v<E;v++){const b=this.svgFactory.createElement(this.svgElementName);d(this,vc).push(b),b.setAttribute("points",s[v].join(",")),y.append(b)}return!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(p),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:s,rect:r}=e,a=d(this,ey);if(n>=0&&a.setAttribute("stroke-width",n||1),s)for(let u=0,h=d(this,vc).length;u<h;u++)d(this,vc)[u].setAttribute("points",s[u].join(","));if(r){const{transform:u,width:h,height:f}=D(this,ny,r_).call(this,this.data.rotation,r);a.parentElement.setAttribute("viewBox",`0 0 ${h} ${f}`),a.setAttribute("transform",u)}}getElementsToTriggerPopup(){return d(this,vc)}addHighlightArea(){this.container.classList.add("highlightArea")}}ey=new WeakMap,vc=new WeakMap,ny=new WeakSet,r_=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class GU extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ut.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class WK extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class JK extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class QK extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class zU extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ut.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var iy,sy,a_;class ZK extends Ge{constructor(e){var s;super(e,{isRenderable:!0});R(this,sy);R(this,iy,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",D(this,sy,a_).bind(this)),C(this,iy,s);const{isMac:r}=Tn.platform;return e.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&D(this,sy,a_).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return d(this,iy)}addHighlightArea(){this.container.classList.add("highlightArea")}}iy=new WeakMap,sy=new WeakSet,a_=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Ac,Tc,df,kl,oy,Sc,ss,ry,pa,Y0,u_;const Ow=class Ow{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:s,page:r,viewport:a,structTreeLayer:u,commentManager:h,linkService:f,annotationStorage:p}){R(this,pa);R(this,Ac,null);R(this,Tc,null);R(this,df,null);R(this,kl,new Map);R(this,oy,null);R(this,Sc,null);R(this,ss,[]);R(this,ry,!1);this.div=t,C(this,Ac,e),C(this,Tc,n),C(this,oy,u||null),C(this,Sc,f||null),C(this,df,p||new xw),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=h||null}hasEditableAnnotations(){return d(this,kl).size>0}async render(t){var u;const{annotations:e}=t,n=this.div;Gc(n,this.viewport);const s=new Map,r=[],a={data:null,layer:n,linkService:d(this,Sc),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new IA,annotationStorage:d(this,df),enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const h of e){if(h.noHTML)continue;const f=h.annotationType===un.POPUP;if(f){const v=s.get(h.id);if(!v)continue;if(!this._commentManager){r.push(h);continue}a.elements=v}else if(h.rect[2]===h.rect[0]||h.rect[3]===h.rect[1])continue;a.data=h;const p=Tb.create(a);if(!p.isRenderable)continue;if(!f&&(d(this,ss).push(p),h.popupRef)){const v=s.get(h.popupRef);v?v.push(p):s.set(h.popupRef,[p])}const y=p.render();h.hidden&&(y.style.visibility="hidden"),p._isEditable&&(d(this,kl).set(p.data.id,p),(u=this._annotationEditorUIManager)==null||u.renderAnnotationElement(p))}await D(this,pa,Y0).call(this);for(const h of r){const f=a.elements=s.get(h.id);a.data=h;const p=Tb.create(a);if(!p.isRenderable)continue;const y=p.render();p.contentElement.id=`${Jd}${h.id}`,h.hidden&&(y.style.visibility="hidden"),f.at(-1).container.after(y)}D(this,pa,u_).call(this)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:d(this,Sc),svgFactory:new IA,parent:this};for(const n of t){n.borderStyle||(n.borderStyle=Ow._defaultBorderStyle),e.data=n;const s=Tb.create(e);s.isRenderable&&(s.render(),s.contentElement.id=`${Jd}${n.id}`,d(this,ss).push(s))}await D(this,pa,Y0).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Gc(e,{rotation:t.rotation}),D(this,pa,u_).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(d(this,kl).values())}getEditableAnnotation(t){return d(this,kl).get(t)}addFakeAnnotation(t){const{div:e}=this,{id:n,rotation:s}=t,r=new UK({data:{id:n,rect:t.getPDFRect(),rotation:s},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:d(this,Sc),annotationStorage:d(this,df)});return r.render(),r.contentElement.id=`${Jd}${n}`,r.createOrUpdatePopup(),d(this,ss).push(r),r}removeAnnotation(t){var s;const e=d(this,ss).findIndex(r=>r.data.id===t);if(e<0)return;const[n]=d(this,ss).splice(e,1);(s=d(this,Ac))==null||s.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);D(this,pa,Y0).call(this)}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return Nt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:kd.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Ac=new WeakMap,Tc=new WeakMap,df=new WeakMap,kl=new WeakMap,oy=new WeakMap,Sc=new WeakMap,ss=new WeakMap,ry=new WeakMap,pa=new WeakSet,Y0=async function(){var n,s,r;if(d(this,ss).length===0)return;this.div.replaceChildren();const t=[];if(!d(this,ry)){C(this,ry,!0);for(const{contentElement:a,data:{id:u}}of d(this,ss)){const h=a.id=`${Jd}${u}`;t.push((n=d(this,oy))==null?void 0:n.getAriaAttributes(h).then(f=>{if(f)for(const[p,y]of f)a.setAttribute(p,y)}))}}d(this,ss).sort(({data:{rect:[a,u,h,f]}},{data:{rect:[p,y,v,E]}})=>{if(a===h&&u===f)return 1;if(p===v&&y===E)return-1;const b=f,_=u,w=(u+f)/2,x=E,N=y,I=(y+E)/2;if(w>=x&&I<=_)return-1;if(I>=b&&w<=N)return 1;const L=(a+h)/2,U=(p+v)/2;return L-U});const e=document.createDocumentFragment();for(const a of d(this,ss))e.append(a.container),this._commentManager?(r=((s=a.extraPopupElement)==null?void 0:s.popup)||a.popup)==null||r.renderCommentButton():a.extraPopupElement&&e.append(a.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),d(this,Ac))for(const a of d(this,ss))d(this,Ac).addPointerInTextLayer(a.contentElement,!1)},u_=function(){var e;if(!d(this,Tc))return;const t=this.div;for(const[n,s]of d(this,Tc)){const r=t.querySelector(`[data-annotation-id="${n}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:a}=r;a?a.nodeName==="CANVAS"?a.replaceWith(s):a.classList.contains("annotationContent")?a.after(s):a.before(s):r.append(s);const u=d(this,kl).get(n);u&&(u._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(n,r.id,s),u._hasNoCanvas=!1):u.canvas=s)}d(this,Tc).clear()};let l_=Ow;const g0=/\r\n?|\n/g;var os,ay,Ec,rs,hn,qU,YU,XU,X0,ma,$0,K0,$U,d_,KU;const Pe=class Pe extends Re{constructor(e){super({...e,name:"freeTextEditor"});R(this,hn);R(this,os,"");R(this,ay,`${this.id}-editor`);R(this,Ec,null);R(this,rs);Z(this,"_colorPicker",null);this.color=e.color||Pe._defaultColor||Re._defaultLineColor,C(this,rs,e.fontSize||Pe._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const e=Pe.prototype,n=a=>a.isEmpty(),s=zc.TRANSLATE_SMALL,r=zc.TRANSLATE_BIG;return Nt(this,"_keyboardManager",new Py([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}]]))}static initialize(e,n){Re.initialize(e,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Jt.FREETEXT_SIZE:Pe._defaultFontSize=n;break;case Jt.FREETEXT_COLOR:Pe._defaultColor=n;break}}updateParams(e,n){switch(e){case Jt.FREETEXT_SIZE:D(this,hn,qU).call(this,n);break;case Jt.FREETEXT_COLOR:D(this,hn,YU).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Jt.FREETEXT_SIZE,Pe._defaultFontSize],[Jt.FREETEXT_COLOR,Pe._defaultColor||Re._defaultLineColor]]}get propertiesToUpdate(){return[[Jt.FREETEXT_SIZE,d(this,rs)],[Jt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new DA(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Jt.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Pe._internalPadding*e,-(Pe._internalPadding+d(this,rs))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),C(this,Ec,new AbortController);const e=this._uiManager.combinedSignal(d(this,Ec));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",d(this,ay)),this._isDraggable=!0,(e=d(this,Ec))==null||e.abort(),C(this,Ec,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=d(this,os),n=C(this,os,D(this,hn,XU).call(this).trimEnd());if(e===n)return;const s=r=>{if(C(this,os,r),!r){this.remove();return}D(this,hn,K0).call(this),this._uiManager.rebuild(this),D(this,hn,X0).call(this)};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(e)},mustExec:!1}),D(this,hn,X0).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Pe._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",d(this,ay)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${d(this,rs)}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[h,f]=this.getInitialTranslation();[h,f]=this.pageTranslationToScreen(h,f);const[p,y]=this.pageDimensions,[v,E]=this.pageTranslation;let b,_;switch(this.rotation){case 0:b=e+(u[0]-v)/p,_=n+this.height-(u[1]-E)/y;break;case 90:b=e+(u[0]-v)/p,_=n-(u[1]-E)/y,[h,f]=[f,-h];break;case 180:b=e-this.width+(u[0]-v)/p,_=n-(u[1]-E)/y,[h,f]=[-h,-f];break;case 270:b=e+(u[0]-v-this.height*y)/p,_=n+(u[1]-E-this.width*p)/y,[h,f]=[-f,h];break}this.setAt(b*r,_*a,h,f)}else this._moveAfterPaste(e,n);D(this,hn,K0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var b,_,w;const n=e.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const r=D(b=Pe,ma,d_).call(b,n.getData("text")||"").replaceAll(g0,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const u=a.getRangeAt(0);if(!r.includes(`
`)){u.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:h,startOffset:f}=u,p=[],y=[];if(h.nodeType===Node.TEXT_NODE){const x=h.parentElement;if(y.push(h.nodeValue.slice(f).replaceAll(g0,"")),x!==this.editorDiv){let N=p;for(const I of this.editorDiv.childNodes){if(I===x){N=y;continue}N.push(D(_=Pe,ma,$0).call(_,I))}}p.push(h.nodeValue.slice(0,f).replaceAll(g0,""))}else if(h===this.editorDiv){let x=p,N=0;for(const I of this.editorDiv.childNodes)N++===f&&(x=y),x.push(D(w=Pe,ma,$0).call(w,I))}C(this,os,`${p.join(`
`)}${r}${y.join(`
`)}`),D(this,hn,K0).call(this);const v=new Range;let E=Math.sumPrecise(p.map(x=>x.length));for(const{firstChild:x}of this.editorDiv.childNodes)if(x.nodeType===Node.TEXT_NODE){const N=x.nodeValue.length;if(E<=N){v.setStart(x,E),v.setEnd(x,E);break}E-=N}a.removeAllRanges(),a.addRange(v)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Pe._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,n,s){var u;let r=null;if(e instanceof VU){const{data:{defaultAppearanceData:{fontSize:h,fontColor:f},rect:p,rotation:y,id:v,popupRef:E,richText:b,contentsObj:_,creationDate:w,modificationDate:x},textContent:N,textPosition:I,parent:{page:{pageNumber:L}}}=e;if(!N||N.length===0)return null;r=e={annotationType:Ut.FREETEXT,color:Array.from(f),fontSize:h,value:N.join(`
`),position:I,pageIndex:L-1,rect:p.slice(0),rotation:y,annotationElementId:v,id:v,deleted:!1,popupRef:E,comment:(_==null?void 0:_.str)||null,richText:b,creationDate:w,modificationDate:x}}const a=await super.deserialize(e,n,s);return C(a,rs,e.fontSize),a.color=ht.makeHexColor(...e.color),C(a,os,D(u=Pe,ma,d_).call(u,e.value)),a._initialData=r,e.comment&&a.setCommentData(e),a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Re._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(e),{color:n,fontSize:d(this,rs),value:D(this,hn,$U).call(this)});return this.addComment(s),e?(s.isCopy=!0,s):this.annotationElementId&&!D(this,hn,KU).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(!n)return null;const{style:s}=n;s.fontSize=`calc(${d(this,rs)}px * var(--total-scale-factor))`,s.color=this.color,n.replaceChildren();for(const r of d(this,os).split(`
`)){const a=document.createElement("div");a.append(r?document.createTextNode(r):document.createElement("br")),n.append(a)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:d(this,os)}}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};os=new WeakMap,ay=new WeakMap,Ec=new WeakMap,rs=new WeakMap,hn=new WeakSet,qU=function(e){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-d(this,rs))*this.parentScale),C(this,rs,r),D(this,hn,X0).call(this)},s=d(this,rs);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Jt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},YU=function(e){const n=r=>{this.color=r,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Jt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},XU=function(){var s;const e=[];this.editorDiv.normalize();let n=null;for(const r of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(D(s=Pe,ma,$0).call(s,r)),n=r);return e.join(`
`)},X0=function(){const[e,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,u=a.style.display,h=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),s=a.getBoundingClientRect(),a.remove(),a.style.display=u,a.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/n):(this.width=s.height/e,this.height=s.width/n),this.fixAndSetPosition()},ma=new WeakSet,$0=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(g0,"")},K0=function(){if(this.editorDiv.replaceChildren(),!!d(this,os))for(const e of d(this,os).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},$U=function(){return d(this,os).replaceAll(""," ")},d_=function(e){return e.replaceAll(" ","")},KU=function(e){const{value:n,fontSize:s,color:r,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==n||e.fontSize!==s||e.color.some((u,h)=>u!==r[h])||e.pageIndex!==a},R(Pe,ma),Z(Pe,"_freeTextDefaultContent",""),Z(Pe,"_internalPadding",0),Z(Pe,"_defaultColor",null),Z(Pe,"_defaultFontSize",10),Z(Pe,"_type","freetext"),Z(Pe,"_editorType",Ut.FREETEXT);let c_=Pe;class gt{toSVGPath(){re("Abstract method `toSVGPath` must be implemented.")}get box(){re("Abstract getter `box` must be implemented.")}serialize(t,e){re("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,s,r,a){a||(a=new Float32Array(t.length));for(let u=0,h=t.length;u<h;u+=2)a[u]=e+t[u]*s,a[u+1]=n+t[u+1]*r;return a}static _rescaleAndSwap(t,e,n,s,r,a){a||(a=new Float32Array(t.length));for(let u=0,h=t.length;u<h;u+=2)a[u]=e+t[u+1]*s,a[u+1]=n+t[u]*r;return a}static _translate(t,e,n,s){s||(s=new Float32Array(t.length));for(let r=0,a=t.length;r<a;r+=2)s[r]=e+t[r],s[r+1]=n+t[r+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,s,r){switch(r){case 90:return[1-e/n,t/s];case 180:return[1-t/n,1-e/s];case 270:return[e/n,1-t/s];default:return[t/n,e/s]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,s,r,a){return[(t+5*n)/6,(e+5*s)/6,(5*n+r)/6,(5*s+a)/6,(n+r)/2,(s+a)/2]}}Z(gt,"PRECISION",1e-4);var as,fo,hf,ff,Wo,Gt,bc,Cc,ly,uy,pf,mf,Ul,cy,WA,JA,An,cm,WU,JU,QU,ZU,jU,tB;const Rr=class Rr{constructor({x:t,y:e},n,s,r,a,u=0){R(this,An);R(this,as);R(this,fo,[]);R(this,hf);R(this,ff);R(this,Wo,[]);R(this,Gt,new Float32Array(18));R(this,bc);R(this,Cc);R(this,ly);R(this,uy);R(this,pf);R(this,mf);R(this,Ul,[]);C(this,as,n),C(this,mf,r*s),C(this,ff,a),d(this,Gt).set([NaN,NaN,NaN,NaN,t,e],6),C(this,hf,u),C(this,uy,d(Rr,cy)*s),C(this,ly,d(Rr,JA)*s),C(this,pf,s),d(this,Ul).push(t,e)}isEmpty(){return isNaN(d(this,Gt)[8])}add({x:t,y:e}){var H;C(this,bc,t),C(this,Cc,e);const[n,s,r,a]=d(this,as);let[u,h,f,p]=d(this,Gt).subarray(8,12);const y=t-f,v=e-p,E=Math.hypot(y,v);if(E<d(this,ly))return!1;const b=E-d(this,uy),_=b/E,w=_*y,x=_*v;let N=u,I=h;u=f,h=p,f+=w,p+=x,(H=d(this,Ul))==null||H.push(t,e);const L=-x/b,U=w/b,k=L*d(this,mf),B=U*d(this,mf);return d(this,Gt).set(d(this,Gt).subarray(2,8),0),d(this,Gt).set([f+k,p+B],4),d(this,Gt).set(d(this,Gt).subarray(14,18),12),d(this,Gt).set([f-k,p-B],16),isNaN(d(this,Gt)[6])?(d(this,Wo).length===0&&(d(this,Gt).set([u+k,h+B],2),d(this,Wo).push(NaN,NaN,NaN,NaN,(u+k-n)/r,(h+B-s)/a),d(this,Gt).set([u-k,h-B],14),d(this,fo).push(NaN,NaN,NaN,NaN,(u-k-n)/r,(h-B-s)/a)),d(this,Gt).set([N,I,u,h,f,p],6),!this.isEmpty()):(d(this,Gt).set([N,I,u,h,f,p],6),Math.abs(Math.atan2(I-h,N-u)-Math.atan2(x,w))<Math.PI/2?([u,h,f,p]=d(this,Gt).subarray(2,6),d(this,Wo).push(NaN,NaN,NaN,NaN,((u+f)/2-n)/r,((h+p)/2-s)/a),[u,h,N,I]=d(this,Gt).subarray(14,18),d(this,fo).push(NaN,NaN,NaN,NaN,((N+u)/2-n)/r,((I+h)/2-s)/a),!0):([N,I,u,h,f,p]=d(this,Gt).subarray(0,6),d(this,Wo).push(((N+5*u)/6-n)/r,((I+5*h)/6-s)/a,((5*u+f)/6-n)/r,((5*h+p)/6-s)/a,((u+f)/2-n)/r,((h+p)/2-s)/a),[f,p,u,h,N,I]=d(this,Gt).subarray(12,18),d(this,fo).push(((N+5*u)/6-n)/r,((I+5*h)/6-s)/a,((5*u+f)/6-n)/r,((5*h+p)/6-s)/a,((u+f)/2-n)/r,((h+p)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const t=d(this,Wo),e=d(this,fo);if(isNaN(d(this,Gt)[6])&&!this.isEmpty())return D(this,An,WU).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);D(this,An,QU).call(this,n);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return D(this,An,JU).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,s,r,a){return new eB(t,e,n,s,r,a)}getOutlines(){var y;const t=d(this,Wo),e=d(this,fo),n=d(this,Gt),[s,r,a,u]=d(this,as),h=new Float32Array((((y=d(this,Ul))==null?void 0:y.length)??0)+2);for(let v=0,E=h.length-2;v<E;v+=2)h[v]=(d(this,Ul)[v]-s)/a,h[v+1]=(d(this,Ul)[v+1]-r)/u;if(h[h.length-2]=(d(this,bc)-s)/a,h[h.length-1]=(d(this,Cc)-r)/u,isNaN(n[6])&&!this.isEmpty())return D(this,An,ZU).call(this,h);const f=new Float32Array(d(this,Wo).length+24+d(this,fo).length);let p=t.length;for(let v=0;v<p;v+=2){if(isNaN(t[v])){f[v]=f[v+1]=NaN;continue}f[v]=t[v],f[v+1]=t[v+1]}p=D(this,An,tB).call(this,f,p);for(let v=e.length-6;v>=6;v-=6)for(let E=0;E<6;E+=2){if(isNaN(e[v+E])){f[p]=f[p+1]=NaN,p+=2;continue}f[p]=e[v+E],f[p+1]=e[v+E+1],p+=2}return D(this,An,jU).call(this,f,p),this.newFreeDrawOutline(f,h,d(this,as),d(this,pf),d(this,hf),d(this,ff))}};as=new WeakMap,fo=new WeakMap,hf=new WeakMap,ff=new WeakMap,Wo=new WeakMap,Gt=new WeakMap,bc=new WeakMap,Cc=new WeakMap,ly=new WeakMap,uy=new WeakMap,pf=new WeakMap,mf=new WeakMap,Ul=new WeakMap,cy=new WeakMap,WA=new WeakMap,JA=new WeakMap,An=new WeakSet,cm=function(){const t=d(this,Gt).subarray(4,6),e=d(this,Gt).subarray(16,18),[n,s,r,a]=d(this,as);return[(d(this,bc)+(t[0]-e[0])/2-n)/r,(d(this,Cc)+(t[1]-e[1])/2-s)/a,(d(this,bc)+(e[0]-t[0])/2-n)/r,(d(this,Cc)+(e[1]-t[1])/2-s)/a]},WU=function(){const[t,e,n,s]=d(this,as),[r,a,u,h]=D(this,An,cm).call(this);return`M${(d(this,Gt)[2]-t)/n} ${(d(this,Gt)[3]-e)/s} L${(d(this,Gt)[4]-t)/n} ${(d(this,Gt)[5]-e)/s} L${r} ${a} L${u} ${h} L${(d(this,Gt)[16]-t)/n} ${(d(this,Gt)[17]-e)/s} L${(d(this,Gt)[14]-t)/n} ${(d(this,Gt)[15]-e)/s} Z`},JU=function(t){const e=d(this,fo);t.push(`L${e[4]} ${e[5]} Z`)},QU=function(t){const[e,n,s,r]=d(this,as),a=d(this,Gt).subarray(4,6),u=d(this,Gt).subarray(16,18),[h,f,p,y]=D(this,An,cm).call(this);t.push(`L${(a[0]-e)/s} ${(a[1]-n)/r} L${h} ${f} L${p} ${y} L${(u[0]-e)/s} ${(u[1]-n)/r}`)},ZU=function(t){const e=d(this,Gt),[n,s,r,a]=d(this,as),[u,h,f,p]=D(this,An,cm).call(this),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(e[2]-n)/r,(e[3]-s)/a,NaN,NaN,NaN,NaN,(e[4]-n)/r,(e[5]-s)/a,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(e[16]-n)/r,(e[17]-s)/a,NaN,NaN,NaN,NaN,(e[14]-n)/r,(e[15]-s)/a],0),this.newFreeDrawOutline(y,t,d(this,as),d(this,pf),d(this,hf),d(this,ff))},jU=function(t,e){const n=d(this,fo);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},tB=function(t,e){const n=d(this,Gt).subarray(4,6),s=d(this,Gt).subarray(16,18),[r,a,u,h]=d(this,as),[f,p,y,v]=D(this,An,cm).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-r)/u,(n[1]-a)/h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,y,v,NaN,NaN,NaN,NaN,(s[0]-r)/u,(s[1]-a)/h],e),e+=24},R(Rr,cy,8),R(Rr,WA,2),R(Rr,JA,d(Rr,cy)+d(Rr,WA));let NA=Rr;var gf,_c,oa,dy,ls,hy,nn,QA,nB;class eB extends gt{constructor(e,n,s,r,a,u){super();R(this,QA);R(this,gf);R(this,_c,new Float32Array(4));R(this,oa);R(this,dy);R(this,ls);R(this,hy);R(this,nn);C(this,nn,e),C(this,ls,n),C(this,gf,s),C(this,hy,r),C(this,oa,a),C(this,dy,u),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],D(this,QA,nB).call(this,u);const[h,f,p,y]=d(this,_c);for(let v=0,E=e.length;v<E;v+=2)e[v]=(e[v]-h)/p,e[v+1]=(e[v+1]-f)/y;for(let v=0,E=n.length;v<E;v+=2)n[v]=(n[v]-h)/p,n[v+1]=(n[v+1]-f)/y}toSVGPath(){const e=[`M${d(this,nn)[4]} ${d(this,nn)[5]}`];for(let n=6,s=d(this,nn).length;n<s;n+=6){if(isNaN(d(this,nn)[n])){e.push(`L${d(this,nn)[n+4]} ${d(this,nn)[n+5]}`);continue}e.push(`C${d(this,nn)[n]} ${d(this,nn)[n+1]} ${d(this,nn)[n+2]} ${d(this,nn)[n+3]} ${d(this,nn)[n+4]} ${d(this,nn)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,s,r],a){const u=s-e,h=r-n;let f,p;switch(a){case 0:f=gt._rescale(d(this,nn),e,r,u,-h),p=gt._rescale(d(this,ls),e,r,u,-h);break;case 90:f=gt._rescaleAndSwap(d(this,nn),e,n,u,h),p=gt._rescaleAndSwap(d(this,ls),e,n,u,h);break;case 180:f=gt._rescale(d(this,nn),s,n,-u,h),p=gt._rescale(d(this,ls),s,n,-u,h);break;case 270:f=gt._rescaleAndSwap(d(this,nn),s,r,-u,-h),p=gt._rescaleAndSwap(d(this,ls),s,r,-u,-h);break}return{outline:Array.from(f),points:[Array.from(p)]}}get box(){return d(this,_c)}newOutliner(e,n,s,r,a,u=0){return new NA(e,n,s,r,a,u)}getNewOutline(e,n){const[s,r,a,u]=d(this,_c),[h,f,p,y]=d(this,gf),v=a*p,E=u*y,b=s*p+h,_=r*y+f,w=this.newOutliner({x:d(this,ls)[0]*v+b,y:d(this,ls)[1]*E+_},d(this,gf),d(this,hy),e,d(this,dy),n??d(this,oa));for(let x=2;x<d(this,ls).length;x+=2)w.add({x:d(this,ls)[x]*v+b,y:d(this,ls)[x+1]*E+_});return w.getOutlines()}}gf=new WeakMap,_c=new WeakMap,oa=new WeakMap,dy=new WeakMap,ls=new WeakMap,hy=new WeakMap,nn=new WeakMap,QA=new WeakSet,nB=function(e){const n=d(this,nn);let s=n[4],r=n[5];const a=[s,r,s,r];let u=s,h=r,f=s,p=r;const y=e?Math.max:Math.min,v=new Float32Array(4);for(let b=6,_=n.length;b<_;b+=6){const w=n[b+4],x=n[b+5];isNaN(n[b])?(ht.pointBoundingBox(w,x,a),h>x?(u=w,h=x):h===x&&(u=y(u,w)),p<x?(f=w,p=x):p===x&&(f=y(f,w))):(v[0]=v[1]=1/0,v[2]=v[3]=-1/0,ht.bezierBoundingBox(s,r,...n.slice(b,b+6),v),ht.rectBoundingBox(v[0],v[1],v[2],v[3],a),h>v[1]?(u=v[0],h=v[1]):h===v[1]&&(u=y(u,v[0])),p<v[3]?(f=v[2],p=v[3]):p===v[3]&&(f=y(f,v[2]))),s=w,r=x}const E=d(this,_c);E[0]=a[0]-d(this,oa),E[1]=a[1]-d(this,oa),E[2]=a[2]-a[0]+2*d(this,oa),E[3]=a[3]-a[1]+2*d(this,oa),this.firstPoint=[u,h],this.lastPoint=[f,p]};var fy,py,my,Bl,po,mi,iB,W0,sB,oB,f_;class h_{constructor(t,e=0,n=0,s=!0){R(this,mi);R(this,fy);R(this,py);R(this,my);R(this,Bl,[]);R(this,po,[]);const r=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:_,y:w,width:x,height:N}of t){const I=Math.floor((_-e)/a)*a,L=Math.ceil((_+x+e)/a)*a,U=Math.floor((w-e)/a)*a,k=Math.ceil((w+N+e)/a)*a,B=[I,U,k,!0],z=[L,U,k,!1];d(this,Bl).push(B,z),ht.rectBoundingBox(I,U,L,k,r)}const u=r[2]-r[0]+2*n,h=r[3]-r[1]+2*n,f=r[0]-n,p=r[1]-n;let y=s?-1/0:1/0,v=1/0;const E=d(this,Bl).at(s?-1:-2),b=[E[0],E[2]];for(const _ of d(this,Bl)){const[w,x,N,I]=_;!I&&s?x<v?(v=x,y=w):x===v&&(y=Math.max(y,w)):I&&!s&&(x<v?(v=x,y=w):x===v&&(y=Math.min(y,w))),_[0]=(w-f)/u,_[1]=(x-p)/h,_[2]=(N-p)/h}C(this,fy,new Float32Array([f,p,u,h])),C(this,py,[y,v]),C(this,my,b)}getOutlines(){d(this,Bl).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of d(this,Bl))e[3]?(t.push(...D(this,mi,f_).call(this,e)),D(this,mi,sB).call(this,e)):(D(this,mi,oB).call(this,e),t.push(...D(this,mi,f_).call(this,e)));return D(this,mi,iB).call(this,t)}}fy=new WeakMap,py=new WeakMap,my=new WeakMap,Bl=new WeakMap,po=new WeakMap,mi=new WeakSet,iB=function(t){const e=[],n=new Set;for(const a of t){const[u,h,f]=a;e.push([u,h,a],[u,f,a])}e.sort((a,u)=>a[1]-u[1]||a[0]-u[0]);for(let a=0,u=e.length;a<u;a+=2){const h=e[a][2],f=e[a+1][2];h.push(f),f.push(h),n.add(h),n.add(f)}const s=[];let r;for(;n.size>0;){const a=n.values().next().value;let[u,h,f,p,y]=a;n.delete(a);let v=u,E=h;for(r=[u,f],s.push(r);;){let b;if(n.has(p))b=p;else if(n.has(y))b=y;else break;n.delete(b),[u,h,f,p,y]=b,v!==u&&(r.push(v,E,u,E===h?h:f),v=u),E=E===h?f:h}r.push(v,E)}return new jK(s,d(this,fy),d(this,py),d(this,my))},W0=function(t){const e=d(this,po);let n=0,s=e.length-1;for(;n<=s;){const r=n+s>>1,a=e[r][0];if(a===t)return r;a<t?n=r+1:s=r-1}return s+1},sB=function([,t,e]){const n=D(this,mi,W0).call(this,t);d(this,po).splice(n,0,[t,e])},oB=function([,t,e]){const n=D(this,mi,W0).call(this,t);for(let s=n;s<d(this,po).length;s++){const[r,a]=d(this,po)[s];if(r!==t)break;if(r===t&&a===e){d(this,po).splice(s,1);return}}for(let s=n-1;s>=0;s--){const[r,a]=d(this,po)[s];if(r!==t)break;if(r===t&&a===e){d(this,po).splice(s,1);return}}},f_=function(t){const[e,n,s]=t,r=[[e,n,s]],a=D(this,mi,W0).call(this,s);for(let u=0;u<a;u++){const[h,f]=d(this,po)[u];for(let p=0,y=r.length;p<y;p++){const[,v,E]=r[p];if(!(f<=v||E<=h)){if(v>=h){if(E>f)r[p][1]=f;else{if(y===1)return[];r.splice(p,1),p--,y--}continue}r[p][2]=h,E>f&&r.push([e,f,E])}}}return r};var gy,yf;class jK extends gt{constructor(e,n,s,r){super();R(this,gy);R(this,yf);C(this,yf,e),C(this,gy,n),this.firstPoint=s,this.lastPoint=r}toSVGPath(){const e=[];for(const n of d(this,yf)){let[s,r]=n;e.push(`M${s} ${r}`);for(let a=2;a<n.length;a+=2){const u=n[a],h=n[a+1];u===s?(e.push(`V${h}`),r=h):h===r&&(e.push(`H${u}`),s=u)}e.push("Z")}return e.join(" ")}serialize([e,n,s,r],a){const u=[],h=s-e,f=r-n;for(const p of d(this,yf)){const y=new Array(p.length);for(let v=0;v<p.length;v+=2)y[v]=e+p[v]*h,y[v+1]=r-p[v+1]*f;u.push(y)}return u}get box(){return d(this,gy)}get classNamesForOutlining(){return["highlightOutline"]}}gy=new WeakMap,yf=new WeakMap;class p_ extends NA{newFreeDrawOutline(t,e,n,s,r,a){return new t7(t,e,n,s,r,a)}}class t7 extends eB{newOutliner(t,e,n,s,r,a=0){return new p_(t,e,n,s,r,a)}}var vf,yy,ra,wc,vy,Li,Ay,Ty,xc,us,cs,Hn,Af,Tf,ei,Sf,qs,Sy,Vt,m_,J0,rB,aB,lB,g_,bu,Xs,Hd,uB,Q0,Z0,cB,dB,hB,fB,pB;const se=class se extends Re{constructor(e){super({...e,name:"highlightEditor"});R(this,Vt);R(this,vf,null);R(this,yy,0);R(this,ra);R(this,wc,null);R(this,vy,null);R(this,Li,null);R(this,Ay,null);R(this,Ty,0);R(this,xc,null);R(this,us,null);R(this,cs,null);R(this,Hn,!1);R(this,Af,null);R(this,Tf,null);R(this,ei,null);R(this,Sf,"");R(this,qs);R(this,Sy,"");this.color=e.color||se._defaultColor,C(this,qs,e.thickness||se._defaultThickness),this.opacity=e.opacity||se._defaultOpacity,C(this,ra,e.boxes||null),C(this,Sy,e.methodOfCreation||""),C(this,Sf,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(C(this,Hn,!0),D(this,Vt,J0).call(this,e),D(this,Vt,bu).call(this)):d(this,ra)&&(C(this,vf,e.anchorNode),C(this,yy,e.anchorOffset),C(this,Ay,e.focusNode),C(this,Ty,e.focusOffset),D(this,Vt,m_).call(this),D(this,Vt,bu).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=se.prototype;return Nt(this,"_keyboardManager",new Py([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:d(this,Hn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:d(this,qs),methodOfCreation:d(this,Sy)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var s;Re.initialize(e,n),se._defaultColor||(se._defaultColor=((s=n.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case Jt.HIGHLIGHT_COLOR:se._defaultColor=n;break;case Jt.HIGHLIGHT_THICKNESS:se._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return d(this,Tf)}get commentButtonPosition(){return d(this,Af)}updateParams(e,n){switch(e){case Jt.HIGHLIGHT_COLOR:D(this,Vt,rB).call(this,n);break;case Jt.HIGHLIGHT_THICKNESS:D(this,Vt,aB).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Jt.HIGHLIGHT_COLOR,se._defaultColor],[Jt.HIGHLIGHT_THICKNESS,se._defaultThickness]]}get propertiesToUpdate(){return[[Jt.HIGHLIGHT_COLOR,this.color||se._defaultColor],[Jt.HIGHLIGHT_THICKNESS,d(this,qs)||se._defaultThickness],[Jt.HIGHLIGHT_FREE,d(this,Hn)]]}onUpdatedColor(){var e,n;(e=this.parent)==null||e.drawLayer.updateProperties(d(this,cs),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=d(this,vy))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",C(this,vy,new RA({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(D(this,Vt,Z0).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,D(this,Vt,Z0).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){D(this,Vt,g_).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(D(this,Vt,bu).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let n=!1;this.parent&&!e?D(this,Vt,g_).call(this):e&&(D(this,Vt,bu).call(this,e),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var r,a,u;const{drawLayer:n}=this.parent;let s;d(this,Hn)?(e=(e-this.rotation+360)%360,s=D(r=se,Xs,Hd).call(r,d(this,us).box,e)):s=D(a=se,Xs,Hd).call(a,[this.x,this.y,this.width,this.height],e),n.updateProperties(d(this,cs),{bbox:s,root:{"data-main-rotation":e}}),n.updateProperties(d(this,ei),{bbox:D(u=se,Xs,Hd).call(u,d(this,Li).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();d(this,Sf)&&(e.setAttribute("aria-label",d(this,Sf)),e.setAttribute("role","mark")),d(this,Hn)?e.classList.add("free"):this.div.addEventListener("keydown",D(this,Vt,uB).bind(this),{signal:this._uiManager._signal});const n=C(this,xc,document.createElement("div"));return e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=d(this,wc),this.setDims(),S2(this,d(this,xc),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(d(this,ei),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(d(this,ei),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:D(this,Vt,Q0).call(this,!0);break;case 1:case 3:D(this,Vt,Q0).call(this,!1);break}}select(){var e;super.select(),d(this,ei)&&((e=this.parent)==null||e.drawLayer.updateProperties(d(this,ei),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),d(this,ei)&&((e=this.parent)==null||e.drawLayer.updateProperties(d(this,ei),{rootClass:{selected:!1}}),d(this,Hn)||D(this,Vt,Q0).call(this,!1))}get _mustFixPosition(){return!d(this,Hn)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(d(this,cs),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(d(this,ei),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:s,x:r,y:a}){const{x:u,y:h,width:f,height:p}=s.getBoundingClientRect(),y=new AbortController,v=e.combinedSignal(y),E=b=>{y.abort(),D(this,Xs,fB).call(this,e,b)};window.addEventListener("blur",E,{signal:v}),window.addEventListener("pointerup",E,{signal:v}),window.addEventListener("pointerdown",Qe,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Qs,{signal:v}),s.addEventListener("pointermove",D(this,Xs,hB).bind(this,e),{signal:v}),this._freeHighlight=new p_({x:r,y:a},[u,h,f,p],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,s){var _,w,x,N;let r=null;if(e instanceof GU){const{data:{quadPoints:I,rect:L,rotation:U,id:k,color:B,opacity:z,popupRef:H,richText:j,contentsObj:et,creationDate:at,modificationDate:ft},parent:{page:{pageNumber:lt}}}=e;r=e={annotationType:Ut.HIGHLIGHT,color:Array.from(B),opacity:z,quadPoints:I,boxes:null,pageIndex:lt-1,rect:L.slice(0),rotation:U,annotationElementId:k,id:k,deleted:!1,popupRef:H,richText:j,comment:(et==null?void 0:et.str)||null,creationDate:at,modificationDate:ft}}else if(e instanceof Iw){const{data:{inkLists:I,rect:L,rotation:U,id:k,color:B,borderStyle:{rawWidth:z},popupRef:H,richText:j,contentsObj:et,creationDate:at,modificationDate:ft},parent:{page:{pageNumber:lt}}}=e;r=e={annotationType:Ut.HIGHLIGHT,color:Array.from(B),thickness:z,inkLists:I,boxes:null,pageIndex:lt-1,rect:L.slice(0),rotation:U,annotationElementId:k,id:k,deleted:!1,popupRef:H,richText:j,comment:(et==null?void 0:et.str)||null,creationDate:at,modificationDate:ft}}const{color:a,quadPoints:u,inkLists:h,opacity:f}=e,p=await super.deserialize(e,n,s);p.color=ht.makeHexColor(...a),p.opacity=f||1,h&&C(p,qs,e.thickness),p._initialData=r,e.comment&&p.setCommentData(e);const[y,v]=p.pageDimensions,[E,b]=p.pageTranslation;if(u){const I=C(p,ra,[]);for(let L=0;L<u.length;L+=8)I.push({x:(u[L]-E)/y,y:1-(u[L+1]-b)/v,width:(u[L+2]-u[L])/y,height:(u[L+1]-u[L+5])/v});D(_=p,Vt,m_).call(_),D(w=p,Vt,bu).call(w),p.rotate(p.rotation)}else if(h){C(p,Hn,!0);const I=h[0],L={x:I[0]-E,y:v-(I[1]-b)},U=new p_(L,[0,0,y,v],1,d(p,qs)/2,!0,.001);for(let z=0,H=I.length;z<H;z+=2)L.x=I[z]-E,L.y=v-(I[z+1]-b),U.add(L);const{id:k,clipPathId:B}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:p.color,"fill-opacity":p._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:U.toSVGPath()}},!0,!0);D(x=p,Vt,J0).call(x,{highlightOutlines:U.getOutlines(),highlightId:k,clipPathId:B}),D(N=p,Vt,bu).call(N),p.rotate(p.parentRotation)}return p}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=Re._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(e);return Object.assign(s,{color:n,opacity:this.opacity,thickness:d(this,qs),quadPoints:D(this,Vt,cB).call(this),outlines:D(this,Vt,dB).call(this,s.rect)}),this.addComment(s),this.annotationElementId&&!D(this,Vt,pB).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};vf=new WeakMap,yy=new WeakMap,ra=new WeakMap,wc=new WeakMap,vy=new WeakMap,Li=new WeakMap,Ay=new WeakMap,Ty=new WeakMap,xc=new WeakMap,us=new WeakMap,cs=new WeakMap,Hn=new WeakMap,Af=new WeakMap,Tf=new WeakMap,ei=new WeakMap,Sf=new WeakMap,qs=new WeakMap,Sy=new WeakMap,Vt=new WeakSet,m_=function(){const e=new h_(d(this,ra),.001);C(this,us,e.getOutlines()),[this.x,this.y,this.width,this.height]=d(this,us).box;const n=new h_(d(this,ra),.0025,.001,this._uiManager.direction==="ltr");C(this,Li,n.getOutlines());const{firstPoint:s}=d(this,us);C(this,Af,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]);const{lastPoint:r}=d(this,Li);C(this,Tf,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},J0=function({highlightOutlines:e,highlightId:n,clipPathId:s}){var v,E;if(C(this,us,e),C(this,Li,e.getNewOutline(d(this,qs)/2+1.5,.0025)),n>=0)C(this,cs,n),C(this,wc,s),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),C(this,ei,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:d(this,Li).box,path:{d:d(this,Li).toSVGPath()}},!0));else if(this.parent){const b=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(d(this,cs),{bbox:D(v=se,Xs,Hd).call(v,d(this,us).box,(b-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(d(this,ei),{bbox:D(E=se,Xs,Hd).call(E,d(this,Li).box,b),path:{d:d(this,Li).toSVGPath()}})}const[a,u,h,f]=e.box;switch(this.rotation){case 0:this.x=a,this.y=u,this.width=h,this.height=f;break;case 90:{const[b,_]=this.parentDimensions;this.x=u,this.y=1-a,this.width=h*_/b,this.height=f*b/_;break}case 180:this.x=1-a,this.y=1-u,this.width=h,this.height=f;break;case 270:{const[b,_]=this.parentDimensions;this.x=1-u,this.y=a,this.width=h*_/b,this.height=f*b/_;break}}const{firstPoint:p}=e;C(this,Af,[(p[0]-a)/h,(p[1]-u)/f]);const{lastPoint:y}=d(this,Li);C(this,Tf,[(y[0]-a)/h,(y[1]-u)/f])},rB=function(e){const n=(a,u)=>{this.color=a,this.opacity=u,this.onUpdatedColor()},s=this.color,r=this.opacity;this.addCommands({cmd:n.bind(this,e,se._defaultOpacity),undo:n.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Jt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},aB=function(e){const n=d(this,qs),s=r=>{C(this,qs,r),D(this,Vt,lB).call(this,r)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Jt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},lB=function(e){d(this,Hn)&&(D(this,Vt,J0).call(this,{highlightOutlines:d(this,us).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())},g_=function(){d(this,cs)===null||!this.parent||(this.parent.drawLayer.remove(d(this,cs)),C(this,cs,null),this.parent.drawLayer.remove(d(this,ei)),C(this,ei,null))},bu=function(e=this.parent){d(this,cs)===null&&({id:pn(this,cs)._,clipPathId:pn(this,wc)._}=e.drawLayer.draw({bbox:d(this,us).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:d(this,Hn)},path:{d:d(this,us).toSVGPath()}},!1,!0),C(this,ei,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:d(this,Hn)},bbox:d(this,Li).box,path:{d:d(this,Li).toSVGPath()}},d(this,Hn))),d(this,xc)&&(d(this,xc).style.clipPath=d(this,wc)))},Xs=new WeakSet,Hd=function([e,n,s,r],a){switch(a){case 90:return[1-n-r,e,r,s];case 180:return[1-e-s,1-n-r,s,r];case 270:return[n,1-e-s,r,s]}return[e,n,s,r]},uB=function(e){se._keyboardManager.exec(this,e)},Q0=function(e){if(!d(this,vf))return;const n=window.getSelection();e?n.setPosition(d(this,vf),d(this,yy)):n.setPosition(d(this,Ay),d(this,Ty))},Z0=function(){return d(this,Hn)?this.rotation:0},cB=function(){if(d(this,Hn))return null;const[e,n]=this.pageDimensions,[s,r]=this.pageTranslation,a=d(this,ra),u=new Float32Array(a.length*8);let h=0;for(const{x:f,y:p,width:y,height:v}of a){const E=f*e+s,b=(1-p)*n+r;u[h]=u[h+4]=E,u[h+1]=u[h+3]=b,u[h+2]=u[h+6]=E+y*e,u[h+5]=u[h+7]=b-v*n,h+=8}return u},dB=function(e){return d(this,us).serialize(e,D(this,Vt,Z0).call(this))},hB=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},fB=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},pB=function(e){const{color:n}=this._initialData;return this.hasEditedComment||e.color.some((s,r)=>s!==n[r])},R(se,Xs),Z(se,"_defaultColor",null),Z(se,"_defaultOpacity",1),Z(se,"_defaultThickness",12),Z(se,"_type","highlight"),Z(se,"_editorType",Ut.HIGHLIGHT),Z(se,"_freeHighlightId",-1),Z(se,"_freeHighlight",null),Z(se,"_freeHighlightClipId","");let PA=se;var Mc;class mB{constructor(){R(this,Mc,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){d(this,Mc)[t]=e}toSVGProperties(){const t=d(this,Mc);return C(this,Mc,Object.create(null)),{root:t}}reset(){C(this,Mc,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){re("Not implemented")}}Mc=new WeakMap;var ds,Ef,_n,Rc,Dc,Zt,y_,v_,A_,dm,gB,j0,hm,Gd;const $t=class $t extends Re{constructor(e){super(e);R(this,Zt);R(this,ds,null);R(this,Ef);Z(this,"_colorPicker",null);Z(this,"_drawId",null);C(this,Ef,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(D(this,Zt,y_).call(this,e),D(this,Zt,dm).call(this))}static _mergeSVGProperties(e,n){const s=new Set(Object.keys(e));for(const[r,a]of Object.entries(n))s.has(r)?Object.assign(e[r],a):e[r]=a;return e}static getDefaultDrawingOptions(e){re("Not implemented")}static get typesMap(){re("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,n),this._currentParent&&(d($t,_n).updateProperty(s,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)e.push([s,n[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[s,r]of this.constructor.typesMap)e.push([s,n[r]]);return e}_updateProperty(e,n,s){const r=this._drawingOptions,a=r[n],u=h=>{var p;r.updateProperty(n,h);const f=d(this,ds).updateProperty(n,h);f&&D(this,Zt,hm).call(this,f),(p=this.parent)==null||p.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:u.bind(this,s),undo:u.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,$t._mergeSVGProperties(d(this,ds).getPathResizingSVGProperties(D(this,Zt,j0).call(this)),{bbox:D(this,Zt,Gd).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,$t._mergeSVGProperties(d(this,ds).getPathResizedSVGProperties(D(this,Zt,j0).call(this)),{bbox:D(this,Zt,Gd).call(this)}))}_onTranslating(e,n){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:D(this,Zt,Gd).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,$t._mergeSVGProperties(d(this,ds).getPathTranslatedSVGProperties(D(this,Zt,j0).call(this),this.parentDimensions),{bbox:D(this,Zt,Gd).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,d(this,Ef)&&(C(this,Ef,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){D(this,Zt,A_).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(D(this,Zt,dm).call(this),D(this,Zt,hm).call(this,d(this,ds).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),D(this,Zt,A_).call(this)):e&&(this._uiManager.addShouldRescale(this),D(this,Zt,dm).call(this,e),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,$t._mergeSVGProperties({bbox:D(this,Zt,Gd).call(this)},d(this,ds).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&D(this,Zt,hm).call(this,d(this,ds).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");return s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),s}static createDrawerInstance(e,n,s,r,a){re("Not implemented")}static startDrawing(e,n,s,r){var w;const{target:a,offsetX:u,offsetY:h,pointerId:f,pointerType:p}=r;if(Jn.isInitializedAndDifferentPointerType(p))return;const{viewport:{rotation:y}}=e,{width:v,height:E}=a.getBoundingClientRect(),b=C($t,Rc,new AbortController),_=e.combinedSignal(b);if(Jn.setPointer(p,f),window.addEventListener("pointerup",x=>{Jn.isSamePointerIdOrRemove(x.pointerId)&&this._endDraw(x)},{signal:_}),window.addEventListener("pointercancel",x=>{Jn.isSamePointerIdOrRemove(x.pointerId)&&this._currentParent.endDrawingSession()},{signal:_}),window.addEventListener("pointerdown",x=>{Jn.isSamePointerType(x.pointerType)&&(Jn.initializeAndAddPointerId(x.pointerId),d($t,_n).isCancellable()&&(d($t,_n).removeLastElement(),d($t,_n).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:_}),window.addEventListener("contextmenu",Qs,{signal:_}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:_}),a.addEventListener("touchmove",x=>{Jn.isSameTimeStamp(x.timeStamp)&&Qe(x)},{signal:_}),e.toggleDrawing(),(w=n._editorUndoBar)==null||w.hide(),d($t,_n)){e.drawLayer.updateProperties(this._currentDrawId,d($t,_n).startNew(u,h,v,E,y));return}n.updateUIForDefaultProperties(this),C($t,_n,this.createDrawerInstance(u,h,v,E,y)),C($t,Dc,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(d($t,Dc).toSVGProperties(),d($t,_n).defaultSVGProperties),!0,!1)}static _drawMove(e){if(Jn.isSameTimeStamp(e.timeStamp),!d($t,_n))return;const{offsetX:n,offsetY:s,pointerId:r}=e;if(Jn.isSamePointerId(r)){if(Jn.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,d($t,_n).add(n,s)),Jn.setTimeStamp(e.timeStamp),Qe(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,C($t,_n,null),C($t,Dc,null),Jn.clearTimeStamp()),d($t,Rc)&&(d($t,Rc).abort(),C($t,Rc,null),Jn.clearPointerIds())}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,d($t,_n).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=d($t,_n),r=this._currentDrawId,a=s.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(r,s.setLastElement(a))},undo:()=>{n.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:Jt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Jt.DRAW_STEP),!d($t,_n).isEmpty()){const{pageDimensions:[s,r],scale:a}=n,u=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:d($t,_n).getOutlines(s*a,r*a,a,this._INNER_MARGIN),drawingOptions:d($t,Dc),mustBeCommitted:!e});return this._cleanup(!0),u}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,s,r,a,u){re("Not implemented")}static async deserialize(e,n,s){var y,v;const{rawDims:{pageWidth:r,pageHeight:a,pageX:u,pageY:h}}=n.viewport,f=this.deserializeDraw(u,h,r,a,this._INNER_MARGIN,e),p=await super.deserialize(e,n,s);return p.createDrawingOptions(e),D(y=p,Zt,y_).call(y,{drawOutlines:f}),D(v=p,Zt,dm).call(v),p.onScaleChanging(),p.rotate(),p}serializeDraw(e){const[n,s]=this.pageTranslation,[r,a]=this.pageDimensions;return d(this,ds).serialize([n,s,r,a],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};ds=new WeakMap,Ef=new WeakMap,_n=new WeakMap,Rc=new WeakMap,Dc=new WeakMap,Zt=new WeakSet,y_=function({drawOutlines:e,drawId:n,drawingOptions:s}){C(this,ds,e),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=D(this,Zt,v_).call(this,e,this.parent),D(this,Zt,hm).call(this,e.box)},v_=function(e,n){const{id:s}=n.drawLayer.draw($t._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s},A_=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},dm=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=D(this,Zt,v_).call(this,d(this,ds),e)}},gB=function([e,n,s,r]){const{parentDimensions:[a,u],rotation:h}=this;switch(h){case 90:return[n,1-e,s*(u/a),r*(a/u)];case 180:return[1-e,1-n,s,r];case 270:return[1-n,e,s*(u/a),r*(a/u)];default:return[e,n,s,r]}},j0=function(){const{x:e,y:n,width:s,height:r,parentDimensions:[a,u],rotation:h}=this;switch(h){case 90:return[1-n,e,s*(a/u),r*(u/a)];case 180:return[1-e,1-n,s,r];case 270:return[n,1-e,s*(a/u),r*(u/a)];default:return[e,n,s,r]}},hm=function(e){[this.x,this.y,this.width,this.height]=D(this,Zt,gB).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Gd=function(){const{x:e,y:n,width:s,height:r,rotation:a,parentRotation:u,parentDimensions:[h,f]}=this;switch((a*4+u)/90){case 1:return[1-n-r,e,r,s];case 2:return[1-e-s,1-n-r,s,r];case 3:return[n,1-e-s,r,s];case 4:return[e,n-s*(h/f),r*(f/h),s*(h/f)];case 5:return[1-n,e,s*(h/f),r*(f/h)];case 6:return[1-e-r*(f/h),1-n,r*(f/h),s*(h/f)];case 7:return[n-s*(h/f),1-e-r*(f/h),s*(h/f),r*(f/h)];case 8:return[e-s,n-r,s,r];case 9:return[1-n,e-s,r,s];case 10:return[1-e,1-n,s,r];case 11:return[n-r,1-e,r,s];case 12:return[e-r*(f/h),n,r*(f/h),s*(h/f)];case 13:return[1-n-s*(h/f),e-r*(f/h),s*(h/f),r*(f/h)];case 14:return[1-e,1-n-s*(h/f),r*(f/h),s*(h/f)];case 15:return[n,1-e,s*(h/f),r*(f/h)];default:return[e,n,s,r]}},Z($t,"_currentDrawId",-1),Z($t,"_currentParent",null),R($t,_n,null),R($t,Rc,null),R($t,Dc,null),Z($t,"_INNER_MARGIN",3);let LA=$t;var Jo,wn,xn,Ic,bf,ri,Gn,Ys,Nc,Pc,Lc,Cf,tA;class e7{constructor(t,e,n,s,r,a){R(this,Cf);R(this,Jo,new Float64Array(6));R(this,wn);R(this,xn);R(this,Ic);R(this,bf);R(this,ri);R(this,Gn,"");R(this,Ys,0);R(this,Nc,new Ly);R(this,Pc);R(this,Lc);C(this,Pc,n),C(this,Lc,s),C(this,Ic,r),C(this,bf,a),[t,e]=D(this,Cf,tA).call(this,t,e);const u=C(this,wn,[NaN,NaN,NaN,NaN,t,e]);C(this,ri,[t,e]),C(this,xn,[{line:u,points:d(this,ri)}]),d(this,Jo).set(u,0)}updateProperty(t,e){t==="stroke-width"&&C(this,bf,e)}isEmpty(){return!d(this,xn)||d(this,xn).length===0}isCancellable(){return d(this,ri).length<=10}add(t,e){[t,e]=D(this,Cf,tA).call(this,t,e);const[n,s,r,a]=d(this,Jo).subarray(2,6),u=t-r,h=e-a;return Math.hypot(d(this,Pc)*u,d(this,Lc)*h)<=2?null:(d(this,ri).push(t,e),isNaN(n)?(d(this,Jo).set([r,a,t,e],2),d(this,wn).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(d(this,Jo)[0])&&d(this,wn).splice(6,6),d(this,Jo).set([n,s,r,a,t,e],0),d(this,wn).push(...gt.createBezierPoints(n,s,r,a,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(d(this,ri).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,s,r){C(this,Pc,n),C(this,Lc,s),C(this,Ic,r),[t,e]=D(this,Cf,tA).call(this,t,e);const a=C(this,wn,[NaN,NaN,NaN,NaN,t,e]);C(this,ri,[t,e]);const u=d(this,xn).at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),d(this,xn).push({line:a,points:d(this,ri)}),d(this,Jo).set(a,0),C(this,Ys,0),this.toSVGPath(),null}getLastElement(){return d(this,xn).at(-1)}setLastElement(t){return d(this,xn)?(d(this,xn).push(t),C(this,wn,t.line),C(this,ri,t.points),C(this,Ys,0),{path:{d:this.toSVGPath()}}):d(this,Nc).setLastElement(t)}removeLastElement(){if(!d(this,xn))return d(this,Nc).removeLastElement();d(this,xn).pop(),C(this,Gn,"");for(let t=0,e=d(this,xn).length;t<e;t++){const{line:n,points:s}=d(this,xn)[t];C(this,wn,n),C(this,ri,s),C(this,Ys,0),this.toSVGPath()}return{path:{d:d(this,Gn)}}}toSVGPath(){const t=gt.svgRound(d(this,wn)[4]),e=gt.svgRound(d(this,wn)[5]);if(d(this,ri).length===2)return C(this,Gn,`${d(this,Gn)} M ${t} ${e} Z`),d(this,Gn);if(d(this,ri).length<=6){const s=d(this,Gn).lastIndexOf("M");C(this,Gn,`${d(this,Gn).slice(0,s)} M ${t} ${e}`),C(this,Ys,6)}if(d(this,ri).length===4){const s=gt.svgRound(d(this,wn)[10]),r=gt.svgRound(d(this,wn)[11]);return C(this,Gn,`${d(this,Gn)} L ${s} ${r}`),C(this,Ys,12),d(this,Gn)}const n=[];d(this,Ys)===0&&(n.push(`M ${t} ${e}`),C(this,Ys,6));for(let s=d(this,Ys),r=d(this,wn).length;s<r;s+=6){const[a,u,h,f,p,y]=d(this,wn).slice(s,s+6).map(gt.svgRound);n.push(`C${a} ${u} ${h} ${f} ${p} ${y}`)}return C(this,Gn,d(this,Gn)+n.join(" ")),C(this,Ys,d(this,wn).length),d(this,Gn)}getOutlines(t,e,n,s){const r=d(this,xn).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),d(this,Nc).build(d(this,xn),t,e,n,d(this,Ic),d(this,bf),s),C(this,Jo,null),C(this,wn,null),C(this,xn,null),C(this,Gn,null),d(this,Nc)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Jo=new WeakMap,wn=new WeakMap,xn=new WeakMap,Ic=new WeakMap,bf=new WeakMap,ri=new WeakMap,Gn=new WeakMap,Ys=new WeakMap,Nc=new WeakMap,Pc=new WeakMap,Lc=new WeakMap,Cf=new WeakSet,tA=function(t,e){return gt._normalizePoint(t,e,d(this,Pc),d(this,Lc),d(this,Ic))};var ai,Ey,by,hs,Qo,Zo,_f,wf,kc,Xn,xr,yB,vB,AB;class Ly extends gt{constructor(){super(...arguments);R(this,Xn);R(this,ai);R(this,Ey,0);R(this,by);R(this,hs);R(this,Qo);R(this,Zo);R(this,_f);R(this,wf);R(this,kc)}build(e,n,s,r,a,u,h){C(this,Qo,n),C(this,Zo,s),C(this,_f,r),C(this,wf,a),C(this,kc,u),C(this,by,h??0),C(this,hs,e),D(this,Xn,vB).call(this)}get thickness(){return d(this,kc)}setLastElement(e){return d(this,hs).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return d(this,hs).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of d(this,hs)){if(e.push(`M${gt.svgRound(n[4])} ${gt.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${gt.svgRound(n[10])} ${gt.svgRound(n[11])}`);continue}for(let s=6,r=n.length;s<r;s+=6){const[a,u,h,f,p,y]=n.subarray(s,s+6).map(gt.svgRound);e.push(`C${a} ${u} ${h} ${f} ${p} ${y}`)}}return e.join("")}serialize([e,n,s,r],a){const u=[],h=[],[f,p,y,v]=D(this,Xn,yB).call(this);let E,b,_,w,x,N,I,L,U;switch(d(this,wf)){case 0:U=gt._rescale,E=e,b=n+r,_=s,w=-r,x=e+f*s,N=n+(1-p-v)*r,I=e+(f+y)*s,L=n+(1-p)*r;break;case 90:U=gt._rescaleAndSwap,E=e,b=n,_=s,w=r,x=e+p*s,N=n+f*r,I=e+(p+v)*s,L=n+(f+y)*r;break;case 180:U=gt._rescale,E=e+s,b=n,_=-s,w=r,x=e+(1-f-y)*s,N=n+p*r,I=e+(1-f)*s,L=n+(p+v)*r;break;case 270:U=gt._rescaleAndSwap,E=e+s,b=n+r,_=-s,w=-r,x=e+(1-p-v)*s,N=n+(1-f-y)*r,I=e+(1-p)*s,L=n+(1-f)*r;break}for(const{line:k,points:B}of d(this,hs))u.push(U(k,E,b,_,w,a?new Array(k.length):null)),h.push(U(B,E,b,_,w,a?new Array(B.length):null));return{lines:u,points:h,rect:[x,N,I,L]}}static deserialize(e,n,s,r,a,{paths:{lines:u,points:h},rotation:f,thickness:p}){const y=[];let v,E,b,_,w;switch(f){case 0:w=gt._rescale,v=-e/s,E=n/r+1,b=1/s,_=-1/r;break;case 90:w=gt._rescaleAndSwap,v=-n/r,E=-e/s,b=1/r,_=1/s;break;case 180:w=gt._rescale,v=e/s+1,E=-n/r,b=-1/s,_=1/r;break;case 270:w=gt._rescaleAndSwap,v=n/r+1,E=e/s+1,b=-1/r,_=-1/s;break}if(!u){u=[];for(const N of h){const I=N.length;if(I===2){u.push(new Float32Array([NaN,NaN,NaN,NaN,N[0],N[1]]));continue}if(I===4){u.push(new Float32Array([NaN,NaN,NaN,NaN,N[0],N[1],NaN,NaN,NaN,NaN,N[2],N[3]]));continue}const L=new Float32Array(3*(I-2));u.push(L);let[U,k,B,z]=N.subarray(0,4);L.set([NaN,NaN,NaN,NaN,U,k],0);for(let H=4;H<I;H+=2){const j=N[H],et=N[H+1];L.set(gt.createBezierPoints(U,k,B,z,j,et),(H-2)*3),[U,k,B,z]=[B,z,j,et]}}}for(let N=0,I=u.length;N<I;N++)y.push({line:w(u[N].map(L=>L??NaN),v,E,b,_),points:w(h[N].map(L=>L??NaN),v,E,b,_)});const x=new this.prototype.constructor;return x.build(y,s,r,1,f,p,a),x}get box(){return d(this,ai)}updateProperty(e,n){return e==="stroke-width"?D(this,Xn,AB).call(this,n):null}updateParentDimensions([e,n],s){const[r,a]=D(this,Xn,xr).call(this);C(this,Qo,e),C(this,Zo,n),C(this,_f,s);const[u,h]=D(this,Xn,xr).call(this),f=u-r,p=h-a,y=d(this,ai);return y[0]-=f,y[1]-=p,y[2]+=2*f,y[3]+=2*p,y}updateRotation(e){return C(this,Ey,e),{path:{transform:this.rotationTransform}}}get viewBox(){return d(this,ai).map(gt.svgRound).join(" ")}get defaultProperties(){const[e,n]=d(this,ai);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${gt.svgRound(e)} ${gt.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=d(this,ai);let s=0,r=0,a=0,u=0,h=0,f=0;switch(d(this,Ey)){case 90:r=n/e,a=-e/n,h=e;break;case 180:s=-1,u=-1,h=e,f=n;break;case 270:r=-n/e,a=e/n,f=n;break;default:return""}return`matrix(${s} ${r} ${a} ${u} ${gt.svgRound(h)} ${gt.svgRound(f)})`}getPathResizingSVGProperties([e,n,s,r]){const[a,u]=D(this,Xn,xr).call(this),[h,f,p,y]=d(this,ai);if(Math.abs(p-a)<=gt.PRECISION||Math.abs(y-u)<=gt.PRECISION){const w=e+s/2-(h+p/2),x=n+r/2-(f+y/2);return{path:{"transform-origin":`${gt.svgRound(e)} ${gt.svgRound(n)}`,transform:`${this.rotationTransform} translate(${w} ${x})`}}}const v=(s-2*a)/(p-2*a),E=(r-2*u)/(y-2*u),b=p/s,_=y/r;return{path:{"transform-origin":`${gt.svgRound(h)} ${gt.svgRound(f)}`,transform:`${this.rotationTransform} scale(${b} ${_}) translate(${gt.svgRound(a)} ${gt.svgRound(u)}) scale(${v} ${E}) translate(${gt.svgRound(-a)} ${gt.svgRound(-u)})`}}}getPathResizedSVGProperties([e,n,s,r]){const[a,u]=D(this,Xn,xr).call(this),h=d(this,ai),[f,p,y,v]=h;if(h[0]=e,h[1]=n,h[2]=s,h[3]=r,Math.abs(y-a)<=gt.PRECISION||Math.abs(v-u)<=gt.PRECISION){const x=e+s/2-(f+y/2),N=n+r/2-(p+v/2);for(const{line:I,points:L}of d(this,hs))gt._translate(I,x,N,I),gt._translate(L,x,N,L);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${gt.svgRound(e)} ${gt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const E=(s-2*a)/(y-2*a),b=(r-2*u)/(v-2*u),_=-E*(f+a)+e+a,w=-b*(p+u)+n+u;if(E!==1||b!==1||_!==0||w!==0)for(const{line:x,points:N}of d(this,hs))gt._rescale(x,_,w,E,b,x),gt._rescale(N,_,w,E,b,N);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${gt.svgRound(e)} ${gt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],s){const[r,a]=s,u=d(this,ai),h=e-u[0],f=n-u[1];if(d(this,Qo)===r&&d(this,Zo)===a)for(const{line:p,points:y}of d(this,hs))gt._translate(p,h,f,p),gt._translate(y,h,f,y);else{const p=d(this,Qo)/r,y=d(this,Zo)/a;C(this,Qo,r),C(this,Zo,a);for(const{line:v,points:E}of d(this,hs))gt._rescale(v,h,f,p,y,v),gt._rescale(E,h,f,p,y,E);u[2]*=p,u[3]*=y}return u[0]=e,u[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${gt.svgRound(e)} ${gt.svgRound(n)}`}}}get defaultSVGProperties(){const e=d(this,ai);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${gt.svgRound(e[0])} ${gt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}ai=new WeakMap,Ey=new WeakMap,by=new WeakMap,hs=new WeakMap,Qo=new WeakMap,Zo=new WeakMap,_f=new WeakMap,wf=new WeakMap,kc=new WeakMap,Xn=new WeakSet,xr=function(e=d(this,kc)){const n=d(this,by)+e/2*d(this,_f);return d(this,wf)%180===0?[n/d(this,Qo),n/d(this,Zo)]:[n/d(this,Zo),n/d(this,Qo)]},yB=function(){const[e,n,s,r]=d(this,ai),[a,u]=D(this,Xn,xr).call(this,0);return[e+a,n+u,s-2*a,r-2*u]},vB=function(){const e=C(this,ai,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of d(this,hs)){if(r.length<=12){for(let h=4,f=r.length;h<f;h+=6)ht.pointBoundingBox(r[h],r[h+1],e);continue}let a=r[4],u=r[5];for(let h=6,f=r.length;h<f;h+=6){const[p,y,v,E,b,_]=r.subarray(h,h+6);ht.bezierBoundingBox(a,u,p,y,v,E,b,_,e),a=b,u=_}}const[n,s]=D(this,Xn,xr).call(this);e[0]=qn(e[0]-n,0,1),e[1]=qn(e[1]-s,0,1),e[2]=qn(e[2]+n,0,1),e[3]=qn(e[3]+s,0,1),e[2]-=e[0],e[3]-=e[1]},AB=function(e){const[n,s]=D(this,Xn,xr).call(this);C(this,kc,e);const[r,a]=D(this,Xn,xr).call(this),[u,h]=[r-n,a-s],f=d(this,ai);return f[0]-=u,f[1]-=h,f[2]+=2*u,f[3]+=2*h,f};class AT extends mB{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Re._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new AT(this._viewParameters);return t.updateAll(this),t}}var ZA,TB;const eh=class eh extends LA{constructor(e){super({...e,name:"inkEditor"});R(this,ZA);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){Re.initialize(e,n),this._defaultDrawingOptions=new AT(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Nt(this,"typesMap",new Map([[Jt.INK_THICKNESS,"stroke-width"],[Jt.INK_COLOR,"stroke"],[Jt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,s,r,a){return new e7(e,n,s,r,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,s,r,a,u){return Ly.deserialize(e,n,s,r,a,u)}static async deserialize(e,n,s){let r=null;if(e instanceof Iw){const{data:{inkLists:u,rect:h,rotation:f,id:p,color:y,opacity:v,borderStyle:{rawWidth:E},popupRef:b,richText:_,contentsObj:w,creationDate:x,modificationDate:N},parent:{page:{pageNumber:I}}}=e;r=e={annotationType:Ut.INK,color:Array.from(y),thickness:E,opacity:v,paths:{points:u},boxes:null,pageIndex:I-1,rect:h.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:b,richText:_,comment:(w==null?void 0:w.str)||null,creationDate:x,modificationDate:N}}const a=await super.deserialize(e,n,s);return a._initialData=r,e.comment&&a.setCommentData(e),a}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new DA(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Jt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:s}=this;n.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:s}){this._drawingOptions=eh.getDefaultDrawingOptions({stroke:ht.makeHexColor(...e),"stroke-width":n,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:s}=this.serializeDraw(e),{_drawingOptions:{stroke:r,"stroke-opacity":a,"stroke-width":u}}=this,h=Object.assign(super.serialize(e),{color:Re._colorManager.convert(r),opacity:a,thickness:u,paths:{lines:n,points:s}});return this.addComment(h),e?(h.isCopy=!0,h):this.annotationElementId&&!D(this,ZA,TB).call(this,h)?null:(h.id=this.annotationElementId,h)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:n,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};ZA=new WeakSet,TB=function(e){const{color:n,thickness:s,opacity:r,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((u,h)=>u!==n[h])||e.thickness!==s||e.opacity!==r||e.pageIndex!==a},Z(eh,"_type","ink"),Z(eh,"_editorType",Ut.INK),Z(eh,"_defaultDrawingOptions",null);let T_=eh;class S_ extends Ly{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const y0=8,Yp=3;var Uc,ae,E_,mo,SB,EB,b_,eA,bB,CB,_B,C_,__,wB;class ha{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:s},r,a,u,h){let f=new OffscreenCanvas(1,1),p=f.getContext("2d",{alpha:!1});const y=200,v=p.font=`${n} ${s} ${y}px ${e}`,{actualBoundingBoxLeft:E,actualBoundingBoxRight:b,actualBoundingBoxAscent:_,actualBoundingBoxDescent:w,fontBoundingBoxAscent:x,fontBoundingBoxDescent:N,width:I}=p.measureText(t),L=1.5,U=Math.ceil(Math.max(Math.abs(E)+Math.abs(b)||0,I)*L),k=Math.ceil(Math.max(Math.abs(_)+Math.abs(w)||y,Math.abs(x)+Math.abs(N)||y)*L);f=new OffscreenCanvas(U,k),p=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=v,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,U,k),p.fillStyle="black",p.fillText(t,U*(L-1)/2,k*(3-L)/2);const B=D(this,ae,C_).call(this,p.getImageData(0,0,U,k).data),z=D(this,ae,_B).call(this,B),H=D(this,ae,__).call(this,z),j=D(this,ae,b_).call(this,B,U,k,H);return this.processDrawnLines({lines:{curves:j,width:U,height:k},pageWidth:r,pageHeight:a,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,e,n,s,r){const[a,u,h]=D(this,ae,wB).call(this,t),[f,p]=D(this,ae,CB).call(this,a,u,h,Math.hypot(u,h)*d(this,Uc).sigmaSFactor,d(this,Uc).sigmaR,d(this,Uc).kernelSize),y=D(this,ae,__).call(this,p),v=D(this,ae,b_).call(this,f,u,h,y);return this.processDrawnLines({lines:{curves:v,width:u,height:h},pageWidth:e,pageHeight:n,rotation:s,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:s,innerMargin:r,mustSmooth:a,areContours:u}){s%180!==0&&([e,n]=[n,e]);const{curves:h,width:f,height:p}=t,y=t.thickness??0,v=[],E=Math.min(e/f,n/p),b=E/e,_=E/n,w=[];for(const{points:N}of h){const I=a?D(this,ae,bB).call(this,N):N;if(!I)continue;w.push(I);const L=I.length,U=new Float32Array(L),k=new Float32Array(3*(L===2?2:L-2));if(v.push({line:k,points:U}),L===2){U[0]=I[0]*b,U[1]=I[1]*_,k.set([NaN,NaN,NaN,NaN,U[0],U[1]],0);continue}let[B,z,H,j]=I;B*=b,z*=_,H*=b,j*=_,U.set([B,z,H,j],0),k.set([NaN,NaN,NaN,NaN,B,z],0);for(let et=4;et<L;et+=2){const at=U[et]=I[et]*b,ft=U[et+1]=I[et+1]*_;k.set(gt.createBezierPoints(B,z,H,j,at,ft),(et-2)*3),[B,z,H,j]=[H,j,at,ft]}}if(v.length===0)return null;const x=u?new S_:new Ly;return x.build(v,e,n,1,s,u?0:y,r),{outline:x,newCurves:w,areContours:u,thickness:y,width:f,height:p}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:s,height:r}){let a=1/0,u=-1/0,h=0;for(const I of t){h+=I.length;for(let L=2,U=I.length;L<U;L++){const k=I[L]-I[L-2];a=Math.min(a,k),u=Math.max(u,k)}}let f;a>=-128&&u<=127?f=Int8Array:a>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const p=t.length,y=y0+Yp*p,v=new Uint32Array(y);let E=0;v[E++]=y*Uint32Array.BYTES_PER_ELEMENT+(h-2*p)*f.BYTES_PER_ELEMENT,v[E++]=0,v[E++]=s,v[E++]=r,v[E++]=e?0:1,v[E++]=Math.max(0,Math.floor(n??0)),v[E++]=p,v[E++]=f.BYTES_PER_ELEMENT;for(const I of t)v[E++]=I.length-2,v[E++]=I[0],v[E++]=I[1];const b=new CompressionStream("deflate-raw"),_=b.writable.getWriter();await _.ready,_.write(v);const w=f.prototype.constructor;for(const I of t){const L=new w(I.length-2);for(let U=2,k=I.length;U<k;U++)L[U-2]=I[U]-I[U-2];_.write(L)}_.close();const x=await new Response(b.readable).arrayBuffer();return new Uint8Array(x).toBase64()}static async decompressSignature(t){try{const e=Uint8Array.fromBase64(t),{readable:n,writable:s}=new DecompressionStream("deflate-raw"),r=s.getWriter();await r.ready,r.write(e).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let a=null,u=0;for await(const I of n)a||(a=new Uint8Array(new Uint32Array(I.buffer,0,4)[0])),a.set(I,u),u+=I.length;const h=new Uint32Array(a.buffer,0,a.length>>2),f=h[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const p=h[2],y=h[3],v=h[4]===0,E=h[5],b=h[6],_=h[7],w=[],x=(y0+Yp*b)*Uint32Array.BYTES_PER_ELEMENT;let N;switch(_){case Int8Array.BYTES_PER_ELEMENT:N=new Int8Array(a.buffer,x);break;case Int16Array.BYTES_PER_ELEMENT:N=new Int16Array(a.buffer,x);break;case Int32Array.BYTES_PER_ELEMENT:N=new Int32Array(a.buffer,x);break}u=0;for(let I=0;I<b;I++){const L=h[Yp*I+y0],U=new Float32Array(L+2);w.push(U);for(let k=0;k<Yp-1;k++)U[k]=h[Yp*I+y0+k+1];for(let k=0;k<L;k++)U[k+2]=U[k]+N[u++]}return{areContours:v,thickness:E,outlines:w,width:p,height:y}}catch(e){return It(`decompressSignature: ${e}`),null}}}Uc=new WeakMap,ae=new WeakSet,E_=function(t,e,n,s){return n-=t,s-=e,n===0?s>0?0:4:n===1?s+6:2-s},mo=new WeakMap,SB=function(t,e,n,s,r,a,u){const h=D(this,ae,E_).call(this,n,s,r,a);for(let f=0;f<8;f++){const p=(-f+h-u+16)%8,y=d(this,mo)[2*p],v=d(this,mo)[2*p+1];if(t[(n+y)*e+(s+v)]!==0)return p}return-1},EB=function(t,e,n,s,r,a,u){const h=D(this,ae,E_).call(this,n,s,r,a);for(let f=0;f<8;f++){const p=(f+h+u+16)%8,y=d(this,mo)[2*p],v=d(this,mo)[2*p+1];if(t[(n+y)*e+(s+v)]!==0)return p}return-1},b_=function(t,e,n,s){const r=t.length,a=new Int32Array(r);for(let p=0;p<r;p++)a[p]=t[p]<=s?1:0;for(let p=1;p<n-1;p++)a[p*e]=a[p*e+e-1]=0;for(let p=0;p<e;p++)a[p]=a[e*n-1-p]=0;let u=1,h;const f=[];for(let p=1;p<n-1;p++){h=1;for(let y=1;y<e-1;y++){const v=p*e+y,E=a[v];if(E===0)continue;let b=p,_=y;if(E===1&&a[v-1]===0)u+=1,_-=1;else if(E>=1&&a[v+1]===0)u+=1,_+=1,E>1&&(h=E);else{E!==1&&(h=Math.abs(E));continue}const w=[y,p],x=_===y+1,N={isHole:x,points:w,id:u,parent:0};f.push(N);let I;for(const et of f)if(et.id===h){I=et;break}I?I.isHole?N.parent=x?I.parent:h:N.parent=x?h:I.parent:N.parent=x?h:0;const L=D(this,ae,SB).call(this,a,e,p,y,b,_,0);if(L===-1){a[v]=-u,a[v]!==1&&(h=Math.abs(a[v]));continue}let U=d(this,mo)[2*L],k=d(this,mo)[2*L+1];const B=p+U,z=y+k;b=B,_=z;let H=p,j=y;for(;;){const et=D(this,ae,EB).call(this,a,e,H,j,b,_,1);U=d(this,mo)[2*et],k=d(this,mo)[2*et+1];const at=H+U,ft=j+k;w.push(ft,at);const lt=H*e+j;if(a[lt+1]===0?a[lt]=-u:a[lt]===1&&(a[lt]=u),at===p&&ft===y&&H===B&&j===z){a[v]!==1&&(h=Math.abs(a[v]));break}else b=H,_=j,H=at,j=ft}}}return f},eA=function(t,e,n,s){if(n-e<=4){for(let B=e;B<n-2;B+=2)s.push(t[B],t[B+1]);return}const r=t[e],a=t[e+1],u=t[n-4]-r,h=t[n-3]-a,f=Math.hypot(u,h),p=u/f,y=h/f,v=p*a-y*r,E=h/u,b=1/f,_=Math.atan(E),w=Math.cos(_),x=Math.sin(_),N=b*(Math.abs(w)+Math.abs(x)),I=b*(1-N+N**2),L=Math.max(Math.atan(Math.abs(x+w)*I),Math.atan(Math.abs(x-w)*I));let U=0,k=e;for(let B=e+2;B<n-2;B+=2){const z=Math.abs(v-p*t[B+1]+y*t[B]);z>U&&(k=B,U=z)}U>(f*L)**2?(D(this,ae,eA).call(this,t,e,k+2,s),D(this,ae,eA).call(this,t,k,n,s)):s.push(r,a)},bB=function(t){const e=[],n=t.length;return D(this,ae,eA).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},CB=function(t,e,n,s,r,a){const u=new Float32Array(a**2),h=-2*s**2,f=a>>1;for(let _=0;_<a;_++){const w=(_-f)**2;for(let x=0;x<a;x++)u[_*a+x]=Math.exp((w+(x-f)**2)/h)}const p=new Float32Array(256),y=-2*r**2;for(let _=0;_<256;_++)p[_]=Math.exp(_**2/y);const v=t.length,E=new Uint8Array(v),b=new Uint32Array(256);for(let _=0;_<n;_++)for(let w=0;w<e;w++){const x=_*e+w,N=t[x];let I=0,L=0;for(let k=0;k<a;k++){const B=_+k-f;if(!(B<0||B>=n))for(let z=0;z<a;z++){const H=w+z-f;if(H<0||H>=e)continue;const j=t[B*e+H],et=u[k*a+z]*p[Math.abs(j-N)];I+=j*et,L+=et}}const U=E[x]=Math.round(I/L);b[U]++}return[E,b]},_B=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},C_=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let s=-1/0,r=1/0;for(let u=0,h=n.length;u<h;u++){const f=n[u]=t[u<<2];s=Math.max(s,f),r=Math.min(r,f)}const a=255/(s-r);for(let u=0,h=n.length;u<h;u++)n[u]=(n[u]-r)*a;return n},__=function(t){let e,n=-1/0,s=-1/0;const r=t.findIndex(h=>h!==0);let a=r,u=r;for(e=r;e<256;e++){const h=t[e];h>n&&(e-a>s&&(s=e-a,u=e-1),n=h,a=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e},wB=function(t){const e=t,{width:n,height:s}=t,{maxDim:r}=d(this,Uc);let a=n,u=s;if(n>r||s>r){let v=n,E=s,b=Math.log2(Math.max(n,s)/r);const _=Math.floor(b);b=b===_?_-1:_;for(let x=0;x<b;x++){a=Math.ceil(v/2),u=Math.ceil(E/2);const N=new OffscreenCanvas(a,u);N.getContext("2d").drawImage(t,0,0,v,E,0,0,a,u),v=a,E=u,t!==e&&t.close(),t=N.transferToImageBitmap()}const w=Math.min(r/a,r/u);a=Math.round(a*w),u=Math.round(u*w)}const f=new OffscreenCanvas(a,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,a,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,a,u);const p=f.getImageData(0,0,a,u).data;return[D(this,ae,C_).call(this,p),a,u]},R(ha,ae),R(ha,Uc,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),R(ha,mo,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class Nw extends mB{constructor(){super(),super.updateProperties({fill:Re._defaultLineColor,"stroke-width":0})}clone(){const t=new Nw;return t.updateAll(this),t}}class Pw extends AT{constructor(t){super(t),super.updateProperties({stroke:Re._defaultLineColor,"stroke-width":1})}clone(){const t=new Pw(this._viewParameters);return t.updateAll(this),t}}var Fl,jo,Ol,Bc;const Ki=class Ki extends LA{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});R(this,Fl,!1);R(this,jo,null);R(this,Ol,null);R(this,Bc,null);this._willKeepAspectRatio=!0,C(this,Ol,e.signatureData||null),C(this,jo,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){Re.initialize(e,n),this._defaultDrawingOptions=new Nw,this._defaultDrawnSignatureOptions=new Pw(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Nt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!d(this,jo)}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(d(this,Ol)){const{lines:r,mustSmooth:a,areContours:u,description:h,uuid:f,heightInPage:p}=d(this,Ol),{rawDims:{pageWidth:y,pageHeight:v},rotation:E}=this.parent.viewport,b=ha.processDrawnLines({lines:r,pageWidth:y,pageHeight:v,rotation:E,innerMargin:Ki._INNER_MARGIN,mustSmooth:a,areContours:u});this.addSignature(b,p,h,f)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:d(this,jo)||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){C(this,Bc,e),this.addEditToolbar()}getUuid(){return d(this,Bc)}get description(){return d(this,jo)}set description(e){C(this,jo,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:s,width:r,height:a}=d(this,Ol),u=Math.max(r,a),h=ha.processDrawnLines({lines:{curves:e.map(f=>({points:f})),thickness:s,width:r,height:a},pageWidth:u,pageHeight:u,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:h.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,n,s,r){const{x:a,y:u}=this,{outline:h}=C(this,Ol,e);C(this,Fl,h instanceof S_),this.description=s;let f;d(this,Fl)?f=Ki.getDefaultDrawingOptions():(f=Ki._defaultDrawnSignatureOptions.clone(),f.updateProperties({"stroke-width":h.thickness})),this._addOutlines({drawOutlines:h,drawingOptions:f});const[,p]=this.pageDimensions;let y=n/p;y=y>=1?.5:y,this.width*=y/this.height,this.width>=1&&(y*=.9/this.width,this.width=.9),this.height=y,this.setDims(),this.x=a,this.y=u,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:s},rotation:r}=this.parent.viewport;return ha.process(e,n,s,r,Ki._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:s,pageHeight:r},rotation:a}=this.parent.viewport;return ha.extractContoursFromText(e,n,s,r,a,Ki._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:s},rotation:r}=this.parent.viewport;return ha.processDrawnLines({lines:e,pageWidth:n,pageHeight:s,rotation:r,innerMargin:Ki._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=Ki.getDefaultDrawingOptions():(this._drawingOptions=Ki._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:s}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":r}}=this,a=Object.assign(super.serialize(e),{isSignature:!0,areContours:d(this,Fl),color:[0,0,0],thickness:d(this,Fl)?0:r});return this.addComment(a),e?(a.paths={lines:n,points:s},a.uuid=d(this,Bc),a.isCopy=!0):a.lines=n,d(this,jo)&&(a.accessibilityData={type:"Figure",alt:d(this,jo)}),a}static deserializeDraw(e,n,s,r,a,u){return u.areContours?S_.deserialize(e,n,s,r,a,u):Ly.deserialize(e,n,s,r,a,u)}static async deserialize(e,n,s){var a;const r=await super.deserialize(e,n,s);return C(r,Fl,e.areContours),r.description=((a=e.accessibilityData)==null?void 0:a.alt)||"",C(r,Bc,e.uuid),r}};Fl=new WeakMap,jo=new WeakMap,Ol=new WeakMap,Bc=new WeakMap,Z(Ki,"_type","signature"),Z(Ki,"_editorType",Ut.SIGNATURE),Z(Ki,"_defaultDrawingOptions",null);let w_=Ki;var Be,Mn,Vl,aa,Hl,xf,la,Fc,tr,fs,Mf,jt,fm,pm,nA,iA,sA,M_,oA,xB;class x_ extends Re{constructor(e){super({...e,name:"stampEditor"});R(this,jt);R(this,Be,null);R(this,Mn,null);R(this,Vl,null);R(this,aa,null);R(this,Hl,null);R(this,xf,"");R(this,la,null);R(this,Fc,!1);R(this,tr,null);R(this,fs,!1);R(this,Mf,!1);C(this,aa,e.bitmapUrl),C(this,Hl,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){Re.initialize(e,n)}static isHandlingMimeForPasting(e){return cC.includes(e)}static paste(e,n){n.pasteEditor({mode:Ut.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:a,height:u}=e||this.copyCanvas(null,null,!0).imageData,h=await s.guess({name:"altText",request:{data:r,width:a,height:u,channels:r.length/(a*u)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const f=h.output;return await this.setGuessedAltText(f),n&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){var e;d(this,Mn)&&(C(this,Be,null),this._uiManager.imageManager.deleteId(d(this,Mn)),(e=d(this,la))==null||e.remove(),C(this,la,null),d(this,tr)&&(clearTimeout(d(this,tr)),C(this,tr,null))),super.remove()}rebuild(){if(!this.parent){d(this,Mn)&&D(this,jt,nA).call(this);return}super.rebuild(),this.div!==null&&(d(this,Mn)&&d(this,la)===null&&D(this,jt,nA).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(d(this,Vl)||d(this,Be)||d(this,aa)||d(this,Hl)||d(this,Mn)||d(this,Fc))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),d(this,Fc)||(d(this,Be)?D(this,jt,iA).call(this):D(this,jt,nA).call(this)),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(C(this,Mn,s),r&&C(this,Be,r),C(this,Fc,!1),D(this,jt,iA).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;d(this,tr)!==null&&clearTimeout(d(this,tr)),C(this,tr,setTimeout(()=>{C(this,tr,null),D(this,jt,M_).call(this)},200))}copyCanvas(e,n,s=!1){e||(e=224);const{width:r,height:a}=d(this,Be),u=new sr;let h=d(this,Be),f=r,p=a,y=null;if(n){if(r>n||a>n){const B=Math.min(n/r,n/a);f=Math.floor(r*B),p=Math.floor(a*B)}y=document.createElement("canvas");const E=y.width=Math.ceil(f*u.sx),b=y.height=Math.ceil(p*u.sy);d(this,fs)||(h=D(this,jt,sA).call(this,E,b));const _=y.getContext("2d");_.filter=this._uiManager.hcmFilter;let w="white",x="#cfcfd8";this._uiManager.hcmFilter!=="none"?x="black":b9.isDarkMode&&(w="#8f8f9d",x="#42414d");const N=15,I=N*u.sx,L=N*u.sy,U=new OffscreenCanvas(I*2,L*2),k=U.getContext("2d");k.fillStyle=w,k.fillRect(0,0,I*2,L*2),k.fillStyle=x,k.fillRect(0,0,I,L),k.fillRect(I,L,I,L),_.fillStyle=_.createPattern(U,"repeat"),_.fillRect(0,0,E,b),_.drawImage(h,0,0,h.width,h.height,0,0,E,b)}let v=null;if(s){let E,b;if(u.symmetric&&h.width<e&&h.height<e)E=h.width,b=h.height;else if(h=d(this,Be),r>e||a>e){const x=Math.min(e/r,e/a);E=Math.floor(r*x),b=Math.floor(a*x),d(this,fs)||(h=D(this,jt,sA).call(this,E,b))}const w=new OffscreenCanvas(E,b).getContext("2d",{willReadFrequently:!0});w.drawImage(h,0,0,h.width,h.height,0,0,E,b),v={width:E,height:b,data:w.getImageData(0,0,E,b).data}}return{canvas:y,width:f,height:p,imageData:v}}static async deserialize(e,n,s){var w;let r=null,a=!1;if(e instanceof zU){const{data:{rect:x,rotation:N,id:I,structParent:L,popupRef:U,richText:k,contentsObj:B,creationDate:z,modificationDate:H},container:j,parent:{page:{pageNumber:et}},canvas:at}=e;let ft,lt;at?(delete e.canvas,{id:ft,bitmap:lt}=s.imageManager.getFromCanvas(j.id,at),at.remove()):(a=!0,e._hasNoCanvas=!0);const vt=((w=await n._structTree.getAriaAttributes(`${Jd}${I}`))==null?void 0:w.get("aria-label"))||"";r=e={annotationType:Ut.STAMP,bitmapId:ft,bitmap:lt,pageIndex:et-1,rect:x.slice(0),rotation:N,annotationElementId:I,id:I,deleted:!1,accessibilityData:{decorative:!1,altText:vt},isSvg:!1,structParent:L,popupRef:U,richText:k,comment:(B==null?void 0:B.str)||null,creationDate:z,modificationDate:H}}const u=await super.deserialize(e,n,s),{rect:h,bitmap:f,bitmapUrl:p,bitmapId:y,isSvg:v,accessibilityData:E}=e;a?(s.addMissingCanvas(e.id,u),C(u,Fc,!0)):y&&s.imageManager.isValidId(y)?(C(u,Mn,y),f&&C(u,Be,f)):C(u,aa,p),C(u,fs,v);const[b,_]=u.pageDimensions;return u.width=(h[2]-h[0])/b,u.height=(h[3]-h[1])/_,E&&(u.altTextData=E),u._initialData=r,e.comment&&u.setCommentData(e),C(u,Mf,!!r),u}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(e),{bitmapId:d(this,Mn),isSvg:d(this,fs)});if(this.addComment(s),e)return s.bitmapUrl=D(this,jt,oA).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(s.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const h=D(this,jt,xB).call(this,s);return h.isSame?null:(h.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(n===null)return s;n.stamps||(n.stamps=new Map);const u=d(this,fs)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(d(this,Mn)))n.stamps.set(d(this,Mn),{area:u,serialized:s}),s.bitmap=D(this,jt,oA).call(this,!1);else if(d(this,fs)){const h=n.stamps.get(d(this,Mn));u>h.area&&(h.area=u,h.serialized.bitmap.close(),h.serialized.bitmap=D(this,jt,oA).call(this,!1))}return s}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Be=new WeakMap,Mn=new WeakMap,Vl=new WeakMap,aa=new WeakMap,Hl=new WeakMap,xf=new WeakMap,la=new WeakMap,Fc=new WeakMap,tr=new WeakMap,fs=new WeakMap,Mf=new WeakMap,jt=new WeakSet,fm=function(e,n=!1){if(!e){this.remove();return}C(this,Be,e.bitmap),n||(C(this,Mn,e.id),C(this,fs,e.isSvg)),e.file&&C(this,xf,e.file.name),D(this,jt,iA).call(this)},pm=function(){if(C(this,Vl,null),this._uiManager.enableWaiting(!1),!!d(this,la)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,Be)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,Be)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},nA=function(){if(d(this,Mn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(d(this,Mn)).then(s=>D(this,jt,fm).call(this,s,!0)).finally(()=>D(this,jt,pm).call(this));return}if(d(this,aa)){const s=d(this,aa);C(this,aa,null),this._uiManager.enableWaiting(!0),C(this,Vl,this._uiManager.imageManager.getFromUrl(s).then(r=>D(this,jt,fm).call(this,r)).finally(()=>D(this,jt,pm).call(this)));return}if(d(this,Hl)){const s=d(this,Hl);C(this,Hl,null),this._uiManager.enableWaiting(!0),C(this,Vl,this._uiManager.imageManager.getFromFile(s).then(r=>D(this,jt,fm).call(this,r)).finally(()=>D(this,jt,pm).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=cC.join(",");const n=this._uiManager._signal;C(this,Vl,new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),D(this,jt,fm).call(this,r)}s()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>D(this,jt,pm).call(this))),e.click()},iA=function(){var f;const{div:e}=this;let{width:n,height:s}=d(this,Be);const[r,a]=this.pageDimensions,u=.75;if(this.width)n=this.width*r,s=this.height*a;else if(n>u*r||s>u*a){const p=Math.min(u*r/n,u*a/s);n*=p,s*=p}this._uiManager.enableWaiting(!1);const h=C(this,la,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=n/r,this.height=s/a,this.setDims(),(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),D(this,jt,M_).call(this),d(this,Mf)||(this.parent.addUndoableEditor(this),C(this,Mf,!0)),this._reportTelemetry({action:"inserted_image"}),d(this,xf)&&this.div.setAttribute("aria-description",d(this,xf)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},sA=function(e,n){const{width:s,height:r}=d(this,Be);let a=s,u=r,h=d(this,Be);for(;a>2*e||u>2*n;){const f=a,p=u;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const y=new OffscreenCanvas(a,u);y.getContext("2d").drawImage(h,0,0,f,p,0,0,a,u),h=y.transferToImageBitmap()}return h},M_=function(){const[e,n]=this.parentDimensions,{width:s,height:r}=this,a=new sr,u=Math.ceil(s*e*a.sx),h=Math.ceil(r*n*a.sy),f=d(this,la);if(!f||f.width===u&&f.height===h)return;f.width=u,f.height=h;const p=d(this,fs)?d(this,Be):D(this,jt,sA).call(this,u,h),y=f.getContext("2d");y.filter=this._uiManager.hcmFilter,y.drawImage(p,0,0,p.width,p.height,0,0,u,h)},oA=function(e){if(e){if(d(this,fs)){const r=this._uiManager.imageManager.getSvgUrl(d(this,Mn));if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=d(this,Be),n.getContext("2d").drawImage(d(this,Be),0,0),n.toDataURL()}if(d(this,fs)){const[n,s]=this.pageDimensions,r=Math.round(this.width*n*Jl.PDF_TO_CSS_UNITS),a=Math.round(this.height*s*Jl.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(r,a);return u.getContext("2d").drawImage(d(this,Be),0,0,d(this,Be).width,d(this,Be).height,0,0,r,a),u.transferToImageBitmap()}return structuredClone(d(this,Be))},xB=function(e){var u;const{pageIndex:n,accessibilityData:{altText:s}}=this._initialData,r=e.pageIndex===n,a=(((u=e.accessibilityData)==null?void 0:u.alt)||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&a,isSameAltText:a}},Z(x_,"_type","stamp"),Z(x_,"_editorType",Ut.STAMP);var Oc,Rf,Gl,zl,ua,ki,ql,Df,If,go,ca,Rn,da,Yl,Nf,St,Xl,_e,D_,MB,Io,I_,N_,rA;const so=class so{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:s,accessibilityManager:r,annotationLayer:a,drawLayer:u,textLayer:h,viewport:f,l10n:p}){R(this,_e);R(this,Oc);R(this,Rf,!1);R(this,Gl,null);R(this,zl,null);R(this,ua,null);R(this,ki,new Map);R(this,ql,!1);R(this,Df,!1);R(this,If,!1);R(this,go,null);R(this,ca,null);R(this,Rn,null);R(this,da,null);R(this,Yl,null);R(this,Nf,-1);R(this,St);const y=[...d(so,Xl).values()];if(!so._initialized){so._initialized=!0;for(const v of y)v.initialize(p,t)}t.registerEditorTypes(y),C(this,St,t),this.pageIndex=e,this.div=n,C(this,Oc,r),C(this,Gl,a),this.viewport=f,C(this,Rn,h),this.drawLayer=u,this._structTree=s,d(this,St).addLayer(this)}updatePageIndex(t){this.pageIndex=t}get isEmpty(){return d(this,ki).size===0}get isInvisible(){return this.isEmpty&&d(this,St).getMode()===Ut.NONE}updateToolbar(t){d(this,St).updateToolbar(t)}updateMode(t=d(this,St).getMode()){switch(D(this,_e,rA).call(this),t){case Ut.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ut.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ut.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Ut.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of d(so,Xl).values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=d(this,Rn))==null?void 0:e.div)}setEditingState(t){d(this,St).setEditingState(t)}addCommands(t){d(this,St).addCommands(t)}cleanUndoStack(t){d(this,St).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=d(this,Gl))==null||e.togglePointerEvents(t)}async enable(){var n;C(this,If,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=d(this,Yl))==null||n.abort(),C(this,Yl,null);const t=new Set;for(const s of d(this,_e,D_))s.enableEditing(),s.show(!0),s.annotationElementId&&(d(this,St).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const e=d(this,Gl);if(e)for(const s of e.getEditableAnnotations()){if(s.hide(),d(this,St).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}C(this,If,!1),d(this,St)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var s;if(C(this,Df,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),d(this,Rn)&&!d(this,Yl)){C(this,Yl,new AbortController);const r=d(this,St).combinedSignal(d(this,Yl));d(this,Rn).div.addEventListener("pointerdown",a=>{const{clientX:h,clientY:f,timeStamp:p}=a,y=d(this,Nf);if(p-y>500){C(this,Nf,p);return}C(this,Nf,-1);const{classList:v}=this.div;v.toggle("getElements",!0);const E=document.elementsFromPoint(h,f);if(v.toggle("getElements",!1),!this.div.contains(E[0]))return;let b;const _=new RegExp(`^${_m}[0-9]+$`);for(const x of E)if(_.test(x.id)){b=x.id;break}if(!b)return;const w=d(this,ki).get(b);(w==null?void 0:w.annotationElementId)===null&&(a.stopPropagation(),a.preventDefault(),w.dblclick(a))},{signal:r,capture:!0})}const t=d(this,Gl),e=[];if(t){const r=new Map,a=new Map;for(const h of d(this,_e,D_)){if(h.disableEditing(),!h.annotationElementId){e.push(h);continue}if(h.serialize()!==null){r.set(h.annotationElementId,h);continue}else a.set(h.annotationElementId,h);(s=this.getEditableAnnotation(h.annotationElementId))==null||s.show(),h.remove()}const u=t.getEditableAnnotations();for(const h of u){const{id:f}=h.data;if(d(this,St).isDeletedAnnotationElement(f)){h.updateEdited({deleted:!0});continue}let p=a.get(f);if(p){p.resetAnnotationElement(h),p.show(!1),h.show();continue}p=r.get(f),p&&(d(this,St).addChangedExistingAnnotation(p),p.renderAnnotationElement(h)&&p.show(!1)),h.show()}}D(this,_e,rA).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of d(so,Xl).values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t==null||t.updateFakeAnnotations(e),C(this,Df,!1)}getEditableAnnotation(t){var e;return((e=d(this,Gl))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){d(this,St).getActive()!==t&&d(this,St).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=d(this,Rn))!=null&&t.div&&!d(this,da)){C(this,da,new AbortController);const e=d(this,St).combinedSignal(d(this,da));d(this,Rn).div.addEventListener("pointerdown",D(this,_e,MB).bind(this),{signal:e}),d(this,Rn).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=d(this,Rn))!=null&&t.div&&d(this,da)&&(d(this,da).abort(),C(this,da,null),d(this,Rn).div.classList.remove("highlighting"))}enableClick(){if(d(this,zl))return;C(this,zl,new AbortController);const t=d(this,St).combinedSignal(d(this,zl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=d(this,zl))==null||t.abort(),C(this,zl,null)}attach(t){d(this,ki).set(t.id,t);const{annotationElementId:e}=t;e&&d(this,St).isDeletedAnnotationElement(e)&&d(this,St).removeDeletedAnnotationElement(t)}detach(t){var e;d(this,ki).delete(t.id),(e=d(this,Oc))==null||e.removePointerInTextLayer(t.contentDiv),!d(this,Df)&&t.annotationElementId&&d(this,St).addDeletedAnnotationElement(t)}remove(t){this.detach(t),d(this,St).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(d(this,St).addDeletedAnnotationElement(t),Re.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),d(this,St).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!d(this,If)),d(this,St).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!d(this,ua)&&(t._focusEventsAllowed=!1,C(this,ua,setTimeout(()=>{C(this,ua,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:d(this,St)._signal}),e.focus())},0))),t._structTreeParentId=(n=d(this,Oc))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of d(this,ki).values())if(e.uid===t)return e;return null}getNextId(){return d(this,St).getId()}combinedSignal(t){return d(this,St).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=d(this,_e,Io))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await d(this,St).updateMode(t.mode);const{offsetX:n,offsetY:s}=D(this,_e,N_).call(this),r=this.getNextId(),a=D(this,_e,I_).call(this,{parent:this,id:r,x:n,y:s,uiManager:d(this,St),isCentered:!0,...e});a&&this.add(a)}async deserialize(t){var e;return await((e=d(so,Xl).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,d(this,St)))||null}createAndAddNewEditor(t,e,n={}){const s=this.getNextId(),r=D(this,_e,I_).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:d(this,St),isCentered:e,...n});return r&&this.add(r),r}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(t={}){this.createAndAddNewEditor(D(this,_e,N_).call(this),!0,t)}setSelected(t){d(this,St).setSelected(t)}toggleSelected(t){d(this,St).toggleSelected(t)}unselect(t){d(this,St).unselect(t)}pointerup(t){var s;const{isMac:e}=Tn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!d(this,ql)||(C(this,ql,!1),(s=d(this,_e,Io))!=null&&s.isDrawer&&d(this,_e,Io).supportMultipleDrawings))return;if(!d(this,Rf)){C(this,Rf,!0);return}const n=d(this,St).getMode();if(n===Ut.STAMP||n===Ut.SIGNATURE){d(this,St).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var s;if(d(this,St).getMode()===Ut.HIGHLIGHT&&this.enableTextSelection(),d(this,ql)){C(this,ql,!1);return}const{isMac:e}=Tn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(C(this,ql,!0),(s=d(this,_e,Io))!=null&&s.isDrawer){this.startDrawingSession(t);return}const n=d(this,St).getActive();C(this,Rf,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),d(this,go)){d(this,_e,Io).startDrawing(this,d(this,St),!1,t);return}d(this,St).setCurrentDrawingSession(this),C(this,go,new AbortController);const e=d(this,St).combinedSignal(d(this,go));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(C(this,ca,null),this.commitOrRemove())},{signal:e}),d(this,_e,Io).startDrawing(this,d(this,St),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&C(this,ca,e);return}d(this,ca)&&setTimeout(()=>{var e;(e=d(this,ca))==null||e.focus(),C(this,ca,null)},0)}endDrawingSession(t=!1){return d(this,go)?(d(this,St).setCurrentDrawingSession(null),d(this,go).abort(),C(this,go,null),C(this,ca,null),d(this,_e,Io).endDrawing(t)):null}findNewParent(t,e,n){const s=d(this,St).findParent(e,n);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return d(this,go)?(this.endDrawingSession(),!0):!1}onScaleChanging(){d(this,go)&&d(this,_e,Io).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=d(this,St).getActive())==null?void 0:t.parent)===this&&(d(this,St).commitOrRemove(),d(this,St).setActiveEditor(null)),d(this,ua)&&(clearTimeout(d(this,ua)),C(this,ua,null));for(const n of d(this,ki).values())(e=d(this,Oc))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,d(this,ki).clear(),d(this,St).removeLayer(this)}render({viewport:t}){this.viewport=t,Gc(this.div,t);for(const e of d(this,St).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){d(this,St).commitOrRemove(),D(this,_e,rA).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Gc(this.div,{rotation:n}),e!==n)for(const s of d(this,ki).values())s.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return d(this,St).viewParameters.realScale}};Oc=new WeakMap,Rf=new WeakMap,Gl=new WeakMap,zl=new WeakMap,ua=new WeakMap,ki=new WeakMap,ql=new WeakMap,Df=new WeakMap,If=new WeakMap,go=new WeakMap,ca=new WeakMap,Rn=new WeakMap,da=new WeakMap,Yl=new WeakMap,Nf=new WeakMap,St=new WeakMap,Xl=new WeakMap,_e=new WeakSet,D_=function(){return d(this,ki).size!==0?d(this,ki).values():d(this,St).getEditors(this.pageIndex)},MB=function(t){d(this,St).unselectAll();const{target:e}=t;if(e===d(this,Rn).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&d(this,Rn).div.contains(e)){const{isMac:n}=Tn.platform;if(t.button!==0||t.ctrlKey&&n)return;d(this,St).showAllEditors("highlight",!0,!0),d(this,Rn).div.classList.add("free"),this.toggleDrawing(),PA.startHighlighting(this,d(this,St).direction==="ltr",{target:d(this,Rn).div,x:t.x,y:t.y}),d(this,Rn).div.addEventListener("pointerup",()=>{d(this,Rn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:d(this,St)._signal}),t.preventDefault()}},Io=function(){return d(so,Xl).get(d(this,St).getMode())},I_=function(t){const e=d(this,_e,Io);return e?new e.prototype.constructor(t):null},N_=function(){const{x:t,y:e,width:n,height:s}=this.boundingClientRect,r=Math.max(0,t),a=Math.max(0,e),u=Math.min(window.innerWidth,t+n),h=Math.min(window.innerHeight,e+s),f=(r+u)/2-t,p=(a+h)/2-e,[y,v]=this.viewport.rotation%180===0?[f,p]:[p,f];return{offsetX:y,offsetY:v}},rA=function(){for(const t of d(this,ki).values())t.isEmpty()&&t.remove()},Z(so,"_initialized",!1),R(so,Xl,new Map([c_,T_,x_,PA,w_].map(t=>[t._editorType,t])));let R_=so;var yo,li,Vc,Cy,jA,RB,rr,L_,DB,k_;const gn=class gn{constructor(){R(this,rr);R(this,yo,null);R(this,li,new Map);R(this,Vc,new Map)}setParent(t){if(!d(this,yo)){C(this,yo,t);return}if(d(this,yo)!==t){if(d(this,li).size>0)for(const e of d(this,li).values())e.remove(),t.append(e);C(this,yo,t)}}static get _svgFactory(){return Nt(this,"_svgFactory",new IA)}draw(t,e=!1,n=!1){const s=pn(gn,Cy)._++,r=D(this,rr,L_).call(this),a=gn._svgFactory.createElement("defs");r.append(a);const u=gn._svgFactory.createElement("path");a.append(u);const h=`path_${s}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),e&&d(this,Vc).set(s,u);const f=n?D(this,rr,DB).call(this,a,h):null,p=gn._svgFactory.createElement("use");return r.append(p),p.setAttribute("href",`#${h}`),this.updateProperties(r,t),d(this,li).set(s,r),{id:s,clipPathId:`url(#${f})`}}drawOutline(t,e){const n=pn(gn,Cy)._++,s=D(this,rr,L_).call(this),r=gn._svgFactory.createElement("defs");s.append(r);const a=gn._svgFactory.createElement("path");r.append(a);const u=`path_${n}`;a.setAttribute("id",u),a.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const y=gn._svgFactory.createElement("mask");r.append(y),h=`mask_${n}`,y.setAttribute("id",h),y.setAttribute("maskUnits","objectBoundingBox");const v=gn._svgFactory.createElement("rect");y.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const E=gn._svgFactory.createElement("use");y.append(E),E.setAttribute("href",`#${u}`),E.setAttribute("stroke","none"),E.setAttribute("fill","black"),E.setAttribute("fill-rule","nonzero"),E.classList.add("mask")}const f=gn._svgFactory.createElement("use");s.append(f),f.setAttribute("href",`#${u}`),h&&f.setAttribute("mask",`url(#${h})`);const p=f.cloneNode();return s.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(s,t),d(this,li).set(n,s),n}finalizeDraw(t,e){d(this,Vc).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var h;if(!e)return;const{root:n,bbox:s,rootClass:r,path:a}=e,u=typeof t=="number"?d(this,li).get(t):t;if(u){if(n&&D(this,rr,k_).call(this,u,n),s&&D(h=gn,jA,RB).call(h,u,s),r){const{classList:f}=u;for(const[p,y]of Object.entries(r))f.toggle(p,y)}if(a){const p=u.firstElementChild.firstElementChild;D(this,rr,k_).call(this,p,a)}}}updateParent(t,e){if(e===this)return;const n=d(this,li).get(t);n&&(d(e,yo).append(n),d(this,li).delete(t),d(e,li).set(t,n))}remove(t){d(this,Vc).delete(t),d(this,yo)!==null&&(d(this,li).get(t).remove(),d(this,li).delete(t))}destroy(){C(this,yo,null);for(const t of d(this,li).values())t.remove();d(this,li).clear(),d(this,Vc).clear()}};yo=new WeakMap,li=new WeakMap,Vc=new WeakMap,Cy=new WeakMap,jA=new WeakSet,RB=function(t,[e,n,s,r]){const{style:a}=t;a.top=`${100*n}%`,a.left=`${100*e}%`,a.width=`${100*s}%`,a.height=`${100*r}%`},rr=new WeakSet,L_=function(){const t=gn._svgFactory.create(1,1,!0);return d(this,yo).append(t),t.setAttribute("aria-hidden",!0),t},DB=function(t,e){const n=gn._svgFactory.createElement("clipPath");t.append(n);const s=`clip_${e}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const r=gn._svgFactory.createElement("use");return n.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),s},k_=function(t,e){for(const[n,s]of Object.entries(e))s===null?t.removeAttribute(n):t.setAttribute(n,s)},R(gn,jA),R(gn,Cy,0);let P_=gn;globalThis._pdfjsTestingUtils={HighlightOutliner:h_};globalThis.pdfjsLib={AbortException:Wl,AnnotationEditorLayer:R_,AnnotationEditorParamsType:Jt,AnnotationEditorType:Ut,AnnotationEditorUIManager:zc,AnnotationLayer:l_,AnnotationMode:Za,AnnotationType:un,applyOpacity:_9,build:NK,ColorPicker:RA,createValidAbsoluteUrl:l2,CSSConstants:C9,DOMSVGFactory:IA,DrawLayer:P_,FeatureTest:Tn,fetchData:Dy,findContrastColor:w9,getDocument:xU,getFilenameFromUrl:v9,getPdfFilenameFromUrl:A9,getRGB:Ny,getUuid:c2,getXfaPageViewport:S9,GlobalWorkerOptions:er,ImageKind:w0,InvalidPDFException:lC,isDataScheme:fT,isPdfFile:ww,isValidExplicitDest:B9,MathClamp:qn,noContextMenu:Qs,normalizeUnicode:g9,OPS:wm,OutputScale:sr,PagesMapper:Mm,PasswordResponses:r9,PDFDataRangeTransport:MU,PDFDateString:bA,PDFWorker:Dm,PermissionFlag:o9,PixelsPerInch:Jl,RenderingCancelledException:_w,renderRichText:h2,ResponseException:EA,setLayerDimensions:Gc,shadow:Nt,SignatureExtractor:ha,stopEvent:Qe,SupportedImageMimeTypes:cC,TextLayer:Rm,TouchManager:_A,updateUrlHash:u2,Util:ht,VerbosityLevel:uT,version:IK,XfaLayer:d2};const n7="/assets/pdf.worker-BA9kU3Pw.mjs";er.workerSrc=n7;function i7(){const[i,t]=rt.useState([]),[e,n]=rt.useState(""),[s,r]=rt.useState("START"),[a,u]=rt.useState(0),[h,f]=rt.useState(0),[p,y]=rt.useState(null),[v,E]=rt.useState(!1),[b,_]=rt.useState(null),[w,x]=rt.useState(!1),[N,I]=rt.useState(null),[L,U]=rt.useState(!1),[k,B]=rt.useState(5),[z,H]=rt.useState(""),[j,et]=rt.useState(!1),[at,ft]=rt.useState([]),[lt,vt]=rt.useState(null),[G,$]=rt.useState(!1),[it,bt]=rt.useState(null);rt.useEffect(()=>{if(s!=="START")return;const xt=Lt=>{const Kt=(z+Lt.key).slice(-5);H(Kt),Kt==="iloveher"&&(et(!0),H(""))};return window.addEventListener("keydown",xt),()=>window.removeEventListener("keydown",xt)},[z,s]);const Et=i[a],O=xt=>{try{if(!Array.isArray(xt))throw new Error("JSON must be an array of questions");if(!xt.every(Kt=>typeof Kt.topic=="string"&&typeof Kt.q=="string"&&Array.isArray(Kt.a)&&Kt.a.length>0&&typeof Kt.correct=="number"&&Kt.correct>=0&&Kt.correct<Kt.a.length))throw new Error("Invalid question format. Each question must have topic, q, a (non-empty array), and correct (valid index).");return t(xt),I(null),!0}catch(Lt){return I(Lt instanceof Error?Lt.message:"Invalid data format"),!1}},J=async xt=>{const Lt=await xt.arrayBuffer(),Kt=await xU({data:Lt}).promise;let we="";for(let vi=1;vi<=Kt.numPages;vi++){const Uy=(await(await Kt.getPage(vi)).getTextContent()).items.map(Gf=>Gf.str).join(" ");we+=Uy+`
`}return we},ot=async xt=>{var Kt;const Lt=(Kt=xt.target.files)==null?void 0:Kt[0];if(Lt){U(!0),I(null);try{const we=await J(Lt),vi=await i9(we,k);t(vi)}catch(we){I("Failed to process PDF or generate questions."),console.error(we)}finally{U(!1)}}},ut=()=>{try{const xt=JSON.parse(e);O(xt)}catch{I("Failed to parse pasted JSON text")}},pt=()=>{i.length!==0&&(r("QUIZ"),u(0),f(0),y(null),E(!1),_(null),ft([]),vt(null),bt(null))},Ct=xt=>{if(v)return;y(xt),E(!0);const Lt=xt===Et.correct;Lt&&f(we=>we+1);const Kt={question:Et,selectedIdx:xt,isCorrect:Lt};ft(we=>[...we,Kt])},_t=()=>{if(v)return;const xt={question:Et,selectedIdx:null,isCorrect:!1};ft(Lt=>[...Lt,xt]),a<i.length-1?(u(Lt=>Lt+1),y(null),E(!1),_(null)):yi()},ze=async(xt,Lt)=>{x(!0);const Kt=await n9({question:xt.q,selectedAnswer:Lt!==null?xt.a[Lt]:"Skipped",correctAnswer:xt.a[xt.correct],isCorrect:Lt===xt.correct,topic:xt.topic});_(Kt),x(!1)},Ee=()=>{a<i.length-1?(u(xt=>xt+1),y(null),E(!1),_(null)):yi()},yi=async()=>{r("END"),$(!0);const xt=await s9(at);vt(xt),$(!1)};return W.jsxs("div",{className:"min-h-screen bg-neutral-50 text-neutral-900 font-sans selection:bg-indigo-100",children:[W.jsx("header",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-neutral-200 px-6 py-4",children:W.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[W.jsxs("div",{className:"flex items-center gap-2",children:[W.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg",children:W.jsx(pI,{className:"text-white w-6 h-6"})}),W.jsxs("h1",{className:"text-xl font-bold tracking-tight text-neutral-800",children:["Test ",W.jsx("span",{className:"text-indigo-600",children:"Master"})]})]}),s==="QUIZ"&&W.jsxs("div",{className:"flex items-center gap-4",children:[W.jsxs("div",{className:"text-sm font-medium text-neutral-500",children:["Question ",a+1," of ",i.length]}),W.jsx("div",{className:"h-2 w-32 bg-neutral-100 rounded-full overflow-hidden",children:W.jsx(Ka.div,{className:"h-full bg-indigo-600",initial:{width:0},animate:{width:`${(a+1)/i.length*100}%`}})})]})]})}),W.jsx("main",{className:"max-w-5xl mx-auto px-6 py-12",children:W.jsxs(ZE,{mode:"wait",children:[s==="START"&&W.jsxs(Ka.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-12",children:[W.jsxs("div",{className:"space-y-4",children:[W.jsxs("h2",{className:"text-5xl font-extrabold tracking-tight text-neutral-900 leading-tight",children:["The Ultimate ",W.jsx("span",{className:"text-indigo-600",children:"Study Companion"})]}),W.jsx("p",{className:"text-xl text-neutral-600 max-w-xl mx-auto",children:"Generate quizzes from PDFs, upload JSON, or paste text. Get deep AI analysis of your performance."})]}),W.jsx("div",{className:"max-w-md mx-auto w-full",children:W.jsxs("div",{className:"w-full p-8 bg-white border border-neutral-200 rounded-[2rem] shadow-sm space-y-6",children:[W.jsxs("div",{className:"flex items-center gap-2 text-neutral-600",children:[W.jsx(S4,{className:"w-6 h-6"}),W.jsx("span",{className:"font-bold text-sm uppercase tracking-wider",children:"Generate from PDF"})]}),W.jsxs("div",{className:"space-y-2 text-left",children:[W.jsx("label",{className:"text-xs font-bold text-neutral-400 uppercase ml-1",children:"Question Count"}),W.jsx("input",{type:"number",value:k,onChange:xt=>B(Number(xt.target.value)),className:"w-full p-4 bg-neutral-50 border border-neutral-200 rounded-2xl text-lg font-medium focus:ring-2 focus:ring-indigo-500 outline-none transition-all",min:"1",max:"20"})]}),W.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-48 border-2 border-neutral-200 border-dashed rounded-[2rem] cursor-pointer hover:bg-neutral-50 transition-colors group",children:[L?W.jsxs("div",{className:"flex flex-col items-center",children:[W.jsx("div",{className:"w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mb-4"}),W.jsx("p",{className:"text-sm font-medium text-neutral-500",children:"Generating Questions..."})]}):W.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[W.jsx("div",{className:"bg-neutral-100 p-4 rounded-2xl mb-4 group-hover:bg-indigo-50 transition-colors",children:W.jsx(N4,{className:"w-8 h-8 text-neutral-400 group-hover:text-indigo-600 transition-colors"})}),W.jsx("p",{className:"text-lg text-neutral-500 font-bold",children:"Upload Study PDF"}),W.jsx("p",{className:"text-sm text-neutral-400",children:"PDF will be analyzed by AI"})]}),W.jsx("input",{type:"file",className:"hidden",accept:".pdf",onChange:ot,disabled:L})]}),i.length>0&&!N&&W.jsxs("div",{className:"flex items-center gap-2 p-4 bg-emerald-50 text-emerald-600 rounded-2xl text-sm font-bold",children:[W.jsx(ob,{className:"w-5 h-5 shrink-0"}),i.length," Questions Ready"]})]})}),N&&W.jsxs("div",{className:"max-w-md mx-auto flex items-center gap-2 p-4 bg-rose-50 text-rose-600 rounded-2xl text-sm font-medium",children:[W.jsx(m4,{className:"w-5 h-5 shrink-0"}),N]}),W.jsxs("button",{onClick:pt,disabled:i.length===0,className:"group relative inline-flex items-center justify-center gap-3 bg-neutral-900 text-white px-16 py-6 rounded-[2rem] font-bold text-2xl hover:bg-indigo-600 disabled:bg-neutral-200 disabled:cursor-not-allowed transition-all shadow-2xl hover:shadow-indigo-200",children:["Start Test",W.jsx(mI,{className:"w-8 h-8 group-hover:translate-x-1 transition-transform"})]}),W.jsx(ZE,{children:j&&W.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 bg-black/40 backdrop-blur-sm",children:W.jsx(Ka.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"w-full max-w-2xl bg-white rounded-[2.5rem] shadow-2xl overflow-hidden",children:W.jsxs("div",{className:"p-8 space-y-6",children:[W.jsxs("div",{className:"flex items-center justify-between",children:[W.jsxs("div",{className:"flex items-center gap-3 text-neutral-800",children:[W.jsx("div",{className:"bg-indigo-100 p-2 rounded-xl",children:W.jsx(A4,{className:"w-6 h-6 text-indigo-600"})}),W.jsx("h3",{className:"text-2xl font-bold",children:"Developer JSON Paste"})]}),W.jsx("button",{onClick:()=>et(!1),className:"text-neutral-400 hover:text-neutral-600 font-bold",children:"Close"})]}),W.jsxs("div",{className:"space-y-4",children:[W.jsx("textarea",{value:e,onChange:xt=>n(xt.target.value),placeholder:'[{"topic": "...", "q": "...", "a": ["..."], "correct": 0}]',className:"w-full h-64 p-6 bg-neutral-50 border border-neutral-200 rounded-3xl font-mono text-xs focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none resize-none"}),W.jsxs("div",{className:"flex items-center justify-between",children:[W.jsx("p",{className:"text-xs text-neutral-400",children:"Format: Array of Question objects"}),W.jsx("button",{onClick:()=>{ut(),N||et(!1)},className:"bg-indigo-600 text-white px-8 py-3 rounded-2xl font-bold hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-200",children:"Apply Changes"})]})]})]})})})})]},"start"),s==="QUIZ"&&i.length>0&&W.jsxs(Ka.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"max-w-3xl mx-auto space-y-8",children:[W.jsxs("div",{className:"flex justify-between items-start",children:[W.jsxs("div",{className:"space-y-2",children:[W.jsx("span",{className:"inline-block px-3 py-1 bg-indigo-50 text-indigo-700 text-xs font-bold uppercase tracking-widest rounded-full",children:Et.topic}),W.jsx("h3",{className:"text-3xl font-bold text-neutral-900 leading-tight",children:Et.q})]}),!v&&W.jsxs("button",{onClick:_t,className:"flex items-center gap-1 text-neutral-400 hover:text-indigo-600 font-bold text-sm transition-colors",children:["Skip ",W.jsx(x4,{className:"w-4 h-4"})]})]}),W.jsx("div",{className:"grid gap-4",children:Et.a.map((xt,Lt)=>{const Kt=Lt===Et.correct,we=p===Lt;let vi="border-neutral-200 hover:border-indigo-300 hover:bg-indigo-50/50";return v&&(Kt?vi="border-emerald-500 bg-emerald-50 text-emerald-900":we?vi="border-rose-500 bg-rose-50 text-rose-900":vi="border-neutral-100 opacity-50 grayscale"),W.jsxs("button",{disabled:v,onClick:()=>Ct(Lt),className:`group relative w-full text-left p-6 rounded-2xl border-2 transition-all duration-300 flex items-center justify-between ${vi}`,children:[W.jsx("span",{className:"text-lg font-medium",children:xt}),v&&Kt&&W.jsx(ob,{className:"text-emerald-600 w-6 h-6"}),v&&we&&!Kt&&W.jsx(gI,{className:"text-rose-600 w-6 h-6"})]},Lt)})}),v&&W.jsxs(Ka.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-6",children:[W.jsxs("div",{className:"bg-white border border-neutral-200 rounded-3xl p-8 shadow-sm relative overflow-hidden",children:[W.jsxs("div",{className:"flex items-center justify-between mb-4",children:[W.jsxs("div",{className:"flex items-center gap-2",children:[W.jsx(rb,{className:"w-5 h-5 text-indigo-600"}),W.jsx("h4",{className:"text-sm font-bold uppercase tracking-widest text-indigo-600",children:"AI Insights"})]}),!b&&W.jsx("button",{onClick:()=>ze(Et,p),disabled:w,className:"text-xs font-bold bg-indigo-600 text-white px-4 py-2 rounded-full hover:bg-indigo-700 transition-all disabled:opacity-50",children:w?"Thinking...":"Get AI Explanation"})]}),b&&W.jsx("p",{className:"text-lg leading-relaxed text-neutral-700 animate-fade-in",children:b})]}),W.jsxs("button",{onClick:Ee,className:"w-full bg-neutral-900 text-white py-5 rounded-2xl font-bold text-xl hover:bg-indigo-600 transition-all flex items-center justify-center gap-2 shadow-lg",children:[a===i.length-1?"Finish Test":"Next Question",W.jsx(mI,{className:"w-6 h-6"})]})]})]},"quiz"),s==="END"&&W.jsxs(Ka.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-12",children:[W.jsxs("div",{className:"text-center space-y-6",children:[W.jsxs("div",{className:"relative inline-block",children:[W.jsx(D4,{className:"w-24 h-24 text-amber-400 mx-auto"}),W.jsx(Ka.div,{className:"absolute inset-0 bg-amber-400/20 blur-3xl rounded-full",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0}})]}),W.jsxs("div",{className:"space-y-2",children:[W.jsx("h2",{className:"text-5xl font-black text-neutral-900",children:"Test Complete!"}),W.jsxs("div",{className:"text-7xl font-black text-indigo-600",children:[Math.round(h/i.length*100),"%"]}),W.jsxs("p",{className:"text-xl text-neutral-600",children:["Score: ",W.jsx("span",{className:"font-bold text-neutral-900",children:h})," / ",i.length]})]})]}),W.jsxs("div",{className:"bg-white border border-neutral-200 rounded-3xl p-8 shadow-sm space-y-4",children:[W.jsxs("div",{className:"flex items-center gap-2",children:[W.jsx(pI,{className:"w-6 h-6 text-indigo-600"}),W.jsx("h3",{className:"text-xl font-bold",children:"Struggling Topics & Analysis"})]}),G?W.jsxs("div",{className:"flex items-center gap-3 text-neutral-400 italic",children:[W.jsx("div",{className:"w-4 h-4 border-2 border-indigo-600 border-t-transparent rounded-full animate-spin"}),"Analyzing your mistakes..."]}):W.jsx("p",{className:"text-lg text-neutral-700 leading-relaxed",children:lt})]}),W.jsxs("div",{className:"space-y-6",children:[W.jsxs("div",{className:"flex items-center gap-2",children:[W.jsx(b4,{className:"w-6 h-6 text-neutral-400"}),W.jsx("h3",{className:"text-xl font-bold",children:"Question Overview"})]}),W.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:at.map((xt,Lt)=>W.jsxs("button",{onClick:()=>{bt(Lt),_(null)},className:`p-4 rounded-2xl border-2 transition-all text-center font-bold ${it===Lt?"border-indigo-600 bg-indigo-50 text-indigo-700":xt.selectedIdx===null?"border-neutral-200 bg-neutral-100 text-neutral-400":xt.isCorrect?"border-emerald-200 bg-emerald-50 text-emerald-600":"border-rose-200 bg-rose-50 text-rose-600"}`,children:["Q",Lt+1]},Lt))}),W.jsx(ZE,{mode:"wait",children:it!==null&&W.jsxs(Ka.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white border border-neutral-200 rounded-3xl p-8 shadow-sm space-y-6",children:[W.jsxs("div",{className:"flex justify-between items-start",children:[W.jsxs("div",{className:"space-y-1",children:[W.jsx("span",{className:"text-xs font-bold text-neutral-400 uppercase tracking-widest",children:at[it].question.topic}),W.jsx("h4",{className:"text-xl font-bold",children:at[it].question.q})]}),W.jsx("div",{className:"flex items-center gap-2",children:at[it].selectedIdx===null?W.jsx("span",{className:"px-3 py-1 bg-neutral-100 text-neutral-500 rounded-full text-xs font-bold",children:"SKIPPED"}):at[it].isCorrect?W.jsx("span",{className:"px-3 py-1 bg-emerald-100 text-emerald-600 rounded-full text-xs font-bold",children:"CORRECT"}):W.jsx("span",{className:"px-3 py-1 bg-rose-100 text-rose-600 rounded-full text-xs font-bold",children:"INCORRECT"})})]}),W.jsx("div",{className:"grid gap-3",children:at[it].question.a.map((xt,Lt)=>{const Kt=Lt===at[it].question.correct,we=Lt===at[it].selectedIdx;return W.jsxs("div",{className:`p-4 rounded-xl border-2 flex items-center justify-between ${Kt?"border-emerald-500 bg-emerald-50 text-emerald-900":we?"border-rose-500 bg-rose-50 text-rose-900":"border-neutral-100 opacity-50"}`,children:[W.jsx("span",{className:"font-medium",children:xt}),Kt&&W.jsx(ob,{className:"w-5 h-5 text-emerald-600"}),we&&!Kt&&W.jsx(gI,{className:"w-5 h-5 text-rose-600"})]},Lt)})}),W.jsxs("div",{className:"bg-indigo-50/50 rounded-2xl p-6 space-y-4 border border-indigo-100",children:[W.jsxs("div",{className:"flex items-center justify-between",children:[W.jsxs("div",{className:"flex items-center gap-2",children:[W.jsx(rb,{className:"w-4 h-4 text-indigo-600"}),W.jsx("span",{className:"text-xs font-bold text-indigo-600 uppercase tracking-widest",children:"AI Explanation"})]}),!b&&W.jsx("button",{onClick:()=>ze(at[it].question,at[it].selectedIdx),disabled:w,className:"text-xs font-bold bg-indigo-600 text-white px-4 py-2 rounded-full hover:bg-indigo-700 transition-all",children:w?"Thinking...":"Explain This"})]}),b&&W.jsx("p",{className:"text-neutral-700 leading-relaxed italic",children:b})]})]},it)})]}),W.jsx("div",{className:"flex justify-center pt-8",children:W.jsxs("button",{onClick:()=>r("START"),className:"inline-flex items-center gap-2 bg-neutral-900 text-white px-10 py-5 rounded-2xl font-bold text-xl hover:bg-indigo-600 transition-all shadow-xl",children:[W.jsx(_4,{className:"w-6 h-6"}),"New Test"]})})]},"end")]})}),W.jsx("footer",{className:"max-w-4xl mx-auto px-6 py-12 border-t border-neutral-200",children:W.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6 text-sm text-neutral-400 font-medium",children:[W.jsxs("div",{className:"flex items-center gap-4",children:[W.jsxs("div",{className:"flex items-center gap-1",children:[W.jsx(d4,{className:"w-4 h-4"}),W.jsx("span",{children:"Multi-Source Questions"})]}),W.jsxs("div",{className:"flex items-center gap-1",children:[W.jsx(rb,{className:"w-4 h-4"}),W.jsx("span",{children:"Gemini Pro Powered"})]})]}),W.jsx("p",{children:" 2024 Test Master  AI Study Assistant"})]})})]})}dV.createRoot(document.getElementById("root")).render(W.jsx(rt.StrictMode,{children:W.jsx(i7,{})}));
