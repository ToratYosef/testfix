var hU=Object.defineProperty;var YD=s=>{throw TypeError(s)};var dU=(s,t,e)=>t in s?hU(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var $=(s,t,e)=>dU(s,typeof t!="symbol"?t+"":t,e),sS=(s,t,e)=>t.has(s)||YD("Cannot "+e);var c=(s,t,e)=>(sS(s,t,"read from private field"),e?e.call(s):t.get(s)),_=(s,t,e)=>t.has(s)?YD("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),E=(s,t,e,n)=>(sS(s,t,"write to private field"),n?n.call(s,e):t.set(s,e),e),C=(s,t,e)=>(sS(s,t,"access private method"),e);var un=(s,t,e,n)=>({set _(r){E(s,t,r,e)},get _(){return c(s,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();var aS={exports:{}},gp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XD;function fU(){if(XD)return gp;XD=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,r,o){var u=null;if(o!==void 0&&(u=""+o),r.key!==void 0&&(u=""+r.key),"key"in r){o={};for(var h in r)h!=="key"&&(o[h]=r[h])}else o=r;return r=o.ref,{$$typeof:s,type:n,key:u,ref:r!==void 0?r:null,props:o}}return gp.Fragment=t,gp.jsx=e,gp.jsxs=e,gp}var qD;function pU(){return qD||(qD=1,aS.exports=fU()),aS.exports}var X=pU(),rS={exports:{}},Mt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KD;function mU(){if(KD)return Mt;KD=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function A(B){return B===null||typeof B!="object"?null:(B=b&&B[b]||B["@@iterator"],typeof B=="function"?B:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,x={};function D(B,q,nt){this.props=B,this.context=q,this.refs=x,this.updater=nt||S}D.prototype.isReactComponent={},D.prototype.setState=function(B,q){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,q,"setState")},D.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function O(){}O.prototype=D.prototype;function M(B,q,nt){this.props=B,this.context=q,this.refs=x,this.updater=nt||S}var N=M.prototype=new O;N.constructor=M,w(N,D.prototype),N.isPureReactComponent=!0;var L=Array.isArray;function I(){}var k={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function W(B,q,nt){var at=nt.ref;return{$$typeof:s,type:B,key:q,ref:at!==void 0?at:null,props:nt}}function it(B,q){return W(B.type,q,B.props)}function et(B){return typeof B=="object"&&B!==null&&B.$$typeof===s}function ot(B){var q={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(nt){return q[nt]})}var Tt=/\/+/g;function yt(B,q){return typeof B=="object"&&B!==null&&B.key!=null?ot(""+B.key):q.toString(36)}function bt(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(I,I):(B.status="pending",B.then(function(q){B.status==="pending"&&(B.status="fulfilled",B.value=q)},function(q){B.status==="pending"&&(B.status="rejected",B.reason=q)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function F(B,q,nt,at,ct){var vt=typeof B;(vt==="undefined"||vt==="boolean")&&(B=null);var Et=!1;if(B===null)Et=!0;else switch(vt){case"bigint":case"string":case"number":Et=!0;break;case"object":switch(B.$$typeof){case s:case t:Et=!0;break;case m:return Et=B._init,F(Et(B._payload),q,nt,at,ct)}}if(Et)return ct=ct(B),Et=at===""?"."+yt(B,0):at,L(ct)?(nt="",Et!=null&&(nt=Et.replace(Tt,"$&/")+"/"),F(ct,q,nt,"",function(hi){return hi})):ct!=null&&(et(ct)&&(ct=it(ct,nt+(ct.key==null||B&&B.key===ct.key?"":(""+ct.key).replace(Tt,"$&/")+"/")+Et)),q.push(ct)),1;Et=0;var Fe=at===""?".":at+":";if(L(B))for(var ye=0;ye<B.length;ye++)at=B[ye],vt=Fe+yt(at,ye),Et+=F(at,q,nt,vt,ct);else if(ye=A(B),typeof ye=="function")for(B=ye.call(B),ye=0;!(at=B.next()).done;)at=at.value,vt=Fe+yt(at,ye++),Et+=F(at,q,nt,vt,ct);else if(vt==="object"){if(typeof B.then=="function")return F(bt(B),q,nt,at,ct);throw q=String(B),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return Et}function Y(B,q,nt){if(B==null)return B;var at=[],ct=0;return F(B,at,"","",function(vt){return q.call(nt,vt,ct++)}),at}function tt(B){if(B._status===-1){var q=B._result;q=q(),q.then(function(nt){(B._status===0||B._status===-1)&&(B._status=1,B._result=nt)},function(nt){(B._status===0||B._status===-1)&&(B._status=2,B._result=nt)}),B._status===-1&&(B._status=0,B._result=q)}if(B._status===1)return B._result.default;throw B._result}var At=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},gt={map:Y,forEach:function(B,q,nt){Y(B,function(){q.apply(this,arguments)},nt)},count:function(B){var q=0;return Y(B,function(){q++}),q},toArray:function(B){return Y(B,function(q){return q})||[]},only:function(B){if(!et(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return Mt.Activity=y,Mt.Children=gt,Mt.Component=D,Mt.Fragment=e,Mt.Profiler=r,Mt.PureComponent=M,Mt.StrictMode=n,Mt.Suspense=f,Mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Mt.__COMPILER_RUNTIME={__proto__:null,c:function(B){return k.H.useMemoCache(B)}},Mt.cache=function(B){return function(){return B.apply(null,arguments)}},Mt.cacheSignal=function(){return null},Mt.cloneElement=function(B,q,nt){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var at=w({},B.props),ct=B.key;if(q!=null)for(vt in q.key!==void 0&&(ct=""+q.key),q)!z.call(q,vt)||vt==="key"||vt==="__self"||vt==="__source"||vt==="ref"&&q.ref===void 0||(at[vt]=q[vt]);var vt=arguments.length-2;if(vt===1)at.children=nt;else if(1<vt){for(var Et=Array(vt),Fe=0;Fe<vt;Fe++)Et[Fe]=arguments[Fe+2];at.children=Et}return W(B.type,ct,at)},Mt.createContext=function(B){return B={$$typeof:u,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:o,_context:B},B},Mt.createElement=function(B,q,nt){var at,ct={},vt=null;if(q!=null)for(at in q.key!==void 0&&(vt=""+q.key),q)z.call(q,at)&&at!=="key"&&at!=="__self"&&at!=="__source"&&(ct[at]=q[at]);var Et=arguments.length-2;if(Et===1)ct.children=nt;else if(1<Et){for(var Fe=Array(Et),ye=0;ye<Et;ye++)Fe[ye]=arguments[ye+2];ct.children=Fe}if(B&&B.defaultProps)for(at in Et=B.defaultProps,Et)ct[at]===void 0&&(ct[at]=Et[at]);return W(B,vt,ct)},Mt.createRef=function(){return{current:null}},Mt.forwardRef=function(B){return{$$typeof:h,render:B}},Mt.isValidElement=et,Mt.lazy=function(B){return{$$typeof:m,_payload:{_status:-1,_result:B},_init:tt}},Mt.memo=function(B,q){return{$$typeof:p,type:B,compare:q===void 0?null:q}},Mt.startTransition=function(B){var q=k.T,nt={};k.T=nt;try{var at=B(),ct=k.S;ct!==null&&ct(nt,at),typeof at=="object"&&at!==null&&typeof at.then=="function"&&at.then(I,At)}catch(vt){At(vt)}finally{q!==null&&nt.types!==null&&(q.types=nt.types),k.T=q}},Mt.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Mt.use=function(B){return k.H.use(B)},Mt.useActionState=function(B,q,nt){return k.H.useActionState(B,q,nt)},Mt.useCallback=function(B,q){return k.H.useCallback(B,q)},Mt.useContext=function(B){return k.H.useContext(B)},Mt.useDebugValue=function(){},Mt.useDeferredValue=function(B,q){return k.H.useDeferredValue(B,q)},Mt.useEffect=function(B,q){return k.H.useEffect(B,q)},Mt.useEffectEvent=function(B){return k.H.useEffectEvent(B)},Mt.useId=function(){return k.H.useId()},Mt.useImperativeHandle=function(B,q,nt){return k.H.useImperativeHandle(B,q,nt)},Mt.useInsertionEffect=function(B,q){return k.H.useInsertionEffect(B,q)},Mt.useLayoutEffect=function(B,q){return k.H.useLayoutEffect(B,q)},Mt.useMemo=function(B,q){return k.H.useMemo(B,q)},Mt.useOptimistic=function(B,q){return k.H.useOptimistic(B,q)},Mt.useReducer=function(B,q,nt){return k.H.useReducer(B,q,nt)},Mt.useRef=function(B){return k.H.useRef(B)},Mt.useState=function(B){return k.H.useState(B)},Mt.useSyncExternalStore=function(B,q,nt){return k.H.useSyncExternalStore(B,q,nt)},Mt.useTransition=function(){return k.H.useTransition()},Mt.version="19.2.4",Mt}var $D;function $_(){return $D||($D=1,rS.exports=mU()),rS.exports}var st=$_(),oS={exports:{}},yp={},lS={exports:{}},cS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WD;function gU(){return WD||(WD=1,(function(s){function t(F,Y){var tt=F.length;F.push(Y);t:for(;0<tt;){var At=tt-1>>>1,gt=F[At];if(0<r(gt,Y))F[At]=Y,F[tt]=gt,tt=At;else break t}}function e(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var Y=F[0],tt=F.pop();if(tt!==Y){F[0]=tt;t:for(var At=0,gt=F.length,B=gt>>>1;At<B;){var q=2*(At+1)-1,nt=F[q],at=q+1,ct=F[at];if(0>r(nt,tt))at<gt&&0>r(ct,nt)?(F[At]=ct,F[at]=tt,At=at):(F[At]=nt,F[q]=tt,At=q);else if(at<gt&&0>r(ct,tt))F[At]=ct,F[at]=tt,At=at;else break t}}return Y}function r(F,Y){var tt=F.sortIndex-Y.sortIndex;return tt!==0?tt:F.id-Y.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();s.unstable_now=function(){return u.now()-h}}var f=[],p=[],m=1,y=null,b=3,A=!1,S=!1,w=!1,x=!1,D=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function N(F){for(var Y=e(p);Y!==null;){if(Y.callback===null)n(p);else if(Y.startTime<=F)n(p),Y.sortIndex=Y.expirationTime,t(f,Y);else break;Y=e(p)}}function L(F){if(w=!1,N(F),!S)if(e(f)!==null)S=!0,I||(I=!0,ot());else{var Y=e(p);Y!==null&&bt(L,Y.startTime-F)}}var I=!1,k=-1,z=5,W=-1;function it(){return x?!0:!(s.unstable_now()-W<z)}function et(){if(x=!1,I){var F=s.unstable_now();W=F;var Y=!0;try{t:{S=!1,w&&(w=!1,O(k),k=-1),A=!0;var tt=b;try{e:{for(N(F),y=e(f);y!==null&&!(y.expirationTime>F&&it());){var At=y.callback;if(typeof At=="function"){y.callback=null,b=y.priorityLevel;var gt=At(y.expirationTime<=F);if(F=s.unstable_now(),typeof gt=="function"){y.callback=gt,N(F),Y=!0;break e}y===e(f)&&n(f),N(F)}else n(f);y=e(f)}if(y!==null)Y=!0;else{var B=e(p);B!==null&&bt(L,B.startTime-F),Y=!1}}break t}finally{y=null,b=tt,A=!1}Y=void 0}}finally{Y?ot():I=!1}}}var ot;if(typeof M=="function")ot=function(){M(et)};else if(typeof MessageChannel<"u"){var Tt=new MessageChannel,yt=Tt.port2;Tt.port1.onmessage=et,ot=function(){yt.postMessage(null)}}else ot=function(){D(et,0)};function bt(F,Y){k=D(function(){F(s.unstable_now())},Y)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(F){F.callback=null},s.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<F?Math.floor(1e3/F):5},s.unstable_getCurrentPriorityLevel=function(){return b},s.unstable_next=function(F){switch(b){case 1:case 2:case 3:var Y=3;break;default:Y=b}var tt=b;b=Y;try{return F()}finally{b=tt}},s.unstable_requestPaint=function(){x=!0},s.unstable_runWithPriority=function(F,Y){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var tt=b;b=F;try{return Y()}finally{b=tt}},s.unstable_scheduleCallback=function(F,Y,tt){var At=s.unstable_now();switch(typeof tt=="object"&&tt!==null?(tt=tt.delay,tt=typeof tt=="number"&&0<tt?At+tt:At):tt=At,F){case 1:var gt=-1;break;case 2:gt=250;break;case 5:gt=1073741823;break;case 4:gt=1e4;break;default:gt=5e3}return gt=tt+gt,F={id:m++,callback:Y,priorityLevel:F,startTime:tt,expirationTime:gt,sortIndex:-1},tt>At?(F.sortIndex=tt,t(p,F),e(f)===null&&F===e(p)&&(w?(O(k),k=-1):w=!0,bt(L,tt-At))):(F.sortIndex=gt,t(f,F),S||A||(S=!0,I||(I=!0,ot()))),F},s.unstable_shouldYield=it,s.unstable_wrapCallback=function(F){var Y=b;return function(){var tt=b;b=Y;try{return F.apply(this,arguments)}finally{b=tt}}}})(cS)),cS}var QD;function yU(){return QD||(QD=1,lS.exports=gU()),lS.exports}var uS={exports:{}},jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZD;function bU(){if(ZD)return jn;ZD=1;var s=$_();function t(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)p+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(f,p,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:f,containerInfo:p,implementation:m}}var u=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,jn.createPortal=function(f,p){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return o(f,p,null,m)},jn.flushSync=function(f){var p=u.T,m=n.p;try{if(u.T=null,n.p=2,f)return f()}finally{u.T=p,n.p=m,n.d.f()}},jn.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,n.d.C(f,p))},jn.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},jn.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var m=p.as,y=h(m,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;m==="style"?n.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:A}):m==="script"&&n.d.X(f,{crossOrigin:y,integrity:b,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},jn.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var m=h(p.as,p.crossOrigin);n.d.M(f,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&n.d.M(f)},jn.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var m=p.as,y=h(m,p.crossOrigin);n.d.L(f,m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},jn.preloadModule=function(f,p){if(typeof f=="string")if(p){var m=h(p.as,p.crossOrigin);n.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else n.d.m(f)},jn.requestFormReset=function(f){n.d.r(f)},jn.unstable_batchedUpdates=function(f,p){return f(p)},jn.useFormState=function(f,p,m){return u.H.useFormState(f,p,m)},jn.useFormStatus=function(){return u.H.useHostTransitionStatus()},jn.version="19.2.4",jn}var JD;function vU(){if(JD)return uS.exports;JD=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),uS.exports=bU(),uS.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tM;function AU(){if(tM)return yp;tM=1;var s=yU(),t=$_(),e=vU();function n(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function u(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function h(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function f(i){if(o(i)!==i)throw Error(n(188))}function p(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(n(188));return a!==i?null:i}for(var l=i,d=a;;){var g=l.return;if(g===null)break;var v=g.alternate;if(v===null){if(d=g.return,d!==null){l=d;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===l)return f(g),i;if(v===d)return f(g),a;v=v.sibling}throw Error(n(188))}if(l.return!==d.return)l=g,d=v;else{for(var T=!1,R=g.child;R;){if(R===l){T=!0,l=g,d=v;break}if(R===d){T=!0,d=g,l=v;break}R=R.sibling}if(!T){for(R=v.child;R;){if(R===l){T=!0,l=v,d=g;break}if(R===d){T=!0,d=v,l=g;break}R=R.sibling}if(!T)throw Error(n(189))}}if(l.alternate!==d)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?i:a}function m(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=m(i),a!==null)return a;i=i.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),M=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),it=Symbol.for("react.memo_cache_sentinel"),et=Symbol.iterator;function ot(i){return i===null||typeof i!="object"?null:(i=et&&i[et]||i["@@iterator"],typeof i=="function"?i:null)}var Tt=Symbol.for("react.client.reference");function yt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Tt?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case D:return"Profiler";case x:return"StrictMode";case L:return"Suspense";case I:return"SuspenseList";case W:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case M:return i.displayName||"Context";case O:return(i._context.displayName||"Context")+".Consumer";case N:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case k:return a=i.displayName||null,a!==null?a:yt(i.type)||"Memo";case z:a=i._payload,i=i._init;try{return yt(i(a))}catch{}}return null}var bt=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt={pending:!1,data:null,method:null,action:null},At=[],gt=-1;function B(i){return{current:i}}function q(i){0>gt||(i.current=At[gt],At[gt]=null,gt--)}function nt(i,a){gt++,At[gt]=i.current,i.current=a}var at=B(null),ct=B(null),vt=B(null),Et=B(null);function Fe(i,a){switch(nt(vt,a),nt(ct,i),nt(at,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?pD(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=pD(a),i=mD(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}q(at),nt(at,i)}function ye(){q(at),q(ct),q(vt)}function hi(i){i.memoizedState!==null&&nt(Et,i);var a=at.current,l=mD(a,i.type);a!==l&&(nt(ct,i),nt(at,l))}function _t(i){ct.current===i&&(q(at),q(ct)),Et.current===i&&(q(Et),dp._currentValue=tt)}var Rt,Gt;function Ee(i){if(Rt===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Rt=a&&a[1]||"",Gt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rt+i+Gt}var di=!1;function py(i,a){if(!i||di)return"";di=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(K){var G=K}Reflect.construct(i,[],J)}else{try{J.call()}catch(K){G=K}i.call(J.prototype)}}else{try{throw Error()}catch(K){G=K}(J=i())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(K){if(K&&G&&typeof K.stack=="string")return[K.stack,G.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),T=v[0],R=v[1];if(T&&R){var P=T.split(`
`),j=R.split(`
`);for(g=d=0;d<P.length&&!P[d].includes("DetermineComponentFrameRoot");)d++;for(;g<j.length&&!j[g].includes("DetermineComponentFrameRoot");)g++;if(d===P.length||g===j.length)for(d=P.length-1,g=j.length-1;1<=d&&0<=g&&P[d]!==j[g];)g--;for(;1<=d&&0<=g;d--,g--)if(P[d]!==j[g]){if(d!==1||g!==1)do if(d--,g--,0>g||P[d]!==j[g]){var Q=`
`+P[d].replace(" at new "," at ");return i.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",i.displayName)),Q}while(1<=d&&0<=g);break}}}finally{di=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?Ee(l):""}function Y1(i,a){switch(i.tag){case 26:case 27:case 5:return Ee(i.type);case 16:return Ee("Lazy");case 13:return i.child!==a&&a!==null?Ee("Suspense Fallback"):Ee("Suspense");case 19:return Ee("SuspenseList");case 0:case 15:return py(i.type,!1);case 11:return py(i.type.render,!1);case 1:return py(i.type,!0);case 31:return Ee("Activity");default:return""}}function my(i){try{var a="",l=null;do a+=Y1(i,l),l=i,i=i.return;while(i);return a}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Tf=Object.prototype.hasOwnProperty,Gv=s.unstable_scheduleCallback,Yv=s.unstable_cancelCallback,jP=s.unstable_shouldYield,GP=s.unstable_requestPaint,Ni=s.unstable_now,YP=s.unstable_getCurrentPriorityLevel,X1=s.unstable_ImmediatePriority,q1=s.unstable_UserBlockingPriority,gy=s.unstable_NormalPriority,XP=s.unstable_LowPriority,K1=s.unstable_IdlePriority,qP=s.log,KP=s.unstable_setDisableYieldValue,_f=null,Li=null;function uo(i){if(typeof qP=="function"&&KP(i),Li&&typeof Li.setStrictMode=="function")try{Li.setStrictMode(_f,i)}catch{}}var Ii=Math.clz32?Math.clz32:QP,$P=Math.log,WP=Math.LN2;function QP(i){return i>>>=0,i===0?32:31-($P(i)/WP|0)|0}var yy=256,by=262144,vy=4194304;function Vl(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ay(i,a,l){var d=i.pendingLanes;if(d===0)return 0;var g=0,v=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var R=d&134217727;return R!==0?(d=R&~v,d!==0?g=Vl(d):(T&=R,T!==0?g=Vl(T):l||(l=R&~i,l!==0&&(g=Vl(l))))):(R=d&~v,R!==0?g=Vl(R):T!==0?g=Vl(T):l||(l=d&~i,l!==0&&(g=Vl(l)))),g===0?0:a!==0&&a!==g&&(a&v)===0&&(v=g&-g,l=a&-a,v>=l||v===32&&(l&4194048)!==0)?a:g}function wf(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function ZP(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $1(){var i=vy;return vy<<=1,(vy&62914560)===0&&(vy=4194304),i}function Xv(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function xf(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function JP(i,a,l,d,g,v){var T=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var R=i.entanglements,P=i.expirationTimes,j=i.hiddenUpdates;for(l=T&~l;0<l;){var Q=31-Ii(l),J=1<<Q;R[Q]=0,P[Q]=-1;var G=j[Q];if(G!==null)for(j[Q]=null,Q=0;Q<G.length;Q++){var K=G[Q];K!==null&&(K.lane&=-536870913)}l&=~J}d!==0&&W1(i,d,0),v!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=v&~(T&~a))}function W1(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var d=31-Ii(a);i.entangledLanes|=a,i.entanglements[d]=i.entanglements[d]|1073741824|l&261930}function Q1(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var d=31-Ii(l),g=1<<d;g&a|i[d]&a&&(i[d]|=a),l&=~g}}function Z1(i,a){var l=a&-a;return l=(l&42)!==0?1:qv(l),(l&(i.suspendedLanes|a))!==0?0:l}function qv(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Kv(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function J1(){var i=Y.p;return i!==0?i:(i=window.event,i===void 0?32:UD(i.type))}function tw(i,a){var l=Y.p;try{return Y.p=i,a()}finally{Y.p=l}}var ho=Math.random().toString(36).slice(2),xn="__reactFiber$"+ho,fi="__reactProps$"+ho,Iu="__reactContainer$"+ho,$v="__reactEvents$"+ho,tB="__reactListeners$"+ho,eB="__reactHandles$"+ho,ew="__reactResources$"+ho,Cf="__reactMarker$"+ho;function Wv(i){delete i[xn],delete i[fi],delete i[$v],delete i[tB],delete i[eB]}function Pu(i){var a=i[xn];if(a)return a;for(var l=i.parentNode;l;){if(a=l[Iu]||l[xn]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=SD(i);i!==null;){if(l=i[xn])return l;i=SD(i)}return a}i=l,l=i.parentNode}return null}function Bu(i){if(i=i[xn]||i[Iu]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function Df(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(n(33))}function ku(i){var a=i[ew];return a||(a=i[ew]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function yn(i){i[Cf]=!0}var nw=new Set,iw={};function zl(i,a){Uu(i,a),Uu(i+"Capture",a)}function Uu(i,a){for(iw[i]=a,i=0;i<a.length;i++)nw.add(a[i])}var nB=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sw={},aw={};function iB(i){return Tf.call(aw,i)?!0:Tf.call(sw,i)?!1:nB.test(i)?aw[i]=!0:(sw[i]=!0,!1)}function Ey(i,a,l){if(iB(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function Sy(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function Wa(i,a,l,d){if(d===null)i.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+d)}}function fs(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function rw(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function sB(i,a,l){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,v=d.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(T){l=""+T,v.call(this,T)}}),Object.defineProperty(i,a,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Qv(i){if(!i._valueTracker){var a=rw(i)?"checked":"value";i._valueTracker=sB(i,a,""+i[a])}}function ow(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),d="";return i&&(d=rw(i)?i.checked?"true":"false":i.value),i=d,i!==l?(a.setValue(i),!0):!1}function Ty(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var aB=/[\n"\\]/g;function ps(i){return i.replace(aB,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Zv(i,a,l,d,g,v,T,R){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),a!=null?T==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+fs(a)):i.value!==""+fs(a)&&(i.value=""+fs(a)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),a!=null?Jv(i,T,fs(a)):l!=null?Jv(i,T,fs(l)):d!=null&&i.removeAttribute("value"),g==null&&v!=null&&(i.defaultChecked=!!v),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.name=""+fs(R):i.removeAttribute("name")}function lw(i,a,l,d,g,v,T,R){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),a!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||a!=null)){Qv(i);return}l=l!=null?""+fs(l):"",a=a!=null?""+fs(a):l,R||a===i.value||(i.value=a),i.defaultValue=a}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=R?i.checked:!!d,i.defaultChecked=!!d,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T),Qv(i)}function Jv(i,a,l){a==="number"&&Ty(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Fu(i,a,l,d){if(i=i.options,a){a={};for(var g=0;g<l.length;g++)a["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=a.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&d&&(i[l].defaultSelected=!0)}else{for(l=""+fs(l),a=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,d&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function cw(i,a,l){if(a!=null&&(a=""+fs(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+fs(l):""}function uw(i,a,l,d){if(a==null){if(d!=null){if(l!=null)throw Error(n(92));if(bt(d)){if(1<d.length)throw Error(n(93));d=d[0]}l=d}l==null&&(l=""),a=l}l=fs(a),i.defaultValue=l,d=i.textContent,d===l&&d!==""&&d!==null&&(i.value=d),Qv(i)}function Hu(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var rB=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hw(i,a,l){var d=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":d?i.setProperty(a,l):typeof l!="number"||l===0||rB.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function dw(i,a,l){if(a!=null&&typeof a!="object")throw Error(n(62));if(i=i.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var g in a)d=a[g],a.hasOwnProperty(g)&&l[g]!==d&&hw(i,g,d)}else for(var v in a)a.hasOwnProperty(v)&&hw(i,v,a[v])}function tA(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oB=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),lB=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _y(i){return lB.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Qa(){}var eA=null;function nA(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Vu=null,zu=null;function fw(i){var a=Bu(i);if(a&&(i=a.stateNode)){var l=i[fi]||null;t:switch(i=a.stateNode,a.type){case"input":if(Zv(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+ps(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var d=l[a];if(d!==i&&d.form===i.form){var g=d[fi]||null;if(!g)throw Error(n(90));Zv(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<l.length;a++)d=l[a],d.form===i.form&&ow(d)}break t;case"textarea":cw(i,l.value,l.defaultValue);break t;case"select":a=l.value,a!=null&&Fu(i,!!l.multiple,a,!1)}}}var iA=!1;function pw(i,a,l){if(iA)return i(a,l);iA=!0;try{var d=i(a);return d}finally{if(iA=!1,(Vu!==null||zu!==null)&&(h0(),Vu&&(a=Vu,i=zu,zu=Vu=null,fw(a),i)))for(a=0;a<i.length;a++)fw(i[a])}}function Mf(i,a){var l=i.stateNode;if(l===null)return null;var d=l[fi]||null;if(d===null)return null;l=d[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break t;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(n(231,a,typeof l));return l}var Za=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sA=!1;if(Za)try{var Rf={};Object.defineProperty(Rf,"passive",{get:function(){sA=!0}}),window.addEventListener("test",Rf,Rf),window.removeEventListener("test",Rf,Rf)}catch{sA=!1}var fo=null,aA=null,wy=null;function mw(){if(wy)return wy;var i,a=aA,l=a.length,d,g="value"in fo?fo.value:fo.textContent,v=g.length;for(i=0;i<l&&a[i]===g[i];i++);var T=l-i;for(d=1;d<=T&&a[l-d]===g[v-d];d++);return wy=g.slice(i,1<d?1-d:void 0)}function xy(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Cy(){return!0}function gw(){return!1}function pi(i){function a(l,d,g,v,T){this._reactName=l,this._targetInst=g,this.type=d,this.nativeEvent=v,this.target=T,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(l=i[R],this[R]=l?l(v):v[R]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Cy:gw,this.isPropagationStopped=gw,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Cy)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Cy)},persist:function(){},isPersistent:Cy}),a}var jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dy=pi(jl),Of=y({},jl,{view:0,detail:0}),cB=pi(Of),rA,oA,Nf,My=y({},Of,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cA,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Nf&&(Nf&&i.type==="mousemove"?(rA=i.screenX-Nf.screenX,oA=i.screenY-Nf.screenY):oA=rA=0,Nf=i),rA)},movementY:function(i){return"movementY"in i?i.movementY:oA}}),yw=pi(My),uB=y({},My,{dataTransfer:0}),hB=pi(uB),dB=y({},Of,{relatedTarget:0}),lA=pi(dB),fB=y({},jl,{animationName:0,elapsedTime:0,pseudoElement:0}),pB=pi(fB),mB=y({},jl,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),gB=pi(mB),yB=y({},jl,{data:0}),bw=pi(yB),bB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EB(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=AB[i])?!!a[i]:!1}function cA(){return EB}var SB=y({},Of,{key:function(i){if(i.key){var a=bB[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=xy(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?vB[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cA,charCode:function(i){return i.type==="keypress"?xy(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?xy(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),TB=pi(SB),_B=y({},My,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vw=pi(_B),wB=y({},Of,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cA}),xB=pi(wB),CB=y({},jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),DB=pi(CB),MB=y({},My,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),RB=pi(MB),OB=y({},jl,{newState:0,oldState:0}),NB=pi(OB),LB=[9,13,27,32],uA=Za&&"CompositionEvent"in window,Lf=null;Za&&"documentMode"in document&&(Lf=document.documentMode);var IB=Za&&"TextEvent"in window&&!Lf,Aw=Za&&(!uA||Lf&&8<Lf&&11>=Lf),Ew=" ",Sw=!1;function Tw(i,a){switch(i){case"keyup":return LB.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _w(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ju=!1;function PB(i,a){switch(i){case"compositionend":return _w(a);case"keypress":return a.which!==32?null:(Sw=!0,Ew);case"textInput":return i=a.data,i===Ew&&Sw?null:i;default:return null}}function BB(i,a){if(ju)return i==="compositionend"||!uA&&Tw(i,a)?(i=mw(),wy=aA=fo=null,ju=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Aw&&a.locale!=="ko"?null:a.data;default:return null}}var kB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ww(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!kB[i.type]:a==="textarea"}function xw(i,a,l,d){Vu?zu?zu.push(d):zu=[d]:Vu=d,a=b0(a,"onChange"),0<a.length&&(l=new Dy("onChange","change",null,l,d),i.push({event:l,listeners:a}))}var If=null,Pf=null;function UB(i){lD(i,0)}function Ry(i){var a=Df(i);if(ow(a))return i}function Cw(i,a){if(i==="change")return a}var Dw=!1;if(Za){var hA;if(Za){var dA="oninput"in document;if(!dA){var Mw=document.createElement("div");Mw.setAttribute("oninput","return;"),dA=typeof Mw.oninput=="function"}hA=dA}else hA=!1;Dw=hA&&(!document.documentMode||9<document.documentMode)}function Rw(){If&&(If.detachEvent("onpropertychange",Ow),Pf=If=null)}function Ow(i){if(i.propertyName==="value"&&Ry(Pf)){var a=[];xw(a,Pf,i,nA(i)),pw(UB,a)}}function FB(i,a,l){i==="focusin"?(Rw(),If=a,Pf=l,If.attachEvent("onpropertychange",Ow)):i==="focusout"&&Rw()}function HB(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ry(Pf)}function VB(i,a){if(i==="click")return Ry(a)}function zB(i,a){if(i==="input"||i==="change")return Ry(a)}function jB(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Pi=typeof Object.is=="function"?Object.is:jB;function Bf(i,a){if(Pi(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),d=Object.keys(a);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var g=l[d];if(!Tf.call(a,g)||!Pi(i[g],a[g]))return!1}return!0}function Nw(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Lw(i,a){var l=Nw(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=a&&d>=a)return{node:l,offset:a-i};i=d}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=Nw(l)}}function Iw(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Iw(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Pw(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=Ty(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=Ty(i.document)}return a}function fA(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var GB=Za&&"documentMode"in document&&11>=document.documentMode,Gu=null,pA=null,kf=null,mA=!1;function Bw(i,a,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;mA||Gu==null||Gu!==Ty(d)||(d=Gu,"selectionStart"in d&&fA(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),kf&&Bf(kf,d)||(kf=d,d=b0(pA,"onSelect"),0<d.length&&(a=new Dy("onSelect","select",null,a,l),i.push({event:a,listeners:d}),a.target=Gu)))}function Gl(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var Yu={animationend:Gl("Animation","AnimationEnd"),animationiteration:Gl("Animation","AnimationIteration"),animationstart:Gl("Animation","AnimationStart"),transitionrun:Gl("Transition","TransitionRun"),transitionstart:Gl("Transition","TransitionStart"),transitioncancel:Gl("Transition","TransitionCancel"),transitionend:Gl("Transition","TransitionEnd")},gA={},kw={};Za&&(kw=document.createElement("div").style,"AnimationEvent"in window||(delete Yu.animationend.animation,delete Yu.animationiteration.animation,delete Yu.animationstart.animation),"TransitionEvent"in window||delete Yu.transitionend.transition);function Yl(i){if(gA[i])return gA[i];if(!Yu[i])return i;var a=Yu[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in kw)return gA[i]=a[l];return i}var Uw=Yl("animationend"),Fw=Yl("animationiteration"),Hw=Yl("animationstart"),YB=Yl("transitionrun"),XB=Yl("transitionstart"),qB=Yl("transitioncancel"),Vw=Yl("transitionend"),zw=new Map,yA="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yA.push("scrollEnd");function Ys(i,a){zw.set(i,a),zl(a,[i])}var Oy=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},ms=[],Xu=0,bA=0;function Ny(){for(var i=Xu,a=bA=Xu=0;a<i;){var l=ms[a];ms[a++]=null;var d=ms[a];ms[a++]=null;var g=ms[a];ms[a++]=null;var v=ms[a];if(ms[a++]=null,d!==null&&g!==null){var T=d.pending;T===null?g.next=g:(g.next=T.next,T.next=g),d.pending=g}v!==0&&jw(l,g,v)}}function Ly(i,a,l,d){ms[Xu++]=i,ms[Xu++]=a,ms[Xu++]=l,ms[Xu++]=d,bA|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function vA(i,a,l,d){return Ly(i,a,l,d),Iy(i)}function Xl(i,a){return Ly(i,null,null,a),Iy(i)}function jw(i,a,l){i.lanes|=l;var d=i.alternate;d!==null&&(d.lanes|=l);for(var g=!1,v=i.return;v!==null;)v.childLanes|=l,d=v.alternate,d!==null&&(d.childLanes|=l),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(g=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,g&&a!==null&&(g=31-Ii(l),i=v.hiddenUpdates,d=i[g],d===null?i[g]=[a]:d.push(a),a.lane=l|536870912),v):null}function Iy(i){if(50<ap)throw ap=0,DE=null,Error(n(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var qu={};function KB(i,a,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bi(i,a,l,d){return new KB(i,a,l,d)}function AA(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ja(i,a){var l=i.alternate;return l===null?(l=Bi(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function Gw(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Py(i,a,l,d,g,v){var T=0;if(d=i,typeof i=="function")AA(i)&&(T=1);else if(typeof i=="string")T=Jk(i,l,at.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case W:return i=Bi(31,l,a,g),i.elementType=W,i.lanes=v,i;case w:return ql(l.children,g,v,a);case x:T=8,g|=24;break;case D:return i=Bi(12,l,a,g|2),i.elementType=D,i.lanes=v,i;case L:return i=Bi(13,l,a,g),i.elementType=L,i.lanes=v,i;case I:return i=Bi(19,l,a,g),i.elementType=I,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case M:T=10;break t;case O:T=9;break t;case N:T=11;break t;case k:T=14;break t;case z:T=16,d=null;break t}T=29,l=Error(n(130,i===null?"null":typeof i,"")),d=null}return a=Bi(T,l,a,g),a.elementType=i,a.type=d,a.lanes=v,a}function ql(i,a,l,d){return i=Bi(7,i,d,a),i.lanes=l,i}function EA(i,a,l){return i=Bi(6,i,null,a),i.lanes=l,i}function Yw(i){var a=Bi(18,null,null,0);return a.stateNode=i,a}function SA(i,a,l){return a=Bi(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var Xw=new WeakMap;function gs(i,a){if(typeof i=="object"&&i!==null){var l=Xw.get(i);return l!==void 0?l:(a={value:i,source:a,stack:my(a)},Xw.set(i,a),a)}return{value:i,source:a,stack:my(a)}}var Ku=[],$u=0,By=null,Uf=0,ys=[],bs=0,po=null,pa=1,ma="";function tr(i,a){Ku[$u++]=Uf,Ku[$u++]=By,By=i,Uf=a}function qw(i,a,l){ys[bs++]=pa,ys[bs++]=ma,ys[bs++]=po,po=i;var d=pa;i=ma;var g=32-Ii(d)-1;d&=~(1<<g),l+=1;var v=32-Ii(a)+g;if(30<v){var T=g-g%5;v=(d&(1<<T)-1).toString(32),d>>=T,g-=T,pa=1<<32-Ii(a)+g|l<<g|d,ma=v+i}else pa=1<<v|l<<g|d,ma=i}function TA(i){i.return!==null&&(tr(i,1),qw(i,1,0))}function _A(i){for(;i===By;)By=Ku[--$u],Ku[$u]=null,Uf=Ku[--$u],Ku[$u]=null;for(;i===po;)po=ys[--bs],ys[bs]=null,ma=ys[--bs],ys[bs]=null,pa=ys[--bs],ys[bs]=null}function Kw(i,a){ys[bs++]=pa,ys[bs++]=ma,ys[bs++]=po,pa=a.id,ma=a.overflow,po=i}var Cn=null,xe=null,Yt=!1,mo=null,vs=!1,wA=Error(n(519));function go(i){var a=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ff(gs(a,i)),wA}function $w(i){var a=i.stateNode,l=i.type,d=i.memoizedProps;switch(a[xn]=i,a[fi]=d,l){case"dialog":Ht("cancel",a),Ht("close",a);break;case"iframe":case"object":case"embed":Ht("load",a);break;case"video":case"audio":for(l=0;l<op.length;l++)Ht(op[l],a);break;case"source":Ht("error",a);break;case"img":case"image":case"link":Ht("error",a),Ht("load",a);break;case"details":Ht("toggle",a);break;case"input":Ht("invalid",a),lw(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Ht("invalid",a);break;case"textarea":Ht("invalid",a),uw(a,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||d.suppressHydrationWarning===!0||dD(a.textContent,l)?(d.popover!=null&&(Ht("beforetoggle",a),Ht("toggle",a)),d.onScroll!=null&&Ht("scroll",a),d.onScrollEnd!=null&&Ht("scrollend",a),d.onClick!=null&&(a.onclick=Qa),a=!0):a=!1,a||go(i,!0)}function Ww(i){for(Cn=i.return;Cn;)switch(Cn.tag){case 5:case 31:case 13:vs=!1;return;case 27:case 3:vs=!0;return;default:Cn=Cn.return}}function Wu(i){if(i!==Cn)return!1;if(!Yt)return Ww(i),Yt=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||jE(i.type,i.memoizedProps)),l=!l),l&&xe&&go(i),Ww(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));xe=ED(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));xe=ED(i)}else a===27?(a=xe,Ro(i.type)?(i=KE,KE=null,xe=i):xe=a):xe=Cn?Es(i.stateNode.nextSibling):null;return!0}function Kl(){xe=Cn=null,Yt=!1}function xA(){var i=mo;return i!==null&&(bi===null?bi=i:bi.push.apply(bi,i),mo=null),i}function Ff(i){mo===null?mo=[i]:mo.push(i)}var CA=B(null),$l=null,er=null;function yo(i,a,l){nt(CA,a._currentValue),a._currentValue=l}function nr(i){i._currentValue=CA.current,q(CA)}function DA(i,a,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),i===l)break;i=i.return}}function MA(i,a,l,d){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var v=g.dependencies;if(v!==null){var T=g.child;v=v.firstContext;t:for(;v!==null;){var R=v;v=g;for(var P=0;P<a.length;P++)if(R.context===a[P]){v.lanes|=l,R=v.alternate,R!==null&&(R.lanes|=l),DA(v.return,l,i),d||(T=null);break t}v=R.next}}else if(g.tag===18){if(T=g.return,T===null)throw Error(n(341));T.lanes|=l,v=T.alternate,v!==null&&(v.lanes|=l),DA(T,l,i),T=null}else T=g.child;if(T!==null)T.return=g;else for(T=g;T!==null;){if(T===i){T=null;break}if(g=T.sibling,g!==null){g.return=T.return,T=g;break}T=T.return}g=T}}function Qu(i,a,l,d){i=null;for(var g=a,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var T=g.alternate;if(T===null)throw Error(n(387));if(T=T.memoizedProps,T!==null){var R=g.type;Pi(g.pendingProps.value,T.value)||(i!==null?i.push(R):i=[R])}}else if(g===Et.current){if(T=g.alternate,T===null)throw Error(n(387));T.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(dp):i=[dp])}g=g.return}i!==null&&MA(a,i,l,d),a.flags|=262144}function ky(i){for(i=i.firstContext;i!==null;){if(!Pi(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Wl(i){$l=i,er=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Dn(i){return Qw($l,i)}function Uy(i,a){return $l===null&&Wl(i),Qw(i,a)}function Qw(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},er===null){if(i===null)throw Error(n(308));er=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else er=er.next=a;return l}var $B=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,d){i.push(d)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},WB=s.unstable_scheduleCallback,QB=s.unstable_NormalPriority,Je={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function RA(){return{controller:new $B,data:new Map,refCount:0}}function Hf(i){i.refCount--,i.refCount===0&&WB(QB,function(){i.controller.abort()})}var Vf=null,OA=0,Zu=0,Ju=null;function ZB(i,a){if(Vf===null){var l=Vf=[];OA=0,Zu=IE(),Ju={status:"pending",value:void 0,then:function(d){l.push(d)}}}return OA++,a.then(Zw,Zw),a}function Zw(){if(--OA===0&&Vf!==null){Ju!==null&&(Ju.status="fulfilled");var i=Vf;Vf=null,Zu=0,Ju=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function JB(i,a){var l=[],d={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return i.then(function(){d.status="fulfilled",d.value=a;for(var g=0;g<l.length;g++)(0,l[g])(a)},function(g){for(d.status="rejected",d.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),d}var Jw=F.S;F.S=function(i,a){BC=Ni(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&ZB(i,a),Jw!==null&&Jw(i,a)};var Ql=B(null);function NA(){var i=Ql.current;return i!==null?i:be.pooledCache}function Fy(i,a){a===null?nt(Ql,Ql.current):nt(Ql,a.pool)}function tx(){var i=NA();return i===null?null:{parent:Je._currentValue,pool:i}}var th=Error(n(460)),LA=Error(n(474)),Hy=Error(n(542)),Vy={then:function(){}};function ex(i){return i=i.status,i==="fulfilled"||i==="rejected"}function nx(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(Qa,Qa),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,sx(i),i;default:if(typeof a.status=="string")a.then(Qa,Qa);else{if(i=be,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=a,i.status="pending",i.then(function(d){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=d}},function(d){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,sx(i),i}throw Jl=a,th}}function Zl(i){try{var a=i._init;return a(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Jl=l,th):l}}var Jl=null;function ix(){if(Jl===null)throw Error(n(459));var i=Jl;return Jl=null,i}function sx(i){if(i===th||i===Hy)throw Error(n(483))}var eh=null,zf=0;function zy(i){var a=zf;return zf+=1,eh===null&&(eh=[]),nx(eh,i,a)}function jf(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function jy(i,a){throw a.$$typeof===b?Error(n(525)):(i=Object.prototype.toString.call(a),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function ax(i){function a(H,U){if(i){var V=H.deletions;V===null?(H.deletions=[U],H.flags|=16):V.push(U)}}function l(H,U){if(!i)return null;for(;U!==null;)a(H,U),U=U.sibling;return null}function d(H){for(var U=new Map;H!==null;)H.key!==null?U.set(H.key,H):U.set(H.index,H),H=H.sibling;return U}function g(H,U){return H=Ja(H,U),H.index=0,H.sibling=null,H}function v(H,U,V){return H.index=V,i?(V=H.alternate,V!==null?(V=V.index,V<U?(H.flags|=67108866,U):V):(H.flags|=67108866,U)):(H.flags|=1048576,U)}function T(H){return i&&H.alternate===null&&(H.flags|=67108866),H}function R(H,U,V,Z){return U===null||U.tag!==6?(U=EA(V,H.mode,Z),U.return=H,U):(U=g(U,V),U.return=H,U)}function P(H,U,V,Z){var St=V.type;return St===w?Q(H,U,V.props.children,Z,V.key):U!==null&&(U.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===z&&Zl(St)===U.type)?(U=g(U,V.props),jf(U,V),U.return=H,U):(U=Py(V.type,V.key,V.props,null,H.mode,Z),jf(U,V),U.return=H,U)}function j(H,U,V,Z){return U===null||U.tag!==4||U.stateNode.containerInfo!==V.containerInfo||U.stateNode.implementation!==V.implementation?(U=SA(V,H.mode,Z),U.return=H,U):(U=g(U,V.children||[]),U.return=H,U)}function Q(H,U,V,Z,St){return U===null||U.tag!==7?(U=ql(V,H.mode,Z,St),U.return=H,U):(U=g(U,V),U.return=H,U)}function J(H,U,V){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=EA(""+U,H.mode,V),U.return=H,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case A:return V=Py(U.type,U.key,U.props,null,H.mode,V),jf(V,U),V.return=H,V;case S:return U=SA(U,H.mode,V),U.return=H,U;case z:return U=Zl(U),J(H,U,V)}if(bt(U)||ot(U))return U=ql(U,H.mode,V,null),U.return=H,U;if(typeof U.then=="function")return J(H,zy(U),V);if(U.$$typeof===M)return J(H,Uy(H,U),V);jy(H,U)}return null}function G(H,U,V,Z){var St=U!==null?U.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return St!==null?null:R(H,U,""+V,Z);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case A:return V.key===St?P(H,U,V,Z):null;case S:return V.key===St?j(H,U,V,Z):null;case z:return V=Zl(V),G(H,U,V,Z)}if(bt(V)||ot(V))return St!==null?null:Q(H,U,V,Z,null);if(typeof V.then=="function")return G(H,U,zy(V),Z);if(V.$$typeof===M)return G(H,U,Uy(H,V),Z);jy(H,V)}return null}function K(H,U,V,Z,St){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return H=H.get(V)||null,R(U,H,""+Z,St);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:return H=H.get(Z.key===null?V:Z.key)||null,P(U,H,Z,St);case S:return H=H.get(Z.key===null?V:Z.key)||null,j(U,H,Z,St);case z:return Z=Zl(Z),K(H,U,V,Z,St)}if(bt(Z)||ot(Z))return H=H.get(V)||null,Q(U,H,Z,St,null);if(typeof Z.then=="function")return K(H,U,V,zy(Z),St);if(Z.$$typeof===M)return K(H,U,V,Uy(U,Z),St);jy(U,Z)}return null}function dt(H,U,V,Z){for(var St=null,Wt=null,pt=U,Pt=U=0,zt=null;pt!==null&&Pt<V.length;Pt++){pt.index>Pt?(zt=pt,pt=null):zt=pt.sibling;var Qt=G(H,pt,V[Pt],Z);if(Qt===null){pt===null&&(pt=zt);break}i&&pt&&Qt.alternate===null&&a(H,pt),U=v(Qt,U,Pt),Wt===null?St=Qt:Wt.sibling=Qt,Wt=Qt,pt=zt}if(Pt===V.length)return l(H,pt),Yt&&tr(H,Pt),St;if(pt===null){for(;Pt<V.length;Pt++)pt=J(H,V[Pt],Z),pt!==null&&(U=v(pt,U,Pt),Wt===null?St=pt:Wt.sibling=pt,Wt=pt);return Yt&&tr(H,Pt),St}for(pt=d(pt);Pt<V.length;Pt++)zt=K(pt,H,Pt,V[Pt],Z),zt!==null&&(i&&zt.alternate!==null&&pt.delete(zt.key===null?Pt:zt.key),U=v(zt,U,Pt),Wt===null?St=zt:Wt.sibling=zt,Wt=zt);return i&&pt.forEach(function(Po){return a(H,Po)}),Yt&&tr(H,Pt),St}function wt(H,U,V,Z){if(V==null)throw Error(n(151));for(var St=null,Wt=null,pt=U,Pt=U=0,zt=null,Qt=V.next();pt!==null&&!Qt.done;Pt++,Qt=V.next()){pt.index>Pt?(zt=pt,pt=null):zt=pt.sibling;var Po=G(H,pt,Qt.value,Z);if(Po===null){pt===null&&(pt=zt);break}i&&pt&&Po.alternate===null&&a(H,pt),U=v(Po,U,Pt),Wt===null?St=Po:Wt.sibling=Po,Wt=Po,pt=zt}if(Qt.done)return l(H,pt),Yt&&tr(H,Pt),St;if(pt===null){for(;!Qt.done;Pt++,Qt=V.next())Qt=J(H,Qt.value,Z),Qt!==null&&(U=v(Qt,U,Pt),Wt===null?St=Qt:Wt.sibling=Qt,Wt=Qt);return Yt&&tr(H,Pt),St}for(pt=d(pt);!Qt.done;Pt++,Qt=V.next())Qt=K(pt,H,Pt,Qt.value,Z),Qt!==null&&(i&&Qt.alternate!==null&&pt.delete(Qt.key===null?Pt:Qt.key),U=v(Qt,U,Pt),Wt===null?St=Qt:Wt.sibling=Qt,Wt=Qt);return i&&pt.forEach(function(uU){return a(H,uU)}),Yt&&tr(H,Pt),St}function ue(H,U,V,Z){if(typeof V=="object"&&V!==null&&V.type===w&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case A:t:{for(var St=V.key;U!==null;){if(U.key===St){if(St=V.type,St===w){if(U.tag===7){l(H,U.sibling),Z=g(U,V.props.children),Z.return=H,H=Z;break t}}else if(U.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===z&&Zl(St)===U.type){l(H,U.sibling),Z=g(U,V.props),jf(Z,V),Z.return=H,H=Z;break t}l(H,U);break}else a(H,U);U=U.sibling}V.type===w?(Z=ql(V.props.children,H.mode,Z,V.key),Z.return=H,H=Z):(Z=Py(V.type,V.key,V.props,null,H.mode,Z),jf(Z,V),Z.return=H,H=Z)}return T(H);case S:t:{for(St=V.key;U!==null;){if(U.key===St)if(U.tag===4&&U.stateNode.containerInfo===V.containerInfo&&U.stateNode.implementation===V.implementation){l(H,U.sibling),Z=g(U,V.children||[]),Z.return=H,H=Z;break t}else{l(H,U);break}else a(H,U);U=U.sibling}Z=SA(V,H.mode,Z),Z.return=H,H=Z}return T(H);case z:return V=Zl(V),ue(H,U,V,Z)}if(bt(V))return dt(H,U,V,Z);if(ot(V)){if(St=ot(V),typeof St!="function")throw Error(n(150));return V=St.call(V),wt(H,U,V,Z)}if(typeof V.then=="function")return ue(H,U,zy(V),Z);if(V.$$typeof===M)return ue(H,U,Uy(H,V),Z);jy(H,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,U!==null&&U.tag===6?(l(H,U.sibling),Z=g(U,V),Z.return=H,H=Z):(l(H,U),Z=EA(V,H.mode,Z),Z.return=H,H=Z),T(H)):l(H,U)}return function(H,U,V,Z){try{zf=0;var St=ue(H,U,V,Z);return eh=null,St}catch(pt){if(pt===th||pt===Hy)throw pt;var Wt=Bi(29,pt,null,H.mode);return Wt.lanes=Z,Wt.return=H,Wt}finally{}}}var tc=ax(!0),rx=ax(!1),bo=!1;function IA(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function PA(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function vo(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ao(i,a,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(Zt&2)!==0){var g=d.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),d.pending=a,a=Iy(i),jw(i,null,l),a}return Ly(i,d,a,l),Iy(i)}function Gf(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var d=a.lanes;d&=i.pendingLanes,l|=d,a.lanes=l,Q1(i,l)}}function BA(i,a){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var g=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?g=v=T:v=v.next=T,l=l.next}while(l!==null);v===null?g=v=a:v=v.next=a}else g=v=a;l={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var kA=!1;function Yf(){if(kA){var i=Ju;if(i!==null)throw i}}function Xf(i,a,l,d){kA=!1;var g=i.updateQueue;bo=!1;var v=g.firstBaseUpdate,T=g.lastBaseUpdate,R=g.shared.pending;if(R!==null){g.shared.pending=null;var P=R,j=P.next;P.next=null,T===null?v=j:T.next=j,T=P;var Q=i.alternate;Q!==null&&(Q=Q.updateQueue,R=Q.lastBaseUpdate,R!==T&&(R===null?Q.firstBaseUpdate=j:R.next=j,Q.lastBaseUpdate=P))}if(v!==null){var J=g.baseState;T=0,Q=j=P=null,R=v;do{var G=R.lane&-536870913,K=G!==R.lane;if(K?(Vt&G)===G:(d&G)===G){G!==0&&G===Zu&&(kA=!0),Q!==null&&(Q=Q.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});t:{var dt=i,wt=R;G=a;var ue=l;switch(wt.tag){case 1:if(dt=wt.payload,typeof dt=="function"){J=dt.call(ue,J,G);break t}J=dt;break t;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=wt.payload,G=typeof dt=="function"?dt.call(ue,J,G):dt,G==null)break t;J=y({},J,G);break t;case 2:bo=!0}}G=R.callback,G!==null&&(i.flags|=64,K&&(i.flags|=8192),K=g.callbacks,K===null?g.callbacks=[G]:K.push(G))}else K={lane:G,tag:R.tag,payload:R.payload,callback:R.callback,next:null},Q===null?(j=Q=K,P=J):Q=Q.next=K,T|=G;if(R=R.next,R===null){if(R=g.shared.pending,R===null)break;K=R,R=K.next,K.next=null,g.lastBaseUpdate=K,g.shared.pending=null}}while(!0);Q===null&&(P=J),g.baseState=P,g.firstBaseUpdate=j,g.lastBaseUpdate=Q,v===null&&(g.shared.lanes=0),wo|=T,i.lanes=T,i.memoizedState=J}}function ox(i,a){if(typeof i!="function")throw Error(n(191,i));i.call(a)}function lx(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)ox(l[i],a)}var nh=B(null),Gy=B(0);function cx(i,a){i=hr,nt(Gy,i),nt(nh,a),hr=i|a.baseLanes}function UA(){nt(Gy,hr),nt(nh,nh.current)}function FA(){hr=Gy.current,q(nh),q(Gy)}var ki=B(null),As=null;function Eo(i){var a=i.alternate;nt(Ke,Ke.current&1),nt(ki,i),As===null&&(a===null||nh.current!==null||a.memoizedState!==null)&&(As=i)}function HA(i){nt(Ke,Ke.current),nt(ki,i),As===null&&(As=i)}function ux(i){i.tag===22?(nt(Ke,Ke.current),nt(ki,i),As===null&&(As=i)):So()}function So(){nt(Ke,Ke.current),nt(ki,ki.current)}function Ui(i){q(ki),As===i&&(As=null),q(Ke)}var Ke=B(0);function Yy(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||XE(l)||qE(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ir=0,Lt=null,le=null,tn=null,Xy=!1,ih=!1,ec=!1,qy=0,qf=0,sh=null,tk=0;function He(){throw Error(n(321))}function VA(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!Pi(i[l],a[l]))return!1;return!0}function zA(i,a,l,d,g,v){return ir=v,Lt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,F.H=i===null||i.memoizedState===null?qx:iE,ec=!1,v=l(d,g),ec=!1,ih&&(v=dx(a,l,d,g)),hx(i),v}function hx(i){F.H=Wf;var a=le!==null&&le.next!==null;if(ir=0,tn=le=Lt=null,Xy=!1,qf=0,sh=null,a)throw Error(n(300));i===null||en||(i=i.dependencies,i!==null&&ky(i)&&(en=!0))}function dx(i,a,l,d){Lt=i;var g=0;do{if(ih&&(sh=null),qf=0,ih=!1,25<=g)throw Error(n(301));if(g+=1,tn=le=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}F.H=Kx,v=a(l,d)}while(ih);return v}function ek(){var i=F.H,a=i.useState()[0];return a=typeof a.then=="function"?Kf(a):a,i=i.useState()[0],(le!==null?le.memoizedState:null)!==i&&(Lt.flags|=1024),a}function jA(){var i=qy!==0;return qy=0,i}function GA(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function YA(i){if(Xy){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Xy=!1}ir=0,tn=le=Lt=null,ih=!1,qf=qy=0,sh=null}function Zn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?Lt.memoizedState=tn=i:tn=tn.next=i,tn}function $e(){if(le===null){var i=Lt.alternate;i=i!==null?i.memoizedState:null}else i=le.next;var a=tn===null?Lt.memoizedState:tn.next;if(a!==null)tn=a,le=i;else{if(i===null)throw Lt.alternate===null?Error(n(467)):Error(n(310));le=i,i={memoizedState:le.memoizedState,baseState:le.baseState,baseQueue:le.baseQueue,queue:le.queue,next:null},tn===null?Lt.memoizedState=tn=i:tn=tn.next=i}return tn}function Ky(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kf(i){var a=qf;return qf+=1,sh===null&&(sh=[]),i=nx(sh,i,a),a=Lt,(tn===null?a.memoizedState:tn.next)===null&&(a=a.alternate,F.H=a===null||a.memoizedState===null?qx:iE),i}function $y(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Kf(i);if(i.$$typeof===M)return Dn(i)}throw Error(n(438,String(i)))}function XA(i){var a=null,l=Lt.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var d=Lt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Ky(),Lt.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),d=0;d<i;d++)l[d]=it;return a.index++,l}function sr(i,a){return typeof a=="function"?a(i):a}function Wy(i){var a=$e();return qA(a,le,i)}function qA(i,a,l){var d=i.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=l;var g=i.baseQueue,v=d.pending;if(v!==null){if(g!==null){var T=g.next;g.next=v.next,v.next=T}a.baseQueue=g=v,d.pending=null}if(v=i.baseState,g===null)i.memoizedState=v;else{a=g.next;var R=T=null,P=null,j=a,Q=!1;do{var J=j.lane&-536870913;if(J!==j.lane?(Vt&J)===J:(ir&J)===J){var G=j.revertLane;if(G===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),J===Zu&&(Q=!0);else if((ir&G)===G){j=j.next,G===Zu&&(Q=!0);continue}else J={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},P===null?(R=P=J,T=v):P=P.next=J,Lt.lanes|=G,wo|=G;J=j.action,ec&&l(v,J),v=j.hasEagerState?j.eagerState:l(v,J)}else G={lane:J,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},P===null?(R=P=G,T=v):P=P.next=G,Lt.lanes|=J,wo|=J;j=j.next}while(j!==null&&j!==a);if(P===null?T=v:P.next=R,!Pi(v,i.memoizedState)&&(en=!0,Q&&(l=Ju,l!==null)))throw l;i.memoizedState=v,i.baseState=T,i.baseQueue=P,d.lastRenderedState=v}return g===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function KA(i){var a=$e(),l=a.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=i;var d=l.dispatch,g=l.pending,v=a.memoizedState;if(g!==null){l.pending=null;var T=g=g.next;do v=i(v,T.action),T=T.next;while(T!==g);Pi(v,a.memoizedState)||(en=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),l.lastRenderedState=v}return[v,d]}function fx(i,a,l){var d=Lt,g=$e(),v=Yt;if(v){if(l===void 0)throw Error(n(407));l=l()}else l=a();var T=!Pi((le||g).memoizedState,l);if(T&&(g.memoizedState=l,en=!0),g=g.queue,QA(gx.bind(null,d,g,i),[i]),g.getSnapshot!==a||T||tn!==null&&tn.memoizedState.tag&1){if(d.flags|=2048,ah(9,{destroy:void 0},mx.bind(null,d,g,l,a),null),be===null)throw Error(n(349));v||(ir&127)!==0||px(d,a,l)}return l}function px(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=Lt.updateQueue,a===null?(a=Ky(),Lt.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function mx(i,a,l,d){a.value=l,a.getSnapshot=d,yx(a)&&bx(i)}function gx(i,a,l){return l(function(){yx(a)&&bx(i)})}function yx(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!Pi(i,l)}catch{return!0}}function bx(i){var a=Xl(i,2);a!==null&&vi(a,i,2)}function $A(i){var a=Zn();if(typeof i=="function"){var l=i;if(i=l(),ec){uo(!0);try{l()}finally{uo(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sr,lastRenderedState:i},a}function vx(i,a,l,d){return i.baseState=l,qA(i,le,typeof d=="function"?d:sr)}function nk(i,a,l,d,g){if(Jy(i))throw Error(n(485));if(i=a.action,i!==null){var v={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){v.listeners.push(T)}};F.T!==null?l(!0):v.isTransition=!1,d(v),l=a.pending,l===null?(v.next=a.pending=v,Ax(a,v)):(v.next=l.next,a.pending=l.next=v)}}function Ax(i,a){var l=a.action,d=a.payload,g=i.state;if(a.isTransition){var v=F.T,T={};F.T=T;try{var R=l(g,d),P=F.S;P!==null&&P(T,R),Ex(i,a,R)}catch(j){WA(i,a,j)}finally{v!==null&&T.types!==null&&(v.types=T.types),F.T=v}}else try{v=l(g,d),Ex(i,a,v)}catch(j){WA(i,a,j)}}function Ex(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){Sx(i,a,d)},function(d){return WA(i,a,d)}):Sx(i,a,l)}function Sx(i,a,l){a.status="fulfilled",a.value=l,Tx(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,Ax(i,l)))}function WA(i,a,l){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=l,Tx(a),a=a.next;while(a!==d)}i.action=null}function Tx(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function _x(i,a){return a}function wx(i,a){if(Yt){var l=be.formState;if(l!==null){t:{var d=Lt;if(Yt){if(xe){e:{for(var g=xe,v=vs;g.nodeType!==8;){if(!v){g=null;break e}if(g=Es(g.nextSibling),g===null){g=null;break e}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){xe=Es(g.nextSibling),d=g.data==="F!";break t}}go(d)}d=!1}d&&(a=l[0])}}return l=Zn(),l.memoizedState=l.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_x,lastRenderedState:a},l.queue=d,l=Gx.bind(null,Lt,d),d.dispatch=l,d=$A(!1),v=nE.bind(null,Lt,!1,d.queue),d=Zn(),g={state:a,dispatch:null,action:i,pending:null},d.queue=g,l=nk.bind(null,Lt,g,v,l),g.dispatch=l,d.memoizedState=i,[a,l,!1]}function xx(i){var a=$e();return Cx(a,le,i)}function Cx(i,a,l){if(a=qA(i,a,_x)[0],i=Wy(sr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=Kf(a)}catch(T){throw T===th?Hy:T}else d=a;a=$e();var g=a.queue,v=g.dispatch;return l!==a.memoizedState&&(Lt.flags|=2048,ah(9,{destroy:void 0},ik.bind(null,g,l),null)),[d,v,i]}function ik(i,a){i.action=a}function Dx(i){var a=$e(),l=le;if(l!==null)return Cx(a,l,i);$e(),a=a.memoizedState,l=$e();var d=l.queue.dispatch;return l.memoizedState=i,[a,d,!1]}function ah(i,a,l,d){return i={tag:i,create:l,deps:d,inst:a,next:null},a=Lt.updateQueue,a===null&&(a=Ky(),Lt.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,a.lastEffect=i),i}function Mx(){return $e().memoizedState}function Qy(i,a,l,d){var g=Zn();Lt.flags|=i,g.memoizedState=ah(1|a,{destroy:void 0},l,d===void 0?null:d)}function Zy(i,a,l,d){var g=$e();d=d===void 0?null:d;var v=g.memoizedState.inst;le!==null&&d!==null&&VA(d,le.memoizedState.deps)?g.memoizedState=ah(a,v,l,d):(Lt.flags|=i,g.memoizedState=ah(1|a,v,l,d))}function Rx(i,a){Qy(8390656,8,i,a)}function QA(i,a){Zy(2048,8,i,a)}function sk(i){Lt.flags|=4;var a=Lt.updateQueue;if(a===null)a=Ky(),Lt.updateQueue=a,a.events=[i];else{var l=a.events;l===null?a.events=[i]:l.push(i)}}function Ox(i){var a=$e().memoizedState;return sk({ref:a,nextImpl:i}),function(){if((Zt&2)!==0)throw Error(n(440));return a.impl.apply(void 0,arguments)}}function Nx(i,a){return Zy(4,2,i,a)}function Lx(i,a){return Zy(4,4,i,a)}function Ix(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function Px(i,a,l){l=l!=null?l.concat([i]):null,Zy(4,4,Ix.bind(null,a,i),l)}function ZA(){}function Bx(i,a){var l=$e();a=a===void 0?null:a;var d=l.memoizedState;return a!==null&&VA(a,d[1])?d[0]:(l.memoizedState=[i,a],i)}function kx(i,a){var l=$e();a=a===void 0?null:a;var d=l.memoizedState;if(a!==null&&VA(a,d[1]))return d[0];if(d=i(),ec){uo(!0);try{i()}finally{uo(!1)}}return l.memoizedState=[d,a],d}function JA(i,a,l){return l===void 0||(ir&1073741824)!==0&&(Vt&261930)===0?i.memoizedState=a:(i.memoizedState=l,i=UC(),Lt.lanes|=i,wo|=i,l)}function Ux(i,a,l,d){return Pi(l,a)?l:nh.current!==null?(i=JA(i,l,d),Pi(i,a)||(en=!0),i):(ir&42)===0||(ir&1073741824)!==0&&(Vt&261930)===0?(en=!0,i.memoizedState=l):(i=UC(),Lt.lanes|=i,wo|=i,a)}function Fx(i,a,l,d,g){var v=Y.p;Y.p=v!==0&&8>v?v:8;var T=F.T,R={};F.T=R,nE(i,!1,a,l);try{var P=g(),j=F.S;if(j!==null&&j(R,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var Q=JB(P,d);$f(i,a,Q,Vi(i))}else $f(i,a,d,Vi(i))}catch(J){$f(i,a,{then:function(){},status:"rejected",reason:J},Vi())}finally{Y.p=v,T!==null&&R.types!==null&&(T.types=R.types),F.T=T}}function ak(){}function tE(i,a,l,d){if(i.tag!==5)throw Error(n(476));var g=Hx(i).queue;Fx(i,g,a,tt,l===null?ak:function(){return Vx(i),l(d)})}function Hx(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:tt,baseState:tt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sr,lastRenderedState:tt},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sr,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function Vx(i){var a=Hx(i);a.next===null&&(a=i.alternate.memoizedState),$f(i,a.next.queue,{},Vi())}function eE(){return Dn(dp)}function zx(){return $e().memoizedState}function jx(){return $e().memoizedState}function rk(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=Vi();i=vo(l);var d=Ao(a,i,l);d!==null&&(vi(d,a,l),Gf(d,a,l)),a={cache:RA()},i.payload=a;return}a=a.return}}function ok(i,a,l){var d=Vi();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Jy(i)?Yx(a,l):(l=vA(i,a,l,d),l!==null&&(vi(l,i,d),Xx(l,a,d)))}function Gx(i,a,l){var d=Vi();$f(i,a,l,d)}function $f(i,a,l,d){var g={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Jy(i))Yx(a,g);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var T=a.lastRenderedState,R=v(T,l);if(g.hasEagerState=!0,g.eagerState=R,Pi(R,T))return Ly(i,a,g,0),be===null&&Ny(),!1}catch{}finally{}if(l=vA(i,a,g,d),l!==null)return vi(l,i,d),Xx(l,a,d),!0}return!1}function nE(i,a,l,d){if(d={lane:2,revertLane:IE(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Jy(i)){if(a)throw Error(n(479))}else a=vA(i,l,d,2),a!==null&&vi(a,i,2)}function Jy(i){var a=i.alternate;return i===Lt||a!==null&&a===Lt}function Yx(i,a){ih=Xy=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function Xx(i,a,l){if((l&4194048)!==0){var d=a.lanes;d&=i.pendingLanes,l|=d,a.lanes=l,Q1(i,l)}}var Wf={readContext:Dn,use:$y,useCallback:He,useContext:He,useEffect:He,useImperativeHandle:He,useLayoutEffect:He,useInsertionEffect:He,useMemo:He,useReducer:He,useRef:He,useState:He,useDebugValue:He,useDeferredValue:He,useTransition:He,useSyncExternalStore:He,useId:He,useHostTransitionStatus:He,useFormState:He,useActionState:He,useOptimistic:He,useMemoCache:He,useCacheRefresh:He};Wf.useEffectEvent=He;var qx={readContext:Dn,use:$y,useCallback:function(i,a){return Zn().memoizedState=[i,a===void 0?null:a],i},useContext:Dn,useEffect:Rx,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,Qy(4194308,4,Ix.bind(null,a,i),l)},useLayoutEffect:function(i,a){return Qy(4194308,4,i,a)},useInsertionEffect:function(i,a){Qy(4,2,i,a)},useMemo:function(i,a){var l=Zn();a=a===void 0?null:a;var d=i();if(ec){uo(!0);try{i()}finally{uo(!1)}}return l.memoizedState=[d,a],d},useReducer:function(i,a,l){var d=Zn();if(l!==void 0){var g=l(a);if(ec){uo(!0);try{l(a)}finally{uo(!1)}}}else g=a;return d.memoizedState=d.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},d.queue=i,i=i.dispatch=ok.bind(null,Lt,i),[d.memoizedState,i]},useRef:function(i){var a=Zn();return i={current:i},a.memoizedState=i},useState:function(i){i=$A(i);var a=i.queue,l=Gx.bind(null,Lt,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:ZA,useDeferredValue:function(i,a){var l=Zn();return JA(l,i,a)},useTransition:function(){var i=$A(!1);return i=Fx.bind(null,Lt,i.queue,!0,!1),Zn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var d=Lt,g=Zn();if(Yt){if(l===void 0)throw Error(n(407));l=l()}else{if(l=a(),be===null)throw Error(n(349));(Vt&127)!==0||px(d,a,l)}g.memoizedState=l;var v={value:l,getSnapshot:a};return g.queue=v,Rx(gx.bind(null,d,v,i),[i]),d.flags|=2048,ah(9,{destroy:void 0},mx.bind(null,d,v,l,a),null),l},useId:function(){var i=Zn(),a=be.identifierPrefix;if(Yt){var l=ma,d=pa;l=(d&~(1<<32-Ii(d)-1)).toString(32)+l,a="_"+a+"R_"+l,l=qy++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=tk++,a="_"+a+"r_"+l.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:eE,useFormState:wx,useActionState:wx,useOptimistic:function(i){var a=Zn();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=nE.bind(null,Lt,!0,l),l.dispatch=a,[i,a]},useMemoCache:XA,useCacheRefresh:function(){return Zn().memoizedState=rk.bind(null,Lt)},useEffectEvent:function(i){var a=Zn(),l={impl:i};return a.memoizedState=l,function(){if((Zt&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}},iE={readContext:Dn,use:$y,useCallback:Bx,useContext:Dn,useEffect:QA,useImperativeHandle:Px,useInsertionEffect:Nx,useLayoutEffect:Lx,useMemo:kx,useReducer:Wy,useRef:Mx,useState:function(){return Wy(sr)},useDebugValue:ZA,useDeferredValue:function(i,a){var l=$e();return Ux(l,le.memoizedState,i,a)},useTransition:function(){var i=Wy(sr)[0],a=$e().memoizedState;return[typeof i=="boolean"?i:Kf(i),a]},useSyncExternalStore:fx,useId:zx,useHostTransitionStatus:eE,useFormState:xx,useActionState:xx,useOptimistic:function(i,a){var l=$e();return vx(l,le,i,a)},useMemoCache:XA,useCacheRefresh:jx};iE.useEffectEvent=Ox;var Kx={readContext:Dn,use:$y,useCallback:Bx,useContext:Dn,useEffect:QA,useImperativeHandle:Px,useInsertionEffect:Nx,useLayoutEffect:Lx,useMemo:kx,useReducer:KA,useRef:Mx,useState:function(){return KA(sr)},useDebugValue:ZA,useDeferredValue:function(i,a){var l=$e();return le===null?JA(l,i,a):Ux(l,le.memoizedState,i,a)},useTransition:function(){var i=KA(sr)[0],a=$e().memoizedState;return[typeof i=="boolean"?i:Kf(i),a]},useSyncExternalStore:fx,useId:zx,useHostTransitionStatus:eE,useFormState:Dx,useActionState:Dx,useOptimistic:function(i,a){var l=$e();return le!==null?vx(l,le,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:XA,useCacheRefresh:jx};Kx.useEffectEvent=Ox;function sE(i,a,l,d){a=i.memoizedState,l=l(d,a),l=l==null?a:y({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var aE={enqueueSetState:function(i,a,l){i=i._reactInternals;var d=Vi(),g=vo(d);g.payload=a,l!=null&&(g.callback=l),a=Ao(i,g,d),a!==null&&(vi(a,i,d),Gf(a,i,d))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var d=Vi(),g=vo(d);g.tag=1,g.payload=a,l!=null&&(g.callback=l),a=Ao(i,g,d),a!==null&&(vi(a,i,d),Gf(a,i,d))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=Vi(),d=vo(l);d.tag=2,a!=null&&(d.callback=a),a=Ao(i,d,l),a!==null&&(vi(a,i,l),Gf(a,i,l))}};function $x(i,a,l,d,g,v,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,v,T):a.prototype&&a.prototype.isPureReactComponent?!Bf(l,d)||!Bf(g,v):!0}function Wx(i,a,l,d){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,d),a.state!==i&&aE.enqueueReplaceState(a,a.state,null)}function nc(i,a){var l=a;if("ref"in a){l={};for(var d in a)d!=="ref"&&(l[d]=a[d])}if(i=i.defaultProps){l===a&&(l=y({},l));for(var g in i)l[g]===void 0&&(l[g]=i[g])}return l}function Qx(i){Oy(i)}function Zx(i){console.error(i)}function Jx(i){Oy(i)}function t0(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function tC(i,a,l){try{var d=i.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function rE(i,a,l){return l=vo(l),l.tag=3,l.payload={element:null},l.callback=function(){t0(i,a)},l}function eC(i){return i=vo(i),i.tag=3,i}function nC(i,a,l,d){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var v=d.value;i.payload=function(){return g(v)},i.callback=function(){tC(a,l,d)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){tC(a,l,d),typeof g!="function"&&(xo===null?xo=new Set([this]):xo.add(this));var R=d.stack;this.componentDidCatch(d.value,{componentStack:R!==null?R:""})})}function lk(i,a,l,d,g){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=l.alternate,a!==null&&Qu(a,l,g,!0),l=ki.current,l!==null){switch(l.tag){case 31:case 13:return As===null?d0():l.alternate===null&&Ve===0&&(Ve=3),l.flags&=-257,l.flags|=65536,l.lanes=g,d===Vy?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([d]):a.add(d),OE(i,d,g)),!1;case 22:return l.flags|=65536,d===Vy?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([d]):l.add(d)),OE(i,d,g)),!1}throw Error(n(435,l.tag))}return OE(i,d,g),d0(),!1}if(Yt)return a=ki.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,d!==wA&&(i=Error(n(422),{cause:d}),Ff(gs(i,l)))):(d!==wA&&(a=Error(n(423),{cause:d}),Ff(gs(a,l))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,d=gs(d,l),g=rE(i.stateNode,d,g),BA(i,g),Ve!==4&&(Ve=2)),!1;var v=Error(n(520),{cause:d});if(v=gs(v,l),sp===null?sp=[v]:sp.push(v),Ve!==4&&(Ve=2),a===null)return!0;d=gs(d,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=g&-g,l.lanes|=i,i=rE(l.stateNode,d,i),BA(l,i),!1;case 1:if(a=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(xo===null||!xo.has(v))))return l.flags|=65536,g&=-g,l.lanes|=g,g=eC(g),nC(g,i,l,d),BA(l,g),!1}l=l.return}while(l!==null);return!1}var oE=Error(n(461)),en=!1;function Mn(i,a,l,d){a.child=i===null?rx(a,null,l,d):tc(a,i.child,l,d)}function iC(i,a,l,d,g){l=l.render;var v=a.ref;if("ref"in d){var T={};for(var R in d)R!=="ref"&&(T[R]=d[R])}else T=d;return Wl(a),d=zA(i,a,l,T,v,g),R=jA(),i!==null&&!en?(GA(i,a,g),ar(i,a,g)):(Yt&&R&&TA(a),a.flags|=1,Mn(i,a,d,g),a.child)}function sC(i,a,l,d,g){if(i===null){var v=l.type;return typeof v=="function"&&!AA(v)&&v.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=v,aC(i,a,v,d,g)):(i=Py(l.type,null,d,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(v=i.child,!mE(i,g)){var T=v.memoizedProps;if(l=l.compare,l=l!==null?l:Bf,l(T,d)&&i.ref===a.ref)return ar(i,a,g)}return a.flags|=1,i=Ja(v,d),i.ref=a.ref,i.return=a,a.child=i}function aC(i,a,l,d,g){if(i!==null){var v=i.memoizedProps;if(Bf(v,d)&&i.ref===a.ref)if(en=!1,a.pendingProps=d=v,mE(i,g))(i.flags&131072)!==0&&(en=!0);else return a.lanes=i.lanes,ar(i,a,g)}return lE(i,a,l,d,g)}function rC(i,a,l,d){var g=d.children,v=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((a.flags&128)!==0){if(v=v!==null?v.baseLanes|l:l,i!==null){for(d=a.child=i.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;d=g&~v}else d=0,a.child=null;return oC(i,a,v,l,d)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Fy(a,v!==null?v.cachePool:null),v!==null?cx(a,v):UA(),ux(a);else return d=a.lanes=536870912,oC(i,a,v!==null?v.baseLanes|l:l,l,d)}else v!==null?(Fy(a,v.cachePool),cx(a,v),So(),a.memoizedState=null):(i!==null&&Fy(a,null),UA(),So());return Mn(i,a,g,l),a.child}function Qf(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function oC(i,a,l,d,g){var v=NA();return v=v===null?null:{parent:Je._currentValue,pool:v},a.memoizedState={baseLanes:l,cachePool:v},i!==null&&Fy(a,null),UA(),ux(a),i!==null&&Qu(i,a,d,!0),a.childLanes=g,null}function e0(i,a){return a=i0({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function lC(i,a,l){return tc(a,i.child,null,l),i=e0(a,a.pendingProps),i.flags|=2,Ui(a),a.memoizedState=null,i}function ck(i,a,l){var d=a.pendingProps,g=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(Yt){if(d.mode==="hidden")return i=e0(a,d),a.lanes=536870912,Qf(null,i);if(HA(a),(i=xe)?(i=AD(i,vs),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:po!==null?{id:pa,overflow:ma}:null,retryLane:536870912,hydrationErrors:null},l=Yw(i),l.return=a,a.child=l,Cn=a,xe=null)):i=null,i===null)throw go(a);return a.lanes=536870912,null}return e0(a,d)}var v=i.memoizedState;if(v!==null){var T=v.dehydrated;if(HA(a),g)if(a.flags&256)a.flags&=-257,a=lC(i,a,l);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(n(558));else if(en||Qu(i,a,l,!1),g=(l&i.childLanes)!==0,en||g){if(d=be,d!==null&&(T=Z1(d,l),T!==0&&T!==v.retryLane))throw v.retryLane=T,Xl(i,T),vi(d,i,T),oE;d0(),a=lC(i,a,l)}else i=v.treeContext,xe=Es(T.nextSibling),Cn=a,Yt=!0,mo=null,vs=!1,i!==null&&Kw(a,i),a=e0(a,d),a.flags|=4096;return a}return i=Ja(i.child,{mode:d.mode,children:d.children}),i.ref=a.ref,a.child=i,i.return=a,i}function n0(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function lE(i,a,l,d,g){return Wl(a),l=zA(i,a,l,d,void 0,g),d=jA(),i!==null&&!en?(GA(i,a,g),ar(i,a,g)):(Yt&&d&&TA(a),a.flags|=1,Mn(i,a,l,g),a.child)}function cC(i,a,l,d,g,v){return Wl(a),a.updateQueue=null,l=dx(a,d,l,g),hx(i),d=jA(),i!==null&&!en?(GA(i,a,v),ar(i,a,v)):(Yt&&d&&TA(a),a.flags|=1,Mn(i,a,l,v),a.child)}function uC(i,a,l,d,g){if(Wl(a),a.stateNode===null){var v=qu,T=l.contextType;typeof T=="object"&&T!==null&&(v=Dn(T)),v=new l(d,v),a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=aE,a.stateNode=v,v._reactInternals=a,v=a.stateNode,v.props=d,v.state=a.memoizedState,v.refs={},IA(a),T=l.contextType,v.context=typeof T=="object"&&T!==null?Dn(T):qu,v.state=a.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(sE(a,l,T,d),v.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(T=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),T!==v.state&&aE.enqueueReplaceState(v,v.state,null),Xf(a,d,v,g),Yf(),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(i===null){v=a.stateNode;var R=a.memoizedProps,P=nc(l,R);v.props=P;var j=v.context,Q=l.contextType;T=qu,typeof Q=="object"&&Q!==null&&(T=Dn(Q));var J=l.getDerivedStateFromProps;Q=typeof J=="function"||typeof v.getSnapshotBeforeUpdate=="function",R=a.pendingProps!==R,Q||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R||j!==T)&&Wx(a,v,d,T),bo=!1;var G=a.memoizedState;v.state=G,Xf(a,d,v,g),Yf(),j=a.memoizedState,R||G!==j||bo?(typeof J=="function"&&(sE(a,l,J,d),j=a.memoizedState),(P=bo||$x(a,l,P,d,G,j,T))?(Q||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(a.flags|=4194308)):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=j),v.props=d,v.state=j,v.context=T,d=P):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{v=a.stateNode,PA(i,a),T=a.memoizedProps,Q=nc(l,T),v.props=Q,J=a.pendingProps,G=v.context,j=l.contextType,P=qu,typeof j=="object"&&j!==null&&(P=Dn(j)),R=l.getDerivedStateFromProps,(j=typeof R=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(T!==J||G!==P)&&Wx(a,v,d,P),bo=!1,G=a.memoizedState,v.state=G,Xf(a,d,v,g),Yf();var K=a.memoizedState;T!==J||G!==K||bo||i!==null&&i.dependencies!==null&&ky(i.dependencies)?(typeof R=="function"&&(sE(a,l,R,d),K=a.memoizedState),(Q=bo||$x(a,l,Q,d,G,K,P)||i!==null&&i.dependencies!==null&&ky(i.dependencies))?(j||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,K,P),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,K,P)),typeof v.componentDidUpdate=="function"&&(a.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof v.componentDidUpdate!="function"||T===i.memoizedProps&&G===i.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&G===i.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=K),v.props=d,v.state=K,v.context=P,d=Q):(typeof v.componentDidUpdate!="function"||T===i.memoizedProps&&G===i.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&G===i.memoizedState||(a.flags|=1024),d=!1)}return v=d,n0(i,a),d=(a.flags&128)!==0,v||d?(v=a.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:v.render(),a.flags|=1,i!==null&&d?(a.child=tc(a,i.child,null,g),a.child=tc(a,null,l,g)):Mn(i,a,l,g),a.memoizedState=v.state,i=a.child):i=ar(i,a,g),i}function hC(i,a,l,d){return Kl(),a.flags|=256,Mn(i,a,l,d),a.child}var cE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uE(i){return{baseLanes:i,cachePool:tx()}}function hE(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=Hi),i}function dC(i,a,l){var d=a.pendingProps,g=!1,v=(a.flags&128)!==0,T;if((T=v)||(T=i!==null&&i.memoizedState===null?!1:(Ke.current&2)!==0),T&&(g=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,i===null){if(Yt){if(g?Eo(a):So(),(i=xe)?(i=AD(i,vs),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:po!==null?{id:pa,overflow:ma}:null,retryLane:536870912,hydrationErrors:null},l=Yw(i),l.return=a,a.child=l,Cn=a,xe=null)):i=null,i===null)throw go(a);return qE(i)?a.lanes=32:a.lanes=536870912,null}var R=d.children;return d=d.fallback,g?(So(),g=a.mode,R=i0({mode:"hidden",children:R},g),d=ql(d,g,l,null),R.return=a,d.return=a,R.sibling=d,a.child=R,d=a.child,d.memoizedState=uE(l),d.childLanes=hE(i,T,l),a.memoizedState=cE,Qf(null,d)):(Eo(a),dE(a,R))}var P=i.memoizedState;if(P!==null&&(R=P.dehydrated,R!==null)){if(v)a.flags&256?(Eo(a),a.flags&=-257,a=fE(i,a,l)):a.memoizedState!==null?(So(),a.child=i.child,a.flags|=128,a=null):(So(),R=d.fallback,g=a.mode,d=i0({mode:"visible",children:d.children},g),R=ql(R,g,l,null),R.flags|=2,d.return=a,R.return=a,d.sibling=R,a.child=d,tc(a,i.child,null,l),d=a.child,d.memoizedState=uE(l),d.childLanes=hE(i,T,l),a.memoizedState=cE,a=Qf(null,d));else if(Eo(a),qE(R)){if(T=R.nextSibling&&R.nextSibling.dataset,T)var j=T.dgst;T=j,d=Error(n(419)),d.stack="",d.digest=T,Ff({value:d,source:null,stack:null}),a=fE(i,a,l)}else if(en||Qu(i,a,l,!1),T=(l&i.childLanes)!==0,en||T){if(T=be,T!==null&&(d=Z1(T,l),d!==0&&d!==P.retryLane))throw P.retryLane=d,Xl(i,d),vi(T,i,d),oE;XE(R)||d0(),a=fE(i,a,l)}else XE(R)?(a.flags|=192,a.child=i.child,a=null):(i=P.treeContext,xe=Es(R.nextSibling),Cn=a,Yt=!0,mo=null,vs=!1,i!==null&&Kw(a,i),a=dE(a,d.children),a.flags|=4096);return a}return g?(So(),R=d.fallback,g=a.mode,P=i.child,j=P.sibling,d=Ja(P,{mode:"hidden",children:d.children}),d.subtreeFlags=P.subtreeFlags&65011712,j!==null?R=Ja(j,R):(R=ql(R,g,l,null),R.flags|=2),R.return=a,d.return=a,d.sibling=R,a.child=d,Qf(null,d),d=a.child,R=i.child.memoizedState,R===null?R=uE(l):(g=R.cachePool,g!==null?(P=Je._currentValue,g=g.parent!==P?{parent:P,pool:P}:g):g=tx(),R={baseLanes:R.baseLanes|l,cachePool:g}),d.memoizedState=R,d.childLanes=hE(i,T,l),a.memoizedState=cE,Qf(i.child,d)):(Eo(a),l=i.child,i=l.sibling,l=Ja(l,{mode:"visible",children:d.children}),l.return=a,l.sibling=null,i!==null&&(T=a.deletions,T===null?(a.deletions=[i],a.flags|=16):T.push(i)),a.child=l,a.memoizedState=null,l)}function dE(i,a){return a=i0({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function i0(i,a){return i=Bi(22,i,null,a),i.lanes=0,i}function fE(i,a,l){return tc(a,i.child,null,l),i=dE(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function fC(i,a,l){i.lanes|=a;var d=i.alternate;d!==null&&(d.lanes|=a),DA(i.return,a,l)}function pE(i,a,l,d,g,v){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:g,treeForkCount:v}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=d,T.tail=l,T.tailMode=g,T.treeForkCount=v)}function pC(i,a,l){var d=a.pendingProps,g=d.revealOrder,v=d.tail;d=d.children;var T=Ke.current,R=(T&2)!==0;if(R?(T=T&1|2,a.flags|=128):T&=1,nt(Ke,T),Mn(i,a,d,l),d=Yt?Uf:0,!R&&i!==null&&(i.flags&128)!==0)t:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&fC(i,l,a);else if(i.tag===19)fC(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break t;for(;i.sibling===null;){if(i.return===null||i.return===a)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(l=a.child,g=null;l!==null;)i=l.alternate,i!==null&&Yy(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=a.child,a.child=null):(g=l.sibling,l.sibling=null),pE(a,!1,g,l,v,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&Yy(i)===null){a.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}pE(a,!0,l,null,v,d);break;case"together":pE(a,!1,null,null,void 0,d);break;default:a.memoizedState=null}return a.child}function ar(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),wo|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(Qu(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(n(153));if(a.child!==null){for(i=a.child,l=Ja(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=Ja(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function mE(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&ky(i)))}function uk(i,a,l){switch(a.tag){case 3:Fe(a,a.stateNode.containerInfo),yo(a,Je,i.memoizedState.cache),Kl();break;case 27:case 5:hi(a);break;case 4:Fe(a,a.stateNode.containerInfo);break;case 10:yo(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,HA(a),null;break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(Eo(a),a.flags|=128,null):(l&a.child.childLanes)!==0?dC(i,a,l):(Eo(a),i=ar(i,a,l),i!==null?i.sibling:null);Eo(a);break;case 19:var g=(i.flags&128)!==0;if(d=(l&a.childLanes)!==0,d||(Qu(i,a,l,!1),d=(l&a.childLanes)!==0),g){if(d)return pC(i,a,l);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),nt(Ke,Ke.current),d)break;return null;case 22:return a.lanes=0,rC(i,a,l,a.pendingProps);case 24:yo(a,Je,i.memoizedState.cache)}return ar(i,a,l)}function mC(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)en=!0;else{if(!mE(i,l)&&(a.flags&128)===0)return en=!1,uk(i,a,l);en=(i.flags&131072)!==0}else en=!1,Yt&&(a.flags&1048576)!==0&&qw(a,Uf,a.index);switch(a.lanes=0,a.tag){case 16:t:{var d=a.pendingProps;if(i=Zl(a.elementType),a.type=i,typeof i=="function")AA(i)?(d=nc(i,d),a.tag=1,a=uC(null,a,i,d,l)):(a.tag=0,a=lE(null,a,i,d,l));else{if(i!=null){var g=i.$$typeof;if(g===N){a.tag=11,a=iC(null,a,i,d,l);break t}else if(g===k){a.tag=14,a=sC(null,a,i,d,l);break t}}throw a=yt(i)||i,Error(n(306,a,""))}}return a;case 0:return lE(i,a,a.type,a.pendingProps,l);case 1:return d=a.type,g=nc(d,a.pendingProps),uC(i,a,d,g,l);case 3:t:{if(Fe(a,a.stateNode.containerInfo),i===null)throw Error(n(387));d=a.pendingProps;var v=a.memoizedState;g=v.element,PA(i,a),Xf(a,d,null,l);var T=a.memoizedState;if(d=T.cache,yo(a,Je,d),d!==v.cache&&MA(a,[Je],l,!0),Yf(),d=T.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){a=hC(i,a,d,l);break t}else if(d!==g){g=gs(Error(n(424)),a),Ff(g),a=hC(i,a,d,l);break t}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(xe=Es(i.firstChild),Cn=a,Yt=!0,mo=null,vs=!0,l=rx(a,null,d,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Kl(),d===g){a=ar(i,a,l);break t}Mn(i,a,d,l)}a=a.child}return a;case 26:return n0(i,a),i===null?(l=xD(a.type,null,a.pendingProps,null))?a.memoizedState=l:Yt||(l=a.type,i=a.pendingProps,d=v0(vt.current).createElement(l),d[xn]=a,d[fi]=i,Rn(d,l,i),yn(d),a.stateNode=d):a.memoizedState=xD(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return hi(a),i===null&&Yt&&(d=a.stateNode=TD(a.type,a.pendingProps,vt.current),Cn=a,vs=!0,g=xe,Ro(a.type)?(KE=g,xe=Es(d.firstChild)):xe=g),Mn(i,a,a.pendingProps.children,l),n0(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&Yt&&((g=d=xe)&&(d=Hk(d,a.type,a.pendingProps,vs),d!==null?(a.stateNode=d,Cn=a,xe=Es(d.firstChild),vs=!1,g=!0):g=!1),g||go(a)),hi(a),g=a.type,v=a.pendingProps,T=i!==null?i.memoizedProps:null,d=v.children,jE(g,v)?d=null:T!==null&&jE(g,T)&&(a.flags|=32),a.memoizedState!==null&&(g=zA(i,a,ek,null,null,l),dp._currentValue=g),n0(i,a),Mn(i,a,d,l),a.child;case 6:return i===null&&Yt&&((i=l=xe)&&(l=Vk(l,a.pendingProps,vs),l!==null?(a.stateNode=l,Cn=a,xe=null,i=!0):i=!1),i||go(a)),null;case 13:return dC(i,a,l);case 4:return Fe(a,a.stateNode.containerInfo),d=a.pendingProps,i===null?a.child=tc(a,null,d,l):Mn(i,a,d,l),a.child;case 11:return iC(i,a,a.type,a.pendingProps,l);case 7:return Mn(i,a,a.pendingProps,l),a.child;case 8:return Mn(i,a,a.pendingProps.children,l),a.child;case 12:return Mn(i,a,a.pendingProps.children,l),a.child;case 10:return d=a.pendingProps,yo(a,a.type,d.value),Mn(i,a,d.children,l),a.child;case 9:return g=a.type._context,d=a.pendingProps.children,Wl(a),g=Dn(g),d=d(g),a.flags|=1,Mn(i,a,d,l),a.child;case 14:return sC(i,a,a.type,a.pendingProps,l);case 15:return aC(i,a,a.type,a.pendingProps,l);case 19:return pC(i,a,l);case 31:return ck(i,a,l);case 22:return rC(i,a,l,a.pendingProps);case 24:return Wl(a),d=Dn(Je),i===null?(g=NA(),g===null&&(g=be,v=RA(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=l),g=v),a.memoizedState={parent:d,cache:g},IA(a),yo(a,Je,g)):((i.lanes&l)!==0&&(PA(i,a),Xf(a,null,null,l),Yf()),g=i.memoizedState,v=a.memoizedState,g.parent!==d?(g={parent:d,cache:d},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),yo(a,Je,d)):(d=v.cache,yo(a,Je,d),d!==g.cache&&MA(a,[Je],l,!0))),Mn(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(n(156,a.tag))}function rr(i){i.flags|=4}function gE(i,a,l,d,g){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(zC())i.flags|=8192;else throw Jl=Vy,LA}else i.flags&=-16777217}function gC(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!OD(a))if(zC())i.flags|=8192;else throw Jl=Vy,LA}function s0(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?$1():536870912,i.lanes|=a,ch|=a)}function Zf(i,a){if(!Yt)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function Ce(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(a)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=d,i.childLanes=l,a}function hk(i,a,l){var d=a.pendingProps;switch(_A(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ce(a),null;case 1:return Ce(a),null;case 3:return l=a.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),nr(Je),ye(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Wu(a)?rr(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,xA())),Ce(a),null;case 26:var g=a.type,v=a.memoizedState;return i===null?(rr(a),v!==null?(Ce(a),gC(a,v)):(Ce(a),gE(a,g,null,d,l))):v?v!==i.memoizedState?(rr(a),Ce(a),gC(a,v)):(Ce(a),a.flags&=-16777217):(i=i.memoizedProps,i!==d&&rr(a),Ce(a),gE(a,g,i,d,l)),null;case 27:if(_t(a),l=vt.current,g=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==d&&rr(a);else{if(!d){if(a.stateNode===null)throw Error(n(166));return Ce(a),null}i=at.current,Wu(a)?$w(a):(i=TD(g,d,l),a.stateNode=i,rr(a))}return Ce(a),null;case 5:if(_t(a),g=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==d&&rr(a);else{if(!d){if(a.stateNode===null)throw Error(n(166));return Ce(a),null}if(v=at.current,Wu(a))$w(a);else{var T=v0(vt.current);switch(v){case 1:v=T.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:v=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":v=T.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":v=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":v=T.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof d.is=="string"?T.createElement("select",{is:d.is}):T.createElement("select"),d.multiple?v.multiple=!0:d.size&&(v.size=d.size);break;default:v=typeof d.is=="string"?T.createElement(g,{is:d.is}):T.createElement(g)}}v[xn]=a,v[fi]=d;t:for(T=a.child;T!==null;){if(T.tag===5||T.tag===6)v.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===a)break t;for(;T.sibling===null;){if(T.return===null||T.return===a)break t;T=T.return}T.sibling.return=T.return,T=T.sibling}a.stateNode=v;t:switch(Rn(v,g,d),g){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}d&&rr(a)}}return Ce(a),gE(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,l),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==d&&rr(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(n(166));if(i=vt.current,Wu(a)){if(i=a.stateNode,l=a.memoizedProps,d=null,g=Cn,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}i[xn]=a,i=!!(i.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||dD(i.nodeValue,l)),i||go(a,!0)}else i=v0(i).createTextNode(d),i[xn]=a,a.stateNode=i}return Ce(a),null;case 31:if(l=a.memoizedState,i===null||i.memoizedState!==null){if(d=Wu(a),l!==null){if(i===null){if(!d)throw Error(n(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[xn]=a}else Kl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ce(a),i=!1}else l=xA(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return a.flags&256?(Ui(a),a):(Ui(a),null);if((a.flags&128)!==0)throw Error(n(558))}return Ce(a),null;case 13:if(d=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=Wu(a),d!==null&&d.dehydrated!==null){if(i===null){if(!g)throw Error(n(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));g[xn]=a}else Kl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ce(a),g=!1}else g=xA(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(Ui(a),a):(Ui(a),null)}return Ui(a),(a.flags&128)!==0?(a.lanes=l,a):(l=d!==null,i=i!==null&&i.memoizedState!==null,l&&(d=a.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool),v=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==g&&(d.flags|=2048)),l!==i&&l&&(a.child.flags|=8192),s0(a,a.updateQueue),Ce(a),null);case 4:return ye(),i===null&&UE(a.stateNode.containerInfo),Ce(a),null;case 10:return nr(a.type),Ce(a),null;case 19:if(q(Ke),d=a.memoizedState,d===null)return Ce(a),null;if(g=(a.flags&128)!==0,v=d.rendering,v===null)if(g)Zf(d,!1);else{if(Ve!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(v=Yy(i),v!==null){for(a.flags|=128,Zf(d,!1),i=v.updateQueue,a.updateQueue=i,s0(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)Gw(l,i),l=l.sibling;return nt(Ke,Ke.current&1|2),Yt&&tr(a,d.treeForkCount),a.child}i=i.sibling}d.tail!==null&&Ni()>c0&&(a.flags|=128,g=!0,Zf(d,!1),a.lanes=4194304)}else{if(!g)if(i=Yy(v),i!==null){if(a.flags|=128,g=!0,i=i.updateQueue,a.updateQueue=i,s0(a,i),Zf(d,!0),d.tail===null&&d.tailMode==="hidden"&&!v.alternate&&!Yt)return Ce(a),null}else 2*Ni()-d.renderingStartTime>c0&&l!==536870912&&(a.flags|=128,g=!0,Zf(d,!1),a.lanes=4194304);d.isBackwards?(v.sibling=a.child,a.child=v):(i=d.last,i!==null?i.sibling=v:a.child=v,d.last=v)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=Ni(),i.sibling=null,l=Ke.current,nt(Ke,g?l&1|2:l&1),Yt&&tr(a,d.treeForkCount),i):(Ce(a),null);case 22:case 23:return Ui(a),FA(),d=a.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(l&536870912)!==0&&(a.flags&128)===0&&(Ce(a),a.subtreeFlags&6&&(a.flags|=8192)):Ce(a),l=a.updateQueue,l!==null&&s0(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==l&&(a.flags|=2048),i!==null&&q(Ql),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),nr(Je),Ce(a),null;case 25:return null;case 30:return null}throw Error(n(156,a.tag))}function dk(i,a){switch(_A(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return nr(Je),ye(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return _t(a),null;case 31:if(a.memoizedState!==null){if(Ui(a),a.alternate===null)throw Error(n(340));Kl()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(Ui(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Kl()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return q(Ke),null;case 4:return ye(),null;case 10:return nr(a.type),null;case 22:case 23:return Ui(a),FA(),i!==null&&q(Ql),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return nr(Je),null;case 25:return null;default:return null}}function yC(i,a){switch(_A(a),a.tag){case 3:nr(Je),ye();break;case 26:case 27:case 5:_t(a);break;case 4:ye();break;case 31:a.memoizedState!==null&&Ui(a);break;case 13:Ui(a);break;case 19:q(Ke);break;case 10:nr(a.type);break;case 22:case 23:Ui(a),FA(),i!==null&&q(Ql);break;case 24:nr(Je)}}function Jf(i,a){try{var l=a.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var g=d.next;l=g;do{if((l.tag&i)===i){d=void 0;var v=l.create,T=l.inst;d=v(),T.destroy=d}l=l.next}while(l!==g)}}catch(R){se(a,a.return,R)}}function To(i,a,l){try{var d=a.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var v=g.next;d=v;do{if((d.tag&i)===i){var T=d.inst,R=T.destroy;if(R!==void 0){T.destroy=void 0,g=a;var P=l,j=R;try{j()}catch(Q){se(g,P,Q)}}}d=d.next}while(d!==v)}}catch(Q){se(a,a.return,Q)}}function bC(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{lx(a,l)}catch(d){se(i,i.return,d)}}}function vC(i,a,l){l.props=nc(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(d){se(i,a,d)}}function tp(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof l=="function"?i.refCleanup=l(d):l.current=d}}catch(g){se(i,a,g)}}function ga(i,a){var l=i.ref,d=i.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(g){se(i,a,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){se(i,a,g)}else l.current=null}function AC(i){var a=i.type,l=i.memoizedProps,d=i.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break t;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(g){se(i,i.return,g)}}function yE(i,a,l){try{var d=i.stateNode;Ik(d,i.type,l,a),d[fi]=a}catch(g){se(i,i.return,g)}}function EC(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ro(i.type)||i.tag===4}function bE(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||EC(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ro(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function vE(i,a,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Qa));else if(d!==4&&(d===27&&Ro(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(vE(i,a,l),i=i.sibling;i!==null;)vE(i,a,l),i=i.sibling}function a0(i,a,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(d!==4&&(d===27&&Ro(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(a0(i,a,l),i=i.sibling;i!==null;)a0(i,a,l),i=i.sibling}function SC(i){var a=i.stateNode,l=i.memoizedProps;try{for(var d=i.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);Rn(a,d,l),a[xn]=i,a[fi]=l}catch(v){se(i,i.return,v)}}var or=!1,nn=!1,AE=!1,TC=typeof WeakSet=="function"?WeakSet:Set,bn=null;function fk(i,a){if(i=i.containerInfo,VE=x0,i=Pw(i),fA(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else t:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var g=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break t}var T=0,R=-1,P=-1,j=0,Q=0,J=i,G=null;e:for(;;){for(var K;J!==l||g!==0&&J.nodeType!==3||(R=T+g),J!==v||d!==0&&J.nodeType!==3||(P=T+d),J.nodeType===3&&(T+=J.nodeValue.length),(K=J.firstChild)!==null;)G=J,J=K;for(;;){if(J===i)break e;if(G===l&&++j===g&&(R=T),G===v&&++Q===d&&(P=T),(K=J.nextSibling)!==null)break;J=G,G=J.parentNode}J=K}l=R===-1||P===-1?null:{start:R,end:P}}else l=null}l=l||{start:0,end:0}}else l=null;for(zE={focusedElem:i,selectionRange:l},x0=!1,bn=a;bn!==null;)if(a=bn,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,bn=i;else for(;bn!==null;){switch(a=bn,v=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)g=i[l],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,l=a,g=v.memoizedProps,v=v.memoizedState,d=l.stateNode;try{var dt=nc(l.type,g);i=d.getSnapshotBeforeUpdate(dt,v),d.__reactInternalSnapshotBeforeUpdate=i}catch(wt){se(l,l.return,wt)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)YE(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":YE(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=a.sibling,i!==null){i.return=a.return,bn=i;break}bn=a.return}}function _C(i,a,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:cr(i,l),d&4&&Jf(5,l);break;case 1:if(cr(i,l),d&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(T){se(l,l.return,T)}else{var g=nc(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(g,a,i.__reactInternalSnapshotBeforeUpdate)}catch(T){se(l,l.return,T)}}d&64&&bC(l),d&512&&tp(l,l.return);break;case 3:if(cr(i,l),d&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{lx(i,a)}catch(T){se(l,l.return,T)}}break;case 27:a===null&&d&4&&SC(l);case 26:case 5:cr(i,l),a===null&&d&4&&AC(l),d&512&&tp(l,l.return);break;case 12:cr(i,l);break;case 31:cr(i,l),d&4&&CC(i,l);break;case 13:cr(i,l),d&4&&DC(i,l),d&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=Sk.bind(null,l),zk(i,l))));break;case 22:if(d=l.memoizedState!==null||or,!d){a=a!==null&&a.memoizedState!==null||nn,g=or;var v=nn;or=d,(nn=a)&&!v?ur(i,l,(l.subtreeFlags&8772)!==0):cr(i,l),or=g,nn=v}break;case 30:break;default:cr(i,l)}}function wC(i){var a=i.alternate;a!==null&&(i.alternate=null,wC(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Wv(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Me=null,mi=!1;function lr(i,a,l){for(l=l.child;l!==null;)xC(i,a,l),l=l.sibling}function xC(i,a,l){if(Li&&typeof Li.onCommitFiberUnmount=="function")try{Li.onCommitFiberUnmount(_f,l)}catch{}switch(l.tag){case 26:nn||ga(l,a),lr(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:nn||ga(l,a);var d=Me,g=mi;Ro(l.type)&&(Me=l.stateNode,mi=!1),lr(i,a,l),cp(l.stateNode),Me=d,mi=g;break;case 5:nn||ga(l,a);case 6:if(d=Me,g=mi,Me=null,lr(i,a,l),Me=d,mi=g,Me!==null)if(mi)try{(Me.nodeType===9?Me.body:Me.nodeName==="HTML"?Me.ownerDocument.body:Me).removeChild(l.stateNode)}catch(v){se(l,a,v)}else try{Me.removeChild(l.stateNode)}catch(v){se(l,a,v)}break;case 18:Me!==null&&(mi?(i=Me,bD(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),yh(i)):bD(Me,l.stateNode));break;case 4:d=Me,g=mi,Me=l.stateNode.containerInfo,mi=!0,lr(i,a,l),Me=d,mi=g;break;case 0:case 11:case 14:case 15:To(2,l,a),nn||To(4,l,a),lr(i,a,l);break;case 1:nn||(ga(l,a),d=l.stateNode,typeof d.componentWillUnmount=="function"&&vC(l,a,d)),lr(i,a,l);break;case 21:lr(i,a,l);break;case 22:nn=(d=nn)||l.memoizedState!==null,lr(i,a,l),nn=d;break;default:lr(i,a,l)}}function CC(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{yh(i)}catch(l){se(a,a.return,l)}}}function DC(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{yh(i)}catch(l){se(a,a.return,l)}}function pk(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new TC),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new TC),a;default:throw Error(n(435,i.tag))}}function r0(i,a){var l=pk(i);a.forEach(function(d){if(!l.has(d)){l.add(d);var g=Tk.bind(null,i,d);d.then(g,g)}})}function gi(i,a){var l=a.deletions;if(l!==null)for(var d=0;d<l.length;d++){var g=l[d],v=i,T=a,R=T;t:for(;R!==null;){switch(R.tag){case 27:if(Ro(R.type)){Me=R.stateNode,mi=!1;break t}break;case 5:Me=R.stateNode,mi=!1;break t;case 3:case 4:Me=R.stateNode.containerInfo,mi=!0;break t}R=R.return}if(Me===null)throw Error(n(160));xC(v,T,g),Me=null,mi=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)MC(a,i),a=a.sibling}var Xs=null;function MC(i,a){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:gi(a,i),yi(i),d&4&&(To(3,i,i.return),Jf(3,i),To(5,i,i.return));break;case 1:gi(a,i),yi(i),d&512&&(nn||l===null||ga(l,l.return)),d&64&&or&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var g=Xs;if(gi(a,i),yi(i),d&512&&(nn||l===null||ga(l,l.return)),d&4){var v=l!==null?l.memoizedState:null;if(d=i.memoizedState,l===null)if(d===null)if(i.stateNode===null){t:{d=i.type,l=i.memoizedProps,g=g.ownerDocument||g;e:switch(d){case"title":v=g.getElementsByTagName("title")[0],(!v||v[Cf]||v[xn]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(d),g.head.insertBefore(v,g.querySelector("head > title"))),Rn(v,d,l),v[xn]=i,yn(v),d=v;break t;case"link":var T=MD("link","href",g).get(d+(l.href||""));if(T){for(var R=0;R<T.length;R++)if(v=T[R],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(R,1);break e}}v=g.createElement(d),Rn(v,d,l),g.head.appendChild(v);break;case"meta":if(T=MD("meta","content",g).get(d+(l.content||""))){for(R=0;R<T.length;R++)if(v=T[R],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(R,1);break e}}v=g.createElement(d),Rn(v,d,l),g.head.appendChild(v);break;default:throw Error(n(468,d))}v[xn]=i,yn(v),d=v}i.stateNode=d}else RD(g,i.type,i.stateNode);else i.stateNode=DD(g,d,i.memoizedProps);else v!==d?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,d===null?RD(g,i.type,i.stateNode):DD(g,d,i.memoizedProps)):d===null&&i.stateNode!==null&&yE(i,i.memoizedProps,l.memoizedProps)}break;case 27:gi(a,i),yi(i),d&512&&(nn||l===null||ga(l,l.return)),l!==null&&d&4&&yE(i,i.memoizedProps,l.memoizedProps);break;case 5:if(gi(a,i),yi(i),d&512&&(nn||l===null||ga(l,l.return)),i.flags&32){g=i.stateNode;try{Hu(g,"")}catch(dt){se(i,i.return,dt)}}d&4&&i.stateNode!=null&&(g=i.memoizedProps,yE(i,g,l!==null?l.memoizedProps:g)),d&1024&&(AE=!0);break;case 6:if(gi(a,i),yi(i),d&4){if(i.stateNode===null)throw Error(n(162));d=i.memoizedProps,l=i.stateNode;try{l.nodeValue=d}catch(dt){se(i,i.return,dt)}}break;case 3:if(S0=null,g=Xs,Xs=A0(a.containerInfo),gi(a,i),Xs=g,yi(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{yh(a.containerInfo)}catch(dt){se(i,i.return,dt)}AE&&(AE=!1,RC(i));break;case 4:d=Xs,Xs=A0(i.stateNode.containerInfo),gi(a,i),yi(i),Xs=d;break;case 12:gi(a,i),yi(i);break;case 31:gi(a,i),yi(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,r0(i,d)));break;case 13:gi(a,i),yi(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(l0=Ni()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,r0(i,d)));break;case 22:g=i.memoizedState!==null;var P=l!==null&&l.memoizedState!==null,j=or,Q=nn;if(or=j||g,nn=Q||P,gi(a,i),nn=Q,or=j,yi(i),d&8192)t:for(a=i.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(l===null||P||or||nn||ic(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){P=l=a;try{if(v=P.stateNode,g)T=v.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{R=P.stateNode;var J=P.memoizedProps.style,G=J!=null&&J.hasOwnProperty("display")?J.display:null;R.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(dt){se(P,P.return,dt)}}}else if(a.tag===6){if(l===null){P=a;try{P.stateNode.nodeValue=g?"":P.memoizedProps}catch(dt){se(P,P.return,dt)}}}else if(a.tag===18){if(l===null){P=a;try{var K=P.stateNode;g?vD(K,!0):vD(P.stateNode,!1)}catch(dt){se(P,P.return,dt)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break t;for(;a.sibling===null;){if(a.return===null||a.return===i)break t;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=i.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,r0(i,l))));break;case 19:gi(a,i),yi(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,r0(i,d)));break;case 30:break;case 21:break;default:gi(a,i),yi(i)}}function yi(i){var a=i.flags;if(a&2){try{for(var l,d=i.return;d!==null;){if(EC(d)){l=d;break}d=d.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var g=l.stateNode,v=bE(i);a0(i,v,g);break;case 5:var T=l.stateNode;l.flags&32&&(Hu(T,""),l.flags&=-33);var R=bE(i);a0(i,R,T);break;case 3:case 4:var P=l.stateNode.containerInfo,j=bE(i);vE(i,j,P);break;default:throw Error(n(161))}}catch(Q){se(i,i.return,Q)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function RC(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;RC(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function cr(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)_C(i,a.alternate,a),a=a.sibling}function ic(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:To(4,a,a.return),ic(a);break;case 1:ga(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&vC(a,a.return,l),ic(a);break;case 27:cp(a.stateNode);case 26:case 5:ga(a,a.return),ic(a);break;case 22:a.memoizedState===null&&ic(a);break;case 30:ic(a);break;default:ic(a)}i=i.sibling}}function ur(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,g=i,v=a,T=v.flags;switch(v.tag){case 0:case 11:case 15:ur(g,v,l),Jf(4,v);break;case 1:if(ur(g,v,l),d=v,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(j){se(d,d.return,j)}if(d=v,g=d.updateQueue,g!==null){var R=d.stateNode;try{var P=g.shared.hiddenCallbacks;if(P!==null)for(g.shared.hiddenCallbacks=null,g=0;g<P.length;g++)ox(P[g],R)}catch(j){se(d,d.return,j)}}l&&T&64&&bC(v),tp(v,v.return);break;case 27:SC(v);case 26:case 5:ur(g,v,l),l&&d===null&&T&4&&AC(v),tp(v,v.return);break;case 12:ur(g,v,l);break;case 31:ur(g,v,l),l&&T&4&&CC(g,v);break;case 13:ur(g,v,l),l&&T&4&&DC(g,v);break;case 22:v.memoizedState===null&&ur(g,v,l),tp(v,v.return);break;case 30:break;default:ur(g,v,l)}a=a.sibling}}function EE(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Hf(l))}function SE(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Hf(i))}function qs(i,a,l,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)OC(i,a,l,d),a=a.sibling}function OC(i,a,l,d){var g=a.flags;switch(a.tag){case 0:case 11:case 15:qs(i,a,l,d),g&2048&&Jf(9,a);break;case 1:qs(i,a,l,d);break;case 3:qs(i,a,l,d),g&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Hf(i)));break;case 12:if(g&2048){qs(i,a,l,d),i=a.stateNode;try{var v=a.memoizedProps,T=v.id,R=v.onPostCommit;typeof R=="function"&&R(T,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(P){se(a,a.return,P)}}else qs(i,a,l,d);break;case 31:qs(i,a,l,d);break;case 13:qs(i,a,l,d);break;case 23:break;case 22:v=a.stateNode,T=a.alternate,a.memoizedState!==null?v._visibility&2?qs(i,a,l,d):ep(i,a):v._visibility&2?qs(i,a,l,d):(v._visibility|=2,rh(i,a,l,d,(a.subtreeFlags&10256)!==0||!1)),g&2048&&EE(T,a);break;case 24:qs(i,a,l,d),g&2048&&SE(a.alternate,a);break;default:qs(i,a,l,d)}}function rh(i,a,l,d,g){for(g=g&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var v=i,T=a,R=l,P=d,j=T.flags;switch(T.tag){case 0:case 11:case 15:rh(v,T,R,P,g),Jf(8,T);break;case 23:break;case 22:var Q=T.stateNode;T.memoizedState!==null?Q._visibility&2?rh(v,T,R,P,g):ep(v,T):(Q._visibility|=2,rh(v,T,R,P,g)),g&&j&2048&&EE(T.alternate,T);break;case 24:rh(v,T,R,P,g),g&&j&2048&&SE(T.alternate,T);break;default:rh(v,T,R,P,g)}a=a.sibling}}function ep(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,d=a,g=d.flags;switch(d.tag){case 22:ep(l,d),g&2048&&EE(d.alternate,d);break;case 24:ep(l,d),g&2048&&SE(d.alternate,d);break;default:ep(l,d)}a=a.sibling}}var np=8192;function oh(i,a,l){if(i.subtreeFlags&np)for(i=i.child;i!==null;)NC(i,a,l),i=i.sibling}function NC(i,a,l){switch(i.tag){case 26:oh(i,a,l),i.flags&np&&i.memoizedState!==null&&tU(l,Xs,i.memoizedState,i.memoizedProps);break;case 5:oh(i,a,l);break;case 3:case 4:var d=Xs;Xs=A0(i.stateNode.containerInfo),oh(i,a,l),Xs=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=np,np=16777216,oh(i,a,l),np=d):oh(i,a,l));break;default:oh(i,a,l)}}function LC(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function ip(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var d=a[l];bn=d,PC(d,i)}LC(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)IC(i),i=i.sibling}function IC(i){switch(i.tag){case 0:case 11:case 15:ip(i),i.flags&2048&&To(9,i,i.return);break;case 3:ip(i);break;case 12:ip(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,o0(i)):ip(i);break;default:ip(i)}}function o0(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var d=a[l];bn=d,PC(d,i)}LC(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:To(8,a,a.return),o0(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,o0(a));break;default:o0(a)}i=i.sibling}}function PC(i,a){for(;bn!==null;){var l=bn;switch(l.tag){case 0:case 11:case 15:To(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Hf(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,bn=d;else t:for(l=i;bn!==null;){d=bn;var g=d.sibling,v=d.return;if(wC(d),d===l){bn=null;break t}if(g!==null){g.return=v,bn=g;break t}bn=v}}}var mk={getCacheForType:function(i){var a=Dn(Je),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l},cacheSignal:function(){return Dn(Je).controller.signal}},gk=typeof WeakMap=="function"?WeakMap:Map,Zt=0,be=null,Ft=null,Vt=0,ie=0,Fi=null,_o=!1,lh=!1,TE=!1,hr=0,Ve=0,wo=0,sc=0,_E=0,Hi=0,ch=0,sp=null,bi=null,wE=!1,l0=0,BC=0,c0=1/0,u0=null,xo=null,cn=0,Co=null,uh=null,dr=0,xE=0,CE=null,kC=null,ap=0,DE=null;function Vi(){return(Zt&2)!==0&&Vt!==0?Vt&-Vt:F.T!==null?IE():J1()}function UC(){if(Hi===0)if((Vt&536870912)===0||Yt){var i=by;by<<=1,(by&3932160)===0&&(by=262144),Hi=i}else Hi=536870912;return i=ki.current,i!==null&&(i.flags|=32),Hi}function vi(i,a,l){(i===be&&(ie===2||ie===9)||i.cancelPendingCommit!==null)&&(hh(i,0),Do(i,Vt,Hi,!1)),xf(i,l),((Zt&2)===0||i!==be)&&(i===be&&((Zt&2)===0&&(sc|=l),Ve===4&&Do(i,Vt,Hi,!1)),ya(i))}function FC(i,a,l){if((Zt&6)!==0)throw Error(n(327));var d=!l&&(a&127)===0&&(a&i.expiredLanes)===0||wf(i,a),g=d?vk(i,a):RE(i,a,!0),v=d;do{if(g===0){lh&&!d&&Do(i,a,0,!1);break}else{if(l=i.current.alternate,v&&!yk(l)){g=RE(i,a,!1),v=!1;continue}if(g===2){if(v=a,i.errorRecoveryDisabledLanes&v)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;t:{var R=i;g=sp;var P=R.current.memoizedState.isDehydrated;if(P&&(hh(R,T).flags|=256),T=RE(R,T,!1),T!==2){if(TE&&!P){R.errorRecoveryDisabledLanes|=v,sc|=v,g=4;break t}v=bi,bi=g,v!==null&&(bi===null?bi=v:bi.push.apply(bi,v))}g=T}if(v=!1,g!==2)continue}}if(g===1){hh(i,0),Do(i,a,0,!0);break}t:{switch(d=i,v=g,v){case 0:case 1:throw Error(n(345));case 4:if((a&4194048)!==a)break;case 6:Do(d,a,Hi,!_o);break t;case 2:bi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((a&62914560)===a&&(g=l0+300-Ni(),10<g)){if(Do(d,a,Hi,!_o),Ay(d,0,!0)!==0)break t;dr=a,d.timeoutHandle=gD(HC.bind(null,d,l,bi,u0,wE,a,Hi,sc,ch,_o,v,"Throttled",-0,0),g);break t}HC(d,l,bi,u0,wE,a,Hi,sc,ch,_o,v,null,-0,0)}}break}while(!0);ya(i)}function HC(i,a,l,d,g,v,T,R,P,j,Q,J,G,K){if(i.timeoutHandle=-1,J=a.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qa},NC(a,v,J);var dt=(v&62914560)===v?l0-Ni():(v&4194048)===v?BC-Ni():0;if(dt=eU(J,dt),dt!==null){dr=v,i.cancelPendingCommit=dt(KC.bind(null,i,a,v,l,d,g,T,R,P,Q,J,null,G,K)),Do(i,v,T,!j);return}}KC(i,a,v,l,d,g,T,R,P)}function yk(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var g=l[d],v=g.getSnapshot;g=g.value;try{if(!Pi(v(),g))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Do(i,a,l,d){a&=~_E,a&=~sc,i.suspendedLanes|=a,i.pingedLanes&=~a,d&&(i.warmLanes|=a),d=i.expirationTimes;for(var g=a;0<g;){var v=31-Ii(g),T=1<<v;d[v]=-1,g&=~T}l!==0&&W1(i,l,a)}function h0(){return(Zt&6)===0?(rp(0),!1):!0}function ME(){if(Ft!==null){if(ie===0)var i=Ft.return;else i=Ft,er=$l=null,YA(i),eh=null,zf=0,i=Ft;for(;i!==null;)yC(i.alternate,i),i=i.return;Ft=null}}function hh(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,kk(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),dr=0,ME(),be=i,Ft=l=Ja(i.current,null),Vt=a,ie=0,Fi=null,_o=!1,lh=wf(i,a),TE=!1,ch=Hi=_E=sc=wo=Ve=0,bi=sp=null,wE=!1,(a&8)!==0&&(a|=a&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=a;0<d;){var g=31-Ii(d),v=1<<g;a|=i[g],d&=~v}return hr=a,Ny(),l}function VC(i,a){Lt=null,F.H=Wf,a===th||a===Hy?(a=ix(),ie=3):a===LA?(a=ix(),ie=4):ie=a===oE?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Fi=a,Ft===null&&(Ve=1,t0(i,gs(a,i.current)))}function zC(){var i=ki.current;return i===null?!0:(Vt&4194048)===Vt?As===null:(Vt&62914560)===Vt||(Vt&536870912)!==0?i===As:!1}function jC(){var i=F.H;return F.H=Wf,i===null?Wf:i}function GC(){var i=F.A;return F.A=mk,i}function d0(){Ve=4,_o||(Vt&4194048)!==Vt&&ki.current!==null||(lh=!0),(wo&134217727)===0&&(sc&134217727)===0||be===null||Do(be,Vt,Hi,!1)}function RE(i,a,l){var d=Zt;Zt|=2;var g=jC(),v=GC();(be!==i||Vt!==a)&&(u0=null,hh(i,a)),a=!1;var T=Ve;t:do try{if(ie!==0&&Ft!==null){var R=Ft,P=Fi;switch(ie){case 8:ME(),T=6;break t;case 3:case 2:case 9:case 6:ki.current===null&&(a=!0);var j=ie;if(ie=0,Fi=null,dh(i,R,P,j),l&&lh){T=0;break t}break;default:j=ie,ie=0,Fi=null,dh(i,R,P,j)}}bk(),T=Ve;break}catch(Q){VC(i,Q)}while(!0);return a&&i.shellSuspendCounter++,er=$l=null,Zt=d,F.H=g,F.A=v,Ft===null&&(be=null,Vt=0,Ny()),T}function bk(){for(;Ft!==null;)YC(Ft)}function vk(i,a){var l=Zt;Zt|=2;var d=jC(),g=GC();be!==i||Vt!==a?(u0=null,c0=Ni()+500,hh(i,a)):lh=wf(i,a);t:do try{if(ie!==0&&Ft!==null){a=Ft;var v=Fi;e:switch(ie){case 1:ie=0,Fi=null,dh(i,a,v,1);break;case 2:case 9:if(ex(v)){ie=0,Fi=null,XC(a);break}a=function(){ie!==2&&ie!==9||be!==i||(ie=7),ya(i)},v.then(a,a);break t;case 3:ie=7;break t;case 4:ie=5;break t;case 7:ex(v)?(ie=0,Fi=null,XC(a)):(ie=0,Fi=null,dh(i,a,v,7));break;case 5:var T=null;switch(Ft.tag){case 26:T=Ft.memoizedState;case 5:case 27:var R=Ft;if(T?OD(T):R.stateNode.complete){ie=0,Fi=null;var P=R.sibling;if(P!==null)Ft=P;else{var j=R.return;j!==null?(Ft=j,f0(j)):Ft=null}break e}}ie=0,Fi=null,dh(i,a,v,5);break;case 6:ie=0,Fi=null,dh(i,a,v,6);break;case 8:ME(),Ve=6;break t;default:throw Error(n(462))}}Ak();break}catch(Q){VC(i,Q)}while(!0);return er=$l=null,F.H=d,F.A=g,Zt=l,Ft!==null?0:(be=null,Vt=0,Ny(),Ve)}function Ak(){for(;Ft!==null&&!jP();)YC(Ft)}function YC(i){var a=mC(i.alternate,i,hr);i.memoizedProps=i.pendingProps,a===null?f0(i):Ft=a}function XC(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=cC(l,a,a.pendingProps,a.type,void 0,Vt);break;case 11:a=cC(l,a,a.pendingProps,a.type.render,a.ref,Vt);break;case 5:YA(a);default:yC(l,a),a=Ft=Gw(a,hr),a=mC(l,a,hr)}i.memoizedProps=i.pendingProps,a===null?f0(i):Ft=a}function dh(i,a,l,d){er=$l=null,YA(a),eh=null,zf=0;var g=a.return;try{if(lk(i,g,a,l,Vt)){Ve=1,t0(i,gs(l,i.current)),Ft=null;return}}catch(v){if(g!==null)throw Ft=g,v;Ve=1,t0(i,gs(l,i.current)),Ft=null;return}a.flags&32768?(Yt||d===1?i=!0:lh||(Vt&536870912)!==0?i=!1:(_o=i=!0,(d===2||d===9||d===3||d===6)&&(d=ki.current,d!==null&&d.tag===13&&(d.flags|=16384))),qC(a,i)):f0(a)}function f0(i){var a=i;do{if((a.flags&32768)!==0){qC(a,_o);return}i=a.return;var l=hk(a.alternate,a,hr);if(l!==null){Ft=l;return}if(a=a.sibling,a!==null){Ft=a;return}Ft=a=i}while(a!==null);Ve===0&&(Ve=5)}function qC(i,a){do{var l=dk(i.alternate,i);if(l!==null){l.flags&=32767,Ft=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){Ft=i;return}Ft=i=l}while(i!==null);Ve=6,Ft=null}function KC(i,a,l,d,g,v,T,R,P){i.cancelPendingCommit=null;do p0();while(cn!==0);if((Zt&6)!==0)throw Error(n(327));if(a!==null){if(a===i.current)throw Error(n(177));if(v=a.lanes|a.childLanes,v|=bA,JP(i,l,v,T,R,P),i===be&&(Ft=be=null,Vt=0),uh=a,Co=i,dr=l,xE=v,CE=g,kC=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,_k(gy,function(){return JC(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=F.T,F.T=null,g=Y.p,Y.p=2,T=Zt,Zt|=4;try{fk(i,a,l)}finally{Zt=T,Y.p=g,F.T=d}}cn=1,$C(),WC(),QC()}}function $C(){if(cn===1){cn=0;var i=Co,a=uh,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=F.T,F.T=null;var d=Y.p;Y.p=2;var g=Zt;Zt|=4;try{MC(a,i);var v=zE,T=Pw(i.containerInfo),R=v.focusedElem,P=v.selectionRange;if(T!==R&&R&&R.ownerDocument&&Iw(R.ownerDocument.documentElement,R)){if(P!==null&&fA(R)){var j=P.start,Q=P.end;if(Q===void 0&&(Q=j),"selectionStart"in R)R.selectionStart=j,R.selectionEnd=Math.min(Q,R.value.length);else{var J=R.ownerDocument||document,G=J&&J.defaultView||window;if(G.getSelection){var K=G.getSelection(),dt=R.textContent.length,wt=Math.min(P.start,dt),ue=P.end===void 0?wt:Math.min(P.end,dt);!K.extend&&wt>ue&&(T=ue,ue=wt,wt=T);var H=Lw(R,wt),U=Lw(R,ue);if(H&&U&&(K.rangeCount!==1||K.anchorNode!==H.node||K.anchorOffset!==H.offset||K.focusNode!==U.node||K.focusOffset!==U.offset)){var V=J.createRange();V.setStart(H.node,H.offset),K.removeAllRanges(),wt>ue?(K.addRange(V),K.extend(U.node,U.offset)):(V.setEnd(U.node,U.offset),K.addRange(V))}}}}for(J=[],K=R;K=K.parentNode;)K.nodeType===1&&J.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<J.length;R++){var Z=J[R];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}x0=!!VE,zE=VE=null}finally{Zt=g,Y.p=d,F.T=l}}i.current=a,cn=2}}function WC(){if(cn===2){cn=0;var i=Co,a=uh,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=F.T,F.T=null;var d=Y.p;Y.p=2;var g=Zt;Zt|=4;try{_C(i,a.alternate,a)}finally{Zt=g,Y.p=d,F.T=l}}cn=3}}function QC(){if(cn===4||cn===3){cn=0,GP();var i=Co,a=uh,l=dr,d=kC;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?cn=5:(cn=0,uh=Co=null,ZC(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(xo=null),Kv(l),a=a.stateNode,Li&&typeof Li.onCommitFiberRoot=="function")try{Li.onCommitFiberRoot(_f,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=F.T,g=Y.p,Y.p=2,F.T=null;try{for(var v=i.onRecoverableError,T=0;T<d.length;T++){var R=d[T];v(R.value,{componentStack:R.stack})}}finally{F.T=a,Y.p=g}}(dr&3)!==0&&p0(),ya(i),g=i.pendingLanes,(l&261930)!==0&&(g&42)!==0?i===DE?ap++:(ap=0,DE=i):ap=0,rp(0)}}function ZC(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Hf(a)))}function p0(){return $C(),WC(),QC(),JC()}function JC(){if(cn!==5)return!1;var i=Co,a=xE;xE=0;var l=Kv(dr),d=F.T,g=Y.p;try{Y.p=32>l?32:l,F.T=null,l=CE,CE=null;var v=Co,T=dr;if(cn=0,uh=Co=null,dr=0,(Zt&6)!==0)throw Error(n(331));var R=Zt;if(Zt|=4,IC(v.current),OC(v,v.current,T,l),Zt=R,rp(0,!1),Li&&typeof Li.onPostCommitFiberRoot=="function")try{Li.onPostCommitFiberRoot(_f,v)}catch{}return!0}finally{Y.p=g,F.T=d,ZC(i,a)}}function tD(i,a,l){a=gs(l,a),a=rE(i.stateNode,a,2),i=Ao(i,a,2),i!==null&&(xf(i,2),ya(i))}function se(i,a,l){if(i.tag===3)tD(i,i,l);else for(;a!==null;){if(a.tag===3){tD(a,i,l);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(xo===null||!xo.has(d))){i=gs(l,i),l=eC(2),d=Ao(a,l,2),d!==null&&(nC(l,d,a,i),xf(d,2),ya(d));break}}a=a.return}}function OE(i,a,l){var d=i.pingCache;if(d===null){d=i.pingCache=new gk;var g=new Set;d.set(a,g)}else g=d.get(a),g===void 0&&(g=new Set,d.set(a,g));g.has(l)||(TE=!0,g.add(l),i=Ek.bind(null,i,a,l),a.then(i,i))}function Ek(i,a,l){var d=i.pingCache;d!==null&&d.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,be===i&&(Vt&l)===l&&(Ve===4||Ve===3&&(Vt&62914560)===Vt&&300>Ni()-l0?(Zt&2)===0&&hh(i,0):_E|=l,ch===Vt&&(ch=0)),ya(i)}function eD(i,a){a===0&&(a=$1()),i=Xl(i,a),i!==null&&(xf(i,a),ya(i))}function Sk(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),eD(i,l)}function Tk(i,a){var l=0;switch(i.tag){case 31:case 13:var d=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(n(314))}d!==null&&d.delete(a),eD(i,l)}function _k(i,a){return Gv(i,a)}var m0=null,fh=null,NE=!1,g0=!1,LE=!1,Mo=0;function ya(i){i!==fh&&i.next===null&&(fh===null?m0=fh=i:fh=fh.next=i),g0=!0,NE||(NE=!0,xk())}function rp(i,a){if(!LE&&g0){LE=!0;do for(var l=!1,d=m0;d!==null;){if(i!==0){var g=d.pendingLanes;if(g===0)var v=0;else{var T=d.suspendedLanes,R=d.pingedLanes;v=(1<<31-Ii(42|i)+1)-1,v&=g&~(T&~R),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,aD(d,v))}else v=Vt,v=Ay(d,d===be?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||wf(d,v)||(l=!0,aD(d,v));d=d.next}while(l);LE=!1}}function wk(){nD()}function nD(){g0=NE=!1;var i=0;Mo!==0&&Bk()&&(i=Mo);for(var a=Ni(),l=null,d=m0;d!==null;){var g=d.next,v=iD(d,a);v===0?(d.next=null,l===null?m0=g:l.next=g,g===null&&(fh=l)):(l=d,(i!==0||(v&3)!==0)&&(g0=!0)),d=g}cn!==0&&cn!==5||rp(i),Mo!==0&&(Mo=0)}function iD(i,a){for(var l=i.suspendedLanes,d=i.pingedLanes,g=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var T=31-Ii(v),R=1<<T,P=g[T];P===-1?((R&l)===0||(R&d)!==0)&&(g[T]=ZP(R,a)):P<=a&&(i.expiredLanes|=R),v&=~R}if(a=be,l=Vt,l=Ay(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,l===0||i===a&&(ie===2||ie===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&Yv(d),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||wf(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(d!==null&&Yv(d),Kv(l)){case 2:case 8:l=q1;break;case 32:l=gy;break;case 268435456:l=K1;break;default:l=gy}return d=sD.bind(null,i),l=Gv(l,d),i.callbackPriority=a,i.callbackNode=l,a}return d!==null&&d!==null&&Yv(d),i.callbackPriority=2,i.callbackNode=null,2}function sD(i,a){if(cn!==0&&cn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(p0()&&i.callbackNode!==l)return null;var d=Vt;return d=Ay(i,i===be?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(FC(i,d,a),iD(i,Ni()),i.callbackNode!=null&&i.callbackNode===l?sD.bind(null,i):null)}function aD(i,a){if(p0())return null;FC(i,a,!0)}function xk(){Uk(function(){(Zt&6)!==0?Gv(X1,wk):nD()})}function IE(){if(Mo===0){var i=Zu;i===0&&(i=yy,yy<<=1,(yy&261888)===0&&(yy=256)),Mo=i}return Mo}function rD(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:_y(""+i)}function oD(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function Ck(i,a,l,d,g){if(a==="submit"&&l&&l.stateNode===g){var v=rD((g[fi]||null).action),T=d.submitter;T&&(a=(a=T[fi]||null)?rD(a.formAction):T.getAttribute("formAction"),a!==null&&(v=a,T=null));var R=new Dy("action","action",null,d,g);i.push({event:R,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Mo!==0){var P=T?oD(g,T):new FormData(g);tE(l,{pending:!0,data:P,method:g.method,action:v},null,P)}}else typeof v=="function"&&(R.preventDefault(),P=T?oD(g,T):new FormData(g),tE(l,{pending:!0,data:P,method:g.method,action:v},v,P))},currentTarget:g}]})}}for(var PE=0;PE<yA.length;PE++){var BE=yA[PE],Dk=BE.toLowerCase(),Mk=BE[0].toUpperCase()+BE.slice(1);Ys(Dk,"on"+Mk)}Ys(Uw,"onAnimationEnd"),Ys(Fw,"onAnimationIteration"),Ys(Hw,"onAnimationStart"),Ys("dblclick","onDoubleClick"),Ys("focusin","onFocus"),Ys("focusout","onBlur"),Ys(YB,"onTransitionRun"),Ys(XB,"onTransitionStart"),Ys(qB,"onTransitionCancel"),Ys(Vw,"onTransitionEnd"),Uu("onMouseEnter",["mouseout","mouseover"]),Uu("onMouseLeave",["mouseout","mouseover"]),Uu("onPointerEnter",["pointerout","pointerover"]),Uu("onPointerLeave",["pointerout","pointerover"]),zl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zl("onBeforeInput",["compositionend","keypress","textInput","paste"]),zl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var op="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(op));function lD(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],g=d.event;d=d.listeners;t:{var v=void 0;if(a)for(var T=d.length-1;0<=T;T--){var R=d[T],P=R.instance,j=R.currentTarget;if(R=R.listener,P!==v&&g.isPropagationStopped())break t;v=R,g.currentTarget=j;try{v(g)}catch(Q){Oy(Q)}g.currentTarget=null,v=P}else for(T=0;T<d.length;T++){if(R=d[T],P=R.instance,j=R.currentTarget,R=R.listener,P!==v&&g.isPropagationStopped())break t;v=R,g.currentTarget=j;try{v(g)}catch(Q){Oy(Q)}g.currentTarget=null,v=P}}}}function Ht(i,a){var l=a[$v];l===void 0&&(l=a[$v]=new Set);var d=i+"__bubble";l.has(d)||(cD(a,i,2,!1),l.add(d))}function kE(i,a,l){var d=0;a&&(d|=4),cD(l,i,d,a)}var y0="_reactListening"+Math.random().toString(36).slice(2);function UE(i){if(!i[y0]){i[y0]=!0,nw.forEach(function(l){l!=="selectionchange"&&(Rk.has(l)||kE(l,!1,i),kE(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[y0]||(a[y0]=!0,kE("selectionchange",!1,a))}}function cD(i,a,l,d){switch(UD(a)){case 2:var g=sU;break;case 8:g=aU;break;default:g=JE}l=g.bind(null,a,l,i),g=void 0,!sA||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),d?g!==void 0?i.addEventListener(a,l,{capture:!0,passive:g}):i.addEventListener(a,l,!0):g!==void 0?i.addEventListener(a,l,{passive:g}):i.addEventListener(a,l,!1)}function FE(i,a,l,d,g){var v=d;if((a&1)===0&&(a&2)===0&&d!==null)t:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var R=d.stateNode.containerInfo;if(R===g)break;if(T===4)for(T=d.return;T!==null;){var P=T.tag;if((P===3||P===4)&&T.stateNode.containerInfo===g)return;T=T.return}for(;R!==null;){if(T=Pu(R),T===null)return;if(P=T.tag,P===5||P===6||P===26||P===27){d=v=T;continue t}R=R.parentNode}}d=d.return}pw(function(){var j=v,Q=nA(l),J=[];t:{var G=zw.get(i);if(G!==void 0){var K=Dy,dt=i;switch(i){case"keypress":if(xy(l)===0)break t;case"keydown":case"keyup":K=TB;break;case"focusin":dt="focus",K=lA;break;case"focusout":dt="blur",K=lA;break;case"beforeblur":case"afterblur":K=lA;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=yw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=hB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=xB;break;case Uw:case Fw:case Hw:K=pB;break;case Vw:K=DB;break;case"scroll":case"scrollend":K=cB;break;case"wheel":K=RB;break;case"copy":case"cut":case"paste":K=gB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=vw;break;case"toggle":case"beforetoggle":K=NB}var wt=(a&4)!==0,ue=!wt&&(i==="scroll"||i==="scrollend"),H=wt?G!==null?G+"Capture":null:G;wt=[];for(var U=j,V;U!==null;){var Z=U;if(V=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||V===null||H===null||(Z=Mf(U,H),Z!=null&&wt.push(lp(U,Z,V))),ue)break;U=U.return}0<wt.length&&(G=new K(G,dt,null,l,Q),J.push({event:G,listeners:wt}))}}if((a&7)===0){t:{if(G=i==="mouseover"||i==="pointerover",K=i==="mouseout"||i==="pointerout",G&&l!==eA&&(dt=l.relatedTarget||l.fromElement)&&(Pu(dt)||dt[Iu]))break t;if((K||G)&&(G=Q.window===Q?Q:(G=Q.ownerDocument)?G.defaultView||G.parentWindow:window,K?(dt=l.relatedTarget||l.toElement,K=j,dt=dt?Pu(dt):null,dt!==null&&(ue=o(dt),wt=dt.tag,dt!==ue||wt!==5&&wt!==27&&wt!==6)&&(dt=null)):(K=null,dt=j),K!==dt)){if(wt=yw,Z="onMouseLeave",H="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(wt=vw,Z="onPointerLeave",H="onPointerEnter",U="pointer"),ue=K==null?G:Df(K),V=dt==null?G:Df(dt),G=new wt(Z,U+"leave",K,l,Q),G.target=ue,G.relatedTarget=V,Z=null,Pu(Q)===j&&(wt=new wt(H,U+"enter",dt,l,Q),wt.target=V,wt.relatedTarget=ue,Z=wt),ue=Z,K&&dt)e:{for(wt=Ok,H=K,U=dt,V=0,Z=H;Z;Z=wt(Z))V++;Z=0;for(var St=U;St;St=wt(St))Z++;for(;0<V-Z;)H=wt(H),V--;for(;0<Z-V;)U=wt(U),Z--;for(;V--;){if(H===U||U!==null&&H===U.alternate){wt=H;break e}H=wt(H),U=wt(U)}wt=null}else wt=null;K!==null&&uD(J,G,K,wt,!1),dt!==null&&ue!==null&&uD(J,ue,dt,wt,!0)}}t:{if(G=j?Df(j):window,K=G.nodeName&&G.nodeName.toLowerCase(),K==="select"||K==="input"&&G.type==="file")var Wt=Cw;else if(ww(G))if(Dw)Wt=zB;else{Wt=HB;var pt=FB}else K=G.nodeName,!K||K.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?j&&tA(j.elementType)&&(Wt=Cw):Wt=VB;if(Wt&&(Wt=Wt(i,j))){xw(J,Wt,l,Q);break t}pt&&pt(i,G,j),i==="focusout"&&j&&G.type==="number"&&j.memoizedProps.value!=null&&Jv(G,"number",G.value)}switch(pt=j?Df(j):window,i){case"focusin":(ww(pt)||pt.contentEditable==="true")&&(Gu=pt,pA=j,kf=null);break;case"focusout":kf=pA=Gu=null;break;case"mousedown":mA=!0;break;case"contextmenu":case"mouseup":case"dragend":mA=!1,Bw(J,l,Q);break;case"selectionchange":if(GB)break;case"keydown":case"keyup":Bw(J,l,Q)}var Pt;if(uA)t:{switch(i){case"compositionstart":var zt="onCompositionStart";break t;case"compositionend":zt="onCompositionEnd";break t;case"compositionupdate":zt="onCompositionUpdate";break t}zt=void 0}else ju?Tw(i,l)&&(zt="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(zt="onCompositionStart");zt&&(Aw&&l.locale!=="ko"&&(ju||zt!=="onCompositionStart"?zt==="onCompositionEnd"&&ju&&(Pt=mw()):(fo=Q,aA="value"in fo?fo.value:fo.textContent,ju=!0)),pt=b0(j,zt),0<pt.length&&(zt=new bw(zt,i,null,l,Q),J.push({event:zt,listeners:pt}),Pt?zt.data=Pt:(Pt=_w(l),Pt!==null&&(zt.data=Pt)))),(Pt=IB?PB(i,l):BB(i,l))&&(zt=b0(j,"onBeforeInput"),0<zt.length&&(pt=new bw("onBeforeInput","beforeinput",null,l,Q),J.push({event:pt,listeners:zt}),pt.data=Pt)),Ck(J,i,j,l,Q)}lD(J,a)})}function lp(i,a,l){return{instance:i,listener:a,currentTarget:l}}function b0(i,a){for(var l=a+"Capture",d=[];i!==null;){var g=i,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=Mf(i,l),g!=null&&d.unshift(lp(i,g,v)),g=Mf(i,a),g!=null&&d.push(lp(i,g,v))),i.tag===3)return d;i=i.return}return[]}function Ok(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function uD(i,a,l,d,g){for(var v=a._reactName,T=[];l!==null&&l!==d;){var R=l,P=R.alternate,j=R.stateNode;if(R=R.tag,P!==null&&P===d)break;R!==5&&R!==26&&R!==27||j===null||(P=j,g?(j=Mf(l,v),j!=null&&T.unshift(lp(l,j,P))):g||(j=Mf(l,v),j!=null&&T.push(lp(l,j,P)))),l=l.return}T.length!==0&&i.push({event:a,listeners:T})}var Nk=/\r\n?/g,Lk=/\u0000|\uFFFD/g;function hD(i){return(typeof i=="string"?i:""+i).replace(Nk,`
`).replace(Lk,"")}function dD(i,a){return a=hD(a),hD(i)===a}function ce(i,a,l,d,g,v){switch(l){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||Hu(i,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&Hu(i,""+d);break;case"className":Sy(i,"class",d);break;case"tabIndex":Sy(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Sy(i,l,d);break;case"style":dw(i,d,v);break;case"data":if(a!=="object"){Sy(i,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(l);break}d=_y(""+d),i.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(a!=="input"&&ce(i,a,"name",g.name,g,null),ce(i,a,"formEncType",g.formEncType,g,null),ce(i,a,"formMethod",g.formMethod,g,null),ce(i,a,"formTarget",g.formTarget,g,null)):(ce(i,a,"encType",g.encType,g,null),ce(i,a,"method",g.method,g,null),ce(i,a,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(l);break}d=_y(""+d),i.setAttribute(l,d);break;case"onClick":d!=null&&(i.onclick=Qa);break;case"onScroll":d!=null&&Ht("scroll",i);break;case"onScrollEnd":d!=null&&Ht("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(l=d.__html,l!=null){if(g.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}l=_y(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,""+d):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":d===!0?i.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,d):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(l,d):i.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(l):i.setAttribute(l,d);break;case"popover":Ht("beforetoggle",i),Ht("toggle",i),Ey(i,"popover",d);break;case"xlinkActuate":Wa(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Wa(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Wa(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Wa(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Wa(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Wa(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Wa(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Wa(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Wa(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Ey(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=oB.get(l)||l,Ey(i,l,d))}}function HE(i,a,l,d,g,v){switch(l){case"style":dw(i,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(l=d.__html,l!=null){if(g.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"children":typeof d=="string"?Hu(i,d):(typeof d=="number"||typeof d=="bigint")&&Hu(i,""+d);break;case"onScroll":d!=null&&Ht("scroll",i);break;case"onScrollEnd":d!=null&&Ht("scrollend",i);break;case"onClick":d!=null&&(i.onclick=Qa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!iw.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),a=l.slice(2,g?l.length-7:void 0),v=i[fi]||null,v=v!=null?v[l]:null,typeof v=="function"&&i.removeEventListener(a,v,g),typeof d=="function")){typeof v!="function"&&v!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,d,g);break t}l in i?i[l]=d:d===!0?i.setAttribute(l,""):Ey(i,l,d)}}}function Rn(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ht("error",i),Ht("load",i);var d=!1,g=!1,v;for(v in l)if(l.hasOwnProperty(v)){var T=l[v];if(T!=null)switch(v){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:ce(i,a,v,T,l,null)}}g&&ce(i,a,"srcSet",l.srcSet,l,null),d&&ce(i,a,"src",l.src,l,null);return;case"input":Ht("invalid",i);var R=v=T=g=null,P=null,j=null;for(d in l)if(l.hasOwnProperty(d)){var Q=l[d];if(Q!=null)switch(d){case"name":g=Q;break;case"type":T=Q;break;case"checked":P=Q;break;case"defaultChecked":j=Q;break;case"value":v=Q;break;case"defaultValue":R=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(137,a));break;default:ce(i,a,d,Q,l,null)}}lw(i,v,R,P,j,T,g,!1);return;case"select":Ht("invalid",i),d=T=v=null;for(g in l)if(l.hasOwnProperty(g)&&(R=l[g],R!=null))switch(g){case"value":v=R;break;case"defaultValue":T=R;break;case"multiple":d=R;default:ce(i,a,g,R,l,null)}a=v,l=T,i.multiple=!!d,a!=null?Fu(i,!!d,a,!1):l!=null&&Fu(i,!!d,l,!0);return;case"textarea":Ht("invalid",i),v=g=d=null;for(T in l)if(l.hasOwnProperty(T)&&(R=l[T],R!=null))switch(T){case"value":d=R;break;case"defaultValue":g=R;break;case"children":v=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(n(91));break;default:ce(i,a,T,R,l,null)}uw(i,d,g,v);return;case"option":for(P in l)if(l.hasOwnProperty(P)&&(d=l[P],d!=null))switch(P){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:ce(i,a,P,d,l,null)}return;case"dialog":Ht("beforetoggle",i),Ht("toggle",i),Ht("cancel",i),Ht("close",i);break;case"iframe":case"object":Ht("load",i);break;case"video":case"audio":for(d=0;d<op.length;d++)Ht(op[d],i);break;case"image":Ht("error",i),Ht("load",i);break;case"details":Ht("toggle",i);break;case"embed":case"source":case"link":Ht("error",i),Ht("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in l)if(l.hasOwnProperty(j)&&(d=l[j],d!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:ce(i,a,j,d,l,null)}return;default:if(tA(a)){for(Q in l)l.hasOwnProperty(Q)&&(d=l[Q],d!==void 0&&HE(i,a,Q,d,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(d=l[R],d!=null&&ce(i,a,R,d,l,null))}function Ik(i,a,l,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,T=null,R=null,P=null,j=null,Q=null;for(K in l){var J=l[K];if(l.hasOwnProperty(K)&&J!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":P=J;default:d.hasOwnProperty(K)||ce(i,a,K,null,d,J)}}for(var G in d){var K=d[G];if(J=l[G],d.hasOwnProperty(G)&&(K!=null||J!=null))switch(G){case"type":v=K;break;case"name":g=K;break;case"checked":j=K;break;case"defaultChecked":Q=K;break;case"value":T=K;break;case"defaultValue":R=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(n(137,a));break;default:K!==J&&ce(i,a,G,K,d,J)}}Zv(i,T,R,P,j,Q,v,g);return;case"select":K=T=R=G=null;for(v in l)if(P=l[v],l.hasOwnProperty(v)&&P!=null)switch(v){case"value":break;case"multiple":K=P;default:d.hasOwnProperty(v)||ce(i,a,v,null,d,P)}for(g in d)if(v=d[g],P=l[g],d.hasOwnProperty(g)&&(v!=null||P!=null))switch(g){case"value":G=v;break;case"defaultValue":R=v;break;case"multiple":T=v;default:v!==P&&ce(i,a,g,v,d,P)}a=R,l=T,d=K,G!=null?Fu(i,!!l,G,!1):!!d!=!!l&&(a!=null?Fu(i,!!l,a,!0):Fu(i,!!l,l?[]:"",!1));return;case"textarea":K=G=null;for(R in l)if(g=l[R],l.hasOwnProperty(R)&&g!=null&&!d.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:ce(i,a,R,null,d,g)}for(T in d)if(g=d[T],v=l[T],d.hasOwnProperty(T)&&(g!=null||v!=null))switch(T){case"value":G=g;break;case"defaultValue":K=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(n(91));break;default:g!==v&&ce(i,a,T,g,d,v)}cw(i,G,K);return;case"option":for(var dt in l)if(G=l[dt],l.hasOwnProperty(dt)&&G!=null&&!d.hasOwnProperty(dt))switch(dt){case"selected":i.selected=!1;break;default:ce(i,a,dt,null,d,G)}for(P in d)if(G=d[P],K=l[P],d.hasOwnProperty(P)&&G!==K&&(G!=null||K!=null))switch(P){case"selected":i.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:ce(i,a,P,G,d,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var wt in l)G=l[wt],l.hasOwnProperty(wt)&&G!=null&&!d.hasOwnProperty(wt)&&ce(i,a,wt,null,d,G);for(j in d)if(G=d[j],K=l[j],d.hasOwnProperty(j)&&G!==K&&(G!=null||K!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(n(137,a));break;default:ce(i,a,j,G,d,K)}return;default:if(tA(a)){for(var ue in l)G=l[ue],l.hasOwnProperty(ue)&&G!==void 0&&!d.hasOwnProperty(ue)&&HE(i,a,ue,void 0,d,G);for(Q in d)G=d[Q],K=l[Q],!d.hasOwnProperty(Q)||G===K||G===void 0&&K===void 0||HE(i,a,Q,G,d,K);return}}for(var H in l)G=l[H],l.hasOwnProperty(H)&&G!=null&&!d.hasOwnProperty(H)&&ce(i,a,H,null,d,G);for(J in d)G=d[J],K=l[J],!d.hasOwnProperty(J)||G===K||G==null&&K==null||ce(i,a,J,G,d,K)}function fD(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Pk(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var g=l[d],v=g.transferSize,T=g.initiatorType,R=g.duration;if(v&&R&&fD(T)){for(T=0,R=g.responseEnd,d+=1;d<l.length;d++){var P=l[d],j=P.startTime;if(j>R)break;var Q=P.transferSize,J=P.initiatorType;Q&&fD(J)&&(P=P.responseEnd,T+=Q*(P<R?1:(R-j)/(P-j)))}if(--d,a+=8*(v+T)/(g.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var VE=null,zE=null;function v0(i){return i.nodeType===9?i:i.ownerDocument}function pD(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mD(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function jE(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var GE=null;function Bk(){var i=window.event;return i&&i.type==="popstate"?i===GE?!1:(GE=i,!0):(GE=null,!1)}var gD=typeof setTimeout=="function"?setTimeout:void 0,kk=typeof clearTimeout=="function"?clearTimeout:void 0,yD=typeof Promise=="function"?Promise:void 0,Uk=typeof queueMicrotask=="function"?queueMicrotask:typeof yD<"u"?function(i){return yD.resolve(null).then(i).catch(Fk)}:gD;function Fk(i){setTimeout(function(){throw i})}function Ro(i){return i==="head"}function bD(i,a){var l=a,d=0;do{var g=l.nextSibling;if(i.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"||l==="/&"){if(d===0){i.removeChild(g),yh(a);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")cp(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,cp(l);for(var v=l.firstChild;v;){var T=v.nextSibling,R=v.nodeName;v[Cf]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&v.rel.toLowerCase()==="stylesheet"||l.removeChild(v),v=T}}else l==="body"&&cp(i.ownerDocument.body);l=g}while(l);yh(a)}function vD(i,a){var l=i;i=0;do{var d=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=d}while(l)}function YE(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":YE(l),Wv(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function Hk(i,a,l,d){for(;i.nodeType===1;){var g=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[Cf])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=Es(i.nextSibling),i===null)break}return null}function Vk(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Es(i.nextSibling),i===null))return null;return i}function AD(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Es(i.nextSibling),i===null))return null;return i}function XE(i){return i.data==="$?"||i.data==="$~"}function qE(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function zk(i,a){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||l.readyState!=="loading")a();else{var d=function(){a(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function Es(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var KE=null;function ED(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(a===0)return Es(i.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}i=i.nextSibling}return null}function SD(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return i;a--}else l!=="/$"&&l!=="/&"||a++}i=i.previousSibling}return null}function TD(i,a,l){switch(a=v0(l),i){case"html":if(i=a.documentElement,!i)throw Error(n(452));return i;case"head":if(i=a.head,!i)throw Error(n(453));return i;case"body":if(i=a.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function cp(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Wv(i)}var Ss=new Map,_D=new Set;function A0(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var fr=Y.d;Y.d={f:jk,r:Gk,D:Yk,C:Xk,L:qk,m:Kk,X:Wk,S:$k,M:Qk};function jk(){var i=fr.f(),a=h0();return i||a}function Gk(i){var a=Bu(i);a!==null&&a.tag===5&&a.type==="form"?Vx(a):fr.r(i)}var ph=typeof document>"u"?null:document;function wD(i,a,l){var d=ph;if(d&&typeof a=="string"&&a){var g=ps(a);g='link[rel="'+i+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),_D.has(g)||(_D.add(g),i={rel:i,crossOrigin:l,href:a},d.querySelector(g)===null&&(a=d.createElement("link"),Rn(a,"link",i),yn(a),d.head.appendChild(a)))}}function Yk(i){fr.D(i),wD("dns-prefetch",i,null)}function Xk(i,a){fr.C(i,a),wD("preconnect",i,a)}function qk(i,a,l){fr.L(i,a,l);var d=ph;if(d&&i&&a){var g='link[rel="preload"][as="'+ps(a)+'"]';a==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+ps(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+ps(l.imageSizes)+'"]')):g+='[href="'+ps(i)+'"]';var v=g;switch(a){case"style":v=mh(i);break;case"script":v=gh(i)}Ss.has(v)||(i=y({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),Ss.set(v,i),d.querySelector(g)!==null||a==="style"&&d.querySelector(up(v))||a==="script"&&d.querySelector(hp(v))||(a=d.createElement("link"),Rn(a,"link",i),yn(a),d.head.appendChild(a)))}}function Kk(i,a){fr.m(i,a);var l=ph;if(l&&i){var d=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+ps(d)+'"][href="'+ps(i)+'"]',v=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=gh(i)}if(!Ss.has(v)&&(i=y({rel:"modulepreload",href:i},a),Ss.set(v,i),l.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(hp(v)))return}d=l.createElement("link"),Rn(d,"link",i),yn(d),l.head.appendChild(d)}}}function $k(i,a,l){fr.S(i,a,l);var d=ph;if(d&&i){var g=ku(d).hoistableStyles,v=mh(i);a=a||"default";var T=g.get(v);if(!T){var R={loading:0,preload:null};if(T=d.querySelector(up(v)))R.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":a},l),(l=Ss.get(v))&&$E(i,l);var P=T=d.createElement("link");yn(P),Rn(P,"link",i),P._p=new Promise(function(j,Q){P.onload=j,P.onerror=Q}),P.addEventListener("load",function(){R.loading|=1}),P.addEventListener("error",function(){R.loading|=2}),R.loading|=4,E0(T,a,d)}T={type:"stylesheet",instance:T,count:1,state:R},g.set(v,T)}}}function Wk(i,a){fr.X(i,a);var l=ph;if(l&&i){var d=ku(l).hoistableScripts,g=gh(i),v=d.get(g);v||(v=l.querySelector(hp(g)),v||(i=y({src:i,async:!0},a),(a=Ss.get(g))&&WE(i,a),v=l.createElement("script"),yn(v),Rn(v,"link",i),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(g,v))}}function Qk(i,a){fr.M(i,a);var l=ph;if(l&&i){var d=ku(l).hoistableScripts,g=gh(i),v=d.get(g);v||(v=l.querySelector(hp(g)),v||(i=y({src:i,async:!0,type:"module"},a),(a=Ss.get(g))&&WE(i,a),v=l.createElement("script"),yn(v),Rn(v,"link",i),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(g,v))}}function xD(i,a,l,d){var g=(g=vt.current)?A0(g):null;if(!g)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=mh(l.href),l=ku(g).hoistableStyles,d=l.get(a),d||(d={type:"style",instance:null,count:0,state:null},l.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=mh(l.href);var v=ku(g).hoistableStyles,T=v.get(i);if(T||(g=g.ownerDocument||g,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,T),(v=g.querySelector(up(i)))&&!v._p&&(T.instance=v,T.state.loading=5),Ss.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ss.set(i,l),v||Zk(g,i,l,T.state))),a&&d===null)throw Error(n(528,""));return T}if(a&&d!==null)throw Error(n(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=gh(l),l=ku(g).hoistableScripts,d=l.get(a),d||(d={type:"script",instance:null,count:0,state:null},l.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function mh(i){return'href="'+ps(i)+'"'}function up(i){return'link[rel="stylesheet"]['+i+"]"}function CD(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function Zk(i,a,l,d){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=i.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),Rn(a,"link",l),yn(a),i.head.appendChild(a))}function gh(i){return'[src="'+ps(i)+'"]'}function hp(i){return"script[async]"+i}function DD(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var d=i.querySelector('style[data-href~="'+ps(l.href)+'"]');if(d)return a.instance=d,yn(d),d;var g=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),yn(d),Rn(d,"style",g),E0(d,l.precedence,i),a.instance=d;case"stylesheet":g=mh(l.href);var v=i.querySelector(up(g));if(v)return a.state.loading|=4,a.instance=v,yn(v),v;d=CD(l),(g=Ss.get(g))&&$E(d,g),v=(i.ownerDocument||i).createElement("link"),yn(v);var T=v;return T._p=new Promise(function(R,P){T.onload=R,T.onerror=P}),Rn(v,"link",d),a.state.loading|=4,E0(v,l.precedence,i),a.instance=v;case"script":return v=gh(l.src),(g=i.querySelector(hp(v)))?(a.instance=g,yn(g),g):(d=l,(g=Ss.get(v))&&(d=y({},l),WE(d,g)),i=i.ownerDocument||i,g=i.createElement("script"),yn(g),Rn(g,"link",d),i.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(n(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,E0(d,l.precedence,i));return a.instance}function E0(i,a,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,v=g,T=0;T<d.length;T++){var R=d[T];if(R.dataset.precedence===a)v=R;else if(v!==g)break}v?v.parentNode.insertBefore(i,v.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function $E(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function WE(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var S0=null;function MD(i,a,l){if(S0===null){var d=new Map,g=S0=new Map;g.set(l,d)}else g=S0,d=g.get(l),d||(d=new Map,g.set(l,d));if(d.has(i))return d;for(d.set(i,null),l=l.getElementsByTagName(i),g=0;g<l.length;g++){var v=l[g];if(!(v[Cf]||v[xn]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var T=v.getAttribute(a)||"";T=i+T;var R=d.get(T);R?R.push(v):d.set(T,[v])}}return d}function RD(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function Jk(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function OD(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function tU(i,a,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var g=mh(d.href),v=a.querySelector(up(g));if(v){a=v._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=T0.bind(i),a.then(i,i)),l.state.loading|=4,l.instance=v,yn(v);return}v=a.ownerDocument||a,d=CD(d),(g=Ss.get(g))&&$E(d,g),v=v.createElement("link"),yn(v);var T=v;T._p=new Promise(function(R,P){T.onload=R,T.onerror=P}),Rn(v,"link",d),l.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=T0.bind(i),a.addEventListener("load",l),a.addEventListener("error",l))}}var QE=0;function eU(i,a){return i.stylesheets&&i.count===0&&w0(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var d=setTimeout(function(){if(i.stylesheets&&w0(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+a);0<i.imgBytes&&QE===0&&(QE=62500*Pk());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&w0(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>QE?50:800)+a);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(g)}}:null}function T0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)w0(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var _0=null;function w0(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,_0=new Map,a.forEach(nU,i),_0=null,T0.call(i))}function nU(i,a){if(!(a.state.loading&4)){var l=_0.get(i);if(l)var d=l.get(null);else{l=new Map,_0.set(i,l);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var T=g[v];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),d=T)}d&&l.set(null,d)}g=a.instance,T=g.getAttribute("data-precedence"),v=l.get(T)||d,v===d&&l.set(null,g),l.set(T,g),this.count++,d=T0.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),v?v.parentNode.insertBefore(g,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),a.state.loading|=4}}var dp={$$typeof:M,Provider:null,Consumer:null,_currentValue:tt,_currentValue2:tt,_threadCount:0};function iU(i,a,l,d,g,v,T,R,P){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xv(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xv(0),this.hiddenUpdates=Xv(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function ND(i,a,l,d,g,v,T,R,P,j,Q,J){return i=new iU(i,a,l,T,P,j,Q,J,R),a=1,v===!0&&(a|=24),v=Bi(3,null,null,a),i.current=v,v.stateNode=i,a=RA(),a.refCount++,i.pooledCache=a,a.refCount++,v.memoizedState={element:d,isDehydrated:l,cache:a},IA(v),i}function LD(i){return i?(i=qu,i):qu}function ID(i,a,l,d,g,v){g=LD(g),d.context===null?d.context=g:d.pendingContext=g,d=vo(a),d.payload={element:l},v=v===void 0?null:v,v!==null&&(d.callback=v),l=Ao(i,d,a),l!==null&&(vi(l,i,a),Gf(l,i,a))}function PD(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function ZE(i,a){PD(i,a),(i=i.alternate)&&PD(i,a)}function BD(i){if(i.tag===13||i.tag===31){var a=Xl(i,67108864);a!==null&&vi(a,i,67108864),ZE(i,67108864)}}function kD(i){if(i.tag===13||i.tag===31){var a=Vi();a=qv(a);var l=Xl(i,a);l!==null&&vi(l,i,a),ZE(i,a)}}var x0=!0;function sU(i,a,l,d){var g=F.T;F.T=null;var v=Y.p;try{Y.p=2,JE(i,a,l,d)}finally{Y.p=v,F.T=g}}function aU(i,a,l,d){var g=F.T;F.T=null;var v=Y.p;try{Y.p=8,JE(i,a,l,d)}finally{Y.p=v,F.T=g}}function JE(i,a,l,d){if(x0){var g=tS(d);if(g===null)FE(i,a,d,C0,l),FD(i,d);else if(oU(g,i,a,l,d))d.stopPropagation();else if(FD(i,d),a&4&&-1<rU.indexOf(i)){for(;g!==null;){var v=Bu(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var T=Vl(v.pendingLanes);if(T!==0){var R=v;for(R.pendingLanes|=2,R.entangledLanes|=2;T;){var P=1<<31-Ii(T);R.entanglements[1]|=P,T&=~P}ya(v),(Zt&6)===0&&(c0=Ni()+500,rp(0))}}break;case 31:case 13:R=Xl(v,2),R!==null&&vi(R,v,2),h0(),ZE(v,2)}if(v=tS(d),v===null&&FE(i,a,d,C0,l),v===g)break;g=v}g!==null&&d.stopPropagation()}else FE(i,a,d,null,l)}}function tS(i){return i=nA(i),eS(i)}var C0=null;function eS(i){if(C0=null,i=Pu(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=u(a),i!==null)return i;i=null}else if(l===31){if(i=h(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return C0=i,null}function UD(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(YP()){case X1:return 2;case q1:return 8;case gy:case XP:return 32;case K1:return 268435456;default:return 32}default:return 32}}var nS=!1,Oo=null,No=null,Lo=null,fp=new Map,pp=new Map,Io=[],rU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function FD(i,a){switch(i){case"focusin":case"focusout":Oo=null;break;case"dragenter":case"dragleave":No=null;break;case"mouseover":case"mouseout":Lo=null;break;case"pointerover":case"pointerout":fp.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":pp.delete(a.pointerId)}}function mp(i,a,l,d,g,v){return i===null||i.nativeEvent!==v?(i={blockedOn:a,domEventName:l,eventSystemFlags:d,nativeEvent:v,targetContainers:[g]},a!==null&&(a=Bu(a),a!==null&&BD(a)),i):(i.eventSystemFlags|=d,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function oU(i,a,l,d,g){switch(a){case"focusin":return Oo=mp(Oo,i,a,l,d,g),!0;case"dragenter":return No=mp(No,i,a,l,d,g),!0;case"mouseover":return Lo=mp(Lo,i,a,l,d,g),!0;case"pointerover":var v=g.pointerId;return fp.set(v,mp(fp.get(v)||null,i,a,l,d,g)),!0;case"gotpointercapture":return v=g.pointerId,pp.set(v,mp(pp.get(v)||null,i,a,l,d,g)),!0}return!1}function HD(i){var a=Pu(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){i.blockedOn=a,tw(i.priority,function(){kD(l)});return}}else if(a===31){if(a=h(l),a!==null){i.blockedOn=a,tw(i.priority,function(){kD(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function D0(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=tS(i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);eA=d,l.target.dispatchEvent(d),eA=null}else return a=Bu(l),a!==null&&BD(a),i.blockedOn=l,!1;a.shift()}return!0}function VD(i,a,l){D0(i)&&l.delete(a)}function lU(){nS=!1,Oo!==null&&D0(Oo)&&(Oo=null),No!==null&&D0(No)&&(No=null),Lo!==null&&D0(Lo)&&(Lo=null),fp.forEach(VD),pp.forEach(VD)}function M0(i,a){i.blockedOn===a&&(i.blockedOn=null,nS||(nS=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,lU)))}var R0=null;function zD(i){R0!==i&&(R0=i,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){R0===i&&(R0=null);for(var a=0;a<i.length;a+=3){var l=i[a],d=i[a+1],g=i[a+2];if(typeof d!="function"){if(eS(d||l)===null)continue;break}var v=Bu(l);v!==null&&(i.splice(a,3),a-=3,tE(v,{pending:!0,data:g,method:l.method,action:d},d,g))}}))}function yh(i){function a(P){return M0(P,i)}Oo!==null&&M0(Oo,i),No!==null&&M0(No,i),Lo!==null&&M0(Lo,i),fp.forEach(a),pp.forEach(a);for(var l=0;l<Io.length;l++){var d=Io[l];d.blockedOn===i&&(d.blockedOn=null)}for(;0<Io.length&&(l=Io[0],l.blockedOn===null);)HD(l),l.blockedOn===null&&Io.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var g=l[d],v=l[d+1],T=g[fi]||null;if(typeof v=="function")T||zD(l);else if(T){var R=null;if(v&&v.hasAttribute("formAction")){if(g=v,T=v[fi]||null)R=T.formAction;else if(eS(g)!==null)continue}else R=T.action;typeof R=="function"?l[d+1]=R:(l.splice(d,3),d-=3),zD(l)}}}function jD(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(T){return g=T})},focusReset:"manual",scroll:"manual"})}function a(){g!==null&&(g(),g=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),g!==null&&(g(),g=null)}}}function iS(i){this._internalRoot=i}O0.prototype.render=iS.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(n(409));var l=a.current,d=Vi();ID(l,d,i,a,null,null)},O0.prototype.unmount=iS.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;ID(i.current,2,null,i,null,null),h0(),a[Iu]=null}};function O0(i){this._internalRoot=i}O0.prototype.unstable_scheduleHydration=function(i){if(i){var a=J1();i={blockedOn:null,target:i,priority:a};for(var l=0;l<Io.length&&a!==0&&a<Io[l].priority;l++);Io.splice(l,0,i),l===0&&HD(i)}};var GD=t.version;if(GD!=="19.2.4")throw Error(n(527,GD,"19.2.4"));Y.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=p(a),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var cU={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var N0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!N0.isDisabled&&N0.supportsFiber)try{_f=N0.inject(cU),Li=N0}catch{}}return yp.createRoot=function(i,a){if(!r(i))throw Error(n(299));var l=!1,d="",g=Qx,v=Zx,T=Jx;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError)),a=ND(i,1,!1,null,null,l,d,null,g,v,T,jD),i[Iu]=a.current,UE(i),new iS(a)},yp.hydrateRoot=function(i,a,l){if(!r(i))throw Error(n(299));var d=!1,g="",v=Qx,T=Zx,R=Jx,P=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(P=l.formState)),a=ND(i,1,!0,a,l??null,d,g,P,v,T,R,jD),a.context=LD(null),l=a.current,d=Vi(),d=qv(d),g=vo(d),g.callback=null,Ao(l,g,d),l=d,a.current.lanes=l,xf(a,l),ya(a),i[Iu]=a.current,UE(i),new O0(a)},yp.version="19.2.4",yp}var eM;function EU(){if(eM)return oS.exports;eM=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),oS.exports=AU(),oS.exports}var SU=EU();const W_=st.createContext({});function Q_(s){const t=st.useRef(null);return t.current===null&&(t.current=s()),t.current}const fN=typeof window<"u",pN=fN?st.useLayoutEffect:st.useEffect,xv=st.createContext(null);function Z_(s,t){s.indexOf(t)===-1&&s.push(t)}function Ub(s,t){const e=s.indexOf(t);e>-1&&s.splice(e,1)}const Xa=(s,t,e)=>e>t?t:e<s?s:e;let J_=()=>{};const ro={},mN=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function gN(s){return typeof s=="object"&&s!==null}const yN=s=>/^0[^.\s]+$/u.test(s);function bN(s){let t;return()=>(t===void 0&&(t=s()),t)}const Vs=s=>s,TU=(s,t)=>e=>t(s(e)),ay=(...s)=>s.reduce(TU),tm=(s,t,e)=>{const n=t-s;return n===0?1:(e-s)/n};class t1{constructor(){this.subscriptions=[]}add(t){return Z_(this.subscriptions,t),()=>Ub(this.subscriptions,t)}notify(t,e,n){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,e,n);else for(let o=0;o<r;o++){const u=this.subscriptions[o];u&&u(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ha=s=>s*1e3,Hs=s=>s/1e3;function vN(s,t){return t?s*(1e3/t):0}const AN=(s,t,e)=>(((1-3*e+3*t)*s+(3*e-6*t))*s+3*t)*s,_U=1e-7,wU=12;function xU(s,t,e,n,r){let o,u,h=0;do u=t+(e-t)/2,o=AN(u,n,r)-s,o>0?e=u:t=u;while(Math.abs(o)>_U&&++h<wU);return u}function ry(s,t,e,n){if(s===t&&e===n)return Vs;const r=o=>xU(o,0,1,s,e);return o=>o===0||o===1?o:AN(r(o),t,n)}const EN=s=>t=>t<=.5?s(2*t)/2:(2-s(2*(1-t)))/2,SN=s=>t=>1-s(1-t),TN=ry(.33,1.53,.69,.99),e1=SN(TN),_N=EN(e1),wN=s=>(s*=2)<1?.5*e1(s):.5*(2-Math.pow(2,-10*(s-1))),n1=s=>1-Math.sin(Math.acos(s)),xN=SN(n1),CN=EN(n1),CU=ry(.42,0,1,1),DU=ry(0,0,.58,1),DN=ry(.42,0,.58,1),MU=s=>Array.isArray(s)&&typeof s[0]!="number",MN=s=>Array.isArray(s)&&typeof s[0]=="number",RU={linear:Vs,easeIn:CU,easeInOut:DN,easeOut:DU,circIn:n1,circInOut:CN,circOut:xN,backIn:e1,backInOut:_N,backOut:TN,anticipate:wN},OU=s=>typeof s=="string",nM=s=>{if(MN(s)){J_(s.length===4);const[t,e,n,r]=s;return ry(t,e,n,r)}else if(OU(s))return RU[s];return s},L0=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function NU(s,t){let e=new Set,n=new Set,r=!1,o=!1;const u=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function f(m){u.has(m)&&(p.schedule(m),s()),m(h)}const p={schedule:(m,y=!1,b=!1)=>{const S=b&&r?e:n;return y&&u.add(m),S.has(m)||S.add(m),m},cancel:m=>{n.delete(m),u.delete(m)},process:m=>{if(h=m,r){o=!0;return}r=!0,[e,n]=[n,e],e.forEach(f),e.clear(),r=!1,o&&(o=!1,p.process(m))}};return p}const LU=40;function RN(s,t){let e=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>e=!0,u=L0.reduce((M,N)=>(M[N]=NU(o),M),{}),{setup:h,read:f,resolveKeyframes:p,preUpdate:m,update:y,preRender:b,render:A,postRender:S}=u,w=()=>{const M=ro.useManualTiming?r.timestamp:performance.now();e=!1,ro.useManualTiming||(r.delta=n?1e3/60:Math.max(Math.min(M-r.timestamp,LU),1)),r.timestamp=M,r.isProcessing=!0,h.process(r),f.process(r),p.process(r),m.process(r),y.process(r),b.process(r),A.process(r),S.process(r),r.isProcessing=!1,e&&t&&(n=!1,s(w))},x=()=>{e=!0,n=!0,r.isProcessing||s(w)};return{schedule:L0.reduce((M,N)=>{const L=u[N];return M[N]=(I,k=!1,z=!1)=>(e||x(),L.schedule(I,k,z)),M},{}),cancel:M=>{for(let N=0;N<L0.length;N++)u[L0[N]].cancel(M)},state:r,steps:u}}const{schedule:we,cancel:Bl,state:kn,steps:hS}=RN(typeof requestAnimationFrame<"u"?requestAnimationFrame:Vs,!0);let Q0;function IU(){Q0=void 0}const ri={now:()=>(Q0===void 0&&ri.set(kn.isProcessing||ro.useManualTiming?kn.timestamp:performance.now()),Q0),set:s=>{Q0=s,queueMicrotask(IU)}},ON=s=>t=>typeof t=="string"&&t.startsWith(s),NN=ON("--"),PU=ON("var(--"),i1=s=>PU(s)?BU.test(s.split("/*")[0].trim()):!1,BU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function iM(s){return typeof s!="string"?!1:s.split("/*")[0].includes("var(--")}const Af={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},em={...Af,transform:s=>Xa(0,1,s)},I0={...Af,default:1},$p=s=>Math.round(s*1e5)/1e5,s1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function kU(s){return s==null}const UU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,a1=(s,t)=>e=>!!(typeof e=="string"&&UU.test(e)&&e.startsWith(s)||t&&!kU(e)&&Object.prototype.hasOwnProperty.call(e,t)),LN=(s,t,e)=>n=>{if(typeof n!="string")return n;const[r,o,u,h]=n.match(s1);return{[s]:parseFloat(r),[t]:parseFloat(o),[e]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},FU=s=>Xa(0,255,s),dS={...Af,transform:s=>Math.round(FU(s))},pc={test:a1("rgb","red"),parse:LN("red","green","blue"),transform:({red:s,green:t,blue:e,alpha:n=1})=>"rgba("+dS.transform(s)+", "+dS.transform(t)+", "+dS.transform(e)+", "+$p(em.transform(n))+")"};function HU(s){let t="",e="",n="",r="";return s.length>5?(t=s.substring(1,3),e=s.substring(3,5),n=s.substring(5,7),r=s.substring(7,9)):(t=s.substring(1,2),e=s.substring(2,3),n=s.substring(3,4),r=s.substring(4,5),t+=t,e+=e,n+=n,r+=r),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}}const GS={test:a1("#"),parse:HU,transform:pc.transform},oy=s=>({test:t=>typeof t=="string"&&t.endsWith(s)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${s}`}),ko=oy("deg"),Ya=oy("%"),ft=oy("px"),VU=oy("vh"),zU=oy("vw"),sM={...Ya,parse:s=>Ya.parse(s)/100,transform:s=>Ya.transform(s*100)},Mh={test:a1("hsl","hue"),parse:LN("hue","saturation","lightness"),transform:({hue:s,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(s)+", "+Ya.transform($p(t))+", "+Ya.transform($p(e))+", "+$p(em.transform(n))+")"},on={test:s=>pc.test(s)||GS.test(s)||Mh.test(s),parse:s=>pc.test(s)?pc.parse(s):Mh.test(s)?Mh.parse(s):GS.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?pc.transform(s):Mh.transform(s),getAnimatableNone:s=>{const t=on.parse(s);return t.alpha=0,on.transform(t)}},jU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function GU(s){var t,e;return isNaN(s)&&typeof s=="string"&&(((t=s.match(s1))==null?void 0:t.length)||0)+(((e=s.match(jU))==null?void 0:e.length)||0)>0}const IN="number",PN="color",YU="var",XU="var(",aM="${}",qU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function nm(s){const t=s.toString(),e=[],n={color:[],number:[],var:[]},r=[];let o=0;const h=t.replace(qU,f=>(on.test(f)?(n.color.push(o),r.push(PN),e.push(on.parse(f))):f.startsWith(XU)?(n.var.push(o),r.push(YU),e.push(f)):(n.number.push(o),r.push(IN),e.push(parseFloat(f))),++o,aM)).split(aM);return{values:e,split:h,indexes:n,types:r}}function BN(s){return nm(s).values}function kN(s){const{split:t,types:e}=nm(s),n=t.length;return r=>{let o="";for(let u=0;u<n;u++)if(o+=t[u],r[u]!==void 0){const h=e[u];h===IN?o+=$p(r[u]):h===PN?o+=on.transform(r[u]):o+=r[u]}return o}}const KU=s=>typeof s=="number"?0:on.test(s)?on.getAnimatableNone(s):s;function $U(s){const t=BN(s);return kN(s)(t.map(KU))}const da={test:GU,parse:BN,createTransformer:kN,getAnimatableNone:$U};function fS(s,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?s+(t-s)*6*e:e<1/2?t:e<2/3?s+(t-s)*(2/3-e)*6:s}function WU({hue:s,saturation:t,lightness:e,alpha:n}){s/=360,t/=100,e/=100;let r=0,o=0,u=0;if(!t)r=o=u=e;else{const h=e<.5?e*(1+t):e+t-e*t,f=2*e-h;r=fS(f,h,s+1/3),o=fS(f,h,s),u=fS(f,h,s-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(u*255),alpha:n}}function Fb(s,t){return e=>e>0?t:s}const ke=(s,t,e)=>s+(t-s)*e,pS=(s,t,e)=>{const n=s*s,r=e*(t*t-n)+n;return r<0?0:Math.sqrt(r)},QU=[GS,pc,Mh],ZU=s=>QU.find(t=>t.test(s));function rM(s){const t=ZU(s);if(!t)return!1;let e=t.parse(s);return t===Mh&&(e=WU(e)),e}const oM=(s,t)=>{const e=rM(s),n=rM(t);if(!e||!n)return Fb(s,t);const r={...e};return o=>(r.red=pS(e.red,n.red,o),r.green=pS(e.green,n.green,o),r.blue=pS(e.blue,n.blue,o),r.alpha=ke(e.alpha,n.alpha,o),pc.transform(r))},YS=new Set(["none","hidden"]);function JU(s,t){return YS.has(s)?e=>e<=0?s:t:e=>e>=1?t:s}function tF(s,t){return e=>ke(s,t,e)}function r1(s){return typeof s=="number"?tF:typeof s=="string"?i1(s)?Fb:on.test(s)?oM:iF:Array.isArray(s)?UN:typeof s=="object"?on.test(s)?oM:eF:Fb}function UN(s,t){const e=[...s],n=e.length,r=s.map((o,u)=>r1(o)(o,t[u]));return o=>{for(let u=0;u<n;u++)e[u]=r[u](o);return e}}function eF(s,t){const e={...s,...t},n={};for(const r in e)s[r]!==void 0&&t[r]!==void 0&&(n[r]=r1(s[r])(s[r],t[r]));return r=>{for(const o in n)e[o]=n[o](r);return e}}function nF(s,t){const e=[],n={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const o=t.types[r],u=s.indexes[o][n[o]],h=s.values[u]??0;e[r]=h,n[o]++}return e}const iF=(s,t)=>{const e=da.createTransformer(t),n=nm(s),r=nm(t);return n.indexes.var.length===r.indexes.var.length&&n.indexes.color.length===r.indexes.color.length&&n.indexes.number.length>=r.indexes.number.length?YS.has(s)&&!r.values.length||YS.has(t)&&!n.values.length?JU(s,t):ay(UN(nF(n,r),r.values),e):Fb(s,t)};function FN(s,t,e){return typeof s=="number"&&typeof t=="number"&&typeof e=="number"?ke(s,t,e):r1(s)(s,t)}const sF=s=>{const t=({timestamp:e})=>s(e);return{start:(e=!0)=>we.update(t,e),stop:()=>Bl(t),now:()=>kn.isProcessing?kn.timestamp:ri.now()}},HN=(s,t,e=10)=>{let n="";const r=Math.max(Math.round(t/e),2);for(let o=0;o<r;o++)n+=Math.round(s(o/(r-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Hb=2e4;function o1(s){let t=0;const e=50;let n=s.next(t);for(;!n.done&&t<Hb;)t+=e,n=s.next(t);return t>=Hb?1/0:t}function aF(s,t=100,e){const n=e({...s,keyframes:[0,t]}),r=Math.min(o1(n),Hb);return{type:"keyframes",ease:o=>n.next(r*o).value/t,duration:Hs(r)}}const rF=5;function VN(s,t,e){const n=Math.max(t-rF,0);return vN(e-s(n),t-n)}const Ye={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},mS=.001;function oF({duration:s=Ye.duration,bounce:t=Ye.bounce,velocity:e=Ye.velocity,mass:n=Ye.mass}){let r,o,u=1-t;u=Xa(Ye.minDamping,Ye.maxDamping,u),s=Xa(Ye.minDuration,Ye.maxDuration,Hs(s)),u<1?(r=p=>{const m=p*u,y=m*s,b=m-e,A=XS(p,u),S=Math.exp(-y);return mS-b/A*S},o=p=>{const y=p*u*s,b=y*e+e,A=Math.pow(u,2)*Math.pow(p,2)*s,S=Math.exp(-y),w=XS(Math.pow(p,2),u);return(-r(p)+mS>0?-1:1)*((b-A)*S)/w}):(r=p=>{const m=Math.exp(-p*s),y=(p-e)*s+1;return-mS+m*y},o=p=>{const m=Math.exp(-p*s),y=(e-p)*(s*s);return m*y});const h=5/s,f=cF(r,o,h);if(s=ha(s),isNaN(f))return{stiffness:Ye.stiffness,damping:Ye.damping,duration:s};{const p=Math.pow(f,2)*n;return{stiffness:p,damping:u*2*Math.sqrt(n*p),duration:s}}}const lF=12;function cF(s,t,e){let n=e;for(let r=1;r<lF;r++)n=n-s(n)/t(n);return n}function XS(s,t){return s*Math.sqrt(1-t*t)}const uF=["duration","bounce"],hF=["stiffness","damping","mass"];function lM(s,t){return t.some(e=>s[e]!==void 0)}function dF(s){let t={velocity:Ye.velocity,stiffness:Ye.stiffness,damping:Ye.damping,mass:Ye.mass,isResolvedFromDuration:!1,...s};if(!lM(s,hF)&&lM(s,uF))if(t.velocity=0,s.visualDuration){const e=s.visualDuration,n=2*Math.PI/(e*1.2),r=n*n,o=2*Xa(.05,1,1-(s.bounce||0))*Math.sqrt(r);t={...t,mass:Ye.mass,stiffness:r,damping:o}}else{const e=oF({...s,velocity:0});t={...t,...e,mass:Ye.mass},t.isResolvedFromDuration=!0}return t}function Vb(s=Ye.visualDuration,t=Ye.bounce){const e=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:t}:s;let{restSpeed:n,restDelta:r}=e;const o=e.keyframes[0],u=e.keyframes[e.keyframes.length-1],h={done:!1,value:o},{stiffness:f,damping:p,mass:m,duration:y,velocity:b,isResolvedFromDuration:A}=dF({...e,velocity:-Hs(e.velocity||0)}),S=b||0,w=p/(2*Math.sqrt(f*m)),x=u-o,D=Hs(Math.sqrt(f/m)),O=Math.abs(x)<5;n||(n=O?Ye.restSpeed.granular:Ye.restSpeed.default),r||(r=O?Ye.restDelta.granular:Ye.restDelta.default);let M;if(w<1){const L=XS(D,w);M=I=>{const k=Math.exp(-w*D*I);return u-k*((S+w*D*x)/L*Math.sin(L*I)+x*Math.cos(L*I))}}else if(w===1)M=L=>u-Math.exp(-D*L)*(x+(S+D*x)*L);else{const L=D*Math.sqrt(w*w-1);M=I=>{const k=Math.exp(-w*D*I),z=Math.min(L*I,300);return u-k*((S+w*D*x)*Math.sinh(z)+L*x*Math.cosh(z))/L}}const N={calculatedDuration:A&&y||null,next:L=>{const I=M(L);if(A)h.done=L>=y;else{let k=L===0?S:0;w<1&&(k=L===0?ha(S):VN(M,L,I));const z=Math.abs(k)<=n,W=Math.abs(u-I)<=r;h.done=z&&W}return h.value=h.done?u:I,h},toString:()=>{const L=Math.min(o1(N),Hb),I=HN(k=>N.next(L*k).value,L,30);return L+"ms "+I},toTransition:()=>{}};return N}Vb.applyToOptions=s=>{const t=aF(s,100,Vb);return s.ease=t.ease,s.duration=ha(t.duration),s.type="keyframes",s};function qS({keyframes:s,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:u,min:h,max:f,restDelta:p=.5,restSpeed:m}){const y=s[0],b={done:!1,value:y},A=z=>h!==void 0&&z<h||f!==void 0&&z>f,S=z=>h===void 0?f:f===void 0||Math.abs(h-z)<Math.abs(f-z)?h:f;let w=e*t;const x=y+w,D=u===void 0?x:u(x);D!==x&&(w=D-y);const O=z=>-w*Math.exp(-z/n),M=z=>D+O(z),N=z=>{const W=O(z),it=M(z);b.done=Math.abs(W)<=p,b.value=b.done?D:it};let L,I;const k=z=>{A(b.value)&&(L=z,I=Vb({keyframes:[b.value,S(b.value)],velocity:VN(M,z,b.value),damping:r,stiffness:o,restDelta:p,restSpeed:m}))};return k(0),{calculatedDuration:null,next:z=>{let W=!1;return!I&&L===void 0&&(W=!0,N(z),k(z)),L!==void 0&&z>=L?I.next(z-L):(!W&&N(z),b)}}}function fF(s,t,e){const n=[],r=e||ro.mix||FN,o=s.length-1;for(let u=0;u<o;u++){let h=r(s[u],s[u+1]);if(t){const f=Array.isArray(t)?t[u]||Vs:t;h=ay(f,h)}n.push(h)}return n}function pF(s,t,{clamp:e=!0,ease:n,mixer:r}={}){const o=s.length;if(J_(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const u=s[0]===s[1];s[0]>s[o-1]&&(s=[...s].reverse(),t=[...t].reverse());const h=fF(t,n,r),f=h.length,p=m=>{if(u&&m<s[0])return t[0];let y=0;if(f>1)for(;y<s.length-2&&!(m<s[y+1]);y++);const b=tm(s[y],s[y+1],m);return h[y](b)};return e?m=>p(Xa(s[0],s[o-1],m)):p}function mF(s,t){const e=s[s.length-1];for(let n=1;n<=t;n++){const r=tm(0,t,n);s.push(ke(e,1,r))}}function gF(s){const t=[0];return mF(t,s.length-1),t}function yF(s,t){return s.map(e=>e*t)}function bF(s,t){return s.map(()=>t||DN).splice(0,s.length-1)}function Wp({duration:s=300,keyframes:t,times:e,ease:n="easeInOut"}){const r=MU(n)?n.map(nM):nM(n),o={done:!1,value:t[0]},u=yF(e&&e.length===t.length?e:gF(t),s),h=pF(u,t,{ease:Array.isArray(r)?r:bF(t,r)});return{calculatedDuration:s,next:f=>(o.value=h(f),o.done=f>=s,o)}}const vF=s=>s!==null;function l1(s,{repeat:t,repeatType:e="loop"},n,r=1){const o=s.filter(vF),h=r<0||t&&e!=="loop"&&t%2===1?0:o.length-1;return!h||n===void 0?o[h]:n}const AF={decay:qS,inertia:qS,tween:Wp,keyframes:Wp,spring:Vb};function zN(s){typeof s.type=="string"&&(s.type=AF[s.type])}class c1{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const EF=s=>s/100;class u1 extends c1{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,r;const{motionValue:e}=this.options;e&&e.updatedAt!==ri.now()&&this.tick(ri.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(r=(n=this.options).onStop)==null||r.call(n))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;zN(t);const{type:e=Wp,repeat:n=0,repeatDelay:r=0,repeatType:o,velocity:u=0}=t;let{keyframes:h}=t;const f=e||Wp;f!==Wp&&typeof h[0]!="number"&&(this.mixKeyframes=ay(EF,FN(h[0],h[1])),h=[0,100]);const p=f({...t,keyframes:h});o==="mirror"&&(this.mirroredGenerator=f({...t,keyframes:[...h].reverse(),velocity:-u})),p.calculatedDuration===null&&(p.calculatedDuration=o1(p));const{calculatedDuration:m}=p;this.calculatedDuration=m,this.resolvedDuration=m+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=p}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:n,totalDuration:r,mixKeyframes:o,mirroredGenerator:u,resolvedDuration:h,calculatedDuration:f}=this;if(this.startTime===null)return n.next(0);const{delay:p=0,keyframes:m,repeat:y,repeatType:b,repeatDelay:A,type:S,onUpdate:w,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-r/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const D=this.currentTime-p*(this.playbackSpeed>=0?1:-1),O=this.playbackSpeed>=0?D<0:D>r;this.currentTime=Math.max(D,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let M=this.currentTime,N=n;if(y){const z=Math.min(this.currentTime,r)/h;let W=Math.floor(z),it=z%1;!it&&z>=1&&(it=1),it===1&&W--,W=Math.min(W,y+1),!!(W%2)&&(b==="reverse"?(it=1-it,A&&(it-=A/h)):b==="mirror"&&(N=u)),M=Xa(0,1,it)*h}const L=O?{done:!1,value:m[0]}:N.next(M);o&&(L.value=o(L.value));let{done:I}=L;!O&&f!==null&&(I=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return k&&S!==qS&&(L.value=l1(m,this.options,x,this.speed)),w&&w(L.value),k&&this.finish(),L}then(t,e){return this.finished.then(t,e)}get duration(){return Hs(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Hs(t)}get time(){return Hs(this.currentTime)}set time(t){var e;t=ha(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(e=this.driver)==null||e.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(ri.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Hs(this.currentTime))}play(){var r,o;if(this.isStopped)return;const{driver:t=sF,startTime:e}=this.options;this.driver||(this.driver=t(u=>this.tick(u))),(o=(r=this.options).onPlay)==null||o.call(r);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=e??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ri.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,e;this.notifyFinished(),this.teardown(),this.state="finished",(e=(t=this.options).onComplete)==null||e.call(t)}cancel(){var t,e;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(e=(t=this.options).onCancel)==null||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var e;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(e=this.driver)==null||e.stop(),t.observe(this)}}function SF(s){for(let t=1;t<s.length;t++)s[t]??(s[t]=s[t-1])}const mc=s=>s*180/Math.PI,KS=s=>{const t=mc(Math.atan2(s[1],s[0]));return $S(t)},TF={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:KS,rotateZ:KS,skewX:s=>mc(Math.atan(s[1])),skewY:s=>mc(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},$S=s=>(s=s%360,s<0&&(s+=360),s),cM=KS,uM=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),hM=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),_F={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:uM,scaleY:hM,scale:s=>(uM(s)+hM(s))/2,rotateX:s=>$S(mc(Math.atan2(s[6],s[5]))),rotateY:s=>$S(mc(Math.atan2(-s[2],s[0]))),rotateZ:cM,rotate:cM,skewX:s=>mc(Math.atan(s[4])),skewY:s=>mc(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function WS(s){return s.includes("scale")?1:0}function QS(s,t){if(!s||s==="none")return WS(t);const e=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,r;if(e)n=_F,r=e;else{const h=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=TF,r=h}if(!r)return WS(t);const o=n[t],u=r[1].split(",").map(xF);return typeof o=="function"?o(u):u[o]}const wF=(s,t)=>{const{transform:e="none"}=getComputedStyle(s);return QS(e,t)};function xF(s){return parseFloat(s.trim())}const Ef=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Sf=new Set(Ef),dM=s=>s===Af||s===ft,CF=new Set(["x","y","z"]),DF=Ef.filter(s=>!CF.has(s));function MF(s){const t=[];return DF.forEach(e=>{const n=s.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const Pl={width:({x:s},{paddingLeft:t="0",paddingRight:e="0"})=>s.max-s.min-parseFloat(t)-parseFloat(e),height:({y:s},{paddingTop:t="0",paddingBottom:e="0"})=>s.max-s.min-parseFloat(t)-parseFloat(e),top:(s,{top:t})=>parseFloat(t),left:(s,{left:t})=>parseFloat(t),bottom:({y:s},{top:t})=>parseFloat(t)+(s.max-s.min),right:({x:s},{left:t})=>parseFloat(t)+(s.max-s.min),x:(s,{transform:t})=>QS(t,"x"),y:(s,{transform:t})=>QS(t,"y")};Pl.translateX=Pl.x;Pl.translateY=Pl.y;const Du=new Set;let ZS=!1,JS=!1,tT=!1;function jN(){if(JS){const s=Array.from(Du).filter(n=>n.needsMeasurement),t=new Set(s.map(n=>n.element)),e=new Map;t.forEach(n=>{const r=MF(n);r.length&&(e.set(n,r),n.render())}),s.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const r=e.get(n);r&&r.forEach(([o,u])=>{var h;(h=n.getValue(o))==null||h.set(u)})}),s.forEach(n=>n.measureEndState()),s.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}JS=!1,ZS=!1,Du.forEach(s=>s.complete(tT)),Du.clear()}function GN(){Du.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(JS=!0)})}function RF(){tT=!0,GN(),jN(),tT=!1}class h1{constructor(t,e,n,r,o,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=r,this.element=o,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(Du.add(this),ZS||(ZS=!0,we.read(GN),we.resolveKeyframes(jN))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:r}=this;if(t[0]===null){const o=r==null?void 0:r.get(),u=t[t.length-1];if(o!==void 0)t[0]=o;else if(n&&e){const h=n.readValue(e,u);h!=null&&(t[0]=h)}t[0]===void 0&&(t[0]=u),r&&o===void 0&&r.set(t[0])}SF(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Du.delete(this)}cancel(){this.state==="scheduled"&&(Du.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const OF=s=>s.startsWith("--");function NF(s,t,e){OF(t)?s.style.setProperty(t,e):s.style[t]=e}const LF={};function YN(s,t){const e=bN(s);return()=>LF[t]??e()}const IF=YN(()=>window.ScrollTimeline!==void 0,"scrollTimeline"),XN=YN(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),xp=([s,t,e,n])=>`cubic-bezier(${s}, ${t}, ${e}, ${n})`,fM={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:xp([0,.65,.55,1]),circOut:xp([.55,0,1,.45]),backIn:xp([.31,.01,.66,-.59]),backOut:xp([.33,1.53,.69,.99])};function qN(s,t){if(s)return typeof s=="function"?XN()?HN(s,t):"ease-out":MN(s)?xp(s):Array.isArray(s)?s.map(e=>qN(e,t)||fM.easeOut):fM[s]}function PF(s,t,e,{delay:n=0,duration:r=300,repeat:o=0,repeatType:u="loop",ease:h="easeOut",times:f}={},p=void 0){const m={[t]:e};f&&(m.offset=f);const y=qN(h,r);Array.isArray(y)&&(m.easing=y);const b={delay:n,duration:r,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:o+1,direction:u==="reverse"?"alternate":"normal"};return p&&(b.pseudoElement=p),s.animate(m,b)}function KN(s){return typeof s=="function"&&"applyToOptions"in s}function BF({type:s,...t}){return KN(s)&&XN()?s.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class $N extends c1{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:e,name:n,keyframes:r,pseudoElement:o,allowFlatten:u=!1,finalKeyframe:h,onComplete:f}=t;this.isPseudoElement=!!o,this.allowFlatten=u,this.options=t,J_(typeof t.type!="string");const p=BF(t);this.animation=PF(e,n,r,p,o),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const m=l1(r,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(m):NF(e,n,m),this.animation.cancel()}f==null||f(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,e;(e=(t=this.animation).finish)==null||e.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n,r;const t=(e=this.options)==null?void 0:e.element;!this.isPseudoElement&&(t!=null&&t.isConnected)&&((r=(n=this.animation).commitStyles)==null||r.call(n))}get duration(){var e,n;const t=((n=(e=this.animation.effect)==null?void 0:e.getComputedTiming)==null?void 0:n.call(e).duration)||0;return Hs(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Hs(t)}get time(){return Hs(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=ha(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&IF()?(this.animation.timeline=t,Vs):e(this)}}const WN={anticipate:wN,backInOut:_N,circInOut:CN};function kF(s){return s in WN}function UF(s){typeof s.ease=="string"&&kF(s.ease)&&(s.ease=WN[s.ease])}const gS=10;class FF extends $N{constructor(t){UF(t),zN(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:n,onComplete:r,element:o,...u}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const h=new u1({...u,autoplay:!1}),f=Math.max(gS,ri.now()-this.startTime),p=Xa(0,gS,f-gS);e.setWithVelocity(h.sample(Math.max(0,f-p)).value,h.sample(f).value,p),h.stop()}}const pM=(s,t)=>t==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(da.test(s)||s==="0")&&!s.startsWith("url("));function HF(s){const t=s[0];if(s.length===1)return!0;for(let e=0;e<s.length;e++)if(s[e]!==t)return!0}function VF(s,t,e,n){const r=s[0];if(r===null)return!1;if(t==="display"||t==="visibility")return!0;const o=s[s.length-1],u=pM(r,t),h=pM(o,t);return!u||!h?!1:HF(s)||(e==="spring"||KN(e))&&n}function eT(s){s.duration=0,s.type="keyframes"}const zF=new Set(["opacity","clipPath","filter","transform"]),jF=bN(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function GF(s){var m;const{motionValue:t,name:e,repeatDelay:n,repeatType:r,damping:o,type:u}=s;if(!(((m=t==null?void 0:t.owner)==null?void 0:m.current)instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:p}=t.owner.getProps();return jF()&&e&&zF.has(e)&&(e!=="transform"||!p)&&!f&&!n&&r!=="mirror"&&o!==0&&u!=="inertia"}const YF=40;class XF extends c1{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:u="loop",keyframes:h,name:f,motionValue:p,element:m,...y}){var S;super(),this.stop=()=>{var w,x;this._animation&&(this._animation.stop(),(w=this.stopTimeline)==null||w.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=ri.now();const b={autoplay:t,delay:e,type:n,repeat:r,repeatDelay:o,repeatType:u,name:f,motionValue:p,element:m,...y},A=(m==null?void 0:m.KeyframeResolver)||h1;this.keyframeResolver=new A(h,(w,x,D)=>this.onKeyframesResolved(w,x,b,!D),f,p,m),(S=this.keyframeResolver)==null||S.scheduleResolve()}onKeyframesResolved(t,e,n,r){var x,D;this.keyframeResolver=void 0;const{name:o,type:u,velocity:h,delay:f,isHandoff:p,onUpdate:m}=n;this.resolvedAt=ri.now(),VF(t,o,u,h)||((ro.instantAnimations||!f)&&(m==null||m(l1(t,n,e))),t[0]=t[t.length-1],eT(n),n.repeat=0);const b={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>YF?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...n,keyframes:t},A=!p&&GF(b),S=(D=(x=b.motionValue)==null?void 0:x.owner)==null?void 0:D.current,w=A?new FF({...b,element:S}):new u1(b);w.finished.then(()=>{this.notifyFinished()}).catch(Vs),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),RF()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}function QN(s,t,e,n=0,r=1){const o=Array.from(s).sort((p,m)=>p.sortNodePosition(m)).indexOf(t),u=s.size,h=(u-1)*n;return typeof e=="function"?e(o,u):r===1?o*n:h-o*n}const qF=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function KF(s){const t=qF.exec(s);if(!t)return[,];const[,e,n,r]=t;return[`--${e??n}`,r]}function ZN(s,t,e=1){const[n,r]=KF(s);if(!n)return;const o=window.getComputedStyle(t).getPropertyValue(n);if(o){const u=o.trim();return mN(u)?parseFloat(u):u}return i1(r)?ZN(r,t,e+1):r}const $F={type:"spring",stiffness:500,damping:25,restSpeed:10},WF=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),QF={type:"keyframes",duration:.8},ZF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},JF=(s,{keyframes:t})=>t.length>2?QF:Sf.has(s)?s.startsWith("scale")?WF(t[1]):$F:ZF,t3=s=>s!==null;function e3(s,{repeat:t,repeatType:e="loop"},n){const r=s.filter(t3),o=t&&e!=="loop"&&t%2===1?0:r.length-1;return r[o]}function JN(s,t){if(s!=null&&s.inherit&&t){const{inherit:e,...n}=s;return{...t,...n}}return s}function d1(s,t){const e=(s==null?void 0:s[t])??(s==null?void 0:s.default)??s;return e!==s?JN(e,s):e}function n3({when:s,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:r,repeat:o,repeatType:u,repeatDelay:h,from:f,elapsed:p,...m}){return!!Object.keys(m).length}const f1=(s,t,e,n={},r,o)=>u=>{const h=d1(n,s)||{},f=h.delay||n.delay||0;let{elapsed:p=0}=n;p=p-ha(f);const m={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...h,delay:-p,onUpdate:b=>{t.set(b),h.onUpdate&&h.onUpdate(b)},onComplete:()=>{u(),h.onComplete&&h.onComplete()},name:s,motionValue:t,element:o?void 0:r};n3(h)||Object.assign(m,JF(s,m)),m.duration&&(m.duration=ha(m.duration)),m.repeatDelay&&(m.repeatDelay=ha(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let y=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(eT(m),m.delay===0&&(y=!0)),(ro.instantAnimations||ro.skipAnimations||r!=null&&r.shouldSkipAnimations)&&(y=!0,eT(m),m.delay=0),m.allowFlatten=!h.type&&!h.ease,y&&!o&&t.get()!==void 0){const b=e3(m.keyframes,h);if(b!==void 0){we.update(()=>{m.onUpdate(b),m.onComplete()});return}}return h.isSync?new u1(m):new XF(m)};function mM(s){const t=[{},{}];return s==null||s.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function p1(s,t,e,n){if(typeof t=="function"){const[r,o]=mM(n);t=t(e!==void 0?e:s.custom,r,o)}if(typeof t=="string"&&(t=s.variants&&s.variants[t]),typeof t=="function"){const[r,o]=mM(n);t=t(e!==void 0?e:s.custom,r,o)}return t}function Vh(s,t,e){const n=s.getProps();return p1(n,t,e!==void 0?e:n.custom,s)}const tL=new Set(["width","height","top","left","right","bottom",...Ef]),gM=30,i3=s=>!isNaN(parseFloat(s));class s3{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var o;const r=ri.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=ri.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=i3(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new t1);const n=this.events[t].add(e);return t==="change"?()=>{n(),we.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ri.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>gM)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,gM);return vN(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,e;(t=this.dependents)==null||t.clear(),(e=this.events.destroy)==null||e.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function yf(s,t){return new s3(s,t)}const nT=s=>Array.isArray(s);function a3(s,t,e){s.hasValue(t)?s.getValue(t).set(e):s.addValue(t,yf(e))}function r3(s){return nT(s)?s[s.length-1]||0:s}function o3(s,t){const e=Vh(s,t);let{transitionEnd:n={},transition:r={},...o}=e||{};o={...o,...n};for(const u in o){const h=r3(o[u]);a3(s,u,h)}}const Qn=s=>!!(s&&s.getVelocity);function l3(s){return!!(Qn(s)&&s.add)}function iT(s,t){const e=s.getValue("willChange");if(l3(e))return e.add(t);if(!e&&ro.WillChange){const n=new ro.WillChange("auto");s.addValue("willChange",n),n.add(t)}}function m1(s){return s.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const c3="framerAppearId",eL="data-"+m1(c3);function nL(s){return s.props[eL]}function u3({protectedKeys:s,needsAnimating:t},e){const n=s.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function iL(s,t,{delay:e=0,transitionOverride:n,type:r}={}){let{transition:o,transitionEnd:u,...h}=t;const f=s.getDefaultTransition();o=o?JN(o,f):f;const p=o==null?void 0:o.reduceMotion;n&&(o=n);const m=[],y=r&&s.animationState&&s.animationState.getState()[r];for(const b in h){const A=s.getValue(b,s.latestValues[b]??null),S=h[b];if(S===void 0||y&&u3(y,b))continue;const w={delay:e,...d1(o||{},b)},x=A.get();if(x!==void 0&&!A.isAnimating&&!Array.isArray(S)&&S===x&&!w.velocity)continue;let D=!1;if(window.MotionHandoffAnimation){const N=nL(s);if(N){const L=window.MotionHandoffAnimation(N,b,we);L!==null&&(w.startTime=L,D=!0)}}iT(s,b);const O=p??s.shouldReduceMotion;A.start(f1(b,A,S,O&&tL.has(b)?{type:!1}:w,s,D));const M=A.animation;M&&m.push(M)}if(u){const b=()=>we.update(()=>{u&&o3(s,u)});m.length?Promise.all(m).then(b):b()}return m}function sT(s,t,e={}){var f;const n=Vh(s,t,e.type==="exit"?(f=s.presenceContext)==null?void 0:f.custom:void 0);let{transition:r=s.getDefaultTransition()||{}}=n||{};e.transitionOverride&&(r=e.transitionOverride);const o=n?()=>Promise.all(iL(s,n,e)):()=>Promise.resolve(),u=s.variantChildren&&s.variantChildren.size?(p=0)=>{const{delayChildren:m=0,staggerChildren:y,staggerDirection:b}=r;return h3(s,t,p,m,y,b,e)}:()=>Promise.resolve(),{when:h}=r;if(h){const[p,m]=h==="beforeChildren"?[o,u]:[u,o];return p().then(()=>m())}else return Promise.all([o(),u(e.delay)])}function h3(s,t,e=0,n=0,r=0,o=1,u){const h=[];for(const f of s.variantChildren)f.notify("AnimationStart",t),h.push(sT(f,t,{...u,delay:e+(typeof n=="function"?0:n)+QN(s.variantChildren,f,n,r,o)}).then(()=>f.notify("AnimationComplete",t)));return Promise.all(h)}function d3(s,t,e={}){s.notify("AnimationStart",t);let n;if(Array.isArray(t)){const r=t.map(o=>sT(s,o,e));n=Promise.all(r)}else if(typeof t=="string")n=sT(s,t,e);else{const r=typeof t=="function"?Vh(s,t,e.custom):t;n=Promise.all(iL(s,r,e))}return n.then(()=>{s.notify("AnimationComplete",t)})}const f3={test:s=>s==="auto",parse:s=>s},sL=s=>t=>t.test(s),aL=[Af,ft,Ya,ko,zU,VU,f3],yM=s=>aL.find(sL(s));function p3(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||yN(s):!0}const m3=new Set(["brightness","contrast","saturate","opacity"]);function g3(s){const[t,e]=s.slice(0,-1).split("(");if(t==="drop-shadow")return s;const[n]=e.match(s1)||[];if(!n)return s;const r=e.replace(n,"");let o=m3.has(t)?1:0;return n!==e&&(o*=100),t+"("+o+r+")"}const y3=/\b([a-z-]*)\(.*?\)/gu,aT={...da,getAnimatableNone:s=>{const t=s.match(y3);return t?t.map(g3).join(" "):s}},rT={...da,getAnimatableNone:s=>{const t=da.parse(s);return da.createTransformer(s)(t.map(n=>typeof n=="number"?0:typeof n=="object"?{...n,alpha:1}:n))}},bM={...Af,transform:Math.round},b3={rotate:ko,rotateX:ko,rotateY:ko,rotateZ:ko,scale:I0,scaleX:I0,scaleY:I0,scaleZ:I0,skew:ko,skewX:ko,skewY:ko,distance:ft,translateX:ft,translateY:ft,translateZ:ft,x:ft,y:ft,z:ft,perspective:ft,transformPerspective:ft,opacity:em,originX:sM,originY:sM,originZ:ft},g1={borderWidth:ft,borderTopWidth:ft,borderRightWidth:ft,borderBottomWidth:ft,borderLeftWidth:ft,borderRadius:ft,borderTopLeftRadius:ft,borderTopRightRadius:ft,borderBottomRightRadius:ft,borderBottomLeftRadius:ft,width:ft,maxWidth:ft,height:ft,maxHeight:ft,top:ft,right:ft,bottom:ft,left:ft,inset:ft,insetBlock:ft,insetBlockStart:ft,insetBlockEnd:ft,insetInline:ft,insetInlineStart:ft,insetInlineEnd:ft,padding:ft,paddingTop:ft,paddingRight:ft,paddingBottom:ft,paddingLeft:ft,paddingBlock:ft,paddingBlockStart:ft,paddingBlockEnd:ft,paddingInline:ft,paddingInlineStart:ft,paddingInlineEnd:ft,margin:ft,marginTop:ft,marginRight:ft,marginBottom:ft,marginLeft:ft,marginBlock:ft,marginBlockStart:ft,marginBlockEnd:ft,marginInline:ft,marginInlineStart:ft,marginInlineEnd:ft,fontSize:ft,backgroundPositionX:ft,backgroundPositionY:ft,...b3,zIndex:bM,fillOpacity:em,strokeOpacity:em,numOctaves:bM},v3={...g1,color:on,backgroundColor:on,outlineColor:on,fill:on,stroke:on,borderColor:on,borderTopColor:on,borderRightColor:on,borderBottomColor:on,borderLeftColor:on,filter:aT,WebkitFilter:aT,mask:rT,WebkitMask:rT},rL=s=>v3[s],A3=new Set([aT,rT]);function oL(s,t){let e=rL(s);return A3.has(e)||(e=da),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const E3=new Set(["auto","none","0"]);function S3(s,t,e){let n=0,r;for(;n<s.length&&!r;){const o=s[n];typeof o=="string"&&!E3.has(o)&&nm(o).values.length&&(r=s[n]),n++}if(r&&e)for(const o of t)s[o]=oL(e,r)}class T3 extends h1{constructor(t,e,n,r,o){super(t,e,n,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let m=0;m<t.length;m++){let y=t[m];if(typeof y=="string"&&(y=y.trim(),i1(y))){const b=ZN(y,e.current);b!==void 0&&(t[m]=b),m===t.length-1&&(this.finalKeyframe=y)}}if(this.resolveNoneKeyframes(),!tL.has(n)||t.length!==2)return;const[r,o]=t,u=yM(r),h=yM(o),f=iM(r),p=iM(o);if(f!==p&&Pl[n]){this.needsMeasurement=!0;return}if(u!==h)if(dM(u)&&dM(h))for(let m=0;m<t.length;m++){const y=t[m];typeof y=="string"&&(t[m]=parseFloat(y))}else Pl[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let r=0;r<t.length;r++)(t[r]===null||p3(t[r]))&&n.push(r);n.length&&S3(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Pl[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const r=e[e.length-1];r!==void 0&&t.getValue(n,r).jump(r,!1)}measureEndState(){var h;const{element:t,name:e,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const r=t.getValue(e);r&&r.jump(this.measuredOrigin,!1);const o=n.length-1,u=n[o];n[o]=Pl[e](t.measureViewportBox(),window.getComputedStyle(t.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),(h=this.removedTransforms)!=null&&h.length&&this.removedTransforms.forEach(([f,p])=>{t.getValue(f).set(p)}),this.resolveNoneKeyframes()}}const _3=new Set(["opacity","clipPath","filter","transform"]);function lL(s,t,e){if(s==null)return[];if(s instanceof EventTarget)return[s];if(typeof s=="string"){let n=document;const r=(e==null?void 0:e[s])??n.querySelectorAll(s);return r?Array.from(r):[]}return Array.from(s).filter(n=>n!=null)}const cL=(s,t)=>t&&typeof s=="number"?t.transform(s):s;function oT(s){return gN(s)&&"offsetHeight"in s}const{schedule:y1}=RN(queueMicrotask,!1),Ws={x:!1,y:!1};function uL(){return Ws.x||Ws.y}function w3(s){return s==="x"||s==="y"?Ws[s]?null:(Ws[s]=!0,()=>{Ws[s]=!1}):Ws.x||Ws.y?null:(Ws.x=Ws.y=!0,()=>{Ws.x=Ws.y=!1})}function hL(s,t){const e=lL(s),n=new AbortController,r={passive:!0,...t,signal:n.signal};return[e,r,()=>n.abort()]}function x3(s){return!(s.pointerType==="touch"||uL())}function C3(s,t,e={}){const[n,r,o]=hL(s,e);return n.forEach(u=>{let h=!1,f=!1,p;const m=()=>{u.removeEventListener("pointerleave",S)},y=x=>{p&&(p(x),p=void 0),m()},b=x=>{h=!1,window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",b),f&&(f=!1,y(x))},A=()=>{h=!0,window.addEventListener("pointerup",b,r),window.addEventListener("pointercancel",b,r)},S=x=>{if(x.pointerType!=="touch"){if(h){f=!0;return}y(x)}},w=x=>{if(!x3(x))return;f=!1;const D=t(u,x);typeof D=="function"&&(p=D,u.addEventListener("pointerleave",S,r))};u.addEventListener("pointerenter",w,r),u.addEventListener("pointerdown",A,r)}),o}const dL=(s,t)=>t?s===t?!0:dL(s,t.parentElement):!1,b1=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,D3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function M3(s){return D3.has(s.tagName)||s.isContentEditable===!0}const R3=new Set(["INPUT","SELECT","TEXTAREA"]);function O3(s){return R3.has(s.tagName)||s.isContentEditable===!0}const Z0=new WeakSet;function vM(s){return t=>{t.key==="Enter"&&s(t)}}function yS(s,t){s.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const N3=(s,t)=>{const e=s.currentTarget;if(!e)return;const n=vM(()=>{if(Z0.has(e))return;yS(e,"down");const r=vM(()=>{yS(e,"up")}),o=()=>yS(e,"cancel");e.addEventListener("keyup",r,t),e.addEventListener("blur",o,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function AM(s){return b1(s)&&!uL()}const EM=new WeakSet;function L3(s,t,e={}){const[n,r,o]=hL(s,e),u=h=>{const f=h.currentTarget;if(!AM(h)||EM.has(h))return;Z0.add(f),e.stopPropagation&&EM.add(h);const p=t(f,h),m=(A,S)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",b),Z0.has(f)&&Z0.delete(f),AM(A)&&typeof p=="function"&&p(A,{success:S})},y=A=>{m(A,f===window||f===document||e.useGlobalTarget||dL(f,A.target))},b=A=>{m(A,!1)};window.addEventListener("pointerup",y,r),window.addEventListener("pointercancel",b,r)};return n.forEach(h=>{(e.useGlobalTarget?window:h).addEventListener("pointerdown",u,r),oT(h)&&(h.addEventListener("focus",p=>N3(p,r)),!M3(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),o}function v1(s){return gN(s)&&"ownerSVGElement"in s}const J0=new WeakMap;let Uo;const fL=(s,t,e)=>(n,r)=>r&&r[0]?r[0][s+"Size"]:v1(n)&&"getBBox"in n?n.getBBox()[t]:n[e],I3=fL("inline","width","offsetWidth"),P3=fL("block","height","offsetHeight");function B3({target:s,borderBoxSize:t}){var e;(e=J0.get(s))==null||e.forEach(n=>{n(s,{get width(){return I3(s,t)},get height(){return P3(s,t)}})})}function k3(s){s.forEach(B3)}function U3(){typeof ResizeObserver>"u"||(Uo=new ResizeObserver(k3))}function F3(s,t){Uo||U3();const e=lL(s);return e.forEach(n=>{let r=J0.get(n);r||(r=new Set,J0.set(n,r)),r.add(t),Uo==null||Uo.observe(n)}),()=>{e.forEach(n=>{const r=J0.get(n);r==null||r.delete(t),r!=null&&r.size||Uo==null||Uo.unobserve(n)})}}const tb=new Set;let Rh;function H3(){Rh=()=>{const s={get width(){return window.innerWidth},get height(){return window.innerHeight}};tb.forEach(t=>t(s))},window.addEventListener("resize",Rh)}function V3(s){return tb.add(s),Rh||H3(),()=>{tb.delete(s),!tb.size&&typeof Rh=="function"&&(window.removeEventListener("resize",Rh),Rh=void 0)}}function SM(s,t){return typeof s=="function"?V3(s):F3(s,t)}function z3(s){return v1(s)&&s.tagName==="svg"}const j3=[...aL,on,da],G3=s=>j3.find(sL(s)),TM=()=>({translate:0,scale:1,origin:0,originPoint:0}),Oh=()=>({x:TM(),y:TM()}),_M=()=>({min:0,max:0}),pn=()=>({x:_M(),y:_M()}),Y3=new WeakMap;function Cv(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function im(s){return typeof s=="string"||Array.isArray(s)}const A1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],E1=["initial",...A1];function Dv(s){return Cv(s.animate)||E1.some(t=>im(s[t]))}function pL(s){return!!(Dv(s)||s.variants)}function X3(s,t,e){for(const n in t){const r=t[n],o=e[n];if(Qn(r))s.addValue(n,r);else if(Qn(o))s.addValue(n,yf(r,{owner:s}));else if(o!==r)if(s.hasValue(n)){const u=s.getValue(n);u.liveStyle===!0?u.jump(r):u.hasAnimated||u.set(r)}else{const u=s.getStaticValue(n);s.addValue(n,yf(u!==void 0?u:r,{owner:s}))}}for(const n in e)t[n]===void 0&&s.removeValue(n);return t}const lT={current:null},mL={current:!1},q3=typeof window<"u";function K3(){if(mL.current=!0,!!q3)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),t=()=>lT.current=s.matches;s.addEventListener("change",t),t()}else lT.current=!1}const wM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let zb={};function gL(s){zb=s}function $3(){return zb}class W3{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:r,skipAnimations:o,blockInitialAnimation:u,visualState:h},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=h1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const A=ri.now();this.renderScheduledAt<A&&(this.renderScheduledAt=A,we.render(this.render,!1,!0))};const{latestValues:p,renderState:m}=h;this.latestValues=p,this.baseTarget={...p},this.initialValues=e.initial?{...p}:{},this.renderState=m,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.skipAnimationsConfig=o,this.options=f,this.blockInitialAnimation=!!u,this.isControllingVariants=Dv(e),this.isVariantNode=pL(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:y,...b}=this.scrapeMotionValuesFromProps(e,{},this);for(const A in b){const S=b[A];p[A]!==void 0&&Qn(S)&&S.set(p[A])}}mount(t){var e,n;if(this.hasBeenMounted)for(const r in this.initialValues)(e=this.values.get(r))==null||e.jump(this.initialValues[r]),this.latestValues[r]=this.initialValues[r];this.current=t,Y3.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,o)=>this.bindToMotionValue(o,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(mL.current||K3(),this.shouldReduceMotion=lT.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var t;this.projection&&this.projection.unmount(),Bl(this.notifyUpdate),Bl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){if(this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)(),e.accelerate&&_3.has(t)&&this.current instanceof HTMLElement){const{factory:u,keyframes:h,times:f,ease:p,duration:m}=e.accelerate,y=new $N({element:this.current,name:t,keyframes:h,times:f,ease:p,duration:ha(m)}),b=u(y);this.valueSubscriptions.set(t,()=>{b(),y.cancel()});return}const n=Sf.has(t);n&&this.onBindTransform&&this.onBindTransform();const r=e.on("change",u=>{this.latestValues[t]=u,this.props.onUpdate&&we.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;typeof window<"u"&&window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{r(),o&&o(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in zb){const e=zb[t];if(!e)continue;const{isEnabled:n,Feature:r}=e;if(!this.features[t]&&r&&n(this.props)&&(this.features[t]=new r(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<wM.length;n++){const r=wM[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,u=t[o];u&&(this.propEventSubscriptions[r]=this.on(r,u))}this.prevMotionValues=X3(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=yf(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(mN(n)||yN(n))?n=parseFloat(n):!G3(n)&&da.test(e)&&(n=oL(t,e)),this.setBaseTarget(t,Qn(n)?n.get():n)),Qn(n)?n.get():n}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var o;const{initial:e}=this.props;let n;if(typeof e=="string"||typeof e=="object"){const u=p1(this.props,e,(o=this.presenceContext)==null?void 0:o.custom);u&&(n=u[t])}if(e&&n!==void 0)return n;const r=this.getBaseTargetFromProps(this.props,t);return r!==void 0&&!Qn(r)?r:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new t1),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){y1.render(this.render)}}class yL extends W3{constructor(){super(...arguments),this.KeyframeResolver=T3}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){const n=t.style;return n?n[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Qn(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}class Hl{constructor(t){this.isMounted=!1,this.node=t}update(){}}function bL({top:s,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:s,max:n}}}function Q3({x:s,y:t}){return{top:t.min,right:s.max,bottom:t.max,left:s.min}}function Z3(s,t){if(!t)return s;const e=t({x:s.left,y:s.top}),n=t({x:s.right,y:s.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}function bS(s){return s===void 0||s===1}function cT({scale:s,scaleX:t,scaleY:e}){return!bS(s)||!bS(t)||!bS(e)}function rc(s){return cT(s)||vL(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function vL(s){return xM(s.x)||xM(s.y)}function xM(s){return s&&s!=="0%"}function jb(s,t,e){const n=s-e,r=t*n;return e+r}function CM(s,t,e,n,r){return r!==void 0&&(s=jb(s,r,n)),jb(s,e,n)+t}function uT(s,t=0,e=1,n,r){s.min=CM(s.min,t,e,n,r),s.max=CM(s.max,t,e,n,r)}function AL(s,{x:t,y:e}){uT(s.x,t.translate,t.scale,t.originPoint),uT(s.y,e.translate,e.scale,e.originPoint)}const DM=.999999999999,MM=1.0000000000001;function J3(s,t,e,n=!1){const r=e.length;if(!r)return;t.x=t.y=1;let o,u;for(let h=0;h<r;h++){o=e[h],u=o.projectionDelta;const{visualElement:f}=o.options;f&&f.props.style&&f.props.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Lh(s,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),u&&(t.x*=u.x.scale,t.y*=u.y.scale,AL(s,u)),n&&rc(o.latestValues)&&Lh(s,o.latestValues))}t.x<MM&&t.x>DM&&(t.x=1),t.y<MM&&t.y>DM&&(t.y=1)}function Nh(s,t){s.min=s.min+t,s.max=s.max+t}function RM(s,t,e,n,r=.5){const o=ke(s.min,s.max,r);uT(s,t,e,o,n)}function Lh(s,t){RM(s.x,t.x,t.scaleX,t.scale,t.originX),RM(s.y,t.y,t.scaleY,t.scale,t.originY)}function EL(s,t){return bL(Z3(s.getBoundingClientRect(),t))}function tH(s,t,e){const n=EL(s,e),{scroll:r}=t;return r&&(Nh(n.x,r.offset.x),Nh(n.y,r.offset.y)),n}const eH={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},nH=Ef.length;function iH(s,t,e){let n="",r=!0;for(let o=0;o<nH;o++){const u=Ef[o],h=s[u];if(h===void 0)continue;let f=!0;if(typeof h=="number")f=h===(u.startsWith("scale")?1:0);else{const p=parseFloat(h);f=u.startsWith("scale")?p===1:p===0}if(!f||e){const p=cL(h,g1[u]);if(!f){r=!1;const m=eH[u]||u;n+=`${m}(${p}) `}e&&(t[u]=p)}}return n=n.trim(),e?n=e(t,r?"":n):r&&(n="none"),n}function S1(s,t,e){const{style:n,vars:r,transformOrigin:o}=s;let u=!1,h=!1;for(const f in t){const p=t[f];if(Sf.has(f)){u=!0;continue}else if(NN(f)){r[f]=p;continue}else{const m=cL(p,g1[f]);f.startsWith("origin")?(h=!0,o[f]=m):n[f]=m}}if(t.transform||(u||e?n.transform=iH(t,s.transform,e):n.transform&&(n.transform="none")),h){const{originX:f="50%",originY:p="50%",originZ:m=0}=o;n.transformOrigin=`${f} ${p} ${m}`}}function SL(s,{style:t,vars:e},n,r){const o=s.style;let u;for(u in t)o[u]=t[u];r==null||r.applyProjectionStyles(o,n);for(u in e)o.setProperty(u,e[u])}function OM(s,t){return t.max===t.min?0:s/(t.max-t.min)*100}const bp={correct:(s,t)=>{if(!t.target)return s;if(typeof s=="string")if(ft.test(s))s=parseFloat(s);else return s;const e=OM(s,t.target.x),n=OM(s,t.target.y);return`${e}% ${n}%`}},sH={correct:(s,{treeScale:t,projectionDelta:e})=>{const n=s,r=da.parse(s);if(r.length>5)return n;const o=da.createTransformer(s),u=typeof r[0]!="number"?1:0,h=e.x.scale*t.x,f=e.y.scale*t.y;r[0+u]/=h,r[1+u]/=f;const p=ke(h,f,.5);return typeof r[2+u]=="number"&&(r[2+u]/=p),typeof r[3+u]=="number"&&(r[3+u]/=p),o(r)}},hT={borderRadius:{...bp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:bp,borderTopRightRadius:bp,borderBottomLeftRadius:bp,borderBottomRightRadius:bp,boxShadow:sH};function TL(s,{layout:t,layoutId:e}){return Sf.has(s)||s.startsWith("origin")||(t||e!==void 0)&&(!!hT[s]||s==="opacity")}function T1(s,t,e){var u;const n=s.style,r=t==null?void 0:t.style,o={};if(!n)return o;for(const h in n)(Qn(n[h])||r&&Qn(r[h])||TL(h,s)||((u=e==null?void 0:e.getValue(h))==null?void 0:u.liveStyle)!==void 0)&&(o[h]=n[h]);return o}function aH(s){return window.getComputedStyle(s)}class rH extends yL{constructor(){super(...arguments),this.type="html",this.renderInstance=SL}readValueFromInstance(t,e){var n;if(Sf.has(e))return(n=this.projection)!=null&&n.isProjecting?WS(e):wF(t,e);{const r=aH(t),o=(NN(e)?r.getPropertyValue(e):r[e])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(t,{transformPagePoint:e}){return EL(t,e)}build(t,e,n){S1(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return T1(t,e,n)}}const oH={offset:"stroke-dashoffset",array:"stroke-dasharray"},lH={offset:"strokeDashoffset",array:"strokeDasharray"};function cH(s,t,e=1,n=0,r=!0){s.pathLength=1;const o=r?oH:lH;s[o.offset]=`${-n}`,s[o.array]=`${t} ${e}`}const uH=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function _L(s,{attrX:t,attrY:e,attrScale:n,pathLength:r,pathSpacing:o=1,pathOffset:u=0,...h},f,p,m){if(S1(s,h,p),f){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:y,style:b}=s;y.transform&&(b.transform=y.transform,delete y.transform),(b.transform||y.transformOrigin)&&(b.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),b.transform&&(b.transformBox=(m==null?void 0:m.transformBox)??"fill-box",delete y.transformBox);for(const A of uH)y[A]!==void 0&&(b[A]=y[A],delete y[A]);t!==void 0&&(y.x=t),e!==void 0&&(y.y=e),n!==void 0&&(y.scale=n),r!==void 0&&cH(y,r,o,u,!1)}const wL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),xL=s=>typeof s=="string"&&s.toLowerCase()==="svg";function hH(s,t,e,n){SL(s,t,void 0,n);for(const r in t.attrs)s.setAttribute(wL.has(r)?r:m1(r),t.attrs[r])}function CL(s,t,e){const n=T1(s,t,e);for(const r in s)if(Qn(s[r])||Qn(t[r])){const o=Ef.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[o]=s[r]}return n}class dH extends yL{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=pn}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Sf.has(e)){const n=rL(e);return n&&n.default||0}return e=wL.has(e)?e:m1(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return CL(t,e,n)}build(t,e,n){_L(t,e,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,e,n,r){hH(t,e,n,r)}mount(t){this.isSVGTag=xL(t.tagName),super.mount(t)}}const fH=E1.length;function DL(s){if(!s)return;if(!s.isControllingVariants){const e=s.parent?DL(s.parent)||{}:{};return s.props.initial!==void 0&&(e.initial=s.props.initial),e}const t={};for(let e=0;e<fH;e++){const n=E1[e],r=s.props[n];(im(r)||r===!1)&&(t[n]=r)}return t}function ML(s,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==s.length)return!1;for(let n=0;n<e;n++)if(t[n]!==s[n])return!1;return!0}const pH=[...A1].reverse(),mH=A1.length;function gH(s){return t=>Promise.all(t.map(({animation:e,options:n})=>d3(s,e,n)))}function yH(s){let t=gH(s),e=NM(),n=!0;const r=f=>(p,m)=>{var b;const y=Vh(s,m,f==="exit"?(b=s.presenceContext)==null?void 0:b.custom:void 0);if(y){const{transition:A,transitionEnd:S,...w}=y;p={...p,...w,...S}}return p};function o(f){t=f(s)}function u(f){const{props:p}=s,m=DL(s.parent)||{},y=[],b=new Set;let A={},S=1/0;for(let x=0;x<mH;x++){const D=pH[x],O=e[D],M=p[D]!==void 0?p[D]:m[D],N=im(M),L=D===f?O.isActive:null;L===!1&&(S=x);let I=M===m[D]&&M!==p[D]&&N;if(I&&n&&s.manuallyAnimateOnMount&&(I=!1),O.protectedKeys={...A},!O.isActive&&L===null||!M&&!O.prevProp||Cv(M)||typeof M=="boolean")continue;if(D==="exit"&&O.isActive&&L!==!0){O.prevResolvedValues&&(A={...A,...O.prevResolvedValues});continue}const k=bH(O.prevProp,M);let z=k||D===f&&O.isActive&&!I&&N||x>S&&N,W=!1;const it=Array.isArray(M)?M:[M];let et=it.reduce(r(D),{});L===!1&&(et={});const{prevResolvedValues:ot={}}=O,Tt={...ot,...et},yt=Y=>{z=!0,b.has(Y)&&(W=!0,b.delete(Y)),O.needsAnimating[Y]=!0;const tt=s.getValue(Y);tt&&(tt.liveStyle=!1)};for(const Y in Tt){const tt=et[Y],At=ot[Y];if(A.hasOwnProperty(Y))continue;let gt=!1;nT(tt)&&nT(At)?gt=!ML(tt,At):gt=tt!==At,gt?tt!=null?yt(Y):b.add(Y):tt!==void 0&&b.has(Y)?yt(Y):O.protectedKeys[Y]=!0}O.prevProp=M,O.prevResolvedValues=et,O.isActive&&(A={...A,...et}),n&&s.blockInitialAnimation&&(z=!1);const bt=I&&k;z&&(!bt||W)&&y.push(...it.map(Y=>{const tt={type:D};if(typeof Y=="string"&&n&&!bt&&s.manuallyAnimateOnMount&&s.parent){const{parent:At}=s,gt=Vh(At,Y);if(At.enteringChildren&&gt){const{delayChildren:B}=gt.transition||{};tt.delay=QN(At.enteringChildren,s,B)}}return{animation:Y,options:tt}}))}if(b.size){const x={};if(typeof p.initial!="boolean"){const D=Vh(s,Array.isArray(p.initial)?p.initial[0]:p.initial);D&&D.transition&&(x.transition=D.transition)}b.forEach(D=>{const O=s.getBaseTarget(D),M=s.getValue(D);M&&(M.liveStyle=!0),x[D]=O??null}),y.push({animation:x})}let w=!!y.length;return n&&(p.initial===!1||p.initial===p.animate)&&!s.manuallyAnimateOnMount&&(w=!1),n=!1,w?t(y):Promise.resolve()}function h(f,p){var y;if(e[f].isActive===p)return Promise.resolve();(y=s.variantChildren)==null||y.forEach(b=>{var A;return(A=b.animationState)==null?void 0:A.setActive(f,p)}),e[f].isActive=p;const m=u(f);for(const b in e)e[b].protectedKeys={};return m}return{animateChanges:u,setActive:h,setAnimateFunction:o,getState:()=>e,reset:()=>{e=NM()}}}function bH(s,t){return typeof t=="string"?t!==s:Array.isArray(t)?!ML(t,s):!1}function ac(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function NM(){return{animate:ac(!0),whileInView:ac(),whileHover:ac(),whileTap:ac(),whileDrag:ac(),whileFocus:ac(),exit:ac()}}function LM(s,t){s.min=t.min,s.max=t.max}function Ks(s,t){LM(s.x,t.x),LM(s.y,t.y)}function IM(s,t){s.translate=t.translate,s.scale=t.scale,s.originPoint=t.originPoint,s.origin=t.origin}const RL=1e-4,vH=1-RL,AH=1+RL,OL=.01,EH=0-OL,SH=0+OL;function oi(s){return s.max-s.min}function TH(s,t,e){return Math.abs(s-t)<=e}function PM(s,t,e,n=.5){s.origin=n,s.originPoint=ke(t.min,t.max,s.origin),s.scale=oi(e)/oi(t),s.translate=ke(e.min,e.max,s.origin)-s.originPoint,(s.scale>=vH&&s.scale<=AH||isNaN(s.scale))&&(s.scale=1),(s.translate>=EH&&s.translate<=SH||isNaN(s.translate))&&(s.translate=0)}function Qp(s,t,e,n){PM(s.x,t.x,e.x,n?n.originX:void 0),PM(s.y,t.y,e.y,n?n.originY:void 0)}function BM(s,t,e){s.min=e.min+t.min,s.max=s.min+oi(t)}function _H(s,t,e){BM(s.x,t.x,e.x),BM(s.y,t.y,e.y)}function kM(s,t,e){s.min=t.min-e.min,s.max=s.min+oi(t)}function Gb(s,t,e){kM(s.x,t.x,e.x),kM(s.y,t.y,e.y)}function UM(s,t,e,n,r){return s-=t,s=jb(s,1/e,n),r!==void 0&&(s=jb(s,1/r,n)),s}function wH(s,t=0,e=1,n=.5,r,o=s,u=s){if(Ya.test(t)&&(t=parseFloat(t),t=ke(u.min,u.max,t/100)-u.min),typeof t!="number")return;let h=ke(o.min,o.max,n);s===o&&(h-=t),s.min=UM(s.min,t,e,h,r),s.max=UM(s.max,t,e,h,r)}function FM(s,t,[e,n,r],o,u){wH(s,t[e],t[n],t[r],t.scale,o,u)}const xH=["x","scaleX","originX"],CH=["y","scaleY","originY"];function HM(s,t,e,n){FM(s.x,t,xH,e?e.x:void 0,n?n.x:void 0),FM(s.y,t,CH,e?e.y:void 0,n?n.y:void 0)}function VM(s){return s.translate===0&&s.scale===1}function NL(s){return VM(s.x)&&VM(s.y)}function zM(s,t){return s.min===t.min&&s.max===t.max}function DH(s,t){return zM(s.x,t.x)&&zM(s.y,t.y)}function jM(s,t){return Math.round(s.min)===Math.round(t.min)&&Math.round(s.max)===Math.round(t.max)}function LL(s,t){return jM(s.x,t.x)&&jM(s.y,t.y)}function GM(s){return oi(s.x)/oi(s.y)}function YM(s,t){return s.translate===t.translate&&s.scale===t.scale&&s.originPoint===t.originPoint}function Ea(s){return[s("x"),s("y")]}function MH(s,t,e){let n="";const r=s.x.translate/t.x,o=s.y.translate/t.y,u=(e==null?void 0:e.z)||0;if((r||o||u)&&(n=`translate3d(${r}px, ${o}px, ${u}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:p,rotate:m,rotateX:y,rotateY:b,skewX:A,skewY:S}=e;p&&(n=`perspective(${p}px) ${n}`),m&&(n+=`rotate(${m}deg) `),y&&(n+=`rotateX(${y}deg) `),b&&(n+=`rotateY(${b}deg) `),A&&(n+=`skewX(${A}deg) `),S&&(n+=`skewY(${S}deg) `)}const h=s.x.scale*t.x,f=s.y.scale*t.y;return(h!==1||f!==1)&&(n+=`scale(${h}, ${f})`),n||"none"}const IL=["TopLeft","TopRight","BottomLeft","BottomRight"],RH=IL.length,XM=s=>typeof s=="string"?parseFloat(s):s,qM=s=>typeof s=="number"||ft.test(s);function OH(s,t,e,n,r,o){r?(s.opacity=ke(0,e.opacity??1,NH(n)),s.opacityExit=ke(t.opacity??1,0,LH(n))):o&&(s.opacity=ke(t.opacity??1,e.opacity??1,n));for(let u=0;u<RH;u++){const h=`border${IL[u]}Radius`;let f=KM(t,h),p=KM(e,h);if(f===void 0&&p===void 0)continue;f||(f=0),p||(p=0),f===0||p===0||qM(f)===qM(p)?(s[h]=Math.max(ke(XM(f),XM(p),n),0),(Ya.test(p)||Ya.test(f))&&(s[h]+="%")):s[h]=p}(t.rotate||e.rotate)&&(s.rotate=ke(t.rotate||0,e.rotate||0,n))}function KM(s,t){return s[t]!==void 0?s[t]:s.borderRadius}const NH=PL(0,.5,xN),LH=PL(.5,.95,Vs);function PL(s,t,e){return n=>n<s?0:n>t?1:e(tm(s,t,n))}function IH(s,t,e){const n=Qn(s)?s:yf(s);return n.start(f1("",n,t,e)),n.animation}function sm(s,t,e,n={passive:!0}){return s.addEventListener(t,e,n),()=>s.removeEventListener(t,e)}const PH=(s,t)=>s.depth-t.depth;class BH{constructor(){this.children=[],this.isDirty=!1}add(t){Z_(this.children,t),this.isDirty=!0}remove(t){Ub(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(PH),this.isDirty=!1,this.children.forEach(t)}}function kH(s,t){const e=ri.now(),n=({timestamp:r})=>{const o=r-e;o>=t&&(Bl(n),s(o-t))};return we.setup(n,!0),()=>Bl(n)}function eb(s){return Qn(s)?s.get():s}class UH{constructor(){this.members=[]}add(t){Z_(this.members,t);for(let e=this.members.length-1;e>=0;e--){const n=this.members[e];if(n===t||n===this.lead||n===this.prevLead)continue;const r=n.instance;r&&r.isConnected===!1&&n.isPresent!==!1&&!n.snapshot&&Ub(this.members,n)}t.scheduleRender()}remove(t){if(Ub(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(r=>t===r);if(e===0)return!1;let n;for(let r=e;r>=0;r--){const o=this.members[r],u=o.instance;if(o.isPresent!==!1&&(!u||u.isConnected!==!1)){n=o;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender();const r=n.options.layoutDependency,o=t.options.layoutDependency;if(!(r!==void 0&&o!==void 0&&r===o)){const f=n.instance;f&&f.isConnected===!1&&!n.snapshot||(t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0))}const{crossfade:h}=t.options;h===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const nb={hasAnimatedSinceResize:!0,hasEverUpdated:!1},vS=["","X","Y","Z"],FH=1e3;let HH=0;function AS(s,t,e,n){const{latestValues:r}=t;r[s]&&(e[s]=r[s],t.setStaticValue(s,0),n&&(n[s]=0))}function BL(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:t}=s.options;if(!t)return;const e=nL(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:r,layoutId:o}=s.options;window.MotionCancelOptimisedAnimation(e,"transform",we,!(r||o))}const{parent:n}=s;n&&!n.hasCheckedOptimisedAppear&&BL(n)}function kL({attachResizeListener:s,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(u={},h=t==null?void 0:t()){this.id=HH++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(jH),this.nodes.forEach(qH),this.nodes.forEach(KH),this.nodes.forEach(GH)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new BH)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new t1),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const f=this.eventHandlers.get(u);f&&f.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=v1(u)&&!z3(u),this.instance=u;const{layoutId:h,layout:f,visualElement:p}=this.options;if(p&&!p.current&&p.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||h)&&(this.isLayoutDirty=!0),s){let m,y=0;const b=()=>this.root.updateBlockedByResize=!1;we.read(()=>{y=window.innerWidth}),s(u,()=>{const A=window.innerWidth;A!==y&&(y=A,this.root.updateBlockedByResize=!0,m&&m(),m=kH(b,250),nb.hasAnimatedSinceResize&&(nb.hasAnimatedSinceResize=!1,this.nodes.forEach(QM)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&p&&(h||f)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:y,hasRelativeLayoutChanged:b,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||p.getDefaultTransition()||JH,{onLayoutAnimationStart:w,onLayoutAnimationComplete:x}=p.getProps(),D=!this.targetLayout||!LL(this.targetLayout,A),O=!y&&b;if(this.options.layoutRoot||this.resumeFrom||O||y&&(D||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const M={...d1(S,"layout"),onPlay:w,onComplete:x};(p.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M),this.setAnimationOrigin(m,O)}else y||QM(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Bl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach($H),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&BL(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const y=this.path[m];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:h,layout:f}=this.options;if(h===void 0&&!f)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($M);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(WM);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(XH),this.nodes.forEach(VH),this.nodes.forEach(zH)):this.nodes.forEach(WM),this.clearAllSnapshots();const h=ri.now();kn.delta=Xa(0,1e3/60,h-kn.timestamp),kn.timestamp=h,kn.isProcessing=!0,hS.update.process(kn),hS.preRender.process(kn),hS.render.process(kn),kn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,y1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(YH),this.sharedNodes.forEach(WH)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,we.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){we.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!oi(this.snapshot.measuredBox.x)&&!oi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=pn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h&&this.instance){const f=n(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:f,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!r)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!NL(this.projectionDelta),f=this.getTransformTemplate(),p=f?f(this.latestValues,""):void 0,m=p!==this.prevTransformTemplateValue;u&&this.instance&&(h||rc(this.latestValues)||m)&&(r(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let f=this.removeElementScroll(h);return u&&(f=this.removeTransform(f)),tV(f),{animationId:this.root.animationId,measuredBox:h,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var p;const{visualElement:u}=this.options;if(!u)return pn();const h=u.measureViewportBox();if(!(((p=this.scroll)==null?void 0:p.wasRoot)||this.path.some(eV))){const{scroll:m}=this.root;m&&(Nh(h.x,m.offset.x),Nh(h.y,m.offset.y))}return h}removeElementScroll(u){var f;const h=pn();if(Ks(h,u),(f=this.scroll)!=null&&f.wasRoot)return h;for(let p=0;p<this.path.length;p++){const m=this.path[p],{scroll:y,options:b}=m;m!==this.root&&y&&b.layoutScroll&&(y.wasRoot&&Ks(h,u),Nh(h.x,y.offset.x),Nh(h.y,y.offset.y))}return h}applyTransform(u,h=!1){const f=pn();Ks(f,u);for(let p=0;p<this.path.length;p++){const m=this.path[p];!h&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Lh(f,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),rc(m.latestValues)&&Lh(f,m.latestValues)}return rc(this.latestValues)&&Lh(f,this.latestValues),f}removeTransform(u){const h=pn();Ks(h,u);for(let f=0;f<this.path.length;f++){const p=this.path[f];if(!p.instance||!rc(p.latestValues))continue;cT(p.latestValues)&&p.updateSnapshot();const m=pn(),y=p.measurePageBox();Ks(m,y),HM(h,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,m)}return rc(this.latestValues)&&HM(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==kn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var A;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(u||f&&this.isSharedProjectionDirty||this.isProjectionDirty||(A=this.parent)!=null&&A.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:y}=this.options;if(!this.layout||!(m||y))return;this.resolvedRelativeTargetAt=kn.timestamp;const b=this.getClosestProjectingParent();b&&this.linkedParentVersion!==b.layoutVersion&&!b.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(b&&b.layout?this.createRelativeTarget(b,this.layout.layoutBox,b.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=pn(),this.targetWithTransforms=pn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),_H(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ks(this.target,this.layout.layoutBox),AL(this.target,this.targetDelta)):Ks(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?this.createRelativeTarget(b,this.target,b.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||cT(this.parent.latestValues)||vL(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(u,h,f){this.relativeParent=u,this.linkedParentVersion=u.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pn(),this.relativeTargetOrigin=pn(),Gb(this.relativeTargetOrigin,h,f),Ks(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var S;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||(S=this.parent)!=null&&S.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===kn.timestamp&&(f=!1),f)return;const{layout:p,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||m))return;Ks(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,b=this.treeScale.y;J3(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=pn());const{target:A}=u;if(!A){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(IM(this.prevProjectionDelta.x,this.projectionDelta.x),IM(this.prevProjectionDelta.y,this.projectionDelta.y)),Qp(this.projectionDelta,this.layoutCorrected,A,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==b||!YM(this.projectionDelta.x,this.prevProjectionDelta.x)||!YM(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var h;if((h=this.options.visualElement)==null||h.scheduleRender(),u){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Oh(),this.projectionDelta=Oh(),this.projectionDeltaWithTransform=Oh()}setAnimationOrigin(u,h=!1){const f=this.snapshot,p=f?f.latestValues:{},m={...this.latestValues},y=Oh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const b=pn(),A=f?f.source:void 0,S=this.layout?this.layout.source:void 0,w=A!==S,x=this.getStack(),D=!x||x.members.length<=1,O=!!(w&&!D&&this.options.crossfade===!0&&!this.path.some(ZH));this.animationProgress=0;let M;this.mixTargetDelta=N=>{const L=N/1e3;ZM(y.x,u.x,L),ZM(y.y,u.y,L),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Gb(b,this.layout.layoutBox,this.relativeParent.layout.layoutBox),QH(this.relativeTarget,this.relativeTargetOrigin,b,L),M&&DH(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=pn()),Ks(M,this.relativeTarget)),w&&(this.animationValues=m,OH(m,p,this.latestValues,L,O,D)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){var h,f,p;this.notifyListeners("animationStart"),(h=this.currentAnimation)==null||h.stop(),(p=(f=this.resumingFrom)==null?void 0:f.currentAnimation)==null||p.stop(),this.pendingAnimation&&(Bl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=we.update(()=>{nb.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=yf(0)),this.motionValue.jump(0,!1),this.currentAnimation=IH(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:m=>{this.mixTargetDelta(m),u.onUpdate&&u.onUpdate(m)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(FH),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:f,layout:p,latestValues:m}=u;if(!(!h||!f||!p)){if(this!==u&&this.layout&&p&&UL(this.options.animationType,this.layout.layoutBox,p.layoutBox)){f=this.target||pn();const y=oi(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+y;const b=oi(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+b}Ks(h,f),Lh(h,m),Qp(this.projectionDeltaWithTransform,this.layoutCorrected,h,m)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new UH),this.sharedNodes.get(u).add(h);const p=h.options.initialPromotionConfig;h.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var h;const{layoutId:u}=this.options;return u?((h=this.getStack())==null?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:u}=this.options;return u?(h=this.getStack())==null?void 0:h.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:f}={}){const p=this.getStack();p&&p.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:f}=u;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(h=!0),!h)return;const p={};f.z&&AS("z",u,p,this.animationValues);for(let m=0;m<vS.length;m++)AS(`rotate${vS[m]}`,u,p,this.animationValues),AS(`skew${vS[m]}`,u,p,this.animationValues);u.render();for(const m in p)u.setStaticValue(m,p[m]),this.animationValues&&(this.animationValues[m]=p[m]);u.scheduleRender()}applyProjectionStyles(u,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=eb(h==null?void 0:h.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=eb(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!rc(this.latestValues)&&(u.transform=f?f({},""):"none",this.hasProjected=!1);return}u.visibility="";const m=p.animationValues||p.latestValues;this.applyTransformsToTarget();let y=MH(this.projectionDeltaWithTransform,this.treeScale,m);f&&(y=f(m,y)),u.transform=y;const{x:b,y:A}=this.projectionDelta;u.transformOrigin=`${b.origin*100}% ${A.origin*100}% 0`,p.animationValues?u.opacity=p===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:u.opacity=p===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const S in hT){if(m[S]===void 0)continue;const{correct:w,applyTo:x,isCSSVariable:D}=hT[S],O=y==="none"?m[S]:w(m[S],p);if(x){const M=x.length;for(let N=0;N<M;N++)u[x[N]]=O}else D?this.options.visualElement.renderState.vars[S]=O:u[S]=O}this.options.layoutId&&(u.pointerEvents=p===this?eb(h==null?void 0:h.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var h;return(h=u.currentAnimation)==null?void 0:h.stop()}),this.root.nodes.forEach($M),this.root.sharedNodes.clear()}}}function VH(s){s.updateLayout()}function zH(s){var e;const t=((e=s.resumeFrom)==null?void 0:e.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&t&&s.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=s.layout,{animationType:o}=s.options,u=t.source!==s.layout.source;o==="size"?Ea(y=>{const b=u?t.measuredBox[y]:t.layoutBox[y],A=oi(b);b.min=n[y].min,b.max=b.min+A}):UL(o,t.layoutBox,n)&&Ea(y=>{const b=u?t.measuredBox[y]:t.layoutBox[y],A=oi(n[y]);b.max=b.min+A,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[y].max=s.relativeTarget[y].min+A)});const h=Oh();Qp(h,n,t.layoutBox);const f=Oh();u?Qp(f,s.applyTransform(r,!0),t.measuredBox):Qp(f,n,t.layoutBox);const p=!NL(h);let m=!1;if(!s.resumeFrom){const y=s.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:b,layout:A}=y;if(b&&A){const S=pn();Gb(S,t.layoutBox,b.layoutBox);const w=pn();Gb(w,n,A.layoutBox),LL(S,w)||(m=!0),y.options.layoutRoot&&(s.relativeTarget=w,s.relativeTargetOrigin=S,s.relativeParent=y)}}}s.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:f,layoutDelta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:m})}else if(s.isLead()){const{onExitComplete:n}=s.options;n&&n()}s.options.transition=void 0}function jH(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function GH(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function YH(s){s.clearSnapshot()}function $M(s){s.clearMeasurements()}function WM(s){s.isLayoutDirty=!1}function XH(s){const{visualElement:t}=s.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),s.resetTransform()}function QM(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function qH(s){s.resolveTargetDelta()}function KH(s){s.calcProjection()}function $H(s){s.resetSkewAndRotation()}function WH(s){s.removeLeadSnapshot()}function ZM(s,t,e){s.translate=ke(t.translate,0,e),s.scale=ke(t.scale,1,e),s.origin=t.origin,s.originPoint=t.originPoint}function JM(s,t,e,n){s.min=ke(t.min,e.min,n),s.max=ke(t.max,e.max,n)}function QH(s,t,e,n){JM(s.x,t.x,e.x,n),JM(s.y,t.y,e.y,n)}function ZH(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const JH={duration:.45,ease:[.4,0,.1,1]},tR=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),eR=tR("applewebkit/")&&!tR("chrome/")?Math.round:Vs;function nR(s){s.min=eR(s.min),s.max=eR(s.max)}function tV(s){nR(s.x),nR(s.y)}function UL(s,t,e){return s==="position"||s==="preserve-aspect"&&!TH(GM(t),GM(e),.2)}function eV(s){var t;return s!==s.root&&((t=s.scroll)==null?void 0:t.wasRoot)}const nV=kL({attachResizeListener:(s,t)=>sm(s,"resize",t),measureScroll:()=>{var s,t;return{x:document.documentElement.scrollLeft||((s=document.body)==null?void 0:s.scrollLeft)||0,y:document.documentElement.scrollTop||((t=document.body)==null?void 0:t.scrollTop)||0}},checkIsScrollRoot:()=>!0}),ES={current:void 0},FL=kL({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!ES.current){const s=new nV({});s.mount(window),s.setOptions({layoutScroll:!0}),ES.current=s}return ES.current},resetTransform:(s,t)=>{s.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),_1=st.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});function iR(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function iV(...s){return t=>{let e=!1;const n=s.map(r=>{const o=iR(r,t);return!e&&typeof o=="function"&&(e=!0),o});if(e)return()=>{for(let r=0;r<n.length;r++){const o=n[r];typeof o=="function"?o():iR(s[r],null)}}}}function sV(...s){return st.useCallback(iV(...s),s)}class aV extends st.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const n=e.offsetParent,r=oT(n)&&n.offsetWidth||0,o=oT(n)&&n.offsetHeight||0,u=this.props.sizeRef.current;u.height=e.offsetHeight||0,u.width=e.offsetWidth||0,u.top=e.offsetTop,u.left=e.offsetLeft,u.right=r-u.width-u.left,u.bottom=o-u.height-u.top}return null}componentDidUpdate(){}render(){return this.props.children}}function rV({children:s,isPresent:t,anchorX:e,anchorY:n,root:r,pop:o}){var b;const u=st.useId(),h=st.useRef(null),f=st.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:p}=st.useContext(_1),m=((b=s.props)==null?void 0:b.ref)??(s==null?void 0:s.ref),y=sV(h,m);return st.useInsertionEffect(()=>{const{width:A,height:S,top:w,left:x,right:D,bottom:O}=f.current;if(t||o===!1||!h.current||!A||!S)return;const M=e==="left"?`left: ${x}`:`right: ${D}`,N=n==="bottom"?`bottom: ${O}`:`top: ${w}`;h.current.dataset.motionPopId=u;const L=document.createElement("style");p&&(L.nonce=p);const I=r??document.head;return I.appendChild(L),L.sheet&&L.sheet.insertRule(`
          [data-motion-pop-id="${u}"] {
            position: absolute !important;
            width: ${A}px !important;
            height: ${S}px !important;
            ${M}px !important;
            ${N}px !important;
          }
        `),()=>{I.contains(L)&&I.removeChild(L)}},[t]),X.jsx(aV,{isPresent:t,childRef:h,sizeRef:f,pop:o,children:o===!1?s:st.cloneElement(s,{ref:y})})}const oV=({children:s,initial:t,isPresent:e,onExitComplete:n,custom:r,presenceAffectsLayout:o,mode:u,anchorX:h,anchorY:f,root:p})=>{const m=Q_(lV),y=st.useId();let b=!0,A=st.useMemo(()=>(b=!1,{id:y,initial:t,isPresent:e,custom:r,onExitComplete:S=>{m.set(S,!0);for(const w of m.values())if(!w)return;n&&n()},register:S=>(m.set(S,!1),()=>m.delete(S))}),[e,m,n]);return o&&b&&(A={...A}),st.useMemo(()=>{m.forEach((S,w)=>m.set(w,!1))},[e]),st.useEffect(()=>{!e&&!m.size&&n&&n()},[e]),s=X.jsx(rV,{pop:u==="popLayout",isPresent:e,anchorX:h,anchorY:f,root:p,children:s}),X.jsx(xv.Provider,{value:A,children:s})};function lV(){return new Map}function HL(s=!0){const t=st.useContext(xv);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,o=st.useId();st.useEffect(()=>{if(s)return r(o)},[s]);const u=st.useCallback(()=>s&&n&&n(o),[o,n,s]);return!e&&n?[!1,u]:[!0]}const P0=s=>s.key||"";function sR(s){const t=[];return st.Children.forEach(s,e=>{st.isValidElement(e)&&t.push(e)}),t}const SS=({children:s,custom:t,initial:e=!0,onExitComplete:n,presenceAffectsLayout:r=!0,mode:o="sync",propagate:u=!1,anchorX:h="left",anchorY:f="top",root:p})=>{const[m,y]=HL(u),b=st.useMemo(()=>sR(s),[s]),A=u&&!m?[]:b.map(P0),S=st.useRef(!0),w=st.useRef(b),x=Q_(()=>new Map),D=st.useRef(new Set),[O,M]=st.useState(b),[N,L]=st.useState(b);pN(()=>{S.current=!1,w.current=b;for(let z=0;z<N.length;z++){const W=P0(N[z]);A.includes(W)?(x.delete(W),D.current.delete(W)):x.get(W)!==!0&&x.set(W,!1)}},[N,A.length,A.join("-")]);const I=[];if(b!==O){let z=[...b];for(let W=0;W<N.length;W++){const it=N[W],et=P0(it);A.includes(et)||(z.splice(W,0,it),I.push(it))}return o==="wait"&&I.length&&(z=I),L(sR(z)),M(b),null}const{forceRender:k}=st.useContext(W_);return X.jsx(X.Fragment,{children:N.map(z=>{const W=P0(z),it=u&&!m?!1:b===N||A.includes(W),et=()=>{if(D.current.has(W))return;if(D.current.add(W),x.has(W))x.set(W,!0);else return;let ot=!0;x.forEach(Tt=>{Tt||(ot=!1)}),ot&&(k==null||k(),L(w.current),u&&(y==null||y()),n&&n())};return X.jsx(oV,{isPresent:it,initial:!S.current||e?void 0:!1,custom:t,presenceAffectsLayout:r,mode:o,root:p,onExitComplete:it?void 0:et,anchorX:h,anchorY:f,children:z},W)})})},VL=st.createContext({strict:!1}),aR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let rR=!1;function cV(){if(rR)return;const s={};for(const t in aR)s[t]={isEnabled:e=>aR[t].some(n=>!!e[n])};gL(s),rR=!0}function zL(){return cV(),$3()}function uV(s){const t=zL();for(const e in s)t[e]={...t[e],...s[e]};gL(t)}const hV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function Yb(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||hV.has(s)}let jL=s=>!Yb(s);function dV(s){typeof s=="function"&&(jL=t=>t.startsWith("on")?!Yb(t):s(t))}try{dV(require("@emotion/is-prop-valid").default)}catch{}function fV(s,t,e){const n={};for(const r in s)r==="values"&&typeof s.values=="object"||(jL(r)||e===!0&&Yb(r)||!t&&!Yb(r)||s.draggable&&r.startsWith("onDrag"))&&(n[r]=s[r]);return n}const Mv=st.createContext({});function pV(s,t){if(Dv(s)){const{initial:e,animate:n}=s;return{initial:e===!1||im(e)?e:void 0,animate:im(n)?n:void 0}}return s.inherit!==!1?t:{}}function mV(s){const{initial:t,animate:e}=pV(s,st.useContext(Mv));return st.useMemo(()=>({initial:t,animate:e}),[oR(t),oR(e)])}function oR(s){return Array.isArray(s)?s.join(" "):s}const w1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function GL(s,t,e){for(const n in t)!Qn(t[n])&&!TL(n,e)&&(s[n]=t[n])}function gV({transformTemplate:s},t){return st.useMemo(()=>{const e=w1();return S1(e,t,s),Object.assign({},e.vars,e.style)},[t])}function yV(s,t){const e=s.style||{},n={};return GL(n,e,s),Object.assign(n,gV(s,t)),n}function bV(s,t){const e={},n=yV(s,t);return s.drag&&s.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(e.tabIndex=0),e.style=n,e}const YL=()=>({...w1(),attrs:{}});function vV(s,t,e,n){const r=st.useMemo(()=>{const o=YL();return _L(o,t,xL(n),s.transformTemplate,s.style),{...o.attrs,style:{...o.style}}},[t]);if(s.style){const o={};GL(o,s.style,s),r.style={...o,...r.style}}return r}const AV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function x1(s){return typeof s!="string"||s.includes("-")?!1:!!(AV.indexOf(s)>-1||/[A-Z]/u.test(s))}function EV(s,t,e,{latestValues:n},r,o=!1,u){const f=(u??x1(s)?vV:bV)(t,n,r,s),p=fV(t,typeof s=="string",o),m=s!==st.Fragment?{...p,...f,ref:e}:{},{children:y}=t,b=st.useMemo(()=>Qn(y)?y.get():y,[y]);return st.createElement(s,{...m,children:b})}function SV({scrapeMotionValuesFromProps:s,createRenderState:t},e,n,r){return{latestValues:TV(e,n,r,s),renderState:t()}}function TV(s,t,e,n){const r={},o=n(s,{});for(const b in o)r[b]=eb(o[b]);let{initial:u,animate:h}=s;const f=Dv(s),p=pL(s);t&&p&&!f&&s.inherit!==!1&&(u===void 0&&(u=t.initial),h===void 0&&(h=t.animate));let m=e?e.initial===!1:!1;m=m||u===!1;const y=m?h:u;if(y&&typeof y!="boolean"&&!Cv(y)){const b=Array.isArray(y)?y:[y];for(let A=0;A<b.length;A++){const S=p1(s,b[A]);if(S){const{transitionEnd:w,transition:x,...D}=S;for(const O in D){let M=D[O];if(Array.isArray(M)){const N=m?M.length-1:0;M=M[N]}M!==null&&(r[O]=M)}for(const O in w)r[O]=w[O]}}}return r}const XL=s=>(t,e)=>{const n=st.useContext(Mv),r=st.useContext(xv),o=()=>SV(s,t,n,r);return e?o():Q_(o)},_V=XL({scrapeMotionValuesFromProps:T1,createRenderState:w1}),wV=XL({scrapeMotionValuesFromProps:CL,createRenderState:YL}),xV=Symbol.for("motionComponentSymbol");function CV(s,t,e){const n=st.useRef(e);st.useInsertionEffect(()=>{n.current=e});const r=st.useRef(null);return st.useCallback(o=>{var h;o&&((h=s.onMount)==null||h.call(s,o)),t&&(o?t.mount(o):t.unmount());const u=n.current;if(typeof u=="function")if(o){const f=u(o);typeof f=="function"&&(r.current=f)}else r.current?(r.current(),r.current=null):u(o);else u&&(u.current=o)},[t])}const qL=st.createContext({});function vh(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function DV(s,t,e,n,r,o){var M,N;const{visualElement:u}=st.useContext(Mv),h=st.useContext(VL),f=st.useContext(xv),p=st.useContext(_1),m=p.reducedMotion,y=p.skipAnimations,b=st.useRef(null),A=st.useRef(!1);n=n||h.renderer,!b.current&&n&&(b.current=n(s,{visualState:t,parent:u,props:e,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:m,skipAnimations:y,isSVG:o}),A.current&&b.current&&(b.current.manuallyAnimateOnMount=!0));const S=b.current,w=st.useContext(qL);S&&!S.projection&&r&&(S.type==="html"||S.type==="svg")&&MV(b.current,e,r,w);const x=st.useRef(!1);st.useInsertionEffect(()=>{S&&x.current&&S.update(e,f)});const D=e[eL],O=st.useRef(!!D&&!((M=window.MotionHandoffIsComplete)!=null&&M.call(window,D))&&((N=window.MotionHasOptimisedAnimation)==null?void 0:N.call(window,D)));return pN(()=>{A.current=!0,S&&(x.current=!0,window.MotionIsMounted=!0,S.updateFeatures(),S.scheduleRenderMicrotask(),O.current&&S.animationState&&S.animationState.animateChanges())}),st.useEffect(()=>{S&&(!O.current&&S.animationState&&S.animationState.animateChanges(),O.current&&(queueMicrotask(()=>{var L;(L=window.MotionHandoffMarkAsComplete)==null||L.call(window,D)}),O.current=!1),S.enteringChildren=void 0)}),S}function MV(s,t,e,n){const{layoutId:r,layout:o,drag:u,dragConstraints:h,layoutScroll:f,layoutRoot:p,layoutCrossfade:m}=t;s.projection=new e(s.latestValues,t["data-framer-portal-id"]?void 0:KL(s.parent)),s.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!u||h&&vh(h),visualElement:s,animationType:typeof o=="string"?o:"both",initialPromotionConfig:n,crossfade:m,layoutScroll:f,layoutRoot:p})}function KL(s){if(s)return s.options.allowProjection!==!1?s.projection:KL(s.parent)}function TS(s,{forwardMotionProps:t=!1,type:e}={},n,r){n&&uV(n);const o=e?e==="svg":x1(s),u=o?wV:_V;function h(p,m){let y;const b={...st.useContext(_1),...p,layoutId:RV(p)},{isStatic:A}=b,S=mV(p),w=u(p,A);if(!A&&fN){OV();const x=NV(b);y=x.MeasureLayout,S.visualElement=DV(s,w,b,r,x.ProjectionNode,o)}return X.jsxs(Mv.Provider,{value:S,children:[y&&S.visualElement?X.jsx(y,{visualElement:S.visualElement,...b}):null,EV(s,p,CV(w,S.visualElement,m),w,A,t,o)]})}h.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const f=st.forwardRef(h);return f[xV]=s,f}function RV({layoutId:s}){const t=st.useContext(W_).id;return t&&s!==void 0?t+"-"+s:s}function OV(s,t){st.useContext(VL).strict}function NV(s){const t=zL(),{drag:e,layout:n}=t;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(s)||n!=null&&n.isEnabled(s)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function LV(s,t){if(typeof Proxy>"u")return TS;const e=new Map,n=(o,u)=>TS(o,u,s,t),r=(o,u)=>n(o,u);return new Proxy(r,{get:(o,u)=>u==="create"?n:(e.has(u)||e.set(u,TS(u,void 0,s,t)),e.get(u))})}const IV=(s,t)=>t.isSVG??x1(s)?new dH(t):new rH(t,{allowProjection:s!==st.Fragment});class PV extends Hl{constructor(t){super(t),t.animationState||(t.animationState=yH(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Cv(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let BV=0;class kV extends Hl{constructor(){super(...arguments),this.id=BV++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const r=this.node.animationState.setActive("exit",!t);e&&!t&&r.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const UV={animation:{Feature:PV},exit:{Feature:kV}};function ly(s){return{point:{x:s.pageX,y:s.pageY}}}const FV=s=>t=>b1(t)&&s(t,ly(t));function Zp(s,t,e,n){return sm(s,t,FV(e),n)}const $L=({current:s})=>s?s.ownerDocument.defaultView:null,lR=(s,t)=>Math.abs(s-t);function HV(s,t){const e=lR(s.x,t.x),n=lR(s.y,t.y);return Math.sqrt(e**2+n**2)}const cR=new Set(["auto","scroll"]);class WL{constructor(t,e,{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:o=!1,distanceThreshold:u=3,element:h}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=A=>{this.handleScroll(A.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=wS(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,w=HV(A.offset,{x:0,y:0})>=this.distanceThreshold;if(!S&&!w)return;const{point:x}=A,{timestamp:D}=kn;this.history.push({...x,timestamp:D});const{onStart:O,onMove:M}=this.handlers;S||(O&&O(this.lastMoveEvent,A),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,A)},this.handlePointerMove=(A,S)=>{this.lastMoveEvent=A,this.lastMoveEventInfo=_S(S,this.transformPagePoint),we.update(this.updatePoint,!0)},this.handlePointerUp=(A,S)=>{this.end();const{onEnd:w,onSessionEnd:x,resumeAnimation:D}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&D&&D(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const O=wS(A.type==="pointercancel"?this.lastMoveEventInfo:_S(S,this.transformPagePoint),this.history);this.startEvent&&w&&w(A,O),x&&x(A,O)},!b1(t))return;this.dragSnapToOrigin=o,this.handlers=e,this.transformPagePoint=n,this.distanceThreshold=u,this.contextWindow=r||window;const f=ly(t),p=_S(f,this.transformPagePoint),{point:m}=p,{timestamp:y}=kn;this.history=[{...m,timestamp:y}];const{onSessionStart:b}=e;b&&b(t,wS(p,this.history)),this.removeListeners=ay(Zp(this.contextWindow,"pointermove",this.handlePointerMove),Zp(this.contextWindow,"pointerup",this.handlePointerUp),Zp(this.contextWindow,"pointercancel",this.handlePointerUp)),h&&this.startScrollTracking(h)}startScrollTracking(t){let e=t.parentElement;for(;e;){const n=getComputedStyle(e);(cR.has(n.overflowX)||cR.has(n.overflowY))&&this.scrollPositions.set(e,{x:e.scrollLeft,y:e.scrollTop}),e=e.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0}),window.addEventListener("scroll",this.onWindowScroll),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const e=this.scrollPositions.get(t);if(!e)return;const n=t===window,r=n?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},o={x:r.x-e.x,y:r.y-e.y};o.x===0&&o.y===0||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=o.x,this.lastMoveEventInfo.point.y+=o.y):this.history.length>0&&(this.history[0].x-=o.x,this.history[0].y-=o.y),this.scrollPositions.set(t,r),we.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Bl(this.updatePoint)}}function _S(s,t){return t?{point:t(s.point)}:s}function uR(s,t){return{x:s.x-t.x,y:s.y-t.y}}function wS({point:s},t){return{point:s,delta:uR(s,QL(t)),offset:uR(s,VV(t)),velocity:zV(t,.1)}}function VV(s){return s[0]}function QL(s){return s[s.length-1]}function zV(s,t){if(s.length<2)return{x:0,y:0};let e=s.length-1,n=null;const r=QL(s);for(;e>=0&&(n=s[e],!(r.timestamp-n.timestamp>ha(t)));)e--;if(!n)return{x:0,y:0};n===s[0]&&s.length>2&&r.timestamp-n.timestamp>ha(t)*2&&(n=s[1]);const o=Hs(r.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const u={x:(r.x-n.x)/o,y:(r.y-n.y)/o};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function jV(s,{min:t,max:e},n){return t!==void 0&&s<t?s=n?ke(t,s,n.min):Math.max(s,t):e!==void 0&&s>e&&(s=n?ke(e,s,n.max):Math.min(s,e)),s}function hR(s,t,e){return{min:t!==void 0?s.min+t:void 0,max:e!==void 0?s.max+e-(s.max-s.min):void 0}}function GV(s,{top:t,left:e,bottom:n,right:r}){return{x:hR(s.x,e,r),y:hR(s.y,t,n)}}function dR(s,t){let e=t.min-s.min,n=t.max-s.max;return t.max-t.min<s.max-s.min&&([e,n]=[n,e]),{min:e,max:n}}function YV(s,t){return{x:dR(s.x,t.x),y:dR(s.y,t.y)}}function XV(s,t){let e=.5;const n=oi(s),r=oi(t);return r>n?e=tm(t.min,t.max-n,s.min):n>r&&(e=tm(s.min,s.max-r,t.min)),Xa(0,1,e)}function qV(s,t){const e={};return t.min!==void 0&&(e.min=t.min-s.min),t.max!==void 0&&(e.max=t.max-s.min),e}const dT=.35;function KV(s=dT){return s===!1?s=0:s===!0&&(s=dT),{x:fR(s,"left","right"),y:fR(s,"top","bottom")}}function fR(s,t,e){return{min:pR(s,t),max:pR(s,e)}}function pR(s,t){return typeof s=="number"?s:s[t]||0}const $V=new WeakMap;class WV{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=pn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:n}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=y=>{e&&this.snapToCursor(ly(y).point),this.stopAnimation()},u=(y,b)=>{const{drag:A,dragPropagation:S,onDragStart:w}=this.getProps();if(A&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=w3(A),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=b,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ea(D=>{let O=this.getAxisMotionValue(D).get()||0;if(Ya.test(O)){const{projection:M}=this.visualElement;if(M&&M.layout){const N=M.layout.layoutBox[D];N&&(O=oi(N)*(parseFloat(O)/100))}}this.originPoint[D]=O}),w&&we.update(()=>w(y,b),!1,!0),iT(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},h=(y,b)=>{this.latestPointerEvent=y,this.latestPanInfo=b;const{dragPropagation:A,dragDirectionLock:S,onDirectionLock:w,onDrag:x}=this.getProps();if(!A&&!this.openDragLock)return;const{offset:D}=b;if(S&&this.currentDirection===null){this.currentDirection=ZV(D),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",b.point,D),this.updateAxis("y",b.point,D),this.visualElement.render(),x&&we.update(()=>x(y,b),!1,!0)},f=(y,b)=>{this.latestPointerEvent=y,this.latestPanInfo=b,this.stop(y,b),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>{const{dragSnapToOrigin:y}=this.getProps();(y||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:m}=this.getProps();this.panSession=new WL(t,{onSessionStart:o,onStart:u,onMove:h,onSessionEnd:f,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:n,contextWindow:$L(this.visualElement),element:this.visualElement.current})}stop(t,e){const n=t||this.latestPointerEvent,r=e||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!r||!n)return;const{velocity:u}=r;this.startAnimation(u);const{onDragEnd:h}=this.getProps();h&&we.postRender(()=>h(n,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,e,n){const{drag:r}=this.getProps();if(!n||!B0(t,r,this.currentDirection))return;const o=this.getAxisMotionValue(t);let u=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(u=jV(u,this.constraints[t],this.elastic[t])),o.set(u)}resolveConstraints(){var o;const{dragConstraints:t,dragElastic:e}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,r=this.constraints;t&&vh(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=GV(n.layoutBox,t):this.constraints=!1,this.elastic=KV(e),r!==this.constraints&&!vh(t)&&n&&this.constraints&&!this.hasMutatedConstraints&&Ea(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=qV(n.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!vh(t))return!1;const n=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=tH(n,r.root,this.visualElement.getTransformPagePoint());let u=YV(r.layout.layoutBox,o);if(e){const h=e(Q3(u));this.hasMutatedConstraints=!!h,h&&(u=bL(h))}return u}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:r,dragTransition:o,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),f=this.constraints||{},p=Ea(m=>{if(!B0(m,e,this.currentDirection))return;let y=f&&f[m]||{};u&&(y={min:0,max:0});const b=r?200:1e6,A=r?40:1e7,S={type:"inertia",velocity:n?t[m]:0,bounceStiffness:b,bounceDamping:A,timeConstant:750,restDelta:1,restSpeed:10,...o,...y};return this.startAxisValueAnimation(m,S)});return Promise.all(p).then(h)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return iT(this.visualElement,t),n.start(f1(t,n,0,e,this.visualElement,!1))}stopAnimation(){Ea(t=>this.getAxisMotionValue(t).stop())}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),r=n[e];return r||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Ea(e=>{const{drag:n}=this.getProps();if(!B0(e,n,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(e);if(r&&r.layout){const{min:u,max:h}=r.layout.layoutBox[e],f=o.get()||0;o.set(t[e]-ke(u,h,.5)+f)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!vh(e)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Ea(u=>{const h=this.getAxisMotionValue(u);if(h&&this.constraints!==!1){const f=h.get();r[u]=XV({min:f,max:f},this.constraints[u])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.constraints=!1,this.resolveConstraints(),Ea(u=>{if(!B0(u,t,null))return;const h=this.getAxisMotionValue(u),{min:f,max:p}=this.constraints[u];h.set(ke(f,p,r[u]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;$V.set(this.visualElement,this);const t=this.visualElement.current,e=Zp(t,"pointerdown",p=>{const{drag:m,dragListener:y=!0}=this.getProps(),b=p.target,A=b!==t&&O3(b);m&&y&&!A&&this.start(p)});let n;const r=()=>{const{dragConstraints:p}=this.getProps();vh(p)&&p.current&&(this.constraints=this.resolveRefConstraints(),n||(n=QV(t,p.current,()=>this.scalePositionWithinConstraints())))},{projection:o}=this.visualElement,u=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),we.read(r);const h=sm(window,"resize",()=>this.scalePositionWithinConstraints()),f=o.addEventListener("didUpdate",(({delta:p,hasLayoutChanged:m})=>{this.isDragging&&m&&(Ea(y=>{const b=this.getAxisMotionValue(y);b&&(this.originPoint[y]+=p[y].translate,b.set(b.get()+p[y].translate))}),this.visualElement.render())}));return()=>{h(),e(),u(),f&&f(),n&&n()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:u=dT,dragMomentum:h=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:r,dragConstraints:o,dragElastic:u,dragMomentum:h}}}function mR(s){let t=!0;return()=>{if(t){t=!1;return}s()}}function QV(s,t,e){const n=SM(s,mR(e)),r=SM(t,mR(e));return()=>{n(),r()}}function B0(s,t,e){return(t===!0||t===s)&&(e===null||e===s)}function ZV(s,t=10){let e=null;return Math.abs(s.y)>t?e="y":Math.abs(s.x)>t&&(e="x"),e}class JV extends Hl{constructor(t){super(t),this.removeGroupControls=Vs,this.removeListeners=Vs,this.controls=new WV(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Vs}update(){const{dragControls:t}=this.node.getProps(),{dragControls:e}=this.node.prevProps||{};t!==e&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const xS=s=>(t,e)=>{s&&we.update(()=>s(t,e),!1,!0)};class t4 extends Hl{constructor(){super(...arguments),this.removePointerDownListener=Vs}onPointerDown(t){this.session=new WL(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:$L(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:xS(t),onStart:xS(e),onMove:xS(n),onEnd:(o,u)=>{delete this.session,r&&we.postRender(()=>r(o,u))}}}mount(){this.removePointerDownListener=Zp(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let CS=!1;class e4 extends st.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:r}=this.props,{projection:o}=t;o&&(e.group&&e.group.add(o),n&&n.register&&r&&n.register(o),CS&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),nb.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:r,isPresent:o}=this.props,{projection:u}=n;return u&&(u.isPresent=o,t.layoutDependency!==e&&u.setOptions({...u.options,layoutDependency:e}),CS=!0,r||t.layoutDependency!==e||e===void 0||t.isPresent!==o?u.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?u.promote():u.relegate()||we.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),y1.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:r}=t;CS=!0,r&&(r.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function ZL(s){const[t,e]=HL(),n=st.useContext(W_);return X.jsx(e4,{...s,layoutGroup:n,switchLayoutGroup:st.useContext(qL),isPresent:t,safeToRemove:e})}const n4={pan:{Feature:t4},drag:{Feature:JV,ProjectionNode:FL,MeasureLayout:ZL}};function gR(s,t,e){const{props:n}=s;s.animationState&&n.whileHover&&s.animationState.setActive("whileHover",e==="Start");const r="onHover"+e,o=n[r];o&&we.postRender(()=>o(t,ly(t)))}class i4 extends Hl{mount(){const{current:t}=this.node;t&&(this.unmount=C3(t,(e,n)=>(gR(this.node,n,"Start"),r=>gR(this.node,r,"End"))))}unmount(){}}class s4 extends Hl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ay(sm(this.node.current,"focus",()=>this.onFocus()),sm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function yR(s,t,e){const{props:n}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&n.whileTap&&s.animationState.setActive("whileTap",e==="Start");const r="onTap"+(e==="End"?"":e),o=n[r];o&&we.postRender(()=>o(t,ly(t)))}class a4 extends Hl{mount(){const{current:t}=this.node;if(!t)return;const{globalTapTarget:e,propagate:n}=this.node.props;this.unmount=L3(t,(r,o)=>(yR(this.node,o,"Start"),(u,{success:h})=>yR(this.node,u,h?"End":"Cancel")),{useGlobalTarget:e,stopPropagation:(n==null?void 0:n.tap)===!1})}unmount(){}}const fT=new WeakMap,DS=new WeakMap,r4=s=>{const t=fT.get(s.target);t&&t(s)},o4=s=>{s.forEach(r4)};function l4({root:s,...t}){const e=s||document;DS.has(e)||DS.set(e,{});const n=DS.get(e),r=JSON.stringify(t);return n[r]||(n[r]=new IntersectionObserver(o4,{root:s,...t})),n[r]}function c4(s,t,e){const n=l4(t);return fT.set(s,e),n.observe(s),()=>{fT.delete(s),n.unobserve(s)}}const u4={some:0,all:1};class h4 extends Hl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:r="some",once:o}=t,u={root:e?e.current:void 0,rootMargin:n,threshold:typeof r=="number"?r:u4[r]},h=f=>{const{isIntersecting:p}=f;if(this.isInView===p||(this.isInView=p,o&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:m,onViewportLeave:y}=this.node.getProps(),b=p?m:y;b&&b(f)};return c4(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(d4(t,e))&&this.startObserver()}unmount(){}}function d4({viewport:s={}},{viewport:t={}}={}){return e=>s[e]!==t[e]}const f4={inView:{Feature:h4},tap:{Feature:a4},focus:{Feature:s4},hover:{Feature:i4}},p4={layout:{ProjectionNode:FL,MeasureLayout:ZL}},m4={...UV,...f4,...n4,...p4},Bo=LV(m4,IV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),y4=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase()),bR=s=>{const t=y4(s);return t.charAt(0).toUpperCase()+t.slice(1)},JL=(...s)=>s.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim(),b4=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var v4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=st.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:r="",children:o,iconNode:u,...h},f)=>st.createElement("svg",{ref:f,...v4,width:t,height:t,stroke:s,strokeWidth:n?Number(e)*24/Number(t):e,className:JL("lucide",r),...!o&&!b4(h)&&{"aria-hidden":"true"},...h},[...u.map(([p,m])=>st.createElement(p,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=(s,t)=>{const e=st.forwardRef(({className:n,...r},o)=>st.createElement(A4,{ref:o,iconNode:t,className:JL(`lucide-${g4(bR(s))}`,`lucide-${s}`,n),...r}));return e.displayName=bR(s),e};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],S4=Oi("book-open",E4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],vR=Oi("brain-circuit",T4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],AR=Oi("chevron-right",_4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],x4=Oi("circle-alert",w4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],MS=Oi("circle-check",C4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ER=Oi("circle-x",D4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M11 14h10",key:"1w8e9d"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v1.344",key:"1e62lh"}],["path",{d:"m17 18 4-4-4-4",key:"z2g111"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 1.793-1.113",key:"bjbb7m"}],["rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",key:"ublpy"}]],R4=Oi("clipboard-paste",M4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],N4=Oi("file-text",O4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],I4=Oi("history",L4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],B4=Oi("rotate-ccw",P4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],U4=Oi("skip-forward",k4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],RS=Oi("sparkles",F4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],V4=Oi("trophy",H4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],j4=Oi("upload",z4);var vp={exports:{}},OS={},NS,SR;function G4(){if(SR)return NS;SR=1;function s(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return NS=s,s.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},s.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},s.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var n=this._timeouts.shift();if(n===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},n),this._options.unref&&this._timer.unref(),!0},s.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},s.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)},s.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)},s.prototype.start=s.prototype.try,s.prototype.errors=function(){return this._errors},s.prototype.attempts=function(){return this._attempts},s.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,n=0,r=0;r<this._errors.length;r++){var o=this._errors[r],u=o.message,h=(t[u]||0)+1;t[u]=h,h>=n&&(e=o,n=h)}return e},NS}var TR;function Y4(){return TR||(TR=1,(function(s){var t=G4();s.operation=function(e){var n=s.timeouts(e);return new t(n,{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},s.timeouts=function(e){if(e instanceof Array)return[].concat(e);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var r in e)n[r]=e[r];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var o=[],u=0;u<n.retries;u++)o.push(this.createTimeout(u,n));return e&&e.forever&&!o.length&&o.push(this.createTimeout(u,n)),o.sort(function(h,f){return h-f}),o},s.createTimeout=function(e,n){var r=n.randomize?Math.random()+1:1,o=Math.round(r*Math.max(n.minTimeout,1)*Math.pow(n.factor,e));return o=Math.min(o,n.maxTimeout),o},s.wrap=function(e,n,r){if(n instanceof Array&&(r=n,n=null),!r){r=[];for(var o in e)typeof e[o]=="function"&&r.push(o)}for(var u=0;u<r.length;u++){var h=r[u],f=e[h];e[h]=(function(m){var y=s.operation(n),b=Array.prototype.slice.call(arguments,1),A=b.pop();b.push(function(S){y.retry(S)||(S&&(arguments[0]=y.mainError()),A.apply(this,arguments))}),y.attempt(function(){m.apply(e,b)})}).bind(e,f),e[h].options=n}}})(OS)),OS}var LS,_R;function X4(){return _R||(_R=1,LS=Y4()),LS}var wR;function q4(){if(wR)return vp.exports;wR=1;const s=X4(),t=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class e extends Error{constructor(h){super(),h instanceof Error?(this.originalError=h,{message:h}=h):(this.originalError=new Error(h),this.originalError.stack=this.stack),this.name="AbortError",this.message=h}}const n=(u,h,f)=>{const p=f.retries-(h-1);return u.attemptNumber=h,u.retriesLeft=p,u},r=u=>t.includes(u),o=(u,h)=>new Promise((f,p)=>{h={onFailedAttempt:()=>{},retries:10,...h};const m=s.operation(h);m.attempt(async y=>{try{f(await u(y))}catch(b){if(!(b instanceof Error)){p(new TypeError(`Non-error was thrown: "${b}". You should only throw errors.`));return}if(b instanceof e)m.stop(),p(b.originalError);else if(b instanceof TypeError&&!r(b.message))m.stop(),p(b);else{n(b,y,h);try{await h.onFailedAttempt(b)}catch(A){p(A);return}m.retry(b)||p(m.mainError())}}})});return vp.exports=o,vp.exports.default=o,vp.exports.AbortError=e,vp.exports}q4();var K4={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var xR;(function(s){s.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",s.OUTCOME_OK="OUTCOME_OK",s.OUTCOME_FAILED="OUTCOME_FAILED",s.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(xR||(xR={}));var CR;(function(s){s.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",s.PYTHON="PYTHON"})(CR||(CR={}));var DR;(function(s){s.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",s.SILENT="SILENT",s.WHEN_IDLE="WHEN_IDLE",s.INTERRUPT="INTERRUPT"})(DR||(DR={}));var yr;(function(s){s.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",s.STRING="STRING",s.NUMBER="NUMBER",s.INTEGER="INTEGER",s.BOOLEAN="BOOLEAN",s.ARRAY="ARRAY",s.OBJECT="OBJECT",s.NULL="NULL"})(yr||(yr={}));var MR;(function(s){s.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",s.SIMPLE_SEARCH="SIMPLE_SEARCH",s.ELASTIC_SEARCH="ELASTIC_SEARCH"})(MR||(MR={}));var RR;(function(s){s.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",s.NO_AUTH="NO_AUTH",s.API_KEY_AUTH="API_KEY_AUTH",s.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",s.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",s.OAUTH="OAUTH",s.OIDC_AUTH="OIDC_AUTH"})(RR||(RR={}));var OR;(function(s){s.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",s.HTTP_IN_QUERY="HTTP_IN_QUERY",s.HTTP_IN_HEADER="HTTP_IN_HEADER",s.HTTP_IN_PATH="HTTP_IN_PATH",s.HTTP_IN_BODY="HTTP_IN_BODY",s.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(OR||(OR={}));var NR;(function(s){s.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",s.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",s.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",s.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",s.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",s.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",s.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(NR||(NR={}));var LR;(function(s){s.UNSPECIFIED="UNSPECIFIED",s.BLOCKING="BLOCKING",s.NON_BLOCKING="NON_BLOCKING"})(LR||(LR={}));var IR;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.MODE_DYNAMIC="MODE_DYNAMIC"})(IR||(IR={}));var PR;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.AUTO="AUTO",s.ANY="ANY",s.NONE="NONE",s.VALIDATED="VALIDATED"})(PR||(PR={}));var BR;(function(s){s.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",s.LOW="LOW",s.MEDIUM="MEDIUM",s.HIGH="HIGH",s.MINIMAL="MINIMAL"})(BR||(BR={}));var kR;(function(s){s.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",s.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",s.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",s.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",s.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",s.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",s.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",s.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",s.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",s.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",s.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(kR||(kR={}));var UR;(function(s){s.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",s.SEVERITY="SEVERITY",s.PROBABILITY="PROBABILITY"})(UR||(UR={}));var FR;(function(s){s.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",s.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",s.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",s.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",s.BLOCK_NONE="BLOCK_NONE",s.OFF="OFF"})(FR||(FR={}));var HR;(function(s){s.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",s.STOP="STOP",s.MAX_TOKENS="MAX_TOKENS",s.SAFETY="SAFETY",s.RECITATION="RECITATION",s.LANGUAGE="LANGUAGE",s.OTHER="OTHER",s.BLOCKLIST="BLOCKLIST",s.PROHIBITED_CONTENT="PROHIBITED_CONTENT",s.SPII="SPII",s.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",s.IMAGE_SAFETY="IMAGE_SAFETY",s.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",s.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",s.NO_IMAGE="NO_IMAGE",s.IMAGE_RECITATION="IMAGE_RECITATION",s.IMAGE_OTHER="IMAGE_OTHER"})(HR||(HR={}));var VR;(function(s){s.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",s.NEGLIGIBLE="NEGLIGIBLE",s.LOW="LOW",s.MEDIUM="MEDIUM",s.HIGH="HIGH"})(VR||(VR={}));var zR;(function(s){s.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",s.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",s.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",s.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",s.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(zR||(zR={}));var jR;(function(s){s.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",s.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",s.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",s.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",s.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(jR||(jR={}));var GR;(function(s){s.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",s.SAFETY="SAFETY",s.OTHER="OTHER",s.BLOCKLIST="BLOCKLIST",s.PROHIBITED_CONTENT="PROHIBITED_CONTENT",s.IMAGE_SAFETY="IMAGE_SAFETY",s.MODEL_ARMOR="MODEL_ARMOR",s.JAILBREAK="JAILBREAK"})(GR||(GR={}));var YR;(function(s){s.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",s.ON_DEMAND="ON_DEMAND",s.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(YR||(YR={}));var XR;(function(s){s.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",s.TEXT="TEXT",s.IMAGE="IMAGE",s.AUDIO="AUDIO"})(XR||(XR={}));var qR;(function(s){s.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",s.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",s.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",s.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(qR||(qR={}));var KR;(function(s){s.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",s.TUNING_MODE_FULL="TUNING_MODE_FULL",s.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(KR||(KR={}));var $R;(function(s){s.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",s.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",s.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",s.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",s.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",s.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",s.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})($R||($R={}));var WR;(function(s){s.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",s.JOB_STATE_QUEUED="JOB_STATE_QUEUED",s.JOB_STATE_PENDING="JOB_STATE_PENDING",s.JOB_STATE_RUNNING="JOB_STATE_RUNNING",s.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",s.JOB_STATE_FAILED="JOB_STATE_FAILED",s.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",s.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",s.JOB_STATE_PAUSED="JOB_STATE_PAUSED",s.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",s.JOB_STATE_UPDATING="JOB_STATE_UPDATING",s.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(WR||(WR={}));var QR;(function(s){s.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",s.TUNING_TASK_I2V="TUNING_TASK_I2V",s.TUNING_TASK_T2V="TUNING_TASK_T2V",s.TUNING_TASK_R2V="TUNING_TASK_R2V"})(QR||(QR={}));var ZR;(function(s){s.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",s.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",s.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",s.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",s.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(ZR||(ZR={}));var JR;(function(s){s.COLLECTION="COLLECTION"})(JR||(JR={}));var tO;(function(s){s.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",s.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",s.BALANCED="BALANCED",s.PRIORITIZE_COST="PRIORITIZE_COST"})(tO||(tO={}));var eO;(function(s){s.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",s.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(eO||(eO={}));var nO;(function(s){s.PREDICT="PREDICT",s.EMBED_CONTENT="EMBED_CONTENT"})(nO||(nO={}));var iO;(function(s){s.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",s.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",s.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",s.BLOCK_NONE="BLOCK_NONE"})(iO||(iO={}));var sO;(function(s){s.DONT_ALLOW="DONT_ALLOW",s.ALLOW_ADULT="ALLOW_ADULT",s.ALLOW_ALL="ALLOW_ALL"})(sO||(sO={}));var aO;(function(s){s.auto="auto",s.en="en",s.ja="ja",s.ko="ko",s.hi="hi",s.zh="zh",s.pt="pt",s.es="es"})(aO||(aO={}));var rO;(function(s){s.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",s.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",s.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",s.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",s.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(rO||(rO={}));var oO;(function(s){s.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",s.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",s.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",s.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(oO||(oO={}));var lO;(function(s){s.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",s.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",s.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",s.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(lO||(lO={}));var cO;(function(s){s.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",s.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",s.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",s.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",s.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",s.EDIT_MODE_STYLE="EDIT_MODE_STYLE",s.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",s.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(cO||(cO={}));var uO;(function(s){s.FOREGROUND="FOREGROUND",s.BACKGROUND="BACKGROUND",s.PROMPT="PROMPT",s.SEMANTIC="SEMANTIC",s.INTERACTIVE="INTERACTIVE"})(uO||(uO={}));var hO;(function(s){s.ASSET="ASSET",s.STYLE="STYLE"})(hO||(hO={}));var dO;(function(s){s.INSERT="INSERT",s.REMOVE="REMOVE",s.REMOVE_STATIC="REMOVE_STATIC",s.OUTPAINT="OUTPAINT"})(dO||(dO={}));var fO;(function(s){s.OPTIMIZED="OPTIMIZED",s.LOSSLESS="LOSSLESS"})(fO||(fO={}));var pO;(function(s){s.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",s.PREFERENCE_TUNING="PREFERENCE_TUNING",s.DISTILLATION="DISTILLATION"})(pO||(pO={}));var mO;(function(s){s.STATE_UNSPECIFIED="STATE_UNSPECIFIED",s.STATE_PENDING="STATE_PENDING",s.STATE_ACTIVE="STATE_ACTIVE",s.STATE_FAILED="STATE_FAILED"})(mO||(mO={}));var gO;(function(s){s.STATE_UNSPECIFIED="STATE_UNSPECIFIED",s.PROCESSING="PROCESSING",s.ACTIVE="ACTIVE",s.FAILED="FAILED"})(gO||(gO={}));var yO;(function(s){s.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",s.UPLOADED="UPLOADED",s.GENERATED="GENERATED",s.REGISTERED="REGISTERED"})(yO||(yO={}));var bO;(function(s){s.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",s.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",s.RESPONSE_REJECTED="RESPONSE_REJECTED",s.NEED_MORE_INPUT="NEED_MORE_INPUT"})(bO||(bO={}));var vO;(function(s){s.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",s.TEXT="TEXT",s.IMAGE="IMAGE",s.VIDEO="VIDEO",s.AUDIO="AUDIO",s.DOCUMENT="DOCUMENT"})(vO||(vO={}));var AO;(function(s){s.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",s.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",s.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(AO||(AO={}));var EO;(function(s){s.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",s.ACTIVITY_START="ACTIVITY_START",s.ACTIVITY_END="ACTIVITY_END"})(EO||(EO={}));var SO;(function(s){s.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",s.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",s.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(SO||(SO={}));var TO;(function(s){s.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",s.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",s.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(TO||(TO={}));var _O;(function(s){s.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",s.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",s.NO_INTERRUPTION="NO_INTERRUPTION"})(_O||(_O={}));var wO;(function(s){s.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",s.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",s.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(wO||(wO={}));var xO;(function(s){s.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",s.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",s.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",s.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",s.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",s.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",s.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",s.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",s.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",s.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",s.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",s.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",s.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(xO||(xO={}));var CO;(function(s){s.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",s.QUALITY="QUALITY",s.DIVERSITY="DIVERSITY",s.VOCALIZATION="VOCALIZATION"})(CO||(CO={}));var DO;(function(s){s.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",s.PLAY="PLAY",s.PAUSE="PAUSE",s.STOP="STOP",s.RESET_CONTEXT="RESET_CONTEXT"})(DO||(DO={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var MO;(function(s){s.PAGED_ITEM_BATCH_JOBS="batchJobs",s.PAGED_ITEM_MODELS="models",s.PAGED_ITEM_TUNING_JOBS="tuningJobs",s.PAGED_ITEM_FILES="files",s.PAGED_ITEM_CACHED_CONTENTS="cachedContents",s.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",s.PAGED_ITEM_DOCUMENTS="documents"})(MO||(MO={}));function Xb(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(e[n[r]]=s[n[r]]);return e}function RO(s){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&s[t],n=0;if(e)return e.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&n>=s.length&&(s=void 0),{value:s&&s[n++],done:!s}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Be(s){return this instanceof Be?(this.v=s,this):new Be(s)}function Jp(s,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(s,t||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(A){return function(S){return Promise.resolve(S).then(A,y)}}function h(A,S){n[A]&&(r[A]=function(w){return new Promise(function(x,D){o.push([A,w,x,D])>1||f(A,w)})},S&&(r[A]=S(r[A])))}function f(A,S){try{p(n[A](S))}catch(w){b(o[0][3],w)}}function p(A){A.value instanceof Be?Promise.resolve(A.value.v).then(m,y):b(o[0][2],A)}function m(A){f("next",A)}function y(A){f("throw",A)}function b(A,S){A(S),o.shift(),o.length&&f(o[0][0],o[0][1])}}function zh(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=s[Symbol.asyncIterator],e;return t?t.call(s):(s=typeof RO=="function"?RO(s):s[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(o){e[o]=s[o]&&function(u){return new Promise(function(h,f){u=s[o](u),r(h,f,u.done,u.value)})}}function r(o,u,h,f){Promise.resolve(f).then(function(p){o({value:p,done:h})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let tI=function(){const{crypto:s}=globalThis;if(s!=null&&s.randomUUID)return tI=s.randomUUID.bind(s),s.randomUUID();const t=new Uint8Array(1),e=s?()=>s.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^e()&15>>+n/4).toString(16))};const $4=()=>tI();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pT(s){return typeof s=="object"&&s!==null&&("name"in s&&s.name==="AbortError"||"message"in s&&String(s.message).includes("FetchRequestCanceledException"))}const mT=s=>{if(s instanceof Error)return s;if(typeof s=="object"&&s!==null){try{if(Object.prototype.toString.call(s)==="[object Error]"){const t=new Error(s.message,s.cause?{cause:s.cause}:{});return s.stack&&(t.stack=s.stack),s.cause&&!t.cause&&(t.cause=s.cause),s.name&&(t.name=s.name),t}}catch{}try{return new Error(JSON.stringify(s))}catch{}}return new Error(s)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class js extends Error{}class ui extends js{constructor(t,e,n,r){super(`${ui.makeMessage(t,e,n)}`),this.status=t,this.headers=r,this.error=e}static makeMessage(t,e,n){const r=e!=null&&e.message?typeof e.message=="string"?e.message:JSON.stringify(e.message):e?JSON.stringify(e):n;return t&&r?`${t} ${r}`:t?`${t} status code (no body)`:r||"(no status code or body)"}static generate(t,e,n,r){if(!t||!r)return new Rv({message:n,cause:mT(e)});const o=e;return t===400?new nI(t,o,n,r):t===401?new iI(t,o,n,r):t===403?new sI(t,o,n,r):t===404?new aI(t,o,n,r):t===409?new rI(t,o,n,r):t===422?new oI(t,o,n,r):t===429?new lI(t,o,n,r):t>=500?new cI(t,o,n,r):new ui(t,o,n,r)}}class gT extends ui{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Rv extends ui{constructor({message:t,cause:e}){super(void 0,void 0,t||"Connection error.",void 0),e&&(this.cause=e)}}class eI extends Rv{constructor({message:t}={}){super({message:t??"Request timed out."})}}class nI extends ui{}class iI extends ui{}class sI extends ui{}class aI extends ui{}class rI extends ui{}class oI extends ui{}class lI extends ui{}class cI extends ui{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const W4=/^[a-z][a-z0-9+.-]*:/i,Q4=s=>W4.test(s);let yT=s=>(yT=Array.isArray,yT(s));const Z4=yT;let J4=Z4;const OO=J4;function tz(s){if(!s)return!0;for(const t in s)return!1;return!0}function ez(s,t){return Object.prototype.hasOwnProperty.call(s,t)}const nz=(s,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new js(`${s} must be an integer`);if(t<0)throw new js(`${s} must be a positive integer`);return t},iz=s=>{try{return JSON.parse(s)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sz=s=>new Promise(t=>setTimeout(t,s));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ah="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function az(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const rz=()=>{var s,t,e,n,r;const o=az();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ah,"X-Stainless-OS":LO(Deno.build.os),"X-Stainless-Arch":NO(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(s=Deno.version)===null||s===void 0?void 0:s.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ah,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ah,"X-Stainless-OS":LO((e=globalThis.process.platform)!==null&&e!==void 0?e:"unknown"),"X-Stainless-Arch":NO((n=globalThis.process.arch)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=oz();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ah,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ah,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function oz(){if(typeof navigator>"u"||!navigator)return null;const s=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:e}of s){const n=e.exec(navigator.userAgent);if(n){const r=n[1]||0,o=n[2]||0,u=n[3]||0;return{browser:t,version:`${r}.${o}.${u}`}}}return null}const NO=s=>s==="x32"?"x32":s==="x86_64"||s==="x64"?"x64":s==="arm"?"arm":s==="aarch64"||s==="arm64"?"arm64":s?`other:${s}`:"unknown",LO=s=>(s=s.toLowerCase(),s.includes("ios")?"iOS":s==="android"?"Android":s==="darwin"?"MacOS":s==="win32"?"Windows":s==="freebsd"?"FreeBSD":s==="openbsd"?"OpenBSD":s==="linux"?"Linux":s?`Other:${s}`:"Unknown");let k0;const lz=()=>k0??(k0=rz());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cz(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function uI(...s){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...s)}function uz(s){let t=Symbol.asyncIterator in s?s[Symbol.asyncIterator]():s[Symbol.iterator]();return uI({start(){},async pull(e){const{done:n,value:r}=await t.next();n?e.close():e.enqueue(r)},async cancel(){var e;await((e=t.return)===null||e===void 0?void 0:e.call(t))}})}function hI(s){if(s[Symbol.asyncIterator])return s;const t=s.getReader();return{async next(){try{const e=await t.read();return e!=null&&e.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function hz(s){var t,e;if(s===null||typeof s!="object")return;if(s[Symbol.asyncIterator]){await((e=(t=s[Symbol.asyncIterator]()).return)===null||e===void 0?void 0:e.call(t));return}const n=s.getReader(),r=n.cancel();n.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dz=({headers:s,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dI=()=>{var s;if(typeof File>"u"){const{process:t}=globalThis,e=typeof((s=t==null?void 0:t.versions)===null||s===void 0?void 0:s.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function IS(s,t,e){return dI(),new File(s,t??"unknown_file",e)}function fz(s){return(typeof s=="object"&&s!==null&&("name"in s&&s.name&&String(s.name)||"url"in s&&s.url&&String(s.url)||"filename"in s&&s.filename&&String(s.filename)||"path"in s&&s.path&&String(s.path))||"").split(/[\\/]/).pop()||void 0}const pz=s=>s!=null&&typeof s=="object"&&typeof s[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fI=s=>s!=null&&typeof s=="object"&&typeof s.size=="number"&&typeof s.type=="string"&&typeof s.text=="function"&&typeof s.slice=="function"&&typeof s.arrayBuffer=="function",mz=s=>s!=null&&typeof s=="object"&&typeof s.name=="string"&&typeof s.lastModified=="number"&&fI(s),gz=s=>s!=null&&typeof s=="object"&&typeof s.url=="string"&&typeof s.blob=="function";async function yz(s,t,e){if(dI(),s=await s,mz(s))return s instanceof File?s:IS([await s.arrayBuffer()],s.name);if(gz(s)){const r=await s.blob();return t||(t=new URL(s.url).pathname.split(/[\\/]/).pop()),IS(await bT(r),t,e)}const n=await bT(s);if(t||(t=fz(s)),!(e!=null&&e.type)){const r=n.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof r=="string"&&(e=Object.assign(Object.assign({},e),{type:r}))}return IS(n,t,e)}async function bT(s){var t,e,n,r,o;let u=[];if(typeof s=="string"||ArrayBuffer.isView(s)||s instanceof ArrayBuffer)u.push(s);else if(fI(s))u.push(s instanceof Blob?s:await s.arrayBuffer());else if(pz(s))try{for(var h=!0,f=zh(s),p;p=await f.next(),t=p.done,!t;h=!0){r=p.value,h=!1;const m=r;u.push(...await bT(m))}}catch(m){e={error:m}}finally{try{!h&&!t&&(n=f.return)&&await n.call(f)}finally{if(e)throw e.error}}else{const m=(o=s==null?void 0:s.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof s}${m?`; constructor: ${m}`:""}${bz(s)}`)}return u}function bz(s){return typeof s!="object"||s===null?"":`; props: [${Object.getOwnPropertyNames(s).map(e=>`"${e}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pI{constructor(t){this._client=t}}pI._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mI(s){return s.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const IO=Object.freeze(Object.create(null)),vz=(s=mI)=>(function(e,...n){if(e.length===1)return e[0];let r=!1;const o=[],u=e.reduce((m,y,b)=>{var A,S,w;/[?#]/.test(y)&&(r=!0);const x=n[b];let D=(r?encodeURIComponent:s)(""+x);return b!==n.length&&(x==null||typeof x=="object"&&x.toString===((w=Object.getPrototypeOf((S=Object.getPrototypeOf((A=x.hasOwnProperty)!==null&&A!==void 0?A:IO))!==null&&S!==void 0?S:IO))===null||w===void 0?void 0:w.toString))&&(D=x+"",o.push({start:m.length+y.length,length:D.length,error:`Value of type ${Object.prototype.toString.call(x).slice(8,-1)} is not a valid path parameter`})),m+y+(b===n.length?"":D)},""),h=u.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=f.exec(h))!==null;)o.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(o.sort((m,y)=>m.start-y.start),o.length>0){let m=0;const y=o.reduce((b,A)=>{const S=" ".repeat(A.start-m),w="^".repeat(A.length);return m=A.start+A.length,b+S+w},"");throw new js(`Path parameters result in path with invalid segments:
${o.map(b=>b.error).join(`
`)}
${u}
${y}`)}return u}),U0=vz(mI);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gI extends pI{create(t,e){var n;const{api_version:r=this._client.apiVersion}=t,o=Xb(t,["api_version"]);if("model"in o&&"agent_config"in o)throw new js("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new js("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(U0`/${r}/interactions`,Object.assign(Object.assign({body:o},e),{stream:(n=t.stream)!==null&&n!==void 0?n:!1}))}delete(t,e={},n){const{api_version:r=this._client.apiVersion}=e??{};return this._client.delete(U0`/${r}/interactions/${t}`,n)}cancel(t,e={},n){const{api_version:r=this._client.apiVersion}=e??{};return this._client.post(U0`/${r}/interactions/${t}/cancel`,n)}get(t,e={},n){var r;const o=e??{},{api_version:u=this._client.apiVersion}=o,h=Xb(o,["api_version"]);return this._client.get(U0`/${u}/interactions/${t}`,Object.assign(Object.assign({query:h},n),{stream:(r=e==null?void 0:e.stream)!==null&&r!==void 0?r:!1}))}}gI._key=Object.freeze(["interactions"]);class yI extends gI{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Az(s){let t=0;for(const r of s)t+=r.length;const e=new Uint8Array(t);let n=0;for(const r of s)e.set(r,n),n+=r.length;return e}let F0;function C1(s){let t;return(F0??(t=new globalThis.TextEncoder,F0=t.encode.bind(t)))(s)}let H0;function PO(s){let t;return(H0??(t=new globalThis.TextDecoder,H0=t.decode.bind(t)))(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ov{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const e=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?C1(t):t;this.buffer=Az([this.buffer,e]);const n=[];let r;for(;(r=Ez(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){n.push(PO(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=PO(this.buffer.subarray(0,o));n.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return n}flush(){return this.buffer.length?this.decode(`
`):[]}}Ov.NEWLINE_CHARS=new Set([`
`,"\r"]);Ov.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Ez(s,t){for(let r=t??0;r<s.length;r++){if(s[r]===10)return{preceding:r,index:r+1,carriage:!1};if(s[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function Sz(s){for(let n=0;n<s.length-1;n++){if(s[n]===10&&s[n+1]===10||s[n]===13&&s[n+1]===13)return n+2;if(s[n]===13&&s[n+1]===10&&n+3<s.length&&s[n+2]===13&&s[n+3]===10)return n+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qb={off:0,error:200,warn:300,info:400,debug:500},BO=(s,t,e)=>{if(s){if(ez(qb,s))return s;si(e).warn(`${t} was set to ${JSON.stringify(s)}, expected one of ${JSON.stringify(Object.keys(qb))}`)}};function Cp(){}function V0(s,t,e){return!t||qb[s]>qb[e]?Cp:t[s].bind(t)}const Tz={error:Cp,warn:Cp,info:Cp,debug:Cp};let kO=new WeakMap;function si(s){var t;const e=s.logger,n=(t=s.logLevel)!==null&&t!==void 0?t:"off";if(!e)return Tz;const r=kO.get(e);if(r&&r[0]===n)return r[1];const o={error:V0("error",e,n),warn:V0("warn",e,n),info:V0("info",e,n),debug:V0("debug",e,n)};return kO.set(e,[n,o]),o}const oc=s=>(s.options&&(s.options=Object.assign({},s.options),delete s.options.headers),s.headers&&(s.headers=Object.fromEntries((s.headers instanceof Headers?[...s.headers]:Object.entries(s.headers)).map(([t,e])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":e]))),"retryOfRequestLogID"in s&&(s.retryOfRequestLogID&&(s.retryOf=s.retryOfRequestLogID),delete s.retryOfRequestLogID),s);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ih{constructor(t,e,n){this.iterator=t,this.controller=e,this.client=n}static fromSSEResponse(t,e,n){let r=!1;const o=n?si(n):console;function u(){return Jp(this,arguments,function*(){var f,p,m,y;if(r)throw new js("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let b=!1;try{try{for(var A=!0,S=zh(_z(t,e)),w;w=yield Be(S.next()),f=w.done,!f;A=!0){y=w.value,A=!1;const x=y;if(!b)if(x.data.startsWith("[DONE]")){b=!0;continue}else try{yield yield Be(JSON.parse(x.data))}catch(D){throw o.error("Could not parse message into JSON:",x.data),o.error("From chunk:",x.raw),D}}}catch(x){p={error:x}}finally{try{!A&&!f&&(m=S.return)&&(yield Be(m.call(S)))}finally{if(p)throw p.error}}b=!0}catch(x){if(pT(x))return yield Be(void 0);throw x}finally{b||e.abort()}})}return new Ih(u,e,n)}static fromReadableStream(t,e,n){let r=!1;function o(){return Jp(this,arguments,function*(){var f,p,m,y;const b=new Ov,A=hI(t);try{for(var S=!0,w=zh(A),x;x=yield Be(w.next()),f=x.done,!f;S=!0){y=x.value,S=!1;const D=y;for(const O of b.decode(D))yield yield Be(O)}}catch(D){p={error:D}}finally{try{!S&&!f&&(m=w.return)&&(yield Be(m.call(w)))}finally{if(p)throw p.error}}for(const D of b.flush())yield yield Be(D)})}function u(){return Jp(this,arguments,function*(){var f,p,m,y;if(r)throw new js("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let b=!1;try{try{for(var A=!0,S=zh(o()),w;w=yield Be(S.next()),f=w.done,!f;A=!0){y=w.value,A=!1;const x=y;b||x&&(yield yield Be(JSON.parse(x)))}}catch(x){p={error:x}}finally{try{!A&&!f&&(m=S.return)&&(yield Be(m.call(S)))}finally{if(p)throw p.error}}b=!0}catch(x){if(pT(x))return yield Be(void 0);throw x}finally{b||e.abort()}})}return new Ih(u,e,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],e=[],n=this.iterator(),r=o=>({next:()=>{if(o.length===0){const u=n.next();t.push(u),e.push(u)}return o.shift()}});return[new Ih(()=>r(t),this.controller,this.client),new Ih(()=>r(e),this.controller,this.client)]}toReadableStream(){const t=this;let e;return uI({async start(){e=t[Symbol.asyncIterator]()},async pull(n){try{const{value:r,done:o}=await e.next();if(o)return n.close();const u=C1(JSON.stringify(r)+`
`);n.enqueue(u)}catch(r){n.error(r)}},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}}function _z(s,t){return Jp(this,arguments,function*(){var n,r,o,u;if(!s.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new js("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new js("Attempted to iterate over a response with no body");const h=new xz,f=new Ov,p=hI(s.body);try{for(var m=!0,y=zh(wz(p)),b;b=yield Be(y.next()),n=b.done,!n;m=!0){u=b.value,m=!1;const A=u;for(const S of f.decode(A)){const w=h.decode(S);w&&(yield yield Be(w))}}}catch(A){r={error:A}}finally{try{!m&&!n&&(o=y.return)&&(yield Be(o.call(y)))}finally{if(r)throw r.error}}for(const A of f.flush()){const S=h.decode(A);S&&(yield yield Be(S))}})}function wz(s){return Jp(this,arguments,function*(){var e,n,r,o;let u=new Uint8Array;try{for(var h=!0,f=zh(s),p;p=yield Be(f.next()),e=p.done,!e;h=!0){o=p.value,h=!1;const m=o;if(m==null)continue;const y=m instanceof ArrayBuffer?new Uint8Array(m):typeof m=="string"?C1(m):m;let b=new Uint8Array(u.length+y.length);b.set(u),b.set(y,u.length),u=b;let A;for(;(A=Sz(u))!==-1;)yield yield Be(u.slice(0,A)),u=u.slice(A)}}catch(m){n={error:m}}finally{try{!h&&!e&&(r=f.return)&&(yield Be(r.call(f)))}finally{if(n)throw n.error}}u.length>0&&(yield yield Be(u))})}class xz{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(t),t.startsWith(":"))return null;let[e,n,r]=Cz(t,":");return r.startsWith(" ")&&(r=r.substring(1)),e==="event"?this.event=r:e==="data"&&this.data.push(r),null}}function Cz(s,t){const e=s.indexOf(t);return e!==-1?[s.substring(0,e),t,s.substring(e+t.length)]:[s,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Dz(s,t){const{response:e,requestLogID:n,retryOfRequestLogID:r,startTime:o}=t,u=await(async()=>{var h;if(t.options.stream)return si(s).debug("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller,s):Ih.fromSSEResponse(e,t.controller,s);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const f=e.headers.get("content-type"),p=(h=f==null?void 0:f.split(";")[0])===null||h===void 0?void 0:h.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?e.headers.get("content-length")==="0"?void 0:await e.json():await e.text()})();return si(s).debug(`[${n}] response parsed`,oc({retryOfRequestLogID:r,url:e.url,status:e.status,body:u,durationMs:Date.now()-o})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D1 extends Promise{constructor(t,e,n=Dz){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n,this.client=t}_thenUnwrap(t){return new D1(this.client,this.responsePromise,async(e,n)=>t(await this.parseResponse(e,n),n))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,e]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:e}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,e){return this.parse().then(t,e)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bI=Symbol("brand.privateNullableHeaders");function*Mz(s){if(!s)return;if(bI in s){const{values:n,nulls:r}=s;yield*n.entries();for(const o of r)yield[o,null];return}let t=!1,e;s instanceof Headers?e=s.entries():OO(s)?e=s:(t=!0,e=Object.entries(s??{}));for(let n of e){const r=n[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const o=OO(n[1])?n[1]:[n[1]];let u=!1;for(const h of o)h!==void 0&&(t&&!u&&(u=!0,yield[r,null]),yield[r,h])}}const Ap=s=>{const t=new Headers,e=new Set;for(const n of s){const r=new Set;for(const[o,u]of Mz(n)){const h=o.toLowerCase();r.has(h)||(t.delete(o),r.add(h)),u===null?(t.delete(o),e.add(h)):(t.append(o,u),e.delete(h))}}return{[bI]:!0,values:t,nulls:e}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PS=s=>{var t,e,n,r,o,u;if(typeof globalThis.process<"u")return(n=(e=(t=K4)===null||t===void 0?void 0:t[s])===null||e===void 0?void 0:e.trim())!==null&&n!==void 0?n:void 0;if(typeof globalThis.Deno<"u")return(u=(o=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||o===void 0?void 0:o.call(r,s))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vI;class Nv{constructor(t){var e,n,r,o,u,h,f,{baseURL:p=PS("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:m=(e=PS("GEMINI_API_KEY"))!==null&&e!==void 0?e:null,apiVersion:y="v1beta"}=t,b=Xb(t,["baseURL","apiKey","apiVersion"]);const A=Object.assign(Object.assign({apiKey:m,apiVersion:y},b),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=A.baseURL,this.timeout=(n=A.timeout)!==null&&n!==void 0?n:Nv.DEFAULT_TIMEOUT,this.logger=(r=A.logger)!==null&&r!==void 0?r:console;const S="warn";this.logLevel=S,this.logLevel=(u=(o=BO(A.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:BO(PS("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:S,this.fetchOptions=A.fetchOptions,this.maxRetries=(h=A.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(f=A.fetch)!==null&&f!==void 0?f:cz(),this.encoder=dz,this._options=A,this.apiKey=m,this.apiVersion=y,this.clientAdapter=A.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:e}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!e.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const e=Ap([t.headers]);if(!(e.values.has("authorization")||e.values.has("x-goog-api-key"))){if(this.apiKey)return Ap([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ap([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([e,n])=>typeof n<"u").map(([e,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(e)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(e)}=`;throw new js(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ah}`}defaultIdempotencyKey(){return`stainless-node-retry-${$4()}`}makeStatusError(t,e,n,r){return ui.generate(t,e,n,r)}buildURL(t,e,n){const r=!this.baseURLOverridden()&&n||this.baseURL,o=Q4(t)?new URL(t):new URL(r+(r.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),u=this.defaultQuery();return tz(u)||(e=Object.assign(Object.assign({},u),e)),typeof e=="object"&&e&&!Array.isArray(e)&&(o.search=this.stringifyQuery(e)),o.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const e=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${e}`}}async prepareRequest(t,{url:e,options:n}){}get(t,e){return this.methodRequest("get",t,e)}post(t,e){return this.methodRequest("post",t,e)}patch(t,e){return this.methodRequest("patch",t,e)}put(t,e){return this.methodRequest("put",t,e)}delete(t,e){return this.methodRequest("delete",t,e)}methodRequest(t,e,n){return this.request(Promise.resolve(n).then(r=>Object.assign({method:t,path:e},r)))}request(t,e=null){return new D1(this,this.makeRequest(t,e,void 0))}async makeRequest(t,e,n){var r,o,u;const h=await t,f=(r=h.maxRetries)!==null&&r!==void 0?r:this.maxRetries;e==null&&(e=f),await this.prepareOptions(h);const{req:p,url:m,timeout:y}=await this.buildRequest(h,{retryCount:f-e});await this.prepareRequest(p,{url:m,options:h});const b="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),A=n===void 0?"":`, retryOf: ${n}`,S=Date.now();if(si(this).debug(`[${b}] sending request`,oc({retryOfRequestLogID:n,method:h.method,url:m,options:h,headers:p.headers})),!((o=h.signal)===null||o===void 0)&&o.aborted)throw new gT;const w=new AbortController,x=await this.fetchWithTimeout(m,p,y,w).catch(mT),D=Date.now();if(x instanceof globalThis.Error){const M=`retrying, ${e} attempts remaining`;if(!((u=h.signal)===null||u===void 0)&&u.aborted)throw new gT;const N=pT(x)||/timed? ?out/i.test(String(x)+("cause"in x?String(x.cause):""));if(e)return si(this).info(`[${b}] connection ${N?"timed out":"failed"} - ${M}`),si(this).debug(`[${b}] connection ${N?"timed out":"failed"} (${M})`,oc({retryOfRequestLogID:n,url:m,durationMs:D-S,message:x.message})),this.retryRequest(h,e,n??b);throw si(this).info(`[${b}] connection ${N?"timed out":"failed"} - error; no more retries left`),si(this).debug(`[${b}] connection ${N?"timed out":"failed"} (error; no more retries left)`,oc({retryOfRequestLogID:n,url:m,durationMs:D-S,message:x.message})),N?new eI:new Rv({cause:x})}const O=`[${b}${A}] ${p.method} ${m} ${x.ok?"succeeded":"failed"} with status ${x.status} in ${D-S}ms`;if(!x.ok){const M=await this.shouldRetry(x);if(e&&M){const W=`retrying, ${e} attempts remaining`;return await hz(x.body),si(this).info(`${O} - ${W}`),si(this).debug(`[${b}] response error (${W})`,oc({retryOfRequestLogID:n,url:x.url,status:x.status,headers:x.headers,durationMs:D-S})),this.retryRequest(h,e,n??b,x.headers)}const N=M?"error; no more retries left":"error; not retryable";si(this).info(`${O} - ${N}`);const L=await x.text().catch(W=>mT(W).message),I=iz(L),k=I?void 0:L;throw si(this).debug(`[${b}] response error (${N})`,oc({retryOfRequestLogID:n,url:x.url,status:x.status,headers:x.headers,message:k,durationMs:Date.now()-S})),this.makeStatusError(x.status,I,k,x.headers)}return si(this).info(O),si(this).debug(`[${b}] response start`,oc({retryOfRequestLogID:n,url:x.url,status:x.status,headers:x.headers,durationMs:D-S})),{response:x,options:h,controller:w,requestLogID:b,retryOfRequestLogID:n,startTime:S}}async fetchWithTimeout(t,e,n,r){const o=e||{},{signal:u,method:h}=o,f=Xb(o,["signal","method"]),p=this._makeAbort(r);u&&u.addEventListener("abort",p,{once:!0});const m=setTimeout(p,n),y=globalThis.ReadableStream&&f.body instanceof globalThis.ReadableStream||typeof f.body=="object"&&f.body!==null&&Symbol.asyncIterator in f.body,b=Object.assign(Object.assign(Object.assign({signal:r.signal},y?{duplex:"half"}:{}),{method:"GET"}),f);h&&(b.method=h.toUpperCase());try{return await this.fetch.call(void 0,t,b)}finally{clearTimeout(m)}}async shouldRetry(t){const e=t.headers.get("x-should-retry");return e==="true"?!0:e==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,e,n,r){var o;let u;const h=r==null?void 0:r.get("retry-after-ms");if(h){const p=parseFloat(h);Number.isNaN(p)||(u=p)}const f=r==null?void 0:r.get("retry-after");if(f&&!u){const p=parseFloat(f);Number.isNaN(p)?u=Date.parse(f)-Date.now():u=p*1e3}if(!(u&&0<=u&&u<60*1e3)){const p=(o=t.maxRetries)!==null&&o!==void 0?o:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(e,p)}return await sz(u),this.makeRequest(t,e-1,n)}calculateDefaultRetryTimeoutMillis(t,e){const o=e-t,u=Math.min(.5*Math.pow(2,o),8),h=1-Math.random()*.25;return u*h*1e3}async buildRequest(t,{retryCount:e=0}={}){var n,r,o;const u=Object.assign({},t),{method:h,path:f,query:p,defaultBaseURL:m}=u,y=this.buildURL(f,p,m);"timeout"in u&&nz("timeout",u.timeout),u.timeout=(n=u.timeout)!==null&&n!==void 0?n:this.timeout;const{bodyHeaders:b,body:A}=this.buildBody({options:u}),S=await this.buildHeaders({options:t,method:h,bodyHeaders:b,retryCount:e});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:S},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&A instanceof globalThis.ReadableStream&&{duplex:"half"}),A&&{body:A}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(o=u.fetchOptions)!==null&&o!==void 0?o:{}),url:y,timeout:u.timeout}}async buildHeaders({options:t,method:e,bodyHeaders:n,retryCount:r}){let o={};this.idempotencyHeader&&e!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=t.idempotencyKey);const u=await this.authHeaders(t);let h=Ap([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),lz()),this._options.defaultHeaders,n,t.headers,u]);return this.validateHeaders(h),h.values}_makeAbort(t){return()=>t.abort()}buildBody({options:{body:t,headers:e}}){if(!t)return{bodyHeaders:void 0,body:void 0};const n=Ap([e]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&n.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:uz(t)}:typeof t=="object"&&n.values.get("content-type")==="application/x-www-form-urlencoded"?{bodyHeaders:{"content-type":"application/x-www-form-urlencoded"},body:this.stringifyQuery(t)}:this.encoder({body:t,headers:n})}}Nv.DEFAULT_TIMEOUT=6e4;class zn extends Nv{constructor(){super(...arguments),this.interactions=new yI(this)}}vI=zn;zn.GeminiNextGenAPIClient=vI;zn.GeminiNextGenAPIClientError=js;zn.APIError=ui;zn.APIConnectionError=Rv;zn.APIConnectionTimeoutError=eI;zn.APIUserAbortError=gT;zn.NotFoundError=aI;zn.ConflictError=rI;zn.RateLimitError=lI;zn.BadRequestError=nI;zn.AuthenticationError=iI;zn.InternalServerError=cI;zn.PermissionDeniedError=sI;zn.UnprocessableEntityError=oI;zn.toFile=yz;zn.Interactions=yI;function M1(){throw new Error("Missing Gemini API key. Set VITE_GEMINI_API_KEY.")}async function Rz(s){const{question:t,selectedAnswer:e,correctAnswer:n,isCorrect:r,topic:o}=s,u=`
    You are a subject matter expert. Provide a 1-2 sentence technical explanation for this quiz question.
    
    Topic: ${o}
    Question: ${t}
    Student selected: ${e||"Skipped"}
    Correct answer: ${n}
    Result: ${r?"Correct":"Incorrect"}
    
    Rules:
    - DO NOT say "Good job", "Spot on", "Correct", or any praise.
    - DO NOT repeat the question or the answer text unnecessarily.
    - Provide ONLY the scientific/technical explanation of why the correct answer is right and why the other might be wrong.
    - Max 2 sentences.
  `;try{return(await M1().models.generateContent({model:"gemini-3-flash-preview",contents:u})).text||"I'm sorry, I couldn't generate an explanation right now."}catch(h){return console.error("Error generating AI explanation:",h),"The AI is currently unavailable. The correct answer is: "+n}}async function Oz(s,t){const e=`
    Based on the following text extracted from a PDF, generate ${t} multiple-choice questions.
    Each question must have exactly 4 options and 1 correct answer.
    
    Text:
    ${s.substring(0,15e3)} // Limit text size for prompt
  `;try{const r=await M1().models.generateContent({model:"gemini-3-flash-preview",contents:e,config:{responseMimeType:"application/json",responseSchema:{type:yr.ARRAY,items:{type:yr.OBJECT,properties:{topic:{type:yr.STRING,description:"The specific topic or sub-heading of the question"},q:{type:yr.STRING,description:"The question text"},a:{type:yr.ARRAY,items:{type:yr.STRING},description:"Array of 4 possible answers"},correct:{type:yr.INTEGER,description:"The 0-based index of the correct answer in the 'a' array"}},required:["topic","q","a","correct"]}}}});return JSON.parse(r.text||"[]")}catch(n){console.error("Error generating questions:",n);const r=n instanceof Error?n.message:"Failed to generate questions from PDF.";throw new Error(r)}}async function Nz(s){const t=s.map(n=>({topic:n.question.topic,isCorrect:n.isCorrect,skipped:n.selectedIdx===null})),e=`
    Analyze these quiz results and provide a 2-3 sentence summary of the student's performance.
    Identify which topics they are struggling with and why (based on common misconceptions in those areas).
    
    Results:
    ${JSON.stringify(t)}
    
    Rules:
    - Be direct and technical.
    - No praise.
    - Focus on identifying patterns in errors.
  `;try{return(await M1().models.generateContent({model:"gemini-3-flash-preview",contents:e})).text||"Analysis unavailable."}catch(n){return console.error("Error analyzing results:",n),"Could not analyze results at this time."}}const ai=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),vT=[.001,0,0,.001,0,0],BS=1.35,ls={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ho={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},am="pdfjs_internal_editor_",Nt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Xt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Lz={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},AT={TRIANGLES:1,LATTICE:2},hn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},ib={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},an={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Eh={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Lv={ERRORS:0,WARNINGS:1,INFOS:5},rm={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Ep={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},Iz={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Iv=Lv.WARNINGS;function Pz(s){Number.isInteger(s)&&(Iv=s)}function Bz(){return Iv}function Pv(s){Iv>=Lv.INFOS&&console.info(`Info: ${s}`)}function Ct(s){Iv>=Lv.WARNINGS&&console.warn(`Warning: ${s}`)}function ee(s){throw new Error(s)}function te(s,t){s||ee(t)}function kz(s){switch(s==null?void 0:s.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function AI(s,t=null,e=null){if(!s)return null;if(e&&typeof s=="string"){if(e.addDefaultProtocol&&s.startsWith("www.")){const r=s.match(/\./g);(r==null?void 0:r.length)>=2&&(s=`http://${s}`)}if(e.tryConvertEncoding)try{s=jz(s)}catch{}}const n=t?URL.parse(s,t):URL.parse(s);return kz(n)?n:null}function EI(s,t,e=!1){const n=URL.parse(s);return n?(n.hash=t,n.href):e&&AI(s,"http://example.com")?s.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Dt(s,t,e,n=!1){return Object.defineProperty(s,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Nu=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class UO extends Nu{constructor(t,e){super(t,"PasswordException"),this.code=e}}class kS extends Nu{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class ET extends Nu{constructor(t){super(t,"InvalidPDFException")}}class Kb extends Nu{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class Uz extends Nu{constructor(t){super(t,"FormatError")}}class kl extends Nu{constructor(t){super(t,"AbortException")}}function Fz(s){(typeof s!="object"||(s==null?void 0:s.length)===void 0)&&ee("Invalid argument for bytesToString");const t=s.length,e=8192;if(t<e)return String.fromCharCode.apply(null,s);const n=[];for(let r=0;r<t;r+=e){const o=Math.min(r+e,t),u=s.subarray(r,o);n.push(String.fromCharCode.apply(null,u))}return n.join("")}function Bv(s){typeof s!="string"&&ee("Invalid argument for stringToBytes");const t=s.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=s.charCodeAt(n)&255;return e}function Hz(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function Vz(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function zz(){try{return new Function(""),!0}catch{return!1}}class gn{static get isLittleEndian(){return Dt(this,"isLittleEndian",Vz())}static get isEvalSupported(){return Dt(this,"isEvalSupported",zz())}static get isOffscreenCanvasSupported(){return Dt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Dt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Dt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Dt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Dt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return Dt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const US=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));var io,sb,ST;class lt{static makeHexColor(t,e,n){return`#${US[t]}${US[e]}${US[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const r=t[n],o=t[n+1];t[n]=r*e[0]+o*e[2]+e[4],t[n+1]=r*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const r=e[0],o=e[1],u=e[2],h=e[3],f=e[4],p=e[5];for(let m=0;m<6;m+=2){const y=t[n+m],b=t[n+m+1];t[n+m]=y*r+b*u+f,t[n+m+1]=y*o+b*h+p}}static applyInverseTransform(t,e){const n=t[0],r=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-r*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-n*e[1]+r*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,n){const r=e[0],o=e[1],u=e[2],h=e[3],f=e[4],p=e[5],m=t[0],y=t[1],b=t[2],A=t[3];let S=r*m+f,w=S,x=r*b+f,D=x,O=h*y+p,M=O,N=h*A+p,L=N;if(o!==0||u!==0){const I=o*m,k=o*b,z=u*y,W=u*A;S+=z,D+=z,x+=W,w+=W,O+=I,L+=I,N+=k,M+=k}n[0]=Math.min(n[0],S,x,w,D),n[1]=Math.min(n[1],O,N,M,L),n[2]=Math.max(n[2],S,x,w,D),n[3]=Math.max(n[3],O,N,M,L)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],r=t[1],o=t[2],u=t[3],h=n**2+r**2,f=n*o+r*u,p=o**2+u**2,m=(h+p)/2,y=Math.sqrt(m**2-(h*p-f**2));e[0]=Math.sqrt(m+y||1),e[1]=Math.sqrt(m-y||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>r)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),u=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>u?null:[n,o,r,u]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,r,o){o[0]=Math.min(o[0],t,n),o[1]=Math.min(o[1],e,r),o[2]=Math.max(o[2],t,n),o[3]=Math.max(o[3],e,r)}static bezierBoundingBox(t,e,n,r,o,u,h,f,p){p[0]=Math.min(p[0],t,h),p[1]=Math.min(p[1],e,f),p[2]=Math.max(p[2],t,h),p[3]=Math.max(p[3],e,f),C(this,io,ST).call(this,t,n,o,h,e,r,u,f,3*(-t+3*(n-o)+h),6*(t-2*n+o),3*(n-t),p),C(this,io,ST).call(this,t,n,o,h,e,r,u,f,3*(-e+3*(r-u)+f),6*(e-2*r+u),3*(r-e),p)}}io=new WeakSet,sb=function(t,e,n,r,o,u,h,f,p,m){if(p<=0||p>=1)return;const y=1-p,b=p*p,A=b*p,S=y*(y*(y*t+3*p*e)+3*b*n)+A*r,w=y*(y*(y*o+3*p*u)+3*b*h)+A*f;m[0]=Math.min(m[0],S),m[1]=Math.min(m[1],w),m[2]=Math.max(m[2],S),m[3]=Math.max(m[3],w)},ST=function(t,e,n,r,o,u,h,f,p,m,y,b){if(Math.abs(p)<1e-12){Math.abs(m)>=1e-12&&C(this,io,sb).call(this,t,e,n,r,o,u,h,f,-y/m,b);return}const A=m**2-4*y*p;if(A<0)return;const S=Math.sqrt(A),w=2*p;C(this,io,sb).call(this,t,e,n,r,o,u,h,f,(-m+S)/w,b),C(this,io,sb).call(this,t,e,n,r,o,u,h,f,(-m-S)/w,b)},_(lt,io);function jz(s){return decodeURIComponent(escape(s))}let FS=null,FO=null;function Gz(s){return FS||(FS=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,FO=new Map([["","t"]])),s.replaceAll(FS,(t,e,n)=>e?e.normalize("NFKC"):FO.get(n))}function SI(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),Fz(s)}const Ph="pdfjs_internal_id_";function Yz(s,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,r,...o]=e;if(!s(n)&&!Number.isInteger(n)||!t(r))return!1;const u=o.length;let h=!0;switch(r.name){case"XYZ":if(u<2||u>3)return!1;break;case"Fit":case"FitB":return u===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(u>1)return!1;break;case"FitR":if(u!==4)return!1;h=!1;break;default:return!1}for(const f of o)if(!(typeof f=="number"||h&&f===null))return!1;return!0}function Un(s,t,e){return Math.min(Math.max(s,t),e)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(s){return s.reduce((t,e)=>t+e,0)});class om{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function r(o){var f;if(!o)return;let u=null;const h=o.name;if(h==="#text")u=o.value;else if(om.shouldBuildText(h))(f=o==null?void 0:o.attributes)!=null&&f.textContent?u=o.attributes.textContent:o.value&&(u=o.value);else return;if(u!==null&&e.push({str:u}),!!o.children)for(const p of o.children)r(p)}return r(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class TI{static setupStorage(t,e,n,r,o){const u=r.getValue(e,{value:null});switch(n.name){case"textarea":if(u.value!==null&&(t.textContent=u.value),o==="print")break;t.addEventListener("input",h=>{r.setValue(e,{value:h.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(u.value===n.attributes.xfaOn?t.setAttribute("checked",!0):u.value===n.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",h=>{r.setValue(e,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(u.value!==null&&t.setAttribute("value",u.value),o==="print")break;t.addEventListener("input",h=>{r.setValue(e,{value:h.target.value})})}break;case"select":if(u.value!==null){t.setAttribute("value",u.value);for(const h of n.children)h.attributes.value===u.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}t.addEventListener("input",h=>{const f=h.target.options,p=f.selectedIndex===-1?"":f[f.selectedIndex].value;r.setValue(e,{value:p})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:r,linkService:o}){const{attributes:u}=e,h=t instanceof HTMLAnchorElement;u.type==="radio"&&(u.name=`${u.name}-${r}`);for(const[f,p]of Object.entries(u))if(p!=null)switch(f){case"class":p.length&&t.setAttribute(f,p.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",p);break;case"style":Object.assign(t.style,p);break;case"textContent":t.textContent=p;break;default:(!h||f!=="href"&&f!=="newWindow")&&t.setAttribute(f,p)}h&&o.addLinkAttributes(t,u.href,u.newWindow),n&&u.dataId&&this.setupStorage(t,u.dataId,e,n)}static render(t){var y,b;const e=t.annotationStorage,n=t.linkService,r=t.xfaHtml,o=t.intent||"display",u=document.createElement(r.name);r.attributes&&this.setAttributes({html:u,element:r,intent:o,linkService:n});const h=o!=="richText",f=t.div;if(f.append(u),t.viewport){const A=`matrix(${t.viewport.transform.join(",")})`;f.style.transform=A}h&&f.setAttribute("class","xfaLayer xfaFont");const p=[];if(r.children.length===0){if(r.value){const A=document.createTextNode(r.value);u.append(A),h&&om.shouldBuildText(r.name)&&p.push(A)}return{textDivs:p}}const m=[[r,-1,u]];for(;m.length>0;){const[A,S,w]=m.at(-1);if(S+1===A.children.length){m.pop();continue}const x=A.children[++m.at(-1)[1]];if(x===null)continue;const{name:D}=x;if(D==="#text"){const M=document.createTextNode(x.value);p.push(M),w.append(M);continue}const O=(y=x==null?void 0:x.attributes)!=null&&y.xmlns?document.createElementNS(x.attributes.xmlns,D):document.createElement(D);if(w.append(O),x.attributes&&this.setAttributes({html:O,element:x,storage:e,intent:o,linkService:n}),((b=x.children)==null?void 0:b.length)>0)m.push([x,-1,O]);else if(x.value){const M=document.createTextNode(x.value);h&&om.shouldBuildText(D)&&p.push(M),O.append(M)}}for(const A of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))A.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const pr="http://www.w3.org/2000/svg",hc=class hc{};$(hc,"CSS",96),$(hc,"PDF",72),$(hc,"PDF_TO_CSS_UNITS",hc.CSS/hc.PDF);let Ul=hc;async function cy(s,t="text"){if(Dp(s,document.baseURI)){const e=await fetch(s);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const r=new XMLHttpRequest;r.open("GET",s,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class uy{constructor({viewBox:t,userUnit:e,scale:n,rotation:r,offsetX:o=0,offsetY:u=0,dontFlip:h=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=r,this.offsetX=o,this.offsetY=u,n*=e;const f=(t[2]+t[0])/2,p=(t[3]+t[1])/2;let m,y,b,A;switch(r%=360,r<0&&(r+=360),r){case 180:m=-1,y=0,b=0,A=1;break;case 90:m=0,y=1,b=1,A=0;break;case 270:m=0,y=-1,b=-1,A=0;break;case 0:m=1,y=0,b=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(b=-b,A=-A);let S,w,x,D;m===0?(S=Math.abs(p-t[1])*n+o,w=Math.abs(f-t[0])*n+u,x=(t[3]-t[1])*n,D=(t[2]-t[0])*n):(S=Math.abs(f-t[0])*n+o,w=Math.abs(p-t[1])*n+u,x=(t[2]-t[0])*n,D=(t[3]-t[1])*n),this.transform=[m*n,y*n,b*n,A*n,S-m*n*f-b*n*p,w-y*n*f-A*n*p],this.width=x,this.height=D}get rawDims(){const t=this.viewBox;return Dt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new uy({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:o})}convertToViewportPoint(t,e){const n=[t,e];return lt.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];lt.applyTransform(e,this.transform);const n=[t[2],t[3]];return lt.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return lt.applyInverseTransform(n,this.transform),n}}class R1 extends Nu{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function kv(s){const t=s.length;let e=0;for(;e<t&&s[e].trim()==="";)e++;return s.substring(e,e+5).toLowerCase()==="data:"}function O1(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function Xz(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function qz(s,t="document.pdf"){if(typeof s!="string")return t;if(kv(s))return Ct('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(h=>{try{return new URL(h)}catch{try{return new URL(decodeURIComponent(h))}catch{try{return new URL(h,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(h),"https://foo.bar")}catch{return null}}}}})(s);if(!n)return t;const r=h=>{try{let f=decodeURIComponent(h);return f.includes("/")?(f=f.split("/").at(-1),f.test(/^\.pdf$/i)?f:h):f}catch{return h}},o=/\.pdf$/i,u=n.pathname.split("/").at(-1);if(o.test(u))return r(u);if(n.searchParams.size>0){const h=Array.from(n.searchParams.values()).reverse();for(const p of h)if(o.test(p))return r(p);const f=Array.from(n.searchParams.keys()).reverse();for(const p of f)if(o.test(p))return r(p)}if(n.hash){const f=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(f)return r(f[0])}return t}class HO{constructor(){$(this,"started",Object.create(null));$(this,"times",[])}time(t){t in this.started&&Ct(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Ct(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:r,end:o}of this.times)t.push(`${n.padEnd(e)} ${o-r}ms
`);return t.join("")}}function Dp(s,t){const e=t?URL.parse(s,t):URL.parse(s);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function Gs(s){s.preventDefault()}function qe(s){s.preventDefault(),s.stopPropagation()}function Kz(s){console.log("Deprecated API usage: "+s)}var hm;class $b{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;c(this,hm)||E(this,hm,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=c(this,hm).exec(t);if(!e)return null;const n=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let u=parseInt(e[4],10);u=u>=0&&u<=23?u:0;let h=parseInt(e[5],10);h=h>=0&&h<=59?h:0;let f=parseInt(e[6],10);f=f>=0&&f<=59?f:0;const p=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,p==="-"?(u+=m,h+=y):p==="+"&&(u-=m,h-=y),new Date(Date.UTC(n,r,o,u,h,f))}}hm=new WeakMap,_($b,hm);function $z(s,{scale:t=1,rotation:e=0}){const{width:n,height:r}=s.attributes.style,o=[0,0,parseInt(n),parseInt(r)];return new uy({viewBox:o,userUnit:1,scale:t,rotation:e})}function hy(s){if(s.startsWith("#")){const t=parseInt(s.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(t=>parseInt(t)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Ct(`Not a valid color format: "${s}"`),[0,0,0])}function Wz(s){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of s.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;s.set(e,hy(n))}t.remove()}function Pe(s){const{a:t,b:e,c:n,d:r,e:o,f:u}=s.getTransform();return[t,e,n,r,o,u]}function ba(s){const{a:t,b:e,c:n,d:r,e:o,f:u}=s.getTransform().invertSelf();return[t,e,n,r,o,u]}function Mu(s,t,e=!1,n=!0){if(t instanceof uy){const{pageWidth:r,pageHeight:o}=t.rawDims,{style:u}=s,h=gn.isCSSRoundSupported,f=`var(--total-scale-factor) * ${r}px`,p=`var(--total-scale-factor) * ${o}px`,m=h?`round(down, ${f}, var(--scale-round-x))`:`calc(${f})`,y=h?`round(down, ${p}, var(--scale-round-y))`:`calc(${p})`;!e||t.rotation%180===0?(u.width=m,u.height=y):(u.width=y,u.height=m)}n&&s.setAttribute("data-main-rotation",t.rotation)}class qa{constructor(){const{pixelRatio:t}=qa;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,r,o=-1){let u=1/0,h=1/0,f=1/0;n=qa.capPixels(n,o),n>0&&(u=Math.sqrt(n/(t*e))),r!==-1&&(h=r/t,f=r/e);const p=Math.min(u,h,f);return this.sx>p||this.sy>p?(this.sx=p,this.sy=p,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const TT=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Qz{static get isDarkMode(){var t;return Dt(this,"isDarkMode",!!((t=window==null?void 0:window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches))}}class Zz{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),Dt(this,"commentForegroundColor",hy(n))}}function Jz(s,t,e,n){n=Math.min(Math.max(n??1,0),1);const r=255*(1-n);return s=Math.round(s*n+r),t=Math.round(t*n+r),e=Math.round(e*n+r),[s,t,e]}function VO(s,t){const e=s[0]/255,n=s[1]/255,r=s[2]/255,o=Math.max(e,n,r),u=Math.min(e,n,r),h=(o+u)/2;if(o===u)t[0]=t[1]=0;else{const f=o-u;switch(t[1]=h<.5?f/(o+u):f/(2-o-u),o){case e:t[0]=((n-r)/f+(n<r?6:0))*60;break;case n:t[0]=((r-e)/f+2)*60;break;case r:t[0]=((e-n)/f+4)*60;break}}t[2]=h}function _T(s,t){const e=s[0],n=s[1],r=s[2],o=(1-Math.abs(2*r-1))*n,u=o*(1-Math.abs(e/60%2-1)),h=r-o/2;switch(Math.floor(e/60)){case 0:t[0]=o+h,t[1]=u+h,t[2]=h;break;case 1:t[0]=u+h,t[1]=o+h,t[2]=h;break;case 2:t[0]=h,t[1]=o+h,t[2]=u+h;break;case 3:t[0]=h,t[1]=u+h,t[2]=o+h;break;case 4:t[0]=u+h,t[1]=h,t[2]=o+h;break;case 5:case 6:t[0]=o+h,t[1]=h,t[2]=u+h;break}}function zO(s){return s<=.03928?s/12.92:((s+.055)/1.055)**2.4}function jO(s,t,e){_T(s,e),e.map(zO);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];_T(t,e),e.map(zO);const r=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)}const GO=new Map;function tj(s,t){const e=s[0]+s[1]*256+s[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=GO.get(e);if(n)return n;const r=new Float32Array(9),o=r.subarray(0,3),u=r.subarray(3,6);VO(s,u);const h=r.subarray(6,9);VO(t,h);const f=h[2]<.5,p=f?12:4.5;if(u[2]=f?Math.sqrt(u[2]):1-Math.sqrt(1-u[2]),jO(u,h,o)<p){let m,y;f?(m=u[2],y=1):(m=0,y=u[2]);const b=.005;for(;y-m>b;){const A=u[2]=(m+y)/2;f===jO(u,h,o)<p?m=A:y=A}u[2]=f?y:m}return _T(u,o),n=lt.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),GO.set(e,n),n}function _I({html:s,dir:t,className:e},n){const r=document.createDocumentFragment();if(typeof s=="string"){const o=document.createElement("p");o.dir=t||"auto";const u=s.split(/(?:\r\n?|\n)/);for(let h=0,f=u.length;h<f;++h){const p=u[h];o.append(document.createTextNode(p)),h<f-1&&o.append(document.createElement("br"))}r.append(o)}else TI.render({xfaHtml:s,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",e),n.append(r)}function wI(s){const t=new Path2D;if(!s)return t;for(let e=0,n=s.length;e<n;)switch(s[e++]){case Ep.moveTo:t.moveTo(s[e++],s[e++]);break;case Ep.lineTo:t.lineTo(s[e++],s[e++]);break;case Ep.curveTo:t.bezierCurveTo(s[e++],s[e++],s[e++],s[e++],s[e++],s[e++]);break;case Ep.quadraticCurveTo:t.quadraticCurveTo(s[e++],s[e++],s[e++],s[e++]);break;case Ep.closePath:t.closePath();break;default:Ct(`Unrecognized drawing path operator: ${s[e-1]}`);break}return t}var Ar,Zs,Gh,Vo,gc,bf,xI,CI;const qt=class qt{constructor(){_(this,bf)}get pagesNumber(){return c(qt,Vo)}set pagesNumber(t){c(qt,Vo)!==t&&(E(qt,Vo,t),t===0&&(E(qt,Zs,null),E(qt,Ar,null)))}addListener(t){c(qt,gc).push(t)}removeListener(t){const e=c(qt,gc).indexOf(t);e>=0&&c(qt,gc).splice(e,1)}movePages(t,e,n){C(this,bf,CI).call(this,!0);const r=c(qt,Zs),o=c(qt,Ar);c(qt,Gh).set(o);const u=e.length,h=new Uint32Array(u);let f=0;for(let A=0;A<u;A++){const S=e[A]-1;h[A]=r[S],S<n&&(f+=1)}const p=c(qt,Vo);let m=n-f;const y=p-u;m=Un(m,0,y);for(let A=0,S=0;A<p;A++)t.has(A+1)||(r[S++]=r[A]);r.copyWithin(m+u,m,y),r.set(h,m);let b=!1;for(let A=0,S=p;A<S;A++){const w=r[A];b||(b=w!==A+1),o[w-1]=A+1}C(this,bf,xI).call(this),b||(this.pagesNumber=0)}hasBeenAltered(){return c(qt,Zs)!==null}getPageMappingForSaving(){return{pageIndices:c(qt,Ar)?c(qt,Ar).map(t=>t-1):null}}getPrevPageNumber(t){return c(qt,Gh)[c(qt,Zs)[t-1]-1]}getPageNumber(t){var e;return((e=c(qt,Ar))==null?void 0:e[t-1])??t}getPageId(t){var e;return((e=c(qt,Zs))==null?void 0:e[t-1])??t}static get instance(){return Dt(this,"instance",new qt)}getMapping(){return c(qt,Zs).subarray(0,this.pagesNumber)}};Ar=new WeakMap,Zs=new WeakMap,Gh=new WeakMap,Vo=new WeakMap,gc=new WeakMap,bf=new WeakSet,xI=function(){for(const t of c(qt,gc))t()},CI=function(t){if(c(qt,Zs))return;const e=c(qt,Vo),n=new Uint32Array(3*e),r=E(qt,Zs,n.subarray(0,e)),o=E(qt,Ar,n.subarray(e,2*e));if(t)for(let u=0;u<e;u++)r[u]=o[u]=u+1;E(qt,Gh,n.subarray(2*e))},_(qt,Ar,null),_(qt,Zs,null),_(qt,Gh,null),_(qt,Vo,0),_(qt,gc,[]);let lm=qt;var zo,jo,ws,xs,dm,Go,Yh,Xh,fm,ov,DI,Vn,MI,RI,Sh,Mp;const br=class br{constructor(t){_(this,Vn);_(this,zo,null);_(this,jo,null);_(this,ws);_(this,xs,null);_(this,dm,null);_(this,Go,null);_(this,Yh,null);_(this,Xh,null);E(this,ws,t),c(br,fm)||E(br,fm,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=E(this,zo,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=c(this,ws)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Gs,{signal:e}),t.addEventListener("pointerdown",C(br,ov,DI),{signal:e}));const n=E(this,xs,document.createElement("div"));n.className="buttons",t.append(n);const r=c(this,ws).toolbarPosition;if(r){const{style:o}=t,u=c(this,ws)._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*u}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return c(this,zo)}hide(){var t;c(this,zo).classList.add("hidden"),(t=c(this,jo))==null||t.hideDropdown()}show(){var t,e;c(this,zo).classList.remove("hidden"),(t=c(this,dm))==null||t.shown(),(e=c(this,Go))==null||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=c(this,ws),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",c(br,fm)[t]),C(this,Vn,Sh).call(this,n)&&n.addEventListener("click",r=>{e.delete()},{signal:e._signal}),c(this,xs).append(n)}async addAltText(t){const e=await t.render();C(this,Vn,Sh).call(this,e),c(this,xs).append(e,c(this,Vn,Mp)),E(this,dm,t)}addComment(t,e=null){if(c(this,Go))return;const n=t.renderForToolbar();if(!n)return;C(this,Vn,Sh).call(this,n);const r=E(this,Yh,c(this,Vn,Mp));e?(c(this,xs).insertBefore(n,e),c(this,xs).insertBefore(r,e)):c(this,xs).append(n,r),E(this,Go,t),t.toolbar=this}addColorPicker(t){if(c(this,jo))return;E(this,jo,t);const e=t.renderButton();C(this,Vn,Sh).call(this,e),c(this,xs).append(e,c(this,Vn,Mp))}async addEditSignatureButton(t){const e=E(this,Xh,await t.renderEditButton(c(this,ws)));C(this,Vn,Sh).call(this,e),c(this,xs).append(e,c(this,Vn,Mp))}removeButton(t){var e,n;switch(t){case"comment":(e=c(this,Go))==null||e.removeToolbarCommentButton(),E(this,Go,null),(n=c(this,Yh))==null||n.remove(),E(this,Yh,null);break}}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,n){if(!e&&t==="comment")return;const r=c(this,xs).querySelector(n);r&&t==="comment"&&this.addComment(e,r)}updateEditSignatureButton(t){c(this,Xh)&&(c(this,Xh).title=t)}remove(){var t;c(this,zo).remove(),(t=c(this,jo))==null||t.destroy(),E(this,jo,null)}};zo=new WeakMap,jo=new WeakMap,ws=new WeakMap,xs=new WeakMap,dm=new WeakMap,Go=new WeakMap,Yh=new WeakMap,Xh=new WeakMap,fm=new WeakMap,ov=new WeakSet,DI=function(t){t.stopPropagation()},Vn=new WeakSet,MI=function(t){c(this,ws)._focusEventsAllowed=!1,qe(t)},RI=function(t){c(this,ws)._focusEventsAllowed=!0,qe(t)},Sh=function(t){const e=c(this,ws)._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",C(this,Vn,MI).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",C(this,Vn,RI).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Gs,{signal:e}),!0)},Mp=function(){const t=document.createElement("div");return t.className="divider",t},_(br,ov),_(br,fm,null);let wT=br;var pm,yc,Er,oo,OI,NI,xT;class ej{constructor(t){_(this,oo);_(this,pm,null);_(this,yc,null);_(this,Er);E(this,Er,t)}show(t,e,n){const[r,o]=C(this,oo,NI).call(this,e,n),{style:u}=c(this,yc)||E(this,yc,C(this,oo,OI).call(this));t.append(c(this,yc)),u.insetInlineEnd=`${100*r}%`,u.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,yc).remove()}}pm=new WeakMap,yc=new WeakMap,Er=new WeakMap,oo=new WeakSet,OI=function(){const t=E(this,yc,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=c(this,Er)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Gs,{signal:e});const n=E(this,pm,document.createElement("div"));return n.className="buttons",t.append(n),c(this,Er).hasCommentManager()&&C(this,oo,xT).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{c(this,Er).commentSelection("floating_button")}),C(this,oo,xT).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{c(this,Er).highlightSelection("floating_button")}),t},NI=function(t,e){let n=0,r=0;for(const o of t){const u=o.y+o.height;if(u<n)continue;const h=o.x+(e?o.width:0);if(u>n){r=h,n=u;continue}e?h>r&&(r=h):h<r&&(r=h)}return[e?1-r:r,n]},xT=function(t,e,n,r){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",e);const u=document.createElement("span");o.append(u),u.className="visuallyHidden",u.setAttribute("data-l10n-id",n);const h=c(this,Er)._signal;h instanceof AbortSignal&&!h.aborted&&(o.addEventListener("contextmenu",Gs,{signal:h}),o.addEventListener("click",r,{signal:h})),c(this,pm).append(o)};function LI(s,t,e){for(const n of e)t.addEventListener(n,s[n].bind(s))}var bc,vc,qh,Ac;const he=class he{static initializeAndAddPointerId(t){(c(he,vc)||E(he,vc,new Set)).add(t)}static setPointer(t,e){c(he,bc)||E(he,bc,e),c(he,Ac)??E(he,Ac,t)}static setTimeStamp(t){E(he,qh,t)}static isSamePointerId(t){return c(he,bc)===t}static isSamePointerIdOrRemove(t){var e;return c(he,bc)===t?!0:((e=c(he,vc))==null||e.delete(t),!1)}static isSamePointerType(t){return c(he,Ac)===t}static isInitializedAndDifferentPointerType(t){return c(he,Ac)!==null&&!he.isSamePointerType(t)}static isSameTimeStamp(t){return c(he,qh)===t}static isUsingMultiplePointers(){var t;return((t=c(he,vc))==null?void 0:t.size)>=1}static clearPointerType(){E(he,Ac,null)}static clearPointerIds(){E(he,bc,NaN),E(he,vc,null)}static clearTimeStamp(){E(he,qh,NaN)}};bc=new WeakMap,vc=new WeakMap,qh=new WeakMap,Ac=new WeakMap,_(he,bc,NaN),_(he,vc,null),_(he,qh,NaN),_(he,Ac,null);let Yn=he;var lv;class nj{constructor(){_(this,lv,0)}get id(){return`${am}${un(this,lv)._++}`}}lv=new WeakMap;var Kh,mm,Xn,$h,ab;const F1=class F1{constructor(){_(this,$h);_(this,Kh,SI());_(this,mm,0);_(this,Xn,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const o=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Dt(this,"_isSVGFittingCanvas",o)}async getFromFile(t){const{lastModified:e,name:n,size:r,type:o}=t;return C(this,$h,ab).call(this,`${e}_${n}_${r}_${o}`,t)}async getFromUrl(t){return C(this,$h,ab).call(this,t,t)}async getFromBlob(t,e){const n=await e;return C(this,$h,ab).call(this,t,n)}async getFromId(t){c(this,Xn)||E(this,Xn,new Map);const e=c(this,Xn).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){c(this,Xn)||E(this,Xn,new Map);let n=c(this,Xn).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${c(this,Kh)}_${un(this,mm)._++}`,refCounter:1,isSvg:!1},c(this,Xn).set(t,n),c(this,Xn).set(n.id,n),n}getSvgUrl(t){const e=c(this,Xn).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var r;c(this,Xn)||E(this,Xn,new Map);const e=c(this,Xn).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const o=new OffscreenCanvas(n.width,n.height);o.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=o.convertToBlob()}(r=n.close)==null||r.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${c(this,Kh)}_`)}};Kh=new WeakMap,mm=new WeakMap,Xn=new WeakMap,$h=new WeakSet,ab=async function(t,e){c(this,Xn)||E(this,Xn,new Map);let n=c(this,Xn).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${c(this,Kh)}_${un(this,mm)._++}`,refCounter:0,isSvg:!1});let r;if(typeof e=="string"?(n.url=e,r=await cy(e,"blob")):e instanceof File?r=n.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const o=F1._isSVGFittingCanvas,u=new FileReader,h=new Image,f=new Promise((p,m)=>{h.onload=()=>{n.bitmap=h,n.isSvg=!0,p()},u.onload=async()=>{const y=n.svgUrl=u.result;h.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},h.onerror=u.onerror=m});u.readAsDataURL(r),await f}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){Ct(r),n=null}return c(this,Xn).set(t,n),n&&c(this,Xn).set(n.id,n),n};let CT=F1;var We,Yo,gm,Le;class ij{constructor(t=128){_(this,We,[]);_(this,Yo,!1);_(this,gm);_(this,Le,-1);E(this,gm,t)}add({cmd:t,undo:e,post:n,mustExec:r,type:o=NaN,overwriteIfSameType:u=!1,keepUndo:h=!1}){if(r&&t(),c(this,Yo))return;const f={cmd:t,undo:e,post:n,type:o};if(c(this,Le)===-1){c(this,We).length>0&&(c(this,We).length=0),E(this,Le,0),c(this,We).push(f);return}if(u&&c(this,We)[c(this,Le)].type===o){h&&(f.undo=c(this,We)[c(this,Le)].undo),c(this,We)[c(this,Le)]=f;return}const p=c(this,Le)+1;p===c(this,gm)?c(this,We).splice(0,1):(E(this,Le,p),p<c(this,We).length&&c(this,We).splice(p)),c(this,We).push(f)}undo(){if(c(this,Le)===-1)return;E(this,Yo,!0);const{undo:t,post:e}=c(this,We)[c(this,Le)];t(),e==null||e(),E(this,Yo,!1),E(this,Le,c(this,Le)-1)}redo(){if(c(this,Le)<c(this,We).length-1){E(this,Le,c(this,Le)+1),E(this,Yo,!0);const{cmd:t,post:e}=c(this,We)[c(this,Le)];t(),e==null||e(),E(this,Yo,!1)}}hasSomethingToUndo(){return c(this,Le)!==-1}hasSomethingToRedo(){return c(this,Le)<c(this,We).length-1}cleanType(t){if(c(this,Le)!==-1){for(let e=c(this,Le);e>=0;e--)if(c(this,We)[e].type!==t){c(this,We).splice(e+1,c(this,Le)-e),E(this,Le,e);return}c(this,We).length=0,E(this,Le,-1)}}destroy(){E(this,We,null)}}We=new WeakMap,Yo=new WeakMap,gm=new WeakMap,Le=new WeakMap;var cv,II;class dy{constructor(t){_(this,cv);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=gn.platform;for(const[n,r,o={}]of t)for(const u of n){const h=u.startsWith("mac+");e&&h?(this.callbacks.set(u.slice(4),{callback:r,options:o}),this.allKeys.add(u.split("+").at(-1))):!e&&!h&&(this.callbacks.set(u,{callback:r,options:o}),this.allKeys.add(u.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(C(this,cv,II).call(this,e));if(!n)return;const{callback:r,options:{bubbles:o=!1,args:u=[],checker:h=null}}=n;h&&!h(t,e)||(r.bind(t,...u,e)(),o||qe(e))}}cv=new WeakSet,II=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const uv=class uv{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Wz(t),Dt(this,"_colors",t)}convert(t){const e=hy(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,r]of this._colors)if(r.every((o,u)=>o===e[u]))return uv._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?lt.makeHexColor(...e):t}};$(uv,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let DT=uv;var Wh,ji,Qh,Ie,Qe,Zh,Cs,Jh,Ds,qn,Xo,qo,td,Ko,Sa,Ms,Ec,ym,bm,ed,vm,Ta,$o,nd,Wo,_a,hv,Qo,id,Am,Zo,Sc,sd,Jo,Em,rn,ae,Sr,tl,el,Sm,ad,Tm,nl,wa,Tr,_m,wm,Rs,rt,rb,MT,PI,BI,Rp,kI,UI,FI,RT,HI,VI,zI,jI,Jn,mr,GI,YI,OT,XI,Op,NT;const kh=class kh{constructor(t,e,n,r,o,u,h,f,p,m,y,b,A,S,w,x){_(this,rt);_(this,Wh,new AbortController);_(this,ji,null);_(this,Qh,null);_(this,Ie,new Map);_(this,Qe,new Map);_(this,Zh,null);_(this,Cs,null);_(this,Jh,null);_(this,Ds,new ij);_(this,qn,null);_(this,Xo,null);_(this,qo,null);_(this,td,0);_(this,Ko,new Set);_(this,Sa,null);_(this,Ms,null);_(this,Ec,new Set);$(this,"_editorUndoBar",null);_(this,ym,!1);_(this,bm,!1);_(this,ed,!1);_(this,vm,null);_(this,Ta,null);_(this,$o,null);_(this,nd,null);_(this,Wo,!1);_(this,_a,null);_(this,hv,new nj);_(this,Qo,!1);_(this,id,!1);_(this,Am,!1);_(this,Zo,null);_(this,Sc,null);_(this,sd,null);_(this,Jo,null);_(this,Em,null);_(this,rn,Nt.NONE);_(this,ae,new Set);_(this,Sr,null);_(this,tl,null);_(this,el,null);_(this,Sm,null);_(this,ad,null);_(this,Tm,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});_(this,nl,[0,0]);_(this,wa,null);_(this,Tr,null);_(this,_m,null);_(this,wm,null);_(this,Rs,null);const D=this._signal=c(this,Wh).signal;E(this,Tr,t),E(this,_m,e),E(this,wm,n),E(this,Zh,r),E(this,qn,o),E(this,tl,u),E(this,ad,f),this._eventBus=h,h._on("editingaction",this.onEditingAction.bind(this),{signal:D}),h._on("pagechanging",this.onPageChanging.bind(this),{signal:D}),h._on("scalechanging",this.onScaleChanging.bind(this),{signal:D}),h._on("rotationchanging",this.onRotationChanging.bind(this),{signal:D}),h._on("setpreference",this.onSetPreference.bind(this),{signal:D}),h._on("switchannotationeditorparams",O=>this.updateParams(O.type,O.value),{signal:D}),h._on("pagesedited",this.onPagesEdited.bind(this),{signal:D}),window.addEventListener("pointerdown",()=>{E(this,id,!0)},{capture:!0,signal:D}),window.addEventListener("pointerup",()=>{E(this,id,!1)},{capture:!0,signal:D}),C(this,rt,kI).call(this),C(this,rt,jI).call(this),C(this,rt,RT).call(this),E(this,Cs,f.annotationStorage),E(this,vm,f.filterFactory),E(this,el,p),E(this,nd,m||null),E(this,ym,y),E(this,bm,b),E(this,ed,A),E(this,Em,S||null),this.viewParameters={realScale:Ul.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=x!==!1,o==null||o.setSidebarUiManager(this)}static get _keyboardManager(){const t=kh.prototype,e=u=>c(u,Tr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&u.hasSomethingToControl(),n=(u,{target:h})=>{if(h instanceof HTMLInputElement){const{type:f}=h;return f!=="text"&&f!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Dt(this,"_keyboardManager",new dy([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(u,{target:h})=>!(h instanceof HTMLButtonElement)&&c(u,Tr).contains(h)&&!u.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(u,{target:h})=>!(h instanceof HTMLButtonElement)&&c(u,Tr).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}destroy(){var t,e,n,r,o,u,h,f,p;(t=c(this,Rs))==null||t.resolve(),E(this,Rs,null),(e=c(this,Wh))==null||e.abort(),E(this,Wh,null),this._signal=null;for(const m of c(this,Qe).values())m.destroy();c(this,Qe).clear(),c(this,Ie).clear(),c(this,Ec).clear(),(n=c(this,Jo))==null||n.clear(),E(this,ji,null),c(this,ae).clear(),c(this,Ds).destroy(),(r=c(this,Zh))==null||r.destroy(),(o=c(this,qn))==null||o.destroy(),(u=c(this,tl))==null||u.destroy(),(h=c(this,_a))==null||h.hide(),E(this,_a,null),(f=c(this,sd))==null||f.destroy(),E(this,sd,null),E(this,Qh,null),c(this,Ta)&&(clearTimeout(c(this,Ta)),E(this,Ta,null)),c(this,wa)&&(clearTimeout(c(this,wa)),E(this,wa,null)),(p=this._editorUndoBar)==null||p.destroy(),E(this,ad,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return c(this,Em)}get useNewAltTextFlow(){return c(this,bm)}get useNewAltTextWhenAddingImage(){return c(this,ed)}get hcmFilter(){return Dt(this,"hcmFilter",c(this,el)?c(this,vm).addHCMFilter(c(this,el).foreground,c(this,el).background):"none")}get direction(){return Dt(this,"direction",getComputedStyle(c(this,Tr)).direction)}get _highlightColors(){return Dt(this,"_highlightColors",c(this,nd)?new Map(c(this,nd).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Dt(this,"highlightColors",null);const e=new Map,n=!!c(this,el);for(const[r,o]of t){const u=r.endsWith("_HCM");if(n&&u){e.set(r.replace("_HCM",""),o);continue}!n&&!u&&e.set(r,o)}return Dt(this,"highlightColors",e)}get highlightColorNames(){return Dt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),E(this,qo,t)}setMainHighlightColorPicker(t){E(this,sd,t)}editAltText(t,e=!1){var n;(n=c(this,Zh))==null||n.editAltText(this,t,e)}hasCommentManager(){return!!c(this,qn)}editComment(t,e,n,r){var o;(o=c(this,qn))==null||o.showDialog(this,t,e,n,r)}selectComment(t,e){const n=c(this,Qe).get(t),r=n==null?void 0:n.getEditorByUID(e);r==null||r.toggleComment(!0,!0)}updateComment(t){var e;(e=c(this,qn))==null||e.updateComment(t.getData())}updatePopupColor(t){var e;(e=c(this,qn))==null||e.updatePopupColor(t)}removeComment(t){var e;(e=c(this,qn))==null||e.removeComments([t.uid])}deleteComment(t,e){const n=()=>{t.comment=e},r=()=>{var o;(o=this._editorUndoBar)==null||o.show(n,"comment"),this.toggleComment(null),t.comment=null};this.addCommands({cmd:r,undo:n,mustExec:!0})}toggleComment(t,e,n=void 0){var r;(r=c(this,qn))==null||r.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){var n;return t&&((n=c(this,qn))==null?void 0:n.makeCommentColor(t,e))||null}getCommentDialogElement(){var t;return((t=c(this,qn))==null?void 0:t.dialogElement)||null}async waitForEditorsRendered(t){if(c(this,Qe).has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),r=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",r),e())};this._eventBus.on("editorsrendered",r),await n}getSignature(t){var e;(e=c(this,tl))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return c(this,tl)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":E(this,ed,e);break}}onPagesEdited({pagesMapper:t}){for(const r of c(this,Ie).values())r.updatePageIndex(t.getPrevPageNumber(r.pageIndex+1)-1);const e=c(this,Qe),n=E(this,Qe,new Map);for(const[r,o]of e){const u=t.getPrevPageNumber(r+1)-1;if(u===-1){o.destroy();continue}n.set(u,o),o.updatePageIndex(u)}}onPageChanging({pageNumber:t}){E(this,td,t-1)}focusMainContainer(){c(this,Tr).focus()}findParent(t,e){for(const n of c(this,Qe).values()){const{x:r,y:o,width:u,height:h}=n.div.getBoundingClientRect();if(t>=r&&t<=r+u&&e>=o&&e<=o+h)return n}return null}disableUserSelect(t=!1){c(this,_m).classList.toggle("noUserSelect",t)}addShouldRescale(t){c(this,Ec).add(t)}removeShouldRescale(t){c(this,Ec).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Ul.PDF_TO_CSS_UNITS;for(const n of c(this,Ec))n.onScaleChanging();(e=c(this,qo))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:r,anchorOffset:o,focusNode:u,focusOffset:h}=n,f=n.toString(),m=C(this,rt,rb).call(this,n).closest(".textLayer"),y=this.getSelectionBoxes(m);if(!y)return;n.empty();const b=C(this,rt,MT).call(this,m),A=c(this,rn)===Nt.NONE,S=()=>{const w=b==null?void 0:b.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:r,anchorOffset:o,focusNode:u,focusOffset:h,text:f});A&&this.showAllEditors("highlight",!0,!0),e&&(w==null||w.editComment())};if(A){this.switchToMode(Nt.HIGHLIGHT,S);return}S()}commentSelection(t=""){this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!c(this,Cs))return null;const e=`${am}${t}`,n=c(this,Cs).getRawValue(e);return n&&c(this,Cs).remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&c(this,Cs)&&!c(this,Cs).has(t.id)&&c(this,Cs).setValue(t.id,t)}a11yAlert(t,e=null){const n=c(this,wm);n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,c(this,Wo)&&(E(this,Wo,!1),C(this,rt,Rp).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of c(this,ae))if(e.div.contains(t)){E(this,Sc,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!c(this,Sc))return;const[t,e]=c(this,Sc);E(this,Sc,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){C(this,rt,RT).call(this),this.setEditingState(!0)}removeEditListeners(){C(this,rt,HI).call(this),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of c(this,Ms))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of c(this,Ms))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=c(this,ji))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const r of c(this,ae)){const o=r.serialize(!0);o&&e.push(o)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const u of c(this,Ms))if(u.isHandlingMimeForPasting(o.type)){u.paste(o,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){Ct(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const f of n){const p=await r.deserialize(f);if(!p)return;o.push(p)}const u=()=>{for(const f of o)C(this,rt,OT).call(this,f);C(this,rt,NT).call(this,o)},h=()=>{for(const f of o)f.remove()};this.addCommands({cmd:u,undo:h,mustExec:!0})}catch(o){Ct(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,rn)!==Nt.NONE&&!this.isEditorHandlingKeyboard&&kh._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,Wo)&&(E(this,Wo,!1),C(this,rt,Rp).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(t){t?(C(this,rt,UI).call(this),C(this,rt,VI).call(this),C(this,rt,Jn).call(this,{isEditing:c(this,rn)!==Nt.NONE,isEmpty:C(this,rt,Op).call(this),hasSomethingToUndo:c(this,Ds).hasSomethingToUndo(),hasSomethingToRedo:c(this,Ds).hasSomethingToRedo(),hasSelectedEditor:!1})):(C(this,rt,FI).call(this),C(this,rt,zI).call(this),C(this,rt,Jn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!c(this,Ms)){E(this,Ms,t);for(const e of c(this,Ms))C(this,rt,mr).call(this,e.defaultPropertiesToUpdate)}}getId(){return c(this,hv).id}get currentLayer(){return c(this,Qe).get(c(this,td))}getLayer(t){return c(this,Qe).get(t)}get currentPageIndex(){return c(this,td)}addLayer(t){c(this,Qe).set(t.pageIndex,t),c(this,Qo)?t.enable():t.disable()}removeLayer(t){c(this,Qe).delete(t.pageIndex)}async updateMode(t,e=null,n=!1,r=!1,o=!1,u=!1){var h,f,p,m,y,b;if(c(this,rn)!==t&&!(c(this,Rs)&&(await c(this,Rs).promise,!c(this,Rs)))){if(E(this,Rs,Promise.withResolvers()),(h=c(this,qo))==null||h.commitOrRemove(),c(this,rn)===Nt.POPUP&&((f=c(this,qn))==null||f.hideSidebar()),(p=c(this,qn))==null||p.destroyPopup(),E(this,rn,t),t===Nt.NONE){this.setEditingState(!1),C(this,rt,YI).call(this);for(const A of c(this,Ie).values())A.hideStandaloneCommentButton();(m=this._editorUndoBar)==null||m.hide(),this.toggleComment(null),c(this,Rs).resolve();return}for(const A of c(this,Ie).values())A.addStandaloneCommentButton();t===Nt.SIGNATURE&&await((y=c(this,tl))==null?void 0:y.loadSignatures()),n&&Yn.clearPointerType(),this.setEditingState(!0),await C(this,rt,GI).call(this),this.unselectAll();for(const A of c(this,Qe).values())A.updateMode(t);if(t===Nt.POPUP){c(this,Qh)||E(this,Qh,await c(this,ad).getAnnotationsByType(new Set(c(this,Ms).map(w=>w._editorType))));const A=new Set,S=[];for(const w of c(this,Ie).values()){const{annotationElementId:x,hasComment:D,deleted:O}=w;x&&A.add(x),D&&!O&&S.push(w.getData())}for(const w of c(this,Qh)){const{id:x,popupRef:D,contentsObj:O}=w;D&&(O!=null&&O.str)&&!A.has(x)&&!c(this,Ko).has(x)&&S.push(w)}(b=c(this,qn))==null||b.showSidebar(S)}if(!e){r&&this.addNewEditorFromKeyboard(),c(this,Rs).resolve();return}for(const A of c(this,Ie).values())A.uid===e?(this.setSelected(A),u?A.editComment():o?A.enterInEditMode():A.focus()):A.unselect();c(this,Rs).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==c(this,rn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(c(this,Ms)){switch(t){case Xt.CREATE:this.currentLayer.addNewEditor(e);return;case Xt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,Sm)||E(this,Sm,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of c(this,ae))n.updateParams(t,e);else for(const n of c(this,Ms))n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var o;for(const u of c(this,Ie).values())u.editorType===t&&u.show(e);(((o=c(this,Sm))==null?void 0:o.get(Xt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&C(this,rt,mr).call(this,[[Xt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(c(this,Am)!==t){E(this,Am,t);for(const e of c(this,Qe).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(const e of c(this,Ie).values())e.pageIndex===t&&(yield e)}getEditor(t){return c(this,Ie).get(t)}addEditor(t){c(this,Ie).set(t.id,t)}removeEditor(t){var e,n;t.div.contains(document.activeElement)&&(c(this,Ta)&&clearTimeout(c(this,Ta)),E(this,Ta,setTimeout(()=>{this.focusMainContainer(),E(this,Ta,null)},0))),c(this,Ie).delete(t.id),t.annotationElementId&&((e=c(this,Jo))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!c(this,Ko).has(t.annotationElementId))&&((n=c(this,Cs))==null||n.remove(t.id))}addDeletedAnnotationElement(t){c(this,Ko).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return c(this,Ko).has(t)}removeDeletedAnnotationElement(t){c(this,Ko).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){c(this,ji)!==t&&(E(this,ji,t),t&&C(this,rt,mr).call(this,t.propertiesToUpdate))}updateUI(t){c(this,rt,XI)===t&&C(this,rt,mr).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){C(this,rt,mr).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(c(this,ae).has(t)){c(this,ae).delete(t),t.unselect(),C(this,rt,Jn).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,ae).add(t),t.select(),C(this,rt,mr).call(this,t.propertiesToUpdate),C(this,rt,Jn).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.uid}),(e=c(this,qo))==null||e.commitOrRemove();for(const n of c(this,ae))n!==t&&n.unselect();c(this,ae).clear(),c(this,ae).add(t),t.select(),C(this,rt,mr).call(this,t.propertiesToUpdate),C(this,rt,Jn).call(this,{hasSelectedEditor:!0})}isSelected(t){return c(this,ae).has(t)}get firstSelectedEditor(){return c(this,ae).values().next().value}unselect(t){t.unselect(),c(this,ae).delete(t),C(this,rt,Jn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,ae).size!==0}get isEnterHandled(){return c(this,ae).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;c(this,Ds).undo(),C(this,rt,Jn).call(this,{hasSomethingToUndo:c(this,Ds).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:C(this,rt,Op).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){c(this,Ds).redo(),C(this,rt,Jn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,Ds).hasSomethingToRedo(),isEmpty:C(this,rt,Op).call(this)})}addCommands(t){c(this,Ds).add(t),C(this,rt,Jn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:C(this,rt,Op).call(this)})}cleanUndoStack(t){c(this,Ds).cleanType(t)}delete(){var o;this.commitOrRemove();const t=(o=this.currentLayer)==null?void 0:o.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...c(this,ae)],n=()=>{var u;(u=this._editorUndoBar)==null||u.show(r,e.length===1?e[0].editorType:e.length);for(const h of e)h.remove()},r=()=>{for(const u of e)C(this,rt,OT).call(this,u)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var t;(t=c(this,ji))==null||t.commitOrRemove()}hasSomethingToControl(){return c(this,ji)||this.hasSelection}selectAll(){for(const t of c(this,ae))t.commit();C(this,rt,NT).call(this,c(this,Ie).values())}unselectAll(){var t;if(!(c(this,ji)&&(c(this,ji).commitOrRemove(),c(this,rn)!==Nt.NONE))&&!((t=c(this,qo))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of c(this,ae))e.unselect();c(this,ae).clear(),C(this,rt,Jn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;c(this,nl)[0]+=t,c(this,nl)[1]+=e;const[r,o]=c(this,nl),u=[...c(this,ae)],h=1e3;c(this,wa)&&clearTimeout(c(this,wa)),E(this,wa,setTimeout(()=>{E(this,wa,null),c(this,nl)[0]=c(this,nl)[1]=0,this.addCommands({cmd:()=>{for(const f of u)c(this,Ie).has(f.id)&&(f.translateInPage(r,o),f.translationDone())},undo:()=>{for(const f of u)c(this,Ie).has(f.id)&&(f.translateInPage(-r,-o),f.translationDone())},mustExec:!1})},h));for(const f of u)f.translateInPage(t,e),f.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),E(this,Sa,new Map);for(const t of c(this,ae))c(this,Sa).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,Sa))return!1;this.disableUserSelect(!1);const t=c(this,Sa);E(this,Sa,null);let e=!1;for(const[{x:r,y:o,pageIndex:u},h]of t)h.newX=r,h.newY=o,h.newPageIndex=u,e||(e=r!==h.savedX||o!==h.savedY||u!==h.savedPageIndex);if(!e)return!1;const n=(r,o,u,h)=>{if(c(this,Ie).has(r.id)){const f=c(this,Qe).get(h);f?r._setParentAndPosition(f,o,u):(r.pageIndex=h,r.x=o,r.y=u)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:u,newPageIndex:h}]of t)n(r,o,u,h)},undo:()=>{for(const[r,{savedX:o,savedY:u,savedPageIndex:h}]of t)n(r,o,u,h)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(c(this,Sa))for(const n of c(this,Sa).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||c(this,ae).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return c(this,ji)===t}getActive(){return c(this,ji)}getMode(){return c(this,rn)}isEditingMode(){return c(this,rn)!==Nt.NONE}get imageManager(){return Dt(this,"imageManager",new CT)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let p=0,m=e.rangeCount;p<m;p++)if(!t.contains(e.getRangeAt(p).commonAncestorContainer))return null;const{x:n,y:r,width:o,height:u}=t.getBoundingClientRect();let h;switch(t.getAttribute("data-main-rotation")){case"90":h=(p,m,y,b)=>({x:(m-r)/u,y:1-(p+y-n)/o,width:b/u,height:y/o});break;case"180":h=(p,m,y,b)=>({x:1-(p+y-n)/o,y:1-(m+b-r)/u,width:y/o,height:b/u});break;case"270":h=(p,m,y,b)=>({x:1-(m+b-r)/u,y:(p-n)/o,width:b/u,height:y/o});break;default:h=(p,m,y,b)=>({x:(p-n)/o,y:(m-r)/u,width:y/o,height:b/u});break}const f=[];for(let p=0,m=e.rangeCount;p<m;p++){const y=e.getRangeAt(p);if(!y.collapsed)for(const{x:b,y:A,width:S,height:w}of y.getClientRects())S===0||w===0||f.push(h(b,A,S,w))}return f.length===0?null:f}addChangedExistingAnnotation({annotationElementId:t,id:e}){(c(this,Jh)||E(this,Jh,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=c(this,Jh))==null||e.delete(t)}renderAnnotationElement(t){var r;const e=(r=c(this,Jh))==null?void 0:r.get(t.data.id);if(!e)return;const n=c(this,Cs).getRawValue(e);n&&(c(this,rn)===Nt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){var o;const r=(o=c(this,Jo))==null?void 0:o.get(t);r&&(r.setCanvas(e,n),c(this,Jo).delete(t))}addMissingCanvas(t,e){(c(this,Jo)||E(this,Jo,new Map)).set(t,e)}};Wh=new WeakMap,ji=new WeakMap,Qh=new WeakMap,Ie=new WeakMap,Qe=new WeakMap,Zh=new WeakMap,Cs=new WeakMap,Jh=new WeakMap,Ds=new WeakMap,qn=new WeakMap,Xo=new WeakMap,qo=new WeakMap,td=new WeakMap,Ko=new WeakMap,Sa=new WeakMap,Ms=new WeakMap,Ec=new WeakMap,ym=new WeakMap,bm=new WeakMap,ed=new WeakMap,vm=new WeakMap,Ta=new WeakMap,$o=new WeakMap,nd=new WeakMap,Wo=new WeakMap,_a=new WeakMap,hv=new WeakMap,Qo=new WeakMap,id=new WeakMap,Am=new WeakMap,Zo=new WeakMap,Sc=new WeakMap,sd=new WeakMap,Jo=new WeakMap,Em=new WeakMap,rn=new WeakMap,ae=new WeakMap,Sr=new WeakMap,tl=new WeakMap,el=new WeakMap,Sm=new WeakMap,ad=new WeakMap,Tm=new WeakMap,nl=new WeakMap,wa=new WeakMap,Tr=new WeakMap,_m=new WeakMap,wm=new WeakMap,Rs=new WeakMap,rt=new WeakSet,rb=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},MT=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of c(this,Qe).values())if(n.hasTextLayer(t))return n;return null},PI=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=C(this,rt,rb).call(this,t).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(c(this,_a)||E(this,_a,new ej(this)),c(this,_a).show(n,r,this.direction==="ltr"))},BI=function(){var o,u,h;const t=document.getSelection();if(!t||t.isCollapsed){c(this,Sr)&&((o=c(this,_a))==null||o.hide(),E(this,Sr,null),C(this,rt,Jn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===c(this,Sr))return;const r=C(this,rt,rb).call(this,t).closest(".textLayer");if(!r){c(this,Sr)&&((u=c(this,_a))==null||u.hide(),E(this,Sr,null),C(this,rt,Jn).call(this,{hasSelectedText:!1}));return}if((h=c(this,_a))==null||h.hide(),E(this,Sr,e),C(this,rt,Jn).call(this,{hasSelectedText:!0}),!(c(this,rn)!==Nt.HIGHLIGHT&&c(this,rn)!==Nt.NONE)&&(c(this,rn)===Nt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),E(this,Wo,this.isShiftKeyDown),!this.isShiftKeyDown)){const f=c(this,rn)===Nt.HIGHLIGHT?C(this,rt,MT).call(this,r):null;if(f==null||f.toggleDrawing(),c(this,id)){const p=new AbortController,m=this.combinedSignal(p),y=b=>{b.type==="pointerup"&&b.button!==0||(p.abort(),f==null||f.toggleDrawing(!0),b.type==="pointerup"&&C(this,rt,Rp).call(this,"main_toolbar"))};window.addEventListener("pointerup",y,{signal:m}),window.addEventListener("blur",y,{signal:m})}else f==null||f.toggleDrawing(!0),C(this,rt,Rp).call(this,"main_toolbar")}},Rp=function(t=""){c(this,rn)===Nt.HIGHLIGHT?this.highlightSelection(t):c(this,ym)&&C(this,rt,PI).call(this)},kI=function(){document.addEventListener("selectionchange",C(this,rt,BI).bind(this),{signal:this._signal})},UI=function(){if(c(this,$o))return;E(this,$o,new AbortController);const t=this.combinedSignal(c(this,$o));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},FI=function(){var t;(t=c(this,$o))==null||t.abort(),E(this,$o,null)},RT=function(){if(c(this,Zo))return;E(this,Zo,new AbortController);const t=this.combinedSignal(c(this,Zo));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},HI=function(){var t;(t=c(this,Zo))==null||t.abort(),E(this,Zo,null)},VI=function(){if(c(this,Xo))return;E(this,Xo,new AbortController);const t=this.combinedSignal(c(this,Xo));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},zI=function(){var t;(t=c(this,Xo))==null||t.abort(),E(this,Xo,null)},jI=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Jn=function(t){Object.entries(t).some(([n,r])=>c(this,Tm)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,Tm),t)}),c(this,rn)===Nt.HIGHLIGHT&&t.hasSelectedEditor===!1&&C(this,rt,mr).call(this,[[Xt.HIGHLIGHT_FREE,!0]]))},mr=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},GI=async function(){if(!c(this,Qo)){E(this,Qo,!0);const t=[];for(const e of c(this,Qe).values())t.push(e.enable());await Promise.all(t);for(const e of c(this,Ie).values())e.enable()}},YI=function(){if(this.unselectAll(),c(this,Qo)){E(this,Qo,!1);for(const t of c(this,Qe).values())t.disable();for(const t of c(this,Ie).values())t.disable()}},OT=function(t){const e=c(this,Qe).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},XI=function(){let t=null;for(t of c(this,ae));return t},Op=function(){if(c(this,Ie).size===0)return!0;if(c(this,Ie).size===1)for(const t of c(this,Ie).values())return t.isEmpty();return!1},NT=function(t){for(const e of c(this,ae))e.unselect();c(this,ae).clear();for(const e of t)e.isEmpty()||(c(this,ae).add(e),e.select());C(this,rt,Jn).call(this,{hasSelectedEditor:this.hasSelection})},$(kh,"TRANSLATE_SMALL",1),$(kh,"TRANSLATE_BIG",10);let Ru=kh;var vn,xa,Js,rd,Ca,Gi,od,Da,Si,_r,Tc,Ma,il,ua,Np,ob;const ti=class ti{constructor(t){_(this,ua);_(this,vn,null);_(this,xa,!1);_(this,Js,null);_(this,rd,null);_(this,Ca,null);_(this,Gi,null);_(this,od,!1);_(this,Da,null);_(this,Si,null);_(this,_r,null);_(this,Tc,null);_(this,Ma,!1);E(this,Si,t),E(this,Ma,t._uiManager.useNewAltTextFlow),c(ti,il)||E(ti,il,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){ti._l10n??(ti._l10n=t)}async render(){const t=E(this,Js,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=E(this,rd,document.createElement("span"));t.append(e),c(this,Ma)?(t.classList.add("new"),t.setAttribute("data-l10n-id",c(ti,il).missing),e.setAttribute("data-l10n-id",c(ti,il)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=c(this,Si)._uiManager._signal;t.addEventListener("contextmenu",Gs,{signal:n}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const r=o=>{o.preventDefault(),c(this,Si)._uiManager.editAltText(c(this,Si)),c(this,Ma)&&c(this,Si)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,ua,Np)}})};return t.addEventListener("click",r,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(E(this,od,!0),r(o))},{signal:n}),await C(this,ua,ob).call(this),t}finish(){c(this,Js)&&(c(this,Js).focus({focusVisible:c(this,od)}),E(this,od,!1))}isEmpty(){return c(this,Ma)?c(this,vn)===null:!c(this,vn)&&!c(this,xa)}hasData(){return c(this,Ma)?c(this,vn)!==null||!!c(this,_r):this.isEmpty()}get guessedText(){return c(this,_r)}async setGuessedText(t){c(this,vn)===null&&(E(this,_r,t),E(this,Tc,await ti._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),C(this,ua,ob).call(this))}toggleAltTextBadge(t=!1){var e;if(!c(this,Ma)||c(this,vn)){(e=c(this,Da))==null||e.remove(),E(this,Da,null);return}if(!c(this,Da)){const n=E(this,Da,document.createElement("div"));n.className="noAltTextBadge",c(this,Si).div.append(n)}c(this,Da).classList.toggle("hidden",!t)}serialize(t){let e=c(this,vn);return!t&&c(this,_r)===e&&(e=c(this,Tc)),{altText:e,decorative:c(this,xa),guessedText:c(this,_r),textWithDisclaimer:c(this,Tc)}}get data(){return{altText:c(this,vn),decorative:c(this,xa)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:r,cancel:o=!1}){n&&(E(this,_r,n),E(this,Tc,r)),!(c(this,vn)===t&&c(this,xa)===e)&&(o||(E(this,vn,t),E(this,xa,e)),C(this,ua,ob).call(this))}toggle(t=!1){c(this,Js)&&(!t&&c(this,Gi)&&(clearTimeout(c(this,Gi)),E(this,Gi,null)),c(this,Js).disabled=!t)}shown(){c(this,Si)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,ua,Np)}})}destroy(){var t,e;(t=c(this,Js))==null||t.remove(),E(this,Js,null),E(this,rd,null),E(this,Ca,null),(e=c(this,Da))==null||e.remove(),E(this,Da,null)}};vn=new WeakMap,xa=new WeakMap,Js=new WeakMap,rd=new WeakMap,Ca=new WeakMap,Gi=new WeakMap,od=new WeakMap,Da=new WeakMap,Si=new WeakMap,_r=new WeakMap,Tc=new WeakMap,Ma=new WeakMap,il=new WeakMap,ua=new WeakSet,Np=function(){return c(this,vn)&&"added"||c(this,vn)===null&&this.guessedText&&"review"||"missing"},ob=async function(){var r,o,u;const t=c(this,Js);if(!t)return;if(c(this,Ma)){if(t.classList.toggle("done",!!c(this,vn)),t.setAttribute("data-l10n-id",c(ti,il)[c(this,ua,Np)]),(r=c(this,rd))==null||r.setAttribute("data-l10n-id",c(ti,il)[`${c(this,ua,Np)}-label`]),!c(this,vn)){(o=c(this,Ca))==null||o.remove();return}}else{if(!c(this,vn)&&!c(this,xa)){t.classList.remove("done"),(u=c(this,Ca))==null||u.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=c(this,Ca);if(!e){E(this,Ca,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${c(this,Si).id}`;const h=100,f=c(this,Si)._uiManager._signal;f.addEventListener("abort",()=>{clearTimeout(c(this,Gi)),E(this,Gi,null)},{once:!0}),t.addEventListener("mouseenter",()=>{E(this,Gi,setTimeout(()=>{E(this,Gi,null),c(this,Ca).classList.add("show"),c(this,Si)._reportTelemetry({action:"alt_text_tooltip"})},h))},{signal:f}),t.addEventListener("mouseleave",()=>{var p;c(this,Gi)&&(clearTimeout(c(this,Gi)),E(this,Gi,null)),(p=c(this,Ca))==null||p.classList.remove("show")},{signal:f})}c(this,xa)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=c(this,vn)),e.parentNode||t.append(e);const n=c(this,Si).getElementForAltText();n==null||n.setAttribute("aria-describedby",e.id)},_(ti,il,null),$(ti,"_l10n",null);let Wb=ti;var Nn,Os,_c,Te,xm,sl,Ns,al,rl,wc,Cm,LT;class z0{constructor(t){_(this,Cm);_(this,Nn,null);_(this,Os,null);_(this,_c,!1);_(this,Te,null);_(this,xm,null);_(this,sl,null);_(this,Ns,null);_(this,al,null);_(this,rl,!1);_(this,wc,null);E(this,Te,t)}renderForToolbar(){const t=E(this,Os,document.createElement("button"));return t.className="comment",C(this,Cm,LT).call(this,t,!1)}renderForStandalone(){const t=E(this,Nn,document.createElement("button"));t.className="annotationCommentButton";const e=c(this,Te).commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(c(this,Te)._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const r=c(this,Te).commentButtonColor;r&&(n.backgroundColor=r)}return C(this,Cm,LT).call(this,t,!0)}focusButton(){setTimeout(()=>{var t;(t=c(this,Nn)??c(this,Os))==null||t.focus()},0)}onUpdatedColor(){if(!c(this,Nn))return;const t=c(this,Te).commentButtonColor;t&&(c(this,Nn).style.backgroundColor=t),c(this,Te)._uiManager.updatePopupColor(c(this,Te))}get commentButtonWidth(){var t;return(((t=c(this,Nn))==null?void 0:t.getBoundingClientRect().width)??0)/c(this,Te).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(c(this,wc))return c(this,wc);if(!c(this,Nn))return null;const{x:t,y:e,height:n}=c(this,Nn).getBoundingClientRect(),{x:r,y:o,width:u,height:h}=c(this,Te).parent.boundingClientRect;return[(t-r)/u,(e+n-o)/h]}set commentPopupPositionInLayer(t){E(this,wc,t)}hasDefaultPopupPosition(){return c(this,wc)===null}removeStandaloneCommentButton(){var t;(t=c(this,Nn))==null||t.remove(),E(this,Nn,null)}removeToolbarCommentButton(){var t;(t=c(this,Os))==null||t.remove(),E(this,Os,null)}setCommentButtonStates({selected:t,hasPopup:e}){c(this,Nn)&&(c(this,Nn).classList.toggle("selected",t),c(this,Nn).ariaExpanded=e)}edit(t){const e=this.commentPopupPositionInLayer;let n,r;if(e)[n,r]=e;else{[n,r]=c(this,Te).commentButtonPosition;const{width:m,height:y,x:b,y:A}=c(this,Te);n=b+n*m,r=A+r*y}const o=c(this,Te).parent.boundingClientRect,{x:u,y:h,width:f,height:p}=o;c(this,Te)._uiManager.editComment(c(this,Te),u+n*f,h+r*p,{...t,parentDimensions:o})}finish(){c(this,Os)&&(c(this,Os).focus({focusVisible:c(this,_c)}),E(this,_c,!1))}isDeleted(){return c(this,rl)||c(this,Ns)===""}isEmpty(){return c(this,Ns)===null}hasBeenEdited(){return this.isDeleted()||c(this,Ns)!==c(this,xm)}serialize(){return this.data}get data(){return{text:c(this,Ns),richText:c(this,sl),date:c(this,al),deleted:this.isDeleted()}}set data(t){if(t!==c(this,Ns)&&E(this,sl,null),t===null){E(this,Ns,""),E(this,rl,!0);return}E(this,Ns,t),E(this,al,new Date),E(this,rl,!1)}restoreData({text:t,richText:e,date:n}){E(this,Ns,t),E(this,sl,e),E(this,al,n),E(this,rl,!1)}setInitialText(t,e=null){E(this,xm,t),this.data=t,E(this,al,null),E(this,sl,e)}shown(){}destroy(){var t,e;(t=c(this,Os))==null||t.remove(),E(this,Os,null),(e=c(this,Nn))==null||e.remove(),E(this,Nn,null),E(this,Ns,""),E(this,sl,null),E(this,al,null),E(this,Te,null),E(this,_c,!1),E(this,rl,!1)}}Nn=new WeakMap,Os=new WeakMap,_c=new WeakMap,Te=new WeakMap,xm=new WeakMap,sl=new WeakMap,Ns=new WeakMap,al=new WeakMap,rl=new WeakMap,wc=new WeakMap,Cm=new WeakSet,LT=function(t,e){if(!c(this,Te)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[c(this,Te)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=c(this,Te)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",Gs,{signal:n}),e&&(t.addEventListener("focusin",o=>{c(this,Te)._focusEventsAllowed=!1,qe(o)},{capture:!0,signal:n}),t.addEventListener("focusout",o=>{c(this,Te)._focusEventsAllowed=!0,qe(o)},{capture:!0,signal:n})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const r=o=>{o.preventDefault(),t===c(this,Os)?this.edit():c(this,Te).toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(E(this,_c,!0),r(o))},{signal:n}),t.addEventListener("pointerenter",()=>{c(this,Te).toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{c(this,Te).toggleComment(!1,!1)},{signal:n}),t};var ld,xc,Dm,Mm,Rm,Om,Nm,wr,Cc,xr,Dc,Cr,Fl,qI,KI,$I;const H1=class H1{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:u=null,signal:h}){_(this,Fl);_(this,ld);_(this,xc,!1);_(this,Dm,null);_(this,Mm);_(this,Rm);_(this,Om);_(this,Nm);_(this,wr,null);_(this,Cc);_(this,xr,null);_(this,Dc);_(this,Cr,null);E(this,ld,t),E(this,Dm,n),E(this,Mm,e),E(this,Rm,r),E(this,Om,o),E(this,Nm,u),E(this,Dc,new AbortController),E(this,Cc,AbortSignal.any([h,c(this,Dc).signal])),t.addEventListener("touchstart",C(this,Fl,qI).bind(this),{passive:!1,signal:c(this,Cc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/qa.pixelRatio}destroy(){var t,e;(t=c(this,Dc))==null||t.abort(),E(this,Dc,null),(e=c(this,wr))==null||e.abort(),E(this,wr,null)}};ld=new WeakMap,xc=new WeakMap,Dm=new WeakMap,Mm=new WeakMap,Rm=new WeakMap,Om=new WeakMap,Nm=new WeakMap,wr=new WeakMap,Cc=new WeakMap,xr=new WeakMap,Dc=new WeakMap,Cr=new WeakMap,Fl=new WeakSet,qI=function(t){var r,o,u;if((r=c(this,Mm))!=null&&r.call(this))return;if(t.touches.length===1){if(c(this,wr))return;const h=E(this,wr,new AbortController),f=AbortSignal.any([c(this,Cc),h.signal]),p=c(this,ld),m={capture:!0,signal:f,passive:!1},y=b=>{var A;b.pointerType==="touch"&&((A=c(this,wr))==null||A.abort(),E(this,wr,null))};p.addEventListener("pointerdown",b=>{b.pointerType==="touch"&&(qe(b),y(b))},m),p.addEventListener("pointerup",y,m),p.addEventListener("pointercancel",y,m);return}if(!c(this,Cr)){E(this,Cr,new AbortController);const h=AbortSignal.any([c(this,Cc),c(this,Cr).signal]),f=c(this,ld),p={signal:h,capture:!1,passive:!1};f.addEventListener("touchmove",C(this,Fl,KI).bind(this),p);const m=C(this,Fl,$I).bind(this);f.addEventListener("touchend",m,p),f.addEventListener("touchcancel",m,p),p.capture=!0,f.addEventListener("pointerdown",qe,p),f.addEventListener("pointermove",qe,p),f.addEventListener("pointercancel",qe,p),f.addEventListener("pointerup",qe,p),(o=c(this,Rm))==null||o.call(this)}if(qe(t),t.touches.length!==2||(u=c(this,Dm))!=null&&u.call(this)){E(this,xr,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),E(this,xr,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},KI=function(t){var N;if(!c(this,xr)||t.touches.length!==2)return;qe(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:r,screenY:o}=e,{screenX:u,screenY:h}=n,f=c(this,xr),{touch0X:p,touch0Y:m,touch1X:y,touch1Y:b}=f,A=y-p,S=b-m,w=u-r,x=h-o,D=Math.hypot(w,x)||1,O=Math.hypot(A,S)||1;if(!c(this,xc)&&Math.abs(O-D)<=H1.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(f.touch0X=r,f.touch0Y=o,f.touch1X=u,f.touch1Y=h,!c(this,xc)){E(this,xc,!0);return}const M=[(r+u)/2,(o+h)/2];(N=c(this,Om))==null||N.call(this,M,O,D)},$I=function(t){var e;t.touches.length>=2||(c(this,Cr)&&(c(this,Cr).abort(),E(this,Cr,null),(e=c(this,Nm))==null||e.call(this)),c(this,xr)&&(qe(t),E(this,xr,null),E(this,xc,!1)))};let Qb=H1;var Mc,ta,Oe,re,Dr,cd,ol,Lm,Ln,Rc,Mr,Ls,ll,Im,Oc,Yi,Pm,Nc,Rr,Ra,ud,hd,Is,Lc,Bm,dv,xt,IT,km,PT,lb,WI,QI,BT,cb,kT,ZI,JI,t2,UT,e2,FT,n2,i2,s2,HT,Lp;const Ot=class Ot{constructor(t){_(this,xt);_(this,Mc,null);_(this,ta,null);_(this,Oe,null);_(this,re,null);_(this,Dr,null);_(this,cd,!1);_(this,ol,null);_(this,Lm,"");_(this,Ln,null);_(this,Rc,null);_(this,Mr,null);_(this,Ls,null);_(this,ll,null);_(this,Im,"");_(this,Oc,!1);_(this,Yi,null);_(this,Pm,!1);_(this,Nc,!1);_(this,Rr,!1);_(this,Ra,null);_(this,ud,0);_(this,hd,0);_(this,Is,null);_(this,Lc,null);$(this,"isSelected",!1);$(this,"_isCopy",!1);$(this,"_editToolbar",null);$(this,"_initialOptions",Object.create(null));$(this,"_initialData",null);$(this,"_isVisible",!0);$(this,"_uiManager",null);$(this,"_focusEventsAllowed",!0);_(this,Bm,!1);_(this,dv,Ot._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:u}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[o,u];const[h,f]=this.parentDimensions;this.x=t.x/h,this.y=t.y/f,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Ot.prototype._resizeWithKeyboard,e=Ru.TRANSLATE_SMALL,n=Ru.TRANSLATE_BIG;return Dt(this,"_resizerKeyboardManager",new dy([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Ot.prototype._stopResizingWithKeyboard]]))}updatePageIndex(t){this.pageIndex=t}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Dt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new sj({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Ot._l10n??(Ot._l10n=t),Ot._l10nResizer||(Ot._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ot._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Ot._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){ee("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,Bm)}set _isDraggable(t){var e;E(this,Bm,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,dv)}setParent(t){var e;t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(C(this,xt,Lp).call(this),(e=c(this,Ls))==null||e.remove(),E(this,Ls,null)),this.parent=t}focusin(t){this._focusEventsAllowed&&(c(this,Oc)?E(this,Oc,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,r){const[o,u]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(t+n)/o,this.y=(e+r)/u,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,r]=this.parentDimensions;this.setAt(t*n,e*r,this.width*n,this.height*r),this._onTranslated()}translate(t,e){C(this,xt,IT).call(this,this.parentDimensions,t,e)}translateInPage(t,e){c(this,Yi)||E(this,Yi,[this.x,this.y,this.width,this.height]),C(this,xt,IT).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){c(this,Yi)||E(this,Yi,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[r,o]}=this;if(this.x+=t/r,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:u,y:h}=this;const[f,p]=this.getBaseTranslation();u+=f,h+=p;const{style:m}=n;m.left=`${(100*u).toFixed(2)}%`,m.top=`${(100*h).toFixed(2)}%`,this._onTranslating(u,h),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!c(this,Yi)&&(c(this,Yi)[0]!==this.x||c(this,Yi)[1]!==this.y)}get _hasBeenResized(){return!!c(this,Yi)&&(c(this,Yi)[2]!==this.width||c(this,Yi)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Ot,r=n/t,o=n/e;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,r]}=this;let{x:o,y:u,width:h,height:f}=this;if(h*=n,f*=r,o*=n,u*=r,this._mustFixPosition)switch(t){case 0:o=Un(o,0,n-h),u=Un(u,0,r-f);break;case 90:o=Un(o,0,n-f),u=Un(u,h,r);break;case 180:o=Un(o,h,n),u=Un(u,f,r);break;case 270:o=Un(o,f,n),u=Un(u,0,r-h);break}this.x=o/=n,this.y=u/=r;const[p,m]=this.getBaseTranslation();o+=p,u+=m,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*u).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return C(n=Ot,km,PT).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return C(n=Ot,km,PT).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=c(this,Oe))==null||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||c(this,Nc))return this._editToolbar;this._editToolbar=new wT(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var t;(t=this._editToolbar)==null||t.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var t;(t=this._editToolbar)==null||t.removeButton("comment")}removeEditToolbar(){var t,e;(t=this._editToolbar)==null||t.remove(),this._editToolbar=null,(e=c(this,Oe))==null||e.destroy()}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return c(this,Oe)||(Wb.initialize(Ot._l10n),E(this,Oe,new Wb(this)),c(this,Mc)&&(c(this,Oe).data=c(this,Mc),E(this,Mc,null))),c(this,Oe)}get altTextData(){var t;return(t=c(this,Oe))==null?void 0:t.data}set altTextData(t){c(this,Oe)&&(c(this,Oe).data=t)}get guessedAltText(){var t;return(t=c(this,Oe))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=c(this,Oe))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=c(this,Oe))==null?void 0:e.serialize(t)}hasAltText(){return!!c(this,Oe)&&!c(this,Oe).isEmpty()}hasAltTextData(){var t;return((t=c(this,Oe))==null?void 0:t.hasData())??!1}focusCommentButton(){var t;(t=c(this,re))==null||t.focusButton()}addCommentButton(){return this.canAddComment?c(this,re)||E(this,re,new z0(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(c(this,Dr)){this._uiManager.isEditingMode()&&c(this,Dr).classList.remove("hidden");return}this.hasComment&&(E(this,Dr,c(this,re).renderForStandalone()),this.div.append(c(this,Dr)))}}removeStandaloneCommentButton(){c(this,re).removeStandaloneCommentButton(),E(this,Dr,null)}hideStandaloneCommentButton(){var t;(t=c(this,Dr))==null||t.classList.add("hidden")}get comment(){if(!c(this,re))return null;const{data:{richText:t,text:e,date:n,deleted:r}}=c(this,re);return{text:e,richText:t,date:n,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){c(this,re)||E(this,re,new z0(this)),typeof t=="object"&&t!==null?c(this,re).restoreData(t):c(this,re).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(c(this,re)||E(this,re,new z0(this)),c(this,re).setInitialText(t,n),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var t;return(t=c(this,re))==null?void 0:t.hasBeenEdited()}get hasDeletedComment(){var t;return(t=c(this,re))==null?void 0:t.isDeleted()}get hasComment(){return!!c(this,re)&&!c(this,re).isEmpty()&&!c(this,re).isDeleted()}async editComment(t){c(this,re)||E(this,re,new z0(this)),c(this,re).edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){c(this,re).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,r]=t.rect,[o]=this.pageDimensions,[u]=this.pageTranslation,h=u+o+1,f=r-100,p=h+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[h,f,p,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){c(this,re).data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var u;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=c(this,cd)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),C(this,xt,FT).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[r,o]=this.getInitialTranslation();return this.translate(r,o),LI(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,Lc)||E(this,Lc,new Qb({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:C(this,xt,ZI).bind(this),onPinching:C(this,xt,JI).bind(this),onPinchEnd:C(this,xt,t2).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(u=this._uiManager._editorUndoBar)==null||u.hide(),t}pointerdown(t){const{isMac:e}=gn.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(E(this,Oc,!0),this._isDraggable){C(this,xt,e2).call(this,t);return}C(this,xt,UT).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,Ra)&&clearTimeout(c(this,Ra)),E(this,Ra,setTimeout(()=>{var t;E(this,Ra,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const r=this.parentScale,[o,u]=this.pageDimensions,[h,f]=this.pageTranslation,p=t/r,m=e/r,y=this.x*o,b=this.y*u,A=this.width*o,S=this.height*u;switch(n){case 0:return[y+p+h,u-b-m-S+f,y+p+A+h,u-b-m+f];case 90:return[y+m+h,u-b+p+f,y+m+S+h,u-b+p+A+f];case 180:return[y-p-A+h,u-b+m+f,y-p+h,u-b+m+S+f];case 270:return[y-m-S+h,u-b-p-A+f,y-m+h,u-b-p+f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,r,o,u]=t,h=o-n,f=u-r;switch(this.rotation){case 0:return[n,e-u,h,f];case 90:return[n,e-r,f,h];case 180:return[o,e-r,h,f];case 270:return[o,e-u,f,h];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Ot._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var t;(t=c(this,re))==null||t.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:r,deleted:o,richText:u},uid:h,pageIndex:f,creationDate:p,modificationDate:m}=this;return{id:h,pageIndex:f,rect:this.getPDFRect(),richText:u,contentsObj:{str:t},creationDate:p,modificationDate:n||m,popupRef:!o,color:e,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),E(this,Nc,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),E(this,Nc,!1),!0):!1}isInEditMode(){return c(this,Nc)}shouldGetKeyboardEvents(){return c(this,Rr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:u}=window;return e<u&&r>0&&t<o&&n>0}rebuild(){C(this,xt,FT).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(t,e,n){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,E(r,Mc,t.accessibilityData),r._isCopy=t.isCopy||!1;const[o,u]=r.pageDimensions,[h,f,p,m]=r.getRectInCurrentCoords(t.rect,u);return r.x=h/o,r.y=f/u,r.width=p/o,r.height=m/u,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e,n;if((t=c(this,ll))==null||t.abort(),E(this,ll,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),c(this,Ra)&&(clearTimeout(c(this,Ra)),E(this,Ra,null)),C(this,xt,Lp).call(this),this.removeEditToolbar(),c(this,Is)){for(const r of c(this,Is).values())clearTimeout(r);E(this,Is,null)}this.parent=null,(e=c(this,Lc))==null||e.destroy(),E(this,Lc,null),(n=c(this,Ls))==null||n.remove(),E(this,Ls,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(C(this,xt,WI).call(this),c(this,Ln).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,r,o,u]=this.getPDFRect();return[Ot._round(n+(o-n)*t),Ot._round(r+(u-r)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return c(this,re).commentPopupPositionInLayer}set commentPopupPosition(t){c(this,re).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return c(this,re).hasDefaultPopupPosition()}get commentButtonWidth(){return c(this,re).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){var e;(e=c(this,re))==null||e.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),E(this,Mr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=c(this,Ln).children;if(!c(this,ta)){E(this,ta,Array.from(e));const u=C(this,xt,n2).bind(this),h=C(this,xt,i2).bind(this),f=this._uiManager._signal;for(const p of c(this,ta)){const m=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",u,{signal:f}),p.addEventListener("blur",h,{signal:f}),p.addEventListener("focus",C(this,xt,s2).bind(this,m),{signal:f}),p.setAttribute("data-l10n-id",Ot._l10nResizer[m])}}const n=c(this,ta)[0];let r=0;for(const u of e){if(u===n)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(c(this,ta).length/4);if(o!==r){if(o<r)for(let h=0;h<r-o;h++)c(this,Ln).append(c(this,Ln).firstElementChild);else if(o>r)for(let h=0;h<o-r;h++)c(this,Ln).firstElementChild.before(c(this,Ln).lastElementChild);let u=0;for(const h of e){const p=c(this,ta)[u++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",Ot._l10nResizer[p])}}C(this,xt,HT).call(this,0),E(this,Rr,!0),c(this,Ln).firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){c(this,Rr)&&C(this,xt,kT).call(this,c(this,Im),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){C(this,xt,Lp).call(this),this.div.focus()}select(){var t,e,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,o;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(e=this._editToolbar)==null||e.show(),(n=c(this,Oe))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var t;return(t=this.div)==null?void 0:t.focus({preventScroll:!0})},0)}unselect(){var t,e,n,r,o;this.isSelected&&(this.isSelected=!1,(t=c(this,Ln))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(o=c(this,Oe))==null||o.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return c(this,Pm)}set isEditing(t){E(this,Pm,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){c(this,Is)||E(this,Is,new Map);const{action:n}=t;let r=c(this,Is).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),c(this,Is).delete(n),c(this,Is).size===0&&E(this,Is,null)},Ot._telemetryTimeout),c(this,Is).set(n,r);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),E(this,cd,!1)}disable(){this.div&&(this.div.tabIndex=-1),E(this,cd,!0)}updateFakeAnnotationElement(t){if(!c(this,Ls)&&!this.deleted){E(this,Ls,t.addFakeAnnotation(this));return}if(this.deleted){c(this,Ls).remove(),E(this,Ls,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&c(this,Ls).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Mc=new WeakMap,ta=new WeakMap,Oe=new WeakMap,re=new WeakMap,Dr=new WeakMap,cd=new WeakMap,ol=new WeakMap,Lm=new WeakMap,Ln=new WeakMap,Rc=new WeakMap,Mr=new WeakMap,Ls=new WeakMap,ll=new WeakMap,Im=new WeakMap,Oc=new WeakMap,Yi=new WeakMap,Pm=new WeakMap,Nc=new WeakMap,Rr=new WeakMap,Ra=new WeakMap,ud=new WeakMap,hd=new WeakMap,Is=new WeakMap,Lc=new WeakMap,Bm=new WeakMap,dv=new WeakMap,xt=new WeakSet,IT=function([t,e],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},km=new WeakSet,PT=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},lb=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},WI=function(){if(c(this,Ln))return;E(this,Ln,document.createElement("div")),c(this,Ln).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const r=document.createElement("div");c(this,Ln).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",C(this,xt,QI).bind(this,n),{signal:e}),r.addEventListener("contextmenu",Gs,{signal:e}),r.tabIndex=-1}this.div.prepend(c(this,Ln))},QI=function(t,e){var m;e.preventDefault();const{isMac:n}=gn.platform;if(e.button!==0||e.ctrlKey&&n)return;(m=c(this,Oe))==null||m.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,E(this,Rc,[e.screenX,e.screenY]);const o=new AbortController,u=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",C(this,xt,kT).bind(this,t),{passive:!0,capture:!0,signal:u}),window.addEventListener("touchmove",qe,{passive:!1,signal:u}),window.addEventListener("contextmenu",Gs,{signal:u}),E(this,Mr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const h=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const p=()=>{var y;o.abort(),this.parent.togglePointerEvents(!0),(y=c(this,Oe))==null||y.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=h,this.div.style.cursor=f,C(this,xt,cb).call(this)};window.addEventListener("pointerup",p,{signal:u}),window.addEventListener("blur",p,{signal:u})},BT=function(t,e,n,r){this.width=n,this.height=r,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()},cb=function(){if(!c(this,Mr))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:r}=c(this,Mr);E(this,Mr,null);const o=this.x,u=this.y,h=this.width,f=this.height;o===t&&u===e&&h===n&&f===r||this.addCommands({cmd:C(this,xt,BT).bind(this,o,u,h,f),undo:C(this,xt,BT).bind(this,t,e,n,r),mustExec:!0})},kT=function(t,e){const[n,r]=this.parentDimensions,o=this.x,u=this.y,h=this.width,f=this.height,p=Ot.MIN_SIZE/n,m=Ot.MIN_SIZE/r,y=C(this,xt,lb).call(this,this.rotation),b=(F,Y)=>[y[0]*F+y[2]*Y,y[1]*F+y[3]*Y],A=C(this,xt,lb).call(this,360-this.rotation),S=(F,Y)=>[A[0]*F+A[2]*Y,A[1]*F+A[3]*Y];let w,x,D=!1,O=!1;switch(t){case"topLeft":D=!0,w=(F,Y)=>[0,0],x=(F,Y)=>[F,Y];break;case"topMiddle":w=(F,Y)=>[F/2,0],x=(F,Y)=>[F/2,Y];break;case"topRight":D=!0,w=(F,Y)=>[F,0],x=(F,Y)=>[0,Y];break;case"middleRight":O=!0,w=(F,Y)=>[F,Y/2],x=(F,Y)=>[0,Y/2];break;case"bottomRight":D=!0,w=(F,Y)=>[F,Y],x=(F,Y)=>[0,0];break;case"bottomMiddle":w=(F,Y)=>[F/2,Y],x=(F,Y)=>[F/2,0];break;case"bottomLeft":D=!0,w=(F,Y)=>[0,Y],x=(F,Y)=>[F,0];break;case"middleLeft":O=!0,w=(F,Y)=>[0,Y/2],x=(F,Y)=>[F,Y/2];break}const M=w(h,f),N=x(h,f);let L=b(...N);const I=Ot._round(o+L[0]),k=Ot._round(u+L[1]);let z=1,W=1,it,et;if(e.fromKeyboard)({deltaX:it,deltaY:et}=e);else{const{screenX:F,screenY:Y}=e,[tt,At]=c(this,Rc);[it,et]=this.screenToPageTranslation(F-tt,Y-At),c(this,Rc)[0]=F,c(this,Rc)[1]=Y}if([it,et]=S(it/n,et/r),D){const F=Math.hypot(h,f);z=W=Math.max(Math.min(Math.hypot(N[0]-M[0]-it,N[1]-M[1]-et)/F,1/h,1/f),p/h,m/f)}else O?z=Un(Math.abs(N[0]-M[0]-it),p,1)/h:W=Un(Math.abs(N[1]-M[1]-et),m,1)/f;const ot=Ot._round(h*z),Tt=Ot._round(f*W);L=b(...x(ot,Tt));const yt=I-L[0],bt=k-L[1];c(this,Yi)||E(this,Yi,[this.x,this.y,this.width,this.height]),this.width=ot,this.height=Tt,this.x=yt,this.y=bt,this.setDims(),this.fixAndSetPosition(),this._onResizing()},ZI=function(){var t;E(this,Mr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=c(this,Oe))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},JI=function(t,e,n){let o=.7*(n/e)+1-.7;if(o===1)return;const u=C(this,xt,lb).call(this,this.rotation),h=(I,k)=>[u[0]*I+u[2]*k,u[1]*I+u[3]*k],[f,p]=this.parentDimensions,m=this.x,y=this.y,b=this.width,A=this.height,S=Ot.MIN_SIZE/f,w=Ot.MIN_SIZE/p;o=Math.max(Math.min(o,1/b,1/A),S/b,w/A);const x=Ot._round(b*o),D=Ot._round(A*o);if(x===b&&D===A)return;c(this,Yi)||E(this,Yi,[m,y,b,A]);const O=h(b/2,A/2),M=Ot._round(m+O[0]),N=Ot._round(y+O[1]),L=h(x/2,D/2);this.x=M-L[0],this.y=N-L[1],this.width=x,this.height=D,this.setDims(),this.fixAndSetPosition(),this._onResizing()},t2=function(){var t;(t=c(this,Oe))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),C(this,xt,cb).call(this)},UT=function(t){const{isMac:e}=gn.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},e2=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),u={capture:!0,passive:!1,signal:o},h=p=>{r.abort(),E(this,ol,null),E(this,Oc,!1),this._uiManager.endDragSession()||C(this,xt,UT).call(this,p),n&&this._onStopDragging()};e&&(E(this,ud,t.clientX),E(this,hd,t.clientY),E(this,ol,t.pointerId),E(this,Lm,t.pointerType),window.addEventListener("pointermove",p=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:m,clientY:y,pointerId:b}=p;if(b!==c(this,ol)){qe(p);return}const[A,S]=this.screenToPageTranslation(m-c(this,ud),y-c(this,hd));E(this,ud,m),E(this,hd,y),this._uiManager.dragSelectedEditors(A,S)},u),window.addEventListener("touchmove",qe,u),window.addEventListener("pointerdown",p=>{p.pointerType===c(this,Lm)&&(c(this,Lc)||p.isPrimary)&&h(p),qe(p)},u));const f=p=>{if(!c(this,ol)||c(this,ol)===p.pointerId){h(p);return}qe(p)};window.addEventListener("pointerup",f,{signal:o}),window.addEventListener("blur",f,{signal:o})},FT=function(){if(c(this,ll)||!this.div)return;E(this,ll,new AbortController);const t=this._uiManager.combinedSignal(c(this,ll));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},n2=function(t){Ot._resizerKeyboardManager.exec(this,t)},i2=function(t){var e;c(this,Rr)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==c(this,Ln)&&C(this,xt,Lp).call(this)},s2=function(t){E(this,Im,c(this,Rr)?t:"")},HT=function(t){if(c(this,ta))for(const e of c(this,ta))e.tabIndex=t},Lp=function(){E(this,Rr,!1),C(this,xt,HT).call(this,-1),C(this,xt,cb).call(this)},_(Ot,km),$(Ot,"_l10n",null),$(Ot,"_l10nResizer",null),$(Ot,"_borderLineWidth",-1),$(Ot,"_colorManager",new DT),$(Ot,"_zIndex",1),$(Ot,"_telemetryTimeout",1e3);let _e=Ot;class sj extends _e{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const YO=3285377520,Ts=4294901760,va=65535;class a2{constructor(t){this.h1=t?t&4294967295:YO,this.h2=t?t&4294967295:YO}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let w=0,x=t.length;w<x;w++){const D=t.charCodeAt(w);D<=255?e[n++]=D:(e[n++]=D>>>8,e[n++]=D&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,o=n-r*4,u=new Uint32Array(e.buffer,0,r);let h=0,f=0,p=this.h1,m=this.h2;const y=3432918353,b=461845907,A=y&va,S=b&va;for(let w=0;w<r;w++)w&1?(h=u[w],h=h*y&Ts|h*A&va,h=h<<15|h>>>17,h=h*b&Ts|h*S&va,p^=h,p=p<<13|p>>>19,p=p*5+3864292196):(f=u[w],f=f*y&Ts|f*A&va,f=f<<15|f>>>17,f=f*b&Ts|f*S&va,m^=f,m=m<<13|m>>>19,m=m*5+3864292196);switch(h=0,o){case 3:h^=e[r*4+2]<<16;case 2:h^=e[r*4+1]<<8;case 1:h^=e[r*4],h=h*y&Ts|h*A&va,h=h<<15|h>>>17,h=h*b&Ts|h*S&va,r&1?p^=h:m^=h}this.h1=p,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Ts|t*36045&va,e=e*4283543511&Ts|((e<<16|t>>>16)*2950163797&Ts)>>>16,t^=e>>>1,t=t*444984403&Ts|t*60499&va,e=e*3301882366&Ts|((e<<16|t>>>16)*3120437893&Ts)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const VT=Object.freeze({map:null,hash:"",transfer:void 0});var Ic,Pc,Or,In,fv,r2;class N1{constructor(){_(this,fv);_(this,Ic,!1);_(this,Pc,null);_(this,Or,null);_(this,In,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=c(this,In).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return c(this,In).get(t)}remove(t){const e=c(this,In).get(t);if(e!==void 0&&(e instanceof _e&&c(this,Or).delete(e.annotationElementId),c(this,In).delete(t),c(this,In).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of c(this,In).values())if(n instanceof _e)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=c(this,In).get(t);let r=!1;if(n!==void 0)for(const[o,u]of Object.entries(e))n[o]!==u&&(r=!0,n[o]=u);else r=!0,c(this,In).set(t,e);r&&C(this,fv,r2).call(this),e instanceof _e&&((c(this,Or)||E(this,Or,new Map)).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return c(this,In).has(t)}get size(){return c(this,In).size}resetModified(){c(this,Ic)&&(E(this,Ic,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new o2(this)}get serializable(){if(c(this,In).size===0)return VT;const t=new Map,e=new a2,n=[],r=Object.create(null);let o=!1;for(const[u,h]of c(this,In)){const f=h instanceof _e?h.serialize(!1,r):h;h.page&&(h.pageIndex=h.page._pageIndex,delete h.page),f&&(t.set(u,f),e.update(`${u}:${JSON.stringify(f)}`),o||(o=!!f.bitmap))}if(o)for(const u of t.values())u.bitmap&&n.push(u.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:VT}get editorStats(){let t=null;const e=new Map;let n=0,r=0;for(const o of c(this,In).values()){if(!(o instanceof _e)){o.popup&&(o.popup.deleted?r+=1:n+=1);continue}o.isCommentDeleted?r+=1:o.hasEditedComment&&(n+=1);const u=o.telemetryFinalData;if(!u)continue;const{type:h}=u;e.has(h)||e.set(h,Object.getPrototypeOf(o).constructor),t||(t=Object.create(null));const f=t[h]||(t[h]=new Map);for(const[p,m]of Object.entries(u)){if(p==="type")continue;let y=f.get(p);y||(y=new Map,f.set(p,y));const b=y.get(m)??0;y.set(m,b+1)}}if((r>0||n>0)&&(t||(t=Object.create(null)),t.comments={deleted:r,edited:n}),!t)return null;for(const[o,u]of e)t[o]=u.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){E(this,Pc,null)}updateEditor(t,e){var r;const n=(r=c(this,Or))==null?void 0:r.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){var e;return((e=c(this,Or))==null?void 0:e.get(t))||null}get modifiedIds(){if(c(this,Pc))return c(this,Pc);const t=[];if(c(this,Or))for(const e of c(this,Or).values())e.serialize()&&t.push(e.annotationElementId);return E(this,Pc,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return c(this,In).entries()}}Ic=new WeakMap,Pc=new WeakMap,Or=new WeakMap,In=new WeakMap,fv=new WeakSet,r2=function(){c(this,Ic)||(E(this,Ic,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Um;class o2 extends N1{constructor(e){super();_(this,Um);const{map:n,hash:r,transfer:o}=e.serializable,u=structuredClone(n,o?{transfer:o}:null);E(this,Um,{map:u,hash:r,transfer:o})}get print(){ee("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,Um)}get modifiedIds(){return Dt(this,"modifiedIds",{ids:new Set,hash:""})}}Um=new WeakMap;var dd;class aj{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){_(this,dd,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),c(this,dd).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||c(this,dd).has(t.loadedName))){if(te(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:o,style:u}=t,h=new FontFace(r,o,u);this.addNativeFontFace(h);try{await h.load(),c(this,dd).add(r),n==null||n(t)}catch{Ct(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(h)}return}ee("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw Ct(`Failed to load font '${n.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Dt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Dt(this,"isSyncFontLoadingSupported",ai||gn.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(te(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:e,callback:t};return n.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Dt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(N,L){return N.charCodeAt(L)<<24|N.charCodeAt(L+1)<<16|N.charCodeAt(L+2)<<8|N.charCodeAt(L+3)&255}function r(N,L,I,k){const z=N.substring(0,L),W=N.substring(L+I);return z+k+W}let o,u;const h=this._document.createElement("canvas");h.width=1,h.height=1;const f=h.getContext("2d");let p=0;function m(N,L){if(++p>30){Ct("Load test font never loaded."),L();return}if(f.font="30px "+N,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){L();return}setTimeout(m.bind(null,N,L))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=r(b,976,y.length,y);const S=16,w=1482184792;let x=n(b,S);for(o=0,u=y.length-3;o<u;o+=4)x=x-w+n(y,o)|0;o<y.length&&(x=x-w+n(y+"XXX",o)|0),b=r(b,S,4,Hz(x));const D=`url(data:font/opentype;base64,${btoa(b)});`,O=`@font-face {font-family:"${y}";src:${D}}`;this.insertRule(O);const M=this._document.createElement("div");M.style.visibility="hidden",M.style.width=M.style.height="10px",M.style.position="absolute",M.style.top=M.style.left="0px";for(const N of[t.loadedName,y]){const L=this._document.createElement("span");L.textContent="Hi",L.style.fontFamily=N,M.append(L)}this._document.body.append(M),m(y,()=>{M.remove(),e.complete()})}}dd=new WeakMap;var de;class rj{constructor(t,e=null,n,r){_(this,de);this.compiledGlyphs=Object.create(null),E(this,de,t),this._inspectFont=e,n&&Object.assign(this,n),r&&(this.charProcOperatorList=r)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let r;try{r=t.get(n)}catch(u){Ct(`getPathGenerator - ignoring character: "${u}".`)}const o=wI(r==null?void 0:r.path);return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=o}get black(){return c(this,de).black}get bold(){return c(this,de).bold}get disableFontFace(){return c(this,de).disableFontFace??!1}set disableFontFace(t){Dt(this,"disableFontFace",!!t)}get fontExtraProperties(){return c(this,de).fontExtraProperties??!1}get isInvalidPDFjsFont(){return c(this,de).isInvalidPDFjsFont}get isType3Font(){return c(this,de).isType3Font}get italic(){return c(this,de).italic}get missingFile(){return c(this,de).missingFile}get remeasure(){return c(this,de).remeasure}get vertical(){return c(this,de).vertical}get ascent(){return c(this,de).ascent}get defaultWidth(){return c(this,de).defaultWidth}get descent(){return c(this,de).descent}get bbox(){return c(this,de).bbox}set bbox(t){Dt(this,"bbox",t)}get fontMatrix(){return c(this,de).fontMatrix}get fallbackName(){return c(this,de).fallbackName}get loadedName(){return c(this,de).loadedName}get mimetype(){return c(this,de).mimetype}get name(){return c(this,de).name}get data(){return c(this,de).data}clearData(){c(this,de).clearData()}get cssFontInfo(){return c(this,de).cssFontInfo}get systemFontInfo(){return c(this,de).systemFontInfo}get defaultVMetrics(){return c(this,de).defaultVMetrics}}de=new WeakMap;var fd,pd,Fm,md,ub;const Uh=class Uh{constructor(t){_(this,md);_(this,fd);_(this,pd);_(this,Fm);E(this,fd,t),E(this,pd,new DataView(c(this,fd))),E(this,Fm,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let r=0;for(const p of Uh.strings){const m=e.encode(t[p]);n[p]=m,r+=4+m.length}const o=new ArrayBuffer(r),u=new Uint8Array(o),h=new DataView(o);let f=0;for(const p of Uh.strings){const m=n[p],y=m.length;h.setUint32(f,y),u.set(m,f+4),f+=4+y}return te(f===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}get fontFamily(){return C(this,md,ub).call(this,0)}get fontWeight(){return C(this,md,ub).call(this,1)}get italicAngle(){return C(this,md,ub).call(this,2)}};fd=new WeakMap,pd=new WeakMap,Fm=new WeakMap,md=new WeakSet,ub=function(t){te(t<Uh.strings.length,"Invalid string index");let e=0;for(let r=0;r<t;r++)e+=c(this,pd).getUint32(e)+4;const n=c(this,pd).getUint32(e);return c(this,Fm).decode(new Uint8Array(c(this,fd),e+4,n))},$(Uh,"strings",["fontFamily","fontWeight","italicAngle"]);let Zb=Uh;var cl,Oa,Bc,kc,Ip;const Fh=class Fh{constructor(t){_(this,kc);_(this,cl);_(this,Oa);_(this,Bc);E(this,cl,t),E(this,Oa,new DataView(c(this,cl))),E(this,Bc,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let r=0;for(const b of Fh.strings){const A=e.encode(t[b]);n[b]=A,r+=4+A.length}r+=4;let o,u,h=1+r;t.style&&(o=e.encode(t.style.style),u=e.encode(t.style.weight),h+=4+o.length+4+u.length);const f=new ArrayBuffer(h),p=new Uint8Array(f),m=new DataView(f);let y=0;m.setUint8(y++,t.guessFallback?1:0),m.setUint32(y,0),y+=4,r=0;for(const b of Fh.strings){const A=n[b],S=A.length;r+=4+S,m.setUint32(y,S),p.set(A,y+4),y+=4+S}return m.setUint32(y-r-4,r),t.style&&(m.setUint32(y,o.length),p.set(o,y+4),y+=4+o.length,m.setUint32(y,u.length),p.set(u,y+4),y+=4+u.length),te(y<=f.byteLength,"SubstitionInfo.write: Buffer overflow"),f.transferToFixedLength(y)}get guessFallback(){return c(this,Oa).getUint8(0)!==0}get css(){return C(this,kc,Ip).call(this,0)}get loadedName(){return C(this,kc,Ip).call(this,1)}get baseFontName(){return C(this,kc,Ip).call(this,2)}get src(){return C(this,kc,Ip).call(this,3)}get style(){let t=1;t+=4+c(this,Oa).getUint32(t);const e=c(this,Oa).getUint32(t),n=c(this,Bc).decode(new Uint8Array(c(this,cl),t+4,e));t+=4+e;const r=c(this,Oa).getUint32(t),o=c(this,Bc).decode(new Uint8Array(c(this,cl),t+4,r));return{style:n,weight:o}}};cl=new WeakMap,Oa=new WeakMap,Bc=new WeakMap,kc=new WeakSet,Ip=function(t){te(t<Fh.strings.length,"Invalid string index");let e=5;for(let r=0;r<t;r++)e+=c(this,Oa).getUint32(e)+4;const n=c(this,Oa).getUint32(e);return c(this,Bc).decode(new Uint8Array(c(this,cl),e+4,n))},$(Fh,"strings",["css","loadedName","baseFontName","src"]);let Jb=Fh;var gd,yd,bd,vd,Xi,Na,Hm,fe,Xe,$s,hb,Pp;const It=class It{constructor({data:t,extra:e}){_(this,Xe);_(this,Na);_(this,Hm);_(this,fe);E(this,Na,t),E(this,Hm,new TextDecoder),E(this,fe,new DataView(c(this,Na))),e&&Object.assign(this,e)}get black(){return C(this,Xe,$s).call(this,0)}get bold(){return C(this,Xe,$s).call(this,1)}get disableFontFace(){return C(this,Xe,$s).call(this,2)}get fontExtraProperties(){return C(this,Xe,$s).call(this,3)}get isInvalidPDFjsFont(){return C(this,Xe,$s).call(this,4)}get isType3Font(){return C(this,Xe,$s).call(this,5)}get italic(){return C(this,Xe,$s).call(this,6)}get missingFile(){return C(this,Xe,$s).call(this,7)}get remeasure(){return C(this,Xe,$s).call(this,8)}get vertical(){return C(this,Xe,$s).call(this,9)}get ascent(){return C(this,Xe,hb).call(this,0)}get defaultWidth(){return C(this,Xe,hb).call(this,1)}get descent(){return C(this,Xe,hb).call(this,2)}get bbox(){let t=c(It,yd);if(c(this,fe).getUint8(t)===0)return;t+=1;const n=[];for(let r=0;r<4;r++)n.push(c(this,fe).getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=c(It,bd);if(c(this,fe).getUint8(t)===0)return;t+=1;const n=[];for(let r=0;r<6;r++)n.push(c(this,fe).getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=c(It,vd);if(c(this,fe).getUint8(t)===0)return;t+=1;const n=[];for(let r=0;r<3;r++)n.push(c(this,fe).getInt16(t,!0)),t+=2;return n}get fallbackName(){return C(this,Xe,Pp).call(this,0)}get loadedName(){return C(this,Xe,Pp).call(this,1)}get mimetype(){return C(this,Xe,Pp).call(this,2)}get name(){return C(this,Xe,Pp).call(this,3)}get data(){let t=c(It,Xi);const e=c(this,fe).getUint32(t);t+=4+e;const n=c(this,fe).getUint32(t);t+=4+n;const r=c(this,fe).getUint32(t);t+=4+r;const o=c(this,fe).getUint32(t);if(o!==0)return new Uint8Array(c(this,Na),t+4,o)}clearData(){let t=c(It,Xi);const e=c(this,fe).getUint32(t);t+=4+e;const n=c(this,fe).getUint32(t);t+=4+n;const r=c(this,fe).getUint32(t);t+=4+r;const o=c(this,fe).getUint32(t);new Uint8Array(c(this,Na),t+4,o).fill(0),c(this,fe).setUint32(t,0)}get cssFontInfo(){let t=c(It,Xi);const e=c(this,fe).getUint32(t);t+=4+e;const n=c(this,fe).getUint32(t);t+=4+n;const r=c(this,fe).getUint32(t);if(r===0)return null;const o=new Uint8Array(r);return o.set(new Uint8Array(c(this,Na),t+4,r)),new Zb(o.buffer)}get systemFontInfo(){let t=c(It,Xi);const e=c(this,fe).getUint32(t);t+=4+e;const n=c(this,fe).getUint32(t);if(n===0)return null;const r=new Uint8Array(n);return r.set(new Uint8Array(c(this,Na),t+4,n)),new Jb(r.buffer)}static write(t){const e=t.systemFontInfo?Jb.write(t.systemFontInfo):null,n=t.cssFontInfo?Zb.write(t.cssFontInfo):null,r=new TextEncoder,o={};let u=0;for(const w of It.strings)o[w]=r.encode(t[w]),u+=4+o[w].length;const h=c(It,Xi)+4+u+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),f=new ArrayBuffer(h),p=new Uint8Array(f),m=new DataView(f);let y=0;const b=It.bools.length;let A=0,S=0;for(let w=0;w<b;w++){const x=t[It.bools[w]];A|=(x===void 0?0:x?2:1)<<S,S+=2,(S===8||w===b-1)&&(m.setUint8(y++,A),A=0,S=0)}te(y===c(It,gd),"FontInfo.write: Boolean properties offset mismatch");for(const w of It.numbers)m.setFloat64(y,t[w]),y+=8;if(te(y===c(It,yd),"FontInfo.write: Number properties offset mismatch"),t.bbox){m.setUint8(y++,4);for(const w of t.bbox)m.setInt16(y,w,!0),y+=2}else m.setUint8(y++,0),y+=8;if(te(y===c(It,bd),"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){m.setUint8(y++,6);for(const w of t.fontMatrix)m.setFloat64(y,w,!0),y+=8}else m.setUint8(y++,0),y+=48;if(te(y===c(It,vd),"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){m.setUint8(y++,1);for(const w of t.defaultVMetrics)m.setInt16(y,w,!0),y+=2}else m.setUint8(y++,0),y+=6;te(y===c(It,Xi),"FontInfo.write: DefaultVMetrics properties offset mismatch"),m.setUint32(c(It,Xi),0),y+=4;for(const w of It.strings){const x=o[w],D=x.length;m.setUint32(y,D),p.set(x,y+4),y+=4+D}if(m.setUint32(c(It,Xi),y-c(It,Xi)-4),!e)m.setUint32(y,0),y+=4;else{const w=e.byteLength;m.setUint32(y,w),te(y+4+w<=f.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),p.set(new Uint8Array(e),y+4),y+=4+w}if(!n)m.setUint32(y,0),y+=4;else{const w=n.byteLength;m.setUint32(y,w),te(y+4+w<=f.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),p.set(new Uint8Array(n),y+4),y+=4+w}return t.data===void 0?(m.setUint32(y,0),y+=4):(m.setUint32(y,t.data.length),p.set(t.data,y+4),y+=4+t.data.length),te(y<=f.byteLength,"FontInfo.write: Buffer overflow"),f.transferToFixedLength(y)}};gd=new WeakMap,yd=new WeakMap,bd=new WeakMap,vd=new WeakMap,Xi=new WeakMap,Na=new WeakMap,Hm=new WeakMap,fe=new WeakMap,Xe=new WeakSet,$s=function(t){te(t<It.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,r=c(this,fe).getUint8(e)>>n&3;return r===0?void 0:r===2},hb=function(t){return te(t<It.numbers.length,"Invalid number index"),c(this,fe).getFloat64(c(It,gd)+t*8)},Pp=function(t){te(t<It.strings.length,"Invalid string index");let e=c(It,Xi)+4;for(let o=0;o<t;o++)e+=c(this,fe).getUint32(e)+4;const n=c(this,fe).getUint32(e),r=new Uint8Array(n);return r.set(new Uint8Array(c(this,Na),e+4,n)),c(this,Hm).decode(r)},$(It,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),$(It,"numbers",["ascent","defaultWidth","descent"]),$(It,"strings",["fallbackName","loadedName","mimetype","name"]),_(It,gd,Math.ceil(It.bools.length*2/8)),_(It,yd,c(It,gd)+It.numbers.length*8),_(It,bd,c(It,yd)+1+8),_(It,vd,c(It,bd)+1+48),_(It,Xi,c(It,vd)+1+6);let zT=It;var Vm,zm,jm,Gm,Ym,Xm,qm,Km;const Se=class Se{constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,n=null,r=[],o=[],u=[],h=[],f=null,p=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,n=t[2],u=t[3],e===1?r.push(...t[4],...t[5]):r.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,f=t[1],r=t[2],o=t[3],h=t[4]||[],n=t[6],p=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const m=Math.floor(r.length/2),y=Math.floor(o.length/3),b=u.length,A=h.length;let S=0;for(const L of h)S+=1,S=Math.ceil(S/4)*4,S+=4+L.coords.length*4,S+=4+L.colors.length*4,L.verticesPerRow!==void 0&&(S+=4);const w=20+m*8+y*3+b*8+(n?16:0)+(p?3:0)+S,x=new ArrayBuffer(w),D=new DataView(x),O=new Uint8Array(x);D.setUint8(c(Se,Vm),e),D.setUint8(c(Se,zm),n?1:0),D.setUint8(c(Se,jm),p?1:0),D.setUint8(c(Se,Gm),f),D.setUint32(c(Se,Ym),m,!0),D.setUint32(c(Se,Xm),y,!0),D.setUint32(c(Se,qm),b,!0),D.setUint32(c(Se,Km),A,!0);let M=20;new Float32Array(x,M,m*2).set(r),M+=m*8,O.set(o,M),M+=y*3;for(const[L,I]of u)D.setFloat32(M,L,!0),M+=4,D.setUint32(M,parseInt(I.slice(1),16),!0),M+=4;if(n)for(const L of n)D.setFloat32(M,L,!0),M+=4;p&&(O.set(p,M),M+=3);for(let L=0;L<h.length;L++){const I=h[L];D.setUint8(M,I.type),M+=1,M=Math.ceil(M/4)*4,D.setUint32(M,I.coords.length,!0),M+=4,new Int32Array(x,M,I.coords.length).set(I.coords),M+=I.coords.length*4,D.setUint32(M,I.colors.length,!0),M+=4,new Int32Array(x,M,I.colors.length).set(I.colors),M+=I.colors.length*4,I.verticesPerRow!==void 0&&(D.setUint32(M,I.verticesPerRow,!0),M+=4)}return x}getIR(){const t=this.view,e=this.data[c(Se,Vm)],n=!!this.data[c(Se,zm)],r=!!this.data[c(Se,jm)],o=t.getUint32(c(Se,Ym),!0),u=t.getUint32(c(Se,Xm),!0),h=t.getUint32(c(Se,qm),!0),f=t.getUint32(c(Se,Km),!0);let p=20;const m=new Float32Array(this.buffer,p,o*2);p+=o*8;const y=new Uint8Array(this.buffer,p,u*3);p+=u*3;const b=[];for(let x=0;x<h;++x){const D=t.getFloat32(p,!0);p+=4;const O=t.getUint32(p,!0);p+=4,b.push([D,`#${O.toString(16).padStart(6,"0")}`])}let A=null;if(n){A=[];for(let x=0;x<4;++x)A.push(t.getFloat32(p,!0)),p+=4}let S=null;r&&(S=new Uint8Array(this.buffer,p,3),p+=3);const w=[];for(let x=0;x<f;++x){const D=t.getUint8(p);p+=1,p=Math.ceil(p/4)*4;const O=t.getUint32(p,!0);p+=4;const M=new Int32Array(this.buffer,p,O);p+=O*4;const N=t.getUint32(p,!0);p+=4;const L=new Int32Array(this.buffer,p,N);p+=N*4;const I={type:D,coords:M,colors:L};D===AT.LATTICE&&(I.verticesPerRow=t.getUint32(p,!0),p+=4),w.push(I)}if(e===1)return["RadialAxial","axial",A,b,Array.from(m.slice(0,2)),Array.from(m.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",A,b,[m[0],m[1]],[m[3],m[4]],m[2],m[5]];if(e===3){const x=this.data[c(Se,Gm)];let D=null;if(m.length>0){let O=m[0],M=m[0],N=m[1],L=m[1];for(let I=0;I<m.length;I+=2){const k=m[I],z=m[I+1];O=O>k?k:O,N=N>z?z:N,M=M<k?k:M,L=L<z?z:L}D=[O,N,M,L]}return["Mesh",x,m,y,w,D,A,S]}throw new Error(`Unsupported pattern kind: ${e}`)}};Vm=new WeakMap,zm=new WeakMap,jm=new WeakMap,Gm=new WeakMap,Ym=new WeakMap,Xm=new WeakMap,qm=new WeakMap,Km=new WeakMap,_(Se,Vm,0),_(Se,zm,1),_(Se,jm,2),_(Se,Gm,3),_(Se,Ym,4),_(Se,Xm,8),_(Se,qm,12),_(Se,Km,16);let jT=Se;var Ad;class oj{constructor(t){_(this,Ad);E(this,Ad,t)}static write(t){let e,n;return gn.isFloat16ArraySupported?(n=new ArrayBuffer(t.length*2),e=new Float16Array(n)):(n=new ArrayBuffer(t.length*4),e=new Float32Array(n)),e.set(t),n}get path(){return gn.isFloat16ArraySupported?new Float16Array(c(this,Ad)):new Float32Array(c(this,Ad))}}Ad=new WeakMap;function lj(s){if(s instanceof URL)return s.href;if(typeof s=="string"){if(ai)return s;const t=URL.parse(s,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function cj(s){if(ai&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return Bv(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s==null?void 0:s.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function j0(s){if(typeof s!="string")return null;if(s.endsWith("/"))return s;throw new Error(`Invalid factory url: "${s}" must include trailing slash.`)}const GT=s=>typeof s=="object"&&Number.isInteger(s==null?void 0:s.num)&&s.num>=0&&Number.isInteger(s==null?void 0:s.gen)&&s.gen>=0,uj=s=>typeof s=="object"&&typeof(s==null?void 0:s.name)=="string",hj=Yz.bind(null,GT,uj);var Nr,pv;class dj{constructor(){_(this,Nr,new Map);_(this,pv,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};c(this,pv).then(()=>{for(const[r]of c(this,Nr))r.call(this,n)})}addEventListener(t,e,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:o}=n;if(o.aborted){Ct("LoopbackPort - cannot use an `aborted` signal.");return}const u=()=>this.removeEventListener(t,e);r=()=>o.removeEventListener("abort",u),o.addEventListener("abort",u)}c(this,Nr).set(e,r)}removeEventListener(t,e){const n=c(this,Nr).get(e);n==null||n(),c(this,Nr).delete(e)}terminate(){for(const[,t]of c(this,Nr))t==null||t();c(this,Nr).clear()}}Nr=new WeakMap,pv=new WeakMap;const G0={DATA:1,ERROR:2},sn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function XO(){}function Ai(s){if(s instanceof kl||s instanceof ET||s instanceof UO||s instanceof Kb||s instanceof kS)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||ee('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new kl(s.message);case"InvalidPDFException":return new ET(s.message);case"PasswordException":return new UO(s.message,s.code);case"ResponseException":return new Kb(s.message,s.status,s.missing);case"UnknownErrorException":return new kS(s.message,s.details)}return new kS(s.message,s.toString())}var Ed,zs,l2,c2,u2,db;class Bp{constructor(t,e,n){_(this,zs);_(this,Ed,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",C(this,zs,l2).bind(this),{signal:c(this,Ed).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},n)}catch(u){o.reject(u)}return o.promise}sendWithStream(t,e,n,r){const o=this.streamId++,u=this.sourceName,h=this.targetName,f=this.comObj;return new ReadableStream({start:p=>{const m=Promise.withResolvers();return this.streamControllers[o]={controller:p,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:u,targetName:h,action:t,streamId:o,data:e,desiredSize:p.desiredSize},r),m.promise},pull:p=>{const m=Promise.withResolvers();return this.streamControllers[o].pullCall=m,f.postMessage({sourceName:u,targetName:h,stream:sn.PULL,streamId:o,desiredSize:p.desiredSize}),m.promise},cancel:p=>{te(p instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[o].cancelCall=m,this.streamControllers[o].isClosed=!0,f.postMessage({sourceName:u,targetName:h,stream:sn.CANCEL,streamId:o,reason:Ai(p)}),m.promise}},n)}destroy(){var t;(t=c(this,Ed))==null||t.abort(),E(this,Ed,null)}}Ed=new WeakMap,zs=new WeakSet,l2=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){C(this,zs,u2).call(this,t);return}if(t.callback){const n=t.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===G0.DATA)r.resolve(t.data);else if(t.callback===G0.ERROR)r.reject(Ai(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,r=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(u){o.postMessage({sourceName:n,targetName:r,callback:G0.DATA,callbackId:t.callbackId,data:u})},function(u){o.postMessage({sourceName:n,targetName:r,callback:G0.ERROR,callbackId:t.callbackId,reason:Ai(u)})});return}if(t.streamId){C(this,zs,c2).call(this,t);return}e(t.data)},c2=function(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,o=this.comObj,u=this,h=this.actionHandler[t.action],f={enqueue(p,m=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=m,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:r,stream:sn.ENQUEUE,streamId:e,chunk:p},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:sn.CLOSE,streamId:e}),delete u.streamSinks[e])},error(p){te(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:sn.ERROR,streamId:e,reason:Ai(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[e]=f,Promise.try(h,t.data,f).then(function(){o.postMessage({sourceName:n,targetName:r,stream:sn.START_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:n,targetName:r,stream:sn.START_COMPLETE,streamId:e,reason:Ai(p)})})},u2=function(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,o=this.comObj,u=this.streamControllers[e],h=this.streamSinks[e];switch(t.stream){case sn.START_COMPLETE:t.success?u.startCall.resolve():u.startCall.reject(Ai(t.reason));break;case sn.PULL_COMPLETE:t.success?u.pullCall.resolve():u.pullCall.reject(Ai(t.reason));break;case sn.PULL:if(!h){o.postMessage({sourceName:n,targetName:r,stream:sn.PULL_COMPLETE,streamId:e,success:!0});break}h.desiredSize<=0&&t.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=t.desiredSize,Promise.try(h.onPull||XO).then(function(){o.postMessage({sourceName:n,targetName:r,stream:sn.PULL_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:n,targetName:r,stream:sn.PULL_COMPLETE,streamId:e,reason:Ai(p)})});break;case sn.ENQUEUE:if(te(u,"enqueue should have stream controller"),u.isClosed)break;u.controller.enqueue(t.chunk);break;case sn.CLOSE:if(te(u,"close should have stream controller"),u.isClosed)break;u.isClosed=!0,u.controller.close(),C(this,zs,db).call(this,u,e);break;case sn.ERROR:te(u,"error should have stream controller"),u.controller.error(Ai(t.reason)),C(this,zs,db).call(this,u,e);break;case sn.CANCEL_COMPLETE:t.success?u.cancelCall.resolve():u.cancelCall.reject(Ai(t.reason)),C(this,zs,db).call(this,u,e);break;case sn.CANCEL:if(!h)break;const f=Ai(t.reason);Promise.try(h.onCancel||XO,f).then(function(){o.postMessage({sourceName:n,targetName:r,stream:sn.CANCEL_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:n,targetName:r,stream:sn.CANCEL_COMPLETE,streamId:e,reason:Ai(p)})}),h.sinkCapability.reject(f),h.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},db=async function(t,e){var n,r,o;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(r=t.pullCall)==null?void 0:r.promise,(o=t.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[e]};var $m;class h2{constructor({enableHWA:t=!1}){_(this,$m,!1);E(this,$m,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!c(this,$m)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){ee("Abstract method `_createCanvas` called.")}}$m=new WeakMap;class fj extends h2{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class d2{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){ee("Abstract method `_fetch` called.")}}class qO extends d2{async _fetch(t){const e=await cy(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Bv(e)}}class f2{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,r,o){return"none"}destroy(t=!1){}}var Uc,Sd,Lr,Ir,Kn,Fc,Hc,ut,Gn,kp,Th,fb,_h,p2,YT,wh,Up,Fp,XT,Hp;class pj extends f2{constructor({docId:e,ownerDocument:n=globalThis.document}){super();_(this,ut);_(this,Uc);_(this,Sd);_(this,Lr);_(this,Ir);_(this,Kn);_(this,Fc);_(this,Hc,0);E(this,Ir,e),E(this,Kn,n)}addFilter(e){if(!e)return"none";let n=c(this,ut,Gn).get(e);if(n)return n;const[r,o,u]=C(this,ut,fb).call(this,e),h=e.length===1?r:`${r}${o}${u}`;if(n=c(this,ut,Gn).get(h),n)return c(this,ut,Gn).set(e,n),n;const f=`g_${c(this,Ir)}_transfer_map_${un(this,Hc)._++}`,p=C(this,ut,_h).call(this,f);c(this,ut,Gn).set(e,p),c(this,ut,Gn).set(h,p);const m=C(this,ut,wh).call(this,f);return C(this,ut,Fp).call(this,r,o,u,m),p}addHCMFilter(e,n){var S;const r=`${e}-${n}`,o="base";let u=c(this,ut,kp).get(o);if((u==null?void 0:u.key)===r||(u?((S=u.filter)==null||S.remove(),u.key=r,u.url="none",u.filter=null):(u={key:r,url:"none",filter:null},c(this,ut,kp).set(o,u)),!e||!n))return u.url;const h=C(this,ut,Hp).call(this,e);e=lt.makeHexColor(...h);const f=C(this,ut,Hp).call(this,n);if(n=lt.makeHexColor(...f),c(this,ut,Th).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return u.url;const p=new Array(256);for(let w=0;w<=255;w++){const x=w/255;p[w]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}const m=p.join(","),y=`g_${c(this,Ir)}_hcm_filter`,b=u.filter=C(this,ut,wh).call(this,y);C(this,ut,Fp).call(this,m,m,m,b),C(this,ut,YT).call(this,b);const A=(w,x)=>{const D=h[w]/255,O=f[w]/255,M=new Array(x+1);for(let N=0;N<=x;N++)M[N]=D+N/x*(O-D);return M.join(",")};return C(this,ut,Fp).call(this,A(0,5),A(1,5),A(2,5),b),u.url=C(this,ut,_h).call(this,y),u.url}addAlphaFilter(e){let n=c(this,ut,Gn).get(e);if(n)return n;const[r]=C(this,ut,fb).call(this,[e]),o=`alpha_${r}`;if(n=c(this,ut,Gn).get(o),n)return c(this,ut,Gn).set(e,n),n;const u=`g_${c(this,Ir)}_alpha_map_${un(this,Hc)._++}`,h=C(this,ut,_h).call(this,u);c(this,ut,Gn).set(e,h),c(this,ut,Gn).set(o,h);const f=C(this,ut,wh).call(this,u);return C(this,ut,XT).call(this,r,f),h}addLuminosityFilter(e){let n=c(this,ut,Gn).get(e||"luminosity");if(n)return n;let r,o;if(e?([r]=C(this,ut,fb).call(this,[e]),o=`luminosity_${r}`):o="luminosity",n=c(this,ut,Gn).get(o),n)return c(this,ut,Gn).set(e,n),n;const u=`g_${c(this,Ir)}_luminosity_map_${un(this,Hc)._++}`,h=C(this,ut,_h).call(this,u);c(this,ut,Gn).set(e,h),c(this,ut,Gn).set(o,h);const f=C(this,ut,wh).call(this,u);return C(this,ut,p2).call(this,f),e&&C(this,ut,XT).call(this,r,f),h}addHighlightHCMFilter(e,n,r,o,u){var O;const h=`${n}-${r}-${o}-${u}`;let f=c(this,ut,kp).get(e);if((f==null?void 0:f.key)===h||(f?((O=f.filter)==null||O.remove(),f.key=h,f.url="none",f.filter=null):(f={key:h,url:"none",filter:null},c(this,ut,kp).set(e,f)),!n||!r))return f.url;const[p,m]=[n,r].map(C(this,ut,Hp).bind(this));let y=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),b=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[A,S]=[o,u].map(C(this,ut,Hp).bind(this));b<y&&([y,b,A,S]=[b,y,S,A]),c(this,ut,Th).style.color="";const w=(M,N,L)=>{const I=new Array(256),k=(b-y)/L,z=M/255,W=(N-M)/(255*L);let it=0;for(let et=0;et<=L;et++){const ot=Math.round(y+et*k),Tt=z+et*W;for(let yt=it;yt<=ot;yt++)I[yt]=Tt;it=ot+1}for(let et=it;et<256;et++)I[et]=I[it-1];return I.join(",")},x=`g_${c(this,Ir)}_hcm_${e}_filter`,D=f.filter=C(this,ut,wh).call(this,x);return C(this,ut,YT).call(this,D),C(this,ut,Fp).call(this,w(A[0],S[0],5),w(A[1],S[1],5),w(A[2],S[2],5),D),f.url=C(this,ut,_h).call(this,x),f.url}destroy(e=!1){var n,r,o,u;e&&((n=c(this,Fc))!=null&&n.size)||((r=c(this,Lr))==null||r.parentNode.parentNode.remove(),E(this,Lr,null),(o=c(this,Sd))==null||o.clear(),E(this,Sd,null),(u=c(this,Fc))==null||u.clear(),E(this,Fc,null),E(this,Hc,0))}}Uc=new WeakMap,Sd=new WeakMap,Lr=new WeakMap,Ir=new WeakMap,Kn=new WeakMap,Fc=new WeakMap,Hc=new WeakMap,ut=new WeakSet,Gn=function(){return c(this,Sd)||E(this,Sd,new Map)},kp=function(){return c(this,Fc)||E(this,Fc,new Map)},Th=function(){if(!c(this,Lr)){const e=c(this,Kn).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=c(this,Kn).createElementNS(pr,"svg");r.setAttribute("width",0),r.setAttribute("height",0),E(this,Lr,c(this,Kn).createElementNS(pr,"defs")),e.append(r),r.append(c(this,Lr)),c(this,Kn).body.append(e)}return c(this,Lr)},fb=function(e){if(e.length===1){const p=e[0],m=new Array(256);for(let b=0;b<256;b++)m[b]=p[b]/255;const y=m.join(",");return[y,y,y]}const[n,r,o]=e,u=new Array(256),h=new Array(256),f=new Array(256);for(let p=0;p<256;p++)u[p]=n[p]/255,h[p]=r[p]/255,f[p]=o[p]/255;return[u.join(","),h.join(","),f.join(",")]},_h=function(e){if(c(this,Uc)===void 0){E(this,Uc,"");const n=c(this,Kn).URL;n!==c(this,Kn).baseURI&&(kv(n)?Ct('#createUrl: ignore "data:"-URL for performance reasons.'):E(this,Uc,EI(n,"")))}return`url(${c(this,Uc)}#${e})`},p2=function(e){const n=c(this,Kn).createElementNS(pr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},YT=function(e){const n=c(this,Kn).createElementNS(pr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},wh=function(e){const n=c(this,Kn).createElementNS(pr,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),c(this,ut,Th).append(n),n},Up=function(e,n,r){const o=c(this,Kn).createElementNS(pr,n);o.setAttribute("type","discrete"),o.setAttribute("tableValues",r),e.append(o)},Fp=function(e,n,r,o){const u=c(this,Kn).createElementNS(pr,"feComponentTransfer");o.append(u),C(this,ut,Up).call(this,u,"feFuncR",e),C(this,ut,Up).call(this,u,"feFuncG",n),C(this,ut,Up).call(this,u,"feFuncB",r)},XT=function(e,n){const r=c(this,Kn).createElementNS(pr,"feComponentTransfer");n.append(r),C(this,ut,Up).call(this,r,"feFuncA",e)},Hp=function(e){return c(this,ut,Th).style.color=e,hy(getComputedStyle(c(this,ut,Th)).getPropertyValue("color"))};class m2{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){ee("Abstract method `_fetch` called.")}}class KO extends m2{async _fetch(t){const e=await cy(t,"arraybuffer");return new Uint8Array(e)}}class g2{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){ee("Abstract method `_fetch` called.")}}class $O extends g2{async _fetch(t){const e=await cy(t,"arraybuffer");return new Uint8Array(e)}}ai&&Ct("Please use the `legacy` build in Node.js environments.");async function L1(s){const e=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(e)}class mj extends f2{}class gj extends h2{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class yj extends d2{async _fetch(t){return L1(t)}}class bj extends m2{async _fetch(t){return L1(t)}}class vj extends g2{async _fetch(t){return L1(t)}}const bh="__forcedDependency",{floor:WO,ceil:QO}=Math;function Y0(s,t,e,n,r,o){s[t*4+0]=Math.min(s[t*4+0],e),s[t*4+1]=Math.min(s[t*4+1],n),s[t*4+2]=Math.max(s[t*4+2],r),s[t*4+3]=Math.max(s[t*4+3],o)}const qT=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Td,ul;class Aj{constructor(t,e){_(this,Td);_(this,ul);E(this,Td,t),E(this,ul,e)}get length(){return c(this,Td).length}isEmpty(t){return c(this,Td)[t]===qT}minX(t){return c(this,ul)[t*4+0]/256}minY(t){return c(this,ul)[t*4+1]/256}maxX(t){return(c(this,ul)[t*4+2]+1)/256}maxY(t){return(c(this,ul)[t*4+3]+1)/256}}Td=new WeakMap,ul=new WeakMap;const X0=(s,t)=>{if(!s)return;let e=s.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},s.set(t,e)),e};var Ti,_i,Vc,ea,zc,Pr,oe,pe,Br,wi,Wm,_d,jc,Gc,kr,$n,La,Qm,KT;class Ej{constructor(t,e,n=!1){_(this,Qm);_(this,Ti,{__proto__:null});_(this,_i,{__proto__:null,transform:[],moveText:[],sameLineText:[],[bh]:[]});_(this,Vc,new Map);_(this,ea,[]);_(this,zc,[]);_(this,Pr,[[1,0,0,1,0,0]]);_(this,oe,[-1/0,-1/0,1/0,1/0]);_(this,pe,new Float64Array([1/0,1/0,-1/0,-1/0]));_(this,Br,-1);_(this,wi,new Set);_(this,Wm,new Map);_(this,_d,new Map);_(this,jc);_(this,Gc);_(this,kr);_(this,$n);_(this,La);E(this,jc,t.width),E(this,Gc,t.height),C(this,Qm,KT).call(this,e),n&&E(this,La,new Map)}growOperationsCount(t){t>=c(this,$n).length&&C(this,Qm,KT).call(this,t,c(this,$n))}save(t){return E(this,Ti,{__proto__:c(this,Ti)}),E(this,_i,{__proto__:c(this,_i),transform:{__proto__:c(this,_i).transform},moveText:{__proto__:c(this,_i).moveText},sameLineText:{__proto__:c(this,_i).sameLineText},[bh]:{__proto__:c(this,_i)[bh]}}),E(this,oe,{__proto__:c(this,oe)}),c(this,ea).push(t),this}restore(t){var r;const e=Object.getPrototypeOf(c(this,Ti));if(e===null)return this;E(this,Ti,e),E(this,_i,Object.getPrototypeOf(c(this,_i))),E(this,oe,Object.getPrototypeOf(c(this,oe)));const n=c(this,ea).pop();return n!==void 0&&((r=X0(c(this,La),t))==null||r.dependencies.add(n),c(this,$n)[t]=c(this,$n)[n]),this}recordOpenMarker(t){return c(this,ea).push(t),this}getOpenMarker(){return c(this,ea).length===0?null:c(this,ea).at(-1)}recordCloseMarker(t){var n;const e=c(this,ea).pop();return e!==void 0&&((n=X0(c(this,La),t))==null||n.dependencies.add(e),c(this,$n)[t]=c(this,$n)[e]),this}beginMarkedContent(t){return c(this,zc).push(t),this}endMarkedContent(t){var n;const e=c(this,zc).pop();return e!==void 0&&((n=X0(c(this,La),t))==null||n.dependencies.add(e),c(this,$n)[t]=c(this,$n)[e]),this}pushBaseTransform(t){return c(this,Pr).push(lt.multiplyByDOMMatrix(c(this,Pr).at(-1),t.getTransform())),this}popBaseTransform(){return c(this,Pr).length>1&&c(this,Pr).pop(),this}recordSimpleData(t,e){return c(this,Ti)[t]=e,this}recordIncrementalData(t,e){return c(this,_i)[t].push(e),this}resetIncrementalData(t,e){return c(this,_i)[t].length=0,this}recordNamedData(t,e){return c(this,Vc).set(t,e),this}recordSimpleDataFromNamed(t,e,n){c(this,Ti)[t]=c(this,Vc).get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(bh,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in c(this,Ti)&&this.recordFutureForcedDependency(e,c(this,Ti)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of c(this,wi))this.recordFutureForcedDependency(bh,t);return this}resetBBox(t){return c(this,Br)!==t&&(E(this,Br,t),c(this,pe)[0]=1/0,c(this,pe)[1]=1/0,c(this,pe)[2]=-1/0,c(this,pe)[3]=-1/0),this}recordClipBox(t,e,n,r,o,u){const h=lt.multiplyByDOMMatrix(c(this,Pr).at(-1),e.getTransform()),f=[1/0,1/0,-1/0,-1/0];lt.axialAlignedBoundingBox([n,o,r,u],h,f);const p=lt.intersect(c(this,oe),f);return p?(c(this,oe)[0]=p[0],c(this,oe)[1]=p[1],c(this,oe)[2]=p[2],c(this,oe)[3]=p[3]):(c(this,oe)[0]=c(this,oe)[1]=1/0,c(this,oe)[2]=c(this,oe)[3]=-1/0),this}recordBBox(t,e,n,r,o,u){const h=c(this,oe);if(h[0]===1/0)return this;const f=lt.multiplyByDOMMatrix(c(this,Pr).at(-1),e.getTransform());if(h[0]===-1/0)return lt.axialAlignedBoundingBox([n,o,r,u],f,c(this,pe)),this;const p=[1/0,1/0,-1/0,-1/0];return lt.axialAlignedBoundingBox([n,o,r,u],f,p),c(this,pe)[0]=Math.min(c(this,pe)[0],Math.max(p[0],h[0])),c(this,pe)[1]=Math.min(c(this,pe)[1],Math.max(p[1],h[1])),c(this,pe)[2]=Math.max(c(this,pe)[2],Math.min(p[2],h[2])),c(this,pe)[3]=Math.max(c(this,pe)[3],Math.min(p[3],h[3])),this}recordCharacterBBox(t,e,n,r=1,o=0,u=0,h){const f=n.bbox;let p,m;if(f&&(p=f[2]!==f[0]&&f[3]!==f[1]&&c(this,_d).get(n),p!==!1&&(m=[0,0,0,0],lt.axialAlignedBoundingBox(f,n.fontMatrix,m),(r!==1||o!==0||u!==0)&&lt.scaleMinMax([r,0,0,-r,o,u],m),p)))return this.recordBBox(t,e,m[0],m[2],m[1],m[3]);if(!h)return this.recordFullPageBBox(t);const y=h();return f&&m&&p===void 0&&(p=m[0]<=o-y.actualBoundingBoxLeft&&m[2]>=o+y.actualBoundingBoxRight&&m[1]<=u-y.actualBoundingBoxAscent&&m[3]>=u+y.actualBoundingBoxDescent,c(this,_d).set(n,p),p)?this.recordBBox(t,e,m[0],m[2],m[1],m[3]):this.recordBBox(t,e,o-y.actualBoundingBoxLeft,o+y.actualBoundingBoxRight,u-y.actualBoundingBoxAscent,u+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return c(this,pe)[0]=Math.max(0,c(this,oe)[0]),c(this,pe)[1]=Math.max(0,c(this,oe)[1]),c(this,pe)[2]=Math.min(c(this,jc),c(this,oe)[2]),c(this,pe)[3]=Math.min(c(this,Gc),c(this,oe)[3]),this}getSimpleIndex(t){return c(this,Ti)[t]}recordDependencies(t,e){const n=c(this,wi),r=c(this,Ti),o=c(this,_i);for(const u of e)u in c(this,Ti)?n.add(r[u]):u in o&&o[u].forEach(n.add,n);return this}recordNamedDependency(t,e){return c(this,Vc).has(e)&&c(this,wi).add(c(this,Vc).get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[bh]),c(this,La)){const n=X0(c(this,La),t),{dependencies:r}=n;c(this,wi).forEach(r.add,r),c(this,ea).forEach(r.add,r),c(this,zc).forEach(r.add,r),r.delete(t),n.isRenderingOperation=!0}if(c(this,Br)===t){const n=WO(c(this,pe)[0]*256/c(this,jc)),r=WO(c(this,pe)[1]*256/c(this,Gc)),o=QO(c(this,pe)[2]*256/c(this,jc)),u=QO(c(this,pe)[3]*256/c(this,Gc));Y0(c(this,kr),t,n,r,o,u);for(const h of c(this,wi))h!==t&&Y0(c(this,kr),h,n,r,o,u);for(const h of c(this,ea))h!==t&&Y0(c(this,kr),h,n,r,o,u);for(const h of c(this,zc))h!==t&&Y0(c(this,kr),h,n,r,o,u);e||(c(this,wi).clear(),E(this,Br,-1))}return this}recordShowTextOperation(t,e=!1){const n=Array.from(c(this,wi));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const r of n)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,e=!1){return c(this,Br)===t&&(E(this,Br,-1),c(this,oe)[0]=Math.max(c(this,oe)[0],c(this,pe)[0]),c(this,oe)[1]=Math.max(c(this,oe)[1],c(this,pe)[1]),c(this,oe)[2]=Math.min(c(this,oe)[2],c(this,pe)[2]),c(this,oe)[3]=Math.min(c(this,oe)[3],c(this,pe)[3]),e||c(this,wi).clear()),this}_takePendingDependencies(){const t=c(this,wi);return E(this,wi,new Set),t}_extractOperation(t){const e=c(this,Wm).get(t);return c(this,Wm).delete(t),e}_pushPendingDependencies(t){for(const e of t)c(this,wi).add(e)}take(){return c(this,_d).clear(),new Aj(c(this,$n),c(this,kr))}takeDebugMetadata(){return c(this,La)}}Ti=new WeakMap,_i=new WeakMap,Vc=new WeakMap,ea=new WeakMap,zc=new WeakMap,Pr=new WeakMap,oe=new WeakMap,pe=new WeakMap,Br=new WeakMap,wi=new WeakMap,Wm=new WeakMap,_d=new WeakMap,jc=new WeakMap,Gc=new WeakMap,kr=new WeakMap,$n=new WeakMap,La=new WeakMap,Qm=new WeakSet,KT=function(t,e){const n=new ArrayBuffer(t*4);E(this,kr,new Uint8ClampedArray(n)),E(this,$n,new Uint32Array(n)),e&&e.length>0?(c(this,$n).set(e),c(this,$n).fill(qT,e.length)):c(this,$n).fill(qT)};var ve,ze,na,wd,xd;const V1=class V1{constructor(t,e,n){_(this,ve);_(this,ze);_(this,na);_(this,wd,0);_(this,xd,0);if(t instanceof V1&&c(t,na)===!!n)return t;E(this,ve,t),E(this,ze,e),E(this,na,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(t){return un(this,xd)._++,c(this,ve).save(c(this,ze)),this}restore(t){return c(this,xd)>0&&(c(this,ve).restore(c(this,ze)),un(this,xd)._--),this}recordOpenMarker(t){return un(this,wd)._++,this}getOpenMarker(){return c(this,wd)>0?c(this,ze):c(this,ve).getOpenMarker()}recordCloseMarker(t){return un(this,wd)._--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return c(this,ve).pushBaseTransform(t),this}popBaseTransform(){return c(this,ve).popBaseTransform(),this}recordSimpleData(t,e){return c(this,ve).recordSimpleData(t,c(this,ze)),this}recordIncrementalData(t,e){return c(this,ve).recordIncrementalData(t,c(this,ze)),this}resetIncrementalData(t,e){return c(this,ve).resetIncrementalData(t,c(this,ze)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return c(this,ve).recordSimpleDataFromNamed(t,e,c(this,ze)),this}recordFutureForcedDependency(t,e){return c(this,ve).recordFutureForcedDependency(t,c(this,ze)),this}inheritSimpleDataAsFutureForcedDependencies(t){return c(this,ve).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return c(this,ve).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return c(this,na)||c(this,ve).resetBBox(c(this,ze)),this}recordClipBox(t,e,n,r,o,u){return c(this,na)||c(this,ve).recordClipBox(c(this,ze),e,n,r,o,u),this}recordBBox(t,e,n,r,o,u){return c(this,na)||c(this,ve).recordBBox(c(this,ze),e,n,r,o,u),this}recordCharacterBBox(t,e,n,r,o,u,h){return c(this,na)||c(this,ve).recordCharacterBBox(c(this,ze),e,n,r,o,u,h),this}recordFullPageBBox(t){return c(this,na)||c(this,ve).recordFullPageBBox(c(this,ze)),this}getSimpleIndex(t){return c(this,ve).getSimpleIndex(t)}recordDependencies(t,e){return c(this,ve).recordDependencies(c(this,ze),e),this}recordNamedDependency(t,e){return c(this,ve).recordNamedDependency(c(this,ze),e),this}recordOperation(t){return c(this,ve).recordOperation(c(this,ze),!0),this}recordShowTextOperation(t){return c(this,ve).recordShowTextOperation(c(this,ze),!0),this}bboxToClipBoxDropOperation(t){return c(this,na)||c(this,ve).bboxToClipBoxDropOperation(c(this,ze),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};ve=new WeakMap,ze=new WeakMap,na=new WeakMap,wd=new WeakMap,xd=new WeakMap;let tv=V1;const _s={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Fn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function $T(s,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,n),s.clip(r)}class I1{isModifyingCurrentTransform(){return!1}getPattern(){ee("Abstract method `getPattern` called.")}}class Sj extends I1{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let n,r=this._p0,o=this._p1;if(e&&(r=r.slice(),o=o.slice(),lt.applyTransform(r,e),lt.applyTransform(o,e)),this._type==="axial")n=t.createLinearGradient(r[0],r[1],o[0],o[1]);else if(this._type==="radial"){let u=this._r0,h=this._r1;if(e){const f=new Float32Array(2);lt.singularValueDecompose2dScale(e,f),u*=f[0],h*=f[0]}n=t.createRadialGradient(r[0],r[1],u,o[0],o[1],h)}for(const u of this._colorStops)n.addColorStop(u[0],u[1]);return n}getPattern(t,e,n,r){let o;if(r===Fn.STROKE||r===Fn.FILL){if(this.isOriginBased()){let b=lt.transform(n,e.baseTransform);this.matrix&&(b=lt.transform(b,this.matrix));const A=.001,S=Math.hypot(b[0],b[1]),w=Math.hypot(b[2],b[3]),x=(b[0]*b[2]+b[1]*b[3])/(S*w);if(Math.abs(x)<A)if(this.isRadial()){if(Math.abs(S-w)<A)return this._createGradient(t,b)}else return this._createGradient(t,b)}const u=e.current.getClippedPathBoundingBox(r,Pe(t))||[0,0,0,0],h=Math.ceil(u[2]-u[0])||1,f=Math.ceil(u[3]-u[1])||1,p=e.cachedCanvases.getCanvas("pattern",h,f),m=p.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-u[0],-u[1]),n=lt.transform(n,[1,0,0,1,u[0],u[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),$T(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),o=t.createPattern(p.canvas,"no-repeat");const y=new DOMMatrix(n);o.setTransform(y)}else $T(t,this._bbox),o=this._createGradient(t);return o}}function HS(s,t,e,n,r,o,u,h){const f=t.coords,p=t.colors,m=s.data,y=s.width*4;let b;f[e+1]>f[n+1]&&(b=e,e=n,n=b,b=o,o=u,u=b),f[n+1]>f[r+1]&&(b=n,n=r,r=b,b=u,u=h,h=b),f[e+1]>f[n+1]&&(b=e,e=n,n=b,b=o,o=u,u=b);const A=(f[e]+t.offsetX)*t.scaleX,S=(f[e+1]+t.offsetY)*t.scaleY,w=(f[n]+t.offsetX)*t.scaleX,x=(f[n+1]+t.offsetY)*t.scaleY,D=(f[r]+t.offsetX)*t.scaleX,O=(f[r+1]+t.offsetY)*t.scaleY;if(S>=O)return;const M=p[o],N=p[o+1],L=p[o+2],I=p[u],k=p[u+1],z=p[u+2],W=p[h],it=p[h+1],et=p[h+2],ot=Math.round(S),Tt=Math.round(O);let yt,bt,F,Y,tt,At,gt,B;for(let q=ot;q<=Tt;q++){if(q<x){const Et=q<S?0:(S-q)/(S-x);yt=A-(A-w)*Et,bt=M-(M-I)*Et,F=N-(N-k)*Et,Y=L-(L-z)*Et}else{let Et;q>O?Et=1:x===O?Et=0:Et=(x-q)/(x-O),yt=w-(w-D)*Et,bt=I-(I-W)*Et,F=k-(k-it)*Et,Y=z-(z-et)*Et}let nt;q<S?nt=0:q>O?nt=1:nt=(S-q)/(S-O),tt=A-(A-D)*nt,At=M-(M-W)*nt,gt=N-(N-it)*nt,B=L-(L-et)*nt;const at=Math.round(Math.min(yt,tt)),ct=Math.round(Math.max(yt,tt));let vt=y*q+at*4;for(let Et=at;Et<=ct;Et++)nt=(yt-Et)/(yt-tt),nt<0?nt=0:nt>1&&(nt=1),m[vt++]=bt-(bt-At)*nt|0,m[vt++]=F-(F-gt)*nt|0,m[vt++]=Y-(Y-B)*nt|0,m[vt++]=255}}function Tj(s,t,e){const n=t.coords,r=t.colors;let o,u;switch(t.type){case AT.LATTICE:const h=t.verticesPerRow,f=Math.floor(n.length/h)-1,p=h-1;for(o=0;o<f;o++){let m=o*h;for(let y=0;y<p;y++,m++)HS(s,e,n[m],n[m+1],n[m+h],r[m],r[m+1],r[m+h]),HS(s,e,n[m+h+1],n[m+1],n[m+h],r[m+h+1],r[m+1],r[m+h])}break;case AT.TRIANGLES:for(o=0,u=n.length;o<u;o+=3)HS(s,e,n[o],n[o+1],n[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class _j extends I1{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const h=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-h,m=Math.ceil(this._bounds[3])-f,y=Math.min(Math.ceil(Math.abs(p*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),A=p/y,S=m/b,w={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-f,scaleX:1/A,scaleY:1/S},x=y+4,D=b+4,O=n.getCanvas("mesh",x,D),M=O.context,N=M.createImageData(y,b);if(e){const I=N.data;for(let k=0,z=I.length;k<z;k+=4)I[k]=e[0],I[k+1]=e[1],I[k+2]=e[2],I[k+3]=255}for(const I of this._figures)Tj(N,I,w);return M.putImageData(N,2,2),{canvas:O.canvas,offsetX:h-2*A,offsetY:f-2*S,scaleX:A,scaleY:S}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,r){$T(t,this._bbox);const o=new Float32Array(2);if(r===Fn.SHADING)lt.singularValueDecompose2dScale(Pe(t),o);else if(this.matrix){lt.singularValueDecompose2dScale(this.matrix,o);const[h,f]=o;lt.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=h,o[1]*=f}else lt.singularValueDecompose2dScale(e.baseTransform,o);const u=this._createMeshCanvas(o,r===Fn.SHADING?null:this._background,e.cachedCanvases);return r!==Fn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(u.offsetX,u.offsetY),t.scale(u.scaleX,u.scaleY),t.createPattern(u.canvas,"no-repeat")}}class wj extends I1{getPattern(){return"hotpink"}}function xj(s){switch(s[0]){case"RadialAxial":return new Sj(s);case"Mesh":return new _j(s);case"Dummy":return new wj}throw new Error(`Unknown IR type: ${s[0]}`)}const ZO={COLORED:1,UNCOLORED:2},mv=class mv{constructor(t,e,n,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(t,e){var At,gt;const{bbox:n,operatorList:r,paintType:o,tilingType:u,color:h,canvasGraphicsFactory:f}=this;let{xstep:p,ystep:m}=this;p=Math.abs(p),m=Math.abs(m),Pv("TilingType: "+u);const y=n[0],b=n[1],A=n[2],S=n[3],w=A-y,x=S-b,D=new Float32Array(2);lt.singularValueDecompose2dScale(this.matrix,D);const[O,M]=D;lt.singularValueDecompose2dScale(this.baseTransform,D);const N=O*D[0],L=M*D[1];let I=w,k=x,z=!1,W=!1;const it=Math.ceil(p*N),et=Math.ceil(m*L),ot=Math.ceil(w*N),Tt=Math.ceil(x*L);it>=ot?I=p:z=!0,et>=Tt?k=m:W=!0;const yt=this.getSizeAndScale(I,this.ctx.canvas.width,N),bt=this.getSizeAndScale(k,this.ctx.canvas.height,L),F=t.cachedCanvases.getCanvas("pattern",yt.size,bt.size),Y=F.context,tt=f.createCanvasGraphics(Y,e);if(tt.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(tt,o,h),Y.translate(-yt.scale*y,-bt.scale*b),tt.transform(0,yt.scale,0,0,bt.scale,0,0),Y.save(),(At=tt.dependencyTracker)==null||At.save(),this.clipBbox(tt,y,b,A,S),tt.baseTransform=Pe(tt.ctx),tt.executeOperatorList(r),tt.endDrawing(),(gt=tt.dependencyTracker)==null||gt.restore(),Y.restore(),z||W){const B=F.canvas;z&&(I=p),W&&(k=m);const q=this.getSizeAndScale(I,this.ctx.canvas.width,N),nt=this.getSizeAndScale(k,this.ctx.canvas.height,L),at=q.size,ct=nt.size,vt=t.cachedCanvases.getCanvas("pattern-workaround",at,ct),Et=vt.context,Fe=z?Math.floor(w/p):0,ye=W?Math.floor(x/m):0;for(let hi=0;hi<=Fe;hi++)for(let _t=0;_t<=ye;_t++)Et.drawImage(B,at*hi,ct*_t,at,ct,0,0,at,ct);return{canvas:vt.canvas,scaleX:q.scale,scaleY:nt.scale,offsetX:y,offsetY:b}}return{canvas:F.canvas,scaleX:yt.scale,scaleY:bt.scale,offsetX:y,offsetY:b}}getSizeAndScale(t,e,n){const r=Math.max(mv.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*n);return o>=r?o=r:n=o/t,{scale:n,size:o}}clipBbox(t,e,n,r,o){const u=r-e,h=o-n;t.ctx.rect(e,n,u,h),lt.axialAlignedBoundingBox([e,n,r,o],Pe(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const r=t.ctx,o=t.current;switch(e){case ZO.COLORED:const{fillStyle:u,strokeStyle:h}=this.ctx;r.fillStyle=o.fillColor=u,r.strokeStyle=o.strokeColor=h;break;case ZO.UNCOLORED:r.fillStyle=r.strokeStyle=n,o.fillColor=o.strokeColor=n;break;default:throw new Uz(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,r,o){let u=n;r!==Fn.SHADING&&(u=lt.transform(u,e.baseTransform),this.matrix&&(u=lt.transform(u,this.matrix)));const h=this.createPatternCanvas(e,o);let f=new DOMMatrix(u);f=f.translate(h.offsetX,h.offsetY),f=f.scale(1/h.scaleX,1/h.scaleY);const p=t.createPattern(h.canvas,"repeat");return p.setTransform(f),p}};$(mv,"MAX_PATTERN_SIZE",3e3);let WT=mv;function Cj({src:s,srcPos:t=0,dest:e,width:n,height:r,nonBlackColor:o=4294967295,inverseDecode:u=!1}){const h=gn.isLittleEndian?4278190080:255,[f,p]=u?[o,h]:[h,o],m=n>>3,y=n&7,b=s.length;e=new Uint32Array(e.buffer);let A=0;for(let S=0;S<r;S++){for(const x=t+m;t<x;t++){const D=t<b?s[t]:255;e[A++]=D&128?p:f,e[A++]=D&64?p:f,e[A++]=D&32?p:f,e[A++]=D&16?p:f,e[A++]=D&8?p:f,e[A++]=D&4?p:f,e[A++]=D&2?p:f,e[A++]=D&1?p:f}if(y===0)continue;const w=t<b?s[t++]:255;for(let x=0;x<y;x++)e[A++]=w&1<<7-x?p:f}return{srcPos:t,destPos:A}}const JO=16,tN=100,Dj=15,eN=10,Ri=16,VS=new DOMMatrix,cs=new Float32Array(2),Bh=new Float32Array([1/0,1/0,-1/0,-1/0]);function Mj(s,t){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){t.save(),this.__originalSave()},s.restore=function(){t.restore(),this.__originalRestore()},s.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},s.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},s.transform=function(e,n,r,o,u,h){t.transform(e,n,r,o,u,h),this.__originalTransform(e,n,r,o,u,h)},s.setTransform=function(e,n,r,o,u,h){t.setTransform(e,n,r,o,u,h),this.__originalSetTransform(e,n,r,o,u,h)},s.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},s.rotate=function(e){t.rotate(e),this.__originalRotate(e)},s.clip=function(e){t.clip(e),this.__originalClip(e)},s.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},s.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},s.bezierCurveTo=function(e,n,r,o,u,h){t.bezierCurveTo(e,n,r,o,u,h),this.__originalBezierCurveTo(e,n,r,o,u,h)},s.rect=function(e,n,r,o){t.rect(e,n,r,o),this.__originalRect(e,n,r,o)},s.closePath=function(){t.closePath(),this.__originalClosePath()},s.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class Rj{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,n)):(r=this.canvasFactory.create(e,n),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function q0(s,t,e,n,r,o,u,h,f,p){const[m,y,b,A,S,w]=Pe(s);if(y===0&&b===0){const O=u*m+S,M=Math.round(O),N=h*A+w,L=Math.round(N),I=(u+f)*m+S,k=Math.abs(Math.round(I)-M)||1,z=(h+p)*A+w,W=Math.abs(Math.round(z)-L)||1;return s.setTransform(Math.sign(m),0,0,Math.sign(A),M,L),s.drawImage(t,e,n,r,o,0,0,k,W),s.setTransform(m,y,b,A,S,w),[k,W]}if(m===0&&A===0){const O=h*b+S,M=Math.round(O),N=u*y+w,L=Math.round(N),I=(h+p)*b+S,k=Math.abs(Math.round(I)-M)||1,z=(u+f)*y+w,W=Math.abs(Math.round(z)-L)||1;return s.setTransform(0,Math.sign(y),Math.sign(b),0,M,L),s.drawImage(t,e,n,r,o,0,0,W,k),s.setTransform(m,y,b,A,S,w),[W,k]}s.drawImage(t,e,n,r,o,u,h,f,p);const x=Math.hypot(m,y),D=Math.hypot(b,A);return[x*f,D*p]}class nN{constructor(t,e,n){$(this,"alphaIsShape",!1);$(this,"fontSize",0);$(this,"fontSizeScale",1);$(this,"textMatrix",null);$(this,"textMatrixScale",1);$(this,"fontMatrix",vT);$(this,"leading",0);$(this,"x",0);$(this,"y",0);$(this,"lineX",0);$(this,"lineY",0);$(this,"charSpacing",0);$(this,"wordSpacing",0);$(this,"textHScale",1);$(this,"textRenderingMode",hn.FILL);$(this,"textRise",0);$(this,"fillColor","#000000");$(this,"strokeColor","#000000");$(this,"patternFill",!1);$(this,"patternStroke",!1);$(this,"fillAlpha",1);$(this,"strokeAlpha",1);$(this,"lineWidth",1);$(this,"activeSMask",null);$(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Bh.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Fn.FILL,e=null){const n=this.minMax.slice();if(t===Fn.STROKE){e||ee("Stroke bounding box must include transform."),lt.singularValueDecompose2dScale(e,cs);const r=cs[0]*this.lineWidth/2,o=cs[1]*this.lineWidth/2;n[0]-=r,n[1]-=o,n[2]+=r,n[3]+=o}return n}updateClipFromPath(){const t=lt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Bh,0)}getClippedPathBoundingBox(t=Fn.FILL,e=null){return lt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function iN(s,t){if(t instanceof ImageData){s.putImageData(t,0,0);return}const e=t.height,n=t.width,r=e%Ri,o=(e-r)/Ri,u=r===0?o:o+1,h=s.createImageData(n,Ri);let f=0,p;const m=t.data,y=h.data;let b,A,S,w;if(t.kind===ib.GRAYSCALE_1BPP){const x=m.byteLength,D=new Uint32Array(y.buffer,0,y.byteLength>>2),O=D.length,M=n+7>>3,N=4294967295,L=gn.isLittleEndian?4278190080:255;for(b=0;b<u;b++){for(S=b<o?Ri:r,p=0,A=0;A<S;A++){const I=x-f;let k=0;const z=I>M?n:I*8-7,W=z&-8;let it=0,et=0;for(;k<W;k+=8)et=m[f++],D[p++]=et&128?N:L,D[p++]=et&64?N:L,D[p++]=et&32?N:L,D[p++]=et&16?N:L,D[p++]=et&8?N:L,D[p++]=et&4?N:L,D[p++]=et&2?N:L,D[p++]=et&1?N:L;for(;k<z;k++)it===0&&(et=m[f++],it=128),D[p++]=et&it?N:L,it>>=1}for(;p<O;)D[p++]=0;s.putImageData(h,0,b*Ri)}}else if(t.kind===ib.RGBA_32BPP){for(A=0,w=n*Ri*4,b=0;b<o;b++)y.set(m.subarray(f,f+w)),f+=w,s.putImageData(h,0,A),A+=Ri;b<u&&(w=n*r*4,y.set(m.subarray(f,f+w)),s.putImageData(h,0,A))}else if(t.kind===ib.RGB_24BPP)for(S=Ri,w=n*S,b=0;b<u;b++){for(b>=o&&(S=r,w=n*S),p=0,A=w;A--;)y[p++]=m[f++],y[p++]=m[f++],y[p++]=m[f++],y[p++]=255;s.putImageData(h,0,b*Ri)}else throw new Error(`bad image kind: ${t.kind}`)}function sN(s,t){if(t.bitmap){s.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,r=e%Ri,o=(e-r)/Ri,u=r===0?o:o+1,h=s.createImageData(n,Ri);let f=0;const p=t.data,m=h.data;for(let y=0;y<u;y++){const b=y<o?Ri:r;({srcPos:f}=Cj({src:p,srcPos:f,dest:m,width:n,height:b,nonBlackColor:0})),s.putImageData(h,0,y*Ri)}}function Sp(s,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)s[n]!==void 0&&(t[n]=s[n]);s.setLineDash!==void 0&&(t.setLineDash(s.getLineDash()),t.lineDashOffset=s.lineDashOffset)}function K0(s){s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0);const{filter:t}=s;t!=="none"&&t!==""&&(s.filter="none")}function aN(s,t){if(t)return!0;lt.singularValueDecompose2dScale(s,cs);const e=Math.fround(qa.pixelRatio*Ul.PDF_TO_CSS_UNITS);return cs[0]<=e&&cs[1]<=e}const Oj=["butt","round","square"],Nj=["miter","round","bevel"],Lj={},rN={};var fa,QT,ZT,JT;const z1=class z1{constructor(t,e,n,r,o,{optionalContentConfig:u,markedContentStack:h=null},f,p,m){_(this,fa);this.ctx=t,this.current=new nN(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=u,this.cachedCanvases=new Rj(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=f,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=m??null}getObject(t,e,n=null){var r;return typeof e=="string"?((r=this.dependencyTracker)==null||r.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:r=null}){const o=this.ctx.canvas.width,u=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,u),this.ctx.fillStyle=h,n){const f=this.cachedCanvases.getCanvas("transparent",o,u);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),this.ctx.transform(...Pe(this.compositeCtx))}this.ctx.save(),K0(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Pe(this.ctx)}executeOperatorList(t,e,n,r,o){var D;const u=t.argsArray,h=t.fnArray;let f=e||0;const p=u.length;if(p===f)return f;const m=p-f>eN&&typeof n=="function",y=m?Date.now()+Dj:0;let b=0;const A=this.commonObjs,S=this.objs;let w,x;for(;;){if(r!==void 0&&f===r.nextBreakPoint)return r.breakIt(f,n),f;if(!o||o(f))if(w=h[f],x=u[f]??null,w!==rm.dependency)x===null?this[w](f):this[w](f,...x);else for(const O of x){(D=this.dependencyTracker)==null||D.recordNamedData(O,f);const M=O.startsWith("g_")?A:S;if(!M.has(O))return M.get(O,n),f}if(f++,f===p)return f;if(m&&++b>eN){if(Date.now()>y)return n(),f;b=0}}}endDrawing(){C(this,fa,QT).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),C(this,fa,ZT).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,r=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),u=Math.max(Math.hypot(e[2],e[3]),1),h=n,f=r,p="prescale1",m,y;for(;o>2&&h>1||u>2&&f>1;){let b=h,A=f;o>2&&h>1&&(b=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),o/=h/b),u>2&&f>1&&(A=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f)/2,u/=f/A),m=this.cachedCanvases.getCanvas(p,b,A),y=m.context,y.clearRect(0,0,b,A),y.drawImage(t,0,0,h,f,0,0,b,A),t=m.canvas,h=b,f=A,p=p==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:h,paintHeight:f}}_createMaskCanvas(t,e){var it,et;const n=this.ctx,{width:r,height:o}=e,u=this.current.fillColor,h=this.current.patternFill,f=Pe(n);let p,m,y,b;if((e.bitmap||e.data)&&e.count>1){const ot=e.bitmap||e.data.buffer;m=JSON.stringify(h?f:[f.slice(0,4),u]),p=this._cachedBitmapsMap.get(ot),p||(p=new Map,this._cachedBitmapsMap.set(ot,p));const Tt=p.get(m);if(Tt&&!h){const yt=Math.round(Math.min(f[0],f[2])+f[4]),bt=Math.round(Math.min(f[1],f[3])+f[5]);return(it=this.dependencyTracker)==null||it.recordDependencies(t,_s.transformAndFill),{canvas:Tt,offsetX:yt,offsetY:bt}}y=Tt}y||(b=this.cachedCanvases.getCanvas("maskCanvas",r,o),sN(b.context,e));let A=lt.transform(f,[1/r,0,0,-1/o,0,0]);A=lt.transform(A,[1,0,0,1,0,-o]);const S=Bh.slice();lt.axialAlignedBoundingBox([0,0,r,o],A,S);const[w,x,D,O]=S,M=Math.round(D-w)||1,N=Math.round(O-x)||1,L=this.cachedCanvases.getCanvas("fillCanvas",M,N),I=L.context,k=w,z=x;I.translate(-k,-z),I.transform(...A),y||(y=this._scaleImage(b.canvas,ba(I)),y=y.img,p&&h&&p.set(m,y)),I.imageSmoothingEnabled=aN(Pe(I),e.interpolate),q0(I,y,0,0,y.width,y.height,0,0,r,o),I.globalCompositeOperation="source-in";const W=lt.transform(ba(I),[1,0,0,1,-k,-z]);return I.fillStyle=h?u.getPattern(n,this,W,Fn.FILL,t):u,I.fillRect(0,0,r,o),p&&!h&&(this.cachedCanvases.delete("fillCanvas"),p.set(m,L.canvas)),(et=this.dependencyTracker)==null||et.recordDependencies(t,_s.transformAndFill),{canvas:L.canvas,offsetX:Math.round(k),offsetY:Math.round(z)}}setLineWidth(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",t),this.ctx.lineCap=Oj[e]}setLineJoin(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",t),this.ctx.lineJoin=Nj[e]}setMiterLimit(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){var o;(o=this.dependencyTracker)==null||o.recordSimpleData("dash",t);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){var n,r,o,u,h;for(const[f,p]of e)switch(f){case"LW":this.setLineWidth(t,p);break;case"LC":this.setLineCap(t,p);break;case"LJ":this.setLineJoin(t,p);break;case"ML":this.setMiterLimit(t,p);break;case"D":this.setDash(t,p[0],p[1]);break;case"RI":this.setRenderingIntent(t,p);break;case"FL":this.setFlatness(t,p);break;case"Font":this.setFont(t,p[0],p[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=p;break;case"ca":(r=this.dependencyTracker)==null||r.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=p;break;case"BM":(o=this.dependencyTracker)==null||o.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=p;break;case"SMask":(u=this.dependencyTracker)==null||u.recordSimpleData("SMask",t),this.current.activeSMask=p?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(h=this.dependencyTracker)==null||h.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(p);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(r,e,n);this.suspendedCtx=this.ctx;const u=this.ctx=o.context;u.setTransform(this.suspendedCtx.getTransform()),Sp(this.suspendedCtx,u),Mj(u,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Sp(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,r){const o=r[0],u=r[1],h=r[2]-o,f=r[3]-u;h===0||f===0||(this.genericComposeSMask(e.context,n,h,f,e.subtype,e.backdrop,e.transferMap,o,u,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,r,o,u,h,f,p,m,y){let b=t.canvas,A=f-m,S=p-y;if(u)if(A<0||S<0||A+n>b.width||S+r>b.height){const x=this.cachedCanvases.getCanvas("maskExtension",n,r),D=x.context;D.drawImage(b,-A,-S),D.globalCompositeOperation="destination-atop",D.fillStyle=u,D.fillRect(0,0,n,r),D.globalCompositeOperation="source-over",b=x.canvas,A=S=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const x=new Path2D;x.rect(A,S,n,r),t.clip(x),t.globalCompositeOperation="destination-atop",t.fillStyle=u,t.fillRect(A,S,n,r),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&h?e.filter=this.filterFactory.addAlphaFilter(h):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(h));const w=new Path2D;w.rect(f,p,n,r),e.clip(w),e.globalCompositeOperation="destination-in",e.drawImage(b,A,S,n,r,f,p,n,r),e.restore()}save(t){var n;this.inSMaskMode&&Sp(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),(n=this.dependencyTracker)==null||n.save(t)}restore(t){var e;if((e=this.dependencyTracker)==null||e.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Sp(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,r,o,u,h){var f;(f=this.dependencyTracker)==null||f.recordIncrementalData("transform",t),this.ctx.transform(e,n,r,o,u,h),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,r){let[o]=n;if(!r){o||(o=n[0]=new Path2D),this[e](t,o);return}if(this.dependencyTracker!==null){const u=e===rm.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-u,r[2]+u,r[1]-u,r[3]+u).recordDependencies(t,["transform"])}o instanceof Path2D||(o=n[0]=wI(o)),lt.axialAlignedBoundingBox(r,Pe(this.ctx),this.current.minMax),this[e](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){var u;const r=this.ctx,o=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&(o!=null&&o.getPattern)){const h=o.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=o.getPattern(r,this,ba(r),Fn.STROKE,t),h){const f=new Path2D;f.addPath(e,r.getTransform().invertSelf().multiplySelf(h)),e=f}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);(u=this.dependencyTracker)==null||u.recordDependencies(t,_s.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Fn.STROKE,Pe(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){var p,m,y;const r=this.ctx,o=this.current.fillColor,u=this.current.patternFill;let h=!1;if(u){const b=o.isModifyingCurrentTransform()?r.getTransform():null;if((p=this.dependencyTracker)==null||p.save(t),r.save(),r.fillStyle=o.getPattern(r,this,ba(r),Fn.FILL,t),b){const A=new Path2D;A.addPath(e,r.getTransform().invertSelf().multiplySelf(b)),e=A}h=!0}const f=this.current.getClippedPathBoundingBox();this.contentVisible&&f!==null&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),(m=this.dependencyTracker)==null||m.recordDependencies(t,_s.fill),h&&(r.restore(),(y=this.dependencyTracker)==null||y.restore(t)),n&&this.consumePath(t,e,f)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){var n;this.ctx.fill(e),(n=this.dependencyTracker)==null||n.recordDependencies(t,_s.rawFillPath).recordOperation(t)}clip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=Lj}eoClip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=rN}beginText(t){var e;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(e=this.dependencyTracker)==null||e.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;e!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(e!==void 0){const r=new Path2D,o=n.getTransform().invertSelf();for(const{transform:u,x:h,y:f,fontSize:p,path:m}of e)m&&r.addPath(m,new DOMMatrix(u).preMultiplySelf(o).translate(h,f).scale(p,-p));n.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){var y,b;(y=this.dependencyTracker)==null||y.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const r=this.commonObjs.get(e),o=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=r.fontMatrix||vT,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&Ct("Invalid font matrix for font "+e),n<0?(n=-n,o.fontDirection=-1):o.fontDirection=1,this.current.font=r,this.current.fontSize=n,r.isType3Font)return;const u=r.loadedName||"sans-serif",h=((b=r.systemFontInfo)==null?void 0:b.css)||`"${u}", ${r.fallbackName}`;let f="normal";r.black?f="900":r.bold&&(f="bold");const p=r.italic?"italic":"normal";let m=n;n<JO?m=JO:n>tN&&(m=tN),this.current.fontSizeScale=n/m,this.ctx.font=`${p} ${f} ${m}px ${h}`}setTextRenderingMode(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){var e;this.moveText(t,0,this.current.leading),(e=this.dependencyTracker)==null||e.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}paintChar(t,e,n,r,o,u){var D,O,M,N;const h=this.ctx,f=this.current,p=f.font,m=f.textRenderingMode,y=f.fontSize/f.fontSizeScale,b=m&hn.FILL_STROKE_MASK,A=!!(m&hn.ADD_TO_PATH_FLAG),S=f.patternFill&&!p.missingFile,w=f.patternStroke&&!p.missingFile;let x;if((p.disableFontFace||A||S||w)&&!p.missingFile&&(x=p.getPathGenerator(this.commonObjs,e)),x&&(p.disableFontFace||S||w)){h.save(),h.translate(n,r),h.scale(y,-y),(D=this.dependencyTracker)==null||D.recordCharacterBBox(t,h,p);let L;if(b===hn.FILL||b===hn.FILL_STROKE)if(o){L=h.getTransform(),h.setTransform(...o);const I=C(this,fa,JT).call(this,x,L,o);h.fill(I)}else h.fill(x);if(b===hn.STROKE||b===hn.FILL_STROKE)if(u){L||(L=h.getTransform()),h.setTransform(...u);const{a:I,b:k,c:z,d:W}=L,it=lt.inverseTransform(u),et=lt.transform([I,k,z,W,0,0],it);lt.singularValueDecompose2dScale(et,cs),h.lineWidth*=Math.max(cs[0],cs[1])/y,h.stroke(C(this,fa,JT).call(this,x,L,u))}else h.lineWidth/=y,h.stroke(x);h.restore()}else(b===hn.FILL||b===hn.FILL_STROKE)&&(h.fillText(e,n,r),(O=this.dependencyTracker)==null||O.recordCharacterBBox(t,h,p,y,n,r,()=>h.measureText(e))),(b===hn.STROKE||b===hn.FILL_STROKE)&&(this.dependencyTracker&&((M=this.dependencyTracker)==null||M.recordCharacterBBox(t,h,p,y,n,r,()=>h.measureText(e)).recordDependencies(t,_s.stroke)),h.strokeText(e,n,r));A&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Pe(h),x:n,y:r,fontSize:y,path:x}),(N=this.dependencyTracker)==null||N.recordCharacterBBox(t,h,p,y,n,r))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){n=!0;break}return Dt(this,"isFontSubpixelAAEnabled",n)}showText(t,e){var et,ot,Tt,yt;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,_s.showText).resetBBox(t),this.current.textRenderingMode&hn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,r=n.font;if(r.isType3Font){this.showType3Text(t,e),(et=this.dependencyTracker)==null||et.recordShowTextOperation(t);return}const o=n.fontSize;if(o===0){(ot=this.dependencyTracker)==null||ot.recordOperation(t);return}const u=this.ctx,h=n.fontSizeScale,f=n.charSpacing,p=n.wordSpacing,m=n.fontDirection,y=n.textHScale*m,b=e.length,A=r.vertical,S=A?1:-1,w=r.defaultVMetrics,x=o*n.fontMatrix[0],D=n.textRenderingMode===hn.FILL&&!r.disableFontFace&&!n.patternFill;u.save(),n.textMatrix&&u.transform(...n.textMatrix),u.translate(n.x,n.y+n.textRise),m>0?u.scale(y,-1):u.scale(y,1);let O,M;const N=n.textRenderingMode&hn.FILL_STROKE_MASK,L=N===hn.FILL||N===hn.FILL_STROKE,I=N===hn.STROKE||N===hn.FILL_STROKE;if(L&&n.patternFill){u.save();const bt=n.fillColor.getPattern(u,this,ba(u),Fn.FILL,t);O=Pe(u),u.restore(),u.fillStyle=bt}if(I&&n.patternStroke){u.save();const bt=n.strokeColor.getPattern(u,this,ba(u),Fn.STROKE,t);M=Pe(u),u.restore(),u.strokeStyle=bt}let k=n.lineWidth;const z=n.textMatrixScale;if(z===0||k===0?I&&(k=this.getSinglePixelWidth()):k/=z,h!==1&&(u.scale(h,h),k/=h),u.lineWidth=k,r.isInvalidPDFjsFont){const bt=[];let F=0;for(const tt of e)bt.push(tt.unicode),F+=tt.width;const Y=bt.join("");if(u.fillText(Y,0,0),this.dependencyTracker!==null){const tt=u.measureText(Y);this.dependencyTracker.recordBBox(t,this.ctx,-tt.actualBoundingBoxLeft,tt.actualBoundingBoxRight,-tt.actualBoundingBoxAscent,tt.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=F*x*y,u.restore(),this.compose();return}let W=0,it;for(it=0;it<b;++it){const bt=e[it];if(typeof bt=="number"){W+=S*bt*o/1e3;continue}let F=!1;const Y=(bt.isSpace?p:0)+f,tt=bt.fontChar,At=bt.accent;let gt,B,q=bt.width;if(A){const ct=bt.vmetric||w,vt=-(bt.vmetric?ct[1]:q*.5)*x,Et=ct[2]*x;q=ct?-ct[0]:q,gt=vt/h,B=(W+Et)/h}else gt=W/h,B=0;let nt;if(r.remeasure&&q>0){nt=u.measureText(tt);const ct=nt.width*1e3/o*h;if(q<ct&&this.isFontSubpixelAAEnabled){const vt=q/ct;F=!0,u.save(),u.scale(vt,1),gt/=vt}else q!==ct&&(gt+=(q-ct)/2e3*o/h)}if(this.contentVisible&&(bt.isInFont||r.missingFile)){if(D&&!At)u.fillText(tt,gt,B),(Tt=this.dependencyTracker)==null||Tt.recordCharacterBBox(t,u,nt?{bbox:null}:r,o/h,gt,B,()=>nt??u.measureText(tt));else if(this.paintChar(t,tt,gt,B,O,M),At){const ct=gt+o*At.offset.x/h,vt=B-o*At.offset.y/h;this.paintChar(t,At.fontChar,ct,vt,O,M)}}const at=A?q*x-Y*m:q*x+Y*m;W+=at,F&&u.restore()}A?n.y-=W:n.x+=W*y,u.restore(),this.compose(),(yt=this.dependencyTracker)==null||yt.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,r=this.current,o=r.font,u=r.fontSize,h=r.fontDirection,f=o.vertical?1:-1,p=r.charSpacing,m=r.wordSpacing,y=r.textHScale*h,b=r.fontMatrix||vT,A=e.length,S=r.textRenderingMode===hn.INVISIBLE;let w,x,D,O;if(S||u===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),r.textMatrix&&n.transform(...r.textMatrix),n.translate(r.x,r.y+r.textRise),n.scale(y,h);const M=this.dependencyTracker;for(this.dependencyTracker=M?new tv(M,t):null,w=0;w<A;++w){if(x=e[w],typeof x=="number"){O=f*x*u/1e3,this.ctx.translate(O,0),r.x+=O*y;continue}const N=(x.isSpace?m:0)+p,L=o.charProcOperatorList[x.operatorListId];L?this.contentVisible&&(this.save(),n.scale(u,u),n.transform(...b),this.executeOperatorList(L),this.restore()):Ct(`Type3 character "${x.operatorListId}" is not available.`);const I=[x.width,0];lt.applyTransform(I,b),D=I[0]*u+N,n.translate(D,0),r.x+=D*y}n.restore(),M&&(this.dependencyTracker=M)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,r,o,u,h){var p;const f=new Path2D;f.rect(r,o,u-r,h-o),this.ctx.clip(f),(p=this.dependencyTracker)==null||p.recordBBox(t,this.ctx,r,u,o,h).recordClipBox(t,this.ctx,r,u,o,h),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const r=this.baseTransform||Pe(this.ctx),o={createCanvasGraphics:(u,h)=>new z1(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new tv(this.dependencyTracker,h,!0):null)};n=new WT(e,this.ctx,o,r)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=xj(this.getObject(t,e)),this.cachedPatterns.set(e,r)),n&&(r.matrix=n),r}shadingFill(t,e){var u;if(!this.contentVisible)return;const n=this.ctx;this.save(t);const r=this._getPattern(t,e);n.fillStyle=r.getPattern(n,this,ba(n),Fn.SHADING,t);const o=ba(n);if(o){const{width:h,height:f}=n.canvas,p=Bh.slice();lt.axialAlignedBoundingBox([0,0,h,f],o,p);const[m,y,b,A]=p;this.ctx.fillRect(m,y,b-m,A-y)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(u=this.dependencyTracker)==null||u.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,_s.transform).recordDependencies(t,_s.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){ee("Should not call beginInlineImage")}beginImageData(){ee("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){var r;if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Pe(this.ctx),n)){lt.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[o,u,h,f]=n,p=new Path2D;p.rect(o,u,h-o,f-u),this.ctx.clip(p),(r=this.dependencyTracker)==null||r.recordClipBox(t,this.ctx,o,h,u,f),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){var M;if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||Pv("TODO: Support non-isolated groups."),e.knockout&&Ct("Knockout groups not supported.");const r=Pe(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=Bh.slice();lt.axialAlignedBoundingBox(e.bbox,Pe(n),o);const u=[0,0,n.canvas.width,n.canvas.height];o=lt.intersect(o,u)||[0,0,0,0];const h=Math.floor(o[0]),f=Math.floor(o[1]),p=Math.max(Math.ceil(o[2])-h,1),m=Math.max(Math.ceil(o[3])-f,1);this.current.startNewPathAndClipBox([0,0,p,m]);let y="groupAt"+this.groupLevel;e.smask&&(y+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(y,p,m),A=b.context;A.translate(-h,-f),A.transform(...r);let S=new Path2D;const[w,x,D,O]=e.bbox;if(S.rect(w,x,D-w,O-x),e.matrix){const N=new Path2D;N.addPath(S,new DOMMatrix(e.matrix)),S=N}A.clip(S),e.smask&&this.smaskStack.push({canvas:b.canvas,context:A,offsetX:h,offsetY:f,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(h,f),n.save()),Sp(n,A),this.ctx=A,(M=this.dependencyTracker)==null||M.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){var o;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,(o=this.dependencyTracker)==null||o.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const u=Pe(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...u);const h=Bh.slice();lt.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],u,h),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(h)}}beginAnnotation(t,e,n,r,o,u){if(C(this,fa,QT).call(this),K0(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const h=n[2]-n[0],f=n[3]-n[1];if(u&&this.annotationCanvasMap){r=r.slice(),r[4]-=n[0],r[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=h,n[3]=f,lt.singularValueDecompose2dScale(Pe(this.ctx),cs);const{viewportScale:p}=this,m=Math.ceil(h*this.outputScaleX*p),y=Math.ceil(f*this.outputScaleY*p);this.annotationCanvas=this.canvasFactory.create(m,y);const{canvas:b,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(e,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(cs[0],0,0,-cs[1],0,f*cs[1]),K0(this.ctx)}else{K0(this.ctx),this.endPath(t);const p=new Path2D;p.rect(n[0],n[1],h,f),this.ctx.clip(p)}}this.current=new nN(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),C(this,fa,ZT).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){var h;if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const r=this.ctx,o=this._createMaskCanvas(t,e),u=o.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(u,o.offsetX,o.offsetY),(h=this.dependencyTracker)==null||h.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+u.width,o.offsetY,o.offsetY+u.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,r=0,o=0,u,h){var y,b,A;if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const f=this.ctx;f.save();const p=Pe(f);f.transform(n,r,o,u,0,0);const m=this._createMaskCanvas(t,e);f.setTransform(1,0,0,1,m.offsetX-p[4],m.offsetY-p[5]),(y=this.dependencyTracker)==null||y.resetBBox(t);for(let S=0,w=h.length;S<w;S+=2){const x=lt.transform(p,[n,r,o,u,h[S],h[S+1]]);f.drawImage(m.canvas,x[4],x[5]),(b=this.dependencyTracker)==null||b.recordBBox(t,this.ctx,x[4],x[4]+m.canvas.width,x[5],x[5]+m.canvas.height)}f.restore(),this.compose(),(A=this.dependencyTracker)==null||A.recordOperation(t)}paintImageMaskXObjectGroup(t,e){var u,h,f;if(!this.contentVisible)return;const n=this.ctx,r=this.current.fillColor,o=this.current.patternFill;(u=this.dependencyTracker)==null||u.resetBBox(t).recordDependencies(t,_s.transformAndFill);for(const p of e){const{data:m,width:y,height:b,transform:A}=p,S=this.cachedCanvases.getCanvas("maskCanvas",y,b),w=S.context;w.save();const x=this.getObject(t,m,p);sN(w,x),w.globalCompositeOperation="source-in",w.fillStyle=o?r.getPattern(w,this,ba(n),Fn.FILL,t):r,w.fillRect(0,0,y,b),w.restore(),n.save(),n.transform(...A),n.scale(1,-1),q0(n,S.canvas,0,0,y,b,0,-1,1,1),(h=this.dependencyTracker)==null||h.recordBBox(t,n,0,y,0,b),n.restore()}this.compose(),(f=this.dependencyTracker)==null||f.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){Ct("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,r,o){if(!this.contentVisible)return;const u=this.getObject(t,e);if(!u){Ct("Dependent image isn't ready yet");return}const h=u.width,f=u.height,p=[];for(let m=0,y=o.length;m<y;m+=2)p.push({transform:[n,0,0,r,o[m],o[m+1]],x:0,y:0,w:h,h:f});this.paintInlineImageXObjectGroup(t,u,p)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:r}=t,o=this.cachedCanvases.getCanvas("inlineImage",n,r),u=o.context;return u.filter=this.current.transferMaps,u.drawImage(e,0,0),u.filter="none",o.canvas}paintInlineImageXObject(t,e){var p;if(!this.contentVisible)return;const n=e.width,r=e.height,o=this.ctx;this.save(t);const{filter:u}=o;u!=="none"&&u!==""&&(o.filter="none"),o.scale(1/n,-1/r);let h;if(e.bitmap)h=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)h=e;else{const y=this.cachedCanvases.getCanvas("inlineImage",n,r).context;iN(y,e),h=this.applyTransferMapsToCanvas(y)}const f=this._scaleImage(h,ba(o));o.imageSmoothingEnabled=aN(Pe(o),e.interpolate),(p=this.dependencyTracker)==null||p.resetBBox(t).recordBBox(t,o,0,n,-r,0).recordDependencies(t,_s.imageXObject).recordOperation(t),q0(o,f.img,0,0,f.paintWidth,f.paintHeight,0,-r,n,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){var u,h,f;if(!this.contentVisible)return;const r=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const p=e.width,m=e.height,b=this.cachedCanvases.getCanvas("inlineImage",p,m).context;iN(b,e),o=this.applyTransferMapsToCanvas(b)}(u=this.dependencyTracker)==null||u.resetBBox(t);for(const p of n)r.save(),r.transform(...p.transform),r.scale(1,-1),q0(r,o,p.x,p.y,p.w,p.h,0,-1,1,1),(h=this.dependencyTracker)==null||h.recordBBox(t,r,0,1,-1,0),r.restore();(f=this.dependencyTracker)==null||f.recordOperation(t),this.compose()}paintSolidColorImageMask(t){var e;this.contentVisible&&((e=this.dependencyTracker)==null||e.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,_s.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){var e;(e=this.dependencyTracker)==null||e.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){var u,h;const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const o=this.ctx;this.pendingClip?(r||(this.pendingClip===rN?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null,(u=this.dependencyTracker)==null||u.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):(h=this.dependencyTracker)==null||h.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Pe(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:r,d:o}=this.ctx.getTransform();let u,h;if(n===0&&r===0){const f=Math.abs(e),p=Math.abs(o);if(f===p)if(t===0)u=h=1/f;else{const m=f*t;u=h=m<1?1/m:1}else if(t===0)u=1/f,h=1/p;else{const m=f*t,y=p*t;u=m<1?1/m:1,h=y<1?1/y:1}}else{const f=Math.abs(e*o-n*r),p=Math.hypot(e,n),m=Math.hypot(r,o);if(t===0)u=m/f,h=p/f;else{const y=t*f;u=m>y?m/y:1,h=p>y?p/y:1}}this._cachedScaleForStroking[0]=u,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:r}}=this,[o,u]=this.getScaleForStroking();if(o===u){n.lineWidth=(r||1)*o,n.stroke(t);return}const h=n.getLineDash();e&&n.save(),n.scale(o,u),VS.a=1/o,VS.d=1/u;const f=new Path2D;if(f.addPath(t,VS),h.length>0){const p=Math.max(o,u);n.setLineDash(h.map(m=>m/p)),n.lineDashOffset/=p}n.lineWidth=r||1,n.stroke(f),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};fa=new WeakSet,QT=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},ZT=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},JT=function(t,e,n){const r=new Path2D;return r.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),r};let jh=z1;for(const s in rm)jh.prototype[s]!==void 0&&(jh.prototype[rm[s]]=jh.prototype[s]);var Zm,Jm;class Ga{static get workerPort(){return c(this,Zm)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");E(this,Zm,t)}static get workerSrc(){return c(this,Jm)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");E(this,Jm,t)}}Zm=new WeakMap,Jm=new WeakMap,_(Ga,Zm,null),_(Ga,Jm,"");var Cd,tg;class Ij{constructor({parsedData:t,rawData:e}){_(this,Cd);_(this,tg);E(this,Cd,t),E(this,tg,e)}getRaw(){return c(this,tg)}get(t){return c(this,Cd).get(t)??null}[Symbol.iterator](){return c(this,Cd).entries()}}Cd=new WeakMap,tg=new WeakMap;const xh=Symbol("INTERNAL");var eg,ng,ig,Dd;class Pj{constructor(t,{name:e,intent:n,usage:r,rbGroups:o}){_(this,eg,!1);_(this,ng,!1);_(this,ig,!1);_(this,Dd,!0);E(this,eg,!!(t&ls.DISPLAY)),E(this,ng,!!(t&ls.PRINT)),this.name=e,this.intent=n,this.usage=r,this.rbGroups=o}get visible(){if(c(this,ig))return c(this,Dd);if(!c(this,Dd))return!1;const{print:t,view:e}=this.usage;return c(this,eg)?(e==null?void 0:e.viewState)!=="OFF":c(this,ng)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==xh&&ee("Internal method `_setVisible` called."),E(this,ig,n),E(this,Dd,e)}}eg=new WeakMap,ng=new WeakMap,ig=new WeakMap,Dd=new WeakMap;var hl,me,Md,Rd,sg,t_;class Bj{constructor(t,e=ls.DISPLAY){_(this,sg);_(this,hl,null);_(this,me,new Map);_(this,Md,null);_(this,Rd,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,E(this,Rd,t.order);for(const n of t.groups)c(this,me).set(n.id,new Pj(e,n));if(t.baseState==="OFF")for(const n of c(this,me).values())n._setVisible(xh,!1);for(const n of t.on)c(this,me).get(n)._setVisible(xh,!0);for(const n of t.off)c(this,me).get(n)._setVisible(xh,!1);E(this,Md,this.getHash())}}isVisible(t){if(c(this,me).size===0)return!0;if(!t)return Pv("Optional content group not defined."),!0;if(t.type==="OCG")return c(this,me).has(t.id)?c(this,me).get(t.id).visible:(Ct(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return C(this,sg,t_).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!c(this,me).has(e))return Ct(`Optional content group not found: ${e}`),!0;if(c(this,me).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!c(this,me).has(e))return Ct(`Optional content group not found: ${e}`),!0;if(!c(this,me).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!c(this,me).has(e))return Ct(`Optional content group not found: ${e}`),!0;if(!c(this,me).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!c(this,me).has(e))return Ct(`Optional content group not found: ${e}`),!0;if(c(this,me).get(e).visible)return!1}return!0}return Ct(`Unknown optional content policy ${t.policy}.`),!0}return Ct(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var o;const r=c(this,me).get(t);if(!r){Ct(`Optional content group not found: ${t}`);return}if(n&&e&&r.rbGroups.length)for(const u of r.rbGroups)for(const h of u)h!==t&&((o=c(this,me).get(h))==null||o._setVisible(xh,!1,!0));r._setVisible(xh,!!e,!0),E(this,hl,null)}setOCGState({state:t,preserveRB:e}){let n;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const o=c(this,me).get(r);if(o)switch(n){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!o.visible,e);break}}E(this,hl,null)}get hasInitialVisibility(){return c(this,Md)===null||this.getHash()===c(this,Md)}getOrder(){return c(this,me).size?c(this,Rd)?c(this,Rd).slice():[...c(this,me).keys()]:null}getGroup(t){return c(this,me).get(t)||null}getHash(){if(c(this,hl)!==null)return c(this,hl);const t=new a2;for(const[e,n]of c(this,me))t.update(`${e}:${n.visible}`);return E(this,hl,t.hexdigest())}[Symbol.iterator](){return c(this,me).entries()}}hl=new WeakMap,me=new WeakMap,Md=new WeakMap,Rd=new WeakMap,sg=new WeakSet,t_=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let r=1;r<e;r++){const o=t[r];let u;if(Array.isArray(o))u=C(this,sg,t_).call(this,o);else if(c(this,me).has(o))u=c(this,me).get(o).visible;else return Ct(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!u)return!1;break;case"Or":if(u)return!0;break;case"Not":return!u;default:return!0}}return n==="And"};var ag,rg;class Uv{constructor(t,e,n){_(this,ag,null);_(this,rg,null);$(this,"_fullReader",null);$(this,"_rangeReaders",new Set);$(this,"_source",null);this._source=t,E(this,ag,e),E(this,rg,n)}get _progressiveDataLength(){var t;return((t=this._fullReader)==null?void 0:t._loaded)??0}getFullReader(){return te(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new(c(this,ag))(this)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new(c(this,rg))(this,t,e);return this._rangeReaders.add(n),n}cancelAllRequests(t){var e;(e=this._fullReader)==null||e.cancel(t);for(const n of new Set(this._rangeReaders))n.cancel(t)}}ag=new WeakMap,rg=new WeakMap;class Fv{constructor(t){$(this,"onProgress",null);$(this,"_contentLength",0);$(this,"_filename",null);$(this,"_headersCapability",Promise.withResolvers());$(this,"_isRangeSupported",!1);$(this,"_isStreamingSupported",!1);$(this,"_loaded",0);$(this,"_stream",null);this._stream=t}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){ee("Abstract method `read` called")}cancel(t){ee("Abstract method `cancel` called")}}class Hv{constructor(t,e,n){$(this,"_stream",null);this._stream=t}async read(){ee("Abstract method `read` called")}cancel(t){ee("Abstract method `cancel` called")}}function oN(s){return s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer}var og,e_;class kj extends Uv{constructor(e){super(e,Uj,Fj);_(this,og);$(this,"_progressiveDone",!1);$(this,"_queuedChunks",[]);const{pdfDataRangeTransport:n}=e,{initialData:r,progressiveDone:o}=n;if((r==null?void 0:r.length)>0){const u=oN(r);this._queuedChunks.push(u)}this._progressiveDone=o,n.addRangeListener((u,h)=>{C(this,og,e_).call(this,u,h)}),n.addProgressListener((u,h)=>{var f,p;h!==void 0&&((p=(f=this._fullReader)==null?void 0:f.onProgress)==null||p.call(f,{loaded:u,total:h}))}),n.addProgressiveReadListener(u=>{C(this,og,e_).call(this,void 0,u)}),n.addProgressiveDoneListener(()=>{var u;(u=this._fullReader)==null||u.progressiveDone(),this._progressiveDone=!0}),n.transportReady()}getFullReader(){const e=super.getFullReader();return this._queuedChunks=null,e}getRangeReader(e,n){const r=super.getRangeReader(e,n);return r&&(r.onDone=()=>this._rangeReaders.delete(r),this._source.pdfDataRangeTransport.requestDataRange(e,n)),r}cancelAllRequests(e){super.cancelAllRequests(e),this._source.pdfDataRangeTransport.abort()}}og=new WeakSet,e_=function(e,n){const r=oN(n);if(e===void 0)this._fullReader?this._fullReader._enqueue(r):this._queuedChunks.push(r);else{const o=this._rangeReaders.keys().find(u=>u._begin===e);te(o,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),o._enqueue(r)}};class Uj extends Fv{constructor(e){super(e);$(this,"_done",!1);$(this,"_queuedChunks",null);$(this,"_requests",[]);const{pdfDataRangeTransport:n,disableRange:r,disableStream:o}=e._source,{length:u,contentDispositionFilename:h}=n;this._queuedChunks=e._queuedChunks||[];for(const f of this._queuedChunks)this._loaded+=f.byteLength;this._done=e._progressiveDone,this._contentLength=u,this._isStreamingSupported=!o,this._isRangeSupported=!r,O1(h)&&(this._filename=h),this._headersCapability.resolve()}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Fj extends Hv{constructor(e,n,r){super(e,n,r);$(this,"onDone",null);$(this,"_begin",-1);$(this,"_done",!1);$(this,"_queuedChunk",null);$(this,"_requests",[]);this._begin=n}_enqueue(e){var n;if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,(n=this.onDone)==null||n.call(this)}}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){var n;this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,(n=this.onDone)==null||n.call(this)}}function Hj(s){let t=!0,e=n("filename\\*","i").exec(s);if(e){e=e[1];let m=h(e);return m=unescape(m),m=f(m),m=p(m),o(m)}if(e=u(s),e){const m=p(e);return o(m)}if(e=n("filename","i").exec(s),e){e=e[1];let m=h(e);return m=p(m),o(m)}function n(m,y){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(m,y){if(m){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(m,{fatal:!0}),A=Bv(y);y=b.decode(A),t=!1}catch{}}return y}function o(m){return t&&/[\x80-\xff]/.test(m)&&(m=r("utf-8",m),t&&(m=r("iso-8859-1",m))),m}function u(m){const y=[];let b;const A=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=A.exec(m))!==null;){let[,w,x,D]=b;if(w=parseInt(w,10),w in y){if(w===0)break;continue}y[w]=[x,D]}const S=[];for(let w=0;w<y.length&&w in y;++w){let[x,D]=y[w];D=h(D),x&&(D=unescape(D),w===0&&(D=f(D))),S.push(D)}return S.join("")}function h(m){if(m.startsWith('"')){const y=m.slice(1).split('\\"');for(let b=0;b<y.length;++b){const A=y[b].indexOf('"');A!==-1&&(y[b]=y[b].slice(0,A),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}m=y.join('"')}return m}function f(m){const y=m.indexOf("'");if(y===-1)return m;const b=m.slice(0,y),S=m.slice(y+1).replace(/^[^']*'/,"");return r(b,S)}function p(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,A,S){if(A==="q"||A==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,x){return String.fromCharCode(parseInt(x,16))}),r(b,S);try{S=atob(S)}catch{}return r(b,S)})}return""}function y2(s,t){const e=new Headers;if(!s||!t||typeof t!="object")return e;for(const n in t){const r=t[n];r!==void 0&&e.append(n,r)}return e}function Vv(s){var t;return((t=URL.parse(s))==null?void 0:t.origin)??null}function b2({responseHeaders:s,isHttp:t,rangeChunkSize:e,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(s.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*e)||n||!t||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function v2(s){const t=s.get("Content-Disposition");if(t){let e=Hj(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(O1(e))return e}return null}function zv(s,t){return new Kb(`Unexpected server response (${s}) while retrieving PDF "${t}".`,s,s===404||s===0&&t.startsWith("file:"))}function A2(s,t){if(s!==t)throw new Error(`Expected range response-origin "${s}" to match "${t}".`)}function E2(s,t,e,n){return fetch(s,{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"})}function S2(s,t){if(s!==200&&s!==206)throw zv(s,t)}function T2(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(Ct(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class Vj extends Uv{constructor(e){super(e,zj,jj);$(this,"_responseOrigin",null);this.isHttp=/^https?:/i.test(e.url),this.headers=y2(this.isHttp,e.httpHeaders)}}class zj extends Fv{constructor(e){super(e);$(this,"_abortController",new AbortController);$(this,"_reader",null);const{disableRange:n,disableStream:r,length:o,rangeChunkSize:u,url:h,withCredentials:f}=e._source;this._contentLength=o,this._isStreamingSupported=!r,this._isRangeSupported=!n;const p=new Headers(e.headers);E2(h,p,f,this._abortController).then(m=>{e._responseOrigin=Vv(m.url),S2(m.status,h),this._reader=m.body.getReader();const y=m.headers,{allowRangeRequests:b,suggestedLength:A}=b2({responseHeaders:y,isHttp:e.isHttp,rangeChunkSize:u,disableRange:n});this._isRangeSupported=b,this._contentLength=A||this._contentLength,this._filename=v2(y),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new kl("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){var r;await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:T2(e),done:!1})}cancel(e){var n;(n=this._reader)==null||n.cancel(e),this._abortController.abort()}}class jj extends Hv{constructor(e,n,r){super(e,n,r);$(this,"_abortController",new AbortController);$(this,"_readCapability",Promise.withResolvers());$(this,"_reader",null);const{url:o,withCredentials:u}=e._source,h=new Headers(e.headers);h.append("Range",`bytes=${n}-${r-1}`),E2(o,h,u,this._abortController).then(f=>{const p=Vv(f.url);A2(p,e._responseOrigin),S2(f.status,o),this._reader=f.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:{value:T2(e),done:!1}}cancel(e){var n;(n=this._reader)==null||n.cancel(e),this._abortController.abort()}}const zS=200,lN=206;function Gj(s){return typeof s!="string"?s:Bv(s).buffer}var Ia,vf,_2,w2;class Yj extends Uv{constructor(e){super(e,Xj,qj);_(this,vf);_(this,Ia,new WeakMap);$(this,"_responseOrigin",null);this.url=e.url,this.isHttp=/^https?:/i.test(this.url),this.headers=y2(this.isHttp,e.httpHeaders)}_request(e){const n=new XMLHttpRequest,r={validateStatus:null,onHeadersReceived:e.onHeadersReceived,onDone:e.onDone,onError:e.onError,onProgress:e.onProgress};c(this,Ia).set(n,r),n.open("GET",this.url),n.withCredentials=this._source.withCredentials;for(const[o,u]of this.headers)n.setRequestHeader(o,u);return this.isHttp&&"begin"in e&&"end"in e?(n.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.validateStatus=o=>o===lN||o===zS):r.validateStatus=o=>o===zS,n.responseType="arraybuffer",te(e.onError,"Expected `onError` callback to be provided."),n.onerror=()=>e.onError(n.status),n.onreadystatechange=C(this,vf,w2).bind(this,n),n.onprogress=C(this,vf,_2).bind(this,n),n.send(null),n}_abortRequest(e){c(this,Ia).has(e)&&(c(this,Ia).delete(e),e.abort())}getRangeReader(e,n){const r=super.getRangeReader(e,n);return r&&(r.onClosed=()=>this._rangeReaders.delete(r)),r}}Ia=new WeakMap,vf=new WeakSet,_2=function(e,n){var o;const r=c(this,Ia).get(e);(o=r==null?void 0:r.onProgress)==null||o.call(r,n)},w2=function(e,n){const r=c(this,Ia).get(e);if(!r||(e.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),e.readyState!==4)||!c(this,Ia).has(e))return;if(c(this,Ia).delete(e),e.status===0&&this.isHttp){r.onError(e.status);return}const o=e.status||zS;if(!r.validateStatus(o)){r.onError(e.status);return}const u=Gj(e.response);if(o===lN){const h=e.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(h)?r.onDone(u):(Ct('Missing or invalid "Content-Range" header.'),r.onError(0))}else u?r.onDone(u):r.onError(e.status)};var Ka,x2,C2,D2,M2;class Xj extends Fv{constructor(e){super(e);_(this,Ka);$(this,"_cachedChunks",[]);$(this,"_done",!1);$(this,"_requests",[]);$(this,"_storedError",null);const{length:n}=e._source;this._contentLength=n,this._fullRequestXhr=e._request({onHeadersReceived:C(this,Ka,x2).bind(this),onDone:C(this,Ka,C2).bind(this),onError:C(this,Ka,D2).bind(this),onProgress:C(this,Ka,M2).bind(this)})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}Ka=new WeakSet,x2=function(){const e=this._stream,{disableRange:n,rangeChunkSize:r}=e._source,o=this._fullRequestXhr;e._responseOrigin=Vv(o.responseURL);const u=o.getAllResponseHeaders(),h=new Headers(u?u.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(m=>{const[y,...b]=m.split(": ");return[y,b.join(": ")]}):[]),{allowRangeRequests:f,suggestedLength:p}=b2({responseHeaders:h,isHttp:e.isHttp,rangeChunkSize:r,disableRange:n});f&&(this._isRangeSupported=!0),this._contentLength=p||this._contentLength,this._filename=v2(h),this._isRangeSupported&&e._abortRequest(o),this._headersCapability.resolve()},C2=function(e){if(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._cachedChunks.push(e),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}},D2=function(e){this._storedError=zv(e,this._stream.url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0},M2=function(e){var n;(n=this.onProgress)==null||n.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})};var lo,R2,O2,n_;class qj extends Hv{constructor(e,n,r){super(e,n,r);_(this,lo);$(this,"onClosed",null);$(this,"_done",!1);$(this,"_queuedChunk",null);$(this,"_requests",[]);$(this,"_storedError",null);this._requestXhr=e._request({begin:n,end:r,onHeadersReceived:C(this,lo,R2).bind(this),onDone:C(this,lo,O2).bind(this),onError:C(this,lo,n_).bind(this),onProgress:null})}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){var n;this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),(n=this.onClosed)==null||n.call(this)}}lo=new WeakSet,R2=function(){var n;const e=Vv((n=this._requestXhr)==null?void 0:n.responseURL);try{A2(e,this._stream._responseOrigin)}catch(r){this._storedError=r,C(this,lo,n_).call(this,0)}},O2=function(e){var n;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,(n=this.onClosed)==null||n.call(this)},n_=function(e){this._storedError??(this._storedError=zv(e,this._stream.url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null};const Kj=/^[a-z][a-z0-9\-+.]+:/i;function $j(s){if(Kj.test(s))return new URL(s);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(s))}function N2(s){const{Readable:t}=process.getBuiltinModule("stream");return typeof t.toWeb=="function"?t.toWeb(s):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(s)}function L2(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(Ct(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class Wj extends Uv{constructor(t){super(t,Qj,Zj),this.url=$j(t.url),te(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class Qj extends Fv{constructor(e){super(e);$(this,"_reader",null);const{disableRange:n,disableStream:r,length:o,rangeChunkSize:u}=e._source;this._contentLength=o,this._isStreamingSupported=!r,this._isRangeSupported=!n;const h=e.url,f=process.getBuiltinModule("fs");f.promises.lstat(h).then(p=>{const m=f.createReadStream(h),y=N2(m);this._reader=y.getReader();const{size:b}=p;b<=2*u&&(this._isRangeSupported=!1),this._contentLength=b,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new kl("Streaming is disabled.")),this._headersCapability.resolve()}).catch(p=>{p.code==="ENOENT"&&(p=zv(0,h.href)),this._headersCapability.reject(p)})}async read(){var r;await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:L2(e),done:!1})}cancel(e){var n;(n=this._reader)==null||n.cancel(e)}}class Zj extends Hv{constructor(e,n,r){super(e,n,r);$(this,"_readCapability",Promise.withResolvers());$(this,"_reader",null);const o=e.url,u=process.getBuiltinModule("fs");try{const h=u.createReadStream(o,{start:n,end:r-1}),f=N2(h);this._reader=f.getReader(),this._readCapability.resolve()}catch(h){this._readCapability.reject(h)}}async read(){await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:{value:L2(e),done:!1}}cancel(e){var n;(n=this._reader)==null||n.cancel(e)}}const Tp=Symbol("INITIAL_DATA");var qi,lg,i_;class I2{constructor(){_(this,lg);_(this,qi,Object.create(null))}get(t,e=null){if(e){const r=C(this,lg,i_).call(this,t);return r.promise.then(()=>e(r.data)),null}const n=c(this,qi)[t];if(!n||n.data===Tp)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=c(this,qi)[t];return!!e&&e.data!==Tp}delete(t){const e=c(this,qi)[t];return!e||e.data===Tp?!1:(delete c(this,qi)[t],!0)}resolve(t,e=null){const n=C(this,lg,i_).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in c(this,qi)){const{data:n}=c(this,qi)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}E(this,qi,Object.create(null))}*[Symbol.iterator](){for(const t in c(this,qi)){const{data:e}=c(this,qi)[t];e!==Tp&&(yield[t,e])}}}qi=new WeakMap,lg=new WeakSet,i_=function(t){var e;return(e=c(this,qi))[t]||(e[t]={...Promise.withResolvers(),data:Tp})};const Jj=1e5,cN=30;var dN,dl,xi,cg,ug,Yc,Ur,hg,dg,Xc,fg,Od,fl,Nd,pg,Ld,qc,mg,gg,Id,Kc,yg,Pd,Bd,co,P2,B2,s_,ds,pb,a_,k2,U2;const On=class On{constructor({textContentSource:t,container:e,viewport:n}){_(this,co);_(this,dl,Promise.withResolvers());_(this,xi,null);_(this,cg,!1);_(this,ug,!!((dN=globalThis.FontInspector)!=null&&dN.enabled));_(this,Yc,null);_(this,Ur,null);_(this,hg,0);_(this,dg,0);_(this,Xc,null);_(this,fg,null);_(this,Od,0);_(this,fl,0);_(this,Nd,Object.create(null));_(this,pg,[]);_(this,Ld,null);_(this,qc,[]);_(this,mg,new WeakMap);_(this,gg,null);var f;if(t instanceof ReadableStream)E(this,Ld,t);else if(typeof t=="object")E(this,Ld,new ReadableStream({start(p){p.enqueue(t),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');E(this,xi,E(this,fg,e)),E(this,fl,n.scale*qa.pixelRatio),E(this,Od,n.rotation),E(this,Ur,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:o,pageX:u,pageY:h}=n.rawDims;E(this,gg,[1,0,0,-1,-u,h+o]),E(this,dg,r),E(this,hg,o),C(f=On,ds,k2).call(f),e.style.setProperty("--min-font-size",c(On,Pd)),Mu(e,n),c(this,dl).promise.finally(()=>{c(On,Bd).delete(this),E(this,Ur,null),E(this,Nd,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=gn.platform;return Dt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{c(this,Xc).read().then(({value:e,done:n})=>{if(n){c(this,dl).resolve();return}c(this,Yc)??E(this,Yc,e.lang),Object.assign(c(this,Nd),e.styles),C(this,co,P2).call(this,e.items),t()},c(this,dl).reject)};return E(this,Xc,c(this,Ld).getReader()),c(On,Bd).add(this),t(),c(this,dl).promise}update({viewport:t,onBefore:e=null}){var o;const n=t.scale*qa.pixelRatio,r=t.rotation;if(r!==c(this,Od)&&(e==null||e(),E(this,Od,r),Mu(c(this,fg),{rotation:r})),n!==c(this,fl)){e==null||e(),E(this,fl,n);const u={div:null,properties:null,ctx:C(o=On,ds,pb).call(o,c(this,Yc))};for(const h of c(this,qc))u.properties=c(this,mg).get(h),u.div=h,C(this,co,s_).call(this,u)}}cancel(){var e;const t=new kl("TextLayer task cancelled.");(e=c(this,Xc))==null||e.cancel(t).catch(()=>{}),E(this,Xc,null),c(this,dl).reject(t)}get textDivs(){return c(this,qc)}get textContentItemsStr(){return c(this,pg)}static cleanup(){if(!(c(this,Bd).size>0)){c(this,Id).clear();for(const{canvas:t}of c(this,Kc).values())t.remove();c(this,Kc).clear()}}};dl=new WeakMap,xi=new WeakMap,cg=new WeakMap,ug=new WeakMap,Yc=new WeakMap,Ur=new WeakMap,hg=new WeakMap,dg=new WeakMap,Xc=new WeakMap,fg=new WeakMap,Od=new WeakMap,fl=new WeakMap,Nd=new WeakMap,pg=new WeakMap,Ld=new WeakMap,qc=new WeakMap,mg=new WeakMap,gg=new WeakMap,Id=new WeakMap,Kc=new WeakMap,yg=new WeakMap,Pd=new WeakMap,Bd=new WeakMap,co=new WeakSet,P2=function(t){var r,o;if(c(this,cg))return;(o=c(this,Ur)).ctx??(o.ctx=C(r=On,ds,pb).call(r,c(this,Yc)));const e=c(this,qc),n=c(this,pg);for(const u of t){if(e.length>Jj){Ct("Ignoring additional textDivs for performance reasons."),E(this,cg,!0);return}if(u.str===void 0){if(u.type==="beginMarkedContentProps"||u.type==="beginMarkedContent"){const h=c(this,xi);E(this,xi,document.createElement("span")),c(this,xi).classList.add("markedContent"),u.id&&c(this,xi).setAttribute("id",`${u.id}`),u.tag==="Artifact"&&(c(this,xi).ariaHidden=!0),h.append(c(this,xi))}else u.type==="endMarkedContent"&&E(this,xi,c(this,xi).parentNode);continue}n.push(u.str),C(this,co,B2).call(this,u)}},B2=function(t){var S;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};c(this,qc).push(e);const r=lt.transform(c(this,gg),t.transform);let o=Math.atan2(r[1],r[0]);const u=c(this,Nd)[t.fontName];u.vertical&&(o+=Math.PI/2);let h=c(this,ug)&&u.fontSubstitution||u.fontFamily;h=On.fontFamilyMap.get(h)||h;const f=Math.hypot(r[2],r[3]),p=f*C(S=On,ds,U2).call(S,h,u,c(this,Yc));let m,y;o===0?(m=r[4],y=r[5]-p):(m=r[4]+p*Math.sin(o),y=r[5]-p*Math.cos(o));const b=e.style;b.left=`${(100*m/c(this,dg)).toFixed(2)}%`,b.top=`${(100*y/c(this,hg)).toFixed(2)}%`,b.setProperty("--font-height",`${f.toFixed(2)}px`),b.fontFamily=h,n.fontSize=f,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,c(this,ug)&&(e.dataset.fontName=u.fontSubstitutionLoadedName||t.fontName),o!==0&&(n.angle=o*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const w=Math.abs(t.transform[0]),x=Math.abs(t.transform[3]);w!==x&&Math.max(w,x)/Math.min(w,x)>1.5&&(A=!0)}if(A&&(n.canvasWidth=u.vertical?t.height:t.width),c(this,mg).set(e,n),c(this,Ur).div=e,c(this,Ur).properties=n,C(this,co,s_).call(this,c(this,Ur)),n.hasText&&c(this,xi).append(e),n.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),c(this,xi).append(w)}},s_=function(t){var u;const{div:e,properties:n,ctx:r}=t,{style:o}=e;if(n.canvasWidth!==0&&n.hasText){const{fontFamily:h}=o,{canvasWidth:f,fontSize:p}=n;C(u=On,ds,a_).call(u,r,p*c(this,fl),h);const{width:m}=r.measureText(e.textContent);m>0&&o.setProperty("--scale-x",f*c(this,fl)/m)}n.angle!==0&&o.setProperty("--rotate",`${n.angle}deg`)},ds=new WeakSet,pb=function(t=null){let e=c(this,Kc).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,Kc).set(t,e),c(this,yg).set(e,{size:0,family:""})}return e},a_=function(t,e,n){const r=c(this,yg).get(t);e===r.size&&n===r.family||(t.font=`${e}px ${n}`,r.size=e,r.family=n)},k2=function(){if(c(this,Pd)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),E(this,Pd,t.getBoundingClientRect().height),t.remove()},U2=function(t,e,n){const r=c(this,Id).get(t);if(r)return r;const o=C(this,ds,pb).call(this,n);o.canvas.width=o.canvas.height=cN,C(this,ds,a_).call(this,o,cN,t);const u=o.measureText(""),h=u.fontBoundingBoxAscent,f=Math.abs(u.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let p=.8;return h?p=h/(h+f):(gn.platform.isFirefox&&Ct("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?p=e.ascent:e.descent&&(p=1+e.descent)),c(this,Id).set(t,p),p},_(On,ds),_(On,Id,new Map),_(On,Kc,new Map),_(On,yg,new WeakMap),_(On,Pd,null),_(On,Bd,new Set);let cm=On;const t5=100;function F2(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const t=new r_,{docId:e}=t,n=s.url?lj(s.url):null,r=s.data?cj(s.data):null,o=s.httpHeaders||null,u=s.withCredentials===!0,h=s.password??null,f=s.range instanceof H2?s.range:null,p=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:2**16;let m=s.worker instanceof um?s.worker:null;const y=s.verbosity,b=typeof s.docBaseUrl=="string"&&!kv(s.docBaseUrl)?s.docBaseUrl:null,A=j0(s.cMapUrl),S=s.cMapPacked!==!1,w=s.CMapReaderFactory||(ai?yj:qO),x=j0(s.iccUrl),D=j0(s.standardFontDataUrl),O=s.StandardFontDataFactory||(ai?bj:KO),M=j0(s.wasmUrl),N=s.WasmFactory||(ai?vj:$O),L=s.stopAtErrors!==!0,I=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,k=s.isEvalSupported!==!1,z=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!ai,W=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!ai&&(gn.platform.isFirefox||!globalThis.chrome),it=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,et=typeof s.disableFontFace=="boolean"?s.disableFontFace:ai,ot=s.fontExtraProperties===!0,Tt=s.enableXfa===!0,yt=s.ownerDocument||globalThis.document,bt=s.disableRange===!0,F=s.disableStream===!0,Y=s.disableAutoFetch===!0,tt=s.pdfBug===!0,At=s.CanvasFactory||(ai?gj:fj),gt=s.FilterFactory||(ai?mj:pj),B=s.enableHWA===!0,q=s.useWasm!==!1,nt=f?f.length:s.length??NaN,at=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!ai&&!et,ct=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:!!(w===qO&&O===KO&&N===$O&&A&&D&&M&&Dp(A,document.baseURI)&&Dp(D,document.baseURI)&&Dp(M,document.baseURI)),vt=null;Pz(y);const Et={canvasFactory:new At({ownerDocument:yt,enableHWA:B}),filterFactory:new gt({docId:e,ownerDocument:yt}),cMapReaderFactory:ct?null:new w({baseUrl:A,isCompressed:S}),standardFontDataFactory:ct?null:new O({baseUrl:D}),wasmFactory:ct?null:new N({baseUrl:M})};m||(m=um.create({verbosity:y,port:Ga.workerPort}),t._worker=m);const Fe={docId:e,apiVersion:"5.4.624",data:r,password:h,disableAutoFetch:Y,rangeChunkSize:p,length:nt,docBaseUrl:b,enableXfa:Tt,evaluatorOptions:{maxImageSize:I,disableFontFace:et,ignoreErrors:L,isEvalSupported:k,isOffscreenCanvasSupported:z,isImageDecoderSupported:W,canvasMaxAreaInBytes:it,fontExtraProperties:ot,useSystemFonts:at,useWasm:q,useWorkerFetch:ct,cMapUrl:A,iccUrl:x,standardFontDataUrl:D,wasmUrl:M}},ye={ownerDocument:yt,pdfBug:tt,styleElement:vt,enableHWA:B,loadingParams:{disableAutoFetch:Y,enableXfa:Tt}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const hi=m.messageHandler.sendWithPromise("GetDocRequest",Fe,r?[r.buffer]:null);let _t;if(f)_t=new kj({pdfDataRangeTransport:f,disableRange:bt,disableStream:F});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Rt=Dp(n)?Vj:ai?Wj:Yj;_t=new Rt({url:n,length:nt,httpHeaders:o,withCredentials:u,rangeChunkSize:p,disableRange:bt,disableStream:F})}return hi.then(Rt=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Gt=new Bp(e,Rt,m.port),Ee=new i5(Gt,t,_t,ye,Et);t._transport=Ee,Gt.send("Ready",null)})}).catch(t._capability.reject),t}var gv;const yv=class yv{constructor(){$(this,"_capability",Promise.withResolvers());$(this,"_transport",null);$(this,"_worker",null);$(this,"docId",`d${un(yv,gv)._++}`);$(this,"destroyed",!1);$(this,"onPassword",null);$(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,n,r;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(o){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,o}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};gv=new WeakMap,_(yv,gv,0);let r_=yv;var $c,bg,vg,Ag,Eg;class H2{constructor(t,e,n=!1,r=null){_(this,$c,Promise.withResolvers());_(this,bg,[]);_(this,vg,[]);_(this,Ag,[]);_(this,Eg,[]);this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(t){c(this,Eg).push(t)}addProgressListener(t){c(this,Ag).push(t)}addProgressiveReadListener(t){c(this,vg).push(t)}addProgressiveDoneListener(t){c(this,bg).push(t)}onDataRange(t,e){for(const n of c(this,Eg))n(t,e)}onDataProgress(t,e){c(this,$c).promise.then(()=>{for(const n of c(this,Ag))n(t,e)})}onDataProgressiveRead(t){c(this,$c).promise.then(()=>{for(const e of c(this,vg))e(t)})}onDataProgressiveDone(){c(this,$c).promise.then(()=>{for(const t of c(this,bg))t()})}transportReady(){c(this,$c).resolve()}requestDataRange(t,e){ee("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}$c=new WeakMap,bg=new WeakMap,vg=new WeakMap,Ag=new WeakMap,Eg=new WeakMap;class e5{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Dt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Fr,Sg,Wc,Vp;class n5{constructor(t,e,n,r=!1){_(this,Wc);_(this,Fr,!1);_(this,Sg,lm.instance);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=r?new HO:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new I2,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(t){this._pageIndex=t-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:o=!1}={}){return new uy({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Dt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:r="display",annotationMode:o=Ho.ENABLE,transform:u=null,background:h=null,optionalContentConfigPromise:f=null,annotationCanvasMap:p=null,pageColors:m=null,printAnnotationStorage:y=null,isEditing:b=!1,recordOperations:A=!1,operationsFilter:S=null}){var W,it,et;(W=this._stats)==null||W.time("Overall");const w=this._transport.getRenderingIntent(r,o,y,b),{renderingIntent:x,cacheKey:D}=w;E(this,Fr,!1),f||(f=this._transport.getOptionalContentConfig(x));let O=this._intentStates.get(D);O||(O=Object.create(null),this._intentStates.set(D,O)),O.streamReaderCancelTimeout&&(clearTimeout(O.streamReaderCancelTimeout),O.streamReaderCancelTimeout=null);const M=!!(x&ls.PRINT);O.displayReadyCapability||(O.displayReadyCapability=Promise.withResolvers(),O.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(it=this._stats)==null||it.time("Page Request"),this._pumpOperatorList(w));const N=!!(this._pdfBug&&((et=globalThis.StepperManager)!=null&&et.enabled)),L=!this.recordedBBoxes&&(A||N),I=ot=>{var Tt,yt;if(O.renderTasks.delete(k),L){const bt=(Tt=k.gfx)==null?void 0:Tt.dependencyTracker.take();bt&&(k.stepper&&k.stepper.setOperatorBBoxes(bt,k.gfx.dependencyTracker.takeDebugMetadata()),A&&(this.recordedBBoxes=bt))}M&&E(this,Fr,!0),C(this,Wc,Vp).call(this),ot?(k.capability.reject(ot),this._abortOperatorList({intentState:O,reason:ot instanceof Error?ot:new Error(ot)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(yt=globalThis.Stats)!=null&&yt.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new o_({callback:I,params:{canvas:e,canvasContext:t,dependencyTracker:L?new Ej(e,O.operatorList.length,N):null,viewport:n,transform:u,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:p,operatorList:O.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!M,pdfBug:this._pdfBug,pageColors:m,enableHWA:this._transport.enableHWA,operationsFilter:S});(O.renderTasks||(O.renderTasks=new Set)).add(k);const z=k.task;return Promise.all([O.displayReadyCapability.promise,f]).then(([ot,Tt])=>{var yt;if(this.destroyed){I();return}if((yt=this._stats)==null||yt.time("Rendering"),!(Tt.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:ot,optionalContentConfig:Tt}),k.operatorListChanged()}).catch(I),z}getOperatorList({intent:t="display",annotationMode:e=Ho.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var p;function o(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(f))}const u=this._transport.getRenderingIntent(t,e,n,r,!0);let h=this._intentStates.get(u.cacheKey);h||(h=Object.create(null),this._intentStates.set(u.cacheKey,h));let f;return h.opListReadCapability||(f=Object.create(null),f.operatorListChanged=o,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||(h.renderTasks=new Set)).add(f),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(u)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:c(this,Sg).getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>om.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,r){function o(){u.read().then(function({value:f,done:p}){if(p){n(h);return}h.lang??(h.lang=f.lang),Object.assign(h.styles,f.styles),h.items.push(...f.items),o()},r)}const u=e.getReader(),h={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),E(this,Fr,!1),Promise.all(t)}cleanup(t=!1){E(this,Fr,!0);const e=C(this,Wc,Vp).call(this);return t&&e&&this._stats&&(this._stats=new HO),e}_startRenderPage(t,e){var r,o;const n=this._intentStates.get(e);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(o=n.displayReadyCapability)==null||o.resolve(t))}_renderPageChunk(t,e){for(let n=0,r=t.length;n<r;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&C(this,Wc,Vp).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:r}){const{map:o,transfer:u}=n,f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:c(this,Sg).getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:r},u).getReader(),p=this._intentStates.get(e);p.streamReader=f;const m=()=>{f.read().then(({value:y,done:b})=>{if(b){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,p),m())},y=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const b of p.renderTasks)b.operatorListChanged();C(this,Wc,Vp).call(this)}if(p.displayReadyCapability)p.displayReadyCapability.reject(y);else if(p.opListReadCapability)p.opListReadCapability.reject(y);else throw y}})};m()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof R1){let r=t5;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new kl(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Fr=new WeakMap,Sg=new WeakMap,Wc=new WeakSet,Vp=function(){if(!c(this,Fr)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),E(this,Fr,!1),!0};var pl,ia,Hr,Qc,bv,Zc,Jc,li,mb,V2,z2,zp,kd,gb;const Re=class Re{constructor({name:t=null,port:e=null,verbosity:n=Bz()}={}){_(this,li);_(this,pl,Promise.withResolvers());_(this,ia,null);_(this,Hr,null);_(this,Qc,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(c(Re,Jc).has(e))throw new Error("Cannot use more than one PDFWorker per port.");c(Re,Jc).set(e,this),C(this,li,V2).call(this,e)}else C(this,li,z2).call(this)}get promise(){return c(this,pl).promise}get port(){return c(this,Hr)}get messageHandler(){return c(this,ia)}destroy(){var t,e;this.destroyed=!0,(t=c(this,Qc))==null||t.terminate(),E(this,Qc,null),c(Re,Jc).delete(c(this,Hr)),E(this,Hr,null),(e=c(this,ia))==null||e.destroy(),E(this,ia,null)}static create(t){const e=c(this,Jc).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Re(t)}static get workerSrc(){if(Ga.workerSrc)return Ga.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Dt(this,"_setupFakeWorkerGlobal",(async()=>c(this,kd,gb)?c(this,kd,gb):(await import(this.workerSrc)).WorkerMessageHandler)())}};pl=new WeakMap,ia=new WeakMap,Hr=new WeakMap,Qc=new WeakMap,bv=new WeakMap,Zc=new WeakMap,Jc=new WeakMap,li=new WeakSet,mb=function(){c(this,pl).resolve(),c(this,ia).send("configure",{verbosity:this.verbosity})},V2=function(t){E(this,Hr,t),E(this,ia,new Bp("main","worker",t)),c(this,ia).on("ready",()=>{}),C(this,li,mb).call(this)},z2=function(){if(c(Re,Zc)||c(Re,kd,gb)){C(this,li,zp).call(this);return}let{workerSrc:t}=Re;try{Re._isSameOrigin(window.location,t)||(t=Re._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new Bp("main","worker",e),r=()=>{o.abort(),n.destroy(),e.terminate(),this.destroyed?c(this,pl).reject(new Error("Worker was destroyed")):C(this,li,zp).call(this)},o=new AbortController;e.addEventListener("error",()=>{c(this,Qc)||r()},{signal:o.signal}),n.on("test",h=>{if(o.abort(),this.destroyed||!h){r();return}E(this,ia,n),E(this,Hr,e),E(this,Qc,e),C(this,li,mb).call(this)}),n.on("ready",h=>{if(o.abort(),this.destroyed){r();return}try{u()}catch{C(this,li,zp).call(this)}});const u=()=>{const h=new Uint8Array;n.send("test",h,[h.buffer])};u();return}catch{Pv("The worker has been disabled.")}C(this,li,zp).call(this)},zp=function(){c(Re,Zc)||(Ct("Setting up fake worker."),E(Re,Zc,!0)),Re._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){c(this,pl).reject(new Error("Worker was destroyed"));return}const e=new dj;E(this,Hr,e);const n=`fake${un(Re,bv)._++}`,r=new Bp(n+"_worker",n,e);t.setup(r,e),E(this,ia,new Bp(n,n+"_worker",e)),C(this,li,mb).call(this)}).catch(t=>{c(this,pl).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},kd=new WeakSet,gb=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},_(Re,kd),_(Re,bv,0),_(Re,Zc,!1),_(Re,Jc,new WeakMap),ai&&(E(Re,Zc,!0),Ga.workerSrc||(Ga.workerSrc="./pdf.worker.mjs")),Re._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const r=new URL(e,n);return n.origin===r.origin},Re._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Re.fromPort=t=>{if(Kz("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Re.create(t)};let um=Re;var Ki,Vr,zr,Ps,ml,Ud,jr,Ci,hs,j2,jp,yb;class i5{constructor(t,e,n,r,o){_(this,hs);$(this,"downloadInfoCapability",Promise.withResolvers());_(this,Ki,null);_(this,Vr,new Map);_(this,zr,null);_(this,Ps,new Map);_(this,ml,new Map);_(this,Ud,new Map);_(this,jr,null);_(this,Ci,lm.instance);this.messageHandler=t,this.loadingTask=e,E(this,zr,n),this.commonObjs=new I2,this.fontLoader=new aj({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.enableHWA=r.enableHWA,this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),c(this,Ci).addListener(C(this,hs,j2).bind(this))}get annotationStorage(){return Dt(this,"annotationStorage",new N1)}getRenderingIntent(t,e=Ho.ENABLE,n=null,r=!1,o=!1){let u=ls.DISPLAY,h=VT;switch(t){case"any":u=ls.ANY;break;case"display":break;case"print":u=ls.PRINT;break;default:Ct(`getRenderingIntent - invalid intent: ${t}`)}const f=u&ls.PRINT&&n instanceof o2?n:this.annotationStorage;switch(e){case Ho.DISABLE:u+=ls.ANNOTATIONS_DISABLE;break;case Ho.ENABLE:break;case Ho.ENABLE_FORMS:u+=ls.ANNOTATIONS_FORMS;break;case Ho.ENABLE_STORAGE:u+=ls.ANNOTATIONS_STORAGE,h=f.serializable;break;default:Ct(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(u+=ls.IS_EDITING),o&&(u+=ls.OPLIST);const{ids:p,hash:m}=f.modifiedIds,y=[u,h.hash,m];return{renderingIntent:u,cacheKey:y.join("_"),annotationStorageSerializable:h,modifiedIds:p}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=c(this,jr))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const r of c(this,Ps).values())t.push(r._destroy());c(this,Ps).clear(),c(this,ml).clear(),c(this,Ud).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var r,o;this.commonObjs.clear(),this.fontLoader.clear(),c(this,Vr).clear(),this.filterFactory.destroy(),cm.cleanup(),(r=c(this,zr))==null||r.cancelAllRequests(new kl("Worker was terminated.")),(o=this.messageHandler)==null||o.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,r)=>{te(c(this,zr),"GetReader - no `BasePDFStream` instance available."),E(this,Ki,c(this,zr).getFullReader()),c(this,Ki).onProgress=o=>C(this,hs,yb).call(this,o),r.onPull=()=>{c(this,Ki).read().then(function({value:o,done:u}){if(u){r.close();return}te(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{c(this,Ki).cancel(o),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("ReaderHeadersReady",async n=>{await c(this,Ki).headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:u}=c(this,Ki);return r&&o&&(c(this,Ki).onProgress=null),{isStreamingSupported:r,isRangeSupported:o,contentLength:u}}),t.on("GetRangeReader",(n,r)=>{te(c(this,zr),"GetRangeReader - no `BasePDFStream` instance available.");const o=c(this,zr).getRangeReader(n.begin,n.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:u,done:h}){if(h){r.close();return}te(u instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(u),1,[u])}).catch(u=>{r.error(u)})},r.onCancel=u=>{o.cancel(u),r.ready.catch(h=>{if(!this.destroyed)throw h})}}),t.on("GetDoc",({pdfInfo:n})=>{c(this,Ci).pagesNumber=n.numPages,this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new e5(n,this))}),t.on("DocException",n=>{e._capability.reject(Ai(n))}),t.on("PasswordRequest",n=>{E(this,jr,Promise.withResolvers());try{if(!e.onPassword)throw Ai(n);const r=o=>{o instanceof Error?c(this,jr).reject(o):c(this,jr).resolve({password:o})};e.onPassword(r,n.code)}catch(r){c(this,jr).reject(r)}return c(this,jr).promise}),t.on("DataLoaded",n=>{C(this,hs,yb).call(this,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;c(this,Ps).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,r,o])=>{var u;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in o){const b=o.error;Ct(`Error during font loading: ${b}`),this.commonObjs.resolve(n,b);break}const h=new zT(o),f=this._params.pdfBug&&((u=globalThis.FontInspector)!=null&&u.enabled)?(b,A)=>globalThis.FontInspector.fontAdded(b,A):null,p=new rj(h,f,o.extra,o.charProcOperatorList);this.fontLoader.bind(p).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!p.fontExtraProperties&&p.data&&p.clearData(),this.commonObjs.resolve(n,p)});break;case"CopyLocalImage":const{imageRef:m}=o;te(m,"The imageRef must be defined.");for(const b of c(this,Ps).values())for(const[,A]of b.objs)if((A==null?void 0:A.ref)===m)return A.dataLen?(this.commonObjs.resolve(n,structuredClone(A)),A.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new oj(o));break;case"Image":this.commonObjs.resolve(n,o);break;case"Pattern":const y=new jT(o);this.commonObjs.resolve(n,y.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([n,r,o,u])=>{var f;if(this.destroyed)return;const h=c(this,Ps).get(r);if(!h.objs.has(n)){if(h._intentStates.size===0){(f=u==null?void 0:u.bitmap)==null||f.close();return}switch(o){case"Image":case"Pattern":h.objs.resolve(n,u);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",n=>{this.destroyed||C(this,hs,yb).call(this,n)}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Ct("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=c(this,Ki))==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>c(this,Ci).pagesNumber)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=c(this,Ci).getPageId(t)-1,r=c(this,ml).get(e);if(r)return r;const o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(u=>{if(this.destroyed)throw new Error("Transport destroyed");u.refStr&&c(this,Ud).set(u.refStr,n);const h=new n5(e,u,this,this._params.pdfBug);return c(this,Ps).set(e,h),h});return c(this,ml).set(e,o),o}async getPageIndex(t){if(!GT(t))throw new Error("Invalid pageIndex request.");const e=await this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen});return c(this,Ci).getPageNumber(e+1)-1}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:c(this,Ci).getPageId(t+1)-1,intent:e})}getFieldObjects(){return C(this,hs,jp).call(this,"GetFieldObjects")}hasJSActions(){return C(this,hs,jp).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return C(this,hs,jp).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:c(this,Ci).getPageId(t+1)-1})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:c(this,Ci).getPageId(t+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return C(this,hs,jp).call(this,"GetOptionalContentConfig").then(e=>new Bj(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=c(this,Vr).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(r=>{var o,u;return{info:r[0],metadata:r[1]?new Ij(r[1]):null,contentDispositionFilename:((o=c(this,Ki))==null?void 0:o.filename)??null,contentLength:((u=c(this,Ki))==null?void 0:u.contentLength)??null,hasStructTree:r[2]}});return c(this,Vr).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of c(this,Ps).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),c(this,Vr).clear(),this.filterFactory.destroy(!0),cm.cleanup()}}cachedPageNumber(t){if(!GT(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`,n=c(this,Ud).get(e);return n>=0?c(this,Ci).getPageNumber(n+1):null}}Ki=new WeakMap,Vr=new WeakMap,zr=new WeakMap,Ps=new WeakMap,ml=new WeakMap,Ud=new WeakMap,jr=new WeakMap,Ci=new WeakMap,hs=new WeakSet,j2=function(){const t=new Map,e=new Map;for(let n=0,r=c(this,Ci).pagesNumber;n<r;n++){const o=c(this,Ci).getPrevPageNumber(n+1)-1,u=c(this,Ps).get(o);u&&t.set(n,u);const h=c(this,ml).get(o);h&&e.set(n,h)}E(this,Ps,t),E(this,ml,e)},jp=function(t,e=null){const n=c(this,Vr).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise(t,e);return c(this,Vr).set(t,r),r},yb=function({loaded:t,total:e}){var n,r;(r=(n=this.loadingTask).onProgress)==null||r.call(n,{loaded:t,total:e,percent:Un(Math.round(t/e*100),0,100)})};class s5{constructor(t){$(this,"_internalRenderTask",null);$(this,"onContinue",null);$(this,"onError",null);this._internalRenderTask=t}get promise(){return this._internalRenderTask.capability.promise}cancel(t=0){this._internalRenderTask.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this._internalRenderTask.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this._internalRenderTask;return t.form||t.canvas&&(e==null?void 0:e.size)>0}}var gl,tu;const dc=class dc{constructor({callback:t,params:e,objs:n,commonObjs:r,annotationCanvasMap:o,operatorList:u,pageIndex:h,canvasFactory:f,filterFactory:p,useRequestAnimationFrame:m=!1,pdfBug:y=!1,pageColors:b=null,enableHWA:A=!1,operationsFilter:S=null}){_(this,gl,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=u,this._pageIndex=h,this.canvasFactory=f,this.filterFactory=p,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new s5(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=A,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=S}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var f,p;if(this.cancelled)return;if(this._canvas){if(c(dc,tu).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(dc,tu).add(this._canvas)}this._pdfBug&&((f=globalThis.StepperManager)!=null&&f.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:r,background:o,dependencyTracker:u}=this.params,h=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new jh(h,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,u),this.gfx.beginDrawing({transform:r,viewport:n,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(p=this.graphicsReadyCallback)==null||p.call(this)}cancel(t=null,e=0){var n,r,o;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),c(this,gl)&&(window.cancelAnimationFrame(c(this,gl)),E(this,gl,null)),c(dc,tu).delete(this._canvas),t||(t=new R1(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(o=(r=this.task).onError)==null||o.call(r,t)}operatorListChanged(){var t,e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.gfx.dependencyTracker)==null||t.growOperationsCount(this.operatorList.fnArray.length),(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?E(this,gl,window.requestAnimationFrame(()=>{E(this,gl,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(dc,tu).delete(this._canvas),this.callback())))}};gl=new WeakMap,tu=new WeakMap,_(dc,tu,new WeakSet);let o_=dc;const a5="5.4.624",r5="384c6208b";var $i,eu,Fd,fn,Tg,Hd,Gr,_g,yl,sa,wg,ge,l_,c_,u_,lc,G2,Fo;const Ei=class Ei{constructor({editor:t=null,uiManager:e=null}){_(this,ge);_(this,$i,null);_(this,eu,null);_(this,Fd);_(this,fn,null);_(this,Tg,!1);_(this,Hd,!1);_(this,Gr,null);_(this,_g);_(this,yl,null);_(this,sa,null);var n,r;t?(E(this,Hd,!1),E(this,Gr,t)):E(this,Hd,!0),E(this,sa,(t==null?void 0:t._uiManager)||e),E(this,_g,c(this,sa)._eventBus),E(this,Fd,((n=t==null?void 0:t.color)==null?void 0:n.toUpperCase())||((r=c(this,sa))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),c(Ei,wg)||E(Ei,wg,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Dt(this,"_keyboardManager",new dy([[["Escape","mac+Escape"],Ei.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ei.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ei.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ei.prototype._moveToPrevious],[["Home","mac+Home"],Ei.prototype._moveToBeginning],[["End","mac+End"],Ei.prototype._moveToEnd]]))}renderButton(){const t=E(this,$i,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",c(this,Gr)&&(t.ariaControls=`${c(this,Gr).id}_colorpicker_dropdown`);const e=c(this,sa)._signal;t.addEventListener("click",C(this,ge,lc).bind(this),{signal:e}),t.addEventListener("keydown",C(this,ge,u_).bind(this),{signal:e});const n=E(this,eu,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=c(this,Fd),t.append(n),t}renderMainDropdown(){const t=E(this,fn,C(this,ge,l_).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===c(this,$i)){C(this,ge,lc).call(this,t);return}const e=t.target.getAttribute("data-color");e&&C(this,ge,c_).call(this,e,t)}_moveToNext(t){var e,n;if(!c(this,ge,Fo)){C(this,ge,lc).call(this,t);return}if(t.target===c(this,$i)){(e=c(this,fn).firstElementChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=c(this,fn))==null?void 0:e.firstElementChild)||t.target===c(this,$i)){c(this,ge,Fo)&&this._hideDropdownFromKeyboard();return}c(this,ge,Fo)||C(this,ge,lc).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!c(this,ge,Fo)){C(this,ge,lc).call(this,t);return}(e=c(this,fn).firstElementChild)==null||e.focus()}_moveToEnd(t){var e;if(!c(this,ge,Fo)){C(this,ge,lc).call(this,t);return}(e=c(this,fn).lastElementChild)==null||e.focus()}hideDropdown(){var t,e;(t=c(this,fn))==null||t.classList.add("hidden"),c(this,$i).ariaExpanded="false",(e=c(this,yl))==null||e.abort(),E(this,yl,null)}_hideDropdownFromKeyboard(){var t;if(!c(this,Hd)){if(!c(this,ge,Fo)){(t=c(this,Gr))==null||t.unselect();return}this.hideDropdown(),c(this,$i).focus({preventScroll:!0,focusVisible:c(this,Tg)})}}updateColor(t){if(c(this,eu)&&(c(this,eu).style.backgroundColor=t),!c(this,fn))return;const e=c(this,sa).highlightColors.values();for(const n of c(this,fn).children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;(t=c(this,$i))==null||t.remove(),E(this,$i,null),E(this,eu,null),(e=c(this,fn))==null||e.remove(),E(this,fn,null)}};$i=new WeakMap,eu=new WeakMap,Fd=new WeakMap,fn=new WeakMap,Tg=new WeakMap,Hd=new WeakMap,Gr=new WeakMap,_g=new WeakMap,yl=new WeakMap,sa=new WeakMap,wg=new WeakMap,ge=new WeakSet,l_=function(){const t=document.createElement("div"),e=c(this,sa)._signal;t.addEventListener("contextmenu",Gs,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),c(this,Gr)&&(t.id=`${c(this,Gr).id}_colorpicker_dropdown`);for(const[n,r]of c(this,sa).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=n,o.setAttribute("data-l10n-id",c(Ei,wg)[n]);const u=document.createElement("span");o.append(u),u.className="swatch",u.style.backgroundColor=r,o.ariaSelected=r===c(this,Fd),o.addEventListener("click",C(this,ge,c_).bind(this,r),{signal:e}),t.append(o)}return t.addEventListener("keydown",C(this,ge,u_).bind(this),{signal:e}),t},c_=function(t,e){e.stopPropagation(),c(this,_g).dispatch("switchannotationeditorparams",{source:this,type:Xt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},u_=function(t){Ei._keyboardManager.exec(this,t)},lc=function(t){if(c(this,ge,Fo)){this.hideDropdown();return}if(E(this,Tg,t.detail===0),c(this,yl)||(E(this,yl,new AbortController),window.addEventListener("pointerdown",C(this,ge,G2).bind(this),{signal:c(this,sa).combinedSignal(c(this,yl))})),c(this,$i).ariaExpanded="true",c(this,fn)){c(this,fn).classList.remove("hidden");return}const e=E(this,fn,C(this,ge,l_).call(this));c(this,$i).append(e)},G2=function(t){var e;(e=c(this,fn))!=null&&e.contains(t.target)||this.hideDropdown()},Fo=function(){return c(this,fn)&&!c(this,fn).classList.contains("hidden")},_(Ei,wg,null);let ev=Ei;var Pa,xg,Vd,Cg;const fc=class fc{constructor(t){_(this,Pa,null);_(this,xg,null);_(this,Vd,null);E(this,xg,t),E(this,Vd,t._uiManager),c(fc,Cg)||E(fc,Cg,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(c(this,Pa))return c(this,Pa);const{editorType:t,colorType:e,color:n}=c(this,xg),r=E(this,Pa,document.createElement("input"));return r.type="color",r.value=n||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",c(fc,Cg)[t]),r.addEventListener("input",()=>{c(this,Vd).updateParams(e,r.value)},{signal:c(this,Vd)._signal}),r}update(t){c(this,Pa)&&(c(this,Pa).value=t)}destroy(){var t;(t=c(this,Pa))==null||t.remove(),E(this,Pa,null)}hideDropdown(){}};Pa=new WeakMap,xg=new WeakMap,Vd=new WeakMap,Cg=new WeakMap,_(fc,Cg,null);let nv=fc;function uN(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function _p(s){return Math.max(0,Math.min(255,255*s))}class hN{static CMYK_G([t,e,n,r]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=_p(t),[t,t,t]}static G_HTML([t]){const e=uN(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(_p)}static RGB_HTML(t){return`#${t.map(uN).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,n+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,n,r]){return[_p(1-Math.min(1,t+r)),_p(1-Math.min(1,n+r)),_p(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const r=1-t,o=1-e,u=1-n,h=Math.min(r,o,u);return["CMYK",r,o,u,h]}}class o5{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){ee("Abstract method `_createSVG` called.")}}class iv extends o5{_createSVG(t){return document.createElementNS(pr,t)}}const l5=9,Ou=new WeakSet,c5=new Date().getTimezoneOffset()*60*1e3;class jS{static create(t){switch(t.data.annotationType){case an.LINK:return new P1(t);case an.TEXT:return new h5(t);case an.WIDGET:switch(t.data.fieldType){case"Tx":return new d5(t);case"Btn":return t.data.radioButton?new q2(t):t.data.checkBox?new p5(t):new m5(t);case"Ch":return new g5(t);case"Sig":return new f5(t)}return new Lu(t);case an.POPUP:return new d_(t);case an.FREETEXT:return new Z2(t);case an.LINE:return new b5(t);case an.SQUARE:return new v5(t);case an.CIRCLE:return new A5(t);case an.POLYLINE:return new J2(t);case an.CARET:return new S5(t);case an.INK:return new B1(t);case an.POLYGON:return new E5(t);case an.HIGHLIGHT:return new tP(t);case an.UNDERLINE:return new T5(t);case an.SQUIGGLY:return new _5(t);case an.STRIKEOUT:return new w5(t);case an.STAMP:return new eP(t);case an.FILEATTACHMENT:return new x5(t);default:return new Ue(t)}}}var nu,zd,Bs,Dg,h_;const j1=class j1{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){_(this,Dg);_(this,nu,null);_(this,zd,!1);_(this,Bs,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t!=null&&t.str||e!=null&&e.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return j1._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:t}=this,e=(n=this.annotationStorage)==null?void 0:n.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var h;const t=(h=this.annotationStorage)==null?void 0:h.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:r}=this.data;let o=-1/0,u=-1/0;if((e==null?void 0:e.length)>=8){for(let f=0;f<e.length;f+=8)e[f+1]>u?(u=e[f+1],o=e[f+2]):e[f+1]===u&&(o=Math.max(o,e[f+2]));return[o,u]}if((n==null?void 0:n.length)>=1){for(const f of n)for(let p=0,m=f.length;p<m;p+=2)f[p+1]>u?(u=f[p+1],o=f[p]):f[p+1]===u&&(o=Math.max(o,f[p]));if(o!==1/0)return[o,u]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:u}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-o)/n,t[1]=100*(t[1]-u)/r,t}get commentText(){var e,n,r;const{data:t}=this;return((n=(e=this.annotationStorage.getRawValue(`${am}${t.id}`))==null?void 0:e.popup)==null?void 0:n.contents)||((r=t.contentsObj)==null?void 0:r.str)||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${am}${e.id}`,{id:e.id,annotationType:e.annotationType,page:this.parent.page,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){var t,e;(e=((t=c(this,Bs))==null?void 0:t.popup)||this.popup)==null||e.remove(),E(this,Bs,this.popup=null)}updateEdited(t){var o;if(!this.container)return;t.rect&&(c(this,nu)||E(this,nu,{rect:this.data.rect.slice(0)}));const{rect:e,popup:n}=t;e&&C(this,Dg,h_).call(this,e);let r=((o=c(this,Bs))==null?void 0:o.popup)||this.popup;!r&&(n!=null&&n.text)&&(this._createPopup(n),r=c(this,Bs).popup),r&&(r.updateEdited(t),n!=null&&n.deleted&&(r.remove(),E(this,Bs,null),this.popup=null))}resetEdited(){var t;c(this,nu)&&(C(this,Dg,h_).call(this,c(this,nu).rect),(t=c(this,Bs))==null||t.popup.resetEdited(),E(this,nu,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),!(this instanceof Lu)&&!(this instanceof P1)&&(o.tabIndex=0);const{style:u}=o;if(u.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof d_){const{rotation:w}=e;return!e.hasOwnCanvas&&w!==0&&this.setRotation(w,o),o}const{width:h,height:f}=this;if(!t&&e.borderStyle.width>0){u.borderWidth=`${e.borderStyle.width}px`;const w=e.borderStyle.horizontalCornerRadius,x=e.borderStyle.verticalCornerRadius;if(w>0||x>0){const O=`calc(${w}px * var(--total-scale-factor)) / calc(${x}px * var(--total-scale-factor))`;u.borderRadius=O}else if(this instanceof q2){const O=`calc(${h}px * var(--total-scale-factor)) / calc(${f}px * var(--total-scale-factor))`;u.borderRadius=O}switch(e.borderStyle.style){case Eh.SOLID:u.borderStyle="solid";break;case Eh.DASHED:u.borderStyle="dashed";break;case Eh.BEVELED:Ct("Unimplemented border style: beveled");break;case Eh.INSET:Ct("Unimplemented border style: inset");break;case Eh.UNDERLINE:u.borderBottomStyle="solid";break}const D=e.borderColor||null;D?(E(this,zd,!0),u.borderColor=lt.makeHexColor(D[0]|0,D[1]|0,D[2]|0)):u.borderWidth=0}const p=lt.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:m,pageHeight:y,pageX:b,pageY:A}=r.rawDims;u.left=`${100*(p[0]-b)/m}%`,u.top=`${100*(p[1]-A)/y}%`;const{rotation:S}=e;return e.hasOwnCanvas||S===0?(u.width=`${100*h/m}%`,u.height=`${100*f/y}%`):this.setRotation(S,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:o,height:u}=this;t%180!==0&&([o,u]=[u,o]),e.style.width=`${100*o/n}%`,e.style.height=`${100*u/r}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,r)=>{const o=r.detail[e],u=o[0],h=o.slice(1);r.target.style[n]=hN[`${u}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[n]:hN[`${u}_rgb`](h)})};return Dt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const r of Object.keys(e.detail)){const o=t[r]||n[r];o==null||o(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[r,o]of Object.entries(e)){const u=n[r];if(u){const h={detail:{[r]:o},target:t};u(h),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,r,o]=this.data.rect.map(w=>Math.fround(w));if(t.length===8){const[w,x,D,O]=t.subarray(2,6);if(r===w&&o===x&&e===D&&n===O)return}const{style:u}=this.container;let h;if(c(this,zd)){const{borderColor:w,borderWidth:x}=u;u.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const f=r-e,p=o-n,{svgFactory:m}=this,y=m.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const b=m.createElement("defs");y.append(b);const A=m.createElement("clipPath"),S=`clippath_${this.data.id}`;A.setAttribute("id",S),A.setAttribute("clipPathUnits","objectBoundingBox"),b.append(A);for(let w=2,x=t.length;w<x;w+=8){const D=t[w],O=t[w+1],M=t[w+2],N=t[w+3],L=m.createElement("rect"),I=(M-e)/f,k=(o-O)/p,z=(D-M)/f,W=(O-N)/p;L.setAttribute("x",I),L.setAttribute("y",k),L.setAttribute("width",z),L.setAttribute("height",W),A.append(L),h==null||h.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${k}" width="${z}" height="${W}"/>`)}c(this,zd)&&(h.push("</g></svg>')"),u.backgroundImage=h.join("")),this.container.append(y),this.container.style.clipPath=`url(#${S})`}_createPopup(t=null){const{data:e}=this;let n,r;t?(n={str:t.text},r=t.date):(n=e.contentsObj,r=e.modificationDate),E(this,Bs,new d_({data:{color:e.color,titleObj:e.titleObj,modificationDate:r,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(c(this,Bs)||this.popup||this.data.popupRef)}get extraPopupElement(){return c(this,Bs)}render(){ee("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:o,id:u,exportValues:h}of r){if(o===-1||u===e)continue;const f=typeof h=="string"?h:null,p=document.querySelector(`[data-element-id="${u}"]`);if(p&&!Ou.has(p)){Ct(`_getElementsByName - element not allowed: ${u}`);continue}n.push({id:u,exportValue:f,domElement:p})}return n}for(const r of document.getElementsByName(t)){const{exportValue:o}=r,u=r.getAttribute("data-element-id");u!==e&&Ou.has(r)&&n.push({id:u,exportValue:o,domElement:r})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};nu=new WeakMap,zd=new WeakMap,Bs=new WeakMap,Dg=new WeakSet,h_=function(t){const{container:{style:e},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:u,pageX:h,pageY:f}}}}=this;n==null||n.splice(0,4,...t),e.left=`${100*(t[0]-h)/o}%`,e.top=`${100*(u-t[3]+f)/u}%`,r===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/u}%`):this.setRotation(r)};let Ue=j1;class u5 extends Ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var us,cc,Y2,X2;class P1 extends Ue{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});_(this,us);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let o=!1;return e.url?(n.addLinkAttributes(r,e.url,e.newWindow),o=!0):e.action?(this._bindNamedAction(r,e.action,e.overlaidText),o=!0):e.attachment?(C(this,us,Y2).call(this,r,e.attachment,e.overlaidText,e.attachmentDest),o=!0):e.setOCGState?(C(this,us,X2).call(this,r,e.setOCGState,e.overlaidText),o=!0):e.dest?(this._bindLink(r,e.dest,e.overlaidText),o=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),o=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(r,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&(this.contentElement=r,this.container.append(r)),this.container}_bindLink(e,n,r=""){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&C(this,us,cc).call(this),r&&(e.title=r)}_bindNamedAction(e,n,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),r&&(e.title=r),C(this,us,cc).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(n.actions)){const u=r.get(o);u&&(e[u]=()=>{var h;return(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:o}}),!1})}n.overlaidText&&(e.title=n.overlaidText),e.onclick||(e.onclick=()=>!1),C(this,us,cc).call(this)}_bindResetFormAction(e,n){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),C(this,us,cc).call(this),!this._fieldObjects){Ct('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{var y;r==null||r();const{fields:o,refs:u,include:h}=n,f=[];if(o.length!==0||u.length!==0){const b=new Set(u);for(const A of o){const S=this._fieldObjects[A]||[];for(const{id:w}of S)b.add(w)}for(const A of Object.values(this._fieldObjects))for(const S of A)b.has(S.id)===h&&f.push(S)}else for(const b of Object.values(this._fieldObjects))f.push(...b);const p=this.annotationStorage,m=[];for(const b of f){const{id:A}=b;switch(m.push(A),b.type){case"text":{const w=b.defaultValue||"";p.setValue(A,{value:w});break}case"checkbox":case"radiobutton":{const w=b.defaultValue===b.exportValues;p.setValue(A,{value:w});break}case"combobox":case"listbox":{const w=b.defaultValue||"";p.setValue(A,{value:w});break}default:continue}const S=document.querySelector(`[data-element-id="${A}"]`);if(S){if(!Ou.has(S)){Ct(`_bindResetFormAction - element not allowed: ${A}`);continue}}else continue;S.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}us=new WeakSet,cc=function(){this.container.setAttribute("data-internal-link","")},Y2=function(e,n,r="",o=null){e.href=this.linkService.getAnchorUrl(""),n.description?e.title=n.description:r&&(e.title=r),e.onclick=()=>{var u;return(u=this.downloadManager)==null||u.openOrDownloadData(n.content,n.filename,o),!1},C(this,us,cc).call(this)},X2=function(e,n,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),r&&(e.title=r),C(this,us,cc).call(this)};class h5 extends Ue{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class Lu extends Ue{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return gn.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,r,o){n.includes("mouse")?t.addEventListener(n,u=>{var h;(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(u),shift:u.shiftKey,modifier:this._getKeyModifier(u)}})}):t.addEventListener(n,u=>{var h;if(n==="blur"){if(!e.focused||!u.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}o&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(u)}}))})}_setEventListeners(t,e,n,r){var o,u,h;for(const[f,p]of n)(p==="Action"||(o=this.data.actions)!=null&&o[p])&&((p==="Focus"||p==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,f,p,r),p==="Focus"&&!((u=this.data.actions)!=null&&u.Blur)?this._setEventListener(t,e,"blur","Blur",null):p==="Blur"&&!((h=this.data.actions)!=null&&h.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":lt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||l5,o=t.style;let u;const h=2,f=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-h),m=Math.round(p/(BS*r))||1,y=p/m;u=Math.min(r,f(y/BS))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-h);u=Math.min(r,f(p/BS))}o.fontSize=`calc(${u}px * var(--total-scale-factor))`,o.color=lt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class d5 extends Lu{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,r){const o=this.annotationStorage;for(const u of this._getElementsByName(t.name,t.id))u.domElement&&(u.domElement[e]=n),o.setValue(u.id,{[r]:n})}render(){var r,o;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const u=t.getValue(e,{value:this.data.fieldValue});let h=u.value||"";const f=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;f&&h.length>f&&(h=h.slice(0,f));let p=u.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const m={userValue:h,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=p??h,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",p??h),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Ou.add(n),this.contentElement=n,n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:y,datetimeType:b,timeStep:A}=this.data,S=!!b&&this.enableScripting;y&&(n.title=y),this._setRequired(n,this.data.required),f&&(n.maxLength=f),n.addEventListener("input",x=>{t.setValue(e,{value:x.target.value}),this.setPropertyOnSiblings(n,"value",x.target.value,"value"),m.formattedValue=null}),n.addEventListener("resetform",x=>{const D=this.data.defaultFieldValue??"";n.value=m.userValue=D,m.formattedValue=null});let w=x=>{const{formattedValue:D}=m;D!=null&&(x.target.value=D),x.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",D=>{var M;if(m.focused)return;const{target:O}=D;if(S&&(O.type=b,A&&(O.step=A)),m.userValue){const N=m.userValue;if(S)if(b==="time"){const L=new Date(N),I=[L.getHours(),L.getMinutes(),L.getSeconds()];O.value=I.map(k=>k.toString().padStart(2,"0")).join(":")}else O.value=new Date(N-c5).toISOString().split(b==="date"?"T":".",1)[0];else O.value=N}m.lastCommittedValue=O.value,m.commitKey=1,(M=this.data.actions)!=null&&M.Focus||(m.focused=!0)}),n.addEventListener("updatefromsandbox",D=>{this.showElementAndHideCanvas(D.target);const O={value(M){m.userValue=M.detail.value??"",S||t.setValue(e,{value:m.userValue.toString()}),M.target.value=m.userValue},formattedValue(M){const{formattedValue:N}=M.detail;m.formattedValue=N,N!=null&&M.target!==document.activeElement&&(M.target.value=N);const L={formattedValue:N};S&&(L.value=N),t.setValue(e,L)},selRange(M){M.target.setSelectionRange(...M.detail.selRange)},charLimit:M=>{var k;const{charLimit:N}=M.detail,{target:L}=M;if(N===0){L.removeAttribute("maxLength");return}L.setAttribute("maxLength",N);let I=m.userValue;!I||I.length<=N||(I=I.slice(0,N),L.value=m.userValue=I,t.setValue(e,{value:I}),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:I,willCommit:!0,commitKey:1,selStart:L.selectionStart,selEnd:L.selectionEnd}}))}};this._dispatchEventFromSandbox(O,D)}),n.addEventListener("keydown",D=>{var N;m.commitKey=1;let O=-1;if(D.key==="Escape"?O=0:D.key==="Enter"&&!this.data.multiLine?O=2:D.key==="Tab"&&(m.commitKey=3),O===-1)return;const{value:M}=D.target;m.lastCommittedValue!==M&&(m.lastCommittedValue=M,m.userValue=M,(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:M,willCommit:!0,commitKey:O,selStart:D.target.selectionStart,selEnd:D.target.selectionEnd}}))});const x=w;w=null,n.addEventListener("blur",D=>{var N,L;if(!m.focused||!D.relatedTarget)return;(N=this.data.actions)!=null&&N.Blur||(m.focused=!1);const{target:O}=D;let{value:M}=O;if(S){if(M&&b==="time"){const I=M.split(":").map(k=>parseInt(k,10));M=new Date(2e3,0,1,I[0],I[1],I[2]||0).valueOf(),O.step=""}else M.includes("T")||(M=`${M}T00:00`),M=new Date(M).valueOf();O.type="text"}m.userValue=M,m.lastCommittedValue!==M&&((L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:M,willCommit:!0,commitKey:m.commitKey,selStart:D.target.selectionStart,selEnd:D.target.selectionEnd}})),x(D)}),(o=this.data.actions)!=null&&o.Keystroke&&n.addEventListener("beforeinput",D=>{var W;m.lastCommittedValue=null;const{data:O,target:M}=D,{value:N,selectionStart:L,selectionEnd:I}=M;let k=L,z=I;switch(D.inputType){case"deleteWordBackward":{const it=N.substring(0,L).match(/\w*[^\w]*$/);it&&(k-=it[0].length);break}case"deleteWordForward":{const it=N.substring(L).match(/^[^\w]*\w*/);it&&(z+=it[0].length);break}case"deleteContentBackward":L===I&&(k-=1);break;case"deleteContentForward":L===I&&(z+=1);break}D.preventDefault(),(W=this.linkService.eventBus)==null||W.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:N,change:O||"",willCommit:!1,selStart:k,selEnd:z}})}),this._setEventListeners(n,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],D=>D.target.value)}if(w&&n.addEventListener("blur",w),this.data.comb){const D=(this.data.rect[2]-this.data.rect[0])/f;n.classList.add("comb"),n.style.letterSpacing=`calc(${D}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class f5 extends Lu{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class p5 extends Lu{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Ou.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",u=>{const{name:h,checked:f}=u.target;for(const p of this._getElementsByName(h,n)){const m=f&&p.exportValue===e.exportValue;p.domElement&&(p.domElement.checked=m),t.setValue(p.id,{value:m})}t.setValue(n,{value:f})}),o.addEventListener("resetform",u=>{const h=e.defaultFieldValue||"Off";u.target.checked=h===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",u=>{const h={value(f){f.target.checked=f.detail.value!=="Off",t.setValue(n,{value:f.target.checked})}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class q2 extends Lu{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(n,{value:r})),r)for(const u of this._getElementsByName(e.fieldName,n))t.setValue(u.id,{value:!1});const o=document.createElement("input");if(Ou.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",u=>{const{name:h,checked:f}=u.target;for(const p of this._getElementsByName(h,n))t.setValue(p.id,{value:!1});t.setValue(n,{value:f})}),o.addEventListener("resetform",u=>{const h=e.defaultFieldValue;u.target.checked=h!=null&&h===e.buttonValue}),this.enableScripting&&this.hasJSActions){const u=e.buttonValue;o.addEventListener("updatefromsandbox",h=>{const f={value:p=>{const m=u===p.detail.value;for(const y of this._getElementsByName(p.target.name)){const b=m&&y.id===n;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(f,h)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class m5 extends P1{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class g5 extends Lu{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");Ou.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",m=>{const y=this.data.defaultFieldValue;for(const b of r.options)b.selected=b.value===y});for(const m of this.data.options){const y=document.createElement("option");y.textContent=m.displayValue,y.value=m.exportValue,n.value.includes(m.exportValue)&&(y.setAttribute("selected",!0),o=!1),r.append(y)}let u=null;if(o){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),r.prepend(m),u=()=>{m.remove(),r.removeEventListener("input",u),u=null},r.addEventListener("input",u)}const h=m=>{const y=m?"value":"textContent",{options:b,multiple:A}=r;return A?Array.prototype.filter.call(b,S=>S.selected).map(S=>S[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let f=h(!1);const p=m=>{const y=m.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",m=>{const y={value(b){u==null||u();const A=b.detail.value,S=new Set(Array.isArray(A)?A:[A]);for(const w of r.options)w.selected=S.has(w.value);t.setValue(e,{value:h(!0)}),f=h(!1)},multipleSelection(b){r.multiple=!0},remove(b){const A=r.options,S=b.detail.remove;A[S].selected=!1,r.remove(S),A.length>0&&Array.prototype.findIndex.call(A,x=>x.selected)===-1&&(A[0].selected=!0),t.setValue(e,{value:h(!0),items:p(b)}),f=h(!1)},clear(b){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),f=h(!1)},insert(b){const{index:A,displayValue:S,exportValue:w}=b.detail.insert,x=r.children[A],D=document.createElement("option");D.textContent=S,D.value=w,x?x.before(D):r.append(D),t.setValue(e,{value:h(!0),items:p(b)}),f=h(!1)},items(b){const{items:A}=b.detail;for(;r.length!==0;)r.remove(0);for(const S of A){const{displayValue:w,exportValue:x}=S,D=document.createElement("option");D.textContent=w,D.value=x,r.append(D)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:h(!0),items:p(b)}),f=h(!1)},indices(b){const A=new Set(b.detail.indices);for(const S of b.target.options)S.selected=A.has(S.index);t.setValue(e,{value:h(!0)}),f=h(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,m)}),r.addEventListener("input",m=>{var A;const y=h(!0),b=h(!1);t.setValue(e,{value:y}),m.preventDefault(),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:f,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):r.addEventListener("input",function(m){t.setValue(e,{value:h(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}var Mg,f_;class d_ extends Ue{constructor(e){const{data:n,elements:r,parent:o}=e,u=!!o._commentManager;super(e,{isRenderable:!u&&Ue._hasPopupData(n)});_(this,Mg);if(this.elements=r,u&&Ue._hasPopupData(n)){const h=this.popup=C(this,Mg,f_).call(this);for(const f of r)f.popup=h}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const n=this.popup=C(this,Mg,f_).call(this),r=[];for(const o of this.elements)o.popup=n,o.container.ariaHasPopup="dialog",r.push(o.data.id),o.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(o=>`${Ph}${o}`).join(",")),this.container}}Mg=new WeakSet,f_=function(){return new y5({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Wi,bl,vv,Av,jd,Gd,je,Ba,vl,iu,Yd,Xd,ka,Qi,Yr,Xr,Ge,qr,Al,Rg,Kr,qd,su,El,An,Sl,kt,bb,p_,m_,g_,vb,y_,K2,$2,W2,Q2,Ab,Eb,b_;class y5{constructor({container:t,color:e,elements:n,titleObj:r,modificationDate:o,contentsObj:u,richText:h,parent:f,rect:p,parentRect:m,open:y,commentManager:b=null}){_(this,kt);_(this,Wi,null);_(this,bl,C(this,kt,W2).bind(this));_(this,vv,C(this,kt,b_).bind(this));_(this,Av,C(this,kt,Eb).bind(this));_(this,jd,C(this,kt,Ab).bind(this));_(this,Gd,null);_(this,je,null);_(this,Ba,null);_(this,vl,null);_(this,iu,null);_(this,Yd,null);_(this,Xd,null);_(this,ka,!1);_(this,Qi,null);_(this,Yr,null);_(this,Xr,null);_(this,Ge,null);_(this,qr,null);_(this,Al,null);_(this,Rg,null);_(this,Kr,null);_(this,qd,null);_(this,su,null);_(this,El,!1);_(this,An,null);_(this,Sl,null);E(this,je,t),E(this,qd,r),E(this,Ba,u),E(this,Kr,h),E(this,Yd,f),E(this,Gd,e),E(this,Rg,p),E(this,Xd,m),E(this,iu,n),E(this,Wi,b),E(this,An,n[0]),E(this,vl,$b.toDateObject(o)),this.trigger=n.flatMap(A=>A.getElementsToTriggerPopup()),b||(C(this,kt,bb).call(this),c(this,je).hidden=!0,y&&C(this,kt,Ab).call(this))}renderCommentButton(){if(c(this,Ge)){c(this,Ge).parentNode||c(this,An).container.after(c(this,Ge));return}if(c(this,qr)||C(this,kt,p_).call(this),!c(this,qr))return;const{signal:t}=E(this,Yr,new AbortController),e=c(this,An).hasOwnCommentButton,n=()=>{c(this,Wi).toggleCommentPopup(this,!0,void 0,!e)},r=()=>{c(this,Wi).toggleCommentPopup(this,!1,!0,!e)},o=()=>{c(this,Wi).toggleCommentPopup(this,!1,!1)};if(e){E(this,Ge,c(this,An).container);for(const u of this.trigger)u.ariaHasPopup="dialog",u.ariaControls="commentPopup",u.addEventListener("keydown",c(this,bl),{signal:t}),u.addEventListener("click",n,{signal:t}),u.addEventListener("pointerenter",r,{signal:t}),u.addEventListener("pointerleave",o,{signal:t}),u.classList.add("popupTriggerArea")}else{const u=E(this,Ge,document.createElement("button"));u.className="annotationCommentButton";const h=c(this,An).container;u.style.zIndex=h.style.zIndex+1,u.tabIndex=0,u.ariaHasPopup="dialog",u.ariaControls="commentPopup",u.setAttribute("data-l10n-id","pdfjs-show-comment-button"),C(this,kt,g_).call(this),C(this,kt,m_).call(this),u.addEventListener("keydown",c(this,bl),{signal:t}),u.addEventListener("click",n,{signal:t}),u.addEventListener("pointerenter",r,{signal:t}),u.addEventListener("pointerleave",o,{signal:t}),h.after(u)}}get commentButtonColor(){const{color:t,opacity:e}=c(this,An).commentData;return t?c(this,Yd)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{var t;(t=c(this,Ge))==null||t.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:r,modificationDate:o}=c(this,An).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:r,modificationDate:o}}get elementBeforePopup(){return c(this,Ge)}get comment(){return c(this,Sl)||E(this,Sl,c(this,An).commentText),c(this,Sl)}set comment(t){t!==this.comment&&(c(this,An).commentText=E(this,Sl,t))}focus(){var t;(t=c(this,An).container)==null||t.focus()}get parentBoundingClientRect(){return c(this,An).layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){c(this,Ge)&&(c(this,Ge).classList.toggle("selected",t),c(this,Ge).ariaExpanded=e)}setSelectedCommentButton(t){c(this,Ge).classList.toggle("selected",t)}get commentPopupPosition(){if(c(this,Al))return c(this,Al);const{x:t,y:e,height:n}=c(this,Ge).getBoundingClientRect(),{x:r,y:o,width:u,height:h}=c(this,An).layer.getBoundingClientRect();return[(t-r)/u,(e+n-o)/h]}set commentPopupPosition(t){E(this,Al,t)}hasDefaultPopupPosition(){return c(this,Al)===null}get commentButtonPosition(){return c(this,qr)}get commentButtonWidth(){return c(this,Ge).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=c(this,Al)||this.commentButtonPosition.map(p=>p/100),r=this.parentBoundingClientRect,{x:o,y:u,width:h,height:f}=r;c(this,Wi).showDialog(null,this,o+e*h,u+n*f,{...t,parentDimensions:r})}render(){var n,r;if(c(this,Qi))return;const t=E(this,Qi,document.createElement("div"));if(t.className="popup",c(this,Gd)){const o=t.style.outlineColor=lt.makeHexColor(...c(this,Gd));t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`}const e=document.createElement("span");if(e.className="header",(n=c(this,qd))!=null&&n.str){const o=document.createElement("span");o.className="title",e.append(o),{dir:o.dir,str:o.textContent}=c(this,qd)}if(t.append(e),c(this,vl)){const o=document.createElement("time");o.className="popupDate",o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,vl).valueOf()})),o.dateTime=c(this,vl).toISOString(),e.append(o)}_I({html:c(this,kt,vb)||c(this,Ba).str,dir:(r=c(this,Ba))==null?void 0:r.dir,className:"popupContent"},t),c(this,je).append(t)}updateEdited({rect:t,popup:e,deleted:n}){var r;if(c(this,Wi)){n?(this.remove(),E(this,Sl,null)):e&&(e.deleted?this.remove():(C(this,kt,g_).call(this),E(this,Sl,e.text))),t&&(E(this,qr,null),C(this,kt,p_).call(this),C(this,kt,m_).call(this));return}if(n||e!=null&&e.deleted){this.remove();return}C(this,kt,bb).call(this),c(this,su)||E(this,su,{contentsObj:c(this,Ba),richText:c(this,Kr)}),t&&E(this,Xr,null),e&&e.text&&(E(this,Kr,C(this,kt,$2).call(this,e.text)),E(this,vl,$b.toDateObject(e.date)),E(this,Ba,null)),(r=c(this,Qi))==null||r.remove(),E(this,Qi,null)}resetEdited(){var t;c(this,su)&&({contentsObj:un(this,Ba)._,richText:un(this,Kr)._}=c(this,su),E(this,su,null),(t=c(this,Qi))==null||t.remove(),E(this,Qi,null),E(this,Xr,null))}remove(){var t,e,n;if((t=c(this,Yr))==null||t.abort(),E(this,Yr,null),(e=c(this,Qi))==null||e.remove(),E(this,Qi,null),E(this,El,!1),E(this,ka,!1),(n=c(this,Ge))==null||n.remove(),E(this,Ge,null),this.trigger)for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){E(this,El,this.isVisible),c(this,El)&&(c(this,je).hidden=!0)}maybeShow(){c(this,Wi)||(C(this,kt,bb).call(this),c(this,El)&&(c(this,Qi)||C(this,kt,Eb).call(this),E(this,El,!1),c(this,je).hidden=!1))}get isVisible(){return c(this,Wi)?!1:c(this,je).hidden===!1}}Wi=new WeakMap,bl=new WeakMap,vv=new WeakMap,Av=new WeakMap,jd=new WeakMap,Gd=new WeakMap,je=new WeakMap,Ba=new WeakMap,vl=new WeakMap,iu=new WeakMap,Yd=new WeakMap,Xd=new WeakMap,ka=new WeakMap,Qi=new WeakMap,Yr=new WeakMap,Xr=new WeakMap,Ge=new WeakMap,qr=new WeakMap,Al=new WeakMap,Rg=new WeakMap,Kr=new WeakMap,qd=new WeakMap,su=new WeakMap,El=new WeakMap,An=new WeakMap,Sl=new WeakMap,kt=new WeakSet,bb=function(){var e;if(c(this,Yr))return;E(this,Yr,new AbortController);const{signal:t}=c(this,Yr);for(const n of this.trigger)n.addEventListener("click",c(this,jd),{signal:t}),n.addEventListener("pointerenter",c(this,Av),{signal:t}),n.addEventListener("pointerleave",c(this,vv),{signal:t}),n.classList.add("popupTriggerArea");for(const n of c(this,iu))(e=n.container)==null||e.addEventListener("keydown",c(this,bl),{signal:t})},p_=function(){const t=c(this,iu).find(e=>e.hasCommentButton);t&&E(this,qr,t._normalizePoint(t.commentButtonPosition))},m_=function(){if(c(this,An).extraPopupElement&&!c(this,An).editor)return;c(this,Ge)||this.renderCommentButton();const[t,e]=c(this,qr),{style:n}=c(this,Ge);n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`},g_=function(){c(this,An).extraPopupElement||(c(this,Ge)||this.renderCommentButton(),c(this,Ge).style.backgroundColor=this.commentButtonColor||"")},vb=function(){const t=c(this,Kr),e=c(this,Ba);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&c(this,Kr).html||null},y_=function(){var t,e,n;return((n=(e=(t=c(this,kt,vb))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},K2=function(){var t,e,n;return((n=(e=(t=c(this,kt,vb))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},$2=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:c(this,kt,K2),fontSize:c(this,kt,y_)?`calc(${c(this,kt,y_)}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:r});return n},W2=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&c(this,ka))&&C(this,kt,Ab).call(this)},Q2=function(){if(c(this,Xr)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:r,pageY:o}}}=c(this,Yd);let u=!!c(this,Xd),h=u?c(this,Xd):c(this,Rg);for(const S of c(this,iu))if(!h||lt.intersect(S.data.rect,h)!==null){h=S.data.rect,u=!0;break}const f=lt.normalizeRect([h[0],t[3]-h[1]+t[1],h[2],t[3]-h[3]+t[1]]),m=u?h[2]-h[0]+5:0,y=f[0]+m,b=f[1];E(this,Xr,[100*(y-r)/e,100*(b-o)/n]);const{style:A}=c(this,je);A.left=`${c(this,Xr)[0]}%`,A.top=`${c(this,Xr)[1]}%`},Ab=function(){if(c(this,Wi)){c(this,Wi).toggleCommentPopup(this,!1);return}E(this,ka,!c(this,ka)),c(this,ka)?(C(this,kt,Eb).call(this),c(this,je).addEventListener("click",c(this,jd)),c(this,je).addEventListener("keydown",c(this,bl))):(C(this,kt,b_).call(this),c(this,je).removeEventListener("click",c(this,jd)),c(this,je).removeEventListener("keydown",c(this,bl)))},Eb=function(){c(this,Qi)||this.render(),this.isVisible?c(this,ka)&&c(this,je).classList.add("focused"):(C(this,kt,Q2).call(this),c(this,je).hidden=!1,c(this,je).style.zIndex=parseInt(c(this,je).style.zIndex)+1e3)},b_=function(){c(this,je).classList.remove("focused"),!(c(this,ka)||!this.isVisible)&&(c(this,je).hidden=!0,c(this,je).style.zIndex=parseInt(c(this,je).style.zIndex)-1e3)};class Z2 extends Ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Nt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Og;class b5 extends Ue{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Og,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:r}=this,o=this.svgFactory.create(n,r,!0),u=E(this,Og,this.svgFactory.createElement("svg:line"));return u.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),u.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),u.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),u.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),u.setAttribute("stroke-width",e.borderStyle.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Og)}addHighlightArea(){this.container.classList.add("highlightArea")}}Og=new WeakMap;var Ng;class v5 extends Ue{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Ng,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:r}=this,o=this.svgFactory.create(n,r,!0),u=e.borderStyle.width,h=E(this,Ng,this.svgFactory.createElement("svg:rect"));return h.setAttribute("x",u/2),h.setAttribute("y",u/2),h.setAttribute("width",n-u),h.setAttribute("height",r-u),h.setAttribute("stroke-width",u||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Ng)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ng=new WeakMap;var Lg;class A5 extends Ue{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Lg,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:r}=this,o=this.svgFactory.create(n,r,!0),u=e.borderStyle.width,h=E(this,Lg,this.svgFactory.createElement("svg:ellipse"));return h.setAttribute("cx",n/2),h.setAttribute("cy",r/2),h.setAttribute("rx",n/2-u/2),h.setAttribute("ry",r/2-u/2),h.setAttribute("stroke-width",u||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Lg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lg=new WeakMap;var Ig;class J2 extends Ue{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Ig,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:r,popupRef:o},width:u,height:h}=this;if(!n)return this.container;const f=this.svgFactory.create(u,h,!0);let p=[];for(let y=0,b=n.length;y<b;y+=2){const A=n[y]-e[0],S=e[3]-n[y+1];p.push(`${A},${S}`)}p=p.join(" ");const m=E(this,Ig,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",p),m.setAttribute("stroke-width",r.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),f.append(m),this.container.append(f),!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Ig)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ig=new WeakMap;class E5 extends J2{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class S5 extends Ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var Pg,au,Bg,v_;class B1 extends Ue{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Bg);_(this,Pg,null);_(this,au,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Nt.HIGHLIGHT:Nt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:r,borderStyle:o,popupRef:u}}=this,{transform:h,width:f,height:p}=C(this,Bg,v_).call(this,n,e),m=this.svgFactory.create(f,p,!0),y=E(this,Pg,this.svgFactory.createElement("svg:g"));m.append(y),y.setAttribute("stroke-width",o.width||1),y.setAttribute("stroke-linecap","round"),y.setAttribute("stroke-linejoin","round"),y.setAttribute("stroke-miterlimit",10),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),y.setAttribute("transform",h);for(let b=0,A=r.length;b<A;b++){const S=this.svgFactory.createElement(this.svgElementName);c(this,au).push(S),S.setAttribute("points",r[b].join(",")),y.append(S)}return!u&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(m),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:r,rect:o}=e,u=c(this,Pg);if(n>=0&&u.setAttribute("stroke-width",n||1),r)for(let h=0,f=c(this,au).length;h<f;h++)c(this,au)[h].setAttribute("points",r[h].join(","));if(o){const{transform:h,width:f,height:p}=C(this,Bg,v_).call(this,this.data.rotation,o);u.parentElement.setAttribute("viewBox",`0 0 ${f} ${p}`),u.setAttribute("transform",h)}}getElementsToTriggerPopup(){return c(this,au)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pg=new WeakMap,au=new WeakMap,Bg=new WeakSet,v_=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class tP extends Ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Nt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class T5 extends Ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class _5 extends Ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class w5 extends Ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class eP extends Ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Nt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var kg,Ug,A_;class x5 extends Ue{constructor(e){var r;super(e,{isRenderable:!0});_(this,Ug);_(this,kg,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",C(this,Ug,A_).bind(this)),E(this,kg,r);const{isMac:o}=gn.platform;return e.addEventListener("keydown",u=>{u.key==="Enter"&&(o?u.metaKey:u.ctrlKey)&&C(this,Ug,A_).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return c(this,kg)}addHighlightArea(){this.container.classList.add("highlightArea")}}kg=new WeakMap,Ug=new WeakSet,A_=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var ru,ou,Kd,Tl,Fg,lu,Zi,Hg,so,Sb,S_;const G1=class G1{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:r,page:o,viewport:u,structTreeLayer:h,commentManager:f,linkService:p,annotationStorage:m}){_(this,so);_(this,ru,null);_(this,ou,null);_(this,Kd,null);_(this,Tl,new Map);_(this,Fg,null);_(this,lu,null);_(this,Zi,[]);_(this,Hg,!1);this.div=t,E(this,ru,e),E(this,ou,n),E(this,Fg,h||null),E(this,lu,p||null),E(this,Kd,m||new N1),this.page=o,this.viewport=u,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=f||null}hasEditableAnnotations(){return c(this,Tl).size>0}async render(t){var h;const{annotations:e}=t,n=this.div;Mu(n,this.viewport);const r=new Map,o=[],u={data:null,layer:n,linkService:c(this,lu),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new iv,annotationStorage:c(this,Kd),enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const f of e){if(f.noHTML)continue;const p=f.annotationType===an.POPUP;if(p){const b=r.get(f.id);if(!b)continue;if(!this._commentManager){o.push(f);continue}u.elements=b}else if(f.rect[2]===f.rect[0]||f.rect[3]===f.rect[1])continue;u.data=f;const m=jS.create(u);if(!m.isRenderable)continue;if(!p&&(c(this,Zi).push(m),f.popupRef)){const b=r.get(f.popupRef);b?b.push(m):r.set(f.popupRef,[m])}const y=m.render();f.hidden&&(y.style.visibility="hidden"),m._isEditable&&(c(this,Tl).set(m.data.id,m),(h=this._annotationEditorUIManager)==null||h.renderAnnotationElement(m))}await C(this,so,Sb).call(this);for(const f of o){const p=u.elements=r.get(f.id);u.data=f;const m=jS.create(u);if(!m.isRenderable)continue;const y=m.render();m.contentElement.id=`${Ph}${f.id}`,f.hidden&&(y.style.visibility="hidden"),p.at(-1).container.after(y)}C(this,so,S_).call(this)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:c(this,lu),svgFactory:new iv,parent:this};for(const n of t){n.borderStyle||(n.borderStyle=G1._defaultBorderStyle),e.data=n;const r=jS.create(e);r.isRenderable&&(r.render(),r.contentElement.id=`${Ph}${n.id}`,c(this,Zi).push(r))}await C(this,so,Sb).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Mu(e,{rotation:t.rotation}),C(this,so,S_).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(c(this,Tl).values())}getEditableAnnotation(t){return c(this,Tl).get(t)}addFakeAnnotation(t){const{div:e}=this,{id:n,rotation:r}=t,o=new u5({data:{id:n,rect:t.getPDFRect(),rotation:r},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:c(this,lu),annotationStorage:c(this,Kd)});return o.render(),o.contentElement.id=`${Ph}${n}`,o.createOrUpdatePopup(),c(this,Zi).push(o),o}removeAnnotation(t){var r;const e=c(this,Zi).findIndex(o=>o.data.id===t);if(e<0)return;const[n]=c(this,Zi).splice(e,1);(r=c(this,ru))==null||r.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);C(this,so,Sb).call(this)}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return Dt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Eh.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};ru=new WeakMap,ou=new WeakMap,Kd=new WeakMap,Tl=new WeakMap,Fg=new WeakMap,lu=new WeakMap,Zi=new WeakMap,Hg=new WeakMap,so=new WeakSet,Sb=async function(){var n,r,o;if(c(this,Zi).length===0)return;this.div.replaceChildren();const t=[];if(!c(this,Hg)){E(this,Hg,!0);for(const{contentElement:u,data:{id:h}}of c(this,Zi)){const f=u.id=`${Ph}${h}`;t.push((n=c(this,Fg))==null?void 0:n.getAriaAttributes(f).then(p=>{if(p)for(const[m,y]of p)u.setAttribute(m,y)}))}}c(this,Zi).sort(({data:{rect:[u,h,f,p]}},{data:{rect:[m,y,b,A]}})=>{if(u===f&&h===p)return 1;if(m===b&&y===A)return-1;const S=p,w=h,x=(h+p)/2,D=A,O=y,M=(y+A)/2;if(x>=D&&M<=w)return-1;if(M>=S&&x<=O)return 1;const N=(u+f)/2,L=(m+b)/2;return N-L});const e=document.createDocumentFragment();for(const u of c(this,Zi))e.append(u.container),this._commentManager?(o=((r=u.extraPopupElement)==null?void 0:r.popup)||u.popup)==null||o.renderCommentButton():u.extraPopupElement&&e.append(u.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),c(this,ru))for(const u of c(this,Zi))c(this,ru).addPointerInTextLayer(u.contentElement,!1)},S_=function(){var e;if(!c(this,ou))return;const t=this.div;for(const[n,r]of c(this,ou)){const o=t.querySelector(`[data-annotation-id="${n}"]`);if(!o)continue;r.className="annotationContent";const{firstChild:u}=o;u?u.nodeName==="CANVAS"?u.replaceWith(r):u.classList.contains("annotationContent")?u.after(r):u.before(r):o.append(r);const h=c(this,Tl).get(n);h&&(h._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(n,o.id,r),h._hasNoCanvas=!1):h.canvas=r)}c(this,ou).clear()};let E_=G1;const $0=/\r\n?|\n/g;var Ji,Vg,cu,ts,ln,nP,iP,sP,Tb,ao,_b,wb,aP,__,rP;const De=class De extends _e{constructor(e){super({...e,name:"freeTextEditor"});_(this,ln);_(this,Ji,"");_(this,Vg,`${this.id}-editor`);_(this,cu,null);_(this,ts);$(this,"_colorPicker",null);this.color=e.color||De._defaultColor||_e._defaultLineColor,E(this,ts,e.fontSize||De._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const e=De.prototype,n=u=>u.isEmpty(),r=Ru.TRANSLATE_SMALL,o=Ru.TRANSLATE_BIG;return Dt(this,"_keyboardManager",new dy([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,o],checker:n}]]))}static initialize(e,n){_e.initialize(e,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Xt.FREETEXT_SIZE:De._defaultFontSize=n;break;case Xt.FREETEXT_COLOR:De._defaultColor=n;break}}updateParams(e,n){switch(e){case Xt.FREETEXT_SIZE:C(this,ln,nP).call(this,n);break;case Xt.FREETEXT_COLOR:C(this,ln,iP).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Xt.FREETEXT_SIZE,De._defaultFontSize],[Xt.FREETEXT_COLOR,De._defaultColor||_e._defaultLineColor]]}get propertiesToUpdate(){return[[Xt.FREETEXT_SIZE,c(this,ts)],[Xt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new nv(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Xt.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-De._internalPadding*e,-(De._internalPadding+c(this,ts))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),E(this,cu,new AbortController);const e=this._uiManager.combinedSignal(c(this,cu));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,Vg)),this._isDraggable=!0,(e=c(this,cu))==null||e.abort(),E(this,cu,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=c(this,Ji),n=E(this,Ji,C(this,ln,sP).call(this).trimEnd());if(e===n)return;const r=o=>{if(E(this,Ji,o),!o){this.remove();return}C(this,ln,wb).call(this),this._uiManager.rebuild(this),C(this,ln,Tb).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(e)},mustExec:!1}),C(this,ln,Tb).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){De._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,Vg)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${c(this,ts)}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[o,u]=this.parentDimensions;if(this.annotationElementId){const{position:h}=this._initialData;let[f,p]=this.getInitialTranslation();[f,p]=this.pageTranslationToScreen(f,p);const[m,y]=this.pageDimensions,[b,A]=this.pageTranslation;let S,w;switch(this.rotation){case 0:S=e+(h[0]-b)/m,w=n+this.height-(h[1]-A)/y;break;case 90:S=e+(h[0]-b)/m,w=n-(h[1]-A)/y,[f,p]=[p,-f];break;case 180:S=e-this.width+(h[0]-b)/m,w=n-(h[1]-A)/y,[f,p]=[-f,-p];break;case 270:S=e+(h[0]-b-this.height*y)/m,w=n+(h[1]-A-this.width*m)/y,[f,p]=[-p,f];break}this.setAt(S*o,w*u,f,p)}else this._moveAfterPaste(e,n);C(this,ln,wb).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var S,w,x;const n=e.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const o=C(S=De,ao,__).call(S,n.getData("text")||"").replaceAll($0,`
`);if(!o)return;const u=window.getSelection();if(!u.rangeCount)return;this.editorDiv.normalize(),u.deleteFromDocument();const h=u.getRangeAt(0);if(!o.includes(`
`)){h.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),u.collapseToStart();return}const{startContainer:f,startOffset:p}=h,m=[],y=[];if(f.nodeType===Node.TEXT_NODE){const D=f.parentElement;if(y.push(f.nodeValue.slice(p).replaceAll($0,"")),D!==this.editorDiv){let O=m;for(const M of this.editorDiv.childNodes){if(M===D){O=y;continue}O.push(C(w=De,ao,_b).call(w,M))}}m.push(f.nodeValue.slice(0,p).replaceAll($0,""))}else if(f===this.editorDiv){let D=m,O=0;for(const M of this.editorDiv.childNodes)O++===p&&(D=y),D.push(C(x=De,ao,_b).call(x,M))}E(this,Ji,`${m.join(`
`)}${o}${y.join(`
`)}`),C(this,ln,wb).call(this);const b=new Range;let A=Math.sumPrecise(m.map(D=>D.length));for(const{firstChild:D}of this.editorDiv.childNodes)if(D.nodeType===Node.TEXT_NODE){const O=D.nodeValue.length;if(A<=O){b.setStart(D,A),b.setEnd(D,A);break}A-=O}u.removeAllRanges(),u.addRange(b)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=De._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,n,r){var h;let o=null;if(e instanceof Z2){const{data:{defaultAppearanceData:{fontSize:f,fontColor:p},rect:m,rotation:y,id:b,popupRef:A,richText:S,contentsObj:w,creationDate:x,modificationDate:D},textContent:O,textPosition:M,parent:{page:{pageNumber:N}}}=e;if(!O||O.length===0)return null;o=e={annotationType:Nt.FREETEXT,color:Array.from(p),fontSize:f,value:O.join(`
`),position:M,pageIndex:N-1,rect:m.slice(0),rotation:y,annotationElementId:b,id:b,deleted:!1,popupRef:A,comment:(w==null?void 0:w.str)||null,richText:S,creationDate:x,modificationDate:D}}const u=await super.deserialize(e,n,r);return E(u,ts,e.fontSize),u.color=lt.makeHexColor(...e.color),E(u,Ji,C(h=De,ao,__).call(h,e.value)),u._initialData=o,e.comment&&u.setCommentData(e),u}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=_e._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(e),{color:n,fontSize:c(this,ts),value:C(this,ln,aP).call(this)});return this.addComment(r),e?(r.isCopy=!0,r):this.annotationElementId&&!C(this,ln,rP).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(!n)return null;const{style:r}=n;r.fontSize=`calc(${c(this,ts)}px * var(--total-scale-factor))`,r.color=this.color,n.replaceChildren();for(const o of c(this,Ji).split(`
`)){const u=document.createElement("div");u.append(o?document.createTextNode(o):document.createElement("br")),n.append(u)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:c(this,Ji)}}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Ji=new WeakMap,Vg=new WeakMap,cu=new WeakMap,ts=new WeakMap,ln=new WeakSet,nP=function(e){const n=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--total-scale-factor))`,this.translate(0,-(o-c(this,ts))*this.parentScale),E(this,ts,o),C(this,ln,Tb).call(this)},r=c(this,ts);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Xt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},iP=function(e){const n=o=>{this.color=o,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Xt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},sP=function(){var r;const e=[];this.editorDiv.normalize();let n=null;for(const o of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(e.push(C(r=De,ao,_b).call(r,o)),n=o);return e.join(`
`)},Tb=function(){const[e,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:o,div:u}=this,h=u.style.display,f=u.classList.contains("hidden");u.classList.remove("hidden"),u.style.display="hidden",o.div.append(this.div),r=u.getBoundingClientRect(),u.remove(),u.style.display=h,u.classList.toggle("hidden",f)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/n):(this.width=r.height/e,this.height=r.width/n),this.fixAndSetPosition()},ao=new WeakSet,_b=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll($0,"")},wb=function(){if(this.editorDiv.replaceChildren(),!!c(this,Ji))for(const e of c(this,Ji).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},aP=function(){return c(this,Ji).replaceAll(""," ")},__=function(e){return e.replaceAll(" ","")},rP=function(e){const{value:n,fontSize:r,color:o,pageIndex:u}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==n||e.fontSize!==r||e.color.some((h,f)=>h!==o[f])||e.pageIndex!==u},_(De,ao),$(De,"_freeTextDefaultContent",""),$(De,"_internalPadding",0),$(De,"_defaultColor",null),$(De,"_defaultFontSize",10),$(De,"_type","freetext"),$(De,"_editorType",Nt.FREETEXT);let T_=De;class ht{toSVGPath(){ee("Abstract method `toSVGPath` must be implemented.")}get box(){ee("Abstract getter `box` must be implemented.")}serialize(t,e){ee("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,r,o,u){u||(u=new Float32Array(t.length));for(let h=0,f=t.length;h<f;h+=2)u[h]=e+t[h]*r,u[h+1]=n+t[h+1]*o;return u}static _rescaleAndSwap(t,e,n,r,o,u){u||(u=new Float32Array(t.length));for(let h=0,f=t.length;h<f;h+=2)u[h]=e+t[h+1]*r,u[h+1]=n+t[h]*o;return u}static _translate(t,e,n,r){r||(r=new Float32Array(t.length));for(let o=0,u=t.length;o<u;o+=2)r[o]=e+t[o],r[o+1]=n+t[o+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,r,o){switch(o){case 90:return[1-e/n,t/r];case 180:return[1-t/n,1-e/r];case 270:return[e/n,1-t/r];default:return[t/n,e/r]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,r,o,u){return[(t+5*n)/6,(e+5*r)/6,(5*n+o)/6,(5*r+u)/6,(n+o)/2,(r+u)/2]}}$(ht,"PRECISION",1e-4);var es,aa,$d,Wd,Ua,Ut,uu,hu,zg,jg,Qd,Zd,_l,Gg,Ev,Sv,mn,Gp,oP,lP,cP,uP,hP,dP;const vr=class vr{constructor({x:t,y:e},n,r,o,u,h=0){_(this,mn);_(this,es);_(this,aa,[]);_(this,$d);_(this,Wd);_(this,Ua,[]);_(this,Ut,new Float32Array(18));_(this,uu);_(this,hu);_(this,zg);_(this,jg);_(this,Qd);_(this,Zd);_(this,_l,[]);E(this,es,n),E(this,Zd,o*r),E(this,Wd,u),c(this,Ut).set([NaN,NaN,NaN,NaN,t,e],6),E(this,$d,h),E(this,jg,c(vr,Gg)*r),E(this,zg,c(vr,Sv)*r),E(this,Qd,r),c(this,_l).push(t,e)}isEmpty(){return isNaN(c(this,Ut)[8])}add({x:t,y:e}){var W;E(this,uu,t),E(this,hu,e);const[n,r,o,u]=c(this,es);let[h,f,p,m]=c(this,Ut).subarray(8,12);const y=t-p,b=e-m,A=Math.hypot(y,b);if(A<c(this,zg))return!1;const S=A-c(this,jg),w=S/A,x=w*y,D=w*b;let O=h,M=f;h=p,f=m,p+=x,m+=D,(W=c(this,_l))==null||W.push(t,e);const N=-D/S,L=x/S,I=N*c(this,Zd),k=L*c(this,Zd);return c(this,Ut).set(c(this,Ut).subarray(2,8),0),c(this,Ut).set([p+I,m+k],4),c(this,Ut).set(c(this,Ut).subarray(14,18),12),c(this,Ut).set([p-I,m-k],16),isNaN(c(this,Ut)[6])?(c(this,Ua).length===0&&(c(this,Ut).set([h+I,f+k],2),c(this,Ua).push(NaN,NaN,NaN,NaN,(h+I-n)/o,(f+k-r)/u),c(this,Ut).set([h-I,f-k],14),c(this,aa).push(NaN,NaN,NaN,NaN,(h-I-n)/o,(f-k-r)/u)),c(this,Ut).set([O,M,h,f,p,m],6),!this.isEmpty()):(c(this,Ut).set([O,M,h,f,p,m],6),Math.abs(Math.atan2(M-f,O-h)-Math.atan2(D,x))<Math.PI/2?([h,f,p,m]=c(this,Ut).subarray(2,6),c(this,Ua).push(NaN,NaN,NaN,NaN,((h+p)/2-n)/o,((f+m)/2-r)/u),[h,f,O,M]=c(this,Ut).subarray(14,18),c(this,aa).push(NaN,NaN,NaN,NaN,((O+h)/2-n)/o,((M+f)/2-r)/u),!0):([O,M,h,f,p,m]=c(this,Ut).subarray(0,6),c(this,Ua).push(((O+5*h)/6-n)/o,((M+5*f)/6-r)/u,((5*h+p)/6-n)/o,((5*f+m)/6-r)/u,((h+p)/2-n)/o,((f+m)/2-r)/u),[p,m,h,f,O,M]=c(this,Ut).subarray(12,18),c(this,aa).push(((O+5*h)/6-n)/o,((M+5*f)/6-r)/u,((5*h+p)/6-n)/o,((5*f+m)/6-r)/u,((h+p)/2-n)/o,((f+m)/2-r)/u),!0))}toSVGPath(){if(this.isEmpty())return"";const t=c(this,Ua),e=c(this,aa);if(isNaN(c(this,Ut)[6])&&!this.isEmpty())return C(this,mn,oP).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);C(this,mn,cP).call(this,n);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return C(this,mn,lP).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,r,o,u){return new fP(t,e,n,r,o,u)}getOutlines(){var y;const t=c(this,Ua),e=c(this,aa),n=c(this,Ut),[r,o,u,h]=c(this,es),f=new Float32Array((((y=c(this,_l))==null?void 0:y.length)??0)+2);for(let b=0,A=f.length-2;b<A;b+=2)f[b]=(c(this,_l)[b]-r)/u,f[b+1]=(c(this,_l)[b+1]-o)/h;if(f[f.length-2]=(c(this,uu)-r)/u,f[f.length-1]=(c(this,hu)-o)/h,isNaN(n[6])&&!this.isEmpty())return C(this,mn,uP).call(this,f);const p=new Float32Array(c(this,Ua).length+24+c(this,aa).length);let m=t.length;for(let b=0;b<m;b+=2){if(isNaN(t[b])){p[b]=p[b+1]=NaN;continue}p[b]=t[b],p[b+1]=t[b+1]}m=C(this,mn,dP).call(this,p,m);for(let b=e.length-6;b>=6;b-=6)for(let A=0;A<6;A+=2){if(isNaN(e[b+A])){p[m]=p[m+1]=NaN,m+=2;continue}p[m]=e[b+A],p[m+1]=e[b+A+1],m+=2}return C(this,mn,hP).call(this,p,m),this.newFreeDrawOutline(p,f,c(this,es),c(this,Qd),c(this,$d),c(this,Wd))}};es=new WeakMap,aa=new WeakMap,$d=new WeakMap,Wd=new WeakMap,Ua=new WeakMap,Ut=new WeakMap,uu=new WeakMap,hu=new WeakMap,zg=new WeakMap,jg=new WeakMap,Qd=new WeakMap,Zd=new WeakMap,_l=new WeakMap,Gg=new WeakMap,Ev=new WeakMap,Sv=new WeakMap,mn=new WeakSet,Gp=function(){const t=c(this,Ut).subarray(4,6),e=c(this,Ut).subarray(16,18),[n,r,o,u]=c(this,es);return[(c(this,uu)+(t[0]-e[0])/2-n)/o,(c(this,hu)+(t[1]-e[1])/2-r)/u,(c(this,uu)+(e[0]-t[0])/2-n)/o,(c(this,hu)+(e[1]-t[1])/2-r)/u]},oP=function(){const[t,e,n,r]=c(this,es),[o,u,h,f]=C(this,mn,Gp).call(this);return`M${(c(this,Ut)[2]-t)/n} ${(c(this,Ut)[3]-e)/r} L${(c(this,Ut)[4]-t)/n} ${(c(this,Ut)[5]-e)/r} L${o} ${u} L${h} ${f} L${(c(this,Ut)[16]-t)/n} ${(c(this,Ut)[17]-e)/r} L${(c(this,Ut)[14]-t)/n} ${(c(this,Ut)[15]-e)/r} Z`},lP=function(t){const e=c(this,aa);t.push(`L${e[4]} ${e[5]} Z`)},cP=function(t){const[e,n,r,o]=c(this,es),u=c(this,Ut).subarray(4,6),h=c(this,Ut).subarray(16,18),[f,p,m,y]=C(this,mn,Gp).call(this);t.push(`L${(u[0]-e)/r} ${(u[1]-n)/o} L${f} ${p} L${m} ${y} L${(h[0]-e)/r} ${(h[1]-n)/o}`)},uP=function(t){const e=c(this,Ut),[n,r,o,u]=c(this,es),[h,f,p,m]=C(this,mn,Gp).call(this),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(e[2]-n)/o,(e[3]-r)/u,NaN,NaN,NaN,NaN,(e[4]-n)/o,(e[5]-r)/u,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(e[16]-n)/o,(e[17]-r)/u,NaN,NaN,NaN,NaN,(e[14]-n)/o,(e[15]-r)/u],0),this.newFreeDrawOutline(y,t,c(this,es),c(this,Qd),c(this,$d),c(this,Wd))},hP=function(t,e){const n=c(this,aa);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},dP=function(t,e){const n=c(this,Ut).subarray(4,6),r=c(this,Ut).subarray(16,18),[o,u,h,f]=c(this,es),[p,m,y,b]=C(this,mn,Gp).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-o)/h,(n[1]-u)/f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(r[0]-o)/h,(r[1]-u)/f],e),e+=24},_(vr,Gg,8),_(vr,Ev,2),_(vr,Sv,c(vr,Gg)+c(vr,Ev));let sv=vr;var Jd,du,$r,Yg,ns,Xg,Ze,Tv,pP;class fP extends ht{constructor(e,n,r,o,u,h){super();_(this,Tv);_(this,Jd);_(this,du,new Float32Array(4));_(this,$r);_(this,Yg);_(this,ns);_(this,Xg);_(this,Ze);E(this,Ze,e),E(this,ns,n),E(this,Jd,r),E(this,Xg,o),E(this,$r,u),E(this,Yg,h),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],C(this,Tv,pP).call(this,h);const[f,p,m,y]=c(this,du);for(let b=0,A=e.length;b<A;b+=2)e[b]=(e[b]-f)/m,e[b+1]=(e[b+1]-p)/y;for(let b=0,A=n.length;b<A;b+=2)n[b]=(n[b]-f)/m,n[b+1]=(n[b+1]-p)/y}toSVGPath(){const e=[`M${c(this,Ze)[4]} ${c(this,Ze)[5]}`];for(let n=6,r=c(this,Ze).length;n<r;n+=6){if(isNaN(c(this,Ze)[n])){e.push(`L${c(this,Ze)[n+4]} ${c(this,Ze)[n+5]}`);continue}e.push(`C${c(this,Ze)[n]} ${c(this,Ze)[n+1]} ${c(this,Ze)[n+2]} ${c(this,Ze)[n+3]} ${c(this,Ze)[n+4]} ${c(this,Ze)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,r,o],u){const h=r-e,f=o-n;let p,m;switch(u){case 0:p=ht._rescale(c(this,Ze),e,o,h,-f),m=ht._rescale(c(this,ns),e,o,h,-f);break;case 90:p=ht._rescaleAndSwap(c(this,Ze),e,n,h,f),m=ht._rescaleAndSwap(c(this,ns),e,n,h,f);break;case 180:p=ht._rescale(c(this,Ze),r,n,-h,f),m=ht._rescale(c(this,ns),r,n,-h,f);break;case 270:p=ht._rescaleAndSwap(c(this,Ze),r,o,-h,-f),m=ht._rescaleAndSwap(c(this,ns),r,o,-h,-f);break}return{outline:Array.from(p),points:[Array.from(m)]}}get box(){return c(this,du)}newOutliner(e,n,r,o,u,h=0){return new sv(e,n,r,o,u,h)}getNewOutline(e,n){const[r,o,u,h]=c(this,du),[f,p,m,y]=c(this,Jd),b=u*m,A=h*y,S=r*m+f,w=o*y+p,x=this.newOutliner({x:c(this,ns)[0]*b+S,y:c(this,ns)[1]*A+w},c(this,Jd),c(this,Xg),e,c(this,Yg),n??c(this,$r));for(let D=2;D<c(this,ns).length;D+=2)x.add({x:c(this,ns)[D]*b+S,y:c(this,ns)[D+1]*A+w});return x.getOutlines()}}Jd=new WeakMap,du=new WeakMap,$r=new WeakMap,Yg=new WeakMap,ns=new WeakMap,Xg=new WeakMap,Ze=new WeakMap,Tv=new WeakSet,pP=function(e){const n=c(this,Ze);let r=n[4],o=n[5];const u=[r,o,r,o];let h=r,f=o,p=r,m=o;const y=e?Math.max:Math.min,b=new Float32Array(4);for(let S=6,w=n.length;S<w;S+=6){const x=n[S+4],D=n[S+5];isNaN(n[S])?(lt.pointBoundingBox(x,D,u),f>D?(h=x,f=D):f===D&&(h=y(h,x)),m<D?(p=x,m=D):m===D&&(p=y(p,x))):(b[0]=b[1]=1/0,b[2]=b[3]=-1/0,lt.bezierBoundingBox(r,o,...n.slice(S,S+6),b),lt.rectBoundingBox(b[0],b[1],b[2],b[3],u),f>b[1]?(h=b[0],f=b[1]):f===b[1]&&(h=y(h,b[0])),m<b[3]?(p=b[2],m=b[3]):m===b[3]&&(p=y(p,b[2]))),r=x,o=D}const A=c(this,du);A[0]=u[0]-c(this,$r),A[1]=u[1]-c(this,$r),A[2]=u[2]-u[0]+2*c(this,$r),A[3]=u[3]-u[1]+2*c(this,$r),this.firstPoint=[h,f],this.lastPoint=[p,m]};var qg,Kg,$g,wl,ra,ci,mP,xb,gP,yP,x_;class w_{constructor(t,e=0,n=0,r=!0){_(this,ci);_(this,qg);_(this,Kg);_(this,$g);_(this,wl,[]);_(this,ra,[]);const o=[1/0,1/0,-1/0,-1/0],u=10**-4;for(const{x:w,y:x,width:D,height:O}of t){const M=Math.floor((w-e)/u)*u,N=Math.ceil((w+D+e)/u)*u,L=Math.floor((x-e)/u)*u,I=Math.ceil((x+O+e)/u)*u,k=[M,L,I,!0],z=[N,L,I,!1];c(this,wl).push(k,z),lt.rectBoundingBox(M,L,N,I,o)}const h=o[2]-o[0]+2*n,f=o[3]-o[1]+2*n,p=o[0]-n,m=o[1]-n;let y=r?-1/0:1/0,b=1/0;const A=c(this,wl).at(r?-1:-2),S=[A[0],A[2]];for(const w of c(this,wl)){const[x,D,O,M]=w;!M&&r?D<b?(b=D,y=x):D===b&&(y=Math.max(y,x)):M&&!r&&(D<b?(b=D,y=x):D===b&&(y=Math.min(y,x))),w[0]=(x-p)/h,w[1]=(D-m)/f,w[2]=(O-m)/f}E(this,qg,new Float32Array([p,m,h,f])),E(this,Kg,[y,b]),E(this,$g,S)}getOutlines(){c(this,wl).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of c(this,wl))e[3]?(t.push(...C(this,ci,x_).call(this,e)),C(this,ci,gP).call(this,e)):(C(this,ci,yP).call(this,e),t.push(...C(this,ci,x_).call(this,e)));return C(this,ci,mP).call(this,t)}}qg=new WeakMap,Kg=new WeakMap,$g=new WeakMap,wl=new WeakMap,ra=new WeakMap,ci=new WeakSet,mP=function(t){const e=[],n=new Set;for(const u of t){const[h,f,p]=u;e.push([h,f,u],[h,p,u])}e.sort((u,h)=>u[1]-h[1]||u[0]-h[0]);for(let u=0,h=e.length;u<h;u+=2){const f=e[u][2],p=e[u+1][2];f.push(p),p.push(f),n.add(f),n.add(p)}const r=[];let o;for(;n.size>0;){const u=n.values().next().value;let[h,f,p,m,y]=u;n.delete(u);let b=h,A=f;for(o=[h,p],r.push(o);;){let S;if(n.has(m))S=m;else if(n.has(y))S=y;else break;n.delete(S),[h,f,p,m,y]=S,b!==h&&(o.push(b,A,h,A===f?f:p),b=h),A=A===f?p:f}o.push(b,A)}return new C5(r,c(this,qg),c(this,Kg),c(this,$g))},xb=function(t){const e=c(this,ra);let n=0,r=e.length-1;for(;n<=r;){const o=n+r>>1,u=e[o][0];if(u===t)return o;u<t?n=o+1:r=o-1}return r+1},gP=function([,t,e]){const n=C(this,ci,xb).call(this,t);c(this,ra).splice(n,0,[t,e])},yP=function([,t,e]){const n=C(this,ci,xb).call(this,t);for(let r=n;r<c(this,ra).length;r++){const[o,u]=c(this,ra)[r];if(o!==t)break;if(o===t&&u===e){c(this,ra).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[o,u]=c(this,ra)[r];if(o!==t)break;if(o===t&&u===e){c(this,ra).splice(r,1);return}}},x_=function(t){const[e,n,r]=t,o=[[e,n,r]],u=C(this,ci,xb).call(this,r);for(let h=0;h<u;h++){const[f,p]=c(this,ra)[h];for(let m=0,y=o.length;m<y;m++){const[,b,A]=o[m];if(!(p<=b||A<=f)){if(b>=f){if(A>p)o[m][1]=p;else{if(y===1)return[];o.splice(m,1),m--,y--}continue}o[m][2]=f,A>p&&o.push([e,p,A])}}}return o};var Wg,tf;class C5 extends ht{constructor(e,n,r,o){super();_(this,Wg);_(this,tf);E(this,tf,e),E(this,Wg,n),this.firstPoint=r,this.lastPoint=o}toSVGPath(){const e=[];for(const n of c(this,tf)){let[r,o]=n;e.push(`M${r} ${o}`);for(let u=2;u<n.length;u+=2){const h=n[u],f=n[u+1];h===r?(e.push(`V${f}`),o=f):f===o&&(e.push(`H${h}`),r=h)}e.push("Z")}return e.join(" ")}serialize([e,n,r,o],u){const h=[],f=r-e,p=o-n;for(const m of c(this,tf)){const y=new Array(m.length);for(let b=0;b<m.length;b+=2)y[b]=e+m[b]*f,y[b+1]=o-m[b+1]*p;h.push(y)}return h}get box(){return c(this,Wg)}get classNamesForOutlining(){return["highlightOutline"]}}Wg=new WeakMap,tf=new WeakMap;class C_ extends sv{newFreeDrawOutline(t,e,n,r,o,u){return new D5(t,e,n,r,o,u)}}class D5 extends fP{newOutliner(t,e,n,r,o,u=0){return new C_(t,e,n,r,o,u)}}var ef,Qg,Wr,fu,Zg,Di,Jg,ty,pu,is,ss,Pn,nf,sf,Wn,af,ks,ey,Bt,D_,Cb,bP,vP,AP,M_,uc,Fs,Ch,EP,Db,Mb,SP,TP,_P,wP,xP;const Jt=class Jt extends _e{constructor(e){super({...e,name:"highlightEditor"});_(this,Bt);_(this,ef,null);_(this,Qg,0);_(this,Wr);_(this,fu,null);_(this,Zg,null);_(this,Di,null);_(this,Jg,null);_(this,ty,0);_(this,pu,null);_(this,is,null);_(this,ss,null);_(this,Pn,!1);_(this,nf,null);_(this,sf,null);_(this,Wn,null);_(this,af,"");_(this,ks);_(this,ey,"");this.color=e.color||Jt._defaultColor,E(this,ks,e.thickness||Jt._defaultThickness),this.opacity=e.opacity||Jt._defaultOpacity,E(this,Wr,e.boxes||null),E(this,ey,e.methodOfCreation||""),E(this,af,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(E(this,Pn,!0),C(this,Bt,Cb).call(this,e),C(this,Bt,uc).call(this)):c(this,Wr)&&(E(this,ef,e.anchorNode),E(this,Qg,e.anchorOffset),E(this,Jg,e.focusNode),E(this,ty,e.focusOffset),C(this,Bt,D_).call(this),C(this,Bt,uc).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=Jt.prototype;return Dt(this,"_keyboardManager",new dy([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,Pn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:c(this,ks),methodOfCreation:c(this,ey)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var r;_e.initialize(e,n),Jt._defaultColor||(Jt._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case Xt.HIGHLIGHT_COLOR:Jt._defaultColor=n;break;case Xt.HIGHLIGHT_THICKNESS:Jt._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return c(this,sf)}get commentButtonPosition(){return c(this,nf)}updateParams(e,n){switch(e){case Xt.HIGHLIGHT_COLOR:C(this,Bt,bP).call(this,n);break;case Xt.HIGHLIGHT_THICKNESS:C(this,Bt,vP).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Xt.HIGHLIGHT_COLOR,Jt._defaultColor],[Xt.HIGHLIGHT_THICKNESS,Jt._defaultThickness]]}get propertiesToUpdate(){return[[Xt.HIGHLIGHT_COLOR,this.color||Jt._defaultColor],[Xt.HIGHLIGHT_THICKNESS,c(this,ks)||Jt._defaultThickness],[Xt.HIGHLIGHT_FREE,c(this,Pn)]]}onUpdatedColor(){var e,n;(e=this.parent)==null||e.drawLayer.updateProperties(c(this,ss),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=c(this,Zg))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",E(this,Zg,new ev({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(C(this,Bt,Mb).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,C(this,Bt,Mb).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){C(this,Bt,M_).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,Bt,uc).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let n=!1;this.parent&&!e?C(this,Bt,M_).call(this):e&&(C(this,Bt,uc).call(this,e),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var o,u,h;const{drawLayer:n}=this.parent;let r;c(this,Pn)?(e=(e-this.rotation+360)%360,r=C(o=Jt,Fs,Ch).call(o,c(this,is).box,e)):r=C(u=Jt,Fs,Ch).call(u,[this.x,this.y,this.width,this.height],e),n.updateProperties(c(this,ss),{bbox:r,root:{"data-main-rotation":e}}),n.updateProperties(c(this,Wn),{bbox:C(h=Jt,Fs,Ch).call(h,c(this,Di).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();c(this,af)&&(e.setAttribute("aria-label",c(this,af)),e.setAttribute("role","mark")),c(this,Pn)?e.classList.add("free"):this.div.addEventListener("keydown",C(this,Bt,EP).bind(this),{signal:this._uiManager._signal});const n=E(this,pu,document.createElement("div"));return e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=c(this,fu),this.setDims(),LI(this,c(this,pu),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(c(this,Wn),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(c(this,Wn),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:C(this,Bt,Db).call(this,!0);break;case 1:case 3:C(this,Bt,Db).call(this,!1);break}}select(){var e;super.select(),c(this,Wn)&&((e=this.parent)==null||e.drawLayer.updateProperties(c(this,Wn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),c(this,Wn)&&((e=this.parent)==null||e.drawLayer.updateProperties(c(this,Wn),{rootClass:{selected:!1}}),c(this,Pn)||C(this,Bt,Db).call(this,!1))}get _mustFixPosition(){return!c(this,Pn)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(c(this,ss),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(c(this,Wn),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:r,x:o,y:u}){const{x:h,y:f,width:p,height:m}=r.getBoundingClientRect(),y=new AbortController,b=e.combinedSignal(y),A=S=>{y.abort(),C(this,Fs,wP).call(this,e,S)};window.addEventListener("blur",A,{signal:b}),window.addEventListener("pointerup",A,{signal:b}),window.addEventListener("pointerdown",qe,{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",Gs,{signal:b}),r.addEventListener("pointermove",C(this,Fs,_P).bind(this,e),{signal:b}),this._freeHighlight=new C_({x:o,y:u},[h,f,p,m],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,r){var w,x,D,O;let o=null;if(e instanceof tP){const{data:{quadPoints:M,rect:N,rotation:L,id:I,color:k,opacity:z,popupRef:W,richText:it,contentsObj:et,creationDate:ot,modificationDate:Tt},parent:{page:{pageNumber:yt}}}=e;o=e={annotationType:Nt.HIGHLIGHT,color:Array.from(k),opacity:z,quadPoints:M,boxes:null,pageIndex:yt-1,rect:N.slice(0),rotation:L,annotationElementId:I,id:I,deleted:!1,popupRef:W,richText:it,comment:(et==null?void 0:et.str)||null,creationDate:ot,modificationDate:Tt}}else if(e instanceof B1){const{data:{inkLists:M,rect:N,rotation:L,id:I,color:k,borderStyle:{rawWidth:z},popupRef:W,richText:it,contentsObj:et,creationDate:ot,modificationDate:Tt},parent:{page:{pageNumber:yt}}}=e;o=e={annotationType:Nt.HIGHLIGHT,color:Array.from(k),thickness:z,inkLists:M,boxes:null,pageIndex:yt-1,rect:N.slice(0),rotation:L,annotationElementId:I,id:I,deleted:!1,popupRef:W,richText:it,comment:(et==null?void 0:et.str)||null,creationDate:ot,modificationDate:Tt}}const{color:u,quadPoints:h,inkLists:f,opacity:p}=e,m=await super.deserialize(e,n,r);m.color=lt.makeHexColor(...u),m.opacity=p||1,f&&E(m,ks,e.thickness),m._initialData=o,e.comment&&m.setCommentData(e);const[y,b]=m.pageDimensions,[A,S]=m.pageTranslation;if(h){const M=E(m,Wr,[]);for(let N=0;N<h.length;N+=8)M.push({x:(h[N]-A)/y,y:1-(h[N+1]-S)/b,width:(h[N+2]-h[N])/y,height:(h[N+1]-h[N+5])/b});C(w=m,Bt,D_).call(w),C(x=m,Bt,uc).call(x),m.rotate(m.rotation)}else if(f){E(m,Pn,!0);const M=f[0],N={x:M[0]-A,y:b-(M[1]-S)},L=new C_(N,[0,0,y,b],1,c(m,ks)/2,!0,.001);for(let z=0,W=M.length;z<W;z+=2)N.x=M[z]-A,N.y=b-(M[z+1]-S),L.add(N);const{id:I,clipPathId:k}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:m.color,"fill-opacity":m._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:L.toSVGPath()}},!0,!0);C(D=m,Bt,Cb).call(D,{highlightOutlines:L.getOutlines(),highlightId:I,clipPathId:k}),C(O=m,Bt,uc).call(O),m.rotate(m.parentRotation)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=_e._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(e);return Object.assign(r,{color:n,opacity:this.opacity,thickness:c(this,ks),quadPoints:C(this,Bt,SP).call(this),outlines:C(this,Bt,TP).call(this,r.rect)}),this.addComment(r),this.annotationElementId&&!C(this,Bt,xP).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};ef=new WeakMap,Qg=new WeakMap,Wr=new WeakMap,fu=new WeakMap,Zg=new WeakMap,Di=new WeakMap,Jg=new WeakMap,ty=new WeakMap,pu=new WeakMap,is=new WeakMap,ss=new WeakMap,Pn=new WeakMap,nf=new WeakMap,sf=new WeakMap,Wn=new WeakMap,af=new WeakMap,ks=new WeakMap,ey=new WeakMap,Bt=new WeakSet,D_=function(){const e=new w_(c(this,Wr),.001);E(this,is,e.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,is).box;const n=new w_(c(this,Wr),.0025,.001,this._uiManager.direction==="ltr");E(this,Di,n.getOutlines());const{firstPoint:r}=c(this,is);E(this,nf,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]);const{lastPoint:o}=c(this,Di);E(this,sf,[(o[0]-this.x)/this.width,(o[1]-this.y)/this.height])},Cb=function({highlightOutlines:e,highlightId:n,clipPathId:r}){var b,A;if(E(this,is,e),E(this,Di,e.getNewOutline(c(this,ks)/2+1.5,.0025)),n>=0)E(this,ss,n),E(this,fu,r),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),E(this,Wn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,Di).box,path:{d:c(this,Di).toSVGPath()}},!0));else if(this.parent){const S=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,ss),{bbox:C(b=Jt,Fs,Ch).call(b,c(this,is).box,(S-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,Wn),{bbox:C(A=Jt,Fs,Ch).call(A,c(this,Di).box,S),path:{d:c(this,Di).toSVGPath()}})}const[u,h,f,p]=e.box;switch(this.rotation){case 0:this.x=u,this.y=h,this.width=f,this.height=p;break;case 90:{const[S,w]=this.parentDimensions;this.x=h,this.y=1-u,this.width=f*w/S,this.height=p*S/w;break}case 180:this.x=1-u,this.y=1-h,this.width=f,this.height=p;break;case 270:{const[S,w]=this.parentDimensions;this.x=1-h,this.y=u,this.width=f*w/S,this.height=p*S/w;break}}const{firstPoint:m}=e;E(this,nf,[(m[0]-u)/f,(m[1]-h)/p]);const{lastPoint:y}=c(this,Di);E(this,sf,[(y[0]-u)/f,(y[1]-h)/p])},bP=function(e){const n=(u,h)=>{this.color=u,this.opacity=h,this.onUpdatedColor()},r=this.color,o=this.opacity;this.addCommands({cmd:n.bind(this,e,Jt._defaultOpacity),undo:n.bind(this,r,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Xt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},vP=function(e){const n=c(this,ks),r=o=>{E(this,ks,o),C(this,Bt,AP).call(this,o)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Xt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},AP=function(e){c(this,Pn)&&(C(this,Bt,Cb).call(this,{highlightOutlines:c(this,is).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())},M_=function(){c(this,ss)===null||!this.parent||(this.parent.drawLayer.remove(c(this,ss)),E(this,ss,null),this.parent.drawLayer.remove(c(this,Wn)),E(this,Wn,null))},uc=function(e=this.parent){c(this,ss)===null&&({id:un(this,ss)._,clipPathId:un(this,fu)._}=e.drawLayer.draw({bbox:c(this,is).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:c(this,Pn)},path:{d:c(this,is).toSVGPath()}},!1,!0),E(this,Wn,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,Pn)},bbox:c(this,Di).box,path:{d:c(this,Di).toSVGPath()}},c(this,Pn))),c(this,pu)&&(c(this,pu).style.clipPath=c(this,fu)))},Fs=new WeakSet,Ch=function([e,n,r,o],u){switch(u){case 90:return[1-n-o,e,o,r];case 180:return[1-e-r,1-n-o,r,o];case 270:return[n,1-e-r,o,r]}return[e,n,r,o]},EP=function(e){Jt._keyboardManager.exec(this,e)},Db=function(e){if(!c(this,ef))return;const n=window.getSelection();e?n.setPosition(c(this,ef),c(this,Qg)):n.setPosition(c(this,Jg),c(this,ty))},Mb=function(){return c(this,Pn)?this.rotation:0},SP=function(){if(c(this,Pn))return null;const[e,n]=this.pageDimensions,[r,o]=this.pageTranslation,u=c(this,Wr),h=new Float32Array(u.length*8);let f=0;for(const{x:p,y:m,width:y,height:b}of u){const A=p*e+r,S=(1-m)*n+o;h[f]=h[f+4]=A,h[f+1]=h[f+3]=S,h[f+2]=h[f+6]=A+y*e,h[f+5]=h[f+7]=S-b*n,f+=8}return h},TP=function(e){return c(this,is).serialize(e,C(this,Bt,Mb).call(this))},_P=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},wP=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},xP=function(e){const{color:n}=this._initialData;return this.hasEditedComment||e.color.some((r,o)=>r!==n[o])},_(Jt,Fs),$(Jt,"_defaultColor",null),$(Jt,"_defaultOpacity",1),$(Jt,"_defaultThickness",12),$(Jt,"_type","highlight"),$(Jt,"_editorType",Nt.HIGHLIGHT),$(Jt,"_freeHighlightId",-1),$(Jt,"_freeHighlight",null),$(Jt,"_freeHighlightClipId","");let av=Jt;var mu;class CP{constructor(){_(this,mu,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){c(this,mu)[t]=e}toSVGProperties(){const t=c(this,mu);return E(this,mu,Object.create(null)),{root:t}}reset(){E(this,mu,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){ee("Not implemented")}}mu=new WeakMap;var as,rf,En,gu,yu,Kt,R_,O_,N_,Yp,DP,Rb,Xp,Dh;const jt=class jt extends _e{constructor(e){super(e);_(this,Kt);_(this,as,null);_(this,rf);$(this,"_colorPicker",null);$(this,"_drawId",null);E(this,rf,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(C(this,Kt,R_).call(this,e),C(this,Kt,Yp).call(this))}static _mergeSVGProperties(e,n){const r=new Set(Object.keys(e));for(const[o,u]of Object.entries(n))r.has(o)?Object.assign(e[o],u):e[o]=u;return e}static getDefaultDrawingOptions(e){ee("Not implemented")}static get typesMap(){ee("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const r=this.typesMap.get(e);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(c(jt,En).updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const r=this.constructor.typesMap.get(e);r&&this._updateProperty(e,r,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[r,o]of this.typesMap)e.push([r,n[o]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[r,o]of this.constructor.typesMap)e.push([r,n[o]]);return e}_updateProperty(e,n,r){const o=this._drawingOptions,u=o[n],h=f=>{var m;o.updateProperty(n,f);const p=c(this,as).updateProperty(n,f);p&&C(this,Kt,Xp).call(this,p),(m=this.parent)==null||m.drawLayer.updateProperties(this._drawId,o.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:h.bind(this,r),undo:h.bind(this,u),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,jt._mergeSVGProperties(c(this,as).getPathResizingSVGProperties(C(this,Kt,Rb).call(this)),{bbox:C(this,Kt,Dh).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,jt._mergeSVGProperties(c(this,as).getPathResizedSVGProperties(C(this,Kt,Rb).call(this)),{bbox:C(this,Kt,Dh).call(this)}))}_onTranslating(e,n){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:C(this,Kt,Dh).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,jt._mergeSVGProperties(c(this,as).getPathTranslatedSVGProperties(C(this,Kt,Rb).call(this),this.parentDimensions),{bbox:C(this,Kt,Dh).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,rf)&&(E(this,rf,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){C(this,Kt,N_).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,Kt,Yp).call(this),C(this,Kt,Xp).call(this,c(this,as).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),C(this,Kt,N_).call(this)):e&&(this._uiManager.addShouldRescale(this),C(this,Kt,Yp).call(this,e),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,jt._mergeSVGProperties({bbox:C(this,Kt,Dh).call(this)},c(this,as).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&C(this,Kt,Xp).call(this,c(this,as).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const r=super.render();r.classList.add("draw");const o=document.createElement("div");return r.append(o),o.setAttribute("aria-hidden","true"),o.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),r}static createDrawerInstance(e,n,r,o,u){ee("Not implemented")}static startDrawing(e,n,r,o){var x;const{target:u,offsetX:h,offsetY:f,pointerId:p,pointerType:m}=o;if(Yn.isInitializedAndDifferentPointerType(m))return;const{viewport:{rotation:y}}=e,{width:b,height:A}=u.getBoundingClientRect(),S=E(jt,gu,new AbortController),w=e.combinedSignal(S);if(Yn.setPointer(m,p),window.addEventListener("pointerup",D=>{Yn.isSamePointerIdOrRemove(D.pointerId)&&this._endDraw(D)},{signal:w}),window.addEventListener("pointercancel",D=>{Yn.isSamePointerIdOrRemove(D.pointerId)&&this._currentParent.endDrawingSession()},{signal:w}),window.addEventListener("pointerdown",D=>{Yn.isSamePointerType(D.pointerType)&&(Yn.initializeAndAddPointerId(D.pointerId),c(jt,En).isCancellable()&&(c(jt,En).removeLastElement(),c(jt,En).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",Gs,{signal:w}),u.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),u.addEventListener("touchmove",D=>{Yn.isSameTimeStamp(D.timeStamp)&&qe(D)},{signal:w}),e.toggleDrawing(),(x=n._editorUndoBar)==null||x.hide(),c(jt,En)){e.drawLayer.updateProperties(this._currentDrawId,c(jt,En).startNew(h,f,b,A,y));return}n.updateUIForDefaultProperties(this),E(jt,En,this.createDrawerInstance(h,f,b,A,y)),E(jt,yu,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(c(jt,yu).toSVGProperties(),c(jt,En).defaultSVGProperties),!0,!1)}static _drawMove(e){if(Yn.isSameTimeStamp(e.timeStamp),!c(jt,En))return;const{offsetX:n,offsetY:r,pointerId:o}=e;if(Yn.isSamePointerId(o)){if(Yn.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(jt,En).add(n,r)),Yn.setTimeStamp(e.timeStamp),qe(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,E(jt,En,null),E(jt,yu,null),Yn.clearTimeStamp()),c(jt,gu)&&(c(jt,gu).abort(),E(jt,gu,null),Yn.clearPointerIds())}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,c(jt,En).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const r=c(jt,En),o=this._currentDrawId,u=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(o,r.setLastElement(u))},undo:()=>{n.drawLayer.updateProperties(o,r.removeLastElement())},mustExec:!1,type:Xt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Xt.DRAW_STEP),!c(jt,En).isEmpty()){const{pageDimensions:[r,o],scale:u}=n,h=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(jt,En).getOutlines(r*u,o*u,u,this._INNER_MARGIN),drawingOptions:c(jt,yu),mustBeCommitted:!e});return this._cleanup(!0),h}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,r,o,u,h){ee("Not implemented")}static async deserialize(e,n,r){var y,b;const{rawDims:{pageWidth:o,pageHeight:u,pageX:h,pageY:f}}=n.viewport,p=this.deserializeDraw(h,f,o,u,this._INNER_MARGIN,e),m=await super.deserialize(e,n,r);return m.createDrawingOptions(e),C(y=m,Kt,R_).call(y,{drawOutlines:p}),C(b=m,Kt,Yp).call(b),m.onScaleChanging(),m.rotate(),m}serializeDraw(e){const[n,r]=this.pageTranslation,[o,u]=this.pageDimensions;return c(this,as).serialize([n,r,o,u],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};as=new WeakMap,rf=new WeakMap,En=new WeakMap,gu=new WeakMap,yu=new WeakMap,Kt=new WeakSet,R_=function({drawOutlines:e,drawId:n,drawingOptions:r}){E(this,as,e),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=C(this,Kt,O_).call(this,e,this.parent),C(this,Kt,Xp).call(this,e.box)},O_=function(e,n){const{id:r}=n.drawLayer.draw(jt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return r},N_=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Yp=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=C(this,Kt,O_).call(this,c(this,as),e)}},DP=function([e,n,r,o]){const{parentDimensions:[u,h],rotation:f}=this;switch(f){case 90:return[n,1-e,r*(h/u),o*(u/h)];case 180:return[1-e,1-n,r,o];case 270:return[1-n,e,r*(h/u),o*(u/h)];default:return[e,n,r,o]}},Rb=function(){const{x:e,y:n,width:r,height:o,parentDimensions:[u,h],rotation:f}=this;switch(f){case 90:return[1-n,e,r*(u/h),o*(h/u)];case 180:return[1-e,1-n,r,o];case 270:return[n,1-e,r*(u/h),o*(h/u)];default:return[e,n,r,o]}},Xp=function(e){[this.x,this.y,this.width,this.height]=C(this,Kt,DP).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Dh=function(){const{x:e,y:n,width:r,height:o,rotation:u,parentRotation:h,parentDimensions:[f,p]}=this;switch((u*4+h)/90){case 1:return[1-n-o,e,o,r];case 2:return[1-e-r,1-n-o,r,o];case 3:return[n,1-e-r,o,r];case 4:return[e,n-r*(f/p),o*(p/f),r*(f/p)];case 5:return[1-n,e,r*(f/p),o*(p/f)];case 6:return[1-e-o*(p/f),1-n,o*(p/f),r*(f/p)];case 7:return[n-r*(f/p),1-e-o*(p/f),r*(f/p),o*(p/f)];case 8:return[e-r,n-o,r,o];case 9:return[1-n,e-r,o,r];case 10:return[1-e,1-n,r,o];case 11:return[n-o,1-e,o,r];case 12:return[e-o*(p/f),n,o*(p/f),r*(f/p)];case 13:return[1-n-r*(f/p),e-o*(p/f),r*(f/p),o*(p/f)];case 14:return[1-e,1-n-r*(f/p),o*(p/f),r*(f/p)];case 15:return[n,1-e,r*(f/p),o*(p/f)];default:return[e,n,r,o]}},$(jt,"_currentDrawId",-1),$(jt,"_currentParent",null),_(jt,En,null),_(jt,gu,null),_(jt,yu,null),$(jt,"_INNER_MARGIN",3);let rv=jt;var Fa,Sn,Tn,bu,of,ei,Bn,Us,vu,Au,Eu,lf,Ob;class M5{constructor(t,e,n,r,o,u){_(this,lf);_(this,Fa,new Float64Array(6));_(this,Sn);_(this,Tn);_(this,bu);_(this,of);_(this,ei);_(this,Bn,"");_(this,Us,0);_(this,vu,new fy);_(this,Au);_(this,Eu);E(this,Au,n),E(this,Eu,r),E(this,bu,o),E(this,of,u),[t,e]=C(this,lf,Ob).call(this,t,e);const h=E(this,Sn,[NaN,NaN,NaN,NaN,t,e]);E(this,ei,[t,e]),E(this,Tn,[{line:h,points:c(this,ei)}]),c(this,Fa).set(h,0)}updateProperty(t,e){t==="stroke-width"&&E(this,of,e)}isEmpty(){return!c(this,Tn)||c(this,Tn).length===0}isCancellable(){return c(this,ei).length<=10}add(t,e){[t,e]=C(this,lf,Ob).call(this,t,e);const[n,r,o,u]=c(this,Fa).subarray(2,6),h=t-o,f=e-u;return Math.hypot(c(this,Au)*h,c(this,Eu)*f)<=2?null:(c(this,ei).push(t,e),isNaN(n)?(c(this,Fa).set([o,u,t,e],2),c(this,Sn).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(c(this,Fa)[0])&&c(this,Sn).splice(6,6),c(this,Fa).set([n,r,o,u,t,e],0),c(this,Sn).push(...ht.createBezierPoints(n,r,o,u,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(c(this,ei).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,r,o){E(this,Au,n),E(this,Eu,r),E(this,bu,o),[t,e]=C(this,lf,Ob).call(this,t,e);const u=E(this,Sn,[NaN,NaN,NaN,NaN,t,e]);E(this,ei,[t,e]);const h=c(this,Tn).at(-1);return h&&(h.line=new Float32Array(h.line),h.points=new Float32Array(h.points)),c(this,Tn).push({line:u,points:c(this,ei)}),c(this,Fa).set(u,0),E(this,Us,0),this.toSVGPath(),null}getLastElement(){return c(this,Tn).at(-1)}setLastElement(t){return c(this,Tn)?(c(this,Tn).push(t),E(this,Sn,t.line),E(this,ei,t.points),E(this,Us,0),{path:{d:this.toSVGPath()}}):c(this,vu).setLastElement(t)}removeLastElement(){if(!c(this,Tn))return c(this,vu).removeLastElement();c(this,Tn).pop(),E(this,Bn,"");for(let t=0,e=c(this,Tn).length;t<e;t++){const{line:n,points:r}=c(this,Tn)[t];E(this,Sn,n),E(this,ei,r),E(this,Us,0),this.toSVGPath()}return{path:{d:c(this,Bn)}}}toSVGPath(){const t=ht.svgRound(c(this,Sn)[4]),e=ht.svgRound(c(this,Sn)[5]);if(c(this,ei).length===2)return E(this,Bn,`${c(this,Bn)} M ${t} ${e} Z`),c(this,Bn);if(c(this,ei).length<=6){const r=c(this,Bn).lastIndexOf("M");E(this,Bn,`${c(this,Bn).slice(0,r)} M ${t} ${e}`),E(this,Us,6)}if(c(this,ei).length===4){const r=ht.svgRound(c(this,Sn)[10]),o=ht.svgRound(c(this,Sn)[11]);return E(this,Bn,`${c(this,Bn)} L ${r} ${o}`),E(this,Us,12),c(this,Bn)}const n=[];c(this,Us)===0&&(n.push(`M ${t} ${e}`),E(this,Us,6));for(let r=c(this,Us),o=c(this,Sn).length;r<o;r+=6){const[u,h,f,p,m,y]=c(this,Sn).slice(r,r+6).map(ht.svgRound);n.push(`C${u} ${h} ${f} ${p} ${m} ${y}`)}return E(this,Bn,c(this,Bn)+n.join(" ")),E(this,Us,c(this,Sn).length),c(this,Bn)}getOutlines(t,e,n,r){const o=c(this,Tn).at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),c(this,vu).build(c(this,Tn),t,e,n,c(this,bu),c(this,of),r),E(this,Fa,null),E(this,Sn,null),E(this,Tn,null),E(this,Bn,null),c(this,vu)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Fa=new WeakMap,Sn=new WeakMap,Tn=new WeakMap,bu=new WeakMap,of=new WeakMap,ei=new WeakMap,Bn=new WeakMap,Us=new WeakMap,vu=new WeakMap,Au=new WeakMap,Eu=new WeakMap,lf=new WeakSet,Ob=function(t,e){return ht._normalizePoint(t,e,c(this,Au),c(this,Eu),c(this,bu))};var ni,ny,iy,rs,Ha,Va,cf,uf,Su,Hn,gr,MP,RP,OP;class fy extends ht{constructor(){super(...arguments);_(this,Hn);_(this,ni);_(this,ny,0);_(this,iy);_(this,rs);_(this,Ha);_(this,Va);_(this,cf);_(this,uf);_(this,Su)}build(e,n,r,o,u,h,f){E(this,Ha,n),E(this,Va,r),E(this,cf,o),E(this,uf,u),E(this,Su,h),E(this,iy,f??0),E(this,rs,e),C(this,Hn,RP).call(this)}get thickness(){return c(this,Su)}setLastElement(e){return c(this,rs).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,rs).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of c(this,rs)){if(e.push(`M${ht.svgRound(n[4])} ${ht.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${ht.svgRound(n[10])} ${ht.svgRound(n[11])}`);continue}for(let r=6,o=n.length;r<o;r+=6){const[u,h,f,p,m,y]=n.subarray(r,r+6).map(ht.svgRound);e.push(`C${u} ${h} ${f} ${p} ${m} ${y}`)}}return e.join("")}serialize([e,n,r,o],u){const h=[],f=[],[p,m,y,b]=C(this,Hn,MP).call(this);let A,S,w,x,D,O,M,N,L;switch(c(this,uf)){case 0:L=ht._rescale,A=e,S=n+o,w=r,x=-o,D=e+p*r,O=n+(1-m-b)*o,M=e+(p+y)*r,N=n+(1-m)*o;break;case 90:L=ht._rescaleAndSwap,A=e,S=n,w=r,x=o,D=e+m*r,O=n+p*o,M=e+(m+b)*r,N=n+(p+y)*o;break;case 180:L=ht._rescale,A=e+r,S=n,w=-r,x=o,D=e+(1-p-y)*r,O=n+m*o,M=e+(1-p)*r,N=n+(m+b)*o;break;case 270:L=ht._rescaleAndSwap,A=e+r,S=n+o,w=-r,x=-o,D=e+(1-m-b)*r,O=n+(1-p-y)*o,M=e+(1-m)*r,N=n+(1-p)*o;break}for(const{line:I,points:k}of c(this,rs))h.push(L(I,A,S,w,x,u?new Array(I.length):null)),f.push(L(k,A,S,w,x,u?new Array(k.length):null));return{lines:h,points:f,rect:[D,O,M,N]}}static deserialize(e,n,r,o,u,{paths:{lines:h,points:f},rotation:p,thickness:m}){const y=[];let b,A,S,w,x;switch(p){case 0:x=ht._rescale,b=-e/r,A=n/o+1,S=1/r,w=-1/o;break;case 90:x=ht._rescaleAndSwap,b=-n/o,A=-e/r,S=1/o,w=1/r;break;case 180:x=ht._rescale,b=e/r+1,A=-n/o,S=-1/r,w=1/o;break;case 270:x=ht._rescaleAndSwap,b=n/o+1,A=e/r+1,S=-1/o,w=-1/r;break}if(!h){h=[];for(const O of f){const M=O.length;if(M===2){h.push(new Float32Array([NaN,NaN,NaN,NaN,O[0],O[1]]));continue}if(M===4){h.push(new Float32Array([NaN,NaN,NaN,NaN,O[0],O[1],NaN,NaN,NaN,NaN,O[2],O[3]]));continue}const N=new Float32Array(3*(M-2));h.push(N);let[L,I,k,z]=O.subarray(0,4);N.set([NaN,NaN,NaN,NaN,L,I],0);for(let W=4;W<M;W+=2){const it=O[W],et=O[W+1];N.set(ht.createBezierPoints(L,I,k,z,it,et),(W-2)*3),[L,I,k,z]=[k,z,it,et]}}}for(let O=0,M=h.length;O<M;O++)y.push({line:x(h[O].map(N=>N??NaN),b,A,S,w),points:x(f[O].map(N=>N??NaN),b,A,S,w)});const D=new this.prototype.constructor;return D.build(y,r,o,1,p,m,u),D}get box(){return c(this,ni)}updateProperty(e,n){return e==="stroke-width"?C(this,Hn,OP).call(this,n):null}updateParentDimensions([e,n],r){const[o,u]=C(this,Hn,gr).call(this);E(this,Ha,e),E(this,Va,n),E(this,cf,r);const[h,f]=C(this,Hn,gr).call(this),p=h-o,m=f-u,y=c(this,ni);return y[0]-=p,y[1]-=m,y[2]+=2*p,y[3]+=2*m,y}updateRotation(e){return E(this,ny,e),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,ni).map(ht.svgRound).join(" ")}get defaultProperties(){const[e,n]=c(this,ni);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ht.svgRound(e)} ${ht.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=c(this,ni);let r=0,o=0,u=0,h=0,f=0,p=0;switch(c(this,ny)){case 90:o=n/e,u=-e/n,f=e;break;case 180:r=-1,h=-1,f=e,p=n;break;case 270:o=-n/e,u=e/n,p=n;break;default:return""}return`matrix(${r} ${o} ${u} ${h} ${ht.svgRound(f)} ${ht.svgRound(p)})`}getPathResizingSVGProperties([e,n,r,o]){const[u,h]=C(this,Hn,gr).call(this),[f,p,m,y]=c(this,ni);if(Math.abs(m-u)<=ht.PRECISION||Math.abs(y-h)<=ht.PRECISION){const x=e+r/2-(f+m/2),D=n+o/2-(p+y/2);return{path:{"transform-origin":`${ht.svgRound(e)} ${ht.svgRound(n)}`,transform:`${this.rotationTransform} translate(${x} ${D})`}}}const b=(r-2*u)/(m-2*u),A=(o-2*h)/(y-2*h),S=m/r,w=y/o;return{path:{"transform-origin":`${ht.svgRound(f)} ${ht.svgRound(p)}`,transform:`${this.rotationTransform} scale(${S} ${w}) translate(${ht.svgRound(u)} ${ht.svgRound(h)}) scale(${b} ${A}) translate(${ht.svgRound(-u)} ${ht.svgRound(-h)})`}}}getPathResizedSVGProperties([e,n,r,o]){const[u,h]=C(this,Hn,gr).call(this),f=c(this,ni),[p,m,y,b]=f;if(f[0]=e,f[1]=n,f[2]=r,f[3]=o,Math.abs(y-u)<=ht.PRECISION||Math.abs(b-h)<=ht.PRECISION){const D=e+r/2-(p+y/2),O=n+o/2-(m+b/2);for(const{line:M,points:N}of c(this,rs))ht._translate(M,D,O,M),ht._translate(N,D,O,N);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ht.svgRound(e)} ${ht.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const A=(r-2*u)/(y-2*u),S=(o-2*h)/(b-2*h),w=-A*(p+u)+e+u,x=-S*(m+h)+n+h;if(A!==1||S!==1||w!==0||x!==0)for(const{line:D,points:O}of c(this,rs))ht._rescale(D,w,x,A,S,D),ht._rescale(O,w,x,A,S,O);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ht.svgRound(e)} ${ht.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],r){const[o,u]=r,h=c(this,ni),f=e-h[0],p=n-h[1];if(c(this,Ha)===o&&c(this,Va)===u)for(const{line:m,points:y}of c(this,rs))ht._translate(m,f,p,m),ht._translate(y,f,p,y);else{const m=c(this,Ha)/o,y=c(this,Va)/u;E(this,Ha,o),E(this,Va,u);for(const{line:b,points:A}of c(this,rs))ht._rescale(b,f,p,m,y,b),ht._rescale(A,f,p,m,y,A);h[2]*=m,h[3]*=y}return h[0]=e,h[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ht.svgRound(e)} ${ht.svgRound(n)}`}}}get defaultSVGProperties(){const e=c(this,ni);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ht.svgRound(e[0])} ${ht.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}ni=new WeakMap,ny=new WeakMap,iy=new WeakMap,rs=new WeakMap,Ha=new WeakMap,Va=new WeakMap,cf=new WeakMap,uf=new WeakMap,Su=new WeakMap,Hn=new WeakSet,gr=function(e=c(this,Su)){const n=c(this,iy)+e/2*c(this,cf);return c(this,uf)%180===0?[n/c(this,Ha),n/c(this,Va)]:[n/c(this,Va),n/c(this,Ha)]},MP=function(){const[e,n,r,o]=c(this,ni),[u,h]=C(this,Hn,gr).call(this,0);return[e+u,n+h,r-2*u,o-2*h]},RP=function(){const e=E(this,ni,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:o}of c(this,rs)){if(o.length<=12){for(let f=4,p=o.length;f<p;f+=6)lt.pointBoundingBox(o[f],o[f+1],e);continue}let u=o[4],h=o[5];for(let f=6,p=o.length;f<p;f+=6){const[m,y,b,A,S,w]=o.subarray(f,f+6);lt.bezierBoundingBox(u,h,m,y,b,A,S,w,e),u=S,h=w}}const[n,r]=C(this,Hn,gr).call(this);e[0]=Un(e[0]-n,0,1),e[1]=Un(e[1]-r,0,1),e[2]=Un(e[2]+n,0,1),e[3]=Un(e[3]+r,0,1),e[2]-=e[0],e[3]-=e[1]},OP=function(e){const[n,r]=C(this,Hn,gr).call(this);E(this,Su,e);const[o,u]=C(this,Hn,gr).call(this),[h,f]=[o-n,u-r],p=c(this,ni);return p[0]-=h,p[1]-=f,p[2]+=2*h,p[3]+=2*f,p};class jv extends CP{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:_e._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new jv(this._viewParameters);return t.updateAll(this),t}}var _v,NP;const Hh=class Hh extends rv{constructor(e){super({...e,name:"inkEditor"});_(this,_v);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){_e.initialize(e,n),this._defaultDrawingOptions=new jv(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Dt(this,"typesMap",new Map([[Xt.INK_THICKNESS,"stroke-width"],[Xt.INK_COLOR,"stroke"],[Xt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,r,o,u){return new M5(e,n,r,o,u,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,r,o,u,h){return fy.deserialize(e,n,r,o,u,h)}static async deserialize(e,n,r){let o=null;if(e instanceof B1){const{data:{inkLists:h,rect:f,rotation:p,id:m,color:y,opacity:b,borderStyle:{rawWidth:A},popupRef:S,richText:w,contentsObj:x,creationDate:D,modificationDate:O},parent:{page:{pageNumber:M}}}=e;o=e={annotationType:Nt.INK,color:Array.from(y),thickness:A,opacity:b,paths:{points:h},boxes:null,pageIndex:M-1,rect:f.slice(0),rotation:p,annotationElementId:m,id:m,deleted:!1,popupRef:S,richText:w,comment:(x==null?void 0:x.str)||null,creationDate:D,modificationDate:O}}const u=await super.deserialize(e,n,r);return u._initialData=o,e.comment&&u.setCommentData(e),u}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new nv(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Xt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:r}=this;n.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:r}){this._drawingOptions=Hh.getDefaultDrawingOptions({stroke:lt.makeHexColor(...e),"stroke-width":n,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:r}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":u,"stroke-width":h}}=this,f=Object.assign(super.serialize(e),{color:_e._colorManager.convert(o),opacity:u,thickness:h,paths:{lines:n,points:r}});return this.addComment(f),e?(f.isCopy=!0,f):this.annotationElementId&&!C(this,_v,NP).call(this,f)?null:(f.id=this.annotationElementId,f)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:n,rect:r}=this.serializeDraw(!1);return e.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};_v=new WeakSet,NP=function(e){const{color:n,thickness:r,opacity:o,pageIndex:u}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((h,f)=>h!==n[f])||e.thickness!==r||e.opacity!==o||e.pageIndex!==u},$(Hh,"_type","ink"),$(Hh,"_editorType",Nt.INK),$(Hh,"_defaultDrawingOptions",null);let L_=Hh;class I_ extends fy{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const W0=8,wp=3;var Tu,ne,P_,oa,LP,IP,B_,Nb,PP,BP,kP,k_,U_,UP;class no{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:r},o,u,h,f){let p=new OffscreenCanvas(1,1),m=p.getContext("2d",{alpha:!1});const y=200,b=m.font=`${n} ${r} ${y}px ${e}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:S,actualBoundingBoxAscent:w,actualBoundingBoxDescent:x,fontBoundingBoxAscent:D,fontBoundingBoxDescent:O,width:M}=m.measureText(t),N=1.5,L=Math.ceil(Math.max(Math.abs(A)+Math.abs(S)||0,M)*N),I=Math.ceil(Math.max(Math.abs(w)+Math.abs(x)||y,Math.abs(D)+Math.abs(O)||y)*N);p=new OffscreenCanvas(L,I),m=p.getContext("2d",{alpha:!0,willReadFrequently:!0}),m.font=b,m.filter="grayscale(1)",m.fillStyle="white",m.fillRect(0,0,L,I),m.fillStyle="black",m.fillText(t,L*(N-1)/2,I*(3-N)/2);const k=C(this,ne,k_).call(this,m.getImageData(0,0,L,I).data),z=C(this,ne,kP).call(this,k),W=C(this,ne,U_).call(this,z),it=C(this,ne,B_).call(this,k,L,I,W);return this.processDrawnLines({lines:{curves:it,width:L,height:I},pageWidth:o,pageHeight:u,rotation:h,innerMargin:f,mustSmooth:!0,areContours:!0})}static process(t,e,n,r,o){const[u,h,f]=C(this,ne,UP).call(this,t),[p,m]=C(this,ne,BP).call(this,u,h,f,Math.hypot(h,f)*c(this,Tu).sigmaSFactor,c(this,Tu).sigmaR,c(this,Tu).kernelSize),y=C(this,ne,U_).call(this,m),b=C(this,ne,B_).call(this,p,h,f,y);return this.processDrawnLines({lines:{curves:b,width:h,height:f},pageWidth:e,pageHeight:n,rotation:r,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:r,innerMargin:o,mustSmooth:u,areContours:h}){r%180!==0&&([e,n]=[n,e]);const{curves:f,width:p,height:m}=t,y=t.thickness??0,b=[],A=Math.min(e/p,n/m),S=A/e,w=A/n,x=[];for(const{points:O}of f){const M=u?C(this,ne,PP).call(this,O):O;if(!M)continue;x.push(M);const N=M.length,L=new Float32Array(N),I=new Float32Array(3*(N===2?2:N-2));if(b.push({line:I,points:L}),N===2){L[0]=M[0]*S,L[1]=M[1]*w,I.set([NaN,NaN,NaN,NaN,L[0],L[1]],0);continue}let[k,z,W,it]=M;k*=S,z*=w,W*=S,it*=w,L.set([k,z,W,it],0),I.set([NaN,NaN,NaN,NaN,k,z],0);for(let et=4;et<N;et+=2){const ot=L[et]=M[et]*S,Tt=L[et+1]=M[et+1]*w;I.set(ht.createBezierPoints(k,z,W,it,ot,Tt),(et-2)*3),[k,z,W,it]=[W,it,ot,Tt]}}if(b.length===0)return null;const D=h?new I_:new fy;return D.build(b,e,n,1,r,h?0:y,o),{outline:D,newCurves:x,areContours:h,thickness:y,width:p,height:m}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:r,height:o}){let u=1/0,h=-1/0,f=0;for(const M of t){f+=M.length;for(let N=2,L=M.length;N<L;N++){const I=M[N]-M[N-2];u=Math.min(u,I),h=Math.max(h,I)}}let p;u>=-128&&h<=127?p=Int8Array:u>=-32768&&h<=32767?p=Int16Array:p=Int32Array;const m=t.length,y=W0+wp*m,b=new Uint32Array(y);let A=0;b[A++]=y*Uint32Array.BYTES_PER_ELEMENT+(f-2*m)*p.BYTES_PER_ELEMENT,b[A++]=0,b[A++]=r,b[A++]=o,b[A++]=e?0:1,b[A++]=Math.max(0,Math.floor(n??0)),b[A++]=m,b[A++]=p.BYTES_PER_ELEMENT;for(const M of t)b[A++]=M.length-2,b[A++]=M[0],b[A++]=M[1];const S=new CompressionStream("deflate-raw"),w=S.writable.getWriter();await w.ready,w.write(b);const x=p.prototype.constructor;for(const M of t){const N=new x(M.length-2);for(let L=2,I=M.length;L<I;L++)N[L-2]=M[L]-M[L-2];w.write(N)}w.close();const D=await new Response(S.readable).arrayBuffer();return new Uint8Array(D).toBase64()}static async decompressSignature(t){try{const e=Uint8Array.fromBase64(t),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),o=r.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let u=null,h=0;for await(const M of n)u||(u=new Uint8Array(new Uint32Array(M.buffer,0,4)[0])),u.set(M,h),h+=M.length;const f=new Uint32Array(u.buffer,0,u.length>>2),p=f[1];if(p!==0)throw new Error(`Invalid version: ${p}`);const m=f[2],y=f[3],b=f[4]===0,A=f[5],S=f[6],w=f[7],x=[],D=(W0+wp*S)*Uint32Array.BYTES_PER_ELEMENT;let O;switch(w){case Int8Array.BYTES_PER_ELEMENT:O=new Int8Array(u.buffer,D);break;case Int16Array.BYTES_PER_ELEMENT:O=new Int16Array(u.buffer,D);break;case Int32Array.BYTES_PER_ELEMENT:O=new Int32Array(u.buffer,D);break}h=0;for(let M=0;M<S;M++){const N=f[wp*M+W0],L=new Float32Array(N+2);x.push(L);for(let I=0;I<wp-1;I++)L[I]=f[wp*M+W0+I+1];for(let I=0;I<N;I++)L[I+2]=L[I]+O[h++]}return{areContours:b,thickness:A,outlines:x,width:m,height:y}}catch(e){return Ct(`decompressSignature: ${e}`),null}}}Tu=new WeakMap,ne=new WeakSet,P_=function(t,e,n,r){return n-=t,r-=e,n===0?r>0?0:4:n===1?r+6:2-r},oa=new WeakMap,LP=function(t,e,n,r,o,u,h){const f=C(this,ne,P_).call(this,n,r,o,u);for(let p=0;p<8;p++){const m=(-p+f-h+16)%8,y=c(this,oa)[2*m],b=c(this,oa)[2*m+1];if(t[(n+y)*e+(r+b)]!==0)return m}return-1},IP=function(t,e,n,r,o,u,h){const f=C(this,ne,P_).call(this,n,r,o,u);for(let p=0;p<8;p++){const m=(p+f+h+16)%8,y=c(this,oa)[2*m],b=c(this,oa)[2*m+1];if(t[(n+y)*e+(r+b)]!==0)return m}return-1},B_=function(t,e,n,r){const o=t.length,u=new Int32Array(o);for(let m=0;m<o;m++)u[m]=t[m]<=r?1:0;for(let m=1;m<n-1;m++)u[m*e]=u[m*e+e-1]=0;for(let m=0;m<e;m++)u[m]=u[e*n-1-m]=0;let h=1,f;const p=[];for(let m=1;m<n-1;m++){f=1;for(let y=1;y<e-1;y++){const b=m*e+y,A=u[b];if(A===0)continue;let S=m,w=y;if(A===1&&u[b-1]===0)h+=1,w-=1;else if(A>=1&&u[b+1]===0)h+=1,w+=1,A>1&&(f=A);else{A!==1&&(f=Math.abs(A));continue}const x=[y,m],D=w===y+1,O={isHole:D,points:x,id:h,parent:0};p.push(O);let M;for(const et of p)if(et.id===f){M=et;break}M?M.isHole?O.parent=D?M.parent:f:O.parent=D?f:M.parent:O.parent=D?f:0;const N=C(this,ne,LP).call(this,u,e,m,y,S,w,0);if(N===-1){u[b]=-h,u[b]!==1&&(f=Math.abs(u[b]));continue}let L=c(this,oa)[2*N],I=c(this,oa)[2*N+1];const k=m+L,z=y+I;S=k,w=z;let W=m,it=y;for(;;){const et=C(this,ne,IP).call(this,u,e,W,it,S,w,1);L=c(this,oa)[2*et],I=c(this,oa)[2*et+1];const ot=W+L,Tt=it+I;x.push(Tt,ot);const yt=W*e+it;if(u[yt+1]===0?u[yt]=-h:u[yt]===1&&(u[yt]=h),ot===m&&Tt===y&&W===k&&it===z){u[b]!==1&&(f=Math.abs(u[b]));break}else S=W,w=it,W=ot,it=Tt}}}return p},Nb=function(t,e,n,r){if(n-e<=4){for(let k=e;k<n-2;k+=2)r.push(t[k],t[k+1]);return}const o=t[e],u=t[e+1],h=t[n-4]-o,f=t[n-3]-u,p=Math.hypot(h,f),m=h/p,y=f/p,b=m*u-y*o,A=f/h,S=1/p,w=Math.atan(A),x=Math.cos(w),D=Math.sin(w),O=S*(Math.abs(x)+Math.abs(D)),M=S*(1-O+O**2),N=Math.max(Math.atan(Math.abs(D+x)*M),Math.atan(Math.abs(D-x)*M));let L=0,I=e;for(let k=e+2;k<n-2;k+=2){const z=Math.abs(b-m*t[k+1]+y*t[k]);z>L&&(I=k,L=z)}L>(p*N)**2?(C(this,ne,Nb).call(this,t,e,I+2,r),C(this,ne,Nb).call(this,t,I,n,r)):r.push(o,u)},PP=function(t){const e=[],n=t.length;return C(this,ne,Nb).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},BP=function(t,e,n,r,o,u){const h=new Float32Array(u**2),f=-2*r**2,p=u>>1;for(let w=0;w<u;w++){const x=(w-p)**2;for(let D=0;D<u;D++)h[w*u+D]=Math.exp((x+(D-p)**2)/f)}const m=new Float32Array(256),y=-2*o**2;for(let w=0;w<256;w++)m[w]=Math.exp(w**2/y);const b=t.length,A=new Uint8Array(b),S=new Uint32Array(256);for(let w=0;w<n;w++)for(let x=0;x<e;x++){const D=w*e+x,O=t[D];let M=0,N=0;for(let I=0;I<u;I++){const k=w+I-p;if(!(k<0||k>=n))for(let z=0;z<u;z++){const W=x+z-p;if(W<0||W>=e)continue;const it=t[k*e+W],et=h[I*u+z]*m[Math.abs(it-O)];M+=it*et,N+=et}}const L=A[D]=Math.round(M/N);S[L]++}return[A,S]},kP=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},k_=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let r=-1/0,o=1/0;for(let h=0,f=n.length;h<f;h++){const p=n[h]=t[h<<2];r=Math.max(r,p),o=Math.min(o,p)}const u=255/(r-o);for(let h=0,f=n.length;h<f;h++)n[h]=(n[h]-o)*u;return n},U_=function(t){let e,n=-1/0,r=-1/0;const o=t.findIndex(f=>f!==0);let u=o,h=o;for(e=o;e<256;e++){const f=t[e];f>n&&(e-u>r&&(r=e-u,h=e-1),n=f,u=e)}for(e=h-1;e>=0&&!(t[e]>t[e+1]);e--);return e},UP=function(t){const e=t,{width:n,height:r}=t,{maxDim:o}=c(this,Tu);let u=n,h=r;if(n>o||r>o){let b=n,A=r,S=Math.log2(Math.max(n,r)/o);const w=Math.floor(S);S=S===w?w-1:w;for(let D=0;D<S;D++){u=Math.ceil(b/2),h=Math.ceil(A/2);const O=new OffscreenCanvas(u,h);O.getContext("2d").drawImage(t,0,0,b,A,0,0,u,h),b=u,A=h,t!==e&&t.close(),t=O.transferToImageBitmap()}const x=Math.min(o/u,o/h);u=Math.round(u*x),h=Math.round(h*x)}const p=new OffscreenCanvas(u,h).getContext("2d",{willReadFrequently:!0});p.fillStyle="white",p.fillRect(0,0,u,h),p.filter="grayscale(1)",p.drawImage(t,0,0,t.width,t.height,0,0,u,h);const m=p.getImageData(0,0,u,h).data;return[C(this,ne,k_).call(this,m),u,h]},_(no,ne),_(no,Tu,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),_(no,oa,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class k1 extends CP{constructor(){super(),super.updateProperties({fill:_e._defaultLineColor,"stroke-width":0})}clone(){const t=new k1;return t.updateAll(this),t}}class U1 extends jv{constructor(t){super(t),super.updateProperties({stroke:_e._defaultLineColor,"stroke-width":1})}clone(){const t=new U1(this._viewParameters);return t.updateAll(this),t}}var xl,za,Cl,_u;const zi=class zi extends rv{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});_(this,xl,!1);_(this,za,null);_(this,Cl,null);_(this,_u,null);this._willKeepAspectRatio=!0,E(this,Cl,e.signatureData||null),E(this,za,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){_e.initialize(e,n),this._defaultDrawingOptions=new k1,this._defaultDrawnSignatureOptions=new U1(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Dt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!c(this,za)}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(c(this,Cl)){const{lines:o,mustSmooth:u,areContours:h,description:f,uuid:p,heightInPage:m}=c(this,Cl),{rawDims:{pageWidth:y,pageHeight:b},rotation:A}=this.parent.viewport,S=no.processDrawnLines({lines:o,pageWidth:y,pageHeight:b,rotation:A,innerMargin:zi._INNER_MARGIN,mustSmooth:u,areContours:h});this.addSignature(S,m,f,p)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:c(this,za)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){E(this,_u,e),this.addEditToolbar()}getUuid(){return c(this,_u)}get description(){return c(this,za)}set description(e){E(this,za,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:r,width:o,height:u}=c(this,Cl),h=Math.max(o,u),f=no.processDrawnLines({lines:{curves:e.map(p=>({points:p})),thickness:r,width:o,height:u},pageWidth:h,pageHeight:h,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:f.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,n,r,o){const{x:u,y:h}=this,{outline:f}=E(this,Cl,e);E(this,xl,f instanceof I_),this.description=r;let p;c(this,xl)?p=zi.getDefaultDrawingOptions():(p=zi._defaultDrawnSignatureOptions.clone(),p.updateProperties({"stroke-width":f.thickness})),this._addOutlines({drawOutlines:f,drawingOptions:p});const[,m]=this.pageDimensions;let y=n/m;y=y>=1?.5:y,this.width*=y/this.height,this.width>=1&&(y*=.9/this.width,this.width=.9),this.height=y,this.setDims(),this.x=u,this.y=h,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(o),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!o,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:r},rotation:o}=this.parent.viewport;return no.process(e,n,r,o,zi._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:r,pageHeight:o},rotation:u}=this.parent.viewport;return no.extractContoursFromText(e,n,r,o,u,zi._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:r},rotation:o}=this.parent.viewport;return no.processDrawnLines({lines:e,pageWidth:n,pageHeight:r,rotation:o,innerMargin:zi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=zi.getDefaultDrawingOptions():(this._drawingOptions=zi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":o}}=this,u=Object.assign(super.serialize(e),{isSignature:!0,areContours:c(this,xl),color:[0,0,0],thickness:c(this,xl)?0:o});return this.addComment(u),e?(u.paths={lines:n,points:r},u.uuid=c(this,_u),u.isCopy=!0):u.lines=n,c(this,za)&&(u.accessibilityData={type:"Figure",alt:c(this,za)}),u}static deserializeDraw(e,n,r,o,u,h){return h.areContours?I_.deserialize(e,n,r,o,u,h):fy.deserialize(e,n,r,o,u,h)}static async deserialize(e,n,r){var u;const o=await super.deserialize(e,n,r);return E(o,xl,e.areContours),o.description=((u=e.accessibilityData)==null?void 0:u.alt)||"",E(o,_u,e.uuid),o}};xl=new WeakMap,za=new WeakMap,Cl=new WeakMap,_u=new WeakMap,$(zi,"_type","signature"),$(zi,"_editorType",Nt.SIGNATURE),$(zi,"_defaultDrawingOptions",null);let F_=zi;var Ne,_n,Dl,Qr,Ml,hf,Zr,wu,ja,os,df,$t,qp,Kp,Lb,Ib,Pb,V_,Bb,FP;class H_ extends _e{constructor(e){super({...e,name:"stampEditor"});_(this,$t);_(this,Ne,null);_(this,_n,null);_(this,Dl,null);_(this,Qr,null);_(this,Ml,null);_(this,hf,"");_(this,Zr,null);_(this,wu,!1);_(this,ja,null);_(this,os,!1);_(this,df,!1);E(this,Qr,e.bitmapUrl),E(this,Ml,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){_e.initialize(e,n)}static isHandlingMimeForPasting(e){return TT.includes(e)}static paste(e,n){n.pasteEditor({mode:Nt.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:u,height:h}=e||this.copyCanvas(null,null,!0).imageData,f=await r.guess({name:"altText",request:{data:o,width:u,height:h,channels:o.length/(u*h)}});if(!f)throw new Error("No response from the AI service.");if(f.error)throw new Error("Error from the AI service.");if(f.cancel)return null;if(!f.output)throw new Error("No valid response from the AI service.");const p=f.output;return await this.setGuessedAltText(p),n&&!this.hasAltTextData()&&(this.altTextData={alt:p,decorative:!1}),p}remove(){var e;c(this,_n)&&(E(this,Ne,null),this._uiManager.imageManager.deleteId(c(this,_n)),(e=c(this,Zr))==null||e.remove(),E(this,Zr,null),c(this,ja)&&(clearTimeout(c(this,ja)),E(this,ja,null))),super.remove()}rebuild(){if(!this.parent){c(this,_n)&&C(this,$t,Lb).call(this);return}super.rebuild(),this.div!==null&&(c(this,_n)&&c(this,Zr)===null&&C(this,$t,Lb).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(c(this,Dl)||c(this,Ne)||c(this,Qr)||c(this,Ml)||c(this,_n)||c(this,wu))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),c(this,wu)||(c(this,Ne)?C(this,$t,Ib).call(this):C(this,$t,Lb).call(this)),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:r,bitmap:o}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(E(this,_n,r),o&&E(this,Ne,o),E(this,wu,!1),C(this,$t,Ib).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,ja)!==null&&clearTimeout(c(this,ja)),E(this,ja,setTimeout(()=>{E(this,ja,null),C(this,$t,V_).call(this)},200))}copyCanvas(e,n,r=!1){e||(e=224);const{width:o,height:u}=c(this,Ne),h=new qa;let f=c(this,Ne),p=o,m=u,y=null;if(n){if(o>n||u>n){const k=Math.min(n/o,n/u);p=Math.floor(o*k),m=Math.floor(u*k)}y=document.createElement("canvas");const A=y.width=Math.ceil(p*h.sx),S=y.height=Math.ceil(m*h.sy);c(this,os)||(f=C(this,$t,Pb).call(this,A,S));const w=y.getContext("2d");w.filter=this._uiManager.hcmFilter;let x="white",D="#cfcfd8";this._uiManager.hcmFilter!=="none"?D="black":Qz.isDarkMode&&(x="#8f8f9d",D="#42414d");const O=15,M=O*h.sx,N=O*h.sy,L=new OffscreenCanvas(M*2,N*2),I=L.getContext("2d");I.fillStyle=x,I.fillRect(0,0,M*2,N*2),I.fillStyle=D,I.fillRect(0,0,M,N),I.fillRect(M,N,M,N),w.fillStyle=w.createPattern(L,"repeat"),w.fillRect(0,0,A,S),w.drawImage(f,0,0,f.width,f.height,0,0,A,S)}let b=null;if(r){let A,S;if(h.symmetric&&f.width<e&&f.height<e)A=f.width,S=f.height;else if(f=c(this,Ne),o>e||u>e){const D=Math.min(e/o,e/u);A=Math.floor(o*D),S=Math.floor(u*D),c(this,os)||(f=C(this,$t,Pb).call(this,A,S))}const x=new OffscreenCanvas(A,S).getContext("2d",{willReadFrequently:!0});x.drawImage(f,0,0,f.width,f.height,0,0,A,S),b={width:A,height:S,data:x.getImageData(0,0,A,S).data}}return{canvas:y,width:p,height:m,imageData:b}}static async deserialize(e,n,r){var x;let o=null,u=!1;if(e instanceof eP){const{data:{rect:D,rotation:O,id:M,structParent:N,popupRef:L,richText:I,contentsObj:k,creationDate:z,modificationDate:W},container:it,parent:{page:{pageNumber:et}},canvas:ot}=e;let Tt,yt;ot?(delete e.canvas,{id:Tt,bitmap:yt}=r.imageManager.getFromCanvas(it.id,ot),ot.remove()):(u=!0,e._hasNoCanvas=!0);const bt=((x=await n._structTree.getAriaAttributes(`${Ph}${M}`))==null?void 0:x.get("aria-label"))||"";o=e={annotationType:Nt.STAMP,bitmapId:Tt,bitmap:yt,pageIndex:et-1,rect:D.slice(0),rotation:O,annotationElementId:M,id:M,deleted:!1,accessibilityData:{decorative:!1,altText:bt},isSvg:!1,structParent:N,popupRef:L,richText:I,comment:(k==null?void 0:k.str)||null,creationDate:z,modificationDate:W}}const h=await super.deserialize(e,n,r),{rect:f,bitmap:p,bitmapUrl:m,bitmapId:y,isSvg:b,accessibilityData:A}=e;u?(r.addMissingCanvas(e.id,h),E(h,wu,!0)):y&&r.imageManager.isValidId(y)?(E(h,_n,y),p&&E(h,Ne,p)):E(h,Qr,m),E(h,os,b);const[S,w]=h.pageDimensions;return h.width=(f[2]-f[0])/S,h.height=(f[3]-f[1])/w,A&&(h.altTextData=A),h._initialData=o,e.comment&&h.setCommentData(e),E(h,df,!!o),h}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(e),{bitmapId:c(this,_n),isSvg:c(this,os)});if(this.addComment(r),e)return r.bitmapUrl=C(this,$t,Bb).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:o,altText:u}=this.serializeAltText(!1);if(!o&&u&&(r.accessibilityData={type:"Figure",alt:u}),this.annotationElementId){const f=C(this,$t,FP).call(this,r);return f.isSame?null:(f.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(n===null)return r;n.stamps||(n.stamps=new Map);const h=c(this,os)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(c(this,_n)))n.stamps.set(c(this,_n),{area:h,serialized:r}),r.bitmap=C(this,$t,Bb).call(this,!1);else if(c(this,os)){const f=n.stamps.get(c(this,_n));h>f.area&&(f.area=h,f.serialized.bitmap.close(),f.serialized.bitmap=C(this,$t,Bb).call(this,!1))}return r}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Ne=new WeakMap,_n=new WeakMap,Dl=new WeakMap,Qr=new WeakMap,Ml=new WeakMap,hf=new WeakMap,Zr=new WeakMap,wu=new WeakMap,ja=new WeakMap,os=new WeakMap,df=new WeakMap,$t=new WeakSet,qp=function(e,n=!1){if(!e){this.remove();return}E(this,Ne,e.bitmap),n||(E(this,_n,e.id),E(this,os,e.isSvg)),e.file&&E(this,hf,e.file.name),C(this,$t,Ib).call(this)},Kp=function(){if(E(this,Dl,null),this._uiManager.enableWaiting(!1),!!c(this,Zr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Ne)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Ne)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Lb=function(){if(c(this,_n)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,_n)).then(r=>C(this,$t,qp).call(this,r,!0)).finally(()=>C(this,$t,Kp).call(this));return}if(c(this,Qr)){const r=c(this,Qr);E(this,Qr,null),this._uiManager.enableWaiting(!0),E(this,Dl,this._uiManager.imageManager.getFromUrl(r).then(o=>C(this,$t,qp).call(this,o)).finally(()=>C(this,$t,Kp).call(this)));return}if(c(this,Ml)){const r=c(this,Ml);E(this,Ml,null),this._uiManager.enableWaiting(!0),E(this,Dl,this._uiManager.imageManager.getFromFile(r).then(o=>C(this,$t,qp).call(this,o)).finally(()=>C(this,$t,Kp).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=TT.join(",");const n=this._uiManager._signal;E(this,Dl,new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),C(this,$t,qp).call(this,o)}r()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>C(this,$t,Kp).call(this))),e.click()},Ib=function(){var p;const{div:e}=this;let{width:n,height:r}=c(this,Ne);const[o,u]=this.pageDimensions,h=.75;if(this.width)n=this.width*o,r=this.height*u;else if(n>h*o||r>h*u){const m=Math.min(h*o/n,h*u/r);n*=m,r*=m}this._uiManager.enableWaiting(!1);const f=E(this,Zr,document.createElement("canvas"));f.setAttribute("role","img"),this.addContainer(f),this.width=n/o,this.height=r/u,this.setDims(),(p=this._initialOptions)!=null&&p.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),C(this,$t,V_).call(this),c(this,df)||(this.parent.addUndoableEditor(this),E(this,df,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,hf)&&this.div.setAttribute("aria-description",c(this,hf)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Pb=function(e,n){const{width:r,height:o}=c(this,Ne);let u=r,h=o,f=c(this,Ne);for(;u>2*e||h>2*n;){const p=u,m=h;u>2*e&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2)),h>2*n&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2));const y=new OffscreenCanvas(u,h);y.getContext("2d").drawImage(f,0,0,p,m,0,0,u,h),f=y.transferToImageBitmap()}return f},V_=function(){const[e,n]=this.parentDimensions,{width:r,height:o}=this,u=new qa,h=Math.ceil(r*e*u.sx),f=Math.ceil(o*n*u.sy),p=c(this,Zr);if(!p||p.width===h&&p.height===f)return;p.width=h,p.height=f;const m=c(this,os)?c(this,Ne):C(this,$t,Pb).call(this,h,f),y=p.getContext("2d");y.filter=this._uiManager.hcmFilter,y.drawImage(m,0,0,m.width,m.height,0,0,h,f)},Bb=function(e){if(e){if(c(this,os)){const o=this._uiManager.imageManager.getSvgUrl(c(this,_n));if(o)return o}const n=document.createElement("canvas");return{width:n.width,height:n.height}=c(this,Ne),n.getContext("2d").drawImage(c(this,Ne),0,0),n.toDataURL()}if(c(this,os)){const[n,r]=this.pageDimensions,o=Math.round(this.width*n*Ul.PDF_TO_CSS_UNITS),u=Math.round(this.height*r*Ul.PDF_TO_CSS_UNITS),h=new OffscreenCanvas(o,u);return h.getContext("2d").drawImage(c(this,Ne),0,0,c(this,Ne).width,c(this,Ne).height,0,0,o,u),h.transferToImageBitmap()}return structuredClone(c(this,Ne))},FP=function(e){var h;const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,o=e.pageIndex===n,u=(((h=e.accessibilityData)==null?void 0:h.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&o&&u,isSameAltText:u}},$(H_,"_type","stamp"),$(H_,"_editorType",Nt.STAMP);var xu,ff,Rl,Ol,Jr,Mi,Nl,pf,mf,la,to,wn,eo,Ll,gf,mt,Il,Ae,j_,HP,Aa,G_,Y_,kb;const Qs=class Qs{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:r,accessibilityManager:o,annotationLayer:u,drawLayer:h,textLayer:f,viewport:p,l10n:m}){_(this,Ae);_(this,xu);_(this,ff,!1);_(this,Rl,null);_(this,Ol,null);_(this,Jr,null);_(this,Mi,new Map);_(this,Nl,!1);_(this,pf,!1);_(this,mf,!1);_(this,la,null);_(this,to,null);_(this,wn,null);_(this,eo,null);_(this,Ll,null);_(this,gf,-1);_(this,mt);const y=[...c(Qs,Il).values()];if(!Qs._initialized){Qs._initialized=!0;for(const b of y)b.initialize(m,t)}t.registerEditorTypes(y),E(this,mt,t),this.pageIndex=e,this.div=n,E(this,xu,o),E(this,Rl,u),this.viewport=p,E(this,wn,f),this.drawLayer=h,this._structTree=r,c(this,mt).addLayer(this)}updatePageIndex(t){this.pageIndex=t}get isEmpty(){return c(this,Mi).size===0}get isInvisible(){return this.isEmpty&&c(this,mt).getMode()===Nt.NONE}updateToolbar(t){c(this,mt).updateToolbar(t)}updateMode(t=c(this,mt).getMode()){switch(C(this,Ae,kb).call(this),t){case Nt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Nt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Nt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Nt.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of c(Qs,Il).values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=c(this,wn))==null?void 0:e.div)}setEditingState(t){c(this,mt).setEditingState(t)}addCommands(t){c(this,mt).addCommands(t)}cleanUndoStack(t){c(this,mt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=c(this,Rl))==null||e.togglePointerEvents(t)}async enable(){var n;E(this,mf,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=c(this,Ll))==null||n.abort(),E(this,Ll,null);const t=new Set;for(const r of c(this,Ae,j_))r.enableEditing(),r.show(!0),r.annotationElementId&&(c(this,mt).removeChangedExistingAnnotation(r),t.add(r.annotationElementId));const e=c(this,Rl);if(e)for(const r of e.getEditableAnnotations()){if(r.hide(),c(this,mt).isDeletedAnnotationElement(r.data.id)||t.has(r.data.id))continue;const o=await this.deserialize(r);o&&(this.addOrRebuild(o),o.enableEditing())}E(this,mf,!1),c(this,mt)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var r;if(E(this,pf,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),c(this,wn)&&!c(this,Ll)){E(this,Ll,new AbortController);const o=c(this,mt).combinedSignal(c(this,Ll));c(this,wn).div.addEventListener("pointerdown",u=>{const{clientX:f,clientY:p,timeStamp:m}=u,y=c(this,gf);if(m-y>500){E(this,gf,m);return}E(this,gf,-1);const{classList:b}=this.div;b.toggle("getElements",!0);const A=document.elementsFromPoint(f,p);if(b.toggle("getElements",!1),!this.div.contains(A[0]))return;let S;const w=new RegExp(`^${am}[0-9]+$`);for(const D of A)if(w.test(D.id)){S=D.id;break}if(!S)return;const x=c(this,Mi).get(S);(x==null?void 0:x.annotationElementId)===null&&(u.stopPropagation(),u.preventDefault(),x.dblclick(u))},{signal:o,capture:!0})}const t=c(this,Rl),e=[];if(t){const o=new Map,u=new Map;for(const f of c(this,Ae,j_)){if(f.disableEditing(),!f.annotationElementId){e.push(f);continue}if(f.serialize()!==null){o.set(f.annotationElementId,f);continue}else u.set(f.annotationElementId,f);(r=this.getEditableAnnotation(f.annotationElementId))==null||r.show(),f.remove()}const h=t.getEditableAnnotations();for(const f of h){const{id:p}=f.data;if(c(this,mt).isDeletedAnnotationElement(p)){f.updateEdited({deleted:!0});continue}let m=u.get(p);if(m){m.resetAnnotationElement(f),m.show(!1),f.show();continue}m=o.get(p),m&&(c(this,mt).addChangedExistingAnnotation(m),m.renderAnnotationElement(f)&&m.show(!1)),f.show()}}C(this,Ae,kb).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const o of c(Qs,Il).values())n.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t==null||t.updateFakeAnnotations(e),E(this,pf,!1)}getEditableAnnotation(t){var e;return((e=c(this,Rl))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){c(this,mt).getActive()!==t&&c(this,mt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=c(this,wn))!=null&&t.div&&!c(this,eo)){E(this,eo,new AbortController);const e=c(this,mt).combinedSignal(c(this,eo));c(this,wn).div.addEventListener("pointerdown",C(this,Ae,HP).bind(this),{signal:e}),c(this,wn).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=c(this,wn))!=null&&t.div&&c(this,eo)&&(c(this,eo).abort(),E(this,eo,null),c(this,wn).div.classList.remove("highlighting"))}enableClick(){if(c(this,Ol))return;E(this,Ol,new AbortController);const t=c(this,mt).combinedSignal(c(this,Ol));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=c(this,Ol))==null||t.abort(),E(this,Ol,null)}attach(t){c(this,Mi).set(t.id,t);const{annotationElementId:e}=t;e&&c(this,mt).isDeletedAnnotationElement(e)&&c(this,mt).removeDeletedAnnotationElement(t)}detach(t){var e;c(this,Mi).delete(t.id),(e=c(this,xu))==null||e.removePointerInTextLayer(t.contentDiv),!c(this,pf)&&t.annotationElementId&&c(this,mt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),c(this,mt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(c(this,mt).addDeletedAnnotationElement(t),_e.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),c(this,mt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!c(this,mf)),c(this,mt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!c(this,Jr)&&(t._focusEventsAllowed=!1,E(this,Jr,setTimeout(()=>{E(this,Jr,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:c(this,mt)._signal}),e.focus())},0))),t._structTreeParentId=(n=c(this,xu))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of c(this,Mi).values())if(e.uid===t)return e;return null}getNextId(){return c(this,mt).getId()}combinedSignal(t){return c(this,mt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=c(this,Ae,Aa))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await c(this,mt).updateMode(t.mode);const{offsetX:n,offsetY:r}=C(this,Ae,Y_).call(this),o=this.getNextId(),u=C(this,Ae,G_).call(this,{parent:this,id:o,x:n,y:r,uiManager:c(this,mt),isCentered:!0,...e});u&&this.add(u)}async deserialize(t){var e;return await((e=c(Qs,Il).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,c(this,mt)))||null}createAndAddNewEditor(t,e,n={}){const r=this.getNextId(),o=C(this,Ae,G_).call(this,{parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:c(this,mt),isCentered:e,...n});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(t={}){this.createAndAddNewEditor(C(this,Ae,Y_).call(this),!0,t)}setSelected(t){c(this,mt).setSelected(t)}toggleSelected(t){c(this,mt).toggleSelected(t)}unselect(t){c(this,mt).unselect(t)}pointerup(t){var r;const{isMac:e}=gn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!c(this,Nl)||(E(this,Nl,!1),(r=c(this,Ae,Aa))!=null&&r.isDrawer&&c(this,Ae,Aa).supportMultipleDrawings))return;if(!c(this,ff)){E(this,ff,!0);return}const n=c(this,mt).getMode();if(n===Nt.STAMP||n===Nt.SIGNATURE){c(this,mt).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var r;if(c(this,mt).getMode()===Nt.HIGHLIGHT&&this.enableTextSelection(),c(this,Nl)){E(this,Nl,!1);return}const{isMac:e}=gn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(E(this,Nl,!0),(r=c(this,Ae,Aa))!=null&&r.isDrawer){this.startDrawingSession(t);return}const n=c(this,mt).getActive();E(this,ff,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),c(this,la)){c(this,Ae,Aa).startDrawing(this,c(this,mt),!1,t);return}c(this,mt).setCurrentDrawingSession(this),E(this,la,new AbortController);const e=c(this,mt).combinedSignal(c(this,la));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(E(this,to,null),this.commitOrRemove())},{signal:e}),c(this,Ae,Aa).startDrawing(this,c(this,mt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&E(this,to,e);return}c(this,to)&&setTimeout(()=>{var e;(e=c(this,to))==null||e.focus(),E(this,to,null)},0)}endDrawingSession(t=!1){return c(this,la)?(c(this,mt).setCurrentDrawingSession(null),c(this,la).abort(),E(this,la,null),E(this,to,null),c(this,Ae,Aa).endDrawing(t)):null}findNewParent(t,e,n){const r=c(this,mt).findParent(e,n);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return c(this,la)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,la)&&c(this,Ae,Aa).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=c(this,mt).getActive())==null?void 0:t.parent)===this&&(c(this,mt).commitOrRemove(),c(this,mt).setActiveEditor(null)),c(this,Jr)&&(clearTimeout(c(this,Jr)),E(this,Jr,null));for(const n of c(this,Mi).values())(e=c(this,xu))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,c(this,Mi).clear(),c(this,mt).removeLayer(this)}render({viewport:t}){this.viewport=t,Mu(this.div,t);for(const e of c(this,mt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){c(this,mt).commitOrRemove(),C(this,Ae,kb).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Mu(this.div,{rotation:n}),e!==n)for(const r of c(this,Mi).values())r.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return c(this,mt).viewParameters.realScale}};xu=new WeakMap,ff=new WeakMap,Rl=new WeakMap,Ol=new WeakMap,Jr=new WeakMap,Mi=new WeakMap,Nl=new WeakMap,pf=new WeakMap,mf=new WeakMap,la=new WeakMap,to=new WeakMap,wn=new WeakMap,eo=new WeakMap,Ll=new WeakMap,gf=new WeakMap,mt=new WeakMap,Il=new WeakMap,Ae=new WeakSet,j_=function(){return c(this,Mi).size!==0?c(this,Mi).values():c(this,mt).getEditors(this.pageIndex)},HP=function(t){c(this,mt).unselectAll();const{target:e}=t;if(e===c(this,wn).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&c(this,wn).div.contains(e)){const{isMac:n}=gn.platform;if(t.button!==0||t.ctrlKey&&n)return;c(this,mt).showAllEditors("highlight",!0,!0),c(this,wn).div.classList.add("free"),this.toggleDrawing(),av.startHighlighting(this,c(this,mt).direction==="ltr",{target:c(this,wn).div,x:t.x,y:t.y}),c(this,wn).div.addEventListener("pointerup",()=>{c(this,wn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,mt)._signal}),t.preventDefault()}},Aa=function(){return c(Qs,Il).get(c(this,mt).getMode())},G_=function(t){const e=c(this,Ae,Aa);return e?new e.prototype.constructor(t):null},Y_=function(){const{x:t,y:e,width:n,height:r}=this.boundingClientRect,o=Math.max(0,t),u=Math.max(0,e),h=Math.min(window.innerWidth,t+n),f=Math.min(window.innerHeight,e+r),p=(o+h)/2-t,m=(u+f)/2-e,[y,b]=this.viewport.rotation%180===0?[p,m]:[m,p];return{offsetX:y,offsetY:b}},kb=function(){for(const t of c(this,Mi).values())t.isEmpty()&&t.remove()},$(Qs,"_initialized",!1),_(Qs,Il,new Map([T_,L_,H_,av,F_].map(t=>[t._editorType,t])));let z_=Qs;var ca,ii,Cu,sy,wv,VP,$a,q_,zP,K_;const dn=class dn{constructor(){_(this,$a);_(this,ca,null);_(this,ii,new Map);_(this,Cu,new Map)}setParent(t){if(!c(this,ca)){E(this,ca,t);return}if(c(this,ca)!==t){if(c(this,ii).size>0)for(const e of c(this,ii).values())e.remove(),t.append(e);E(this,ca,t)}}static get _svgFactory(){return Dt(this,"_svgFactory",new iv)}draw(t,e=!1,n=!1){const r=un(dn,sy)._++,o=C(this,$a,q_).call(this),u=dn._svgFactory.createElement("defs");o.append(u);const h=dn._svgFactory.createElement("path");u.append(h);const f=`path_${r}`;h.setAttribute("id",f),h.setAttribute("vector-effect","non-scaling-stroke"),e&&c(this,Cu).set(r,h);const p=n?C(this,$a,zP).call(this,u,f):null,m=dn._svgFactory.createElement("use");return o.append(m),m.setAttribute("href",`#${f}`),this.updateProperties(o,t),c(this,ii).set(r,o),{id:r,clipPathId:`url(#${p})`}}drawOutline(t,e){const n=un(dn,sy)._++,r=C(this,$a,q_).call(this),o=dn._svgFactory.createElement("defs");r.append(o);const u=dn._svgFactory.createElement("path");o.append(u);const h=`path_${n}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke");let f;if(e){const y=dn._svgFactory.createElement("mask");o.append(y),f=`mask_${n}`,y.setAttribute("id",f),y.setAttribute("maskUnits","objectBoundingBox");const b=dn._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const A=dn._svgFactory.createElement("use");y.append(A),A.setAttribute("href",`#${h}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const p=dn._svgFactory.createElement("use");r.append(p),p.setAttribute("href",`#${h}`),f&&p.setAttribute("mask",`url(#${f})`);const m=p.cloneNode();return r.append(m),p.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(r,t),c(this,ii).set(n,r),n}finalizeDraw(t,e){c(this,Cu).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var f;if(!e)return;const{root:n,bbox:r,rootClass:o,path:u}=e,h=typeof t=="number"?c(this,ii).get(t):t;if(h){if(n&&C(this,$a,K_).call(this,h,n),r&&C(f=dn,wv,VP).call(f,h,r),o){const{classList:p}=h;for(const[m,y]of Object.entries(o))p.toggle(m,y)}if(u){const m=h.firstElementChild.firstElementChild;C(this,$a,K_).call(this,m,u)}}}updateParent(t,e){if(e===this)return;const n=c(this,ii).get(t);n&&(c(e,ca).append(n),c(this,ii).delete(t),c(e,ii).set(t,n))}remove(t){c(this,Cu).delete(t),c(this,ca)!==null&&(c(this,ii).get(t).remove(),c(this,ii).delete(t))}destroy(){E(this,ca,null);for(const t of c(this,ii).values())t.remove();c(this,ii).clear(),c(this,Cu).clear()}};ca=new WeakMap,ii=new WeakMap,Cu=new WeakMap,sy=new WeakMap,wv=new WeakSet,VP=function(t,[e,n,r,o]){const{style:u}=t;u.top=`${100*n}%`,u.left=`${100*e}%`,u.width=`${100*r}%`,u.height=`${100*o}%`},$a=new WeakSet,q_=function(){const t=dn._svgFactory.create(1,1,!0);return c(this,ca).append(t),t.setAttribute("aria-hidden",!0),t},zP=function(t,e){const n=dn._svgFactory.createElement("clipPath");t.append(n);const r=`clip_${e}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const o=dn._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),r},K_=function(t,e){for(const[n,r]of Object.entries(e))r===null?t.removeAttribute(n):t.setAttribute(n,r)},_(dn,wv),_(dn,sy,0);let X_=dn;globalThis._pdfjsTestingUtils={HighlightOutliner:w_};globalThis.pdfjsLib={AbortException:kl,AnnotationEditorLayer:z_,AnnotationEditorParamsType:Xt,AnnotationEditorType:Nt,AnnotationEditorUIManager:Ru,AnnotationLayer:E_,AnnotationMode:Ho,AnnotationType:an,applyOpacity:Jz,build:r5,ColorPicker:ev,createValidAbsoluteUrl:AI,CSSConstants:Zz,DOMSVGFactory:iv,DrawLayer:X_,FeatureTest:gn,fetchData:cy,findContrastColor:tj,getDocument:F2,getFilenameFromUrl:Xz,getPdfFilenameFromUrl:qz,getRGB:hy,getUuid:SI,getXfaPageViewport:$z,GlobalWorkerOptions:Ga,ImageKind:ib,InvalidPDFException:ET,isDataScheme:kv,isPdfFile:O1,isValidExplicitDest:hj,MathClamp:Un,noContextMenu:Gs,normalizeUnicode:Gz,OPS:rm,OutputScale:qa,PagesMapper:lm,PasswordResponses:Iz,PDFDataRangeTransport:H2,PDFDateString:$b,PDFWorker:um,PermissionFlag:Lz,PixelsPerInch:Ul,RenderingCancelledException:R1,renderRichText:_I,ResponseException:Kb,setLayerDimensions:Mu,shadow:Dt,SignatureExtractor:no,stopEvent:qe,SupportedImageMimeTypes:TT,TextLayer:cm,TouchManager:Qb,updateUrlHash:EI,Util:lt,VerbosityLevel:Lv,version:a5,XfaLayer:TI};const R5="/assets/pdf.worker-BA9kU3Pw.mjs";Ga.workerSrc=R5;function O5(){const[s,t]=st.useState([]),[e,n]=st.useState(""),[r,o]=st.useState("START"),[u,h]=st.useState(0),[f,p]=st.useState(0),[m,y]=st.useState(null),[b,A]=st.useState(!1),[S,w]=st.useState(null),[x,D]=st.useState(!1),[O,M]=st.useState(null),[N,L]=st.useState(!1),[I,k]=st.useState(5),[z,W]=st.useState(""),[it,et]=st.useState(!1),[ot,Tt]=st.useState([]),[yt,bt]=st.useState(null),[F,Y]=st.useState(!1),[tt,At]=st.useState(null);st.useEffect(()=>{if(r!=="START")return;const _t=Rt=>{const Gt=(z+Rt.key).slice(-5);W(Gt),Gt==="iloveher"&&(et(!0),W(""))};return window.addEventListener("keydown",_t),()=>window.removeEventListener("keydown",_t)},[z,r]);const gt=s[u],B=_t=>{try{if(!Array.isArray(_t))throw new Error("JSON must be an array of questions");if(!_t.every(Gt=>typeof Gt.topic=="string"&&typeof Gt.q=="string"&&Array.isArray(Gt.a)&&Gt.a.length>0&&typeof Gt.correct=="number"&&Gt.correct>=0&&Gt.correct<Gt.a.length))throw new Error("Invalid question format. Each question must have topic, q, a (non-empty array), and correct (valid index).");return t(_t),M(null),!0}catch(Rt){return M(Rt instanceof Error?Rt.message:"Invalid data format"),!1}},q=async _t=>{const Rt=await _t.arrayBuffer(),Gt=await F2({data:Rt}).promise;let Ee="";for(let di=1;di<=Gt.numPages;di++){const my=(await(await Gt.getPage(di)).getTextContent()).items.map(Tf=>Tf.str).join(" ");Ee+=my+`
`}return Ee},nt=async _t=>{var Gt;const Rt=(Gt=_t.target.files)==null?void 0:Gt[0];if(Rt){L(!0),M(null);try{const Ee=await q(Rt),di=await Oz(Ee,I);t(di)}catch(Ee){M("Failed to process PDF or generate questions."),console.error(Ee)}finally{L(!1)}}},at=()=>{try{const _t=JSON.parse(e);B(_t)}catch{M("Failed to parse pasted JSON text")}},ct=()=>{s.length!==0&&(o("QUIZ"),h(0),p(0),y(null),A(!1),w(null),Tt([]),bt(null),At(null))},vt=_t=>{if(b)return;y(_t),A(!0);const Rt=_t===gt.correct;Rt&&p(Ee=>Ee+1);const Gt={question:gt,selectedIdx:_t,isCorrect:Rt};Tt(Ee=>[...Ee,Gt])},Et=()=>{if(b)return;const _t={question:gt,selectedIdx:null,isCorrect:!1};Tt(Rt=>[...Rt,_t]),u<s.length-1?(h(Rt=>Rt+1),y(null),A(!1),w(null)):hi()},Fe=async(_t,Rt)=>{D(!0);const Gt=await Rz({question:_t.q,selectedAnswer:Rt!==null?_t.a[Rt]:"Skipped",correctAnswer:_t.a[_t.correct],isCorrect:Rt===_t.correct,topic:_t.topic});w(Gt),D(!1)},ye=()=>{u<s.length-1?(h(_t=>_t+1),y(null),A(!1),w(null)):hi()},hi=async()=>{o("END"),Y(!0);const _t=await Nz(ot);bt(_t),Y(!1)};return X.jsxs("div",{className:"min-h-screen bg-neutral-50 text-neutral-900 font-sans selection:bg-indigo-100",children:[X.jsx("header",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-neutral-200 px-6 py-4",children:X.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg",children:X.jsx(vR,{className:"text-white w-6 h-6"})}),X.jsxs("h1",{className:"text-xl font-bold tracking-tight text-neutral-800",children:["Test ",X.jsx("span",{className:"text-indigo-600",children:"Master"})]})]}),r==="QUIZ"&&X.jsxs("div",{className:"flex items-center gap-4",children:[X.jsxs("div",{className:"text-sm font-medium text-neutral-500",children:["Question ",u+1," of ",s.length]}),X.jsx("div",{className:"h-2 w-32 bg-neutral-100 rounded-full overflow-hidden",children:X.jsx(Bo.div,{className:"h-full bg-indigo-600",initial:{width:0},animate:{width:`${(u+1)/s.length*100}%`}})})]})]})}),X.jsx("main",{className:"max-w-5xl mx-auto px-6 py-12",children:X.jsxs(SS,{mode:"wait",children:[r==="START"&&X.jsxs(Bo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-12",children:[X.jsxs("div",{className:"space-y-4",children:[X.jsxs("h2",{className:"text-5xl font-extrabold tracking-tight text-neutral-900 leading-tight",children:["The Ultimate ",X.jsx("span",{className:"text-indigo-600",children:"Study Companion"})]}),X.jsx("p",{className:"text-xl text-neutral-600 max-w-xl mx-auto",children:"Generate quizzes from PDFs, upload JSON, or paste text. Get deep AI analysis of your performance."})]}),X.jsx("div",{className:"max-w-md mx-auto w-full",children:X.jsxs("div",{className:"w-full p-8 bg-white border border-neutral-200 rounded-[2rem] shadow-sm space-y-6",children:[X.jsxs("div",{className:"flex items-center gap-2 text-neutral-600",children:[X.jsx(N4,{className:"w-6 h-6"}),X.jsx("span",{className:"font-bold text-sm uppercase tracking-wider",children:"Generate from PDF"})]}),X.jsxs("div",{className:"space-y-2 text-left",children:[X.jsx("label",{className:"text-xs font-bold text-neutral-400 uppercase ml-1",children:"Question Count"}),X.jsx("input",{type:"number",value:I,onChange:_t=>k(Number(_t.target.value)),className:"w-full p-4 bg-neutral-50 border border-neutral-200 rounded-2xl text-lg font-medium focus:ring-2 focus:ring-indigo-500 outline-none transition-all",min:"1",max:"20"})]}),X.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-48 border-2 border-neutral-200 border-dashed rounded-[2rem] cursor-pointer hover:bg-neutral-50 transition-colors group",children:[N?X.jsxs("div",{className:"flex flex-col items-center",children:[X.jsx("div",{className:"w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mb-4"}),X.jsx("p",{className:"text-sm font-medium text-neutral-500",children:"Generating Questions..."})]}):X.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[X.jsx("div",{className:"bg-neutral-100 p-4 rounded-2xl mb-4 group-hover:bg-indigo-50 transition-colors",children:X.jsx(j4,{className:"w-8 h-8 text-neutral-400 group-hover:text-indigo-600 transition-colors"})}),X.jsx("p",{className:"text-lg text-neutral-500 font-bold",children:"Upload Study PDF"}),X.jsx("p",{className:"text-sm text-neutral-400",children:"PDF will be analyzed by AI"})]}),X.jsx("input",{type:"file",className:"hidden",accept:".pdf",onChange:nt,disabled:N})]}),s.length>0&&!O&&X.jsxs("div",{className:"flex items-center gap-2 p-4 bg-emerald-50 text-emerald-600 rounded-2xl text-sm font-bold",children:[X.jsx(MS,{className:"w-5 h-5 shrink-0"}),s.length," Questions Ready"]})]})}),O&&X.jsxs("div",{className:"max-w-md mx-auto flex items-center gap-2 p-4 bg-rose-50 text-rose-600 rounded-2xl text-sm font-medium",children:[X.jsx(x4,{className:"w-5 h-5 shrink-0"}),O]}),X.jsxs("button",{onClick:ct,disabled:s.length===0,className:"group relative inline-flex items-center justify-center gap-3 bg-neutral-900 text-white px-16 py-6 rounded-[2rem] font-bold text-2xl hover:bg-indigo-600 disabled:bg-neutral-200 disabled:cursor-not-allowed transition-all shadow-2xl hover:shadow-indigo-200",children:["Start Test",X.jsx(AR,{className:"w-8 h-8 group-hover:translate-x-1 transition-transform"})]}),X.jsx(SS,{children:it&&X.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 bg-black/40 backdrop-blur-sm",children:X.jsx(Bo.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"w-full max-w-2xl bg-white rounded-[2.5rem] shadow-2xl overflow-hidden",children:X.jsxs("div",{className:"p-8 space-y-6",children:[X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsxs("div",{className:"flex items-center gap-3 text-neutral-800",children:[X.jsx("div",{className:"bg-indigo-100 p-2 rounded-xl",children:X.jsx(R4,{className:"w-6 h-6 text-indigo-600"})}),X.jsx("h3",{className:"text-2xl font-bold",children:"Developer JSON Paste"})]}),X.jsx("button",{onClick:()=>et(!1),className:"text-neutral-400 hover:text-neutral-600 font-bold",children:"Close"})]}),X.jsxs("div",{className:"space-y-4",children:[X.jsx("textarea",{value:e,onChange:_t=>n(_t.target.value),placeholder:'[{"topic": "...", "q": "...", "a": ["..."], "correct": 0}]',className:"w-full h-64 p-6 bg-neutral-50 border border-neutral-200 rounded-3xl font-mono text-xs focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none resize-none"}),X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx("p",{className:"text-xs text-neutral-400",children:"Format: Array of Question objects"}),X.jsx("button",{onClick:()=>{at(),O||et(!1)},className:"bg-indigo-600 text-white px-8 py-3 rounded-2xl font-bold hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-200",children:"Apply Changes"})]})]})]})})})})]},"start"),r==="QUIZ"&&s.length>0&&X.jsxs(Bo.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"max-w-3xl mx-auto space-y-8",children:[X.jsxs("div",{className:"flex justify-between items-start",children:[X.jsxs("div",{className:"space-y-2",children:[X.jsx("span",{className:"inline-block px-3 py-1 bg-indigo-50 text-indigo-700 text-xs font-bold uppercase tracking-widest rounded-full",children:gt.topic}),X.jsx("h3",{className:"text-3xl font-bold text-neutral-900 leading-tight",children:gt.q})]}),!b&&X.jsxs("button",{onClick:Et,className:"flex items-center gap-1 text-neutral-400 hover:text-indigo-600 font-bold text-sm transition-colors",children:["Skip ",X.jsx(U4,{className:"w-4 h-4"})]})]}),X.jsx("div",{className:"grid gap-4",children:gt.a.map((_t,Rt)=>{const Gt=Rt===gt.correct,Ee=m===Rt;let di="border-neutral-200 hover:border-indigo-300 hover:bg-indigo-50/50";return b&&(Gt?di="border-emerald-500 bg-emerald-50 text-emerald-900":Ee?di="border-rose-500 bg-rose-50 text-rose-900":di="border-neutral-100 opacity-50 grayscale"),X.jsxs("button",{disabled:b,onClick:()=>vt(Rt),className:`group relative w-full text-left p-6 rounded-2xl border-2 transition-all duration-300 flex items-center justify-between ${di}`,children:[X.jsx("span",{className:"text-lg font-medium",children:_t}),b&&Gt&&X.jsx(MS,{className:"text-emerald-600 w-6 h-6"}),b&&Ee&&!Gt&&X.jsx(ER,{className:"text-rose-600 w-6 h-6"})]},Rt)})}),b&&X.jsxs(Bo.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-6",children:[X.jsxs("div",{className:"bg-white border border-neutral-200 rounded-3xl p-8 shadow-sm relative overflow-hidden",children:[X.jsxs("div",{className:"flex items-center justify-between mb-4",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx(RS,{className:"w-5 h-5 text-indigo-600"}),X.jsx("h4",{className:"text-sm font-bold uppercase tracking-widest text-indigo-600",children:"AI Insights"})]}),!S&&X.jsx("button",{onClick:()=>Fe(gt,m),disabled:x,className:"text-xs font-bold bg-indigo-600 text-white px-4 py-2 rounded-full hover:bg-indigo-700 transition-all disabled:opacity-50",children:x?"Thinking...":"Get AI Explanation"})]}),S&&X.jsx("p",{className:"text-lg leading-relaxed text-neutral-700 animate-fade-in",children:S})]}),X.jsxs("button",{onClick:ye,className:"w-full bg-neutral-900 text-white py-5 rounded-2xl font-bold text-xl hover:bg-indigo-600 transition-all flex items-center justify-center gap-2 shadow-lg",children:[u===s.length-1?"Finish Test":"Next Question",X.jsx(AR,{className:"w-6 h-6"})]})]})]},"quiz"),r==="END"&&X.jsxs(Bo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-12",children:[X.jsxs("div",{className:"text-center space-y-6",children:[X.jsxs("div",{className:"relative inline-block",children:[X.jsx(V4,{className:"w-24 h-24 text-amber-400 mx-auto"}),X.jsx(Bo.div,{className:"absolute inset-0 bg-amber-400/20 blur-3xl rounded-full",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0}})]}),X.jsxs("div",{className:"space-y-2",children:[X.jsx("h2",{className:"text-5xl font-black text-neutral-900",children:"Test Complete!"}),X.jsxs("div",{className:"text-7xl font-black text-indigo-600",children:[Math.round(f/s.length*100),"%"]}),X.jsxs("p",{className:"text-xl text-neutral-600",children:["Score: ",X.jsx("span",{className:"font-bold text-neutral-900",children:f})," / ",s.length]})]})]}),X.jsxs("div",{className:"bg-white border border-neutral-200 rounded-3xl p-8 shadow-sm space-y-4",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx(vR,{className:"w-6 h-6 text-indigo-600"}),X.jsx("h3",{className:"text-xl font-bold",children:"Struggling Topics & Analysis"})]}),F?X.jsxs("div",{className:"flex items-center gap-3 text-neutral-400 italic",children:[X.jsx("div",{className:"w-4 h-4 border-2 border-indigo-600 border-t-transparent rounded-full animate-spin"}),"Analyzing your mistakes..."]}):X.jsx("p",{className:"text-lg text-neutral-700 leading-relaxed",children:yt})]}),X.jsxs("div",{className:"space-y-6",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx(I4,{className:"w-6 h-6 text-neutral-400"}),X.jsx("h3",{className:"text-xl font-bold",children:"Question Overview"})]}),X.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:ot.map((_t,Rt)=>X.jsxs("button",{onClick:()=>{At(Rt),w(null)},className:`p-4 rounded-2xl border-2 transition-all text-center font-bold ${tt===Rt?"border-indigo-600 bg-indigo-50 text-indigo-700":_t.selectedIdx===null?"border-neutral-200 bg-neutral-100 text-neutral-400":_t.isCorrect?"border-emerald-200 bg-emerald-50 text-emerald-600":"border-rose-200 bg-rose-50 text-rose-600"}`,children:["Q",Rt+1]},Rt))}),X.jsx(SS,{mode:"wait",children:tt!==null&&X.jsxs(Bo.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white border border-neutral-200 rounded-3xl p-8 shadow-sm space-y-6",children:[X.jsxs("div",{className:"flex justify-between items-start",children:[X.jsxs("div",{className:"space-y-1",children:[X.jsx("span",{className:"text-xs font-bold text-neutral-400 uppercase tracking-widest",children:ot[tt].question.topic}),X.jsx("h4",{className:"text-xl font-bold",children:ot[tt].question.q})]}),X.jsx("div",{className:"flex items-center gap-2",children:ot[tt].selectedIdx===null?X.jsx("span",{className:"px-3 py-1 bg-neutral-100 text-neutral-500 rounded-full text-xs font-bold",children:"SKIPPED"}):ot[tt].isCorrect?X.jsx("span",{className:"px-3 py-1 bg-emerald-100 text-emerald-600 rounded-full text-xs font-bold",children:"CORRECT"}):X.jsx("span",{className:"px-3 py-1 bg-rose-100 text-rose-600 rounded-full text-xs font-bold",children:"INCORRECT"})})]}),X.jsx("div",{className:"grid gap-3",children:ot[tt].question.a.map((_t,Rt)=>{const Gt=Rt===ot[tt].question.correct,Ee=Rt===ot[tt].selectedIdx;return X.jsxs("div",{className:`p-4 rounded-xl border-2 flex items-center justify-between ${Gt?"border-emerald-500 bg-emerald-50 text-emerald-900":Ee?"border-rose-500 bg-rose-50 text-rose-900":"border-neutral-100 opacity-50"}`,children:[X.jsx("span",{className:"font-medium",children:_t}),Gt&&X.jsx(MS,{className:"w-5 h-5 text-emerald-600"}),Ee&&!Gt&&X.jsx(ER,{className:"w-5 h-5 text-rose-600"})]},Rt)})}),X.jsxs("div",{className:"bg-indigo-50/50 rounded-2xl p-6 space-y-4 border border-indigo-100",children:[X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx(RS,{className:"w-4 h-4 text-indigo-600"}),X.jsx("span",{className:"text-xs font-bold text-indigo-600 uppercase tracking-widest",children:"AI Explanation"})]}),!S&&X.jsx("button",{onClick:()=>Fe(ot[tt].question,ot[tt].selectedIdx),disabled:x,className:"text-xs font-bold bg-indigo-600 text-white px-4 py-2 rounded-full hover:bg-indigo-700 transition-all",children:x?"Thinking...":"Explain This"})]}),S&&X.jsx("p",{className:"text-neutral-700 leading-relaxed italic",children:S})]})]},tt)})]}),X.jsx("div",{className:"flex justify-center pt-8",children:X.jsxs("button",{onClick:()=>o("START"),className:"inline-flex items-center gap-2 bg-neutral-900 text-white px-10 py-5 rounded-2xl font-bold text-xl hover:bg-indigo-600 transition-all shadow-xl",children:[X.jsx(B4,{className:"w-6 h-6"}),"New Test"]})})]},"end")]})}),X.jsx("footer",{className:"max-w-4xl mx-auto px-6 py-12 border-t border-neutral-200",children:X.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6 text-sm text-neutral-400 font-medium",children:[X.jsxs("div",{className:"flex items-center gap-4",children:[X.jsxs("div",{className:"flex items-center gap-1",children:[X.jsx(S4,{className:"w-4 h-4"}),X.jsx("span",{children:"Multi-Source Questions"})]}),X.jsxs("div",{className:"flex items-center gap-1",children:[X.jsx(RS,{className:"w-4 h-4"}),X.jsx("span",{children:"Gemini Pro Powered"})]})]}),X.jsx("p",{children:" 2024 Test Master  AI Study Assistant"})]})})]})}SU.createRoot(document.getElementById("root")).render(X.jsx(st.StrictMode,{children:X.jsx(O5,{})}));
