var hU=Object.defineProperty;var YD=s=>{throw TypeError(s)};var dU=(s,t,e)=>t in s?hU(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var $=(s,t,e)=>dU(s,typeof t!="symbol"?t+"":t,e),sS=(s,t,e)=>t.has(s)||YD("Cannot "+e);var c=(s,t,e)=>(sS(s,t,"read from private field"),e?e.call(s):t.get(s)),_=(s,t,e)=>t.has(s)?YD("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),E=(s,t,e,n)=>(sS(s,t,"write to private field"),n?n.call(s,e):t.set(s,e),e),D=(s,t,e)=>(sS(s,t,"access private method"),e);var un=(s,t,e,n)=>({set _(r){E(s,t,r,e)},get _(){return c(s,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();var aS={exports:{}},bp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XD;function fU(){if(XD)return bp;XD=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,r,o){var u=null;if(o!==void 0&&(u=""+o),r.key!==void 0&&(u=""+r.key),"key"in r){o={};for(var h in r)h!=="key"&&(o[h]=r[h])}else o=r;return r=o.ref,{$$typeof:s,type:n,key:u,ref:r!==void 0?r:null,props:o}}return bp.Fragment=t,bp.jsx=e,bp.jsxs=e,bp}var qD;function pU(){return qD||(qD=1,aS.exports=fU()),aS.exports}var Y=pU(),rS={exports:{}},Mt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KD;function mU(){if(KD)return Mt;KD=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function A(B){return B===null||typeof B!="object"?null:(B=b&&B[b]||B["@@iterator"],typeof B=="function"?B:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,x={};function C(B,q,tt){this.props=B,this.context=q,this.refs=x,this.updater=tt||S}C.prototype.isReactComponent={},C.prototype.setState=function(B,q){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,q,"setState")},C.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function O(){}O.prototype=C.prototype;function M(B,q,tt){this.props=B,this.context=q,this.refs=x,this.updater=tt||S}var N=M.prototype=new O;N.constructor=M,w(N,C.prototype),N.isPureReactComponent=!0;var L=Array.isArray;function I(){}var k={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function W(B,q,tt){var at=tt.ref;return{$$typeof:s,type:B,key:q,ref:at!==void 0?at:null,props:tt}}function nt(B,q){return W(B.type,q,B.props)}function et(B){return typeof B=="object"&&B!==null&&B.$$typeof===s}function ht(B){var q={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(tt){return q[tt]})}var mt=/\/+/g;function gt(B,q){return typeof B=="object"&&B!==null&&B.key!=null?ht(""+B.key):q.toString(36)}function vt(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(I,I):(B.status="pending",B.then(function(q){B.status==="pending"&&(B.status="fulfilled",B.value=q)},function(q){B.status==="pending"&&(B.status="rejected",B.reason=q)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function F(B,q,tt,at,lt){var At=typeof B;(At==="undefined"||At==="boolean")&&(B=null);var Et=!1;if(B===null)Et=!0;else switch(At){case"bigint":case"string":case"number":Et=!0;break;case"object":switch(B.$$typeof){case s:case t:Et=!0;break;case m:return Et=B._init,F(Et(B._payload),q,tt,at,lt)}}if(Et)return lt=lt(B),Et=at===""?"."+gt(B,0):at,L(lt)?(tt="",Et!=null&&(tt=Et.replace(mt,"$&/")+"/"),F(lt,q,tt,"",function(Ni){return Ni})):lt!=null&&(et(lt)&&(lt=nt(lt,tt+(lt.key==null||B&&B.key===lt.key?"":(""+lt.key).replace(mt,"$&/")+"/")+Et)),q.push(lt)),1;Et=0;var qe=at===""?".":at+":";if(L(B))for(var le=0;le<B.length;le++)at=B[le],At=qe+gt(at,le),Et+=F(at,q,tt,At,lt);else if(le=A(B),typeof le=="function")for(B=le.call(B),le=0;!(at=B.next()).done;)at=at.value,At=qe+gt(at,le++),Et+=F(at,q,tt,At,lt);else if(At==="object"){if(typeof B.then=="function")return F(vt(B),q,tt,at,lt);throw q=String(B),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return Et}function X(B,q,tt){if(B==null)return B;var at=[],lt=0;return F(B,at,"","",function(At){return q.call(tt,At,lt++)}),at}function it(B){if(B._status===-1){var q=B._result;q=q(),q.then(function(tt){(B._status===0||B._status===-1)&&(B._status=1,B._result=tt)},function(tt){(B._status===0||B._status===-1)&&(B._status=2,B._result=tt)}),B._status===-1&&(B._status=0,B._result=q)}if(B._status===1)return B._result.default;throw B._result}var dt=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},Tt={map:X,forEach:function(B,q,tt){X(B,function(){q.apply(this,arguments)},tt)},count:function(B){var q=0;return X(B,function(){q++}),q},toArray:function(B){return X(B,function(q){return q})||[]},only:function(B){if(!et(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return Mt.Activity=y,Mt.Children=Tt,Mt.Component=C,Mt.Fragment=e,Mt.Profiler=r,Mt.PureComponent=M,Mt.StrictMode=n,Mt.Suspense=f,Mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Mt.__COMPILER_RUNTIME={__proto__:null,c:function(B){return k.H.useMemoCache(B)}},Mt.cache=function(B){return function(){return B.apply(null,arguments)}},Mt.cacheSignal=function(){return null},Mt.cloneElement=function(B,q,tt){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var at=w({},B.props),lt=B.key;if(q!=null)for(At in q.key!==void 0&&(lt=""+q.key),q)!j.call(q,At)||At==="key"||At==="__self"||At==="__source"||At==="ref"&&q.ref===void 0||(at[At]=q[At]);var At=arguments.length-2;if(At===1)at.children=tt;else if(1<At){for(var Et=Array(At),qe=0;qe<At;qe++)Et[qe]=arguments[qe+2];at.children=Et}return W(B.type,lt,at)},Mt.createContext=function(B){return B={$$typeof:u,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:o,_context:B},B},Mt.createElement=function(B,q,tt){var at,lt={},At=null;if(q!=null)for(at in q.key!==void 0&&(At=""+q.key),q)j.call(q,at)&&at!=="key"&&at!=="__self"&&at!=="__source"&&(lt[at]=q[at]);var Et=arguments.length-2;if(Et===1)lt.children=tt;else if(1<Et){for(var qe=Array(Et),le=0;le<Et;le++)qe[le]=arguments[le+2];lt.children=qe}if(B&&B.defaultProps)for(at in Et=B.defaultProps,Et)lt[at]===void 0&&(lt[at]=Et[at]);return W(B,At,lt)},Mt.createRef=function(){return{current:null}},Mt.forwardRef=function(B){return{$$typeof:h,render:B}},Mt.isValidElement=et,Mt.lazy=function(B){return{$$typeof:m,_payload:{_status:-1,_result:B},_init:it}},Mt.memo=function(B,q){return{$$typeof:p,type:B,compare:q===void 0?null:q}},Mt.startTransition=function(B){var q=k.T,tt={};k.T=tt;try{var at=B(),lt=k.S;lt!==null&&lt(tt,at),typeof at=="object"&&at!==null&&typeof at.then=="function"&&at.then(I,dt)}catch(At){dt(At)}finally{q!==null&&tt.types!==null&&(q.types=tt.types),k.T=q}},Mt.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Mt.use=function(B){return k.H.use(B)},Mt.useActionState=function(B,q,tt){return k.H.useActionState(B,q,tt)},Mt.useCallback=function(B,q){return k.H.useCallback(B,q)},Mt.useContext=function(B){return k.H.useContext(B)},Mt.useDebugValue=function(){},Mt.useDeferredValue=function(B,q){return k.H.useDeferredValue(B,q)},Mt.useEffect=function(B,q){return k.H.useEffect(B,q)},Mt.useEffectEvent=function(B){return k.H.useEffectEvent(B)},Mt.useId=function(){return k.H.useId()},Mt.useImperativeHandle=function(B,q,tt){return k.H.useImperativeHandle(B,q,tt)},Mt.useInsertionEffect=function(B,q){return k.H.useInsertionEffect(B,q)},Mt.useLayoutEffect=function(B,q){return k.H.useLayoutEffect(B,q)},Mt.useMemo=function(B,q){return k.H.useMemo(B,q)},Mt.useOptimistic=function(B,q){return k.H.useOptimistic(B,q)},Mt.useReducer=function(B,q,tt){return k.H.useReducer(B,q,tt)},Mt.useRef=function(B){return k.H.useRef(B)},Mt.useState=function(B){return k.H.useState(B)},Mt.useSyncExternalStore=function(B,q,tt){return k.H.useSyncExternalStore(B,q,tt)},Mt.useTransition=function(){return k.H.useTransition()},Mt.version="19.2.4",Mt}var $D;function $_(){return $D||($D=1,rS.exports=mU()),rS.exports}var st=$_(),oS={exports:{}},vp={},lS={exports:{}},cS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WD;function gU(){return WD||(WD=1,(function(s){function t(F,X){var it=F.length;F.push(X);t:for(;0<it;){var dt=it-1>>>1,Tt=F[dt];if(0<r(Tt,X))F[dt]=X,F[it]=Tt,it=dt;else break t}}function e(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var X=F[0],it=F.pop();if(it!==X){F[0]=it;t:for(var dt=0,Tt=F.length,B=Tt>>>1;dt<B;){var q=2*(dt+1)-1,tt=F[q],at=q+1,lt=F[at];if(0>r(tt,it))at<Tt&&0>r(lt,tt)?(F[dt]=lt,F[at]=it,dt=at):(F[dt]=tt,F[q]=it,dt=q);else if(at<Tt&&0>r(lt,it))F[dt]=lt,F[at]=it,dt=at;else break t}}return X}function r(F,X){var it=F.sortIndex-X.sortIndex;return it!==0?it:F.id-X.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();s.unstable_now=function(){return u.now()-h}}var f=[],p=[],m=1,y=null,b=3,A=!1,S=!1,w=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function N(F){for(var X=e(p);X!==null;){if(X.callback===null)n(p);else if(X.startTime<=F)n(p),X.sortIndex=X.expirationTime,t(f,X);else break;X=e(p)}}function L(F){if(w=!1,N(F),!S)if(e(f)!==null)S=!0,I||(I=!0,ht());else{var X=e(p);X!==null&&vt(L,X.startTime-F)}}var I=!1,k=-1,j=5,W=-1;function nt(){return x?!0:!(s.unstable_now()-W<j)}function et(){if(x=!1,I){var F=s.unstable_now();W=F;var X=!0;try{t:{S=!1,w&&(w=!1,O(k),k=-1),A=!0;var it=b;try{e:{for(N(F),y=e(f);y!==null&&!(y.expirationTime>F&&nt());){var dt=y.callback;if(typeof dt=="function"){y.callback=null,b=y.priorityLevel;var Tt=dt(y.expirationTime<=F);if(F=s.unstable_now(),typeof Tt=="function"){y.callback=Tt,N(F),X=!0;break e}y===e(f)&&n(f),N(F)}else n(f);y=e(f)}if(y!==null)X=!0;else{var B=e(p);B!==null&&vt(L,B.startTime-F),X=!1}}break t}finally{y=null,b=it,A=!1}X=void 0}}finally{X?ht():I=!1}}}var ht;if(typeof M=="function")ht=function(){M(et)};else if(typeof MessageChannel<"u"){var mt=new MessageChannel,gt=mt.port2;mt.port1.onmessage=et,ht=function(){gt.postMessage(null)}}else ht=function(){C(et,0)};function vt(F,X){k=C(function(){F(s.unstable_now())},X)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(F){F.callback=null},s.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<F?Math.floor(1e3/F):5},s.unstable_getCurrentPriorityLevel=function(){return b},s.unstable_next=function(F){switch(b){case 1:case 2:case 3:var X=3;break;default:X=b}var it=b;b=X;try{return F()}finally{b=it}},s.unstable_requestPaint=function(){x=!0},s.unstable_runWithPriority=function(F,X){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var it=b;b=F;try{return X()}finally{b=it}},s.unstable_scheduleCallback=function(F,X,it){var dt=s.unstable_now();switch(typeof it=="object"&&it!==null?(it=it.delay,it=typeof it=="number"&&0<it?dt+it:dt):it=dt,F){case 1:var Tt=-1;break;case 2:Tt=250;break;case 5:Tt=1073741823;break;case 4:Tt=1e4;break;default:Tt=5e3}return Tt=it+Tt,F={id:m++,callback:X,priorityLevel:F,startTime:it,expirationTime:Tt,sortIndex:-1},it>dt?(F.sortIndex=it,t(p,F),e(f)===null&&F===e(p)&&(w?(O(k),k=-1):w=!0,vt(L,it-dt))):(F.sortIndex=Tt,t(f,F),S||A||(S=!0,I||(I=!0,ht()))),F},s.unstable_shouldYield=nt,s.unstable_wrapCallback=function(F){var X=b;return function(){var it=b;b=X;try{return F.apply(this,arguments)}finally{b=it}}}})(cS)),cS}var QD;function yU(){return QD||(QD=1,lS.exports=gU()),lS.exports}var uS={exports:{}},jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZD;function bU(){if(ZD)return jn;ZD=1;var s=$_();function t(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)p+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(f,p,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:f,containerInfo:p,implementation:m}}var u=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,jn.createPortal=function(f,p){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return o(f,p,null,m)},jn.flushSync=function(f){var p=u.T,m=n.p;try{if(u.T=null,n.p=2,f)return f()}finally{u.T=p,n.p=m,n.d.f()}},jn.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,n.d.C(f,p))},jn.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},jn.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var m=p.as,y=h(m,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;m==="style"?n.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:A}):m==="script"&&n.d.X(f,{crossOrigin:y,integrity:b,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},jn.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var m=h(p.as,p.crossOrigin);n.d.M(f,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&n.d.M(f)},jn.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var m=p.as,y=h(m,p.crossOrigin);n.d.L(f,m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},jn.preloadModule=function(f,p){if(typeof f=="string")if(p){var m=h(p.as,p.crossOrigin);n.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else n.d.m(f)},jn.requestFormReset=function(f){n.d.r(f)},jn.unstable_batchedUpdates=function(f,p){return f(p)},jn.useFormState=function(f,p,m){return u.H.useFormState(f,p,m)},jn.useFormStatus=function(){return u.H.useHostTransitionStatus()},jn.version="19.2.4",jn}var JD;function vU(){if(JD)return uS.exports;JD=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),uS.exports=bU(),uS.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tM;function AU(){if(tM)return vp;tM=1;var s=yU(),t=$_(),e=vU();function n(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function u(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function h(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function f(i){if(o(i)!==i)throw Error(n(188))}function p(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(n(188));return a!==i?null:i}for(var l=i,d=a;;){var g=l.return;if(g===null)break;var v=g.alternate;if(v===null){if(d=g.return,d!==null){l=d;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===l)return f(g),i;if(v===d)return f(g),a;v=v.sibling}throw Error(n(188))}if(l.return!==d.return)l=g,d=v;else{for(var T=!1,R=g.child;R;){if(R===l){T=!0,l=g,d=v;break}if(R===d){T=!0,d=g,l=v;break}R=R.sibling}if(!T){for(R=v.child;R;){if(R===l){T=!0,l=v,d=g;break}if(R===d){T=!0,d=v,l=g;break}R=R.sibling}if(!T)throw Error(n(189))}}if(l.alternate!==d)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?i:a}function m(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=m(i),a!==null)return a;i=i.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),M=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),nt=Symbol.for("react.memo_cache_sentinel"),et=Symbol.iterator;function ht(i){return i===null||typeof i!="object"?null:(i=et&&i[et]||i["@@iterator"],typeof i=="function"?i:null)}var mt=Symbol.for("react.client.reference");function gt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===mt?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case C:return"Profiler";case x:return"StrictMode";case L:return"Suspense";case I:return"SuspenseList";case W:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case M:return i.displayName||"Context";case O:return(i._context.displayName||"Context")+".Consumer";case N:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case k:return a=i.displayName||null,a!==null?a:gt(i.type)||"Memo";case j:a=i._payload,i=i._init;try{return gt(i(a))}catch{}}return null}var vt=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it={pending:!1,data:null,method:null,action:null},dt=[],Tt=-1;function B(i){return{current:i}}function q(i){0>Tt||(i.current=dt[Tt],dt[Tt]=null,Tt--)}function tt(i,a){Tt++,dt[Tt]=i.current,i.current=a}var at=B(null),lt=B(null),At=B(null),Et=B(null);function qe(i,a){switch(tt(At,a),tt(lt,i),tt(at,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?pD(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=pD(a),i=mD(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}q(at),tt(at,i)}function le(){q(at),q(lt),q(At)}function Ni(i){i.memoizedState!==null&&tt(Et,i);var a=at.current,l=mD(a,i.type);a!==l&&(tt(lt,i),tt(at,l))}function Zn(i){lt.current===i&&(q(at),q(lt)),Et.current===i&&(q(Et),pp._currentValue=it)}var xt,Nt;function Ut(i){if(xt===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);xt=a&&a[1]||"",Nt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xt+i+Nt}var Ne=!1;function di(i,a){if(!i||Ne)return"";Ne=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(K){var G=K}Reflect.construct(i,[],J)}else{try{J.call()}catch(K){G=K}i.call(J.prototype)}}else{try{throw Error()}catch(K){G=K}(J=i())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(K){if(K&&G&&typeof K.stack=="string")return[K.stack,G.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),T=v[0],R=v[1];if(T&&R){var P=T.split(`
`),z=R.split(`
`);for(g=d=0;d<P.length&&!P[d].includes("DetermineComponentFrameRoot");)d++;for(;g<z.length&&!z[g].includes("DetermineComponentFrameRoot");)g++;if(d===P.length||g===z.length)for(d=P.length-1,g=z.length-1;1<=d&&0<=g&&P[d]!==z[g];)g--;for(;1<=d&&0<=g;d--,g--)if(P[d]!==z[g]){if(d!==1||g!==1)do if(d--,g--,0>g||P[d]!==z[g]){var Q=`
`+P[d].replace(" at new "," at ");return i.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",i.displayName)),Q}while(1<=d&&0<=g);break}}}finally{Ne=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?Ut(l):""}function Y1(i,a){switch(i.tag){case 26:case 27:case 5:return Ut(i.type);case 16:return Ut("Lazy");case 13:return i.child!==a&&a!==null?Ut("Suspense Fallback"):Ut("Suspense");case 19:return Ut("SuspenseList");case 0:case 15:return di(i.type,!1);case 11:return di(i.type.render,!1);case 1:return di(i.type,!0);case 31:return Ut("Activity");default:return""}}function Gv(i){try{var a="",l=null;do a+=Y1(i,l),l=i,i=i.return;while(i);return a}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var _f=Object.prototype.hasOwnProperty,wf=s.unstable_scheduleCallback,Yv=s.unstable_cancelCallback,jP=s.unstable_shouldYield,GP=s.unstable_requestPaint,Li=s.unstable_now,YP=s.unstable_getCurrentPriorityLevel,X1=s.unstable_ImmediatePriority,q1=s.unstable_UserBlockingPriority,gy=s.unstable_NormalPriority,XP=s.unstable_LowPriority,K1=s.unstable_IdlePriority,qP=s.log,KP=s.unstable_setDisableYieldValue,xf=null,Ii=null;function ho(i){if(typeof qP=="function"&&KP(i),Ii&&typeof Ii.setStrictMode=="function")try{Ii.setStrictMode(xf,i)}catch{}}var Pi=Math.clz32?Math.clz32:QP,$P=Math.log,WP=Math.LN2;function QP(i){return i>>>=0,i===0?32:31-($P(i)/WP|0)|0}var yy=256,by=262144,vy=4194304;function zl(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ay(i,a,l){var d=i.pendingLanes;if(d===0)return 0;var g=0,v=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var R=d&134217727;return R!==0?(d=R&~v,d!==0?g=zl(d):(T&=R,T!==0?g=zl(T):l||(l=R&~i,l!==0&&(g=zl(l))))):(R=d&~v,R!==0?g=zl(R):T!==0?g=zl(T):l||(l=d&~i,l!==0&&(g=zl(l)))),g===0?0:a!==0&&a!==g&&(a&v)===0&&(v=g&-g,l=a&-a,v>=l||v===32&&(l&4194048)!==0)?a:g}function Cf(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function ZP(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $1(){var i=vy;return vy<<=1,(vy&62914560)===0&&(vy=4194304),i}function Xv(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function Df(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function JP(i,a,l,d,g,v){var T=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var R=i.entanglements,P=i.expirationTimes,z=i.hiddenUpdates;for(l=T&~l;0<l;){var Q=31-Pi(l),J=1<<Q;R[Q]=0,P[Q]=-1;var G=z[Q];if(G!==null)for(z[Q]=null,Q=0;Q<G.length;Q++){var K=G[Q];K!==null&&(K.lane&=-536870913)}l&=~J}d!==0&&W1(i,d,0),v!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=v&~(T&~a))}function W1(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var d=31-Pi(a);i.entangledLanes|=a,i.entanglements[d]=i.entanglements[d]|1073741824|l&261930}function Q1(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var d=31-Pi(l),g=1<<d;g&a|i[d]&a&&(i[d]|=a),l&=~g}}function Z1(i,a){var l=a&-a;return l=(l&42)!==0?1:qv(l),(l&(i.suspendedLanes|a))!==0?0:l}function qv(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Kv(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function J1(){var i=X.p;return i!==0?i:(i=window.event,i===void 0?32:UD(i.type))}function tw(i,a){var l=X.p;try{return X.p=i,a()}finally{X.p=l}}var fo=Math.random().toString(36).slice(2),xn="__reactFiber$"+fo,fi="__reactProps$"+fo,Pu="__reactContainer$"+fo,$v="__reactEvents$"+fo,tB="__reactListeners$"+fo,eB="__reactHandles$"+fo,ew="__reactResources$"+fo,Mf="__reactMarker$"+fo;function Wv(i){delete i[xn],delete i[fi],delete i[$v],delete i[tB],delete i[eB]}function Bu(i){var a=i[xn];if(a)return a;for(var l=i.parentNode;l;){if(a=l[Pu]||l[xn]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=SD(i);i!==null;){if(l=i[xn])return l;i=SD(i)}return a}i=l,l=i.parentNode}return null}function ku(i){if(i=i[xn]||i[Pu]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function Rf(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(n(33))}function Uu(i){var a=i[ew];return a||(a=i[ew]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function yn(i){i[Mf]=!0}var nw=new Set,iw={};function jl(i,a){Fu(i,a),Fu(i+"Capture",a)}function Fu(i,a){for(iw[i]=a,i=0;i<a.length;i++)nw.add(a[i])}var nB=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sw={},aw={};function iB(i){return _f.call(aw,i)?!0:_f.call(sw,i)?!1:nB.test(i)?aw[i]=!0:(sw[i]=!0,!1)}function Ey(i,a,l){if(iB(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function Sy(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function Qa(i,a,l,d){if(d===null)i.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+d)}}function ps(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function rw(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function sB(i,a,l){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,v=d.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(T){l=""+T,v.call(this,T)}}),Object.defineProperty(i,a,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Qv(i){if(!i._valueTracker){var a=rw(i)?"checked":"value";i._valueTracker=sB(i,a,""+i[a])}}function ow(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),d="";return i&&(d=rw(i)?i.checked?"true":"false":i.value),i=d,i!==l?(a.setValue(i),!0):!1}function Ty(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var aB=/[\n"\\]/g;function ms(i){return i.replace(aB,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Zv(i,a,l,d,g,v,T,R){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),a!=null?T==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+ps(a)):i.value!==""+ps(a)&&(i.value=""+ps(a)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),a!=null?Jv(i,T,ps(a)):l!=null?Jv(i,T,ps(l)):d!=null&&i.removeAttribute("value"),g==null&&v!=null&&(i.defaultChecked=!!v),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.name=""+ps(R):i.removeAttribute("name")}function lw(i,a,l,d,g,v,T,R){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),a!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||a!=null)){Qv(i);return}l=l!=null?""+ps(l):"",a=a!=null?""+ps(a):l,R||a===i.value||(i.value=a),i.defaultValue=a}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=R?i.checked:!!d,i.defaultChecked=!!d,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T),Qv(i)}function Jv(i,a,l){a==="number"&&Ty(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Hu(i,a,l,d){if(i=i.options,a){a={};for(var g=0;g<l.length;g++)a["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=a.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&d&&(i[l].defaultSelected=!0)}else{for(l=""+ps(l),a=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,d&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function cw(i,a,l){if(a!=null&&(a=""+ps(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+ps(l):""}function uw(i,a,l,d){if(a==null){if(d!=null){if(l!=null)throw Error(n(92));if(vt(d)){if(1<d.length)throw Error(n(93));d=d[0]}l=d}l==null&&(l=""),a=l}l=ps(a),i.defaultValue=l,d=i.textContent,d===l&&d!==""&&d!==null&&(i.value=d),Qv(i)}function Vu(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var rB=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hw(i,a,l){var d=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":d?i.setProperty(a,l):typeof l!="number"||l===0||rB.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function dw(i,a,l){if(a!=null&&typeof a!="object")throw Error(n(62));if(i=i.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var g in a)d=a[g],a.hasOwnProperty(g)&&l[g]!==d&&hw(i,g,d)}else for(var v in a)a.hasOwnProperty(v)&&hw(i,v,a[v])}function tA(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oB=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),lB=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _y(i){return lB.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Za(){}var eA=null;function nA(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var zu=null,ju=null;function fw(i){var a=ku(i);if(a&&(i=a.stateNode)){var l=i[fi]||null;t:switch(i=a.stateNode,a.type){case"input":if(Zv(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+ms(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var d=l[a];if(d!==i&&d.form===i.form){var g=d[fi]||null;if(!g)throw Error(n(90));Zv(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<l.length;a++)d=l[a],d.form===i.form&&ow(d)}break t;case"textarea":cw(i,l.value,l.defaultValue);break t;case"select":a=l.value,a!=null&&Hu(i,!!l.multiple,a,!1)}}}var iA=!1;function pw(i,a,l){if(iA)return i(a,l);iA=!0;try{var d=i(a);return d}finally{if(iA=!1,(zu!==null||ju!==null)&&(h0(),zu&&(a=zu,i=ju,ju=zu=null,fw(a),i)))for(a=0;a<i.length;a++)fw(i[a])}}function Of(i,a){var l=i.stateNode;if(l===null)return null;var d=l[fi]||null;if(d===null)return null;l=d[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break t;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(n(231,a,typeof l));return l}var Ja=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sA=!1;if(Ja)try{var Nf={};Object.defineProperty(Nf,"passive",{get:function(){sA=!0}}),window.addEventListener("test",Nf,Nf),window.removeEventListener("test",Nf,Nf)}catch{sA=!1}var po=null,aA=null,wy=null;function mw(){if(wy)return wy;var i,a=aA,l=a.length,d,g="value"in po?po.value:po.textContent,v=g.length;for(i=0;i<l&&a[i]===g[i];i++);var T=l-i;for(d=1;d<=T&&a[l-d]===g[v-d];d++);return wy=g.slice(i,1<d?1-d:void 0)}function xy(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Cy(){return!0}function gw(){return!1}function pi(i){function a(l,d,g,v,T){this._reactName=l,this._targetInst=g,this.type=d,this.nativeEvent=v,this.target=T,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(l=i[R],this[R]=l?l(v):v[R]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Cy:gw,this.isPropagationStopped=gw,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Cy)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Cy)},persist:function(){},isPersistent:Cy}),a}var Gl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dy=pi(Gl),Lf=y({},Gl,{view:0,detail:0}),cB=pi(Lf),rA,oA,If,My=y({},Lf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cA,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==If&&(If&&i.type==="mousemove"?(rA=i.screenX-If.screenX,oA=i.screenY-If.screenY):oA=rA=0,If=i),rA)},movementY:function(i){return"movementY"in i?i.movementY:oA}}),yw=pi(My),uB=y({},My,{dataTransfer:0}),hB=pi(uB),dB=y({},Lf,{relatedTarget:0}),lA=pi(dB),fB=y({},Gl,{animationName:0,elapsedTime:0,pseudoElement:0}),pB=pi(fB),mB=y({},Gl,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),gB=pi(mB),yB=y({},Gl,{data:0}),bw=pi(yB),bB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EB(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=AB[i])?!!a[i]:!1}function cA(){return EB}var SB=y({},Lf,{key:function(i){if(i.key){var a=bB[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=xy(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?vB[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cA,charCode:function(i){return i.type==="keypress"?xy(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?xy(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),TB=pi(SB),_B=y({},My,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vw=pi(_B),wB=y({},Lf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cA}),xB=pi(wB),CB=y({},Gl,{propertyName:0,elapsedTime:0,pseudoElement:0}),DB=pi(CB),MB=y({},My,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),RB=pi(MB),OB=y({},Gl,{newState:0,oldState:0}),NB=pi(OB),LB=[9,13,27,32],uA=Ja&&"CompositionEvent"in window,Pf=null;Ja&&"documentMode"in document&&(Pf=document.documentMode);var IB=Ja&&"TextEvent"in window&&!Pf,Aw=Ja&&(!uA||Pf&&8<Pf&&11>=Pf),Ew=" ",Sw=!1;function Tw(i,a){switch(i){case"keyup":return LB.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _w(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Gu=!1;function PB(i,a){switch(i){case"compositionend":return _w(a);case"keypress":return a.which!==32?null:(Sw=!0,Ew);case"textInput":return i=a.data,i===Ew&&Sw?null:i;default:return null}}function BB(i,a){if(Gu)return i==="compositionend"||!uA&&Tw(i,a)?(i=mw(),wy=aA=po=null,Gu=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Aw&&a.locale!=="ko"?null:a.data;default:return null}}var kB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ww(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!kB[i.type]:a==="textarea"}function xw(i,a,l,d){zu?ju?ju.push(d):ju=[d]:zu=d,a=b0(a,"onChange"),0<a.length&&(l=new Dy("onChange","change",null,l,d),i.push({event:l,listeners:a}))}var Bf=null,kf=null;function UB(i){lD(i,0)}function Ry(i){var a=Rf(i);if(ow(a))return i}function Cw(i,a){if(i==="change")return a}var Dw=!1;if(Ja){var hA;if(Ja){var dA="oninput"in document;if(!dA){var Mw=document.createElement("div");Mw.setAttribute("oninput","return;"),dA=typeof Mw.oninput=="function"}hA=dA}else hA=!1;Dw=hA&&(!document.documentMode||9<document.documentMode)}function Rw(){Bf&&(Bf.detachEvent("onpropertychange",Ow),kf=Bf=null)}function Ow(i){if(i.propertyName==="value"&&Ry(kf)){var a=[];xw(a,kf,i,nA(i)),pw(UB,a)}}function FB(i,a,l){i==="focusin"?(Rw(),Bf=a,kf=l,Bf.attachEvent("onpropertychange",Ow)):i==="focusout"&&Rw()}function HB(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ry(kf)}function VB(i,a){if(i==="click")return Ry(a)}function zB(i,a){if(i==="input"||i==="change")return Ry(a)}function jB(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Bi=typeof Object.is=="function"?Object.is:jB;function Uf(i,a){if(Bi(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),d=Object.keys(a);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var g=l[d];if(!_f.call(a,g)||!Bi(i[g],a[g]))return!1}return!0}function Nw(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Lw(i,a){var l=Nw(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=a&&d>=a)return{node:l,offset:a-i};i=d}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=Nw(l)}}function Iw(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Iw(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Pw(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=Ty(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=Ty(i.document)}return a}function fA(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var GB=Ja&&"documentMode"in document&&11>=document.documentMode,Yu=null,pA=null,Ff=null,mA=!1;function Bw(i,a,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;mA||Yu==null||Yu!==Ty(d)||(d=Yu,"selectionStart"in d&&fA(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ff&&Uf(Ff,d)||(Ff=d,d=b0(pA,"onSelect"),0<d.length&&(a=new Dy("onSelect","select",null,a,l),i.push({event:a,listeners:d}),a.target=Yu)))}function Yl(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var Xu={animationend:Yl("Animation","AnimationEnd"),animationiteration:Yl("Animation","AnimationIteration"),animationstart:Yl("Animation","AnimationStart"),transitionrun:Yl("Transition","TransitionRun"),transitionstart:Yl("Transition","TransitionStart"),transitioncancel:Yl("Transition","TransitionCancel"),transitionend:Yl("Transition","TransitionEnd")},gA={},kw={};Ja&&(kw=document.createElement("div").style,"AnimationEvent"in window||(delete Xu.animationend.animation,delete Xu.animationiteration.animation,delete Xu.animationstart.animation),"TransitionEvent"in window||delete Xu.transitionend.transition);function Xl(i){if(gA[i])return gA[i];if(!Xu[i])return i;var a=Xu[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in kw)return gA[i]=a[l];return i}var Uw=Xl("animationend"),Fw=Xl("animationiteration"),Hw=Xl("animationstart"),YB=Xl("transitionrun"),XB=Xl("transitionstart"),qB=Xl("transitioncancel"),Vw=Xl("transitionend"),zw=new Map,yA="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yA.push("scrollEnd");function Xs(i,a){zw.set(i,a),jl(a,[i])}var Oy=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},gs=[],qu=0,bA=0;function Ny(){for(var i=qu,a=bA=qu=0;a<i;){var l=gs[a];gs[a++]=null;var d=gs[a];gs[a++]=null;var g=gs[a];gs[a++]=null;var v=gs[a];if(gs[a++]=null,d!==null&&g!==null){var T=d.pending;T===null?g.next=g:(g.next=T.next,T.next=g),d.pending=g}v!==0&&jw(l,g,v)}}function Ly(i,a,l,d){gs[qu++]=i,gs[qu++]=a,gs[qu++]=l,gs[qu++]=d,bA|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function vA(i,a,l,d){return Ly(i,a,l,d),Iy(i)}function ql(i,a){return Ly(i,null,null,a),Iy(i)}function jw(i,a,l){i.lanes|=l;var d=i.alternate;d!==null&&(d.lanes|=l);for(var g=!1,v=i.return;v!==null;)v.childLanes|=l,d=v.alternate,d!==null&&(d.childLanes|=l),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(g=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,g&&a!==null&&(g=31-Pi(l),i=v.hiddenUpdates,d=i[g],d===null?i[g]=[a]:d.push(a),a.lane=l|536870912),v):null}function Iy(i){if(50<op)throw op=0,DE=null,Error(n(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var Ku={};function KB(i,a,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ki(i,a,l,d){return new KB(i,a,l,d)}function AA(i){return i=i.prototype,!(!i||!i.isReactComponent)}function tr(i,a){var l=i.alternate;return l===null?(l=ki(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function Gw(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Py(i,a,l,d,g,v){var T=0;if(d=i,typeof i=="function")AA(i)&&(T=1);else if(typeof i=="string")T=Jk(i,l,at.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case W:return i=ki(31,l,a,g),i.elementType=W,i.lanes=v,i;case w:return Kl(l.children,g,v,a);case x:T=8,g|=24;break;case C:return i=ki(12,l,a,g|2),i.elementType=C,i.lanes=v,i;case L:return i=ki(13,l,a,g),i.elementType=L,i.lanes=v,i;case I:return i=ki(19,l,a,g),i.elementType=I,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case M:T=10;break t;case O:T=9;break t;case N:T=11;break t;case k:T=14;break t;case j:T=16,d=null;break t}T=29,l=Error(n(130,i===null?"null":typeof i,"")),d=null}return a=ki(T,l,a,g),a.elementType=i,a.type=d,a.lanes=v,a}function Kl(i,a,l,d){return i=ki(7,i,d,a),i.lanes=l,i}function EA(i,a,l){return i=ki(6,i,null,a),i.lanes=l,i}function Yw(i){var a=ki(18,null,null,0);return a.stateNode=i,a}function SA(i,a,l){return a=ki(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var Xw=new WeakMap;function ys(i,a){if(typeof i=="object"&&i!==null){var l=Xw.get(i);return l!==void 0?l:(a={value:i,source:a,stack:Gv(a)},Xw.set(i,a),a)}return{value:i,source:a,stack:Gv(a)}}var $u=[],Wu=0,By=null,Hf=0,bs=[],vs=0,mo=null,ma=1,ga="";function er(i,a){$u[Wu++]=Hf,$u[Wu++]=By,By=i,Hf=a}function qw(i,a,l){bs[vs++]=ma,bs[vs++]=ga,bs[vs++]=mo,mo=i;var d=ma;i=ga;var g=32-Pi(d)-1;d&=~(1<<g),l+=1;var v=32-Pi(a)+g;if(30<v){var T=g-g%5;v=(d&(1<<T)-1).toString(32),d>>=T,g-=T,ma=1<<32-Pi(a)+g|l<<g|d,ga=v+i}else ma=1<<v|l<<g|d,ga=i}function TA(i){i.return!==null&&(er(i,1),qw(i,1,0))}function _A(i){for(;i===By;)By=$u[--Wu],$u[Wu]=null,Hf=$u[--Wu],$u[Wu]=null;for(;i===mo;)mo=bs[--vs],bs[vs]=null,ga=bs[--vs],bs[vs]=null,ma=bs[--vs],bs[vs]=null}function Kw(i,a){bs[vs++]=ma,bs[vs++]=ga,bs[vs++]=mo,ma=a.id,ga=a.overflow,mo=i}var Cn=null,we=null,Yt=!1,go=null,As=!1,wA=Error(n(519));function yo(i){var a=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Vf(ys(a,i)),wA}function $w(i){var a=i.stateNode,l=i.type,d=i.memoizedProps;switch(a[xn]=i,a[fi]=d,l){case"dialog":Vt("cancel",a),Vt("close",a);break;case"iframe":case"object":case"embed":Vt("load",a);break;case"video":case"audio":for(l=0;l<cp.length;l++)Vt(cp[l],a);break;case"source":Vt("error",a);break;case"img":case"image":case"link":Vt("error",a),Vt("load",a);break;case"details":Vt("toggle",a);break;case"input":Vt("invalid",a),lw(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Vt("invalid",a);break;case"textarea":Vt("invalid",a),uw(a,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||d.suppressHydrationWarning===!0||dD(a.textContent,l)?(d.popover!=null&&(Vt("beforetoggle",a),Vt("toggle",a)),d.onScroll!=null&&Vt("scroll",a),d.onScrollEnd!=null&&Vt("scrollend",a),d.onClick!=null&&(a.onclick=Za),a=!0):a=!1,a||yo(i,!0)}function Ww(i){for(Cn=i.return;Cn;)switch(Cn.tag){case 5:case 31:case 13:As=!1;return;case 27:case 3:As=!0;return;default:Cn=Cn.return}}function Qu(i){if(i!==Cn)return!1;if(!Yt)return Ww(i),Yt=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||jE(i.type,i.memoizedProps)),l=!l),l&&we&&yo(i),Ww(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));we=ED(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));we=ED(i)}else a===27?(a=we,Oo(i.type)?(i=KE,KE=null,we=i):we=a):we=Cn?Ss(i.stateNode.nextSibling):null;return!0}function $l(){we=Cn=null,Yt=!1}function xA(){var i=go;return i!==null&&(bi===null?bi=i:bi.push.apply(bi,i),go=null),i}function Vf(i){go===null?go=[i]:go.push(i)}var CA=B(null),Wl=null,nr=null;function bo(i,a,l){tt(CA,a._currentValue),a._currentValue=l}function ir(i){i._currentValue=CA.current,q(CA)}function DA(i,a,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),i===l)break;i=i.return}}function MA(i,a,l,d){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var v=g.dependencies;if(v!==null){var T=g.child;v=v.firstContext;t:for(;v!==null;){var R=v;v=g;for(var P=0;P<a.length;P++)if(R.context===a[P]){v.lanes|=l,R=v.alternate,R!==null&&(R.lanes|=l),DA(v.return,l,i),d||(T=null);break t}v=R.next}}else if(g.tag===18){if(T=g.return,T===null)throw Error(n(341));T.lanes|=l,v=T.alternate,v!==null&&(v.lanes|=l),DA(T,l,i),T=null}else T=g.child;if(T!==null)T.return=g;else for(T=g;T!==null;){if(T===i){T=null;break}if(g=T.sibling,g!==null){g.return=T.return,T=g;break}T=T.return}g=T}}function Zu(i,a,l,d){i=null;for(var g=a,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var T=g.alternate;if(T===null)throw Error(n(387));if(T=T.memoizedProps,T!==null){var R=g.type;Bi(g.pendingProps.value,T.value)||(i!==null?i.push(R):i=[R])}}else if(g===Et.current){if(T=g.alternate,T===null)throw Error(n(387));T.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(pp):i=[pp])}g=g.return}i!==null&&MA(a,i,l,d),a.flags|=262144}function ky(i){for(i=i.firstContext;i!==null;){if(!Bi(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ql(i){Wl=i,nr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Dn(i){return Qw(Wl,i)}function Uy(i,a){return Wl===null&&Ql(i),Qw(i,a)}function Qw(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},nr===null){if(i===null)throw Error(n(308));nr=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else nr=nr.next=a;return l}var $B=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,d){i.push(d)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},WB=s.unstable_scheduleCallback,QB=s.unstable_NormalPriority,Je={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function RA(){return{controller:new $B,data:new Map,refCount:0}}function zf(i){i.refCount--,i.refCount===0&&WB(QB,function(){i.controller.abort()})}var jf=null,OA=0,Ju=0,th=null;function ZB(i,a){if(jf===null){var l=jf=[];OA=0,Ju=IE(),th={status:"pending",value:void 0,then:function(d){l.push(d)}}}return OA++,a.then(Zw,Zw),a}function Zw(){if(--OA===0&&jf!==null){th!==null&&(th.status="fulfilled");var i=jf;jf=null,Ju=0,th=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function JB(i,a){var l=[],d={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return i.then(function(){d.status="fulfilled",d.value=a;for(var g=0;g<l.length;g++)(0,l[g])(a)},function(g){for(d.status="rejected",d.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),d}var Jw=F.S;F.S=function(i,a){BC=Li(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&ZB(i,a),Jw!==null&&Jw(i,a)};var Zl=B(null);function NA(){var i=Zl.current;return i!==null?i:be.pooledCache}function Fy(i,a){a===null?tt(Zl,Zl.current):tt(Zl,a.pool)}function tx(){var i=NA();return i===null?null:{parent:Je._currentValue,pool:i}}var eh=Error(n(460)),LA=Error(n(474)),Hy=Error(n(542)),Vy={then:function(){}};function ex(i){return i=i.status,i==="fulfilled"||i==="rejected"}function nx(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(Za,Za),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,sx(i),i;default:if(typeof a.status=="string")a.then(Za,Za);else{if(i=be,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=a,i.status="pending",i.then(function(d){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=d}},function(d){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,sx(i),i}throw tc=a,eh}}function Jl(i){try{var a=i._init;return a(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(tc=l,eh):l}}var tc=null;function ix(){if(tc===null)throw Error(n(459));var i=tc;return tc=null,i}function sx(i){if(i===eh||i===Hy)throw Error(n(483))}var nh=null,Gf=0;function zy(i){var a=Gf;return Gf+=1,nh===null&&(nh=[]),nx(nh,i,a)}function Yf(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function jy(i,a){throw a.$$typeof===b?Error(n(525)):(i=Object.prototype.toString.call(a),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function ax(i){function a(H,U){if(i){var V=H.deletions;V===null?(H.deletions=[U],H.flags|=16):V.push(U)}}function l(H,U){if(!i)return null;for(;U!==null;)a(H,U),U=U.sibling;return null}function d(H){for(var U=new Map;H!==null;)H.key!==null?U.set(H.key,H):U.set(H.index,H),H=H.sibling;return U}function g(H,U){return H=tr(H,U),H.index=0,H.sibling=null,H}function v(H,U,V){return H.index=V,i?(V=H.alternate,V!==null?(V=V.index,V<U?(H.flags|=67108866,U):V):(H.flags|=67108866,U)):(H.flags|=1048576,U)}function T(H){return i&&H.alternate===null&&(H.flags|=67108866),H}function R(H,U,V,Z){return U===null||U.tag!==6?(U=EA(V,H.mode,Z),U.return=H,U):(U=g(U,V),U.return=H,U)}function P(H,U,V,Z){var St=V.type;return St===w?Q(H,U,V.props.children,Z,V.key):U!==null&&(U.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===j&&Jl(St)===U.type)?(U=g(U,V.props),Yf(U,V),U.return=H,U):(U=Py(V.type,V.key,V.props,null,H.mode,Z),Yf(U,V),U.return=H,U)}function z(H,U,V,Z){return U===null||U.tag!==4||U.stateNode.containerInfo!==V.containerInfo||U.stateNode.implementation!==V.implementation?(U=SA(V,H.mode,Z),U.return=H,U):(U=g(U,V.children||[]),U.return=H,U)}function Q(H,U,V,Z,St){return U===null||U.tag!==7?(U=Kl(V,H.mode,Z,St),U.return=H,U):(U=g(U,V),U.return=H,U)}function J(H,U,V){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=EA(""+U,H.mode,V),U.return=H,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case A:return V=Py(U.type,U.key,U.props,null,H.mode,V),Yf(V,U),V.return=H,V;case S:return U=SA(U,H.mode,V),U.return=H,U;case j:return U=Jl(U),J(H,U,V)}if(vt(U)||ht(U))return U=Kl(U,H.mode,V,null),U.return=H,U;if(typeof U.then=="function")return J(H,zy(U),V);if(U.$$typeof===M)return J(H,Uy(H,U),V);jy(H,U)}return null}function G(H,U,V,Z){var St=U!==null?U.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return St!==null?null:R(H,U,""+V,Z);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case A:return V.key===St?P(H,U,V,Z):null;case S:return V.key===St?z(H,U,V,Z):null;case j:return V=Jl(V),G(H,U,V,Z)}if(vt(V)||ht(V))return St!==null?null:Q(H,U,V,Z,null);if(typeof V.then=="function")return G(H,U,zy(V),Z);if(V.$$typeof===M)return G(H,U,Uy(H,V),Z);jy(H,V)}return null}function K(H,U,V,Z,St){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return H=H.get(V)||null,R(U,H,""+Z,St);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:return H=H.get(Z.key===null?V:Z.key)||null,P(U,H,Z,St);case S:return H=H.get(Z.key===null?V:Z.key)||null,z(U,H,Z,St);case j:return Z=Jl(Z),K(H,U,V,Z,St)}if(vt(Z)||ht(Z))return H=H.get(V)||null,Q(U,H,Z,St,null);if(typeof Z.then=="function")return K(H,U,V,zy(Z),St);if(Z.$$typeof===M)return K(H,U,V,Uy(U,Z),St);jy(U,Z)}return null}function ft(H,U,V,Z){for(var St=null,Wt=null,yt=U,Pt=U=0,jt=null;yt!==null&&Pt<V.length;Pt++){yt.index>Pt?(jt=yt,yt=null):jt=yt.sibling;var Qt=G(H,yt,V[Pt],Z);if(Qt===null){yt===null&&(yt=jt);break}i&&yt&&Qt.alternate===null&&a(H,yt),U=v(Qt,U,Pt),Wt===null?St=Qt:Wt.sibling=Qt,Wt=Qt,yt=jt}if(Pt===V.length)return l(H,yt),Yt&&er(H,Pt),St;if(yt===null){for(;Pt<V.length;Pt++)yt=J(H,V[Pt],Z),yt!==null&&(U=v(yt,U,Pt),Wt===null?St=yt:Wt.sibling=yt,Wt=yt);return Yt&&er(H,Pt),St}for(yt=d(yt);Pt<V.length;Pt++)jt=K(yt,H,Pt,V[Pt],Z),jt!==null&&(i&&jt.alternate!==null&&yt.delete(jt.key===null?Pt:jt.key),U=v(jt,U,Pt),Wt===null?St=jt:Wt.sibling=jt,Wt=jt);return i&&yt.forEach(function(Bo){return a(H,Bo)}),Yt&&er(H,Pt),St}function _t(H,U,V,Z){if(V==null)throw Error(n(151));for(var St=null,Wt=null,yt=U,Pt=U=0,jt=null,Qt=V.next();yt!==null&&!Qt.done;Pt++,Qt=V.next()){yt.index>Pt?(jt=yt,yt=null):jt=yt.sibling;var Bo=G(H,yt,Qt.value,Z);if(Bo===null){yt===null&&(yt=jt);break}i&&yt&&Bo.alternate===null&&a(H,yt),U=v(Bo,U,Pt),Wt===null?St=Bo:Wt.sibling=Bo,Wt=Bo,yt=jt}if(Qt.done)return l(H,yt),Yt&&er(H,Pt),St;if(yt===null){for(;!Qt.done;Pt++,Qt=V.next())Qt=J(H,Qt.value,Z),Qt!==null&&(U=v(Qt,U,Pt),Wt===null?St=Qt:Wt.sibling=Qt,Wt=Qt);return Yt&&er(H,Pt),St}for(yt=d(yt);!Qt.done;Pt++,Qt=V.next())Qt=K(yt,H,Pt,Qt.value,Z),Qt!==null&&(i&&Qt.alternate!==null&&yt.delete(Qt.key===null?Pt:Qt.key),U=v(Qt,U,Pt),Wt===null?St=Qt:Wt.sibling=Qt,Wt=Qt);return i&&yt.forEach(function(uU){return a(H,uU)}),Yt&&er(H,Pt),St}function he(H,U,V,Z){if(typeof V=="object"&&V!==null&&V.type===w&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case A:t:{for(var St=V.key;U!==null;){if(U.key===St){if(St=V.type,St===w){if(U.tag===7){l(H,U.sibling),Z=g(U,V.props.children),Z.return=H,H=Z;break t}}else if(U.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===j&&Jl(St)===U.type){l(H,U.sibling),Z=g(U,V.props),Yf(Z,V),Z.return=H,H=Z;break t}l(H,U);break}else a(H,U);U=U.sibling}V.type===w?(Z=Kl(V.props.children,H.mode,Z,V.key),Z.return=H,H=Z):(Z=Py(V.type,V.key,V.props,null,H.mode,Z),Yf(Z,V),Z.return=H,H=Z)}return T(H);case S:t:{for(St=V.key;U!==null;){if(U.key===St)if(U.tag===4&&U.stateNode.containerInfo===V.containerInfo&&U.stateNode.implementation===V.implementation){l(H,U.sibling),Z=g(U,V.children||[]),Z.return=H,H=Z;break t}else{l(H,U);break}else a(H,U);U=U.sibling}Z=SA(V,H.mode,Z),Z.return=H,H=Z}return T(H);case j:return V=Jl(V),he(H,U,V,Z)}if(vt(V))return ft(H,U,V,Z);if(ht(V)){if(St=ht(V),typeof St!="function")throw Error(n(150));return V=St.call(V),_t(H,U,V,Z)}if(typeof V.then=="function")return he(H,U,zy(V),Z);if(V.$$typeof===M)return he(H,U,Uy(H,V),Z);jy(H,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,U!==null&&U.tag===6?(l(H,U.sibling),Z=g(U,V),Z.return=H,H=Z):(l(H,U),Z=EA(V,H.mode,Z),Z.return=H,H=Z),T(H)):l(H,U)}return function(H,U,V,Z){try{Gf=0;var St=he(H,U,V,Z);return nh=null,St}catch(yt){if(yt===eh||yt===Hy)throw yt;var Wt=ki(29,yt,null,H.mode);return Wt.lanes=Z,Wt.return=H,Wt}finally{}}}var ec=ax(!0),rx=ax(!1),vo=!1;function IA(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function PA(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ao(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Eo(i,a,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(Zt&2)!==0){var g=d.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),d.pending=a,a=Iy(i),jw(i,null,l),a}return Ly(i,d,a,l),Iy(i)}function Xf(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var d=a.lanes;d&=i.pendingLanes,l|=d,a.lanes=l,Q1(i,l)}}function BA(i,a){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var g=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?g=v=T:v=v.next=T,l=l.next}while(l!==null);v===null?g=v=a:v=v.next=a}else g=v=a;l={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var kA=!1;function qf(){if(kA){var i=th;if(i!==null)throw i}}function Kf(i,a,l,d){kA=!1;var g=i.updateQueue;vo=!1;var v=g.firstBaseUpdate,T=g.lastBaseUpdate,R=g.shared.pending;if(R!==null){g.shared.pending=null;var P=R,z=P.next;P.next=null,T===null?v=z:T.next=z,T=P;var Q=i.alternate;Q!==null&&(Q=Q.updateQueue,R=Q.lastBaseUpdate,R!==T&&(R===null?Q.firstBaseUpdate=z:R.next=z,Q.lastBaseUpdate=P))}if(v!==null){var J=g.baseState;T=0,Q=z=P=null,R=v;do{var G=R.lane&-536870913,K=G!==R.lane;if(K?(zt&G)===G:(d&G)===G){G!==0&&G===Ju&&(kA=!0),Q!==null&&(Q=Q.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});t:{var ft=i,_t=R;G=a;var he=l;switch(_t.tag){case 1:if(ft=_t.payload,typeof ft=="function"){J=ft.call(he,J,G);break t}J=ft;break t;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=_t.payload,G=typeof ft=="function"?ft.call(he,J,G):ft,G==null)break t;J=y({},J,G);break t;case 2:vo=!0}}G=R.callback,G!==null&&(i.flags|=64,K&&(i.flags|=8192),K=g.callbacks,K===null?g.callbacks=[G]:K.push(G))}else K={lane:G,tag:R.tag,payload:R.payload,callback:R.callback,next:null},Q===null?(z=Q=K,P=J):Q=Q.next=K,T|=G;if(R=R.next,R===null){if(R=g.shared.pending,R===null)break;K=R,R=K.next,K.next=null,g.lastBaseUpdate=K,g.shared.pending=null}}while(!0);Q===null&&(P=J),g.baseState=P,g.firstBaseUpdate=z,g.lastBaseUpdate=Q,v===null&&(g.shared.lanes=0),xo|=T,i.lanes=T,i.memoizedState=J}}function ox(i,a){if(typeof i!="function")throw Error(n(191,i));i.call(a)}function lx(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)ox(l[i],a)}var ih=B(null),Gy=B(0);function cx(i,a){i=dr,tt(Gy,i),tt(ih,a),dr=i|a.baseLanes}function UA(){tt(Gy,dr),tt(ih,ih.current)}function FA(){dr=Gy.current,q(ih),q(Gy)}var Ui=B(null),Es=null;function So(i){var a=i.alternate;tt(Ke,Ke.current&1),tt(Ui,i),Es===null&&(a===null||ih.current!==null||a.memoizedState!==null)&&(Es=i)}function HA(i){tt(Ke,Ke.current),tt(Ui,i),Es===null&&(Es=i)}function ux(i){i.tag===22?(tt(Ke,Ke.current),tt(Ui,i),Es===null&&(Es=i)):To()}function To(){tt(Ke,Ke.current),tt(Ui,Ui.current)}function Fi(i){q(Ui),Es===i&&(Es=null),q(Ke)}var Ke=B(0);function Yy(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||XE(l)||qE(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var sr=0,Lt=null,ce=null,tn=null,Xy=!1,sh=!1,nc=!1,qy=0,$f=0,ah=null,tk=0;function Fe(){throw Error(n(321))}function VA(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!Bi(i[l],a[l]))return!1;return!0}function zA(i,a,l,d,g,v){return sr=v,Lt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,F.H=i===null||i.memoizedState===null?qx:iE,nc=!1,v=l(d,g),nc=!1,sh&&(v=dx(a,l,d,g)),hx(i),v}function hx(i){F.H=Zf;var a=ce!==null&&ce.next!==null;if(sr=0,tn=ce=Lt=null,Xy=!1,$f=0,ah=null,a)throw Error(n(300));i===null||en||(i=i.dependencies,i!==null&&ky(i)&&(en=!0))}function dx(i,a,l,d){Lt=i;var g=0;do{if(sh&&(ah=null),$f=0,sh=!1,25<=g)throw Error(n(301));if(g+=1,tn=ce=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}F.H=Kx,v=a(l,d)}while(sh);return v}function ek(){var i=F.H,a=i.useState()[0];return a=typeof a.then=="function"?Wf(a):a,i=i.useState()[0],(ce!==null?ce.memoizedState:null)!==i&&(Lt.flags|=1024),a}function jA(){var i=qy!==0;return qy=0,i}function GA(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function YA(i){if(Xy){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Xy=!1}sr=0,tn=ce=Lt=null,sh=!1,$f=qy=0,ah=null}function Jn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?Lt.memoizedState=tn=i:tn=tn.next=i,tn}function $e(){if(ce===null){var i=Lt.alternate;i=i!==null?i.memoizedState:null}else i=ce.next;var a=tn===null?Lt.memoizedState:tn.next;if(a!==null)tn=a,ce=i;else{if(i===null)throw Lt.alternate===null?Error(n(467)):Error(n(310));ce=i,i={memoizedState:ce.memoizedState,baseState:ce.baseState,baseQueue:ce.baseQueue,queue:ce.queue,next:null},tn===null?Lt.memoizedState=tn=i:tn=tn.next=i}return tn}function Ky(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wf(i){var a=$f;return $f+=1,ah===null&&(ah=[]),i=nx(ah,i,a),a=Lt,(tn===null?a.memoizedState:tn.next)===null&&(a=a.alternate,F.H=a===null||a.memoizedState===null?qx:iE),i}function $y(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Wf(i);if(i.$$typeof===M)return Dn(i)}throw Error(n(438,String(i)))}function XA(i){var a=null,l=Lt.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var d=Lt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Ky(),Lt.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),d=0;d<i;d++)l[d]=nt;return a.index++,l}function ar(i,a){return typeof a=="function"?a(i):a}function Wy(i){var a=$e();return qA(a,ce,i)}function qA(i,a,l){var d=i.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=l;var g=i.baseQueue,v=d.pending;if(v!==null){if(g!==null){var T=g.next;g.next=v.next,v.next=T}a.baseQueue=g=v,d.pending=null}if(v=i.baseState,g===null)i.memoizedState=v;else{a=g.next;var R=T=null,P=null,z=a,Q=!1;do{var J=z.lane&-536870913;if(J!==z.lane?(zt&J)===J:(sr&J)===J){var G=z.revertLane;if(G===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),J===Ju&&(Q=!0);else if((sr&G)===G){z=z.next,G===Ju&&(Q=!0);continue}else J={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},P===null?(R=P=J,T=v):P=P.next=J,Lt.lanes|=G,xo|=G;J=z.action,nc&&l(v,J),v=z.hasEagerState?z.eagerState:l(v,J)}else G={lane:J,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},P===null?(R=P=G,T=v):P=P.next=G,Lt.lanes|=J,xo|=J;z=z.next}while(z!==null&&z!==a);if(P===null?T=v:P.next=R,!Bi(v,i.memoizedState)&&(en=!0,Q&&(l=th,l!==null)))throw l;i.memoizedState=v,i.baseState=T,i.baseQueue=P,d.lastRenderedState=v}return g===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function KA(i){var a=$e(),l=a.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=i;var d=l.dispatch,g=l.pending,v=a.memoizedState;if(g!==null){l.pending=null;var T=g=g.next;do v=i(v,T.action),T=T.next;while(T!==g);Bi(v,a.memoizedState)||(en=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),l.lastRenderedState=v}return[v,d]}function fx(i,a,l){var d=Lt,g=$e(),v=Yt;if(v){if(l===void 0)throw Error(n(407));l=l()}else l=a();var T=!Bi((ce||g).memoizedState,l);if(T&&(g.memoizedState=l,en=!0),g=g.queue,QA(gx.bind(null,d,g,i),[i]),g.getSnapshot!==a||T||tn!==null&&tn.memoizedState.tag&1){if(d.flags|=2048,rh(9,{destroy:void 0},mx.bind(null,d,g,l,a),null),be===null)throw Error(n(349));v||(sr&127)!==0||px(d,a,l)}return l}function px(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=Lt.updateQueue,a===null?(a=Ky(),Lt.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function mx(i,a,l,d){a.value=l,a.getSnapshot=d,yx(a)&&bx(i)}function gx(i,a,l){return l(function(){yx(a)&&bx(i)})}function yx(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!Bi(i,l)}catch{return!0}}function bx(i){var a=ql(i,2);a!==null&&vi(a,i,2)}function $A(i){var a=Jn();if(typeof i=="function"){var l=i;if(i=l(),nc){ho(!0);try{l()}finally{ho(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:i},a}function vx(i,a,l,d){return i.baseState=l,qA(i,ce,typeof d=="function"?d:ar)}function nk(i,a,l,d,g){if(Jy(i))throw Error(n(485));if(i=a.action,i!==null){var v={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){v.listeners.push(T)}};F.T!==null?l(!0):v.isTransition=!1,d(v),l=a.pending,l===null?(v.next=a.pending=v,Ax(a,v)):(v.next=l.next,a.pending=l.next=v)}}function Ax(i,a){var l=a.action,d=a.payload,g=i.state;if(a.isTransition){var v=F.T,T={};F.T=T;try{var R=l(g,d),P=F.S;P!==null&&P(T,R),Ex(i,a,R)}catch(z){WA(i,a,z)}finally{v!==null&&T.types!==null&&(v.types=T.types),F.T=v}}else try{v=l(g,d),Ex(i,a,v)}catch(z){WA(i,a,z)}}function Ex(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){Sx(i,a,d)},function(d){return WA(i,a,d)}):Sx(i,a,l)}function Sx(i,a,l){a.status="fulfilled",a.value=l,Tx(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,Ax(i,l)))}function WA(i,a,l){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=l,Tx(a),a=a.next;while(a!==d)}i.action=null}function Tx(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function _x(i,a){return a}function wx(i,a){if(Yt){var l=be.formState;if(l!==null){t:{var d=Lt;if(Yt){if(we){e:{for(var g=we,v=As;g.nodeType!==8;){if(!v){g=null;break e}if(g=Ss(g.nextSibling),g===null){g=null;break e}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){we=Ss(g.nextSibling),d=g.data==="F!";break t}}yo(d)}d=!1}d&&(a=l[0])}}return l=Jn(),l.memoizedState=l.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_x,lastRenderedState:a},l.queue=d,l=Gx.bind(null,Lt,d),d.dispatch=l,d=$A(!1),v=nE.bind(null,Lt,!1,d.queue),d=Jn(),g={state:a,dispatch:null,action:i,pending:null},d.queue=g,l=nk.bind(null,Lt,g,v,l),g.dispatch=l,d.memoizedState=i,[a,l,!1]}function xx(i){var a=$e();return Cx(a,ce,i)}function Cx(i,a,l){if(a=qA(i,a,_x)[0],i=Wy(ar)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=Wf(a)}catch(T){throw T===eh?Hy:T}else d=a;a=$e();var g=a.queue,v=g.dispatch;return l!==a.memoizedState&&(Lt.flags|=2048,rh(9,{destroy:void 0},ik.bind(null,g,l),null)),[d,v,i]}function ik(i,a){i.action=a}function Dx(i){var a=$e(),l=ce;if(l!==null)return Cx(a,l,i);$e(),a=a.memoizedState,l=$e();var d=l.queue.dispatch;return l.memoizedState=i,[a,d,!1]}function rh(i,a,l,d){return i={tag:i,create:l,deps:d,inst:a,next:null},a=Lt.updateQueue,a===null&&(a=Ky(),Lt.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,a.lastEffect=i),i}function Mx(){return $e().memoizedState}function Qy(i,a,l,d){var g=Jn();Lt.flags|=i,g.memoizedState=rh(1|a,{destroy:void 0},l,d===void 0?null:d)}function Zy(i,a,l,d){var g=$e();d=d===void 0?null:d;var v=g.memoizedState.inst;ce!==null&&d!==null&&VA(d,ce.memoizedState.deps)?g.memoizedState=rh(a,v,l,d):(Lt.flags|=i,g.memoizedState=rh(1|a,v,l,d))}function Rx(i,a){Qy(8390656,8,i,a)}function QA(i,a){Zy(2048,8,i,a)}function sk(i){Lt.flags|=4;var a=Lt.updateQueue;if(a===null)a=Ky(),Lt.updateQueue=a,a.events=[i];else{var l=a.events;l===null?a.events=[i]:l.push(i)}}function Ox(i){var a=$e().memoizedState;return sk({ref:a,nextImpl:i}),function(){if((Zt&2)!==0)throw Error(n(440));return a.impl.apply(void 0,arguments)}}function Nx(i,a){return Zy(4,2,i,a)}function Lx(i,a){return Zy(4,4,i,a)}function Ix(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function Px(i,a,l){l=l!=null?l.concat([i]):null,Zy(4,4,Ix.bind(null,a,i),l)}function ZA(){}function Bx(i,a){var l=$e();a=a===void 0?null:a;var d=l.memoizedState;return a!==null&&VA(a,d[1])?d[0]:(l.memoizedState=[i,a],i)}function kx(i,a){var l=$e();a=a===void 0?null:a;var d=l.memoizedState;if(a!==null&&VA(a,d[1]))return d[0];if(d=i(),nc){ho(!0);try{i()}finally{ho(!1)}}return l.memoizedState=[d,a],d}function JA(i,a,l){return l===void 0||(sr&1073741824)!==0&&(zt&261930)===0?i.memoizedState=a:(i.memoizedState=l,i=UC(),Lt.lanes|=i,xo|=i,l)}function Ux(i,a,l,d){return Bi(l,a)?l:ih.current!==null?(i=JA(i,l,d),Bi(i,a)||(en=!0),i):(sr&42)===0||(sr&1073741824)!==0&&(zt&261930)===0?(en=!0,i.memoizedState=l):(i=UC(),Lt.lanes|=i,xo|=i,a)}function Fx(i,a,l,d,g){var v=X.p;X.p=v!==0&&8>v?v:8;var T=F.T,R={};F.T=R,nE(i,!1,a,l);try{var P=g(),z=F.S;if(z!==null&&z(R,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var Q=JB(P,d);Qf(i,a,Q,zi(i))}else Qf(i,a,d,zi(i))}catch(J){Qf(i,a,{then:function(){},status:"rejected",reason:J},zi())}finally{X.p=v,T!==null&&R.types!==null&&(T.types=R.types),F.T=T}}function ak(){}function tE(i,a,l,d){if(i.tag!==5)throw Error(n(476));var g=Hx(i).queue;Fx(i,g,a,it,l===null?ak:function(){return Vx(i),l(d)})}function Hx(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:it,baseState:it,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:it},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function Vx(i){var a=Hx(i);a.next===null&&(a=i.alternate.memoizedState),Qf(i,a.next.queue,{},zi())}function eE(){return Dn(pp)}function zx(){return $e().memoizedState}function jx(){return $e().memoizedState}function rk(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=zi();i=Ao(l);var d=Eo(a,i,l);d!==null&&(vi(d,a,l),Xf(d,a,l)),a={cache:RA()},i.payload=a;return}a=a.return}}function ok(i,a,l){var d=zi();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Jy(i)?Yx(a,l):(l=vA(i,a,l,d),l!==null&&(vi(l,i,d),Xx(l,a,d)))}function Gx(i,a,l){var d=zi();Qf(i,a,l,d)}function Qf(i,a,l,d){var g={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Jy(i))Yx(a,g);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var T=a.lastRenderedState,R=v(T,l);if(g.hasEagerState=!0,g.eagerState=R,Bi(R,T))return Ly(i,a,g,0),be===null&&Ny(),!1}catch{}finally{}if(l=vA(i,a,g,d),l!==null)return vi(l,i,d),Xx(l,a,d),!0}return!1}function nE(i,a,l,d){if(d={lane:2,revertLane:IE(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Jy(i)){if(a)throw Error(n(479))}else a=vA(i,l,d,2),a!==null&&vi(a,i,2)}function Jy(i){var a=i.alternate;return i===Lt||a!==null&&a===Lt}function Yx(i,a){sh=Xy=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function Xx(i,a,l){if((l&4194048)!==0){var d=a.lanes;d&=i.pendingLanes,l|=d,a.lanes=l,Q1(i,l)}}var Zf={readContext:Dn,use:$y,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useLayoutEffect:Fe,useInsertionEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useSyncExternalStore:Fe,useId:Fe,useHostTransitionStatus:Fe,useFormState:Fe,useActionState:Fe,useOptimistic:Fe,useMemoCache:Fe,useCacheRefresh:Fe};Zf.useEffectEvent=Fe;var qx={readContext:Dn,use:$y,useCallback:function(i,a){return Jn().memoizedState=[i,a===void 0?null:a],i},useContext:Dn,useEffect:Rx,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,Qy(4194308,4,Ix.bind(null,a,i),l)},useLayoutEffect:function(i,a){return Qy(4194308,4,i,a)},useInsertionEffect:function(i,a){Qy(4,2,i,a)},useMemo:function(i,a){var l=Jn();a=a===void 0?null:a;var d=i();if(nc){ho(!0);try{i()}finally{ho(!1)}}return l.memoizedState=[d,a],d},useReducer:function(i,a,l){var d=Jn();if(l!==void 0){var g=l(a);if(nc){ho(!0);try{l(a)}finally{ho(!1)}}}else g=a;return d.memoizedState=d.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},d.queue=i,i=i.dispatch=ok.bind(null,Lt,i),[d.memoizedState,i]},useRef:function(i){var a=Jn();return i={current:i},a.memoizedState=i},useState:function(i){i=$A(i);var a=i.queue,l=Gx.bind(null,Lt,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:ZA,useDeferredValue:function(i,a){var l=Jn();return JA(l,i,a)},useTransition:function(){var i=$A(!1);return i=Fx.bind(null,Lt,i.queue,!0,!1),Jn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var d=Lt,g=Jn();if(Yt){if(l===void 0)throw Error(n(407));l=l()}else{if(l=a(),be===null)throw Error(n(349));(zt&127)!==0||px(d,a,l)}g.memoizedState=l;var v={value:l,getSnapshot:a};return g.queue=v,Rx(gx.bind(null,d,v,i),[i]),d.flags|=2048,rh(9,{destroy:void 0},mx.bind(null,d,v,l,a),null),l},useId:function(){var i=Jn(),a=be.identifierPrefix;if(Yt){var l=ga,d=ma;l=(d&~(1<<32-Pi(d)-1)).toString(32)+l,a="_"+a+"R_"+l,l=qy++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=tk++,a="_"+a+"r_"+l.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:eE,useFormState:wx,useActionState:wx,useOptimistic:function(i){var a=Jn();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=nE.bind(null,Lt,!0,l),l.dispatch=a,[i,a]},useMemoCache:XA,useCacheRefresh:function(){return Jn().memoizedState=rk.bind(null,Lt)},useEffectEvent:function(i){var a=Jn(),l={impl:i};return a.memoizedState=l,function(){if((Zt&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}},iE={readContext:Dn,use:$y,useCallback:Bx,useContext:Dn,useEffect:QA,useImperativeHandle:Px,useInsertionEffect:Nx,useLayoutEffect:Lx,useMemo:kx,useReducer:Wy,useRef:Mx,useState:function(){return Wy(ar)},useDebugValue:ZA,useDeferredValue:function(i,a){var l=$e();return Ux(l,ce.memoizedState,i,a)},useTransition:function(){var i=Wy(ar)[0],a=$e().memoizedState;return[typeof i=="boolean"?i:Wf(i),a]},useSyncExternalStore:fx,useId:zx,useHostTransitionStatus:eE,useFormState:xx,useActionState:xx,useOptimistic:function(i,a){var l=$e();return vx(l,ce,i,a)},useMemoCache:XA,useCacheRefresh:jx};iE.useEffectEvent=Ox;var Kx={readContext:Dn,use:$y,useCallback:Bx,useContext:Dn,useEffect:QA,useImperativeHandle:Px,useInsertionEffect:Nx,useLayoutEffect:Lx,useMemo:kx,useReducer:KA,useRef:Mx,useState:function(){return KA(ar)},useDebugValue:ZA,useDeferredValue:function(i,a){var l=$e();return ce===null?JA(l,i,a):Ux(l,ce.memoizedState,i,a)},useTransition:function(){var i=KA(ar)[0],a=$e().memoizedState;return[typeof i=="boolean"?i:Wf(i),a]},useSyncExternalStore:fx,useId:zx,useHostTransitionStatus:eE,useFormState:Dx,useActionState:Dx,useOptimistic:function(i,a){var l=$e();return ce!==null?vx(l,ce,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:XA,useCacheRefresh:jx};Kx.useEffectEvent=Ox;function sE(i,a,l,d){a=i.memoizedState,l=l(d,a),l=l==null?a:y({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var aE={enqueueSetState:function(i,a,l){i=i._reactInternals;var d=zi(),g=Ao(d);g.payload=a,l!=null&&(g.callback=l),a=Eo(i,g,d),a!==null&&(vi(a,i,d),Xf(a,i,d))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var d=zi(),g=Ao(d);g.tag=1,g.payload=a,l!=null&&(g.callback=l),a=Eo(i,g,d),a!==null&&(vi(a,i,d),Xf(a,i,d))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=zi(),d=Ao(l);d.tag=2,a!=null&&(d.callback=a),a=Eo(i,d,l),a!==null&&(vi(a,i,l),Xf(a,i,l))}};function $x(i,a,l,d,g,v,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,v,T):a.prototype&&a.prototype.isPureReactComponent?!Uf(l,d)||!Uf(g,v):!0}function Wx(i,a,l,d){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,d),a.state!==i&&aE.enqueueReplaceState(a,a.state,null)}function ic(i,a){var l=a;if("ref"in a){l={};for(var d in a)d!=="ref"&&(l[d]=a[d])}if(i=i.defaultProps){l===a&&(l=y({},l));for(var g in i)l[g]===void 0&&(l[g]=i[g])}return l}function Qx(i){Oy(i)}function Zx(i){console.error(i)}function Jx(i){Oy(i)}function t0(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function tC(i,a,l){try{var d=i.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function rE(i,a,l){return l=Ao(l),l.tag=3,l.payload={element:null},l.callback=function(){t0(i,a)},l}function eC(i){return i=Ao(i),i.tag=3,i}function nC(i,a,l,d){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var v=d.value;i.payload=function(){return g(v)},i.callback=function(){tC(a,l,d)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){tC(a,l,d),typeof g!="function"&&(Co===null?Co=new Set([this]):Co.add(this));var R=d.stack;this.componentDidCatch(d.value,{componentStack:R!==null?R:""})})}function lk(i,a,l,d,g){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=l.alternate,a!==null&&Zu(a,l,g,!0),l=Ui.current,l!==null){switch(l.tag){case 31:case 13:return Es===null?d0():l.alternate===null&&He===0&&(He=3),l.flags&=-257,l.flags|=65536,l.lanes=g,d===Vy?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([d]):a.add(d),OE(i,d,g)),!1;case 22:return l.flags|=65536,d===Vy?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([d]):l.add(d)),OE(i,d,g)),!1}throw Error(n(435,l.tag))}return OE(i,d,g),d0(),!1}if(Yt)return a=Ui.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,d!==wA&&(i=Error(n(422),{cause:d}),Vf(ys(i,l)))):(d!==wA&&(a=Error(n(423),{cause:d}),Vf(ys(a,l))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,d=ys(d,l),g=rE(i.stateNode,d,g),BA(i,g),He!==4&&(He=2)),!1;var v=Error(n(520),{cause:d});if(v=ys(v,l),rp===null?rp=[v]:rp.push(v),He!==4&&(He=2),a===null)return!0;d=ys(d,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=g&-g,l.lanes|=i,i=rE(l.stateNode,d,i),BA(l,i),!1;case 1:if(a=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Co===null||!Co.has(v))))return l.flags|=65536,g&=-g,l.lanes|=g,g=eC(g),nC(g,i,l,d),BA(l,g),!1}l=l.return}while(l!==null);return!1}var oE=Error(n(461)),en=!1;function Mn(i,a,l,d){a.child=i===null?rx(a,null,l,d):ec(a,i.child,l,d)}function iC(i,a,l,d,g){l=l.render;var v=a.ref;if("ref"in d){var T={};for(var R in d)R!=="ref"&&(T[R]=d[R])}else T=d;return Ql(a),d=zA(i,a,l,T,v,g),R=jA(),i!==null&&!en?(GA(i,a,g),rr(i,a,g)):(Yt&&R&&TA(a),a.flags|=1,Mn(i,a,d,g),a.child)}function sC(i,a,l,d,g){if(i===null){var v=l.type;return typeof v=="function"&&!AA(v)&&v.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=v,aC(i,a,v,d,g)):(i=Py(l.type,null,d,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(v=i.child,!mE(i,g)){var T=v.memoizedProps;if(l=l.compare,l=l!==null?l:Uf,l(T,d)&&i.ref===a.ref)return rr(i,a,g)}return a.flags|=1,i=tr(v,d),i.ref=a.ref,i.return=a,a.child=i}function aC(i,a,l,d,g){if(i!==null){var v=i.memoizedProps;if(Uf(v,d)&&i.ref===a.ref)if(en=!1,a.pendingProps=d=v,mE(i,g))(i.flags&131072)!==0&&(en=!0);else return a.lanes=i.lanes,rr(i,a,g)}return lE(i,a,l,d,g)}function rC(i,a,l,d){var g=d.children,v=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((a.flags&128)!==0){if(v=v!==null?v.baseLanes|l:l,i!==null){for(d=a.child=i.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;d=g&~v}else d=0,a.child=null;return oC(i,a,v,l,d)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Fy(a,v!==null?v.cachePool:null),v!==null?cx(a,v):UA(),ux(a);else return d=a.lanes=536870912,oC(i,a,v!==null?v.baseLanes|l:l,l,d)}else v!==null?(Fy(a,v.cachePool),cx(a,v),To(),a.memoizedState=null):(i!==null&&Fy(a,null),UA(),To());return Mn(i,a,g,l),a.child}function Jf(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function oC(i,a,l,d,g){var v=NA();return v=v===null?null:{parent:Je._currentValue,pool:v},a.memoizedState={baseLanes:l,cachePool:v},i!==null&&Fy(a,null),UA(),ux(a),i!==null&&Zu(i,a,d,!0),a.childLanes=g,null}function e0(i,a){return a=i0({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function lC(i,a,l){return ec(a,i.child,null,l),i=e0(a,a.pendingProps),i.flags|=2,Fi(a),a.memoizedState=null,i}function ck(i,a,l){var d=a.pendingProps,g=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(Yt){if(d.mode==="hidden")return i=e0(a,d),a.lanes=536870912,Jf(null,i);if(HA(a),(i=we)?(i=AD(i,As),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:mo!==null?{id:ma,overflow:ga}:null,retryLane:536870912,hydrationErrors:null},l=Yw(i),l.return=a,a.child=l,Cn=a,we=null)):i=null,i===null)throw yo(a);return a.lanes=536870912,null}return e0(a,d)}var v=i.memoizedState;if(v!==null){var T=v.dehydrated;if(HA(a),g)if(a.flags&256)a.flags&=-257,a=lC(i,a,l);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(n(558));else if(en||Zu(i,a,l,!1),g=(l&i.childLanes)!==0,en||g){if(d=be,d!==null&&(T=Z1(d,l),T!==0&&T!==v.retryLane))throw v.retryLane=T,ql(i,T),vi(d,i,T),oE;d0(),a=lC(i,a,l)}else i=v.treeContext,we=Ss(T.nextSibling),Cn=a,Yt=!0,go=null,As=!1,i!==null&&Kw(a,i),a=e0(a,d),a.flags|=4096;return a}return i=tr(i.child,{mode:d.mode,children:d.children}),i.ref=a.ref,a.child=i,i.return=a,i}function n0(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function lE(i,a,l,d,g){return Ql(a),l=zA(i,a,l,d,void 0,g),d=jA(),i!==null&&!en?(GA(i,a,g),rr(i,a,g)):(Yt&&d&&TA(a),a.flags|=1,Mn(i,a,l,g),a.child)}function cC(i,a,l,d,g,v){return Ql(a),a.updateQueue=null,l=dx(a,d,l,g),hx(i),d=jA(),i!==null&&!en?(GA(i,a,v),rr(i,a,v)):(Yt&&d&&TA(a),a.flags|=1,Mn(i,a,l,v),a.child)}function uC(i,a,l,d,g){if(Ql(a),a.stateNode===null){var v=Ku,T=l.contextType;typeof T=="object"&&T!==null&&(v=Dn(T)),v=new l(d,v),a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=aE,a.stateNode=v,v._reactInternals=a,v=a.stateNode,v.props=d,v.state=a.memoizedState,v.refs={},IA(a),T=l.contextType,v.context=typeof T=="object"&&T!==null?Dn(T):Ku,v.state=a.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(sE(a,l,T,d),v.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(T=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),T!==v.state&&aE.enqueueReplaceState(v,v.state,null),Kf(a,d,v,g),qf(),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(i===null){v=a.stateNode;var R=a.memoizedProps,P=ic(l,R);v.props=P;var z=v.context,Q=l.contextType;T=Ku,typeof Q=="object"&&Q!==null&&(T=Dn(Q));var J=l.getDerivedStateFromProps;Q=typeof J=="function"||typeof v.getSnapshotBeforeUpdate=="function",R=a.pendingProps!==R,Q||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R||z!==T)&&Wx(a,v,d,T),vo=!1;var G=a.memoizedState;v.state=G,Kf(a,d,v,g),qf(),z=a.memoizedState,R||G!==z||vo?(typeof J=="function"&&(sE(a,l,J,d),z=a.memoizedState),(P=vo||$x(a,l,P,d,G,z,T))?(Q||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(a.flags|=4194308)):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=z),v.props=d,v.state=z,v.context=T,d=P):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{v=a.stateNode,PA(i,a),T=a.memoizedProps,Q=ic(l,T),v.props=Q,J=a.pendingProps,G=v.context,z=l.contextType,P=Ku,typeof z=="object"&&z!==null&&(P=Dn(z)),R=l.getDerivedStateFromProps,(z=typeof R=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(T!==J||G!==P)&&Wx(a,v,d,P),vo=!1,G=a.memoizedState,v.state=G,Kf(a,d,v,g),qf();var K=a.memoizedState;T!==J||G!==K||vo||i!==null&&i.dependencies!==null&&ky(i.dependencies)?(typeof R=="function"&&(sE(a,l,R,d),K=a.memoizedState),(Q=vo||$x(a,l,Q,d,G,K,P)||i!==null&&i.dependencies!==null&&ky(i.dependencies))?(z||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,K,P),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,K,P)),typeof v.componentDidUpdate=="function"&&(a.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof v.componentDidUpdate!="function"||T===i.memoizedProps&&G===i.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&G===i.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=K),v.props=d,v.state=K,v.context=P,d=Q):(typeof v.componentDidUpdate!="function"||T===i.memoizedProps&&G===i.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&G===i.memoizedState||(a.flags|=1024),d=!1)}return v=d,n0(i,a),d=(a.flags&128)!==0,v||d?(v=a.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:v.render(),a.flags|=1,i!==null&&d?(a.child=ec(a,i.child,null,g),a.child=ec(a,null,l,g)):Mn(i,a,l,g),a.memoizedState=v.state,i=a.child):i=rr(i,a,g),i}function hC(i,a,l,d){return $l(),a.flags|=256,Mn(i,a,l,d),a.child}var cE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uE(i){return{baseLanes:i,cachePool:tx()}}function hE(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=Vi),i}function dC(i,a,l){var d=a.pendingProps,g=!1,v=(a.flags&128)!==0,T;if((T=v)||(T=i!==null&&i.memoizedState===null?!1:(Ke.current&2)!==0),T&&(g=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,i===null){if(Yt){if(g?So(a):To(),(i=we)?(i=AD(i,As),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:mo!==null?{id:ma,overflow:ga}:null,retryLane:536870912,hydrationErrors:null},l=Yw(i),l.return=a,a.child=l,Cn=a,we=null)):i=null,i===null)throw yo(a);return qE(i)?a.lanes=32:a.lanes=536870912,null}var R=d.children;return d=d.fallback,g?(To(),g=a.mode,R=i0({mode:"hidden",children:R},g),d=Kl(d,g,l,null),R.return=a,d.return=a,R.sibling=d,a.child=R,d=a.child,d.memoizedState=uE(l),d.childLanes=hE(i,T,l),a.memoizedState=cE,Jf(null,d)):(So(a),dE(a,R))}var P=i.memoizedState;if(P!==null&&(R=P.dehydrated,R!==null)){if(v)a.flags&256?(So(a),a.flags&=-257,a=fE(i,a,l)):a.memoizedState!==null?(To(),a.child=i.child,a.flags|=128,a=null):(To(),R=d.fallback,g=a.mode,d=i0({mode:"visible",children:d.children},g),R=Kl(R,g,l,null),R.flags|=2,d.return=a,R.return=a,d.sibling=R,a.child=d,ec(a,i.child,null,l),d=a.child,d.memoizedState=uE(l),d.childLanes=hE(i,T,l),a.memoizedState=cE,a=Jf(null,d));else if(So(a),qE(R)){if(T=R.nextSibling&&R.nextSibling.dataset,T)var z=T.dgst;T=z,d=Error(n(419)),d.stack="",d.digest=T,Vf({value:d,source:null,stack:null}),a=fE(i,a,l)}else if(en||Zu(i,a,l,!1),T=(l&i.childLanes)!==0,en||T){if(T=be,T!==null&&(d=Z1(T,l),d!==0&&d!==P.retryLane))throw P.retryLane=d,ql(i,d),vi(T,i,d),oE;XE(R)||d0(),a=fE(i,a,l)}else XE(R)?(a.flags|=192,a.child=i.child,a=null):(i=P.treeContext,we=Ss(R.nextSibling),Cn=a,Yt=!0,go=null,As=!1,i!==null&&Kw(a,i),a=dE(a,d.children),a.flags|=4096);return a}return g?(To(),R=d.fallback,g=a.mode,P=i.child,z=P.sibling,d=tr(P,{mode:"hidden",children:d.children}),d.subtreeFlags=P.subtreeFlags&65011712,z!==null?R=tr(z,R):(R=Kl(R,g,l,null),R.flags|=2),R.return=a,d.return=a,d.sibling=R,a.child=d,Jf(null,d),d=a.child,R=i.child.memoizedState,R===null?R=uE(l):(g=R.cachePool,g!==null?(P=Je._currentValue,g=g.parent!==P?{parent:P,pool:P}:g):g=tx(),R={baseLanes:R.baseLanes|l,cachePool:g}),d.memoizedState=R,d.childLanes=hE(i,T,l),a.memoizedState=cE,Jf(i.child,d)):(So(a),l=i.child,i=l.sibling,l=tr(l,{mode:"visible",children:d.children}),l.return=a,l.sibling=null,i!==null&&(T=a.deletions,T===null?(a.deletions=[i],a.flags|=16):T.push(i)),a.child=l,a.memoizedState=null,l)}function dE(i,a){return a=i0({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function i0(i,a){return i=ki(22,i,null,a),i.lanes=0,i}function fE(i,a,l){return ec(a,i.child,null,l),i=dE(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function fC(i,a,l){i.lanes|=a;var d=i.alternate;d!==null&&(d.lanes|=a),DA(i.return,a,l)}function pE(i,a,l,d,g,v){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:g,treeForkCount:v}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=d,T.tail=l,T.tailMode=g,T.treeForkCount=v)}function pC(i,a,l){var d=a.pendingProps,g=d.revealOrder,v=d.tail;d=d.children;var T=Ke.current,R=(T&2)!==0;if(R?(T=T&1|2,a.flags|=128):T&=1,tt(Ke,T),Mn(i,a,d,l),d=Yt?Hf:0,!R&&i!==null&&(i.flags&128)!==0)t:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&fC(i,l,a);else if(i.tag===19)fC(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break t;for(;i.sibling===null;){if(i.return===null||i.return===a)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(l=a.child,g=null;l!==null;)i=l.alternate,i!==null&&Yy(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=a.child,a.child=null):(g=l.sibling,l.sibling=null),pE(a,!1,g,l,v,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&Yy(i)===null){a.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}pE(a,!0,l,null,v,d);break;case"together":pE(a,!1,null,null,void 0,d);break;default:a.memoizedState=null}return a.child}function rr(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),xo|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(Zu(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(n(153));if(a.child!==null){for(i=a.child,l=tr(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=tr(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function mE(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&ky(i)))}function uk(i,a,l){switch(a.tag){case 3:qe(a,a.stateNode.containerInfo),bo(a,Je,i.memoizedState.cache),$l();break;case 27:case 5:Ni(a);break;case 4:qe(a,a.stateNode.containerInfo);break;case 10:bo(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,HA(a),null;break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(So(a),a.flags|=128,null):(l&a.child.childLanes)!==0?dC(i,a,l):(So(a),i=rr(i,a,l),i!==null?i.sibling:null);So(a);break;case 19:var g=(i.flags&128)!==0;if(d=(l&a.childLanes)!==0,d||(Zu(i,a,l,!1),d=(l&a.childLanes)!==0),g){if(d)return pC(i,a,l);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),tt(Ke,Ke.current),d)break;return null;case 22:return a.lanes=0,rC(i,a,l,a.pendingProps);case 24:bo(a,Je,i.memoizedState.cache)}return rr(i,a,l)}function mC(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)en=!0;else{if(!mE(i,l)&&(a.flags&128)===0)return en=!1,uk(i,a,l);en=(i.flags&131072)!==0}else en=!1,Yt&&(a.flags&1048576)!==0&&qw(a,Hf,a.index);switch(a.lanes=0,a.tag){case 16:t:{var d=a.pendingProps;if(i=Jl(a.elementType),a.type=i,typeof i=="function")AA(i)?(d=ic(i,d),a.tag=1,a=uC(null,a,i,d,l)):(a.tag=0,a=lE(null,a,i,d,l));else{if(i!=null){var g=i.$$typeof;if(g===N){a.tag=11,a=iC(null,a,i,d,l);break t}else if(g===k){a.tag=14,a=sC(null,a,i,d,l);break t}}throw a=gt(i)||i,Error(n(306,a,""))}}return a;case 0:return lE(i,a,a.type,a.pendingProps,l);case 1:return d=a.type,g=ic(d,a.pendingProps),uC(i,a,d,g,l);case 3:t:{if(qe(a,a.stateNode.containerInfo),i===null)throw Error(n(387));d=a.pendingProps;var v=a.memoizedState;g=v.element,PA(i,a),Kf(a,d,null,l);var T=a.memoizedState;if(d=T.cache,bo(a,Je,d),d!==v.cache&&MA(a,[Je],l,!0),qf(),d=T.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){a=hC(i,a,d,l);break t}else if(d!==g){g=ys(Error(n(424)),a),Vf(g),a=hC(i,a,d,l);break t}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(we=Ss(i.firstChild),Cn=a,Yt=!0,go=null,As=!0,l=rx(a,null,d,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if($l(),d===g){a=rr(i,a,l);break t}Mn(i,a,d,l)}a=a.child}return a;case 26:return n0(i,a),i===null?(l=xD(a.type,null,a.pendingProps,null))?a.memoizedState=l:Yt||(l=a.type,i=a.pendingProps,d=v0(At.current).createElement(l),d[xn]=a,d[fi]=i,Rn(d,l,i),yn(d),a.stateNode=d):a.memoizedState=xD(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return Ni(a),i===null&&Yt&&(d=a.stateNode=TD(a.type,a.pendingProps,At.current),Cn=a,As=!0,g=we,Oo(a.type)?(KE=g,we=Ss(d.firstChild)):we=g),Mn(i,a,a.pendingProps.children,l),n0(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&Yt&&((g=d=we)&&(d=Hk(d,a.type,a.pendingProps,As),d!==null?(a.stateNode=d,Cn=a,we=Ss(d.firstChild),As=!1,g=!0):g=!1),g||yo(a)),Ni(a),g=a.type,v=a.pendingProps,T=i!==null?i.memoizedProps:null,d=v.children,jE(g,v)?d=null:T!==null&&jE(g,T)&&(a.flags|=32),a.memoizedState!==null&&(g=zA(i,a,ek,null,null,l),pp._currentValue=g),n0(i,a),Mn(i,a,d,l),a.child;case 6:return i===null&&Yt&&((i=l=we)&&(l=Vk(l,a.pendingProps,As),l!==null?(a.stateNode=l,Cn=a,we=null,i=!0):i=!1),i||yo(a)),null;case 13:return dC(i,a,l);case 4:return qe(a,a.stateNode.containerInfo),d=a.pendingProps,i===null?a.child=ec(a,null,d,l):Mn(i,a,d,l),a.child;case 11:return iC(i,a,a.type,a.pendingProps,l);case 7:return Mn(i,a,a.pendingProps,l),a.child;case 8:return Mn(i,a,a.pendingProps.children,l),a.child;case 12:return Mn(i,a,a.pendingProps.children,l),a.child;case 10:return d=a.pendingProps,bo(a,a.type,d.value),Mn(i,a,d.children,l),a.child;case 9:return g=a.type._context,d=a.pendingProps.children,Ql(a),g=Dn(g),d=d(g),a.flags|=1,Mn(i,a,d,l),a.child;case 14:return sC(i,a,a.type,a.pendingProps,l);case 15:return aC(i,a,a.type,a.pendingProps,l);case 19:return pC(i,a,l);case 31:return ck(i,a,l);case 22:return rC(i,a,l,a.pendingProps);case 24:return Ql(a),d=Dn(Je),i===null?(g=NA(),g===null&&(g=be,v=RA(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=l),g=v),a.memoizedState={parent:d,cache:g},IA(a),bo(a,Je,g)):((i.lanes&l)!==0&&(PA(i,a),Kf(a,null,null,l),qf()),g=i.memoizedState,v=a.memoizedState,g.parent!==d?(g={parent:d,cache:d},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),bo(a,Je,d)):(d=v.cache,bo(a,Je,d),d!==g.cache&&MA(a,[Je],l,!0))),Mn(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(n(156,a.tag))}function or(i){i.flags|=4}function gE(i,a,l,d,g){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(zC())i.flags|=8192;else throw tc=Vy,LA}else i.flags&=-16777217}function gC(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!OD(a))if(zC())i.flags|=8192;else throw tc=Vy,LA}function s0(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?$1():536870912,i.lanes|=a,uh|=a)}function tp(i,a){if(!Yt)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function xe(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(a)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=d,i.childLanes=l,a}function hk(i,a,l){var d=a.pendingProps;switch(_A(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xe(a),null;case 1:return xe(a),null;case 3:return l=a.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),ir(Je),le(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Qu(a)?or(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,xA())),xe(a),null;case 26:var g=a.type,v=a.memoizedState;return i===null?(or(a),v!==null?(xe(a),gC(a,v)):(xe(a),gE(a,g,null,d,l))):v?v!==i.memoizedState?(or(a),xe(a),gC(a,v)):(xe(a),a.flags&=-16777217):(i=i.memoizedProps,i!==d&&or(a),xe(a),gE(a,g,i,d,l)),null;case 27:if(Zn(a),l=At.current,g=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==d&&or(a);else{if(!d){if(a.stateNode===null)throw Error(n(166));return xe(a),null}i=at.current,Qu(a)?$w(a):(i=TD(g,d,l),a.stateNode=i,or(a))}return xe(a),null;case 5:if(Zn(a),g=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==d&&or(a);else{if(!d){if(a.stateNode===null)throw Error(n(166));return xe(a),null}if(v=at.current,Qu(a))$w(a);else{var T=v0(At.current);switch(v){case 1:v=T.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:v=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":v=T.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":v=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":v=T.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof d.is=="string"?T.createElement("select",{is:d.is}):T.createElement("select"),d.multiple?v.multiple=!0:d.size&&(v.size=d.size);break;default:v=typeof d.is=="string"?T.createElement(g,{is:d.is}):T.createElement(g)}}v[xn]=a,v[fi]=d;t:for(T=a.child;T!==null;){if(T.tag===5||T.tag===6)v.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===a)break t;for(;T.sibling===null;){if(T.return===null||T.return===a)break t;T=T.return}T.sibling.return=T.return,T=T.sibling}a.stateNode=v;t:switch(Rn(v,g,d),g){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}d&&or(a)}}return xe(a),gE(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,l),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==d&&or(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(n(166));if(i=At.current,Qu(a)){if(i=a.stateNode,l=a.memoizedProps,d=null,g=Cn,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}i[xn]=a,i=!!(i.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||dD(i.nodeValue,l)),i||yo(a,!0)}else i=v0(i).createTextNode(d),i[xn]=a,a.stateNode=i}return xe(a),null;case 31:if(l=a.memoizedState,i===null||i.memoizedState!==null){if(d=Qu(a),l!==null){if(i===null){if(!d)throw Error(n(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[xn]=a}else $l(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;xe(a),i=!1}else l=xA(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return a.flags&256?(Fi(a),a):(Fi(a),null);if((a.flags&128)!==0)throw Error(n(558))}return xe(a),null;case 13:if(d=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=Qu(a),d!==null&&d.dehydrated!==null){if(i===null){if(!g)throw Error(n(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));g[xn]=a}else $l(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;xe(a),g=!1}else g=xA(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(Fi(a),a):(Fi(a),null)}return Fi(a),(a.flags&128)!==0?(a.lanes=l,a):(l=d!==null,i=i!==null&&i.memoizedState!==null,l&&(d=a.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool),v=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==g&&(d.flags|=2048)),l!==i&&l&&(a.child.flags|=8192),s0(a,a.updateQueue),xe(a),null);case 4:return le(),i===null&&UE(a.stateNode.containerInfo),xe(a),null;case 10:return ir(a.type),xe(a),null;case 19:if(q(Ke),d=a.memoizedState,d===null)return xe(a),null;if(g=(a.flags&128)!==0,v=d.rendering,v===null)if(g)tp(d,!1);else{if(He!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(v=Yy(i),v!==null){for(a.flags|=128,tp(d,!1),i=v.updateQueue,a.updateQueue=i,s0(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)Gw(l,i),l=l.sibling;return tt(Ke,Ke.current&1|2),Yt&&er(a,d.treeForkCount),a.child}i=i.sibling}d.tail!==null&&Li()>c0&&(a.flags|=128,g=!0,tp(d,!1),a.lanes=4194304)}else{if(!g)if(i=Yy(v),i!==null){if(a.flags|=128,g=!0,i=i.updateQueue,a.updateQueue=i,s0(a,i),tp(d,!0),d.tail===null&&d.tailMode==="hidden"&&!v.alternate&&!Yt)return xe(a),null}else 2*Li()-d.renderingStartTime>c0&&l!==536870912&&(a.flags|=128,g=!0,tp(d,!1),a.lanes=4194304);d.isBackwards?(v.sibling=a.child,a.child=v):(i=d.last,i!==null?i.sibling=v:a.child=v,d.last=v)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=Li(),i.sibling=null,l=Ke.current,tt(Ke,g?l&1|2:l&1),Yt&&er(a,d.treeForkCount),i):(xe(a),null);case 22:case 23:return Fi(a),FA(),d=a.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(l&536870912)!==0&&(a.flags&128)===0&&(xe(a),a.subtreeFlags&6&&(a.flags|=8192)):xe(a),l=a.updateQueue,l!==null&&s0(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==l&&(a.flags|=2048),i!==null&&q(Zl),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),ir(Je),xe(a),null;case 25:return null;case 30:return null}throw Error(n(156,a.tag))}function dk(i,a){switch(_A(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return ir(Je),le(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return Zn(a),null;case 31:if(a.memoizedState!==null){if(Fi(a),a.alternate===null)throw Error(n(340));$l()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(Fi(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(n(340));$l()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return q(Ke),null;case 4:return le(),null;case 10:return ir(a.type),null;case 22:case 23:return Fi(a),FA(),i!==null&&q(Zl),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return ir(Je),null;case 25:return null;default:return null}}function yC(i,a){switch(_A(a),a.tag){case 3:ir(Je),le();break;case 26:case 27:case 5:Zn(a);break;case 4:le();break;case 31:a.memoizedState!==null&&Fi(a);break;case 13:Fi(a);break;case 19:q(Ke);break;case 10:ir(a.type);break;case 22:case 23:Fi(a),FA(),i!==null&&q(Zl);break;case 24:ir(Je)}}function ep(i,a){try{var l=a.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var g=d.next;l=g;do{if((l.tag&i)===i){d=void 0;var v=l.create,T=l.inst;d=v(),T.destroy=d}l=l.next}while(l!==g)}}catch(R){se(a,a.return,R)}}function _o(i,a,l){try{var d=a.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var v=g.next;d=v;do{if((d.tag&i)===i){var T=d.inst,R=T.destroy;if(R!==void 0){T.destroy=void 0,g=a;var P=l,z=R;try{z()}catch(Q){se(g,P,Q)}}}d=d.next}while(d!==v)}}catch(Q){se(a,a.return,Q)}}function bC(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{lx(a,l)}catch(d){se(i,i.return,d)}}}function vC(i,a,l){l.props=ic(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(d){se(i,a,d)}}function np(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof l=="function"?i.refCleanup=l(d):l.current=d}}catch(g){se(i,a,g)}}function ya(i,a){var l=i.ref,d=i.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(g){se(i,a,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){se(i,a,g)}else l.current=null}function AC(i){var a=i.type,l=i.memoizedProps,d=i.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break t;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(g){se(i,i.return,g)}}function yE(i,a,l){try{var d=i.stateNode;Ik(d,i.type,l,a),d[fi]=a}catch(g){se(i,i.return,g)}}function EC(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Oo(i.type)||i.tag===4}function bE(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||EC(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Oo(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function vE(i,a,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Za));else if(d!==4&&(d===27&&Oo(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(vE(i,a,l),i=i.sibling;i!==null;)vE(i,a,l),i=i.sibling}function a0(i,a,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(d!==4&&(d===27&&Oo(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(a0(i,a,l),i=i.sibling;i!==null;)a0(i,a,l),i=i.sibling}function SC(i){var a=i.stateNode,l=i.memoizedProps;try{for(var d=i.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);Rn(a,d,l),a[xn]=i,a[fi]=l}catch(v){se(i,i.return,v)}}var lr=!1,nn=!1,AE=!1,TC=typeof WeakSet=="function"?WeakSet:Set,bn=null;function fk(i,a){if(i=i.containerInfo,VE=x0,i=Pw(i),fA(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else t:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var g=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break t}var T=0,R=-1,P=-1,z=0,Q=0,J=i,G=null;e:for(;;){for(var K;J!==l||g!==0&&J.nodeType!==3||(R=T+g),J!==v||d!==0&&J.nodeType!==3||(P=T+d),J.nodeType===3&&(T+=J.nodeValue.length),(K=J.firstChild)!==null;)G=J,J=K;for(;;){if(J===i)break e;if(G===l&&++z===g&&(R=T),G===v&&++Q===d&&(P=T),(K=J.nextSibling)!==null)break;J=G,G=J.parentNode}J=K}l=R===-1||P===-1?null:{start:R,end:P}}else l=null}l=l||{start:0,end:0}}else l=null;for(zE={focusedElem:i,selectionRange:l},x0=!1,bn=a;bn!==null;)if(a=bn,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,bn=i;else for(;bn!==null;){switch(a=bn,v=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)g=i[l],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,l=a,g=v.memoizedProps,v=v.memoizedState,d=l.stateNode;try{var ft=ic(l.type,g);i=d.getSnapshotBeforeUpdate(ft,v),d.__reactInternalSnapshotBeforeUpdate=i}catch(_t){se(l,l.return,_t)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)YE(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":YE(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=a.sibling,i!==null){i.return=a.return,bn=i;break}bn=a.return}}function _C(i,a,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:ur(i,l),d&4&&ep(5,l);break;case 1:if(ur(i,l),d&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(T){se(l,l.return,T)}else{var g=ic(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(g,a,i.__reactInternalSnapshotBeforeUpdate)}catch(T){se(l,l.return,T)}}d&64&&bC(l),d&512&&np(l,l.return);break;case 3:if(ur(i,l),d&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{lx(i,a)}catch(T){se(l,l.return,T)}}break;case 27:a===null&&d&4&&SC(l);case 26:case 5:ur(i,l),a===null&&d&4&&AC(l),d&512&&np(l,l.return);break;case 12:ur(i,l);break;case 31:ur(i,l),d&4&&CC(i,l);break;case 13:ur(i,l),d&4&&DC(i,l),d&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=Sk.bind(null,l),zk(i,l))));break;case 22:if(d=l.memoizedState!==null||lr,!d){a=a!==null&&a.memoizedState!==null||nn,g=lr;var v=nn;lr=d,(nn=a)&&!v?hr(i,l,(l.subtreeFlags&8772)!==0):ur(i,l),lr=g,nn=v}break;case 30:break;default:ur(i,l)}}function wC(i){var a=i.alternate;a!==null&&(i.alternate=null,wC(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Wv(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var De=null,mi=!1;function cr(i,a,l){for(l=l.child;l!==null;)xC(i,a,l),l=l.sibling}function xC(i,a,l){if(Ii&&typeof Ii.onCommitFiberUnmount=="function")try{Ii.onCommitFiberUnmount(xf,l)}catch{}switch(l.tag){case 26:nn||ya(l,a),cr(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:nn||ya(l,a);var d=De,g=mi;Oo(l.type)&&(De=l.stateNode,mi=!1),cr(i,a,l),hp(l.stateNode),De=d,mi=g;break;case 5:nn||ya(l,a);case 6:if(d=De,g=mi,De=null,cr(i,a,l),De=d,mi=g,De!==null)if(mi)try{(De.nodeType===9?De.body:De.nodeName==="HTML"?De.ownerDocument.body:De).removeChild(l.stateNode)}catch(v){se(l,a,v)}else try{De.removeChild(l.stateNode)}catch(v){se(l,a,v)}break;case 18:De!==null&&(mi?(i=De,bD(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),bh(i)):bD(De,l.stateNode));break;case 4:d=De,g=mi,De=l.stateNode.containerInfo,mi=!0,cr(i,a,l),De=d,mi=g;break;case 0:case 11:case 14:case 15:_o(2,l,a),nn||_o(4,l,a),cr(i,a,l);break;case 1:nn||(ya(l,a),d=l.stateNode,typeof d.componentWillUnmount=="function"&&vC(l,a,d)),cr(i,a,l);break;case 21:cr(i,a,l);break;case 22:nn=(d=nn)||l.memoizedState!==null,cr(i,a,l),nn=d;break;default:cr(i,a,l)}}function CC(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{bh(i)}catch(l){se(a,a.return,l)}}}function DC(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{bh(i)}catch(l){se(a,a.return,l)}}function pk(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new TC),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new TC),a;default:throw Error(n(435,i.tag))}}function r0(i,a){var l=pk(i);a.forEach(function(d){if(!l.has(d)){l.add(d);var g=Tk.bind(null,i,d);d.then(g,g)}})}function gi(i,a){var l=a.deletions;if(l!==null)for(var d=0;d<l.length;d++){var g=l[d],v=i,T=a,R=T;t:for(;R!==null;){switch(R.tag){case 27:if(Oo(R.type)){De=R.stateNode,mi=!1;break t}break;case 5:De=R.stateNode,mi=!1;break t;case 3:case 4:De=R.stateNode.containerInfo,mi=!0;break t}R=R.return}if(De===null)throw Error(n(160));xC(v,T,g),De=null,mi=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)MC(a,i),a=a.sibling}var qs=null;function MC(i,a){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:gi(a,i),yi(i),d&4&&(_o(3,i,i.return),ep(3,i),_o(5,i,i.return));break;case 1:gi(a,i),yi(i),d&512&&(nn||l===null||ya(l,l.return)),d&64&&lr&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var g=qs;if(gi(a,i),yi(i),d&512&&(nn||l===null||ya(l,l.return)),d&4){var v=l!==null?l.memoizedState:null;if(d=i.memoizedState,l===null)if(d===null)if(i.stateNode===null){t:{d=i.type,l=i.memoizedProps,g=g.ownerDocument||g;e:switch(d){case"title":v=g.getElementsByTagName("title")[0],(!v||v[Mf]||v[xn]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(d),g.head.insertBefore(v,g.querySelector("head > title"))),Rn(v,d,l),v[xn]=i,yn(v),d=v;break t;case"link":var T=MD("link","href",g).get(d+(l.href||""));if(T){for(var R=0;R<T.length;R++)if(v=T[R],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(R,1);break e}}v=g.createElement(d),Rn(v,d,l),g.head.appendChild(v);break;case"meta":if(T=MD("meta","content",g).get(d+(l.content||""))){for(R=0;R<T.length;R++)if(v=T[R],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(R,1);break e}}v=g.createElement(d),Rn(v,d,l),g.head.appendChild(v);break;default:throw Error(n(468,d))}v[xn]=i,yn(v),d=v}i.stateNode=d}else RD(g,i.type,i.stateNode);else i.stateNode=DD(g,d,i.memoizedProps);else v!==d?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,d===null?RD(g,i.type,i.stateNode):DD(g,d,i.memoizedProps)):d===null&&i.stateNode!==null&&yE(i,i.memoizedProps,l.memoizedProps)}break;case 27:gi(a,i),yi(i),d&512&&(nn||l===null||ya(l,l.return)),l!==null&&d&4&&yE(i,i.memoizedProps,l.memoizedProps);break;case 5:if(gi(a,i),yi(i),d&512&&(nn||l===null||ya(l,l.return)),i.flags&32){g=i.stateNode;try{Vu(g,"")}catch(ft){se(i,i.return,ft)}}d&4&&i.stateNode!=null&&(g=i.memoizedProps,yE(i,g,l!==null?l.memoizedProps:g)),d&1024&&(AE=!0);break;case 6:if(gi(a,i),yi(i),d&4){if(i.stateNode===null)throw Error(n(162));d=i.memoizedProps,l=i.stateNode;try{l.nodeValue=d}catch(ft){se(i,i.return,ft)}}break;case 3:if(S0=null,g=qs,qs=A0(a.containerInfo),gi(a,i),qs=g,yi(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{bh(a.containerInfo)}catch(ft){se(i,i.return,ft)}AE&&(AE=!1,RC(i));break;case 4:d=qs,qs=A0(i.stateNode.containerInfo),gi(a,i),yi(i),qs=d;break;case 12:gi(a,i),yi(i);break;case 31:gi(a,i),yi(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,r0(i,d)));break;case 13:gi(a,i),yi(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(l0=Li()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,r0(i,d)));break;case 22:g=i.memoizedState!==null;var P=l!==null&&l.memoizedState!==null,z=lr,Q=nn;if(lr=z||g,nn=Q||P,gi(a,i),nn=Q,lr=z,yi(i),d&8192)t:for(a=i.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(l===null||P||lr||nn||sc(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){P=l=a;try{if(v=P.stateNode,g)T=v.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{R=P.stateNode;var J=P.memoizedProps.style,G=J!=null&&J.hasOwnProperty("display")?J.display:null;R.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(ft){se(P,P.return,ft)}}}else if(a.tag===6){if(l===null){P=a;try{P.stateNode.nodeValue=g?"":P.memoizedProps}catch(ft){se(P,P.return,ft)}}}else if(a.tag===18){if(l===null){P=a;try{var K=P.stateNode;g?vD(K,!0):vD(P.stateNode,!1)}catch(ft){se(P,P.return,ft)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break t;for(;a.sibling===null;){if(a.return===null||a.return===i)break t;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=i.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,r0(i,l))));break;case 19:gi(a,i),yi(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,r0(i,d)));break;case 30:break;case 21:break;default:gi(a,i),yi(i)}}function yi(i){var a=i.flags;if(a&2){try{for(var l,d=i.return;d!==null;){if(EC(d)){l=d;break}d=d.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var g=l.stateNode,v=bE(i);a0(i,v,g);break;case 5:var T=l.stateNode;l.flags&32&&(Vu(T,""),l.flags&=-33);var R=bE(i);a0(i,R,T);break;case 3:case 4:var P=l.stateNode.containerInfo,z=bE(i);vE(i,z,P);break;default:throw Error(n(161))}}catch(Q){se(i,i.return,Q)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function RC(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;RC(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function ur(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)_C(i,a.alternate,a),a=a.sibling}function sc(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:_o(4,a,a.return),sc(a);break;case 1:ya(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&vC(a,a.return,l),sc(a);break;case 27:hp(a.stateNode);case 26:case 5:ya(a,a.return),sc(a);break;case 22:a.memoizedState===null&&sc(a);break;case 30:sc(a);break;default:sc(a)}i=i.sibling}}function hr(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,g=i,v=a,T=v.flags;switch(v.tag){case 0:case 11:case 15:hr(g,v,l),ep(4,v);break;case 1:if(hr(g,v,l),d=v,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(z){se(d,d.return,z)}if(d=v,g=d.updateQueue,g!==null){var R=d.stateNode;try{var P=g.shared.hiddenCallbacks;if(P!==null)for(g.shared.hiddenCallbacks=null,g=0;g<P.length;g++)ox(P[g],R)}catch(z){se(d,d.return,z)}}l&&T&64&&bC(v),np(v,v.return);break;case 27:SC(v);case 26:case 5:hr(g,v,l),l&&d===null&&T&4&&AC(v),np(v,v.return);break;case 12:hr(g,v,l);break;case 31:hr(g,v,l),l&&T&4&&CC(g,v);break;case 13:hr(g,v,l),l&&T&4&&DC(g,v);break;case 22:v.memoizedState===null&&hr(g,v,l),np(v,v.return);break;case 30:break;default:hr(g,v,l)}a=a.sibling}}function EE(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&zf(l))}function SE(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&zf(i))}function Ks(i,a,l,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)OC(i,a,l,d),a=a.sibling}function OC(i,a,l,d){var g=a.flags;switch(a.tag){case 0:case 11:case 15:Ks(i,a,l,d),g&2048&&ep(9,a);break;case 1:Ks(i,a,l,d);break;case 3:Ks(i,a,l,d),g&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&zf(i)));break;case 12:if(g&2048){Ks(i,a,l,d),i=a.stateNode;try{var v=a.memoizedProps,T=v.id,R=v.onPostCommit;typeof R=="function"&&R(T,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(P){se(a,a.return,P)}}else Ks(i,a,l,d);break;case 31:Ks(i,a,l,d);break;case 13:Ks(i,a,l,d);break;case 23:break;case 22:v=a.stateNode,T=a.alternate,a.memoizedState!==null?v._visibility&2?Ks(i,a,l,d):ip(i,a):v._visibility&2?Ks(i,a,l,d):(v._visibility|=2,oh(i,a,l,d,(a.subtreeFlags&10256)!==0||!1)),g&2048&&EE(T,a);break;case 24:Ks(i,a,l,d),g&2048&&SE(a.alternate,a);break;default:Ks(i,a,l,d)}}function oh(i,a,l,d,g){for(g=g&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var v=i,T=a,R=l,P=d,z=T.flags;switch(T.tag){case 0:case 11:case 15:oh(v,T,R,P,g),ep(8,T);break;case 23:break;case 22:var Q=T.stateNode;T.memoizedState!==null?Q._visibility&2?oh(v,T,R,P,g):ip(v,T):(Q._visibility|=2,oh(v,T,R,P,g)),g&&z&2048&&EE(T.alternate,T);break;case 24:oh(v,T,R,P,g),g&&z&2048&&SE(T.alternate,T);break;default:oh(v,T,R,P,g)}a=a.sibling}}function ip(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,d=a,g=d.flags;switch(d.tag){case 22:ip(l,d),g&2048&&EE(d.alternate,d);break;case 24:ip(l,d),g&2048&&SE(d.alternate,d);break;default:ip(l,d)}a=a.sibling}}var sp=8192;function lh(i,a,l){if(i.subtreeFlags&sp)for(i=i.child;i!==null;)NC(i,a,l),i=i.sibling}function NC(i,a,l){switch(i.tag){case 26:lh(i,a,l),i.flags&sp&&i.memoizedState!==null&&tU(l,qs,i.memoizedState,i.memoizedProps);break;case 5:lh(i,a,l);break;case 3:case 4:var d=qs;qs=A0(i.stateNode.containerInfo),lh(i,a,l),qs=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=sp,sp=16777216,lh(i,a,l),sp=d):lh(i,a,l));break;default:lh(i,a,l)}}function LC(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function ap(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var d=a[l];bn=d,PC(d,i)}LC(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)IC(i),i=i.sibling}function IC(i){switch(i.tag){case 0:case 11:case 15:ap(i),i.flags&2048&&_o(9,i,i.return);break;case 3:ap(i);break;case 12:ap(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,o0(i)):ap(i);break;default:ap(i)}}function o0(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var d=a[l];bn=d,PC(d,i)}LC(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:_o(8,a,a.return),o0(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,o0(a));break;default:o0(a)}i=i.sibling}}function PC(i,a){for(;bn!==null;){var l=bn;switch(l.tag){case 0:case 11:case 15:_o(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:zf(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,bn=d;else t:for(l=i;bn!==null;){d=bn;var g=d.sibling,v=d.return;if(wC(d),d===l){bn=null;break t}if(g!==null){g.return=v,bn=g;break t}bn=v}}}var mk={getCacheForType:function(i){var a=Dn(Je),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l},cacheSignal:function(){return Dn(Je).controller.signal}},gk=typeof WeakMap=="function"?WeakMap:Map,Zt=0,be=null,Ht=null,zt=0,ie=0,Hi=null,wo=!1,ch=!1,TE=!1,dr=0,He=0,xo=0,ac=0,_E=0,Vi=0,uh=0,rp=null,bi=null,wE=!1,l0=0,BC=0,c0=1/0,u0=null,Co=null,cn=0,Do=null,hh=null,fr=0,xE=0,CE=null,kC=null,op=0,DE=null;function zi(){return(Zt&2)!==0&&zt!==0?zt&-zt:F.T!==null?IE():J1()}function UC(){if(Vi===0)if((zt&536870912)===0||Yt){var i=by;by<<=1,(by&3932160)===0&&(by=262144),Vi=i}else Vi=536870912;return i=Ui.current,i!==null&&(i.flags|=32),Vi}function vi(i,a,l){(i===be&&(ie===2||ie===9)||i.cancelPendingCommit!==null)&&(dh(i,0),Mo(i,zt,Vi,!1)),Df(i,l),((Zt&2)===0||i!==be)&&(i===be&&((Zt&2)===0&&(ac|=l),He===4&&Mo(i,zt,Vi,!1)),ba(i))}function FC(i,a,l){if((Zt&6)!==0)throw Error(n(327));var d=!l&&(a&127)===0&&(a&i.expiredLanes)===0||Cf(i,a),g=d?vk(i,a):RE(i,a,!0),v=d;do{if(g===0){ch&&!d&&Mo(i,a,0,!1);break}else{if(l=i.current.alternate,v&&!yk(l)){g=RE(i,a,!1),v=!1;continue}if(g===2){if(v=a,i.errorRecoveryDisabledLanes&v)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;t:{var R=i;g=rp;var P=R.current.memoizedState.isDehydrated;if(P&&(dh(R,T).flags|=256),T=RE(R,T,!1),T!==2){if(TE&&!P){R.errorRecoveryDisabledLanes|=v,ac|=v,g=4;break t}v=bi,bi=g,v!==null&&(bi===null?bi=v:bi.push.apply(bi,v))}g=T}if(v=!1,g!==2)continue}}if(g===1){dh(i,0),Mo(i,a,0,!0);break}t:{switch(d=i,v=g,v){case 0:case 1:throw Error(n(345));case 4:if((a&4194048)!==a)break;case 6:Mo(d,a,Vi,!wo);break t;case 2:bi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((a&62914560)===a&&(g=l0+300-Li(),10<g)){if(Mo(d,a,Vi,!wo),Ay(d,0,!0)!==0)break t;fr=a,d.timeoutHandle=gD(HC.bind(null,d,l,bi,u0,wE,a,Vi,ac,uh,wo,v,"Throttled",-0,0),g);break t}HC(d,l,bi,u0,wE,a,Vi,ac,uh,wo,v,null,-0,0)}}break}while(!0);ba(i)}function HC(i,a,l,d,g,v,T,R,P,z,Q,J,G,K){if(i.timeoutHandle=-1,J=a.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Za},NC(a,v,J);var ft=(v&62914560)===v?l0-Li():(v&4194048)===v?BC-Li():0;if(ft=eU(J,ft),ft!==null){fr=v,i.cancelPendingCommit=ft(KC.bind(null,i,a,v,l,d,g,T,R,P,Q,J,null,G,K)),Mo(i,v,T,!z);return}}KC(i,a,v,l,d,g,T,R,P)}function yk(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var g=l[d],v=g.getSnapshot;g=g.value;try{if(!Bi(v(),g))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Mo(i,a,l,d){a&=~_E,a&=~ac,i.suspendedLanes|=a,i.pingedLanes&=~a,d&&(i.warmLanes|=a),d=i.expirationTimes;for(var g=a;0<g;){var v=31-Pi(g),T=1<<v;d[v]=-1,g&=~T}l!==0&&W1(i,l,a)}function h0(){return(Zt&6)===0?(lp(0),!1):!0}function ME(){if(Ht!==null){if(ie===0)var i=Ht.return;else i=Ht,nr=Wl=null,YA(i),nh=null,Gf=0,i=Ht;for(;i!==null;)yC(i.alternate,i),i=i.return;Ht=null}}function dh(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,kk(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),fr=0,ME(),be=i,Ht=l=tr(i.current,null),zt=a,ie=0,Hi=null,wo=!1,ch=Cf(i,a),TE=!1,uh=Vi=_E=ac=xo=He=0,bi=rp=null,wE=!1,(a&8)!==0&&(a|=a&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=a;0<d;){var g=31-Pi(d),v=1<<g;a|=i[g],d&=~v}return dr=a,Ny(),l}function VC(i,a){Lt=null,F.H=Zf,a===eh||a===Hy?(a=ix(),ie=3):a===LA?(a=ix(),ie=4):ie=a===oE?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Hi=a,Ht===null&&(He=1,t0(i,ys(a,i.current)))}function zC(){var i=Ui.current;return i===null?!0:(zt&4194048)===zt?Es===null:(zt&62914560)===zt||(zt&536870912)!==0?i===Es:!1}function jC(){var i=F.H;return F.H=Zf,i===null?Zf:i}function GC(){var i=F.A;return F.A=mk,i}function d0(){He=4,wo||(zt&4194048)!==zt&&Ui.current!==null||(ch=!0),(xo&134217727)===0&&(ac&134217727)===0||be===null||Mo(be,zt,Vi,!1)}function RE(i,a,l){var d=Zt;Zt|=2;var g=jC(),v=GC();(be!==i||zt!==a)&&(u0=null,dh(i,a)),a=!1;var T=He;t:do try{if(ie!==0&&Ht!==null){var R=Ht,P=Hi;switch(ie){case 8:ME(),T=6;break t;case 3:case 2:case 9:case 6:Ui.current===null&&(a=!0);var z=ie;if(ie=0,Hi=null,fh(i,R,P,z),l&&ch){T=0;break t}break;default:z=ie,ie=0,Hi=null,fh(i,R,P,z)}}bk(),T=He;break}catch(Q){VC(i,Q)}while(!0);return a&&i.shellSuspendCounter++,nr=Wl=null,Zt=d,F.H=g,F.A=v,Ht===null&&(be=null,zt=0,Ny()),T}function bk(){for(;Ht!==null;)YC(Ht)}function vk(i,a){var l=Zt;Zt|=2;var d=jC(),g=GC();be!==i||zt!==a?(u0=null,c0=Li()+500,dh(i,a)):ch=Cf(i,a);t:do try{if(ie!==0&&Ht!==null){a=Ht;var v=Hi;e:switch(ie){case 1:ie=0,Hi=null,fh(i,a,v,1);break;case 2:case 9:if(ex(v)){ie=0,Hi=null,XC(a);break}a=function(){ie!==2&&ie!==9||be!==i||(ie=7),ba(i)},v.then(a,a);break t;case 3:ie=7;break t;case 4:ie=5;break t;case 7:ex(v)?(ie=0,Hi=null,XC(a)):(ie=0,Hi=null,fh(i,a,v,7));break;case 5:var T=null;switch(Ht.tag){case 26:T=Ht.memoizedState;case 5:case 27:var R=Ht;if(T?OD(T):R.stateNode.complete){ie=0,Hi=null;var P=R.sibling;if(P!==null)Ht=P;else{var z=R.return;z!==null?(Ht=z,f0(z)):Ht=null}break e}}ie=0,Hi=null,fh(i,a,v,5);break;case 6:ie=0,Hi=null,fh(i,a,v,6);break;case 8:ME(),He=6;break t;default:throw Error(n(462))}}Ak();break}catch(Q){VC(i,Q)}while(!0);return nr=Wl=null,F.H=d,F.A=g,Zt=l,Ht!==null?0:(be=null,zt=0,Ny(),He)}function Ak(){for(;Ht!==null&&!jP();)YC(Ht)}function YC(i){var a=mC(i.alternate,i,dr);i.memoizedProps=i.pendingProps,a===null?f0(i):Ht=a}function XC(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=cC(l,a,a.pendingProps,a.type,void 0,zt);break;case 11:a=cC(l,a,a.pendingProps,a.type.render,a.ref,zt);break;case 5:YA(a);default:yC(l,a),a=Ht=Gw(a,dr),a=mC(l,a,dr)}i.memoizedProps=i.pendingProps,a===null?f0(i):Ht=a}function fh(i,a,l,d){nr=Wl=null,YA(a),nh=null,Gf=0;var g=a.return;try{if(lk(i,g,a,l,zt)){He=1,t0(i,ys(l,i.current)),Ht=null;return}}catch(v){if(g!==null)throw Ht=g,v;He=1,t0(i,ys(l,i.current)),Ht=null;return}a.flags&32768?(Yt||d===1?i=!0:ch||(zt&536870912)!==0?i=!1:(wo=i=!0,(d===2||d===9||d===3||d===6)&&(d=Ui.current,d!==null&&d.tag===13&&(d.flags|=16384))),qC(a,i)):f0(a)}function f0(i){var a=i;do{if((a.flags&32768)!==0){qC(a,wo);return}i=a.return;var l=hk(a.alternate,a,dr);if(l!==null){Ht=l;return}if(a=a.sibling,a!==null){Ht=a;return}Ht=a=i}while(a!==null);He===0&&(He=5)}function qC(i,a){do{var l=dk(i.alternate,i);if(l!==null){l.flags&=32767,Ht=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){Ht=i;return}Ht=i=l}while(i!==null);He=6,Ht=null}function KC(i,a,l,d,g,v,T,R,P){i.cancelPendingCommit=null;do p0();while(cn!==0);if((Zt&6)!==0)throw Error(n(327));if(a!==null){if(a===i.current)throw Error(n(177));if(v=a.lanes|a.childLanes,v|=bA,JP(i,l,v,T,R,P),i===be&&(Ht=be=null,zt=0),hh=a,Do=i,fr=l,xE=v,CE=g,kC=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,_k(gy,function(){return JC(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=F.T,F.T=null,g=X.p,X.p=2,T=Zt,Zt|=4;try{fk(i,a,l)}finally{Zt=T,X.p=g,F.T=d}}cn=1,$C(),WC(),QC()}}function $C(){if(cn===1){cn=0;var i=Do,a=hh,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=F.T,F.T=null;var d=X.p;X.p=2;var g=Zt;Zt|=4;try{MC(a,i);var v=zE,T=Pw(i.containerInfo),R=v.focusedElem,P=v.selectionRange;if(T!==R&&R&&R.ownerDocument&&Iw(R.ownerDocument.documentElement,R)){if(P!==null&&fA(R)){var z=P.start,Q=P.end;if(Q===void 0&&(Q=z),"selectionStart"in R)R.selectionStart=z,R.selectionEnd=Math.min(Q,R.value.length);else{var J=R.ownerDocument||document,G=J&&J.defaultView||window;if(G.getSelection){var K=G.getSelection(),ft=R.textContent.length,_t=Math.min(P.start,ft),he=P.end===void 0?_t:Math.min(P.end,ft);!K.extend&&_t>he&&(T=he,he=_t,_t=T);var H=Lw(R,_t),U=Lw(R,he);if(H&&U&&(K.rangeCount!==1||K.anchorNode!==H.node||K.anchorOffset!==H.offset||K.focusNode!==U.node||K.focusOffset!==U.offset)){var V=J.createRange();V.setStart(H.node,H.offset),K.removeAllRanges(),_t>he?(K.addRange(V),K.extend(U.node,U.offset)):(V.setEnd(U.node,U.offset),K.addRange(V))}}}}for(J=[],K=R;K=K.parentNode;)K.nodeType===1&&J.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<J.length;R++){var Z=J[R];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}x0=!!VE,zE=VE=null}finally{Zt=g,X.p=d,F.T=l}}i.current=a,cn=2}}function WC(){if(cn===2){cn=0;var i=Do,a=hh,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=F.T,F.T=null;var d=X.p;X.p=2;var g=Zt;Zt|=4;try{_C(i,a.alternate,a)}finally{Zt=g,X.p=d,F.T=l}}cn=3}}function QC(){if(cn===4||cn===3){cn=0,GP();var i=Do,a=hh,l=fr,d=kC;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?cn=5:(cn=0,hh=Do=null,ZC(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Co=null),Kv(l),a=a.stateNode,Ii&&typeof Ii.onCommitFiberRoot=="function")try{Ii.onCommitFiberRoot(xf,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=F.T,g=X.p,X.p=2,F.T=null;try{for(var v=i.onRecoverableError,T=0;T<d.length;T++){var R=d[T];v(R.value,{componentStack:R.stack})}}finally{F.T=a,X.p=g}}(fr&3)!==0&&p0(),ba(i),g=i.pendingLanes,(l&261930)!==0&&(g&42)!==0?i===DE?op++:(op=0,DE=i):op=0,lp(0)}}function ZC(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,zf(a)))}function p0(){return $C(),WC(),QC(),JC()}function JC(){if(cn!==5)return!1;var i=Do,a=xE;xE=0;var l=Kv(fr),d=F.T,g=X.p;try{X.p=32>l?32:l,F.T=null,l=CE,CE=null;var v=Do,T=fr;if(cn=0,hh=Do=null,fr=0,(Zt&6)!==0)throw Error(n(331));var R=Zt;if(Zt|=4,IC(v.current),OC(v,v.current,T,l),Zt=R,lp(0,!1),Ii&&typeof Ii.onPostCommitFiberRoot=="function")try{Ii.onPostCommitFiberRoot(xf,v)}catch{}return!0}finally{X.p=g,F.T=d,ZC(i,a)}}function tD(i,a,l){a=ys(l,a),a=rE(i.stateNode,a,2),i=Eo(i,a,2),i!==null&&(Df(i,2),ba(i))}function se(i,a,l){if(i.tag===3)tD(i,i,l);else for(;a!==null;){if(a.tag===3){tD(a,i,l);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Co===null||!Co.has(d))){i=ys(l,i),l=eC(2),d=Eo(a,l,2),d!==null&&(nC(l,d,a,i),Df(d,2),ba(d));break}}a=a.return}}function OE(i,a,l){var d=i.pingCache;if(d===null){d=i.pingCache=new gk;var g=new Set;d.set(a,g)}else g=d.get(a),g===void 0&&(g=new Set,d.set(a,g));g.has(l)||(TE=!0,g.add(l),i=Ek.bind(null,i,a,l),a.then(i,i))}function Ek(i,a,l){var d=i.pingCache;d!==null&&d.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,be===i&&(zt&l)===l&&(He===4||He===3&&(zt&62914560)===zt&&300>Li()-l0?(Zt&2)===0&&dh(i,0):_E|=l,uh===zt&&(uh=0)),ba(i)}function eD(i,a){a===0&&(a=$1()),i=ql(i,a),i!==null&&(Df(i,a),ba(i))}function Sk(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),eD(i,l)}function Tk(i,a){var l=0;switch(i.tag){case 31:case 13:var d=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(n(314))}d!==null&&d.delete(a),eD(i,l)}function _k(i,a){return wf(i,a)}var m0=null,ph=null,NE=!1,g0=!1,LE=!1,Ro=0;function ba(i){i!==ph&&i.next===null&&(ph===null?m0=ph=i:ph=ph.next=i),g0=!0,NE||(NE=!0,xk())}function lp(i,a){if(!LE&&g0){LE=!0;do for(var l=!1,d=m0;d!==null;){if(i!==0){var g=d.pendingLanes;if(g===0)var v=0;else{var T=d.suspendedLanes,R=d.pingedLanes;v=(1<<31-Pi(42|i)+1)-1,v&=g&~(T&~R),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,aD(d,v))}else v=zt,v=Ay(d,d===be?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||Cf(d,v)||(l=!0,aD(d,v));d=d.next}while(l);LE=!1}}function wk(){nD()}function nD(){g0=NE=!1;var i=0;Ro!==0&&Bk()&&(i=Ro);for(var a=Li(),l=null,d=m0;d!==null;){var g=d.next,v=iD(d,a);v===0?(d.next=null,l===null?m0=g:l.next=g,g===null&&(ph=l)):(l=d,(i!==0||(v&3)!==0)&&(g0=!0)),d=g}cn!==0&&cn!==5||lp(i),Ro!==0&&(Ro=0)}function iD(i,a){for(var l=i.suspendedLanes,d=i.pingedLanes,g=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var T=31-Pi(v),R=1<<T,P=g[T];P===-1?((R&l)===0||(R&d)!==0)&&(g[T]=ZP(R,a)):P<=a&&(i.expiredLanes|=R),v&=~R}if(a=be,l=zt,l=Ay(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,l===0||i===a&&(ie===2||ie===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&Yv(d),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Cf(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(d!==null&&Yv(d),Kv(l)){case 2:case 8:l=q1;break;case 32:l=gy;break;case 268435456:l=K1;break;default:l=gy}return d=sD.bind(null,i),l=wf(l,d),i.callbackPriority=a,i.callbackNode=l,a}return d!==null&&d!==null&&Yv(d),i.callbackPriority=2,i.callbackNode=null,2}function sD(i,a){if(cn!==0&&cn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(p0()&&i.callbackNode!==l)return null;var d=zt;return d=Ay(i,i===be?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(FC(i,d,a),iD(i,Li()),i.callbackNode!=null&&i.callbackNode===l?sD.bind(null,i):null)}function aD(i,a){if(p0())return null;FC(i,a,!0)}function xk(){Uk(function(){(Zt&6)!==0?wf(X1,wk):nD()})}function IE(){if(Ro===0){var i=Ju;i===0&&(i=yy,yy<<=1,(yy&261888)===0&&(yy=256)),Ro=i}return Ro}function rD(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:_y(""+i)}function oD(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function Ck(i,a,l,d,g){if(a==="submit"&&l&&l.stateNode===g){var v=rD((g[fi]||null).action),T=d.submitter;T&&(a=(a=T[fi]||null)?rD(a.formAction):T.getAttribute("formAction"),a!==null&&(v=a,T=null));var R=new Dy("action","action",null,d,g);i.push({event:R,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Ro!==0){var P=T?oD(g,T):new FormData(g);tE(l,{pending:!0,data:P,method:g.method,action:v},null,P)}}else typeof v=="function"&&(R.preventDefault(),P=T?oD(g,T):new FormData(g),tE(l,{pending:!0,data:P,method:g.method,action:v},v,P))},currentTarget:g}]})}}for(var PE=0;PE<yA.length;PE++){var BE=yA[PE],Dk=BE.toLowerCase(),Mk=BE[0].toUpperCase()+BE.slice(1);Xs(Dk,"on"+Mk)}Xs(Uw,"onAnimationEnd"),Xs(Fw,"onAnimationIteration"),Xs(Hw,"onAnimationStart"),Xs("dblclick","onDoubleClick"),Xs("focusin","onFocus"),Xs("focusout","onBlur"),Xs(YB,"onTransitionRun"),Xs(XB,"onTransitionStart"),Xs(qB,"onTransitionCancel"),Xs(Vw,"onTransitionEnd"),Fu("onMouseEnter",["mouseout","mouseover"]),Fu("onMouseLeave",["mouseout","mouseover"]),Fu("onPointerEnter",["pointerout","pointerover"]),Fu("onPointerLeave",["pointerout","pointerover"]),jl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),jl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),jl("onBeforeInput",["compositionend","keypress","textInput","paste"]),jl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),jl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),jl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cp));function lD(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],g=d.event;d=d.listeners;t:{var v=void 0;if(a)for(var T=d.length-1;0<=T;T--){var R=d[T],P=R.instance,z=R.currentTarget;if(R=R.listener,P!==v&&g.isPropagationStopped())break t;v=R,g.currentTarget=z;try{v(g)}catch(Q){Oy(Q)}g.currentTarget=null,v=P}else for(T=0;T<d.length;T++){if(R=d[T],P=R.instance,z=R.currentTarget,R=R.listener,P!==v&&g.isPropagationStopped())break t;v=R,g.currentTarget=z;try{v(g)}catch(Q){Oy(Q)}g.currentTarget=null,v=P}}}}function Vt(i,a){var l=a[$v];l===void 0&&(l=a[$v]=new Set);var d=i+"__bubble";l.has(d)||(cD(a,i,2,!1),l.add(d))}function kE(i,a,l){var d=0;a&&(d|=4),cD(l,i,d,a)}var y0="_reactListening"+Math.random().toString(36).slice(2);function UE(i){if(!i[y0]){i[y0]=!0,nw.forEach(function(l){l!=="selectionchange"&&(Rk.has(l)||kE(l,!1,i),kE(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[y0]||(a[y0]=!0,kE("selectionchange",!1,a))}}function cD(i,a,l,d){switch(UD(a)){case 2:var g=sU;break;case 8:g=aU;break;default:g=JE}l=g.bind(null,a,l,i),g=void 0,!sA||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),d?g!==void 0?i.addEventListener(a,l,{capture:!0,passive:g}):i.addEventListener(a,l,!0):g!==void 0?i.addEventListener(a,l,{passive:g}):i.addEventListener(a,l,!1)}function FE(i,a,l,d,g){var v=d;if((a&1)===0&&(a&2)===0&&d!==null)t:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var R=d.stateNode.containerInfo;if(R===g)break;if(T===4)for(T=d.return;T!==null;){var P=T.tag;if((P===3||P===4)&&T.stateNode.containerInfo===g)return;T=T.return}for(;R!==null;){if(T=Bu(R),T===null)return;if(P=T.tag,P===5||P===6||P===26||P===27){d=v=T;continue t}R=R.parentNode}}d=d.return}pw(function(){var z=v,Q=nA(l),J=[];t:{var G=zw.get(i);if(G!==void 0){var K=Dy,ft=i;switch(i){case"keypress":if(xy(l)===0)break t;case"keydown":case"keyup":K=TB;break;case"focusin":ft="focus",K=lA;break;case"focusout":ft="blur",K=lA;break;case"beforeblur":case"afterblur":K=lA;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=yw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=hB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=xB;break;case Uw:case Fw:case Hw:K=pB;break;case Vw:K=DB;break;case"scroll":case"scrollend":K=cB;break;case"wheel":K=RB;break;case"copy":case"cut":case"paste":K=gB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=vw;break;case"toggle":case"beforetoggle":K=NB}var _t=(a&4)!==0,he=!_t&&(i==="scroll"||i==="scrollend"),H=_t?G!==null?G+"Capture":null:G;_t=[];for(var U=z,V;U!==null;){var Z=U;if(V=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||V===null||H===null||(Z=Of(U,H),Z!=null&&_t.push(up(U,Z,V))),he)break;U=U.return}0<_t.length&&(G=new K(G,ft,null,l,Q),J.push({event:G,listeners:_t}))}}if((a&7)===0){t:{if(G=i==="mouseover"||i==="pointerover",K=i==="mouseout"||i==="pointerout",G&&l!==eA&&(ft=l.relatedTarget||l.fromElement)&&(Bu(ft)||ft[Pu]))break t;if((K||G)&&(G=Q.window===Q?Q:(G=Q.ownerDocument)?G.defaultView||G.parentWindow:window,K?(ft=l.relatedTarget||l.toElement,K=z,ft=ft?Bu(ft):null,ft!==null&&(he=o(ft),_t=ft.tag,ft!==he||_t!==5&&_t!==27&&_t!==6)&&(ft=null)):(K=null,ft=z),K!==ft)){if(_t=yw,Z="onMouseLeave",H="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(_t=vw,Z="onPointerLeave",H="onPointerEnter",U="pointer"),he=K==null?G:Rf(K),V=ft==null?G:Rf(ft),G=new _t(Z,U+"leave",K,l,Q),G.target=he,G.relatedTarget=V,Z=null,Bu(Q)===z&&(_t=new _t(H,U+"enter",ft,l,Q),_t.target=V,_t.relatedTarget=he,Z=_t),he=Z,K&&ft)e:{for(_t=Ok,H=K,U=ft,V=0,Z=H;Z;Z=_t(Z))V++;Z=0;for(var St=U;St;St=_t(St))Z++;for(;0<V-Z;)H=_t(H),V--;for(;0<Z-V;)U=_t(U),Z--;for(;V--;){if(H===U||U!==null&&H===U.alternate){_t=H;break e}H=_t(H),U=_t(U)}_t=null}else _t=null;K!==null&&uD(J,G,K,_t,!1),ft!==null&&he!==null&&uD(J,he,ft,_t,!0)}}t:{if(G=z?Rf(z):window,K=G.nodeName&&G.nodeName.toLowerCase(),K==="select"||K==="input"&&G.type==="file")var Wt=Cw;else if(ww(G))if(Dw)Wt=zB;else{Wt=HB;var yt=FB}else K=G.nodeName,!K||K.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?z&&tA(z.elementType)&&(Wt=Cw):Wt=VB;if(Wt&&(Wt=Wt(i,z))){xw(J,Wt,l,Q);break t}yt&&yt(i,G,z),i==="focusout"&&z&&G.type==="number"&&z.memoizedProps.value!=null&&Jv(G,"number",G.value)}switch(yt=z?Rf(z):window,i){case"focusin":(ww(yt)||yt.contentEditable==="true")&&(Yu=yt,pA=z,Ff=null);break;case"focusout":Ff=pA=Yu=null;break;case"mousedown":mA=!0;break;case"contextmenu":case"mouseup":case"dragend":mA=!1,Bw(J,l,Q);break;case"selectionchange":if(GB)break;case"keydown":case"keyup":Bw(J,l,Q)}var Pt;if(uA)t:{switch(i){case"compositionstart":var jt="onCompositionStart";break t;case"compositionend":jt="onCompositionEnd";break t;case"compositionupdate":jt="onCompositionUpdate";break t}jt=void 0}else Gu?Tw(i,l)&&(jt="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(jt="onCompositionStart");jt&&(Aw&&l.locale!=="ko"&&(Gu||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&Gu&&(Pt=mw()):(po=Q,aA="value"in po?po.value:po.textContent,Gu=!0)),yt=b0(z,jt),0<yt.length&&(jt=new bw(jt,i,null,l,Q),J.push({event:jt,listeners:yt}),Pt?jt.data=Pt:(Pt=_w(l),Pt!==null&&(jt.data=Pt)))),(Pt=IB?PB(i,l):BB(i,l))&&(jt=b0(z,"onBeforeInput"),0<jt.length&&(yt=new bw("onBeforeInput","beforeinput",null,l,Q),J.push({event:yt,listeners:jt}),yt.data=Pt)),Ck(J,i,z,l,Q)}lD(J,a)})}function up(i,a,l){return{instance:i,listener:a,currentTarget:l}}function b0(i,a){for(var l=a+"Capture",d=[];i!==null;){var g=i,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=Of(i,l),g!=null&&d.unshift(up(i,g,v)),g=Of(i,a),g!=null&&d.push(up(i,g,v))),i.tag===3)return d;i=i.return}return[]}function Ok(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function uD(i,a,l,d,g){for(var v=a._reactName,T=[];l!==null&&l!==d;){var R=l,P=R.alternate,z=R.stateNode;if(R=R.tag,P!==null&&P===d)break;R!==5&&R!==26&&R!==27||z===null||(P=z,g?(z=Of(l,v),z!=null&&T.unshift(up(l,z,P))):g||(z=Of(l,v),z!=null&&T.push(up(l,z,P)))),l=l.return}T.length!==0&&i.push({event:a,listeners:T})}var Nk=/\r\n?/g,Lk=/\u0000|\uFFFD/g;function hD(i){return(typeof i=="string"?i:""+i).replace(Nk,`
`).replace(Lk,"")}function dD(i,a){return a=hD(a),hD(i)===a}function ue(i,a,l,d,g,v){switch(l){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||Vu(i,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&Vu(i,""+d);break;case"className":Sy(i,"class",d);break;case"tabIndex":Sy(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Sy(i,l,d);break;case"style":dw(i,d,v);break;case"data":if(a!=="object"){Sy(i,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(l);break}d=_y(""+d),i.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(a!=="input"&&ue(i,a,"name",g.name,g,null),ue(i,a,"formEncType",g.formEncType,g,null),ue(i,a,"formMethod",g.formMethod,g,null),ue(i,a,"formTarget",g.formTarget,g,null)):(ue(i,a,"encType",g.encType,g,null),ue(i,a,"method",g.method,g,null),ue(i,a,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(l);break}d=_y(""+d),i.setAttribute(l,d);break;case"onClick":d!=null&&(i.onclick=Za);break;case"onScroll":d!=null&&Vt("scroll",i);break;case"onScrollEnd":d!=null&&Vt("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(l=d.__html,l!=null){if(g.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}l=_y(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,""+d):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":d===!0?i.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,d):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(l,d):i.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(l):i.setAttribute(l,d);break;case"popover":Vt("beforetoggle",i),Vt("toggle",i),Ey(i,"popover",d);break;case"xlinkActuate":Qa(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Qa(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Qa(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Qa(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Qa(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Qa(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Qa(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Qa(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Qa(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Ey(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=oB.get(l)||l,Ey(i,l,d))}}function HE(i,a,l,d,g,v){switch(l){case"style":dw(i,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(l=d.__html,l!=null){if(g.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"children":typeof d=="string"?Vu(i,d):(typeof d=="number"||typeof d=="bigint")&&Vu(i,""+d);break;case"onScroll":d!=null&&Vt("scroll",i);break;case"onScrollEnd":d!=null&&Vt("scrollend",i);break;case"onClick":d!=null&&(i.onclick=Za);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!iw.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),a=l.slice(2,g?l.length-7:void 0),v=i[fi]||null,v=v!=null?v[l]:null,typeof v=="function"&&i.removeEventListener(a,v,g),typeof d=="function")){typeof v!="function"&&v!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,d,g);break t}l in i?i[l]=d:d===!0?i.setAttribute(l,""):Ey(i,l,d)}}}function Rn(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vt("error",i),Vt("load",i);var d=!1,g=!1,v;for(v in l)if(l.hasOwnProperty(v)){var T=l[v];if(T!=null)switch(v){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:ue(i,a,v,T,l,null)}}g&&ue(i,a,"srcSet",l.srcSet,l,null),d&&ue(i,a,"src",l.src,l,null);return;case"input":Vt("invalid",i);var R=v=T=g=null,P=null,z=null;for(d in l)if(l.hasOwnProperty(d)){var Q=l[d];if(Q!=null)switch(d){case"name":g=Q;break;case"type":T=Q;break;case"checked":P=Q;break;case"defaultChecked":z=Q;break;case"value":v=Q;break;case"defaultValue":R=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(137,a));break;default:ue(i,a,d,Q,l,null)}}lw(i,v,R,P,z,T,g,!1);return;case"select":Vt("invalid",i),d=T=v=null;for(g in l)if(l.hasOwnProperty(g)&&(R=l[g],R!=null))switch(g){case"value":v=R;break;case"defaultValue":T=R;break;case"multiple":d=R;default:ue(i,a,g,R,l,null)}a=v,l=T,i.multiple=!!d,a!=null?Hu(i,!!d,a,!1):l!=null&&Hu(i,!!d,l,!0);return;case"textarea":Vt("invalid",i),v=g=d=null;for(T in l)if(l.hasOwnProperty(T)&&(R=l[T],R!=null))switch(T){case"value":d=R;break;case"defaultValue":g=R;break;case"children":v=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(n(91));break;default:ue(i,a,T,R,l,null)}uw(i,d,g,v);return;case"option":for(P in l)if(l.hasOwnProperty(P)&&(d=l[P],d!=null))switch(P){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:ue(i,a,P,d,l,null)}return;case"dialog":Vt("beforetoggle",i),Vt("toggle",i),Vt("cancel",i),Vt("close",i);break;case"iframe":case"object":Vt("load",i);break;case"video":case"audio":for(d=0;d<cp.length;d++)Vt(cp[d],i);break;case"image":Vt("error",i),Vt("load",i);break;case"details":Vt("toggle",i);break;case"embed":case"source":case"link":Vt("error",i),Vt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in l)if(l.hasOwnProperty(z)&&(d=l[z],d!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:ue(i,a,z,d,l,null)}return;default:if(tA(a)){for(Q in l)l.hasOwnProperty(Q)&&(d=l[Q],d!==void 0&&HE(i,a,Q,d,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(d=l[R],d!=null&&ue(i,a,R,d,l,null))}function Ik(i,a,l,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,T=null,R=null,P=null,z=null,Q=null;for(K in l){var J=l[K];if(l.hasOwnProperty(K)&&J!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":P=J;default:d.hasOwnProperty(K)||ue(i,a,K,null,d,J)}}for(var G in d){var K=d[G];if(J=l[G],d.hasOwnProperty(G)&&(K!=null||J!=null))switch(G){case"type":v=K;break;case"name":g=K;break;case"checked":z=K;break;case"defaultChecked":Q=K;break;case"value":T=K;break;case"defaultValue":R=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(n(137,a));break;default:K!==J&&ue(i,a,G,K,d,J)}}Zv(i,T,R,P,z,Q,v,g);return;case"select":K=T=R=G=null;for(v in l)if(P=l[v],l.hasOwnProperty(v)&&P!=null)switch(v){case"value":break;case"multiple":K=P;default:d.hasOwnProperty(v)||ue(i,a,v,null,d,P)}for(g in d)if(v=d[g],P=l[g],d.hasOwnProperty(g)&&(v!=null||P!=null))switch(g){case"value":G=v;break;case"defaultValue":R=v;break;case"multiple":T=v;default:v!==P&&ue(i,a,g,v,d,P)}a=R,l=T,d=K,G!=null?Hu(i,!!l,G,!1):!!d!=!!l&&(a!=null?Hu(i,!!l,a,!0):Hu(i,!!l,l?[]:"",!1));return;case"textarea":K=G=null;for(R in l)if(g=l[R],l.hasOwnProperty(R)&&g!=null&&!d.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:ue(i,a,R,null,d,g)}for(T in d)if(g=d[T],v=l[T],d.hasOwnProperty(T)&&(g!=null||v!=null))switch(T){case"value":G=g;break;case"defaultValue":K=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(n(91));break;default:g!==v&&ue(i,a,T,g,d,v)}cw(i,G,K);return;case"option":for(var ft in l)if(G=l[ft],l.hasOwnProperty(ft)&&G!=null&&!d.hasOwnProperty(ft))switch(ft){case"selected":i.selected=!1;break;default:ue(i,a,ft,null,d,G)}for(P in d)if(G=d[P],K=l[P],d.hasOwnProperty(P)&&G!==K&&(G!=null||K!=null))switch(P){case"selected":i.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:ue(i,a,P,G,d,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _t in l)G=l[_t],l.hasOwnProperty(_t)&&G!=null&&!d.hasOwnProperty(_t)&&ue(i,a,_t,null,d,G);for(z in d)if(G=d[z],K=l[z],d.hasOwnProperty(z)&&G!==K&&(G!=null||K!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(n(137,a));break;default:ue(i,a,z,G,d,K)}return;default:if(tA(a)){for(var he in l)G=l[he],l.hasOwnProperty(he)&&G!==void 0&&!d.hasOwnProperty(he)&&HE(i,a,he,void 0,d,G);for(Q in d)G=d[Q],K=l[Q],!d.hasOwnProperty(Q)||G===K||G===void 0&&K===void 0||HE(i,a,Q,G,d,K);return}}for(var H in l)G=l[H],l.hasOwnProperty(H)&&G!=null&&!d.hasOwnProperty(H)&&ue(i,a,H,null,d,G);for(J in d)G=d[J],K=l[J],!d.hasOwnProperty(J)||G===K||G==null&&K==null||ue(i,a,J,G,d,K)}function fD(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Pk(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var g=l[d],v=g.transferSize,T=g.initiatorType,R=g.duration;if(v&&R&&fD(T)){for(T=0,R=g.responseEnd,d+=1;d<l.length;d++){var P=l[d],z=P.startTime;if(z>R)break;var Q=P.transferSize,J=P.initiatorType;Q&&fD(J)&&(P=P.responseEnd,T+=Q*(P<R?1:(R-z)/(P-z)))}if(--d,a+=8*(v+T)/(g.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var VE=null,zE=null;function v0(i){return i.nodeType===9?i:i.ownerDocument}function pD(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mD(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function jE(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var GE=null;function Bk(){var i=window.event;return i&&i.type==="popstate"?i===GE?!1:(GE=i,!0):(GE=null,!1)}var gD=typeof setTimeout=="function"?setTimeout:void 0,kk=typeof clearTimeout=="function"?clearTimeout:void 0,yD=typeof Promise=="function"?Promise:void 0,Uk=typeof queueMicrotask=="function"?queueMicrotask:typeof yD<"u"?function(i){return yD.resolve(null).then(i).catch(Fk)}:gD;function Fk(i){setTimeout(function(){throw i})}function Oo(i){return i==="head"}function bD(i,a){var l=a,d=0;do{var g=l.nextSibling;if(i.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"||l==="/&"){if(d===0){i.removeChild(g),bh(a);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")hp(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,hp(l);for(var v=l.firstChild;v;){var T=v.nextSibling,R=v.nodeName;v[Mf]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&v.rel.toLowerCase()==="stylesheet"||l.removeChild(v),v=T}}else l==="body"&&hp(i.ownerDocument.body);l=g}while(l);bh(a)}function vD(i,a){var l=i;i=0;do{var d=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=d}while(l)}function YE(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":YE(l),Wv(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function Hk(i,a,l,d){for(;i.nodeType===1;){var g=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[Mf])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=Ss(i.nextSibling),i===null)break}return null}function Vk(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Ss(i.nextSibling),i===null))return null;return i}function AD(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Ss(i.nextSibling),i===null))return null;return i}function XE(i){return i.data==="$?"||i.data==="$~"}function qE(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function zk(i,a){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||l.readyState!=="loading")a();else{var d=function(){a(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function Ss(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var KE=null;function ED(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(a===0)return Ss(i.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}i=i.nextSibling}return null}function SD(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return i;a--}else l!=="/$"&&l!=="/&"||a++}i=i.previousSibling}return null}function TD(i,a,l){switch(a=v0(l),i){case"html":if(i=a.documentElement,!i)throw Error(n(452));return i;case"head":if(i=a.head,!i)throw Error(n(453));return i;case"body":if(i=a.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function hp(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Wv(i)}var Ts=new Map,_D=new Set;function A0(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var pr=X.d;X.d={f:jk,r:Gk,D:Yk,C:Xk,L:qk,m:Kk,X:Wk,S:$k,M:Qk};function jk(){var i=pr.f(),a=h0();return i||a}function Gk(i){var a=ku(i);a!==null&&a.tag===5&&a.type==="form"?Vx(a):pr.r(i)}var mh=typeof document>"u"?null:document;function wD(i,a,l){var d=mh;if(d&&typeof a=="string"&&a){var g=ms(a);g='link[rel="'+i+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),_D.has(g)||(_D.add(g),i={rel:i,crossOrigin:l,href:a},d.querySelector(g)===null&&(a=d.createElement("link"),Rn(a,"link",i),yn(a),d.head.appendChild(a)))}}function Yk(i){pr.D(i),wD("dns-prefetch",i,null)}function Xk(i,a){pr.C(i,a),wD("preconnect",i,a)}function qk(i,a,l){pr.L(i,a,l);var d=mh;if(d&&i&&a){var g='link[rel="preload"][as="'+ms(a)+'"]';a==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+ms(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+ms(l.imageSizes)+'"]')):g+='[href="'+ms(i)+'"]';var v=g;switch(a){case"style":v=gh(i);break;case"script":v=yh(i)}Ts.has(v)||(i=y({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),Ts.set(v,i),d.querySelector(g)!==null||a==="style"&&d.querySelector(dp(v))||a==="script"&&d.querySelector(fp(v))||(a=d.createElement("link"),Rn(a,"link",i),yn(a),d.head.appendChild(a)))}}function Kk(i,a){pr.m(i,a);var l=mh;if(l&&i){var d=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+ms(d)+'"][href="'+ms(i)+'"]',v=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=yh(i)}if(!Ts.has(v)&&(i=y({rel:"modulepreload",href:i},a),Ts.set(v,i),l.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(fp(v)))return}d=l.createElement("link"),Rn(d,"link",i),yn(d),l.head.appendChild(d)}}}function $k(i,a,l){pr.S(i,a,l);var d=mh;if(d&&i){var g=Uu(d).hoistableStyles,v=gh(i);a=a||"default";var T=g.get(v);if(!T){var R={loading:0,preload:null};if(T=d.querySelector(dp(v)))R.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":a},l),(l=Ts.get(v))&&$E(i,l);var P=T=d.createElement("link");yn(P),Rn(P,"link",i),P._p=new Promise(function(z,Q){P.onload=z,P.onerror=Q}),P.addEventListener("load",function(){R.loading|=1}),P.addEventListener("error",function(){R.loading|=2}),R.loading|=4,E0(T,a,d)}T={type:"stylesheet",instance:T,count:1,state:R},g.set(v,T)}}}function Wk(i,a){pr.X(i,a);var l=mh;if(l&&i){var d=Uu(l).hoistableScripts,g=yh(i),v=d.get(g);v||(v=l.querySelector(fp(g)),v||(i=y({src:i,async:!0},a),(a=Ts.get(g))&&WE(i,a),v=l.createElement("script"),yn(v),Rn(v,"link",i),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(g,v))}}function Qk(i,a){pr.M(i,a);var l=mh;if(l&&i){var d=Uu(l).hoistableScripts,g=yh(i),v=d.get(g);v||(v=l.querySelector(fp(g)),v||(i=y({src:i,async:!0,type:"module"},a),(a=Ts.get(g))&&WE(i,a),v=l.createElement("script"),yn(v),Rn(v,"link",i),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(g,v))}}function xD(i,a,l,d){var g=(g=At.current)?A0(g):null;if(!g)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=gh(l.href),l=Uu(g).hoistableStyles,d=l.get(a),d||(d={type:"style",instance:null,count:0,state:null},l.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=gh(l.href);var v=Uu(g).hoistableStyles,T=v.get(i);if(T||(g=g.ownerDocument||g,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,T),(v=g.querySelector(dp(i)))&&!v._p&&(T.instance=v,T.state.loading=5),Ts.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ts.set(i,l),v||Zk(g,i,l,T.state))),a&&d===null)throw Error(n(528,""));return T}if(a&&d!==null)throw Error(n(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=yh(l),l=Uu(g).hoistableScripts,d=l.get(a),d||(d={type:"script",instance:null,count:0,state:null},l.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function gh(i){return'href="'+ms(i)+'"'}function dp(i){return'link[rel="stylesheet"]['+i+"]"}function CD(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function Zk(i,a,l,d){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=i.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),Rn(a,"link",l),yn(a),i.head.appendChild(a))}function yh(i){return'[src="'+ms(i)+'"]'}function fp(i){return"script[async]"+i}function DD(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var d=i.querySelector('style[data-href~="'+ms(l.href)+'"]');if(d)return a.instance=d,yn(d),d;var g=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),yn(d),Rn(d,"style",g),E0(d,l.precedence,i),a.instance=d;case"stylesheet":g=gh(l.href);var v=i.querySelector(dp(g));if(v)return a.state.loading|=4,a.instance=v,yn(v),v;d=CD(l),(g=Ts.get(g))&&$E(d,g),v=(i.ownerDocument||i).createElement("link"),yn(v);var T=v;return T._p=new Promise(function(R,P){T.onload=R,T.onerror=P}),Rn(v,"link",d),a.state.loading|=4,E0(v,l.precedence,i),a.instance=v;case"script":return v=yh(l.src),(g=i.querySelector(fp(v)))?(a.instance=g,yn(g),g):(d=l,(g=Ts.get(v))&&(d=y({},l),WE(d,g)),i=i.ownerDocument||i,g=i.createElement("script"),yn(g),Rn(g,"link",d),i.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(n(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,E0(d,l.precedence,i));return a.instance}function E0(i,a,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,v=g,T=0;T<d.length;T++){var R=d[T];if(R.dataset.precedence===a)v=R;else if(v!==g)break}v?v.parentNode.insertBefore(i,v.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function $E(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function WE(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var S0=null;function MD(i,a,l){if(S0===null){var d=new Map,g=S0=new Map;g.set(l,d)}else g=S0,d=g.get(l),d||(d=new Map,g.set(l,d));if(d.has(i))return d;for(d.set(i,null),l=l.getElementsByTagName(i),g=0;g<l.length;g++){var v=l[g];if(!(v[Mf]||v[xn]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var T=v.getAttribute(a)||"";T=i+T;var R=d.get(T);R?R.push(v):d.set(T,[v])}}return d}function RD(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function Jk(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function OD(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function tU(i,a,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var g=gh(d.href),v=a.querySelector(dp(g));if(v){a=v._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=T0.bind(i),a.then(i,i)),l.state.loading|=4,l.instance=v,yn(v);return}v=a.ownerDocument||a,d=CD(d),(g=Ts.get(g))&&$E(d,g),v=v.createElement("link"),yn(v);var T=v;T._p=new Promise(function(R,P){T.onload=R,T.onerror=P}),Rn(v,"link",d),l.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=T0.bind(i),a.addEventListener("load",l),a.addEventListener("error",l))}}var QE=0;function eU(i,a){return i.stylesheets&&i.count===0&&w0(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var d=setTimeout(function(){if(i.stylesheets&&w0(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+a);0<i.imgBytes&&QE===0&&(QE=62500*Pk());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&w0(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>QE?50:800)+a);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(g)}}:null}function T0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)w0(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var _0=null;function w0(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,_0=new Map,a.forEach(nU,i),_0=null,T0.call(i))}function nU(i,a){if(!(a.state.loading&4)){var l=_0.get(i);if(l)var d=l.get(null);else{l=new Map,_0.set(i,l);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var T=g[v];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),d=T)}d&&l.set(null,d)}g=a.instance,T=g.getAttribute("data-precedence"),v=l.get(T)||d,v===d&&l.set(null,g),l.set(T,g),this.count++,d=T0.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),v?v.parentNode.insertBefore(g,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),a.state.loading|=4}}var pp={$$typeof:M,Provider:null,Consumer:null,_currentValue:it,_currentValue2:it,_threadCount:0};function iU(i,a,l,d,g,v,T,R,P){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xv(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xv(0),this.hiddenUpdates=Xv(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function ND(i,a,l,d,g,v,T,R,P,z,Q,J){return i=new iU(i,a,l,T,P,z,Q,J,R),a=1,v===!0&&(a|=24),v=ki(3,null,null,a),i.current=v,v.stateNode=i,a=RA(),a.refCount++,i.pooledCache=a,a.refCount++,v.memoizedState={element:d,isDehydrated:l,cache:a},IA(v),i}function LD(i){return i?(i=Ku,i):Ku}function ID(i,a,l,d,g,v){g=LD(g),d.context===null?d.context=g:d.pendingContext=g,d=Ao(a),d.payload={element:l},v=v===void 0?null:v,v!==null&&(d.callback=v),l=Eo(i,d,a),l!==null&&(vi(l,i,a),Xf(l,i,a))}function PD(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function ZE(i,a){PD(i,a),(i=i.alternate)&&PD(i,a)}function BD(i){if(i.tag===13||i.tag===31){var a=ql(i,67108864);a!==null&&vi(a,i,67108864),ZE(i,67108864)}}function kD(i){if(i.tag===13||i.tag===31){var a=zi();a=qv(a);var l=ql(i,a);l!==null&&vi(l,i,a),ZE(i,a)}}var x0=!0;function sU(i,a,l,d){var g=F.T;F.T=null;var v=X.p;try{X.p=2,JE(i,a,l,d)}finally{X.p=v,F.T=g}}function aU(i,a,l,d){var g=F.T;F.T=null;var v=X.p;try{X.p=8,JE(i,a,l,d)}finally{X.p=v,F.T=g}}function JE(i,a,l,d){if(x0){var g=tS(d);if(g===null)FE(i,a,d,C0,l),FD(i,d);else if(oU(g,i,a,l,d))d.stopPropagation();else if(FD(i,d),a&4&&-1<rU.indexOf(i)){for(;g!==null;){var v=ku(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var T=zl(v.pendingLanes);if(T!==0){var R=v;for(R.pendingLanes|=2,R.entangledLanes|=2;T;){var P=1<<31-Pi(T);R.entanglements[1]|=P,T&=~P}ba(v),(Zt&6)===0&&(c0=Li()+500,lp(0))}}break;case 31:case 13:R=ql(v,2),R!==null&&vi(R,v,2),h0(),ZE(v,2)}if(v=tS(d),v===null&&FE(i,a,d,C0,l),v===g)break;g=v}g!==null&&d.stopPropagation()}else FE(i,a,d,null,l)}}function tS(i){return i=nA(i),eS(i)}var C0=null;function eS(i){if(C0=null,i=Bu(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=u(a),i!==null)return i;i=null}else if(l===31){if(i=h(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return C0=i,null}function UD(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(YP()){case X1:return 2;case q1:return 8;case gy:case XP:return 32;case K1:return 268435456;default:return 32}default:return 32}}var nS=!1,No=null,Lo=null,Io=null,mp=new Map,gp=new Map,Po=[],rU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function FD(i,a){switch(i){case"focusin":case"focusout":No=null;break;case"dragenter":case"dragleave":Lo=null;break;case"mouseover":case"mouseout":Io=null;break;case"pointerover":case"pointerout":mp.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":gp.delete(a.pointerId)}}function yp(i,a,l,d,g,v){return i===null||i.nativeEvent!==v?(i={blockedOn:a,domEventName:l,eventSystemFlags:d,nativeEvent:v,targetContainers:[g]},a!==null&&(a=ku(a),a!==null&&BD(a)),i):(i.eventSystemFlags|=d,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function oU(i,a,l,d,g){switch(a){case"focusin":return No=yp(No,i,a,l,d,g),!0;case"dragenter":return Lo=yp(Lo,i,a,l,d,g),!0;case"mouseover":return Io=yp(Io,i,a,l,d,g),!0;case"pointerover":var v=g.pointerId;return mp.set(v,yp(mp.get(v)||null,i,a,l,d,g)),!0;case"gotpointercapture":return v=g.pointerId,gp.set(v,yp(gp.get(v)||null,i,a,l,d,g)),!0}return!1}function HD(i){var a=Bu(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){i.blockedOn=a,tw(i.priority,function(){kD(l)});return}}else if(a===31){if(a=h(l),a!==null){i.blockedOn=a,tw(i.priority,function(){kD(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function D0(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=tS(i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);eA=d,l.target.dispatchEvent(d),eA=null}else return a=ku(l),a!==null&&BD(a),i.blockedOn=l,!1;a.shift()}return!0}function VD(i,a,l){D0(i)&&l.delete(a)}function lU(){nS=!1,No!==null&&D0(No)&&(No=null),Lo!==null&&D0(Lo)&&(Lo=null),Io!==null&&D0(Io)&&(Io=null),mp.forEach(VD),gp.forEach(VD)}function M0(i,a){i.blockedOn===a&&(i.blockedOn=null,nS||(nS=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,lU)))}var R0=null;function zD(i){R0!==i&&(R0=i,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){R0===i&&(R0=null);for(var a=0;a<i.length;a+=3){var l=i[a],d=i[a+1],g=i[a+2];if(typeof d!="function"){if(eS(d||l)===null)continue;break}var v=ku(l);v!==null&&(i.splice(a,3),a-=3,tE(v,{pending:!0,data:g,method:l.method,action:d},d,g))}}))}function bh(i){function a(P){return M0(P,i)}No!==null&&M0(No,i),Lo!==null&&M0(Lo,i),Io!==null&&M0(Io,i),mp.forEach(a),gp.forEach(a);for(var l=0;l<Po.length;l++){var d=Po[l];d.blockedOn===i&&(d.blockedOn=null)}for(;0<Po.length&&(l=Po[0],l.blockedOn===null);)HD(l),l.blockedOn===null&&Po.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var g=l[d],v=l[d+1],T=g[fi]||null;if(typeof v=="function")T||zD(l);else if(T){var R=null;if(v&&v.hasAttribute("formAction")){if(g=v,T=v[fi]||null)R=T.formAction;else if(eS(g)!==null)continue}else R=T.action;typeof R=="function"?l[d+1]=R:(l.splice(d,3),d-=3),zD(l)}}}function jD(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(T){return g=T})},focusReset:"manual",scroll:"manual"})}function a(){g!==null&&(g(),g=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),g!==null&&(g(),g=null)}}}function iS(i){this._internalRoot=i}O0.prototype.render=iS.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(n(409));var l=a.current,d=zi();ID(l,d,i,a,null,null)},O0.prototype.unmount=iS.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;ID(i.current,2,null,i,null,null),h0(),a[Pu]=null}};function O0(i){this._internalRoot=i}O0.prototype.unstable_scheduleHydration=function(i){if(i){var a=J1();i={blockedOn:null,target:i,priority:a};for(var l=0;l<Po.length&&a!==0&&a<Po[l].priority;l++);Po.splice(l,0,i),l===0&&HD(i)}};var GD=t.version;if(GD!=="19.2.4")throw Error(n(527,GD,"19.2.4"));X.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=p(a),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var cU={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var N0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!N0.isDisabled&&N0.supportsFiber)try{xf=N0.inject(cU),Ii=N0}catch{}}return vp.createRoot=function(i,a){if(!r(i))throw Error(n(299));var l=!1,d="",g=Qx,v=Zx,T=Jx;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError)),a=ND(i,1,!1,null,null,l,d,null,g,v,T,jD),i[Pu]=a.current,UE(i),new iS(a)},vp.hydrateRoot=function(i,a,l){if(!r(i))throw Error(n(299));var d=!1,g="",v=Qx,T=Zx,R=Jx,P=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(P=l.formState)),a=ND(i,1,!0,a,l??null,d,g,P,v,T,R,jD),a.context=LD(null),l=a.current,d=zi(),d=qv(d),g=Ao(d),g.callback=null,Eo(l,g,d),l=d,a.current.lanes=l,Df(a,l),ba(a),i[Pu]=a.current,UE(i),new O0(a)},vp.version="19.2.4",vp}var eM;function EU(){if(eM)return oS.exports;eM=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),oS.exports=AU(),oS.exports}var SU=EU();const W_=st.createContext({});function Q_(s){const t=st.useRef(null);return t.current===null&&(t.current=s()),t.current}const fN=typeof window<"u",pN=fN?st.useLayoutEffect:st.useEffect,xv=st.createContext(null);function Z_(s,t){s.indexOf(t)===-1&&s.push(t)}function Ub(s,t){const e=s.indexOf(t);e>-1&&s.splice(e,1)}const qa=(s,t,e)=>e>t?t:e<s?s:e;let J_=()=>{};const oo={},mN=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function gN(s){return typeof s=="object"&&s!==null}const yN=s=>/^0[^.\s]+$/u.test(s);function bN(s){let t;return()=>(t===void 0&&(t=s()),t)}const zs=s=>s,TU=(s,t)=>e=>t(s(e)),oy=(...s)=>s.reduce(TU),nm=(s,t,e)=>{const n=t-s;return n===0?1:(e-s)/n};class t1{constructor(){this.subscriptions=[]}add(t){return Z_(this.subscriptions,t),()=>Ub(this.subscriptions,t)}notify(t,e,n){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,e,n);else for(let o=0;o<r;o++){const u=this.subscriptions[o];u&&u(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const da=s=>s*1e3,Vs=s=>s/1e3;function vN(s,t){return t?s*(1e3/t):0}const AN=(s,t,e)=>(((1-3*e+3*t)*s+(3*e-6*t))*s+3*t)*s,_U=1e-7,wU=12;function xU(s,t,e,n,r){let o,u,h=0;do u=t+(e-t)/2,o=AN(u,n,r)-s,o>0?e=u:t=u;while(Math.abs(o)>_U&&++h<wU);return u}function ly(s,t,e,n){if(s===t&&e===n)return zs;const r=o=>xU(o,0,1,s,e);return o=>o===0||o===1?o:AN(r(o),t,n)}const EN=s=>t=>t<=.5?s(2*t)/2:(2-s(2*(1-t)))/2,SN=s=>t=>1-s(1-t),TN=ly(.33,1.53,.69,.99),e1=SN(TN),_N=EN(e1),wN=s=>(s*=2)<1?.5*e1(s):.5*(2-Math.pow(2,-10*(s-1))),n1=s=>1-Math.sin(Math.acos(s)),xN=SN(n1),CN=EN(n1),CU=ly(.42,0,1,1),DU=ly(0,0,.58,1),DN=ly(.42,0,.58,1),MU=s=>Array.isArray(s)&&typeof s[0]!="number",MN=s=>Array.isArray(s)&&typeof s[0]=="number",RU={linear:zs,easeIn:CU,easeInOut:DN,easeOut:DU,circIn:n1,circInOut:CN,circOut:xN,backIn:e1,backInOut:_N,backOut:TN,anticipate:wN},OU=s=>typeof s=="string",nM=s=>{if(MN(s)){J_(s.length===4);const[t,e,n,r]=s;return ly(t,e,n,r)}else if(OU(s))return RU[s];return s},L0=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function NU(s,t){let e=new Set,n=new Set,r=!1,o=!1;const u=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function f(m){u.has(m)&&(p.schedule(m),s()),m(h)}const p={schedule:(m,y=!1,b=!1)=>{const S=b&&r?e:n;return y&&u.add(m),S.has(m)||S.add(m),m},cancel:m=>{n.delete(m),u.delete(m)},process:m=>{if(h=m,r){o=!0;return}r=!0,[e,n]=[n,e],e.forEach(f),e.clear(),r=!1,o&&(o=!1,p.process(m))}};return p}const LU=40;function RN(s,t){let e=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>e=!0,u=L0.reduce((M,N)=>(M[N]=NU(o),M),{}),{setup:h,read:f,resolveKeyframes:p,preUpdate:m,update:y,preRender:b,render:A,postRender:S}=u,w=()=>{const M=oo.useManualTiming?r.timestamp:performance.now();e=!1,oo.useManualTiming||(r.delta=n?1e3/60:Math.max(Math.min(M-r.timestamp,LU),1)),r.timestamp=M,r.isProcessing=!0,h.process(r),f.process(r),p.process(r),m.process(r),y.process(r),b.process(r),A.process(r),S.process(r),r.isProcessing=!1,e&&t&&(n=!1,s(w))},x=()=>{e=!0,n=!0,r.isProcessing||s(w)};return{schedule:L0.reduce((M,N)=>{const L=u[N];return M[N]=(I,k=!1,j=!1)=>(e||x(),L.schedule(I,k,j)),M},{}),cancel:M=>{for(let N=0;N<L0.length;N++)u[L0[N]].cancel(M)},state:r,steps:u}}const{schedule:_e,cancel:kl,state:kn,steps:hS}=RN(typeof requestAnimationFrame<"u"?requestAnimationFrame:zs,!0);let Q0;function IU(){Q0=void 0}const oi={now:()=>(Q0===void 0&&oi.set(kn.isProcessing||oo.useManualTiming?kn.timestamp:performance.now()),Q0),set:s=>{Q0=s,queueMicrotask(IU)}},ON=s=>t=>typeof t=="string"&&t.startsWith(s),NN=ON("--"),PU=ON("var(--"),i1=s=>PU(s)?BU.test(s.split("/*")[0].trim()):!1,BU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function iM(s){return typeof s!="string"?!1:s.split("/*")[0].includes("var(--")}const Ef={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},im={...Ef,transform:s=>qa(0,1,s)},I0={...Ef,default:1},Qp=s=>Math.round(s*1e5)/1e5,s1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function kU(s){return s==null}const UU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,a1=(s,t)=>e=>!!(typeof e=="string"&&UU.test(e)&&e.startsWith(s)||t&&!kU(e)&&Object.prototype.hasOwnProperty.call(e,t)),LN=(s,t,e)=>n=>{if(typeof n!="string")return n;const[r,o,u,h]=n.match(s1);return{[s]:parseFloat(r),[t]:parseFloat(o),[e]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},FU=s=>qa(0,255,s),dS={...Ef,transform:s=>Math.round(FU(s))},mc={test:a1("rgb","red"),parse:LN("red","green","blue"),transform:({red:s,green:t,blue:e,alpha:n=1})=>"rgba("+dS.transform(s)+", "+dS.transform(t)+", "+dS.transform(e)+", "+Qp(im.transform(n))+")"};function HU(s){let t="",e="",n="",r="";return s.length>5?(t=s.substring(1,3),e=s.substring(3,5),n=s.substring(5,7),r=s.substring(7,9)):(t=s.substring(1,2),e=s.substring(2,3),n=s.substring(3,4),r=s.substring(4,5),t+=t,e+=e,n+=n,r+=r),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}}const GS={test:a1("#"),parse:HU,transform:mc.transform},cy=s=>({test:t=>typeof t=="string"&&t.endsWith(s)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${s}`}),Uo=cy("deg"),Xa=cy("%"),pt=cy("px"),VU=cy("vh"),zU=cy("vw"),sM={...Xa,parse:s=>Xa.parse(s)/100,transform:s=>Xa.transform(s*100)},Rh={test:a1("hsl","hue"),parse:LN("hue","saturation","lightness"),transform:({hue:s,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(s)+", "+Xa.transform(Qp(t))+", "+Xa.transform(Qp(e))+", "+Qp(im.transform(n))+")"},on={test:s=>mc.test(s)||GS.test(s)||Rh.test(s),parse:s=>mc.test(s)?mc.parse(s):Rh.test(s)?Rh.parse(s):GS.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?mc.transform(s):Rh.transform(s),getAnimatableNone:s=>{const t=on.parse(s);return t.alpha=0,on.transform(t)}},jU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function GU(s){var t,e;return isNaN(s)&&typeof s=="string"&&(((t=s.match(s1))==null?void 0:t.length)||0)+(((e=s.match(jU))==null?void 0:e.length)||0)>0}const IN="number",PN="color",YU="var",XU="var(",aM="${}",qU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function sm(s){const t=s.toString(),e=[],n={color:[],number:[],var:[]},r=[];let o=0;const h=t.replace(qU,f=>(on.test(f)?(n.color.push(o),r.push(PN),e.push(on.parse(f))):f.startsWith(XU)?(n.var.push(o),r.push(YU),e.push(f)):(n.number.push(o),r.push(IN),e.push(parseFloat(f))),++o,aM)).split(aM);return{values:e,split:h,indexes:n,types:r}}function BN(s){return sm(s).values}function kN(s){const{split:t,types:e}=sm(s),n=t.length;return r=>{let o="";for(let u=0;u<n;u++)if(o+=t[u],r[u]!==void 0){const h=e[u];h===IN?o+=Qp(r[u]):h===PN?o+=on.transform(r[u]):o+=r[u]}return o}}const KU=s=>typeof s=="number"?0:on.test(s)?on.getAnimatableNone(s):s;function $U(s){const t=BN(s);return kN(s)(t.map(KU))}const fa={test:GU,parse:BN,createTransformer:kN,getAnimatableNone:$U};function fS(s,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?s+(t-s)*6*e:e<1/2?t:e<2/3?s+(t-s)*(2/3-e)*6:s}function WU({hue:s,saturation:t,lightness:e,alpha:n}){s/=360,t/=100,e/=100;let r=0,o=0,u=0;if(!t)r=o=u=e;else{const h=e<.5?e*(1+t):e+t-e*t,f=2*e-h;r=fS(f,h,s+1/3),o=fS(f,h,s),u=fS(f,h,s-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(u*255),alpha:n}}function Fb(s,t){return e=>e>0?t:s}const ke=(s,t,e)=>s+(t-s)*e,pS=(s,t,e)=>{const n=s*s,r=e*(t*t-n)+n;return r<0?0:Math.sqrt(r)},QU=[GS,mc,Rh],ZU=s=>QU.find(t=>t.test(s));function rM(s){const t=ZU(s);if(!t)return!1;let e=t.parse(s);return t===Rh&&(e=WU(e)),e}const oM=(s,t)=>{const e=rM(s),n=rM(t);if(!e||!n)return Fb(s,t);const r={...e};return o=>(r.red=pS(e.red,n.red,o),r.green=pS(e.green,n.green,o),r.blue=pS(e.blue,n.blue,o),r.alpha=ke(e.alpha,n.alpha,o),mc.transform(r))},YS=new Set(["none","hidden"]);function JU(s,t){return YS.has(s)?e=>e<=0?s:t:e=>e>=1?t:s}function tF(s,t){return e=>ke(s,t,e)}function r1(s){return typeof s=="number"?tF:typeof s=="string"?i1(s)?Fb:on.test(s)?oM:iF:Array.isArray(s)?UN:typeof s=="object"?on.test(s)?oM:eF:Fb}function UN(s,t){const e=[...s],n=e.length,r=s.map((o,u)=>r1(o)(o,t[u]));return o=>{for(let u=0;u<n;u++)e[u]=r[u](o);return e}}function eF(s,t){const e={...s,...t},n={};for(const r in e)s[r]!==void 0&&t[r]!==void 0&&(n[r]=r1(s[r])(s[r],t[r]));return r=>{for(const o in n)e[o]=n[o](r);return e}}function nF(s,t){const e=[],n={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const o=t.types[r],u=s.indexes[o][n[o]],h=s.values[u]??0;e[r]=h,n[o]++}return e}const iF=(s,t)=>{const e=fa.createTransformer(t),n=sm(s),r=sm(t);return n.indexes.var.length===r.indexes.var.length&&n.indexes.color.length===r.indexes.color.length&&n.indexes.number.length>=r.indexes.number.length?YS.has(s)&&!r.values.length||YS.has(t)&&!n.values.length?JU(s,t):oy(UN(nF(n,r),r.values),e):Fb(s,t)};function FN(s,t,e){return typeof s=="number"&&typeof t=="number"&&typeof e=="number"?ke(s,t,e):r1(s)(s,t)}const sF=s=>{const t=({timestamp:e})=>s(e);return{start:(e=!0)=>_e.update(t,e),stop:()=>kl(t),now:()=>kn.isProcessing?kn.timestamp:oi.now()}},HN=(s,t,e=10)=>{let n="";const r=Math.max(Math.round(t/e),2);for(let o=0;o<r;o++)n+=Math.round(s(o/(r-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Hb=2e4;function o1(s){let t=0;const e=50;let n=s.next(t);for(;!n.done&&t<Hb;)t+=e,n=s.next(t);return t>=Hb?1/0:t}function aF(s,t=100,e){const n=e({...s,keyframes:[0,t]}),r=Math.min(o1(n),Hb);return{type:"keyframes",ease:o=>n.next(r*o).value/t,duration:Vs(r)}}const rF=5;function VN(s,t,e){const n=Math.max(t-rF,0);return vN(e-s(n),t-n)}const Ge={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},mS=.001;function oF({duration:s=Ge.duration,bounce:t=Ge.bounce,velocity:e=Ge.velocity,mass:n=Ge.mass}){let r,o,u=1-t;u=qa(Ge.minDamping,Ge.maxDamping,u),s=qa(Ge.minDuration,Ge.maxDuration,Vs(s)),u<1?(r=p=>{const m=p*u,y=m*s,b=m-e,A=XS(p,u),S=Math.exp(-y);return mS-b/A*S},o=p=>{const y=p*u*s,b=y*e+e,A=Math.pow(u,2)*Math.pow(p,2)*s,S=Math.exp(-y),w=XS(Math.pow(p,2),u);return(-r(p)+mS>0?-1:1)*((b-A)*S)/w}):(r=p=>{const m=Math.exp(-p*s),y=(p-e)*s+1;return-mS+m*y},o=p=>{const m=Math.exp(-p*s),y=(e-p)*(s*s);return m*y});const h=5/s,f=cF(r,o,h);if(s=da(s),isNaN(f))return{stiffness:Ge.stiffness,damping:Ge.damping,duration:s};{const p=Math.pow(f,2)*n;return{stiffness:p,damping:u*2*Math.sqrt(n*p),duration:s}}}const lF=12;function cF(s,t,e){let n=e;for(let r=1;r<lF;r++)n=n-s(n)/t(n);return n}function XS(s,t){return s*Math.sqrt(1-t*t)}const uF=["duration","bounce"],hF=["stiffness","damping","mass"];function lM(s,t){return t.some(e=>s[e]!==void 0)}function dF(s){let t={velocity:Ge.velocity,stiffness:Ge.stiffness,damping:Ge.damping,mass:Ge.mass,isResolvedFromDuration:!1,...s};if(!lM(s,hF)&&lM(s,uF))if(t.velocity=0,s.visualDuration){const e=s.visualDuration,n=2*Math.PI/(e*1.2),r=n*n,o=2*qa(.05,1,1-(s.bounce||0))*Math.sqrt(r);t={...t,mass:Ge.mass,stiffness:r,damping:o}}else{const e=oF({...s,velocity:0});t={...t,...e,mass:Ge.mass},t.isResolvedFromDuration=!0}return t}function Vb(s=Ge.visualDuration,t=Ge.bounce){const e=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:t}:s;let{restSpeed:n,restDelta:r}=e;const o=e.keyframes[0],u=e.keyframes[e.keyframes.length-1],h={done:!1,value:o},{stiffness:f,damping:p,mass:m,duration:y,velocity:b,isResolvedFromDuration:A}=dF({...e,velocity:-Vs(e.velocity||0)}),S=b||0,w=p/(2*Math.sqrt(f*m)),x=u-o,C=Vs(Math.sqrt(f/m)),O=Math.abs(x)<5;n||(n=O?Ge.restSpeed.granular:Ge.restSpeed.default),r||(r=O?Ge.restDelta.granular:Ge.restDelta.default);let M;if(w<1){const L=XS(C,w);M=I=>{const k=Math.exp(-w*C*I);return u-k*((S+w*C*x)/L*Math.sin(L*I)+x*Math.cos(L*I))}}else if(w===1)M=L=>u-Math.exp(-C*L)*(x+(S+C*x)*L);else{const L=C*Math.sqrt(w*w-1);M=I=>{const k=Math.exp(-w*C*I),j=Math.min(L*I,300);return u-k*((S+w*C*x)*Math.sinh(j)+L*x*Math.cosh(j))/L}}const N={calculatedDuration:A&&y||null,next:L=>{const I=M(L);if(A)h.done=L>=y;else{let k=L===0?S:0;w<1&&(k=L===0?da(S):VN(M,L,I));const j=Math.abs(k)<=n,W=Math.abs(u-I)<=r;h.done=j&&W}return h.value=h.done?u:I,h},toString:()=>{const L=Math.min(o1(N),Hb),I=HN(k=>N.next(L*k).value,L,30);return L+"ms "+I},toTransition:()=>{}};return N}Vb.applyToOptions=s=>{const t=aF(s,100,Vb);return s.ease=t.ease,s.duration=da(t.duration),s.type="keyframes",s};function qS({keyframes:s,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:u,min:h,max:f,restDelta:p=.5,restSpeed:m}){const y=s[0],b={done:!1,value:y},A=j=>h!==void 0&&j<h||f!==void 0&&j>f,S=j=>h===void 0?f:f===void 0||Math.abs(h-j)<Math.abs(f-j)?h:f;let w=e*t;const x=y+w,C=u===void 0?x:u(x);C!==x&&(w=C-y);const O=j=>-w*Math.exp(-j/n),M=j=>C+O(j),N=j=>{const W=O(j),nt=M(j);b.done=Math.abs(W)<=p,b.value=b.done?C:nt};let L,I;const k=j=>{A(b.value)&&(L=j,I=Vb({keyframes:[b.value,S(b.value)],velocity:VN(M,j,b.value),damping:r,stiffness:o,restDelta:p,restSpeed:m}))};return k(0),{calculatedDuration:null,next:j=>{let W=!1;return!I&&L===void 0&&(W=!0,N(j),k(j)),L!==void 0&&j>=L?I.next(j-L):(!W&&N(j),b)}}}function fF(s,t,e){const n=[],r=e||oo.mix||FN,o=s.length-1;for(let u=0;u<o;u++){let h=r(s[u],s[u+1]);if(t){const f=Array.isArray(t)?t[u]||zs:t;h=oy(f,h)}n.push(h)}return n}function pF(s,t,{clamp:e=!0,ease:n,mixer:r}={}){const o=s.length;if(J_(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const u=s[0]===s[1];s[0]>s[o-1]&&(s=[...s].reverse(),t=[...t].reverse());const h=fF(t,n,r),f=h.length,p=m=>{if(u&&m<s[0])return t[0];let y=0;if(f>1)for(;y<s.length-2&&!(m<s[y+1]);y++);const b=nm(s[y],s[y+1],m);return h[y](b)};return e?m=>p(qa(s[0],s[o-1],m)):p}function mF(s,t){const e=s[s.length-1];for(let n=1;n<=t;n++){const r=nm(0,t,n);s.push(ke(e,1,r))}}function gF(s){const t=[0];return mF(t,s.length-1),t}function yF(s,t){return s.map(e=>e*t)}function bF(s,t){return s.map(()=>t||DN).splice(0,s.length-1)}function Zp({duration:s=300,keyframes:t,times:e,ease:n="easeInOut"}){const r=MU(n)?n.map(nM):nM(n),o={done:!1,value:t[0]},u=yF(e&&e.length===t.length?e:gF(t),s),h=pF(u,t,{ease:Array.isArray(r)?r:bF(t,r)});return{calculatedDuration:s,next:f=>(o.value=h(f),o.done=f>=s,o)}}const vF=s=>s!==null;function l1(s,{repeat:t,repeatType:e="loop"},n,r=1){const o=s.filter(vF),h=r<0||t&&e!=="loop"&&t%2===1?0:o.length-1;return!h||n===void 0?o[h]:n}const AF={decay:qS,inertia:qS,tween:Zp,keyframes:Zp,spring:Vb};function zN(s){typeof s.type=="string"&&(s.type=AF[s.type])}class c1{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const EF=s=>s/100;class u1 extends c1{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,r;const{motionValue:e}=this.options;e&&e.updatedAt!==oi.now()&&this.tick(oi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(r=(n=this.options).onStop)==null||r.call(n))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;zN(t);const{type:e=Zp,repeat:n=0,repeatDelay:r=0,repeatType:o,velocity:u=0}=t;let{keyframes:h}=t;const f=e||Zp;f!==Zp&&typeof h[0]!="number"&&(this.mixKeyframes=oy(EF,FN(h[0],h[1])),h=[0,100]);const p=f({...t,keyframes:h});o==="mirror"&&(this.mirroredGenerator=f({...t,keyframes:[...h].reverse(),velocity:-u})),p.calculatedDuration===null&&(p.calculatedDuration=o1(p));const{calculatedDuration:m}=p;this.calculatedDuration=m,this.resolvedDuration=m+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=p}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:n,totalDuration:r,mixKeyframes:o,mirroredGenerator:u,resolvedDuration:h,calculatedDuration:f}=this;if(this.startTime===null)return n.next(0);const{delay:p=0,keyframes:m,repeat:y,repeatType:b,repeatDelay:A,type:S,onUpdate:w,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-r/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const C=this.currentTime-p*(this.playbackSpeed>=0?1:-1),O=this.playbackSpeed>=0?C<0:C>r;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let M=this.currentTime,N=n;if(y){const j=Math.min(this.currentTime,r)/h;let W=Math.floor(j),nt=j%1;!nt&&j>=1&&(nt=1),nt===1&&W--,W=Math.min(W,y+1),!!(W%2)&&(b==="reverse"?(nt=1-nt,A&&(nt-=A/h)):b==="mirror"&&(N=u)),M=qa(0,1,nt)*h}const L=O?{done:!1,value:m[0]}:N.next(M);o&&(L.value=o(L.value));let{done:I}=L;!O&&f!==null&&(I=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return k&&S!==qS&&(L.value=l1(m,this.options,x,this.speed)),w&&w(L.value),k&&this.finish(),L}then(t,e){return this.finished.then(t,e)}get duration(){return Vs(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Vs(t)}get time(){return Vs(this.currentTime)}set time(t){var e;t=da(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(e=this.driver)==null||e.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(oi.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Vs(this.currentTime))}play(){var r,o;if(this.isStopped)return;const{driver:t=sF,startTime:e}=this.options;this.driver||(this.driver=t(u=>this.tick(u))),(o=(r=this.options).onPlay)==null||o.call(r);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=e??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(oi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,e;this.notifyFinished(),this.teardown(),this.state="finished",(e=(t=this.options).onComplete)==null||e.call(t)}cancel(){var t,e;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(e=(t=this.options).onCancel)==null||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var e;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(e=this.driver)==null||e.stop(),t.observe(this)}}function SF(s){for(let t=1;t<s.length;t++)s[t]??(s[t]=s[t-1])}const gc=s=>s*180/Math.PI,KS=s=>{const t=gc(Math.atan2(s[1],s[0]));return $S(t)},TF={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:KS,rotateZ:KS,skewX:s=>gc(Math.atan(s[1])),skewY:s=>gc(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},$S=s=>(s=s%360,s<0&&(s+=360),s),cM=KS,uM=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),hM=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),_F={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:uM,scaleY:hM,scale:s=>(uM(s)+hM(s))/2,rotateX:s=>$S(gc(Math.atan2(s[6],s[5]))),rotateY:s=>$S(gc(Math.atan2(-s[2],s[0]))),rotateZ:cM,rotate:cM,skewX:s=>gc(Math.atan(s[4])),skewY:s=>gc(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function WS(s){return s.includes("scale")?1:0}function QS(s,t){if(!s||s==="none")return WS(t);const e=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,r;if(e)n=_F,r=e;else{const h=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=TF,r=h}if(!r)return WS(t);const o=n[t],u=r[1].split(",").map(xF);return typeof o=="function"?o(u):u[o]}const wF=(s,t)=>{const{transform:e="none"}=getComputedStyle(s);return QS(e,t)};function xF(s){return parseFloat(s.trim())}const Sf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Tf=new Set(Sf),dM=s=>s===Ef||s===pt,CF=new Set(["x","y","z"]),DF=Sf.filter(s=>!CF.has(s));function MF(s){const t=[];return DF.forEach(e=>{const n=s.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const Bl={width:({x:s},{paddingLeft:t="0",paddingRight:e="0"})=>s.max-s.min-parseFloat(t)-parseFloat(e),height:({y:s},{paddingTop:t="0",paddingBottom:e="0"})=>s.max-s.min-parseFloat(t)-parseFloat(e),top:(s,{top:t})=>parseFloat(t),left:(s,{left:t})=>parseFloat(t),bottom:({y:s},{top:t})=>parseFloat(t)+(s.max-s.min),right:({x:s},{left:t})=>parseFloat(t)+(s.max-s.min),x:(s,{transform:t})=>QS(t,"x"),y:(s,{transform:t})=>QS(t,"y")};Bl.translateX=Bl.x;Bl.translateY=Bl.y;const Mu=new Set;let ZS=!1,JS=!1,tT=!1;function jN(){if(JS){const s=Array.from(Mu).filter(n=>n.needsMeasurement),t=new Set(s.map(n=>n.element)),e=new Map;t.forEach(n=>{const r=MF(n);r.length&&(e.set(n,r),n.render())}),s.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const r=e.get(n);r&&r.forEach(([o,u])=>{var h;(h=n.getValue(o))==null||h.set(u)})}),s.forEach(n=>n.measureEndState()),s.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}JS=!1,ZS=!1,Mu.forEach(s=>s.complete(tT)),Mu.clear()}function GN(){Mu.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(JS=!0)})}function RF(){tT=!0,GN(),jN(),tT=!1}class h1{constructor(t,e,n,r,o,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=r,this.element=o,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(Mu.add(this),ZS||(ZS=!0,_e.read(GN),_e.resolveKeyframes(jN))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:r}=this;if(t[0]===null){const o=r==null?void 0:r.get(),u=t[t.length-1];if(o!==void 0)t[0]=o;else if(n&&e){const h=n.readValue(e,u);h!=null&&(t[0]=h)}t[0]===void 0&&(t[0]=u),r&&o===void 0&&r.set(t[0])}SF(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Mu.delete(this)}cancel(){this.state==="scheduled"&&(Mu.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const OF=s=>s.startsWith("--");function NF(s,t,e){OF(t)?s.style.setProperty(t,e):s.style[t]=e}const LF={};function YN(s,t){const e=bN(s);return()=>LF[t]??e()}const IF=YN(()=>window.ScrollTimeline!==void 0,"scrollTimeline"),XN=YN(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Dp=([s,t,e,n])=>`cubic-bezier(${s}, ${t}, ${e}, ${n})`,fM={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Dp([0,.65,.55,1]),circOut:Dp([.55,0,1,.45]),backIn:Dp([.31,.01,.66,-.59]),backOut:Dp([.33,1.53,.69,.99])};function qN(s,t){if(s)return typeof s=="function"?XN()?HN(s,t):"ease-out":MN(s)?Dp(s):Array.isArray(s)?s.map(e=>qN(e,t)||fM.easeOut):fM[s]}function PF(s,t,e,{delay:n=0,duration:r=300,repeat:o=0,repeatType:u="loop",ease:h="easeOut",times:f}={},p=void 0){const m={[t]:e};f&&(m.offset=f);const y=qN(h,r);Array.isArray(y)&&(m.easing=y);const b={delay:n,duration:r,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:o+1,direction:u==="reverse"?"alternate":"normal"};return p&&(b.pseudoElement=p),s.animate(m,b)}function KN(s){return typeof s=="function"&&"applyToOptions"in s}function BF({type:s,...t}){return KN(s)&&XN()?s.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class $N extends c1{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:e,name:n,keyframes:r,pseudoElement:o,allowFlatten:u=!1,finalKeyframe:h,onComplete:f}=t;this.isPseudoElement=!!o,this.allowFlatten=u,this.options=t,J_(typeof t.type!="string");const p=BF(t);this.animation=PF(e,n,r,p,o),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const m=l1(r,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(m):NF(e,n,m),this.animation.cancel()}f==null||f(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,e;(e=(t=this.animation).finish)==null||e.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n,r;const t=(e=this.options)==null?void 0:e.element;!this.isPseudoElement&&(t!=null&&t.isConnected)&&((r=(n=this.animation).commitStyles)==null||r.call(n))}get duration(){var e,n;const t=((n=(e=this.animation.effect)==null?void 0:e.getComputedTiming)==null?void 0:n.call(e).duration)||0;return Vs(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Vs(t)}get time(){return Vs(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=da(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&IF()?(this.animation.timeline=t,zs):e(this)}}const WN={anticipate:wN,backInOut:_N,circInOut:CN};function kF(s){return s in WN}function UF(s){typeof s.ease=="string"&&kF(s.ease)&&(s.ease=WN[s.ease])}const gS=10;class FF extends $N{constructor(t){UF(t),zN(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:n,onComplete:r,element:o,...u}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const h=new u1({...u,autoplay:!1}),f=Math.max(gS,oi.now()-this.startTime),p=qa(0,gS,f-gS);e.setWithVelocity(h.sample(Math.max(0,f-p)).value,h.sample(f).value,p),h.stop()}}const pM=(s,t)=>t==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(fa.test(s)||s==="0")&&!s.startsWith("url("));function HF(s){const t=s[0];if(s.length===1)return!0;for(let e=0;e<s.length;e++)if(s[e]!==t)return!0}function VF(s,t,e,n){const r=s[0];if(r===null)return!1;if(t==="display"||t==="visibility")return!0;const o=s[s.length-1],u=pM(r,t),h=pM(o,t);return!u||!h?!1:HF(s)||(e==="spring"||KN(e))&&n}function eT(s){s.duration=0,s.type="keyframes"}const zF=new Set(["opacity","clipPath","filter","transform"]),jF=bN(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function GF(s){var m;const{motionValue:t,name:e,repeatDelay:n,repeatType:r,damping:o,type:u}=s;if(!(((m=t==null?void 0:t.owner)==null?void 0:m.current)instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:p}=t.owner.getProps();return jF()&&e&&zF.has(e)&&(e!=="transform"||!p)&&!f&&!n&&r!=="mirror"&&o!==0&&u!=="inertia"}const YF=40;class XF extends c1{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:u="loop",keyframes:h,name:f,motionValue:p,element:m,...y}){var S;super(),this.stop=()=>{var w,x;this._animation&&(this._animation.stop(),(w=this.stopTimeline)==null||w.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=oi.now();const b={autoplay:t,delay:e,type:n,repeat:r,repeatDelay:o,repeatType:u,name:f,motionValue:p,element:m,...y},A=(m==null?void 0:m.KeyframeResolver)||h1;this.keyframeResolver=new A(h,(w,x,C)=>this.onKeyframesResolved(w,x,b,!C),f,p,m),(S=this.keyframeResolver)==null||S.scheduleResolve()}onKeyframesResolved(t,e,n,r){var x,C;this.keyframeResolver=void 0;const{name:o,type:u,velocity:h,delay:f,isHandoff:p,onUpdate:m}=n;this.resolvedAt=oi.now(),VF(t,o,u,h)||((oo.instantAnimations||!f)&&(m==null||m(l1(t,n,e))),t[0]=t[t.length-1],eT(n),n.repeat=0);const b={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>YF?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...n,keyframes:t},A=!p&&GF(b),S=(C=(x=b.motionValue)==null?void 0:x.owner)==null?void 0:C.current,w=A?new FF({...b,element:S}):new u1(b);w.finished.then(()=>{this.notifyFinished()}).catch(zs),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),RF()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}function QN(s,t,e,n=0,r=1){const o=Array.from(s).sort((p,m)=>p.sortNodePosition(m)).indexOf(t),u=s.size,h=(u-1)*n;return typeof e=="function"?e(o,u):r===1?o*n:h-o*n}const qF=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function KF(s){const t=qF.exec(s);if(!t)return[,];const[,e,n,r]=t;return[`--${e??n}`,r]}function ZN(s,t,e=1){const[n,r]=KF(s);if(!n)return;const o=window.getComputedStyle(t).getPropertyValue(n);if(o){const u=o.trim();return mN(u)?parseFloat(u):u}return i1(r)?ZN(r,t,e+1):r}const $F={type:"spring",stiffness:500,damping:25,restSpeed:10},WF=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),QF={type:"keyframes",duration:.8},ZF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},JF=(s,{keyframes:t})=>t.length>2?QF:Tf.has(s)?s.startsWith("scale")?WF(t[1]):$F:ZF,t3=s=>s!==null;function e3(s,{repeat:t,repeatType:e="loop"},n){const r=s.filter(t3),o=t&&e!=="loop"&&t%2===1?0:r.length-1;return r[o]}function JN(s,t){if(s!=null&&s.inherit&&t){const{inherit:e,...n}=s;return{...t,...n}}return s}function d1(s,t){const e=(s==null?void 0:s[t])??(s==null?void 0:s.default)??s;return e!==s?JN(e,s):e}function n3({when:s,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:r,repeat:o,repeatType:u,repeatDelay:h,from:f,elapsed:p,...m}){return!!Object.keys(m).length}const f1=(s,t,e,n={},r,o)=>u=>{const h=d1(n,s)||{},f=h.delay||n.delay||0;let{elapsed:p=0}=n;p=p-da(f);const m={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...h,delay:-p,onUpdate:b=>{t.set(b),h.onUpdate&&h.onUpdate(b)},onComplete:()=>{u(),h.onComplete&&h.onComplete()},name:s,motionValue:t,element:o?void 0:r};n3(h)||Object.assign(m,JF(s,m)),m.duration&&(m.duration=da(m.duration)),m.repeatDelay&&(m.repeatDelay=da(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let y=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(eT(m),m.delay===0&&(y=!0)),(oo.instantAnimations||oo.skipAnimations||r!=null&&r.shouldSkipAnimations)&&(y=!0,eT(m),m.delay=0),m.allowFlatten=!h.type&&!h.ease,y&&!o&&t.get()!==void 0){const b=e3(m.keyframes,h);if(b!==void 0){_e.update(()=>{m.onUpdate(b),m.onComplete()});return}}return h.isSync?new u1(m):new XF(m)};function mM(s){const t=[{},{}];return s==null||s.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function p1(s,t,e,n){if(typeof t=="function"){const[r,o]=mM(n);t=t(e!==void 0?e:s.custom,r,o)}if(typeof t=="string"&&(t=s.variants&&s.variants[t]),typeof t=="function"){const[r,o]=mM(n);t=t(e!==void 0?e:s.custom,r,o)}return t}function zh(s,t,e){const n=s.getProps();return p1(n,t,e!==void 0?e:n.custom,s)}const tL=new Set(["width","height","top","left","right","bottom",...Sf]),gM=30,i3=s=>!isNaN(parseFloat(s));class s3{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var o;const r=oi.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=oi.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=i3(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new t1);const n=this.events[t].add(e);return t==="change"?()=>{n(),_e.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=oi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>gM)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,gM);return vN(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,e;(t=this.dependents)==null||t.clear(),(e=this.events.destroy)==null||e.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bf(s,t){return new s3(s,t)}const nT=s=>Array.isArray(s);function a3(s,t,e){s.hasValue(t)?s.getValue(t).set(e):s.addValue(t,bf(e))}function r3(s){return nT(s)?s[s.length-1]||0:s}function o3(s,t){const e=zh(s,t);let{transitionEnd:n={},transition:r={},...o}=e||{};o={...o,...n};for(const u in o){const h=r3(o[u]);a3(s,u,h)}}const Qn=s=>!!(s&&s.getVelocity);function l3(s){return!!(Qn(s)&&s.add)}function iT(s,t){const e=s.getValue("willChange");if(l3(e))return e.add(t);if(!e&&oo.WillChange){const n=new oo.WillChange("auto");s.addValue("willChange",n),n.add(t)}}function m1(s){return s.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const c3="framerAppearId",eL="data-"+m1(c3);function nL(s){return s.props[eL]}function u3({protectedKeys:s,needsAnimating:t},e){const n=s.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function iL(s,t,{delay:e=0,transitionOverride:n,type:r}={}){let{transition:o,transitionEnd:u,...h}=t;const f=s.getDefaultTransition();o=o?JN(o,f):f;const p=o==null?void 0:o.reduceMotion;n&&(o=n);const m=[],y=r&&s.animationState&&s.animationState.getState()[r];for(const b in h){const A=s.getValue(b,s.latestValues[b]??null),S=h[b];if(S===void 0||y&&u3(y,b))continue;const w={delay:e,...d1(o||{},b)},x=A.get();if(x!==void 0&&!A.isAnimating&&!Array.isArray(S)&&S===x&&!w.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const N=nL(s);if(N){const L=window.MotionHandoffAnimation(N,b,_e);L!==null&&(w.startTime=L,C=!0)}}iT(s,b);const O=p??s.shouldReduceMotion;A.start(f1(b,A,S,O&&tL.has(b)?{type:!1}:w,s,C));const M=A.animation;M&&m.push(M)}if(u){const b=()=>_e.update(()=>{u&&o3(s,u)});m.length?Promise.all(m).then(b):b()}return m}function sT(s,t,e={}){var f;const n=zh(s,t,e.type==="exit"?(f=s.presenceContext)==null?void 0:f.custom:void 0);let{transition:r=s.getDefaultTransition()||{}}=n||{};e.transitionOverride&&(r=e.transitionOverride);const o=n?()=>Promise.all(iL(s,n,e)):()=>Promise.resolve(),u=s.variantChildren&&s.variantChildren.size?(p=0)=>{const{delayChildren:m=0,staggerChildren:y,staggerDirection:b}=r;return h3(s,t,p,m,y,b,e)}:()=>Promise.resolve(),{when:h}=r;if(h){const[p,m]=h==="beforeChildren"?[o,u]:[u,o];return p().then(()=>m())}else return Promise.all([o(),u(e.delay)])}function h3(s,t,e=0,n=0,r=0,o=1,u){const h=[];for(const f of s.variantChildren)f.notify("AnimationStart",t),h.push(sT(f,t,{...u,delay:e+(typeof n=="function"?0:n)+QN(s.variantChildren,f,n,r,o)}).then(()=>f.notify("AnimationComplete",t)));return Promise.all(h)}function d3(s,t,e={}){s.notify("AnimationStart",t);let n;if(Array.isArray(t)){const r=t.map(o=>sT(s,o,e));n=Promise.all(r)}else if(typeof t=="string")n=sT(s,t,e);else{const r=typeof t=="function"?zh(s,t,e.custom):t;n=Promise.all(iL(s,r,e))}return n.then(()=>{s.notify("AnimationComplete",t)})}const f3={test:s=>s==="auto",parse:s=>s},sL=s=>t=>t.test(s),aL=[Ef,pt,Xa,Uo,zU,VU,f3],yM=s=>aL.find(sL(s));function p3(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||yN(s):!0}const m3=new Set(["brightness","contrast","saturate","opacity"]);function g3(s){const[t,e]=s.slice(0,-1).split("(");if(t==="drop-shadow")return s;const[n]=e.match(s1)||[];if(!n)return s;const r=e.replace(n,"");let o=m3.has(t)?1:0;return n!==e&&(o*=100),t+"("+o+r+")"}const y3=/\b([a-z-]*)\(.*?\)/gu,aT={...fa,getAnimatableNone:s=>{const t=s.match(y3);return t?t.map(g3).join(" "):s}},rT={...fa,getAnimatableNone:s=>{const t=fa.parse(s);return fa.createTransformer(s)(t.map(n=>typeof n=="number"?0:typeof n=="object"?{...n,alpha:1}:n))}},bM={...Ef,transform:Math.round},b3={rotate:Uo,rotateX:Uo,rotateY:Uo,rotateZ:Uo,scale:I0,scaleX:I0,scaleY:I0,scaleZ:I0,skew:Uo,skewX:Uo,skewY:Uo,distance:pt,translateX:pt,translateY:pt,translateZ:pt,x:pt,y:pt,z:pt,perspective:pt,transformPerspective:pt,opacity:im,originX:sM,originY:sM,originZ:pt},g1={borderWidth:pt,borderTopWidth:pt,borderRightWidth:pt,borderBottomWidth:pt,borderLeftWidth:pt,borderRadius:pt,borderTopLeftRadius:pt,borderTopRightRadius:pt,borderBottomRightRadius:pt,borderBottomLeftRadius:pt,width:pt,maxWidth:pt,height:pt,maxHeight:pt,top:pt,right:pt,bottom:pt,left:pt,inset:pt,insetBlock:pt,insetBlockStart:pt,insetBlockEnd:pt,insetInline:pt,insetInlineStart:pt,insetInlineEnd:pt,padding:pt,paddingTop:pt,paddingRight:pt,paddingBottom:pt,paddingLeft:pt,paddingBlock:pt,paddingBlockStart:pt,paddingBlockEnd:pt,paddingInline:pt,paddingInlineStart:pt,paddingInlineEnd:pt,margin:pt,marginTop:pt,marginRight:pt,marginBottom:pt,marginLeft:pt,marginBlock:pt,marginBlockStart:pt,marginBlockEnd:pt,marginInline:pt,marginInlineStart:pt,marginInlineEnd:pt,fontSize:pt,backgroundPositionX:pt,backgroundPositionY:pt,...b3,zIndex:bM,fillOpacity:im,strokeOpacity:im,numOctaves:bM},v3={...g1,color:on,backgroundColor:on,outlineColor:on,fill:on,stroke:on,borderColor:on,borderTopColor:on,borderRightColor:on,borderBottomColor:on,borderLeftColor:on,filter:aT,WebkitFilter:aT,mask:rT,WebkitMask:rT},rL=s=>v3[s],A3=new Set([aT,rT]);function oL(s,t){let e=rL(s);return A3.has(e)||(e=fa),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const E3=new Set(["auto","none","0"]);function S3(s,t,e){let n=0,r;for(;n<s.length&&!r;){const o=s[n];typeof o=="string"&&!E3.has(o)&&sm(o).values.length&&(r=s[n]),n++}if(r&&e)for(const o of t)s[o]=oL(e,r)}class T3 extends h1{constructor(t,e,n,r,o){super(t,e,n,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let m=0;m<t.length;m++){let y=t[m];if(typeof y=="string"&&(y=y.trim(),i1(y))){const b=ZN(y,e.current);b!==void 0&&(t[m]=b),m===t.length-1&&(this.finalKeyframe=y)}}if(this.resolveNoneKeyframes(),!tL.has(n)||t.length!==2)return;const[r,o]=t,u=yM(r),h=yM(o),f=iM(r),p=iM(o);if(f!==p&&Bl[n]){this.needsMeasurement=!0;return}if(u!==h)if(dM(u)&&dM(h))for(let m=0;m<t.length;m++){const y=t[m];typeof y=="string"&&(t[m]=parseFloat(y))}else Bl[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let r=0;r<t.length;r++)(t[r]===null||p3(t[r]))&&n.push(r);n.length&&S3(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Bl[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const r=e[e.length-1];r!==void 0&&t.getValue(n,r).jump(r,!1)}measureEndState(){var h;const{element:t,name:e,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const r=t.getValue(e);r&&r.jump(this.measuredOrigin,!1);const o=n.length-1,u=n[o];n[o]=Bl[e](t.measureViewportBox(),window.getComputedStyle(t.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),(h=this.removedTransforms)!=null&&h.length&&this.removedTransforms.forEach(([f,p])=>{t.getValue(f).set(p)}),this.resolveNoneKeyframes()}}const _3=new Set(["opacity","clipPath","filter","transform"]);function lL(s,t,e){if(s==null)return[];if(s instanceof EventTarget)return[s];if(typeof s=="string"){let n=document;const r=(e==null?void 0:e[s])??n.querySelectorAll(s);return r?Array.from(r):[]}return Array.from(s).filter(n=>n!=null)}const cL=(s,t)=>t&&typeof s=="number"?t.transform(s):s;function oT(s){return gN(s)&&"offsetHeight"in s}const{schedule:y1}=RN(queueMicrotask,!1),Qs={x:!1,y:!1};function uL(){return Qs.x||Qs.y}function w3(s){return s==="x"||s==="y"?Qs[s]?null:(Qs[s]=!0,()=>{Qs[s]=!1}):Qs.x||Qs.y?null:(Qs.x=Qs.y=!0,()=>{Qs.x=Qs.y=!1})}function hL(s,t){const e=lL(s),n=new AbortController,r={passive:!0,...t,signal:n.signal};return[e,r,()=>n.abort()]}function x3(s){return!(s.pointerType==="touch"||uL())}function C3(s,t,e={}){const[n,r,o]=hL(s,e);return n.forEach(u=>{let h=!1,f=!1,p;const m=()=>{u.removeEventListener("pointerleave",S)},y=x=>{p&&(p(x),p=void 0),m()},b=x=>{h=!1,window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",b),f&&(f=!1,y(x))},A=()=>{h=!0,window.addEventListener("pointerup",b,r),window.addEventListener("pointercancel",b,r)},S=x=>{if(x.pointerType!=="touch"){if(h){f=!0;return}y(x)}},w=x=>{if(!x3(x))return;f=!1;const C=t(u,x);typeof C=="function"&&(p=C,u.addEventListener("pointerleave",S,r))};u.addEventListener("pointerenter",w,r),u.addEventListener("pointerdown",A,r)}),o}const dL=(s,t)=>t?s===t?!0:dL(s,t.parentElement):!1,b1=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,D3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function M3(s){return D3.has(s.tagName)||s.isContentEditable===!0}const R3=new Set(["INPUT","SELECT","TEXTAREA"]);function O3(s){return R3.has(s.tagName)||s.isContentEditable===!0}const Z0=new WeakSet;function vM(s){return t=>{t.key==="Enter"&&s(t)}}function yS(s,t){s.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const N3=(s,t)=>{const e=s.currentTarget;if(!e)return;const n=vM(()=>{if(Z0.has(e))return;yS(e,"down");const r=vM(()=>{yS(e,"up")}),o=()=>yS(e,"cancel");e.addEventListener("keyup",r,t),e.addEventListener("blur",o,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function AM(s){return b1(s)&&!uL()}const EM=new WeakSet;function L3(s,t,e={}){const[n,r,o]=hL(s,e),u=h=>{const f=h.currentTarget;if(!AM(h)||EM.has(h))return;Z0.add(f),e.stopPropagation&&EM.add(h);const p=t(f,h),m=(A,S)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",b),Z0.has(f)&&Z0.delete(f),AM(A)&&typeof p=="function"&&p(A,{success:S})},y=A=>{m(A,f===window||f===document||e.useGlobalTarget||dL(f,A.target))},b=A=>{m(A,!1)};window.addEventListener("pointerup",y,r),window.addEventListener("pointercancel",b,r)};return n.forEach(h=>{(e.useGlobalTarget?window:h).addEventListener("pointerdown",u,r),oT(h)&&(h.addEventListener("focus",p=>N3(p,r)),!M3(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),o}function v1(s){return gN(s)&&"ownerSVGElement"in s}const J0=new WeakMap;let Fo;const fL=(s,t,e)=>(n,r)=>r&&r[0]?r[0][s+"Size"]:v1(n)&&"getBBox"in n?n.getBBox()[t]:n[e],I3=fL("inline","width","offsetWidth"),P3=fL("block","height","offsetHeight");function B3({target:s,borderBoxSize:t}){var e;(e=J0.get(s))==null||e.forEach(n=>{n(s,{get width(){return I3(s,t)},get height(){return P3(s,t)}})})}function k3(s){s.forEach(B3)}function U3(){typeof ResizeObserver>"u"||(Fo=new ResizeObserver(k3))}function F3(s,t){Fo||U3();const e=lL(s);return e.forEach(n=>{let r=J0.get(n);r||(r=new Set,J0.set(n,r)),r.add(t),Fo==null||Fo.observe(n)}),()=>{e.forEach(n=>{const r=J0.get(n);r==null||r.delete(t),r!=null&&r.size||Fo==null||Fo.unobserve(n)})}}const tb=new Set;let Oh;function H3(){Oh=()=>{const s={get width(){return window.innerWidth},get height(){return window.innerHeight}};tb.forEach(t=>t(s))},window.addEventListener("resize",Oh)}function V3(s){return tb.add(s),Oh||H3(),()=>{tb.delete(s),!tb.size&&typeof Oh=="function"&&(window.removeEventListener("resize",Oh),Oh=void 0)}}function SM(s,t){return typeof s=="function"?V3(s):F3(s,t)}function z3(s){return v1(s)&&s.tagName==="svg"}const j3=[...aL,on,fa],G3=s=>j3.find(sL(s)),TM=()=>({translate:0,scale:1,origin:0,originPoint:0}),Nh=()=>({x:TM(),y:TM()}),_M=()=>({min:0,max:0}),pn=()=>({x:_M(),y:_M()}),Y3=new WeakMap;function Cv(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function am(s){return typeof s=="string"||Array.isArray(s)}const A1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],E1=["initial",...A1];function Dv(s){return Cv(s.animate)||E1.some(t=>am(s[t]))}function pL(s){return!!(Dv(s)||s.variants)}function X3(s,t,e){for(const n in t){const r=t[n],o=e[n];if(Qn(r))s.addValue(n,r);else if(Qn(o))s.addValue(n,bf(r,{owner:s}));else if(o!==r)if(s.hasValue(n)){const u=s.getValue(n);u.liveStyle===!0?u.jump(r):u.hasAnimated||u.set(r)}else{const u=s.getStaticValue(n);s.addValue(n,bf(u!==void 0?u:r,{owner:s}))}}for(const n in e)t[n]===void 0&&s.removeValue(n);return t}const lT={current:null},mL={current:!1},q3=typeof window<"u";function K3(){if(mL.current=!0,!!q3)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),t=()=>lT.current=s.matches;s.addEventListener("change",t),t()}else lT.current=!1}const wM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let zb={};function gL(s){zb=s}function $3(){return zb}class W3{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:r,skipAnimations:o,blockInitialAnimation:u,visualState:h},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=h1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const A=oi.now();this.renderScheduledAt<A&&(this.renderScheduledAt=A,_e.render(this.render,!1,!0))};const{latestValues:p,renderState:m}=h;this.latestValues=p,this.baseTarget={...p},this.initialValues=e.initial?{...p}:{},this.renderState=m,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.skipAnimationsConfig=o,this.options=f,this.blockInitialAnimation=!!u,this.isControllingVariants=Dv(e),this.isVariantNode=pL(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:y,...b}=this.scrapeMotionValuesFromProps(e,{},this);for(const A in b){const S=b[A];p[A]!==void 0&&Qn(S)&&S.set(p[A])}}mount(t){var e,n;if(this.hasBeenMounted)for(const r in this.initialValues)(e=this.values.get(r))==null||e.jump(this.initialValues[r]),this.latestValues[r]=this.initialValues[r];this.current=t,Y3.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,o)=>this.bindToMotionValue(o,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(mL.current||K3(),this.shouldReduceMotion=lT.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var t;this.projection&&this.projection.unmount(),kl(this.notifyUpdate),kl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){if(this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)(),e.accelerate&&_3.has(t)&&this.current instanceof HTMLElement){const{factory:u,keyframes:h,times:f,ease:p,duration:m}=e.accelerate,y=new $N({element:this.current,name:t,keyframes:h,times:f,ease:p,duration:da(m)}),b=u(y);this.valueSubscriptions.set(t,()=>{b(),y.cancel()});return}const n=Tf.has(t);n&&this.onBindTransform&&this.onBindTransform();const r=e.on("change",u=>{this.latestValues[t]=u,this.props.onUpdate&&_e.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;typeof window<"u"&&window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{r(),o&&o(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in zb){const e=zb[t];if(!e)continue;const{isEnabled:n,Feature:r}=e;if(!this.features[t]&&r&&n(this.props)&&(this.features[t]=new r(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<wM.length;n++){const r=wM[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,u=t[o];u&&(this.propEventSubscriptions[r]=this.on(r,u))}this.prevMotionValues=X3(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=bf(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(mN(n)||yN(n))?n=parseFloat(n):!G3(n)&&fa.test(e)&&(n=oL(t,e)),this.setBaseTarget(t,Qn(n)?n.get():n)),Qn(n)?n.get():n}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var o;const{initial:e}=this.props;let n;if(typeof e=="string"||typeof e=="object"){const u=p1(this.props,e,(o=this.presenceContext)==null?void 0:o.custom);u&&(n=u[t])}if(e&&n!==void 0)return n;const r=this.getBaseTargetFromProps(this.props,t);return r!==void 0&&!Qn(r)?r:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new t1),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){y1.render(this.render)}}class yL extends W3{constructor(){super(...arguments),this.KeyframeResolver=T3}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){const n=t.style;return n?n[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Qn(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}class Vl{constructor(t){this.isMounted=!1,this.node=t}update(){}}function bL({top:s,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:s,max:n}}}function Q3({x:s,y:t}){return{top:t.min,right:s.max,bottom:t.max,left:s.min}}function Z3(s,t){if(!t)return s;const e=t({x:s.left,y:s.top}),n=t({x:s.right,y:s.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}function bS(s){return s===void 0||s===1}function cT({scale:s,scaleX:t,scaleY:e}){return!bS(s)||!bS(t)||!bS(e)}function oc(s){return cT(s)||vL(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function vL(s){return xM(s.x)||xM(s.y)}function xM(s){return s&&s!=="0%"}function jb(s,t,e){const n=s-e,r=t*n;return e+r}function CM(s,t,e,n,r){return r!==void 0&&(s=jb(s,r,n)),jb(s,e,n)+t}function uT(s,t=0,e=1,n,r){s.min=CM(s.min,t,e,n,r),s.max=CM(s.max,t,e,n,r)}function AL(s,{x:t,y:e}){uT(s.x,t.translate,t.scale,t.originPoint),uT(s.y,e.translate,e.scale,e.originPoint)}const DM=.999999999999,MM=1.0000000000001;function J3(s,t,e,n=!1){const r=e.length;if(!r)return;t.x=t.y=1;let o,u;for(let h=0;h<r;h++){o=e[h],u=o.projectionDelta;const{visualElement:f}=o.options;f&&f.props.style&&f.props.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ih(s,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),u&&(t.x*=u.x.scale,t.y*=u.y.scale,AL(s,u)),n&&oc(o.latestValues)&&Ih(s,o.latestValues))}t.x<MM&&t.x>DM&&(t.x=1),t.y<MM&&t.y>DM&&(t.y=1)}function Lh(s,t){s.min=s.min+t,s.max=s.max+t}function RM(s,t,e,n,r=.5){const o=ke(s.min,s.max,r);uT(s,t,e,o,n)}function Ih(s,t){RM(s.x,t.x,t.scaleX,t.scale,t.originX),RM(s.y,t.y,t.scaleY,t.scale,t.originY)}function EL(s,t){return bL(Z3(s.getBoundingClientRect(),t))}function tH(s,t,e){const n=EL(s,e),{scroll:r}=t;return r&&(Lh(n.x,r.offset.x),Lh(n.y,r.offset.y)),n}const eH={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},nH=Sf.length;function iH(s,t,e){let n="",r=!0;for(let o=0;o<nH;o++){const u=Sf[o],h=s[u];if(h===void 0)continue;let f=!0;if(typeof h=="number")f=h===(u.startsWith("scale")?1:0);else{const p=parseFloat(h);f=u.startsWith("scale")?p===1:p===0}if(!f||e){const p=cL(h,g1[u]);if(!f){r=!1;const m=eH[u]||u;n+=`${m}(${p}) `}e&&(t[u]=p)}}return n=n.trim(),e?n=e(t,r?"":n):r&&(n="none"),n}function S1(s,t,e){const{style:n,vars:r,transformOrigin:o}=s;let u=!1,h=!1;for(const f in t){const p=t[f];if(Tf.has(f)){u=!0;continue}else if(NN(f)){r[f]=p;continue}else{const m=cL(p,g1[f]);f.startsWith("origin")?(h=!0,o[f]=m):n[f]=m}}if(t.transform||(u||e?n.transform=iH(t,s.transform,e):n.transform&&(n.transform="none")),h){const{originX:f="50%",originY:p="50%",originZ:m=0}=o;n.transformOrigin=`${f} ${p} ${m}`}}function SL(s,{style:t,vars:e},n,r){const o=s.style;let u;for(u in t)o[u]=t[u];r==null||r.applyProjectionStyles(o,n);for(u in e)o.setProperty(u,e[u])}function OM(s,t){return t.max===t.min?0:s/(t.max-t.min)*100}const Ap={correct:(s,t)=>{if(!t.target)return s;if(typeof s=="string")if(pt.test(s))s=parseFloat(s);else return s;const e=OM(s,t.target.x),n=OM(s,t.target.y);return`${e}% ${n}%`}},sH={correct:(s,{treeScale:t,projectionDelta:e})=>{const n=s,r=fa.parse(s);if(r.length>5)return n;const o=fa.createTransformer(s),u=typeof r[0]!="number"?1:0,h=e.x.scale*t.x,f=e.y.scale*t.y;r[0+u]/=h,r[1+u]/=f;const p=ke(h,f,.5);return typeof r[2+u]=="number"&&(r[2+u]/=p),typeof r[3+u]=="number"&&(r[3+u]/=p),o(r)}},hT={borderRadius:{...Ap,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ap,borderTopRightRadius:Ap,borderBottomLeftRadius:Ap,borderBottomRightRadius:Ap,boxShadow:sH};function TL(s,{layout:t,layoutId:e}){return Tf.has(s)||s.startsWith("origin")||(t||e!==void 0)&&(!!hT[s]||s==="opacity")}function T1(s,t,e){var u;const n=s.style,r=t==null?void 0:t.style,o={};if(!n)return o;for(const h in n)(Qn(n[h])||r&&Qn(r[h])||TL(h,s)||((u=e==null?void 0:e.getValue(h))==null?void 0:u.liveStyle)!==void 0)&&(o[h]=n[h]);return o}function aH(s){return window.getComputedStyle(s)}class rH extends yL{constructor(){super(...arguments),this.type="html",this.renderInstance=SL}readValueFromInstance(t,e){var n;if(Tf.has(e))return(n=this.projection)!=null&&n.isProjecting?WS(e):wF(t,e);{const r=aH(t),o=(NN(e)?r.getPropertyValue(e):r[e])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(t,{transformPagePoint:e}){return EL(t,e)}build(t,e,n){S1(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return T1(t,e,n)}}const oH={offset:"stroke-dashoffset",array:"stroke-dasharray"},lH={offset:"strokeDashoffset",array:"strokeDasharray"};function cH(s,t,e=1,n=0,r=!0){s.pathLength=1;const o=r?oH:lH;s[o.offset]=`${-n}`,s[o.array]=`${t} ${e}`}const uH=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function _L(s,{attrX:t,attrY:e,attrScale:n,pathLength:r,pathSpacing:o=1,pathOffset:u=0,...h},f,p,m){if(S1(s,h,p),f){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:y,style:b}=s;y.transform&&(b.transform=y.transform,delete y.transform),(b.transform||y.transformOrigin)&&(b.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),b.transform&&(b.transformBox=(m==null?void 0:m.transformBox)??"fill-box",delete y.transformBox);for(const A of uH)y[A]!==void 0&&(b[A]=y[A],delete y[A]);t!==void 0&&(y.x=t),e!==void 0&&(y.y=e),n!==void 0&&(y.scale=n),r!==void 0&&cH(y,r,o,u,!1)}const wL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),xL=s=>typeof s=="string"&&s.toLowerCase()==="svg";function hH(s,t,e,n){SL(s,t,void 0,n);for(const r in t.attrs)s.setAttribute(wL.has(r)?r:m1(r),t.attrs[r])}function CL(s,t,e){const n=T1(s,t,e);for(const r in s)if(Qn(s[r])||Qn(t[r])){const o=Sf.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[o]=s[r]}return n}class dH extends yL{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=pn}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Tf.has(e)){const n=rL(e);return n&&n.default||0}return e=wL.has(e)?e:m1(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return CL(t,e,n)}build(t,e,n){_L(t,e,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,e,n,r){hH(t,e,n,r)}mount(t){this.isSVGTag=xL(t.tagName),super.mount(t)}}const fH=E1.length;function DL(s){if(!s)return;if(!s.isControllingVariants){const e=s.parent?DL(s.parent)||{}:{};return s.props.initial!==void 0&&(e.initial=s.props.initial),e}const t={};for(let e=0;e<fH;e++){const n=E1[e],r=s.props[n];(am(r)||r===!1)&&(t[n]=r)}return t}function ML(s,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==s.length)return!1;for(let n=0;n<e;n++)if(t[n]!==s[n])return!1;return!0}const pH=[...A1].reverse(),mH=A1.length;function gH(s){return t=>Promise.all(t.map(({animation:e,options:n})=>d3(s,e,n)))}function yH(s){let t=gH(s),e=NM(),n=!0;const r=f=>(p,m)=>{var b;const y=zh(s,m,f==="exit"?(b=s.presenceContext)==null?void 0:b.custom:void 0);if(y){const{transition:A,transitionEnd:S,...w}=y;p={...p,...w,...S}}return p};function o(f){t=f(s)}function u(f){const{props:p}=s,m=DL(s.parent)||{},y=[],b=new Set;let A={},S=1/0;for(let x=0;x<mH;x++){const C=pH[x],O=e[C],M=p[C]!==void 0?p[C]:m[C],N=am(M),L=C===f?O.isActive:null;L===!1&&(S=x);let I=M===m[C]&&M!==p[C]&&N;if(I&&n&&s.manuallyAnimateOnMount&&(I=!1),O.protectedKeys={...A},!O.isActive&&L===null||!M&&!O.prevProp||Cv(M)||typeof M=="boolean")continue;if(C==="exit"&&O.isActive&&L!==!0){O.prevResolvedValues&&(A={...A,...O.prevResolvedValues});continue}const k=bH(O.prevProp,M);let j=k||C===f&&O.isActive&&!I&&N||x>S&&N,W=!1;const nt=Array.isArray(M)?M:[M];let et=nt.reduce(r(C),{});L===!1&&(et={});const{prevResolvedValues:ht={}}=O,mt={...ht,...et},gt=X=>{j=!0,b.has(X)&&(W=!0,b.delete(X)),O.needsAnimating[X]=!0;const it=s.getValue(X);it&&(it.liveStyle=!1)};for(const X in mt){const it=et[X],dt=ht[X];if(A.hasOwnProperty(X))continue;let Tt=!1;nT(it)&&nT(dt)?Tt=!ML(it,dt):Tt=it!==dt,Tt?it!=null?gt(X):b.add(X):it!==void 0&&b.has(X)?gt(X):O.protectedKeys[X]=!0}O.prevProp=M,O.prevResolvedValues=et,O.isActive&&(A={...A,...et}),n&&s.blockInitialAnimation&&(j=!1);const vt=I&&k;j&&(!vt||W)&&y.push(...nt.map(X=>{const it={type:C};if(typeof X=="string"&&n&&!vt&&s.manuallyAnimateOnMount&&s.parent){const{parent:dt}=s,Tt=zh(dt,X);if(dt.enteringChildren&&Tt){const{delayChildren:B}=Tt.transition||{};it.delay=QN(dt.enteringChildren,s,B)}}return{animation:X,options:it}}))}if(b.size){const x={};if(typeof p.initial!="boolean"){const C=zh(s,Array.isArray(p.initial)?p.initial[0]:p.initial);C&&C.transition&&(x.transition=C.transition)}b.forEach(C=>{const O=s.getBaseTarget(C),M=s.getValue(C);M&&(M.liveStyle=!0),x[C]=O??null}),y.push({animation:x})}let w=!!y.length;return n&&(p.initial===!1||p.initial===p.animate)&&!s.manuallyAnimateOnMount&&(w=!1),n=!1,w?t(y):Promise.resolve()}function h(f,p){var y;if(e[f].isActive===p)return Promise.resolve();(y=s.variantChildren)==null||y.forEach(b=>{var A;return(A=b.animationState)==null?void 0:A.setActive(f,p)}),e[f].isActive=p;const m=u(f);for(const b in e)e[b].protectedKeys={};return m}return{animateChanges:u,setActive:h,setAnimateFunction:o,getState:()=>e,reset:()=>{e=NM()}}}function bH(s,t){return typeof t=="string"?t!==s:Array.isArray(t)?!ML(t,s):!1}function rc(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function NM(){return{animate:rc(!0),whileInView:rc(),whileHover:rc(),whileTap:rc(),whileDrag:rc(),whileFocus:rc(),exit:rc()}}function LM(s,t){s.min=t.min,s.max=t.max}function $s(s,t){LM(s.x,t.x),LM(s.y,t.y)}function IM(s,t){s.translate=t.translate,s.scale=t.scale,s.originPoint=t.originPoint,s.origin=t.origin}const RL=1e-4,vH=1-RL,AH=1+RL,OL=.01,EH=0-OL,SH=0+OL;function li(s){return s.max-s.min}function TH(s,t,e){return Math.abs(s-t)<=e}function PM(s,t,e,n=.5){s.origin=n,s.originPoint=ke(t.min,t.max,s.origin),s.scale=li(e)/li(t),s.translate=ke(e.min,e.max,s.origin)-s.originPoint,(s.scale>=vH&&s.scale<=AH||isNaN(s.scale))&&(s.scale=1),(s.translate>=EH&&s.translate<=SH||isNaN(s.translate))&&(s.translate=0)}function Jp(s,t,e,n){PM(s.x,t.x,e.x,n?n.originX:void 0),PM(s.y,t.y,e.y,n?n.originY:void 0)}function BM(s,t,e){s.min=e.min+t.min,s.max=s.min+li(t)}function _H(s,t,e){BM(s.x,t.x,e.x),BM(s.y,t.y,e.y)}function kM(s,t,e){s.min=t.min-e.min,s.max=s.min+li(t)}function Gb(s,t,e){kM(s.x,t.x,e.x),kM(s.y,t.y,e.y)}function UM(s,t,e,n,r){return s-=t,s=jb(s,1/e,n),r!==void 0&&(s=jb(s,1/r,n)),s}function wH(s,t=0,e=1,n=.5,r,o=s,u=s){if(Xa.test(t)&&(t=parseFloat(t),t=ke(u.min,u.max,t/100)-u.min),typeof t!="number")return;let h=ke(o.min,o.max,n);s===o&&(h-=t),s.min=UM(s.min,t,e,h,r),s.max=UM(s.max,t,e,h,r)}function FM(s,t,[e,n,r],o,u){wH(s,t[e],t[n],t[r],t.scale,o,u)}const xH=["x","scaleX","originX"],CH=["y","scaleY","originY"];function HM(s,t,e,n){FM(s.x,t,xH,e?e.x:void 0,n?n.x:void 0),FM(s.y,t,CH,e?e.y:void 0,n?n.y:void 0)}function VM(s){return s.translate===0&&s.scale===1}function NL(s){return VM(s.x)&&VM(s.y)}function zM(s,t){return s.min===t.min&&s.max===t.max}function DH(s,t){return zM(s.x,t.x)&&zM(s.y,t.y)}function jM(s,t){return Math.round(s.min)===Math.round(t.min)&&Math.round(s.max)===Math.round(t.max)}function LL(s,t){return jM(s.x,t.x)&&jM(s.y,t.y)}function GM(s){return li(s.x)/li(s.y)}function YM(s,t){return s.translate===t.translate&&s.scale===t.scale&&s.originPoint===t.originPoint}function Sa(s){return[s("x"),s("y")]}function MH(s,t,e){let n="";const r=s.x.translate/t.x,o=s.y.translate/t.y,u=(e==null?void 0:e.z)||0;if((r||o||u)&&(n=`translate3d(${r}px, ${o}px, ${u}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:p,rotate:m,rotateX:y,rotateY:b,skewX:A,skewY:S}=e;p&&(n=`perspective(${p}px) ${n}`),m&&(n+=`rotate(${m}deg) `),y&&(n+=`rotateX(${y}deg) `),b&&(n+=`rotateY(${b}deg) `),A&&(n+=`skewX(${A}deg) `),S&&(n+=`skewY(${S}deg) `)}const h=s.x.scale*t.x,f=s.y.scale*t.y;return(h!==1||f!==1)&&(n+=`scale(${h}, ${f})`),n||"none"}const IL=["TopLeft","TopRight","BottomLeft","BottomRight"],RH=IL.length,XM=s=>typeof s=="string"?parseFloat(s):s,qM=s=>typeof s=="number"||pt.test(s);function OH(s,t,e,n,r,o){r?(s.opacity=ke(0,e.opacity??1,NH(n)),s.opacityExit=ke(t.opacity??1,0,LH(n))):o&&(s.opacity=ke(t.opacity??1,e.opacity??1,n));for(let u=0;u<RH;u++){const h=`border${IL[u]}Radius`;let f=KM(t,h),p=KM(e,h);if(f===void 0&&p===void 0)continue;f||(f=0),p||(p=0),f===0||p===0||qM(f)===qM(p)?(s[h]=Math.max(ke(XM(f),XM(p),n),0),(Xa.test(p)||Xa.test(f))&&(s[h]+="%")):s[h]=p}(t.rotate||e.rotate)&&(s.rotate=ke(t.rotate||0,e.rotate||0,n))}function KM(s,t){return s[t]!==void 0?s[t]:s.borderRadius}const NH=PL(0,.5,xN),LH=PL(.5,.95,zs);function PL(s,t,e){return n=>n<s?0:n>t?1:e(nm(s,t,n))}function IH(s,t,e){const n=Qn(s)?s:bf(s);return n.start(f1("",n,t,e)),n.animation}function rm(s,t,e,n={passive:!0}){return s.addEventListener(t,e,n),()=>s.removeEventListener(t,e)}const PH=(s,t)=>s.depth-t.depth;class BH{constructor(){this.children=[],this.isDirty=!1}add(t){Z_(this.children,t),this.isDirty=!0}remove(t){Ub(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(PH),this.isDirty=!1,this.children.forEach(t)}}function kH(s,t){const e=oi.now(),n=({timestamp:r})=>{const o=r-e;o>=t&&(kl(n),s(o-t))};return _e.setup(n,!0),()=>kl(n)}function eb(s){return Qn(s)?s.get():s}class UH{constructor(){this.members=[]}add(t){Z_(this.members,t);for(let e=this.members.length-1;e>=0;e--){const n=this.members[e];if(n===t||n===this.lead||n===this.prevLead)continue;const r=n.instance;r&&r.isConnected===!1&&n.isPresent!==!1&&!n.snapshot&&Ub(this.members,n)}t.scheduleRender()}remove(t){if(Ub(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(r=>t===r);if(e===0)return!1;let n;for(let r=e;r>=0;r--){const o=this.members[r],u=o.instance;if(o.isPresent!==!1&&(!u||u.isConnected!==!1)){n=o;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender();const r=n.options.layoutDependency,o=t.options.layoutDependency;if(!(r!==void 0&&o!==void 0&&r===o)){const f=n.instance;f&&f.isConnected===!1&&!n.snapshot||(t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0))}const{crossfade:h}=t.options;h===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const nb={hasAnimatedSinceResize:!0,hasEverUpdated:!1},vS=["","X","Y","Z"],FH=1e3;let HH=0;function AS(s,t,e,n){const{latestValues:r}=t;r[s]&&(e[s]=r[s],t.setStaticValue(s,0),n&&(n[s]=0))}function BL(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:t}=s.options;if(!t)return;const e=nL(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:r,layoutId:o}=s.options;window.MotionCancelOptimisedAnimation(e,"transform",_e,!(r||o))}const{parent:n}=s;n&&!n.hasCheckedOptimisedAppear&&BL(n)}function kL({attachResizeListener:s,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(u={},h=t==null?void 0:t()){this.id=HH++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(jH),this.nodes.forEach(qH),this.nodes.forEach(KH),this.nodes.forEach(GH)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new BH)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new t1),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const f=this.eventHandlers.get(u);f&&f.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=v1(u)&&!z3(u),this.instance=u;const{layoutId:h,layout:f,visualElement:p}=this.options;if(p&&!p.current&&p.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||h)&&(this.isLayoutDirty=!0),s){let m,y=0;const b=()=>this.root.updateBlockedByResize=!1;_e.read(()=>{y=window.innerWidth}),s(u,()=>{const A=window.innerWidth;A!==y&&(y=A,this.root.updateBlockedByResize=!0,m&&m(),m=kH(b,250),nb.hasAnimatedSinceResize&&(nb.hasAnimatedSinceResize=!1,this.nodes.forEach(QM)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&p&&(h||f)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:y,hasRelativeLayoutChanged:b,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||p.getDefaultTransition()||JH,{onLayoutAnimationStart:w,onLayoutAnimationComplete:x}=p.getProps(),C=!this.targetLayout||!LL(this.targetLayout,A),O=!y&&b;if(this.options.layoutRoot||this.resumeFrom||O||y&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const M={...d1(S,"layout"),onPlay:w,onComplete:x};(p.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M),this.setAnimationOrigin(m,O)}else y||QM(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),kl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach($H),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&BL(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const y=this.path[m];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:h,layout:f}=this.options;if(h===void 0&&!f)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($M);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(WM);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(XH),this.nodes.forEach(VH),this.nodes.forEach(zH)):this.nodes.forEach(WM),this.clearAllSnapshots();const h=oi.now();kn.delta=qa(0,1e3/60,h-kn.timestamp),kn.timestamp=h,kn.isProcessing=!0,hS.update.process(kn),hS.preRender.process(kn),hS.render.process(kn),kn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,y1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(YH),this.sharedNodes.forEach(WH)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,_e.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){_e.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!li(this.snapshot.measuredBox.x)&&!li(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=pn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h&&this.instance){const f=n(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:f,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!r)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!NL(this.projectionDelta),f=this.getTransformTemplate(),p=f?f(this.latestValues,""):void 0,m=p!==this.prevTransformTemplateValue;u&&this.instance&&(h||oc(this.latestValues)||m)&&(r(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let f=this.removeElementScroll(h);return u&&(f=this.removeTransform(f)),tV(f),{animationId:this.root.animationId,measuredBox:h,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var p;const{visualElement:u}=this.options;if(!u)return pn();const h=u.measureViewportBox();if(!(((p=this.scroll)==null?void 0:p.wasRoot)||this.path.some(eV))){const{scroll:m}=this.root;m&&(Lh(h.x,m.offset.x),Lh(h.y,m.offset.y))}return h}removeElementScroll(u){var f;const h=pn();if($s(h,u),(f=this.scroll)!=null&&f.wasRoot)return h;for(let p=0;p<this.path.length;p++){const m=this.path[p],{scroll:y,options:b}=m;m!==this.root&&y&&b.layoutScroll&&(y.wasRoot&&$s(h,u),Lh(h.x,y.offset.x),Lh(h.y,y.offset.y))}return h}applyTransform(u,h=!1){const f=pn();$s(f,u);for(let p=0;p<this.path.length;p++){const m=this.path[p];!h&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Ih(f,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),oc(m.latestValues)&&Ih(f,m.latestValues)}return oc(this.latestValues)&&Ih(f,this.latestValues),f}removeTransform(u){const h=pn();$s(h,u);for(let f=0;f<this.path.length;f++){const p=this.path[f];if(!p.instance||!oc(p.latestValues))continue;cT(p.latestValues)&&p.updateSnapshot();const m=pn(),y=p.measurePageBox();$s(m,y),HM(h,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,m)}return oc(this.latestValues)&&HM(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==kn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var A;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(u||f&&this.isSharedProjectionDirty||this.isProjectionDirty||(A=this.parent)!=null&&A.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:y}=this.options;if(!this.layout||!(m||y))return;this.resolvedRelativeTargetAt=kn.timestamp;const b=this.getClosestProjectingParent();b&&this.linkedParentVersion!==b.layoutVersion&&!b.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(b&&b.layout?this.createRelativeTarget(b,this.layout.layoutBox,b.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=pn(),this.targetWithTransforms=pn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),_H(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):$s(this.target,this.layout.layoutBox),AL(this.target,this.targetDelta)):$s(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?this.createRelativeTarget(b,this.target,b.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||cT(this.parent.latestValues)||vL(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(u,h,f){this.relativeParent=u,this.linkedParentVersion=u.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pn(),this.relativeTargetOrigin=pn(),Gb(this.relativeTargetOrigin,h,f),$s(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var S;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||(S=this.parent)!=null&&S.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===kn.timestamp&&(f=!1),f)return;const{layout:p,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||m))return;$s(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,b=this.treeScale.y;J3(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=pn());const{target:A}=u;if(!A){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(IM(this.prevProjectionDelta.x,this.projectionDelta.x),IM(this.prevProjectionDelta.y,this.projectionDelta.y)),Jp(this.projectionDelta,this.layoutCorrected,A,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==b||!YM(this.projectionDelta.x,this.prevProjectionDelta.x)||!YM(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var h;if((h=this.options.visualElement)==null||h.scheduleRender(),u){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Nh(),this.projectionDelta=Nh(),this.projectionDeltaWithTransform=Nh()}setAnimationOrigin(u,h=!1){const f=this.snapshot,p=f?f.latestValues:{},m={...this.latestValues},y=Nh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const b=pn(),A=f?f.source:void 0,S=this.layout?this.layout.source:void 0,w=A!==S,x=this.getStack(),C=!x||x.members.length<=1,O=!!(w&&!C&&this.options.crossfade===!0&&!this.path.some(ZH));this.animationProgress=0;let M;this.mixTargetDelta=N=>{const L=N/1e3;ZM(y.x,u.x,L),ZM(y.y,u.y,L),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Gb(b,this.layout.layoutBox,this.relativeParent.layout.layoutBox),QH(this.relativeTarget,this.relativeTargetOrigin,b,L),M&&DH(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=pn()),$s(M,this.relativeTarget)),w&&(this.animationValues=m,OH(m,p,this.latestValues,L,O,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){var h,f,p;this.notifyListeners("animationStart"),(h=this.currentAnimation)==null||h.stop(),(p=(f=this.resumingFrom)==null?void 0:f.currentAnimation)==null||p.stop(),this.pendingAnimation&&(kl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=_e.update(()=>{nb.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=bf(0)),this.motionValue.jump(0,!1),this.currentAnimation=IH(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:m=>{this.mixTargetDelta(m),u.onUpdate&&u.onUpdate(m)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(FH),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:f,layout:p,latestValues:m}=u;if(!(!h||!f||!p)){if(this!==u&&this.layout&&p&&UL(this.options.animationType,this.layout.layoutBox,p.layoutBox)){f=this.target||pn();const y=li(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+y;const b=li(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+b}$s(h,f),Ih(h,m),Jp(this.projectionDeltaWithTransform,this.layoutCorrected,h,m)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new UH),this.sharedNodes.get(u).add(h);const p=h.options.initialPromotionConfig;h.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var h;const{layoutId:u}=this.options;return u?((h=this.getStack())==null?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:u}=this.options;return u?(h=this.getStack())==null?void 0:h.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:f}={}){const p=this.getStack();p&&p.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:f}=u;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(h=!0),!h)return;const p={};f.z&&AS("z",u,p,this.animationValues);for(let m=0;m<vS.length;m++)AS(`rotate${vS[m]}`,u,p,this.animationValues),AS(`skew${vS[m]}`,u,p,this.animationValues);u.render();for(const m in p)u.setStaticValue(m,p[m]),this.animationValues&&(this.animationValues[m]=p[m]);u.scheduleRender()}applyProjectionStyles(u,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=eb(h==null?void 0:h.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=eb(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!oc(this.latestValues)&&(u.transform=f?f({},""):"none",this.hasProjected=!1);return}u.visibility="";const m=p.animationValues||p.latestValues;this.applyTransformsToTarget();let y=MH(this.projectionDeltaWithTransform,this.treeScale,m);f&&(y=f(m,y)),u.transform=y;const{x:b,y:A}=this.projectionDelta;u.transformOrigin=`${b.origin*100}% ${A.origin*100}% 0`,p.animationValues?u.opacity=p===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:u.opacity=p===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const S in hT){if(m[S]===void 0)continue;const{correct:w,applyTo:x,isCSSVariable:C}=hT[S],O=y==="none"?m[S]:w(m[S],p);if(x){const M=x.length;for(let N=0;N<M;N++)u[x[N]]=O}else C?this.options.visualElement.renderState.vars[S]=O:u[S]=O}this.options.layoutId&&(u.pointerEvents=p===this?eb(h==null?void 0:h.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var h;return(h=u.currentAnimation)==null?void 0:h.stop()}),this.root.nodes.forEach($M),this.root.sharedNodes.clear()}}}function VH(s){s.updateLayout()}function zH(s){var e;const t=((e=s.resumeFrom)==null?void 0:e.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&t&&s.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=s.layout,{animationType:o}=s.options,u=t.source!==s.layout.source;o==="size"?Sa(y=>{const b=u?t.measuredBox[y]:t.layoutBox[y],A=li(b);b.min=n[y].min,b.max=b.min+A}):UL(o,t.layoutBox,n)&&Sa(y=>{const b=u?t.measuredBox[y]:t.layoutBox[y],A=li(n[y]);b.max=b.min+A,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[y].max=s.relativeTarget[y].min+A)});const h=Nh();Jp(h,n,t.layoutBox);const f=Nh();u?Jp(f,s.applyTransform(r,!0),t.measuredBox):Jp(f,n,t.layoutBox);const p=!NL(h);let m=!1;if(!s.resumeFrom){const y=s.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:b,layout:A}=y;if(b&&A){const S=pn();Gb(S,t.layoutBox,b.layoutBox);const w=pn();Gb(w,n,A.layoutBox),LL(S,w)||(m=!0),y.options.layoutRoot&&(s.relativeTarget=w,s.relativeTargetOrigin=S,s.relativeParent=y)}}}s.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:f,layoutDelta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:m})}else if(s.isLead()){const{onExitComplete:n}=s.options;n&&n()}s.options.transition=void 0}function jH(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function GH(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function YH(s){s.clearSnapshot()}function $M(s){s.clearMeasurements()}function WM(s){s.isLayoutDirty=!1}function XH(s){const{visualElement:t}=s.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),s.resetTransform()}function QM(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function qH(s){s.resolveTargetDelta()}function KH(s){s.calcProjection()}function $H(s){s.resetSkewAndRotation()}function WH(s){s.removeLeadSnapshot()}function ZM(s,t,e){s.translate=ke(t.translate,0,e),s.scale=ke(t.scale,1,e),s.origin=t.origin,s.originPoint=t.originPoint}function JM(s,t,e,n){s.min=ke(t.min,e.min,n),s.max=ke(t.max,e.max,n)}function QH(s,t,e,n){JM(s.x,t.x,e.x,n),JM(s.y,t.y,e.y,n)}function ZH(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const JH={duration:.45,ease:[.4,0,.1,1]},tR=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),eR=tR("applewebkit/")&&!tR("chrome/")?Math.round:zs;function nR(s){s.min=eR(s.min),s.max=eR(s.max)}function tV(s){nR(s.x),nR(s.y)}function UL(s,t,e){return s==="position"||s==="preserve-aspect"&&!TH(GM(t),GM(e),.2)}function eV(s){var t;return s!==s.root&&((t=s.scroll)==null?void 0:t.wasRoot)}const nV=kL({attachResizeListener:(s,t)=>rm(s,"resize",t),measureScroll:()=>{var s,t;return{x:document.documentElement.scrollLeft||((s=document.body)==null?void 0:s.scrollLeft)||0,y:document.documentElement.scrollTop||((t=document.body)==null?void 0:t.scrollTop)||0}},checkIsScrollRoot:()=>!0}),ES={current:void 0},FL=kL({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!ES.current){const s=new nV({});s.mount(window),s.setOptions({layoutScroll:!0}),ES.current=s}return ES.current},resetTransform:(s,t)=>{s.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),_1=st.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});function iR(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function iV(...s){return t=>{let e=!1;const n=s.map(r=>{const o=iR(r,t);return!e&&typeof o=="function"&&(e=!0),o});if(e)return()=>{for(let r=0;r<n.length;r++){const o=n[r];typeof o=="function"?o():iR(s[r],null)}}}}function sV(...s){return st.useCallback(iV(...s),s)}class aV extends st.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const n=e.offsetParent,r=oT(n)&&n.offsetWidth||0,o=oT(n)&&n.offsetHeight||0,u=this.props.sizeRef.current;u.height=e.offsetHeight||0,u.width=e.offsetWidth||0,u.top=e.offsetTop,u.left=e.offsetLeft,u.right=r-u.width-u.left,u.bottom=o-u.height-u.top}return null}componentDidUpdate(){}render(){return this.props.children}}function rV({children:s,isPresent:t,anchorX:e,anchorY:n,root:r,pop:o}){var b;const u=st.useId(),h=st.useRef(null),f=st.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:p}=st.useContext(_1),m=((b=s.props)==null?void 0:b.ref)??(s==null?void 0:s.ref),y=sV(h,m);return st.useInsertionEffect(()=>{const{width:A,height:S,top:w,left:x,right:C,bottom:O}=f.current;if(t||o===!1||!h.current||!A||!S)return;const M=e==="left"?`left: ${x}`:`right: ${C}`,N=n==="bottom"?`bottom: ${O}`:`top: ${w}`;h.current.dataset.motionPopId=u;const L=document.createElement("style");p&&(L.nonce=p);const I=r??document.head;return I.appendChild(L),L.sheet&&L.sheet.insertRule(`
          [data-motion-pop-id="${u}"] {
            position: absolute !important;
            width: ${A}px !important;
            height: ${S}px !important;
            ${M}px !important;
            ${N}px !important;
          }
        `),()=>{I.contains(L)&&I.removeChild(L)}},[t]),Y.jsx(aV,{isPresent:t,childRef:h,sizeRef:f,pop:o,children:o===!1?s:st.cloneElement(s,{ref:y})})}const oV=({children:s,initial:t,isPresent:e,onExitComplete:n,custom:r,presenceAffectsLayout:o,mode:u,anchorX:h,anchorY:f,root:p})=>{const m=Q_(lV),y=st.useId();let b=!0,A=st.useMemo(()=>(b=!1,{id:y,initial:t,isPresent:e,custom:r,onExitComplete:S=>{m.set(S,!0);for(const w of m.values())if(!w)return;n&&n()},register:S=>(m.set(S,!1),()=>m.delete(S))}),[e,m,n]);return o&&b&&(A={...A}),st.useMemo(()=>{m.forEach((S,w)=>m.set(w,!1))},[e]),st.useEffect(()=>{!e&&!m.size&&n&&n()},[e]),s=Y.jsx(rV,{pop:u==="popLayout",isPresent:e,anchorX:h,anchorY:f,root:p,children:s}),Y.jsx(xv.Provider,{value:A,children:s})};function lV(){return new Map}function HL(s=!0){const t=st.useContext(xv);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,o=st.useId();st.useEffect(()=>{if(s)return r(o)},[s]);const u=st.useCallback(()=>s&&n&&n(o),[o,n,s]);return!e&&n?[!1,u]:[!0]}const P0=s=>s.key||"";function sR(s){const t=[];return st.Children.forEach(s,e=>{st.isValidElement(e)&&t.push(e)}),t}const SS=({children:s,custom:t,initial:e=!0,onExitComplete:n,presenceAffectsLayout:r=!0,mode:o="sync",propagate:u=!1,anchorX:h="left",anchorY:f="top",root:p})=>{const[m,y]=HL(u),b=st.useMemo(()=>sR(s),[s]),A=u&&!m?[]:b.map(P0),S=st.useRef(!0),w=st.useRef(b),x=Q_(()=>new Map),C=st.useRef(new Set),[O,M]=st.useState(b),[N,L]=st.useState(b);pN(()=>{S.current=!1,w.current=b;for(let j=0;j<N.length;j++){const W=P0(N[j]);A.includes(W)?(x.delete(W),C.current.delete(W)):x.get(W)!==!0&&x.set(W,!1)}},[N,A.length,A.join("-")]);const I=[];if(b!==O){let j=[...b];for(let W=0;W<N.length;W++){const nt=N[W],et=P0(nt);A.includes(et)||(j.splice(W,0,nt),I.push(nt))}return o==="wait"&&I.length&&(j=I),L(sR(j)),M(b),null}const{forceRender:k}=st.useContext(W_);return Y.jsx(Y.Fragment,{children:N.map(j=>{const W=P0(j),nt=u&&!m?!1:b===N||A.includes(W),et=()=>{if(C.current.has(W))return;if(C.current.add(W),x.has(W))x.set(W,!0);else return;let ht=!0;x.forEach(mt=>{mt||(ht=!1)}),ht&&(k==null||k(),L(w.current),u&&(y==null||y()),n&&n())};return Y.jsx(oV,{isPresent:nt,initial:!S.current||e?void 0:!1,custom:t,presenceAffectsLayout:r,mode:o,root:p,onExitComplete:nt?void 0:et,anchorX:h,anchorY:f,children:j},W)})})},VL=st.createContext({strict:!1}),aR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let rR=!1;function cV(){if(rR)return;const s={};for(const t in aR)s[t]={isEnabled:e=>aR[t].some(n=>!!e[n])};gL(s),rR=!0}function zL(){return cV(),$3()}function uV(s){const t=zL();for(const e in s)t[e]={...t[e],...s[e]};gL(t)}const hV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function Yb(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||hV.has(s)}let jL=s=>!Yb(s);function dV(s){typeof s=="function"&&(jL=t=>t.startsWith("on")?!Yb(t):s(t))}try{dV(require("@emotion/is-prop-valid").default)}catch{}function fV(s,t,e){const n={};for(const r in s)r==="values"&&typeof s.values=="object"||(jL(r)||e===!0&&Yb(r)||!t&&!Yb(r)||s.draggable&&r.startsWith("onDrag"))&&(n[r]=s[r]);return n}const Mv=st.createContext({});function pV(s,t){if(Dv(s)){const{initial:e,animate:n}=s;return{initial:e===!1||am(e)?e:void 0,animate:am(n)?n:void 0}}return s.inherit!==!1?t:{}}function mV(s){const{initial:t,animate:e}=pV(s,st.useContext(Mv));return st.useMemo(()=>({initial:t,animate:e}),[oR(t),oR(e)])}function oR(s){return Array.isArray(s)?s.join(" "):s}const w1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function GL(s,t,e){for(const n in t)!Qn(t[n])&&!TL(n,e)&&(s[n]=t[n])}function gV({transformTemplate:s},t){return st.useMemo(()=>{const e=w1();return S1(e,t,s),Object.assign({},e.vars,e.style)},[t])}function yV(s,t){const e=s.style||{},n={};return GL(n,e,s),Object.assign(n,gV(s,t)),n}function bV(s,t){const e={},n=yV(s,t);return s.drag&&s.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(e.tabIndex=0),e.style=n,e}const YL=()=>({...w1(),attrs:{}});function vV(s,t,e,n){const r=st.useMemo(()=>{const o=YL();return _L(o,t,xL(n),s.transformTemplate,s.style),{...o.attrs,style:{...o.style}}},[t]);if(s.style){const o={};GL(o,s.style,s),r.style={...o,...r.style}}return r}const AV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function x1(s){return typeof s!="string"||s.includes("-")?!1:!!(AV.indexOf(s)>-1||/[A-Z]/u.test(s))}function EV(s,t,e,{latestValues:n},r,o=!1,u){const f=(u??x1(s)?vV:bV)(t,n,r,s),p=fV(t,typeof s=="string",o),m=s!==st.Fragment?{...p,...f,ref:e}:{},{children:y}=t,b=st.useMemo(()=>Qn(y)?y.get():y,[y]);return st.createElement(s,{...m,children:b})}function SV({scrapeMotionValuesFromProps:s,createRenderState:t},e,n,r){return{latestValues:TV(e,n,r,s),renderState:t()}}function TV(s,t,e,n){const r={},o=n(s,{});for(const b in o)r[b]=eb(o[b]);let{initial:u,animate:h}=s;const f=Dv(s),p=pL(s);t&&p&&!f&&s.inherit!==!1&&(u===void 0&&(u=t.initial),h===void 0&&(h=t.animate));let m=e?e.initial===!1:!1;m=m||u===!1;const y=m?h:u;if(y&&typeof y!="boolean"&&!Cv(y)){const b=Array.isArray(y)?y:[y];for(let A=0;A<b.length;A++){const S=p1(s,b[A]);if(S){const{transitionEnd:w,transition:x,...C}=S;for(const O in C){let M=C[O];if(Array.isArray(M)){const N=m?M.length-1:0;M=M[N]}M!==null&&(r[O]=M)}for(const O in w)r[O]=w[O]}}}return r}const XL=s=>(t,e)=>{const n=st.useContext(Mv),r=st.useContext(xv),o=()=>SV(s,t,n,r);return e?o():Q_(o)},_V=XL({scrapeMotionValuesFromProps:T1,createRenderState:w1}),wV=XL({scrapeMotionValuesFromProps:CL,createRenderState:YL}),xV=Symbol.for("motionComponentSymbol");function CV(s,t,e){const n=st.useRef(e);st.useInsertionEffect(()=>{n.current=e});const r=st.useRef(null);return st.useCallback(o=>{var h;o&&((h=s.onMount)==null||h.call(s,o)),t&&(o?t.mount(o):t.unmount());const u=n.current;if(typeof u=="function")if(o){const f=u(o);typeof f=="function"&&(r.current=f)}else r.current?(r.current(),r.current=null):u(o);else u&&(u.current=o)},[t])}const qL=st.createContext({});function Ah(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function DV(s,t,e,n,r,o){var M,N;const{visualElement:u}=st.useContext(Mv),h=st.useContext(VL),f=st.useContext(xv),p=st.useContext(_1),m=p.reducedMotion,y=p.skipAnimations,b=st.useRef(null),A=st.useRef(!1);n=n||h.renderer,!b.current&&n&&(b.current=n(s,{visualState:t,parent:u,props:e,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:m,skipAnimations:y,isSVG:o}),A.current&&b.current&&(b.current.manuallyAnimateOnMount=!0));const S=b.current,w=st.useContext(qL);S&&!S.projection&&r&&(S.type==="html"||S.type==="svg")&&MV(b.current,e,r,w);const x=st.useRef(!1);st.useInsertionEffect(()=>{S&&x.current&&S.update(e,f)});const C=e[eL],O=st.useRef(!!C&&!((M=window.MotionHandoffIsComplete)!=null&&M.call(window,C))&&((N=window.MotionHasOptimisedAnimation)==null?void 0:N.call(window,C)));return pN(()=>{A.current=!0,S&&(x.current=!0,window.MotionIsMounted=!0,S.updateFeatures(),S.scheduleRenderMicrotask(),O.current&&S.animationState&&S.animationState.animateChanges())}),st.useEffect(()=>{S&&(!O.current&&S.animationState&&S.animationState.animateChanges(),O.current&&(queueMicrotask(()=>{var L;(L=window.MotionHandoffMarkAsComplete)==null||L.call(window,C)}),O.current=!1),S.enteringChildren=void 0)}),S}function MV(s,t,e,n){const{layoutId:r,layout:o,drag:u,dragConstraints:h,layoutScroll:f,layoutRoot:p,layoutCrossfade:m}=t;s.projection=new e(s.latestValues,t["data-framer-portal-id"]?void 0:KL(s.parent)),s.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!u||h&&Ah(h),visualElement:s,animationType:typeof o=="string"?o:"both",initialPromotionConfig:n,crossfade:m,layoutScroll:f,layoutRoot:p})}function KL(s){if(s)return s.options.allowProjection!==!1?s.projection:KL(s.parent)}function TS(s,{forwardMotionProps:t=!1,type:e}={},n,r){n&&uV(n);const o=e?e==="svg":x1(s),u=o?wV:_V;function h(p,m){let y;const b={...st.useContext(_1),...p,layoutId:RV(p)},{isStatic:A}=b,S=mV(p),w=u(p,A);if(!A&&fN){OV();const x=NV(b);y=x.MeasureLayout,S.visualElement=DV(s,w,b,r,x.ProjectionNode,o)}return Y.jsxs(Mv.Provider,{value:S,children:[y&&S.visualElement?Y.jsx(y,{visualElement:S.visualElement,...b}):null,EV(s,p,CV(w,S.visualElement,m),w,A,t,o)]})}h.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const f=st.forwardRef(h);return f[xV]=s,f}function RV({layoutId:s}){const t=st.useContext(W_).id;return t&&s!==void 0?t+"-"+s:s}function OV(s,t){st.useContext(VL).strict}function NV(s){const t=zL(),{drag:e,layout:n}=t;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(s)||n!=null&&n.isEnabled(s)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function LV(s,t){if(typeof Proxy>"u")return TS;const e=new Map,n=(o,u)=>TS(o,u,s,t),r=(o,u)=>n(o,u);return new Proxy(r,{get:(o,u)=>u==="create"?n:(e.has(u)||e.set(u,TS(u,void 0,s,t)),e.get(u))})}const IV=(s,t)=>t.isSVG??x1(s)?new dH(t):new rH(t,{allowProjection:s!==st.Fragment});class PV extends Vl{constructor(t){super(t),t.animationState||(t.animationState=yH(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Cv(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let BV=0;class kV extends Vl{constructor(){super(...arguments),this.id=BV++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const r=this.node.animationState.setActive("exit",!t);e&&!t&&r.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const UV={animation:{Feature:PV},exit:{Feature:kV}};function uy(s){return{point:{x:s.pageX,y:s.pageY}}}const FV=s=>t=>b1(t)&&s(t,uy(t));function tm(s,t,e,n){return rm(s,t,FV(e),n)}const $L=({current:s})=>s?s.ownerDocument.defaultView:null,lR=(s,t)=>Math.abs(s-t);function HV(s,t){const e=lR(s.x,t.x),n=lR(s.y,t.y);return Math.sqrt(e**2+n**2)}const cR=new Set(["auto","scroll"]);class WL{constructor(t,e,{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:o=!1,distanceThreshold:u=3,element:h}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=A=>{this.handleScroll(A.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=wS(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,w=HV(A.offset,{x:0,y:0})>=this.distanceThreshold;if(!S&&!w)return;const{point:x}=A,{timestamp:C}=kn;this.history.push({...x,timestamp:C});const{onStart:O,onMove:M}=this.handlers;S||(O&&O(this.lastMoveEvent,A),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,A)},this.handlePointerMove=(A,S)=>{this.lastMoveEvent=A,this.lastMoveEventInfo=_S(S,this.transformPagePoint),_e.update(this.updatePoint,!0)},this.handlePointerUp=(A,S)=>{this.end();const{onEnd:w,onSessionEnd:x,resumeAnimation:C}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const O=wS(A.type==="pointercancel"?this.lastMoveEventInfo:_S(S,this.transformPagePoint),this.history);this.startEvent&&w&&w(A,O),x&&x(A,O)},!b1(t))return;this.dragSnapToOrigin=o,this.handlers=e,this.transformPagePoint=n,this.distanceThreshold=u,this.contextWindow=r||window;const f=uy(t),p=_S(f,this.transformPagePoint),{point:m}=p,{timestamp:y}=kn;this.history=[{...m,timestamp:y}];const{onSessionStart:b}=e;b&&b(t,wS(p,this.history)),this.removeListeners=oy(tm(this.contextWindow,"pointermove",this.handlePointerMove),tm(this.contextWindow,"pointerup",this.handlePointerUp),tm(this.contextWindow,"pointercancel",this.handlePointerUp)),h&&this.startScrollTracking(h)}startScrollTracking(t){let e=t.parentElement;for(;e;){const n=getComputedStyle(e);(cR.has(n.overflowX)||cR.has(n.overflowY))&&this.scrollPositions.set(e,{x:e.scrollLeft,y:e.scrollTop}),e=e.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0}),window.addEventListener("scroll",this.onWindowScroll),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const e=this.scrollPositions.get(t);if(!e)return;const n=t===window,r=n?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},o={x:r.x-e.x,y:r.y-e.y};o.x===0&&o.y===0||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=o.x,this.lastMoveEventInfo.point.y+=o.y):this.history.length>0&&(this.history[0].x-=o.x,this.history[0].y-=o.y),this.scrollPositions.set(t,r),_e.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),kl(this.updatePoint)}}function _S(s,t){return t?{point:t(s.point)}:s}function uR(s,t){return{x:s.x-t.x,y:s.y-t.y}}function wS({point:s},t){return{point:s,delta:uR(s,QL(t)),offset:uR(s,VV(t)),velocity:zV(t,.1)}}function VV(s){return s[0]}function QL(s){return s[s.length-1]}function zV(s,t){if(s.length<2)return{x:0,y:0};let e=s.length-1,n=null;const r=QL(s);for(;e>=0&&(n=s[e],!(r.timestamp-n.timestamp>da(t)));)e--;if(!n)return{x:0,y:0};n===s[0]&&s.length>2&&r.timestamp-n.timestamp>da(t)*2&&(n=s[1]);const o=Vs(r.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const u={x:(r.x-n.x)/o,y:(r.y-n.y)/o};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function jV(s,{min:t,max:e},n){return t!==void 0&&s<t?s=n?ke(t,s,n.min):Math.max(s,t):e!==void 0&&s>e&&(s=n?ke(e,s,n.max):Math.min(s,e)),s}function hR(s,t,e){return{min:t!==void 0?s.min+t:void 0,max:e!==void 0?s.max+e-(s.max-s.min):void 0}}function GV(s,{top:t,left:e,bottom:n,right:r}){return{x:hR(s.x,e,r),y:hR(s.y,t,n)}}function dR(s,t){let e=t.min-s.min,n=t.max-s.max;return t.max-t.min<s.max-s.min&&([e,n]=[n,e]),{min:e,max:n}}function YV(s,t){return{x:dR(s.x,t.x),y:dR(s.y,t.y)}}function XV(s,t){let e=.5;const n=li(s),r=li(t);return r>n?e=nm(t.min,t.max-n,s.min):n>r&&(e=nm(s.min,s.max-r,t.min)),qa(0,1,e)}function qV(s,t){const e={};return t.min!==void 0&&(e.min=t.min-s.min),t.max!==void 0&&(e.max=t.max-s.min),e}const dT=.35;function KV(s=dT){return s===!1?s=0:s===!0&&(s=dT),{x:fR(s,"left","right"),y:fR(s,"top","bottom")}}function fR(s,t,e){return{min:pR(s,t),max:pR(s,e)}}function pR(s,t){return typeof s=="number"?s:s[t]||0}const $V=new WeakMap;class WV{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=pn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:n}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=y=>{e&&this.snapToCursor(uy(y).point),this.stopAnimation()},u=(y,b)=>{const{drag:A,dragPropagation:S,onDragStart:w}=this.getProps();if(A&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=w3(A),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=b,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Sa(C=>{let O=this.getAxisMotionValue(C).get()||0;if(Xa.test(O)){const{projection:M}=this.visualElement;if(M&&M.layout){const N=M.layout.layoutBox[C];N&&(O=li(N)*(parseFloat(O)/100))}}this.originPoint[C]=O}),w&&_e.update(()=>w(y,b),!1,!0),iT(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},h=(y,b)=>{this.latestPointerEvent=y,this.latestPanInfo=b;const{dragPropagation:A,dragDirectionLock:S,onDirectionLock:w,onDrag:x}=this.getProps();if(!A&&!this.openDragLock)return;const{offset:C}=b;if(S&&this.currentDirection===null){this.currentDirection=ZV(C),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",b.point,C),this.updateAxis("y",b.point,C),this.visualElement.render(),x&&_e.update(()=>x(y,b),!1,!0)},f=(y,b)=>{this.latestPointerEvent=y,this.latestPanInfo=b,this.stop(y,b),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>{const{dragSnapToOrigin:y}=this.getProps();(y||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:m}=this.getProps();this.panSession=new WL(t,{onSessionStart:o,onStart:u,onMove:h,onSessionEnd:f,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:n,contextWindow:$L(this.visualElement),element:this.visualElement.current})}stop(t,e){const n=t||this.latestPointerEvent,r=e||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!r||!n)return;const{velocity:u}=r;this.startAnimation(u);const{onDragEnd:h}=this.getProps();h&&_e.postRender(()=>h(n,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,e,n){const{drag:r}=this.getProps();if(!n||!B0(t,r,this.currentDirection))return;const o=this.getAxisMotionValue(t);let u=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(u=jV(u,this.constraints[t],this.elastic[t])),o.set(u)}resolveConstraints(){var o;const{dragConstraints:t,dragElastic:e}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,r=this.constraints;t&&Ah(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=GV(n.layoutBox,t):this.constraints=!1,this.elastic=KV(e),r!==this.constraints&&!Ah(t)&&n&&this.constraints&&!this.hasMutatedConstraints&&Sa(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=qV(n.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Ah(t))return!1;const n=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=tH(n,r.root,this.visualElement.getTransformPagePoint());let u=YV(r.layout.layoutBox,o);if(e){const h=e(Q3(u));this.hasMutatedConstraints=!!h,h&&(u=bL(h))}return u}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:r,dragTransition:o,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),f=this.constraints||{},p=Sa(m=>{if(!B0(m,e,this.currentDirection))return;let y=f&&f[m]||{};u&&(y={min:0,max:0});const b=r?200:1e6,A=r?40:1e7,S={type:"inertia",velocity:n?t[m]:0,bounceStiffness:b,bounceDamping:A,timeConstant:750,restDelta:1,restSpeed:10,...o,...y};return this.startAxisValueAnimation(m,S)});return Promise.all(p).then(h)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return iT(this.visualElement,t),n.start(f1(t,n,0,e,this.visualElement,!1))}stopAnimation(){Sa(t=>this.getAxisMotionValue(t).stop())}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),r=n[e];return r||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Sa(e=>{const{drag:n}=this.getProps();if(!B0(e,n,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(e);if(r&&r.layout){const{min:u,max:h}=r.layout.layoutBox[e],f=o.get()||0;o.set(t[e]-ke(u,h,.5)+f)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!Ah(e)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Sa(u=>{const h=this.getAxisMotionValue(u);if(h&&this.constraints!==!1){const f=h.get();r[u]=XV({min:f,max:f},this.constraints[u])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.constraints=!1,this.resolveConstraints(),Sa(u=>{if(!B0(u,t,null))return;const h=this.getAxisMotionValue(u),{min:f,max:p}=this.constraints[u];h.set(ke(f,p,r[u]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;$V.set(this.visualElement,this);const t=this.visualElement.current,e=tm(t,"pointerdown",p=>{const{drag:m,dragListener:y=!0}=this.getProps(),b=p.target,A=b!==t&&O3(b);m&&y&&!A&&this.start(p)});let n;const r=()=>{const{dragConstraints:p}=this.getProps();Ah(p)&&p.current&&(this.constraints=this.resolveRefConstraints(),n||(n=QV(t,p.current,()=>this.scalePositionWithinConstraints())))},{projection:o}=this.visualElement,u=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),_e.read(r);const h=rm(window,"resize",()=>this.scalePositionWithinConstraints()),f=o.addEventListener("didUpdate",(({delta:p,hasLayoutChanged:m})=>{this.isDragging&&m&&(Sa(y=>{const b=this.getAxisMotionValue(y);b&&(this.originPoint[y]+=p[y].translate,b.set(b.get()+p[y].translate))}),this.visualElement.render())}));return()=>{h(),e(),u(),f&&f(),n&&n()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:u=dT,dragMomentum:h=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:r,dragConstraints:o,dragElastic:u,dragMomentum:h}}}function mR(s){let t=!0;return()=>{if(t){t=!1;return}s()}}function QV(s,t,e){const n=SM(s,mR(e)),r=SM(t,mR(e));return()=>{n(),r()}}function B0(s,t,e){return(t===!0||t===s)&&(e===null||e===s)}function ZV(s,t=10){let e=null;return Math.abs(s.y)>t?e="y":Math.abs(s.x)>t&&(e="x"),e}class JV extends Vl{constructor(t){super(t),this.removeGroupControls=zs,this.removeListeners=zs,this.controls=new WV(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||zs}update(){const{dragControls:t}=this.node.getProps(),{dragControls:e}=this.node.prevProps||{};t!==e&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const xS=s=>(t,e)=>{s&&_e.update(()=>s(t,e),!1,!0)};class t4 extends Vl{constructor(){super(...arguments),this.removePointerDownListener=zs}onPointerDown(t){this.session=new WL(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:$L(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:xS(t),onStart:xS(e),onMove:xS(n),onEnd:(o,u)=>{delete this.session,r&&_e.postRender(()=>r(o,u))}}}mount(){this.removePointerDownListener=tm(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let CS=!1;class e4 extends st.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:r}=this.props,{projection:o}=t;o&&(e.group&&e.group.add(o),n&&n.register&&r&&n.register(o),CS&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),nb.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:r,isPresent:o}=this.props,{projection:u}=n;return u&&(u.isPresent=o,t.layoutDependency!==e&&u.setOptions({...u.options,layoutDependency:e}),CS=!0,r||t.layoutDependency!==e||e===void 0||t.isPresent!==o?u.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?u.promote():u.relegate()||_e.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),y1.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:r}=t;CS=!0,r&&(r.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function ZL(s){const[t,e]=HL(),n=st.useContext(W_);return Y.jsx(e4,{...s,layoutGroup:n,switchLayoutGroup:st.useContext(qL),isPresent:t,safeToRemove:e})}const n4={pan:{Feature:t4},drag:{Feature:JV,ProjectionNode:FL,MeasureLayout:ZL}};function gR(s,t,e){const{props:n}=s;s.animationState&&n.whileHover&&s.animationState.setActive("whileHover",e==="Start");const r="onHover"+e,o=n[r];o&&_e.postRender(()=>o(t,uy(t)))}class i4 extends Vl{mount(){const{current:t}=this.node;t&&(this.unmount=C3(t,(e,n)=>(gR(this.node,n,"Start"),r=>gR(this.node,r,"End"))))}unmount(){}}class s4 extends Vl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=oy(rm(this.node.current,"focus",()=>this.onFocus()),rm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function yR(s,t,e){const{props:n}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&n.whileTap&&s.animationState.setActive("whileTap",e==="Start");const r="onTap"+(e==="End"?"":e),o=n[r];o&&_e.postRender(()=>o(t,uy(t)))}class a4 extends Vl{mount(){const{current:t}=this.node;if(!t)return;const{globalTapTarget:e,propagate:n}=this.node.props;this.unmount=L3(t,(r,o)=>(yR(this.node,o,"Start"),(u,{success:h})=>yR(this.node,u,h?"End":"Cancel")),{useGlobalTarget:e,stopPropagation:(n==null?void 0:n.tap)===!1})}unmount(){}}const fT=new WeakMap,DS=new WeakMap,r4=s=>{const t=fT.get(s.target);t&&t(s)},o4=s=>{s.forEach(r4)};function l4({root:s,...t}){const e=s||document;DS.has(e)||DS.set(e,{});const n=DS.get(e),r=JSON.stringify(t);return n[r]||(n[r]=new IntersectionObserver(o4,{root:s,...t})),n[r]}function c4(s,t,e){const n=l4(t);return fT.set(s,e),n.observe(s),()=>{fT.delete(s),n.unobserve(s)}}const u4={some:0,all:1};class h4 extends Vl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:r="some",once:o}=t,u={root:e?e.current:void 0,rootMargin:n,threshold:typeof r=="number"?r:u4[r]},h=f=>{const{isIntersecting:p}=f;if(this.isInView===p||(this.isInView=p,o&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:m,onViewportLeave:y}=this.node.getProps(),b=p?m:y;b&&b(f)};return c4(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(d4(t,e))&&this.startObserver()}unmount(){}}function d4({viewport:s={}},{viewport:t={}}={}){return e=>s[e]!==t[e]}const f4={inView:{Feature:h4},tap:{Feature:a4},focus:{Feature:s4},hover:{Feature:i4}},p4={layout:{ProjectionNode:FL,MeasureLayout:ZL}},m4={...UV,...f4,...n4,...p4},ko=LV(m4,IV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),y4=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase()),bR=s=>{const t=y4(s);return t.charAt(0).toUpperCase()+t.slice(1)},JL=(...s)=>s.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim(),b4=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var v4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=st.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:r="",children:o,iconNode:u,...h},f)=>st.createElement("svg",{ref:f,...v4,width:t,height:t,stroke:s,strokeWidth:n?Number(e)*24/Number(t):e,className:JL("lucide",r),...!o&&!b4(h)&&{"aria-hidden":"true"},...h},[...u.map(([p,m])=>st.createElement(p,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=(s,t)=>{const e=st.forwardRef(({className:n,...r},o)=>st.createElement(A4,{ref:o,iconNode:t,className:JL(`lucide-${g4(bR(s))}`,`lucide-${s}`,n),...r}));return e.displayName=bR(s),e};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],S4=Oi("book-open",E4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],vR=Oi("brain-circuit",T4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],AR=Oi("chevron-right",_4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],x4=Oi("circle-alert",w4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],MS=Oi("circle-check",C4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ER=Oi("circle-x",D4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M11 14h10",key:"1w8e9d"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v1.344",key:"1e62lh"}],["path",{d:"m17 18 4-4-4-4",key:"z2g111"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 1.793-1.113",key:"bjbb7m"}],["rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",key:"ublpy"}]],R4=Oi("clipboard-paste",M4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],N4=Oi("file-text",O4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],I4=Oi("history",L4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],B4=Oi("rotate-ccw",P4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],U4=Oi("skip-forward",k4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],RS=Oi("sparkles",F4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],V4=Oi("trophy",H4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],j4=Oi("upload",z4);var Ep={exports:{}},OS={},NS,SR;function G4(){if(SR)return NS;SR=1;function s(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return NS=s,s.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},s.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},s.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var n=this._timeouts.shift();if(n===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},n),this._options.unref&&this._timer.unref(),!0},s.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},s.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)},s.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)},s.prototype.start=s.prototype.try,s.prototype.errors=function(){return this._errors},s.prototype.attempts=function(){return this._attempts},s.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,n=0,r=0;r<this._errors.length;r++){var o=this._errors[r],u=o.message,h=(t[u]||0)+1;t[u]=h,h>=n&&(e=o,n=h)}return e},NS}var TR;function Y4(){return TR||(TR=1,(function(s){var t=G4();s.operation=function(e){var n=s.timeouts(e);return new t(n,{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},s.timeouts=function(e){if(e instanceof Array)return[].concat(e);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var r in e)n[r]=e[r];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var o=[],u=0;u<n.retries;u++)o.push(this.createTimeout(u,n));return e&&e.forever&&!o.length&&o.push(this.createTimeout(u,n)),o.sort(function(h,f){return h-f}),o},s.createTimeout=function(e,n){var r=n.randomize?Math.random()+1:1,o=Math.round(r*Math.max(n.minTimeout,1)*Math.pow(n.factor,e));return o=Math.min(o,n.maxTimeout),o},s.wrap=function(e,n,r){if(n instanceof Array&&(r=n,n=null),!r){r=[];for(var o in e)typeof e[o]=="function"&&r.push(o)}for(var u=0;u<r.length;u++){var h=r[u],f=e[h];e[h]=(function(m){var y=s.operation(n),b=Array.prototype.slice.call(arguments,1),A=b.pop();b.push(function(S){y.retry(S)||(S&&(arguments[0]=y.mainError()),A.apply(this,arguments))}),y.attempt(function(){m.apply(e,b)})}).bind(e,f),e[h].options=n}}})(OS)),OS}var LS,_R;function X4(){return _R||(_R=1,LS=Y4()),LS}var wR;function q4(){if(wR)return Ep.exports;wR=1;const s=X4(),t=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class e extends Error{constructor(h){super(),h instanceof Error?(this.originalError=h,{message:h}=h):(this.originalError=new Error(h),this.originalError.stack=this.stack),this.name="AbortError",this.message=h}}const n=(u,h,f)=>{const p=f.retries-(h-1);return u.attemptNumber=h,u.retriesLeft=p,u},r=u=>t.includes(u),o=(u,h)=>new Promise((f,p)=>{h={onFailedAttempt:()=>{},retries:10,...h};const m=s.operation(h);m.attempt(async y=>{try{f(await u(y))}catch(b){if(!(b instanceof Error)){p(new TypeError(`Non-error was thrown: "${b}". You should only throw errors.`));return}if(b instanceof e)m.stop(),p(b.originalError);else if(b instanceof TypeError&&!r(b.message))m.stop(),p(b);else{n(b,y,h);try{await h.onFailedAttempt(b)}catch(A){p(A);return}m.retry(b)||p(m.mainError())}}})});return Ep.exports=o,Ep.exports.default=o,Ep.exports.AbortError=e,Ep.exports}q4();var K4={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var xR;(function(s){s.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",s.OUTCOME_OK="OUTCOME_OK",s.OUTCOME_FAILED="OUTCOME_FAILED",s.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(xR||(xR={}));var CR;(function(s){s.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",s.PYTHON="PYTHON"})(CR||(CR={}));var DR;(function(s){s.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",s.SILENT="SILENT",s.WHEN_IDLE="WHEN_IDLE",s.INTERRUPT="INTERRUPT"})(DR||(DR={}));var br;(function(s){s.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",s.STRING="STRING",s.NUMBER="NUMBER",s.INTEGER="INTEGER",s.BOOLEAN="BOOLEAN",s.ARRAY="ARRAY",s.OBJECT="OBJECT",s.NULL="NULL"})(br||(br={}));var MR;(function(s){s.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",s.SIMPLE_SEARCH="SIMPLE_SEARCH",s.ELASTIC_SEARCH="ELASTIC_SEARCH"})(MR||(MR={}));var RR;(function(s){s.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",s.NO_AUTH="NO_AUTH",s.API_KEY_AUTH="API_KEY_AUTH",s.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",s.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",s.OAUTH="OAUTH",s.OIDC_AUTH="OIDC_AUTH"})(RR||(RR={}));var OR;(function(s){s.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",s.HTTP_IN_QUERY="HTTP_IN_QUERY",s.HTTP_IN_HEADER="HTTP_IN_HEADER",s.HTTP_IN_PATH="HTTP_IN_PATH",s.HTTP_IN_BODY="HTTP_IN_BODY",s.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(OR||(OR={}));var NR;(function(s){s.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",s.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",s.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",s.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",s.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",s.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",s.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(NR||(NR={}));var LR;(function(s){s.UNSPECIFIED="UNSPECIFIED",s.BLOCKING="BLOCKING",s.NON_BLOCKING="NON_BLOCKING"})(LR||(LR={}));var IR;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.MODE_DYNAMIC="MODE_DYNAMIC"})(IR||(IR={}));var PR;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.AUTO="AUTO",s.ANY="ANY",s.NONE="NONE",s.VALIDATED="VALIDATED"})(PR||(PR={}));var BR;(function(s){s.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",s.LOW="LOW",s.MEDIUM="MEDIUM",s.HIGH="HIGH",s.MINIMAL="MINIMAL"})(BR||(BR={}));var kR;(function(s){s.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",s.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",s.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",s.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",s.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",s.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",s.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",s.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",s.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",s.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",s.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(kR||(kR={}));var UR;(function(s){s.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",s.SEVERITY="SEVERITY",s.PROBABILITY="PROBABILITY"})(UR||(UR={}));var FR;(function(s){s.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",s.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",s.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",s.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",s.BLOCK_NONE="BLOCK_NONE",s.OFF="OFF"})(FR||(FR={}));var HR;(function(s){s.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",s.STOP="STOP",s.MAX_TOKENS="MAX_TOKENS",s.SAFETY="SAFETY",s.RECITATION="RECITATION",s.LANGUAGE="LANGUAGE",s.OTHER="OTHER",s.BLOCKLIST="BLOCKLIST",s.PROHIBITED_CONTENT="PROHIBITED_CONTENT",s.SPII="SPII",s.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",s.IMAGE_SAFETY="IMAGE_SAFETY",s.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",s.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",s.NO_IMAGE="NO_IMAGE",s.IMAGE_RECITATION="IMAGE_RECITATION",s.IMAGE_OTHER="IMAGE_OTHER"})(HR||(HR={}));var VR;(function(s){s.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",s.NEGLIGIBLE="NEGLIGIBLE",s.LOW="LOW",s.MEDIUM="MEDIUM",s.HIGH="HIGH"})(VR||(VR={}));var zR;(function(s){s.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",s.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",s.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",s.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",s.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(zR||(zR={}));var jR;(function(s){s.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",s.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",s.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",s.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",s.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(jR||(jR={}));var GR;(function(s){s.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",s.SAFETY="SAFETY",s.OTHER="OTHER",s.BLOCKLIST="BLOCKLIST",s.PROHIBITED_CONTENT="PROHIBITED_CONTENT",s.IMAGE_SAFETY="IMAGE_SAFETY",s.MODEL_ARMOR="MODEL_ARMOR",s.JAILBREAK="JAILBREAK"})(GR||(GR={}));var YR;(function(s){s.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",s.ON_DEMAND="ON_DEMAND",s.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(YR||(YR={}));var XR;(function(s){s.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",s.TEXT="TEXT",s.IMAGE="IMAGE",s.AUDIO="AUDIO"})(XR||(XR={}));var qR;(function(s){s.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",s.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",s.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",s.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(qR||(qR={}));var KR;(function(s){s.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",s.TUNING_MODE_FULL="TUNING_MODE_FULL",s.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(KR||(KR={}));var $R;(function(s){s.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",s.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",s.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",s.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",s.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",s.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",s.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})($R||($R={}));var WR;(function(s){s.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",s.JOB_STATE_QUEUED="JOB_STATE_QUEUED",s.JOB_STATE_PENDING="JOB_STATE_PENDING",s.JOB_STATE_RUNNING="JOB_STATE_RUNNING",s.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",s.JOB_STATE_FAILED="JOB_STATE_FAILED",s.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",s.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",s.JOB_STATE_PAUSED="JOB_STATE_PAUSED",s.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",s.JOB_STATE_UPDATING="JOB_STATE_UPDATING",s.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(WR||(WR={}));var QR;(function(s){s.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",s.TUNING_TASK_I2V="TUNING_TASK_I2V",s.TUNING_TASK_T2V="TUNING_TASK_T2V",s.TUNING_TASK_R2V="TUNING_TASK_R2V"})(QR||(QR={}));var ZR;(function(s){s.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",s.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",s.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",s.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",s.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(ZR||(ZR={}));var JR;(function(s){s.COLLECTION="COLLECTION"})(JR||(JR={}));var tO;(function(s){s.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",s.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",s.BALANCED="BALANCED",s.PRIORITIZE_COST="PRIORITIZE_COST"})(tO||(tO={}));var eO;(function(s){s.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",s.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(eO||(eO={}));var nO;(function(s){s.PREDICT="PREDICT",s.EMBED_CONTENT="EMBED_CONTENT"})(nO||(nO={}));var iO;(function(s){s.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",s.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",s.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",s.BLOCK_NONE="BLOCK_NONE"})(iO||(iO={}));var sO;(function(s){s.DONT_ALLOW="DONT_ALLOW",s.ALLOW_ADULT="ALLOW_ADULT",s.ALLOW_ALL="ALLOW_ALL"})(sO||(sO={}));var aO;(function(s){s.auto="auto",s.en="en",s.ja="ja",s.ko="ko",s.hi="hi",s.zh="zh",s.pt="pt",s.es="es"})(aO||(aO={}));var rO;(function(s){s.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",s.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",s.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",s.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",s.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(rO||(rO={}));var oO;(function(s){s.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",s.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",s.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",s.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(oO||(oO={}));var lO;(function(s){s.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",s.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",s.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",s.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(lO||(lO={}));var cO;(function(s){s.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",s.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",s.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",s.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",s.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",s.EDIT_MODE_STYLE="EDIT_MODE_STYLE",s.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",s.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(cO||(cO={}));var uO;(function(s){s.FOREGROUND="FOREGROUND",s.BACKGROUND="BACKGROUND",s.PROMPT="PROMPT",s.SEMANTIC="SEMANTIC",s.INTERACTIVE="INTERACTIVE"})(uO||(uO={}));var hO;(function(s){s.ASSET="ASSET",s.STYLE="STYLE"})(hO||(hO={}));var dO;(function(s){s.INSERT="INSERT",s.REMOVE="REMOVE",s.REMOVE_STATIC="REMOVE_STATIC",s.OUTPAINT="OUTPAINT"})(dO||(dO={}));var fO;(function(s){s.OPTIMIZED="OPTIMIZED",s.LOSSLESS="LOSSLESS"})(fO||(fO={}));var pO;(function(s){s.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",s.PREFERENCE_TUNING="PREFERENCE_TUNING",s.DISTILLATION="DISTILLATION"})(pO||(pO={}));var mO;(function(s){s.STATE_UNSPECIFIED="STATE_UNSPECIFIED",s.STATE_PENDING="STATE_PENDING",s.STATE_ACTIVE="STATE_ACTIVE",s.STATE_FAILED="STATE_FAILED"})(mO||(mO={}));var gO;(function(s){s.STATE_UNSPECIFIED="STATE_UNSPECIFIED",s.PROCESSING="PROCESSING",s.ACTIVE="ACTIVE",s.FAILED="FAILED"})(gO||(gO={}));var yO;(function(s){s.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",s.UPLOADED="UPLOADED",s.GENERATED="GENERATED",s.REGISTERED="REGISTERED"})(yO||(yO={}));var bO;(function(s){s.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",s.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",s.RESPONSE_REJECTED="RESPONSE_REJECTED",s.NEED_MORE_INPUT="NEED_MORE_INPUT"})(bO||(bO={}));var vO;(function(s){s.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",s.TEXT="TEXT",s.IMAGE="IMAGE",s.VIDEO="VIDEO",s.AUDIO="AUDIO",s.DOCUMENT="DOCUMENT"})(vO||(vO={}));var AO;(function(s){s.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",s.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",s.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(AO||(AO={}));var EO;(function(s){s.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",s.ACTIVITY_START="ACTIVITY_START",s.ACTIVITY_END="ACTIVITY_END"})(EO||(EO={}));var SO;(function(s){s.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",s.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",s.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(SO||(SO={}));var TO;(function(s){s.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",s.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",s.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(TO||(TO={}));var _O;(function(s){s.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",s.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",s.NO_INTERRUPTION="NO_INTERRUPTION"})(_O||(_O={}));var wO;(function(s){s.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",s.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",s.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(wO||(wO={}));var xO;(function(s){s.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",s.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",s.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",s.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",s.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",s.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",s.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",s.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",s.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",s.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",s.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",s.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",s.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(xO||(xO={}));var CO;(function(s){s.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",s.QUALITY="QUALITY",s.DIVERSITY="DIVERSITY",s.VOCALIZATION="VOCALIZATION"})(CO||(CO={}));var DO;(function(s){s.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",s.PLAY="PLAY",s.PAUSE="PAUSE",s.STOP="STOP",s.RESET_CONTEXT="RESET_CONTEXT"})(DO||(DO={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var MO;(function(s){s.PAGED_ITEM_BATCH_JOBS="batchJobs",s.PAGED_ITEM_MODELS="models",s.PAGED_ITEM_TUNING_JOBS="tuningJobs",s.PAGED_ITEM_FILES="files",s.PAGED_ITEM_CACHED_CONTENTS="cachedContents",s.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",s.PAGED_ITEM_DOCUMENTS="documents"})(MO||(MO={}));function Xb(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(e[n[r]]=s[n[r]]);return e}function RO(s){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&s[t],n=0;if(e)return e.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&n>=s.length&&(s=void 0),{value:s&&s[n++],done:!s}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Be(s){return this instanceof Be?(this.v=s,this):new Be(s)}function em(s,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(s,t||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(A){return function(S){return Promise.resolve(S).then(A,y)}}function h(A,S){n[A]&&(r[A]=function(w){return new Promise(function(x,C){o.push([A,w,x,C])>1||f(A,w)})},S&&(r[A]=S(r[A])))}function f(A,S){try{p(n[A](S))}catch(w){b(o[0][3],w)}}function p(A){A.value instanceof Be?Promise.resolve(A.value.v).then(m,y):b(o[0][2],A)}function m(A){f("next",A)}function y(A){f("throw",A)}function b(A,S){A(S),o.shift(),o.length&&f(o[0][0],o[0][1])}}function jh(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=s[Symbol.asyncIterator],e;return t?t.call(s):(s=typeof RO=="function"?RO(s):s[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(o){e[o]=s[o]&&function(u){return new Promise(function(h,f){u=s[o](u),r(h,f,u.done,u.value)})}}function r(o,u,h,f){Promise.resolve(f).then(function(p){o({value:p,done:h})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let tI=function(){const{crypto:s}=globalThis;if(s!=null&&s.randomUUID)return tI=s.randomUUID.bind(s),s.randomUUID();const t=new Uint8Array(1),e=s?()=>s.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^e()&15>>+n/4).toString(16))};const $4=()=>tI();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pT(s){return typeof s=="object"&&s!==null&&("name"in s&&s.name==="AbortError"||"message"in s&&String(s.message).includes("FetchRequestCanceledException"))}const mT=s=>{if(s instanceof Error)return s;if(typeof s=="object"&&s!==null){try{if(Object.prototype.toString.call(s)==="[object Error]"){const t=new Error(s.message,s.cause?{cause:s.cause}:{});return s.stack&&(t.stack=s.stack),s.cause&&!t.cause&&(t.cause=s.cause),s.name&&(t.name=s.name),t}}catch{}try{return new Error(JSON.stringify(s))}catch{}}return new Error(s)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gs extends Error{}class hi extends Gs{constructor(t,e,n,r){super(`${hi.makeMessage(t,e,n)}`),this.status=t,this.headers=r,this.error=e}static makeMessage(t,e,n){const r=e!=null&&e.message?typeof e.message=="string"?e.message:JSON.stringify(e.message):e?JSON.stringify(e):n;return t&&r?`${t} ${r}`:t?`${t} status code (no body)`:r||"(no status code or body)"}static generate(t,e,n,r){if(!t||!r)return new Rv({message:n,cause:mT(e)});const o=e;return t===400?new nI(t,o,n,r):t===401?new iI(t,o,n,r):t===403?new sI(t,o,n,r):t===404?new aI(t,o,n,r):t===409?new rI(t,o,n,r):t===422?new oI(t,o,n,r):t===429?new lI(t,o,n,r):t>=500?new cI(t,o,n,r):new hi(t,o,n,r)}}class gT extends hi{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Rv extends hi{constructor({message:t,cause:e}){super(void 0,void 0,t||"Connection error.",void 0),e&&(this.cause=e)}}class eI extends Rv{constructor({message:t}={}){super({message:t??"Request timed out."})}}class nI extends hi{}class iI extends hi{}class sI extends hi{}class aI extends hi{}class rI extends hi{}class oI extends hi{}class lI extends hi{}class cI extends hi{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const W4=/^[a-z][a-z0-9+.-]*:/i,Q4=s=>W4.test(s);let yT=s=>(yT=Array.isArray,yT(s));const Z4=yT;let J4=Z4;const OO=J4;function tz(s){if(!s)return!0;for(const t in s)return!1;return!0}function ez(s,t){return Object.prototype.hasOwnProperty.call(s,t)}const nz=(s,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Gs(`${s} must be an integer`);if(t<0)throw new Gs(`${s} must be a positive integer`);return t},iz=s=>{try{return JSON.parse(s)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sz=s=>new Promise(t=>setTimeout(t,s));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Eh="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function az(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const rz=()=>{var s,t,e,n,r;const o=az();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Eh,"X-Stainless-OS":LO(Deno.build.os),"X-Stainless-Arch":NO(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(s=Deno.version)===null||s===void 0?void 0:s.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Eh,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Eh,"X-Stainless-OS":LO((e=globalThis.process.platform)!==null&&e!==void 0?e:"unknown"),"X-Stainless-Arch":NO((n=globalThis.process.arch)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=oz();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Eh,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Eh,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function oz(){if(typeof navigator>"u"||!navigator)return null;const s=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:e}of s){const n=e.exec(navigator.userAgent);if(n){const r=n[1]||0,o=n[2]||0,u=n[3]||0;return{browser:t,version:`${r}.${o}.${u}`}}}return null}const NO=s=>s==="x32"?"x32":s==="x86_64"||s==="x64"?"x64":s==="arm"?"arm":s==="aarch64"||s==="arm64"?"arm64":s?`other:${s}`:"unknown",LO=s=>(s=s.toLowerCase(),s.includes("ios")?"iOS":s==="android"?"Android":s==="darwin"?"MacOS":s==="win32"?"Windows":s==="freebsd"?"FreeBSD":s==="openbsd"?"OpenBSD":s==="linux"?"Linux":s?`Other:${s}`:"Unknown");let k0;const lz=()=>k0??(k0=rz());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cz(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function uI(...s){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...s)}function uz(s){let t=Symbol.asyncIterator in s?s[Symbol.asyncIterator]():s[Symbol.iterator]();return uI({start(){},async pull(e){const{done:n,value:r}=await t.next();n?e.close():e.enqueue(r)},async cancel(){var e;await((e=t.return)===null||e===void 0?void 0:e.call(t))}})}function hI(s){if(s[Symbol.asyncIterator])return s;const t=s.getReader();return{async next(){try{const e=await t.read();return e!=null&&e.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function hz(s){var t,e;if(s===null||typeof s!="object")return;if(s[Symbol.asyncIterator]){await((e=(t=s[Symbol.asyncIterator]()).return)===null||e===void 0?void 0:e.call(t));return}const n=s.getReader(),r=n.cancel();n.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dz=({headers:s,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dI=()=>{var s;if(typeof File>"u"){const{process:t}=globalThis,e=typeof((s=t==null?void 0:t.versions)===null||s===void 0?void 0:s.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function IS(s,t,e){return dI(),new File(s,t??"unknown_file",e)}function fz(s){return(typeof s=="object"&&s!==null&&("name"in s&&s.name&&String(s.name)||"url"in s&&s.url&&String(s.url)||"filename"in s&&s.filename&&String(s.filename)||"path"in s&&s.path&&String(s.path))||"").split(/[\\/]/).pop()||void 0}const pz=s=>s!=null&&typeof s=="object"&&typeof s[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fI=s=>s!=null&&typeof s=="object"&&typeof s.size=="number"&&typeof s.type=="string"&&typeof s.text=="function"&&typeof s.slice=="function"&&typeof s.arrayBuffer=="function",mz=s=>s!=null&&typeof s=="object"&&typeof s.name=="string"&&typeof s.lastModified=="number"&&fI(s),gz=s=>s!=null&&typeof s=="object"&&typeof s.url=="string"&&typeof s.blob=="function";async function yz(s,t,e){if(dI(),s=await s,mz(s))return s instanceof File?s:IS([await s.arrayBuffer()],s.name);if(gz(s)){const r=await s.blob();return t||(t=new URL(s.url).pathname.split(/[\\/]/).pop()),IS(await bT(r),t,e)}const n=await bT(s);if(t||(t=fz(s)),!(e!=null&&e.type)){const r=n.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof r=="string"&&(e=Object.assign(Object.assign({},e),{type:r}))}return IS(n,t,e)}async function bT(s){var t,e,n,r,o;let u=[];if(typeof s=="string"||ArrayBuffer.isView(s)||s instanceof ArrayBuffer)u.push(s);else if(fI(s))u.push(s instanceof Blob?s:await s.arrayBuffer());else if(pz(s))try{for(var h=!0,f=jh(s),p;p=await f.next(),t=p.done,!t;h=!0){r=p.value,h=!1;const m=r;u.push(...await bT(m))}}catch(m){e={error:m}}finally{try{!h&&!t&&(n=f.return)&&await n.call(f)}finally{if(e)throw e.error}}else{const m=(o=s==null?void 0:s.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof s}${m?`; constructor: ${m}`:""}${bz(s)}`)}return u}function bz(s){return typeof s!="object"||s===null?"":`; props: [${Object.getOwnPropertyNames(s).map(e=>`"${e}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pI{constructor(t){this._client=t}}pI._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mI(s){return s.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const IO=Object.freeze(Object.create(null)),vz=(s=mI)=>(function(e,...n){if(e.length===1)return e[0];let r=!1;const o=[],u=e.reduce((m,y,b)=>{var A,S,w;/[?#]/.test(y)&&(r=!0);const x=n[b];let C=(r?encodeURIComponent:s)(""+x);return b!==n.length&&(x==null||typeof x=="object"&&x.toString===((w=Object.getPrototypeOf((S=Object.getPrototypeOf((A=x.hasOwnProperty)!==null&&A!==void 0?A:IO))!==null&&S!==void 0?S:IO))===null||w===void 0?void 0:w.toString))&&(C=x+"",o.push({start:m.length+y.length,length:C.length,error:`Value of type ${Object.prototype.toString.call(x).slice(8,-1)} is not a valid path parameter`})),m+y+(b===n.length?"":C)},""),h=u.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=f.exec(h))!==null;)o.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(o.sort((m,y)=>m.start-y.start),o.length>0){let m=0;const y=o.reduce((b,A)=>{const S=" ".repeat(A.start-m),w="^".repeat(A.length);return m=A.start+A.length,b+S+w},"");throw new Gs(`Path parameters result in path with invalid segments:
${o.map(b=>b.error).join(`
`)}
${u}
${y}`)}return u}),U0=vz(mI);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gI extends pI{create(t,e){var n;const{api_version:r=this._client.apiVersion}=t,o=Xb(t,["api_version"]);if("model"in o&&"agent_config"in o)throw new Gs("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Gs("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(U0`/${r}/interactions`,Object.assign(Object.assign({body:o},e),{stream:(n=t.stream)!==null&&n!==void 0?n:!1}))}delete(t,e={},n){const{api_version:r=this._client.apiVersion}=e??{};return this._client.delete(U0`/${r}/interactions/${t}`,n)}cancel(t,e={},n){const{api_version:r=this._client.apiVersion}=e??{};return this._client.post(U0`/${r}/interactions/${t}/cancel`,n)}get(t,e={},n){var r;const o=e??{},{api_version:u=this._client.apiVersion}=o,h=Xb(o,["api_version"]);return this._client.get(U0`/${u}/interactions/${t}`,Object.assign(Object.assign({query:h},n),{stream:(r=e==null?void 0:e.stream)!==null&&r!==void 0?r:!1}))}}gI._key=Object.freeze(["interactions"]);class yI extends gI{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Az(s){let t=0;for(const r of s)t+=r.length;const e=new Uint8Array(t);let n=0;for(const r of s)e.set(r,n),n+=r.length;return e}let F0;function C1(s){let t;return(F0??(t=new globalThis.TextEncoder,F0=t.encode.bind(t)))(s)}let H0;function PO(s){let t;return(H0??(t=new globalThis.TextDecoder,H0=t.decode.bind(t)))(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ov{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const e=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?C1(t):t;this.buffer=Az([this.buffer,e]);const n=[];let r;for(;(r=Ez(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){n.push(PO(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=PO(this.buffer.subarray(0,o));n.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return n}flush(){return this.buffer.length?this.decode(`
`):[]}}Ov.NEWLINE_CHARS=new Set([`
`,"\r"]);Ov.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Ez(s,t){for(let r=t??0;r<s.length;r++){if(s[r]===10)return{preceding:r,index:r+1,carriage:!1};if(s[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function Sz(s){for(let n=0;n<s.length-1;n++){if(s[n]===10&&s[n+1]===10||s[n]===13&&s[n+1]===13)return n+2;if(s[n]===13&&s[n+1]===10&&n+3<s.length&&s[n+2]===13&&s[n+3]===10)return n+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qb={off:0,error:200,warn:300,info:400,debug:500},BO=(s,t,e)=>{if(s){if(ez(qb,s))return s;ai(e).warn(`${t} was set to ${JSON.stringify(s)}, expected one of ${JSON.stringify(Object.keys(qb))}`)}};function Mp(){}function V0(s,t,e){return!t||qb[s]>qb[e]?Mp:t[s].bind(t)}const Tz={error:Mp,warn:Mp,info:Mp,debug:Mp};let kO=new WeakMap;function ai(s){var t;const e=s.logger,n=(t=s.logLevel)!==null&&t!==void 0?t:"off";if(!e)return Tz;const r=kO.get(e);if(r&&r[0]===n)return r[1];const o={error:V0("error",e,n),warn:V0("warn",e,n),info:V0("info",e,n),debug:V0("debug",e,n)};return kO.set(e,[n,o]),o}const lc=s=>(s.options&&(s.options=Object.assign({},s.options),delete s.options.headers),s.headers&&(s.headers=Object.fromEntries((s.headers instanceof Headers?[...s.headers]:Object.entries(s.headers)).map(([t,e])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":e]))),"retryOfRequestLogID"in s&&(s.retryOfRequestLogID&&(s.retryOf=s.retryOfRequestLogID),delete s.retryOfRequestLogID),s);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ph{constructor(t,e,n){this.iterator=t,this.controller=e,this.client=n}static fromSSEResponse(t,e,n){let r=!1;const o=n?ai(n):console;function u(){return em(this,arguments,function*(){var f,p,m,y;if(r)throw new Gs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let b=!1;try{try{for(var A=!0,S=jh(_z(t,e)),w;w=yield Be(S.next()),f=w.done,!f;A=!0){y=w.value,A=!1;const x=y;if(!b)if(x.data.startsWith("[DONE]")){b=!0;continue}else try{yield yield Be(JSON.parse(x.data))}catch(C){throw o.error("Could not parse message into JSON:",x.data),o.error("From chunk:",x.raw),C}}}catch(x){p={error:x}}finally{try{!A&&!f&&(m=S.return)&&(yield Be(m.call(S)))}finally{if(p)throw p.error}}b=!0}catch(x){if(pT(x))return yield Be(void 0);throw x}finally{b||e.abort()}})}return new Ph(u,e,n)}static fromReadableStream(t,e,n){let r=!1;function o(){return em(this,arguments,function*(){var f,p,m,y;const b=new Ov,A=hI(t);try{for(var S=!0,w=jh(A),x;x=yield Be(w.next()),f=x.done,!f;S=!0){y=x.value,S=!1;const C=y;for(const O of b.decode(C))yield yield Be(O)}}catch(C){p={error:C}}finally{try{!S&&!f&&(m=w.return)&&(yield Be(m.call(w)))}finally{if(p)throw p.error}}for(const C of b.flush())yield yield Be(C)})}function u(){return em(this,arguments,function*(){var f,p,m,y;if(r)throw new Gs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let b=!1;try{try{for(var A=!0,S=jh(o()),w;w=yield Be(S.next()),f=w.done,!f;A=!0){y=w.value,A=!1;const x=y;b||x&&(yield yield Be(JSON.parse(x)))}}catch(x){p={error:x}}finally{try{!A&&!f&&(m=S.return)&&(yield Be(m.call(S)))}finally{if(p)throw p.error}}b=!0}catch(x){if(pT(x))return yield Be(void 0);throw x}finally{b||e.abort()}})}return new Ph(u,e,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],e=[],n=this.iterator(),r=o=>({next:()=>{if(o.length===0){const u=n.next();t.push(u),e.push(u)}return o.shift()}});return[new Ph(()=>r(t),this.controller,this.client),new Ph(()=>r(e),this.controller,this.client)]}toReadableStream(){const t=this;let e;return uI({async start(){e=t[Symbol.asyncIterator]()},async pull(n){try{const{value:r,done:o}=await e.next();if(o)return n.close();const u=C1(JSON.stringify(r)+`
`);n.enqueue(u)}catch(r){n.error(r)}},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}}function _z(s,t){return em(this,arguments,function*(){var n,r,o,u;if(!s.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Gs("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Gs("Attempted to iterate over a response with no body");const h=new xz,f=new Ov,p=hI(s.body);try{for(var m=!0,y=jh(wz(p)),b;b=yield Be(y.next()),n=b.done,!n;m=!0){u=b.value,m=!1;const A=u;for(const S of f.decode(A)){const w=h.decode(S);w&&(yield yield Be(w))}}}catch(A){r={error:A}}finally{try{!m&&!n&&(o=y.return)&&(yield Be(o.call(y)))}finally{if(r)throw r.error}}for(const A of f.flush()){const S=h.decode(A);S&&(yield yield Be(S))}})}function wz(s){return em(this,arguments,function*(){var e,n,r,o;let u=new Uint8Array;try{for(var h=!0,f=jh(s),p;p=yield Be(f.next()),e=p.done,!e;h=!0){o=p.value,h=!1;const m=o;if(m==null)continue;const y=m instanceof ArrayBuffer?new Uint8Array(m):typeof m=="string"?C1(m):m;let b=new Uint8Array(u.length+y.length);b.set(u),b.set(y,u.length),u=b;let A;for(;(A=Sz(u))!==-1;)yield yield Be(u.slice(0,A)),u=u.slice(A)}}catch(m){n={error:m}}finally{try{!h&&!e&&(r=f.return)&&(yield Be(r.call(f)))}finally{if(n)throw n.error}}u.length>0&&(yield yield Be(u))})}class xz{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(t),t.startsWith(":"))return null;let[e,n,r]=Cz(t,":");return r.startsWith(" ")&&(r=r.substring(1)),e==="event"?this.event=r:e==="data"&&this.data.push(r),null}}function Cz(s,t){const e=s.indexOf(t);return e!==-1?[s.substring(0,e),t,s.substring(e+t.length)]:[s,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Dz(s,t){const{response:e,requestLogID:n,retryOfRequestLogID:r,startTime:o}=t,u=await(async()=>{var h;if(t.options.stream)return ai(s).debug("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller,s):Ph.fromSSEResponse(e,t.controller,s);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const f=e.headers.get("content-type"),p=(h=f==null?void 0:f.split(";")[0])===null||h===void 0?void 0:h.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?e.headers.get("content-length")==="0"?void 0:await e.json():await e.text()})();return ai(s).debug(`[${n}] response parsed`,lc({retryOfRequestLogID:r,url:e.url,status:e.status,body:u,durationMs:Date.now()-o})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D1 extends Promise{constructor(t,e,n=Dz){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n,this.client=t}_thenUnwrap(t){return new D1(this.client,this.responsePromise,async(e,n)=>t(await this.parseResponse(e,n),n))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,e]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:e}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,e){return this.parse().then(t,e)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bI=Symbol("brand.privateNullableHeaders");function*Mz(s){if(!s)return;if(bI in s){const{values:n,nulls:r}=s;yield*n.entries();for(const o of r)yield[o,null];return}let t=!1,e;s instanceof Headers?e=s.entries():OO(s)?e=s:(t=!0,e=Object.entries(s??{}));for(let n of e){const r=n[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const o=OO(n[1])?n[1]:[n[1]];let u=!1;for(const h of o)h!==void 0&&(t&&!u&&(u=!0,yield[r,null]),yield[r,h])}}const Sp=s=>{const t=new Headers,e=new Set;for(const n of s){const r=new Set;for(const[o,u]of Mz(n)){const h=o.toLowerCase();r.has(h)||(t.delete(o),r.add(h)),u===null?(t.delete(o),e.add(h)):(t.append(o,u),e.delete(h))}}return{[bI]:!0,values:t,nulls:e}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PS=s=>{var t,e,n,r,o,u;if(typeof globalThis.process<"u")return(n=(e=(t=K4)===null||t===void 0?void 0:t[s])===null||e===void 0?void 0:e.trim())!==null&&n!==void 0?n:void 0;if(typeof globalThis.Deno<"u")return(u=(o=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||o===void 0?void 0:o.call(r,s))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vI;class Nv{constructor(t){var e,n,r,o,u,h,f,{baseURL:p=PS("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:m=(e=PS("GEMINI_API_KEY"))!==null&&e!==void 0?e:null,apiVersion:y="v1beta"}=t,b=Xb(t,["baseURL","apiKey","apiVersion"]);const A=Object.assign(Object.assign({apiKey:m,apiVersion:y},b),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=A.baseURL,this.timeout=(n=A.timeout)!==null&&n!==void 0?n:Nv.DEFAULT_TIMEOUT,this.logger=(r=A.logger)!==null&&r!==void 0?r:console;const S="warn";this.logLevel=S,this.logLevel=(u=(o=BO(A.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:BO(PS("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:S,this.fetchOptions=A.fetchOptions,this.maxRetries=(h=A.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(f=A.fetch)!==null&&f!==void 0?f:cz(),this.encoder=dz,this._options=A,this.apiKey=m,this.apiVersion=y,this.clientAdapter=A.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:e}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!e.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const e=Sp([t.headers]);if(!(e.values.has("authorization")||e.values.has("x-goog-api-key"))){if(this.apiKey)return Sp([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Sp([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([e,n])=>typeof n<"u").map(([e,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(e)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(e)}=`;throw new Gs(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Eh}`}defaultIdempotencyKey(){return`stainless-node-retry-${$4()}`}makeStatusError(t,e,n,r){return hi.generate(t,e,n,r)}buildURL(t,e,n){const r=!this.baseURLOverridden()&&n||this.baseURL,o=Q4(t)?new URL(t):new URL(r+(r.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),u=this.defaultQuery();return tz(u)||(e=Object.assign(Object.assign({},u),e)),typeof e=="object"&&e&&!Array.isArray(e)&&(o.search=this.stringifyQuery(e)),o.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const e=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${e}`}}async prepareRequest(t,{url:e,options:n}){}get(t,e){return this.methodRequest("get",t,e)}post(t,e){return this.methodRequest("post",t,e)}patch(t,e){return this.methodRequest("patch",t,e)}put(t,e){return this.methodRequest("put",t,e)}delete(t,e){return this.methodRequest("delete",t,e)}methodRequest(t,e,n){return this.request(Promise.resolve(n).then(r=>Object.assign({method:t,path:e},r)))}request(t,e=null){return new D1(this,this.makeRequest(t,e,void 0))}async makeRequest(t,e,n){var r,o,u;const h=await t,f=(r=h.maxRetries)!==null&&r!==void 0?r:this.maxRetries;e==null&&(e=f),await this.prepareOptions(h);const{req:p,url:m,timeout:y}=await this.buildRequest(h,{retryCount:f-e});await this.prepareRequest(p,{url:m,options:h});const b="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),A=n===void 0?"":`, retryOf: ${n}`,S=Date.now();if(ai(this).debug(`[${b}] sending request`,lc({retryOfRequestLogID:n,method:h.method,url:m,options:h,headers:p.headers})),!((o=h.signal)===null||o===void 0)&&o.aborted)throw new gT;const w=new AbortController,x=await this.fetchWithTimeout(m,p,y,w).catch(mT),C=Date.now();if(x instanceof globalThis.Error){const M=`retrying, ${e} attempts remaining`;if(!((u=h.signal)===null||u===void 0)&&u.aborted)throw new gT;const N=pT(x)||/timed? ?out/i.test(String(x)+("cause"in x?String(x.cause):""));if(e)return ai(this).info(`[${b}] connection ${N?"timed out":"failed"} - ${M}`),ai(this).debug(`[${b}] connection ${N?"timed out":"failed"} (${M})`,lc({retryOfRequestLogID:n,url:m,durationMs:C-S,message:x.message})),this.retryRequest(h,e,n??b);throw ai(this).info(`[${b}] connection ${N?"timed out":"failed"} - error; no more retries left`),ai(this).debug(`[${b}] connection ${N?"timed out":"failed"} (error; no more retries left)`,lc({retryOfRequestLogID:n,url:m,durationMs:C-S,message:x.message})),N?new eI:new Rv({cause:x})}const O=`[${b}${A}] ${p.method} ${m} ${x.ok?"succeeded":"failed"} with status ${x.status} in ${C-S}ms`;if(!x.ok){const M=await this.shouldRetry(x);if(e&&M){const W=`retrying, ${e} attempts remaining`;return await hz(x.body),ai(this).info(`${O} - ${W}`),ai(this).debug(`[${b}] response error (${W})`,lc({retryOfRequestLogID:n,url:x.url,status:x.status,headers:x.headers,durationMs:C-S})),this.retryRequest(h,e,n??b,x.headers)}const N=M?"error; no more retries left":"error; not retryable";ai(this).info(`${O} - ${N}`);const L=await x.text().catch(W=>mT(W).message),I=iz(L),k=I?void 0:L;throw ai(this).debug(`[${b}] response error (${N})`,lc({retryOfRequestLogID:n,url:x.url,status:x.status,headers:x.headers,message:k,durationMs:Date.now()-S})),this.makeStatusError(x.status,I,k,x.headers)}return ai(this).info(O),ai(this).debug(`[${b}] response start`,lc({retryOfRequestLogID:n,url:x.url,status:x.status,headers:x.headers,durationMs:C-S})),{response:x,options:h,controller:w,requestLogID:b,retryOfRequestLogID:n,startTime:S}}async fetchWithTimeout(t,e,n,r){const o=e||{},{signal:u,method:h}=o,f=Xb(o,["signal","method"]),p=this._makeAbort(r);u&&u.addEventListener("abort",p,{once:!0});const m=setTimeout(p,n),y=globalThis.ReadableStream&&f.body instanceof globalThis.ReadableStream||typeof f.body=="object"&&f.body!==null&&Symbol.asyncIterator in f.body,b=Object.assign(Object.assign(Object.assign({signal:r.signal},y?{duplex:"half"}:{}),{method:"GET"}),f);h&&(b.method=h.toUpperCase());try{return await this.fetch.call(void 0,t,b)}finally{clearTimeout(m)}}async shouldRetry(t){const e=t.headers.get("x-should-retry");return e==="true"?!0:e==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,e,n,r){var o;let u;const h=r==null?void 0:r.get("retry-after-ms");if(h){const p=parseFloat(h);Number.isNaN(p)||(u=p)}const f=r==null?void 0:r.get("retry-after");if(f&&!u){const p=parseFloat(f);Number.isNaN(p)?u=Date.parse(f)-Date.now():u=p*1e3}if(!(u&&0<=u&&u<60*1e3)){const p=(o=t.maxRetries)!==null&&o!==void 0?o:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(e,p)}return await sz(u),this.makeRequest(t,e-1,n)}calculateDefaultRetryTimeoutMillis(t,e){const o=e-t,u=Math.min(.5*Math.pow(2,o),8),h=1-Math.random()*.25;return u*h*1e3}async buildRequest(t,{retryCount:e=0}={}){var n,r,o;const u=Object.assign({},t),{method:h,path:f,query:p,defaultBaseURL:m}=u,y=this.buildURL(f,p,m);"timeout"in u&&nz("timeout",u.timeout),u.timeout=(n=u.timeout)!==null&&n!==void 0?n:this.timeout;const{bodyHeaders:b,body:A}=this.buildBody({options:u}),S=await this.buildHeaders({options:t,method:h,bodyHeaders:b,retryCount:e});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:S},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&A instanceof globalThis.ReadableStream&&{duplex:"half"}),A&&{body:A}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(o=u.fetchOptions)!==null&&o!==void 0?o:{}),url:y,timeout:u.timeout}}async buildHeaders({options:t,method:e,bodyHeaders:n,retryCount:r}){let o={};this.idempotencyHeader&&e!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=t.idempotencyKey);const u=await this.authHeaders(t);let h=Sp([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),lz()),this._options.defaultHeaders,n,t.headers,u]);return this.validateHeaders(h),h.values}_makeAbort(t){return()=>t.abort()}buildBody({options:{body:t,headers:e}}){if(!t)return{bodyHeaders:void 0,body:void 0};const n=Sp([e]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&n.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:uz(t)}:typeof t=="object"&&n.values.get("content-type")==="application/x-www-form-urlencoded"?{bodyHeaders:{"content-type":"application/x-www-form-urlencoded"},body:this.stringifyQuery(t)}:this.encoder({body:t,headers:n})}}Nv.DEFAULT_TIMEOUT=6e4;class zn extends Nv{constructor(){super(...arguments),this.interactions=new yI(this)}}vI=zn;zn.GeminiNextGenAPIClient=vI;zn.GeminiNextGenAPIClientError=Gs;zn.APIError=hi;zn.APIConnectionError=Rv;zn.APIConnectionTimeoutError=eI;zn.APIUserAbortError=gT;zn.NotFoundError=aI;zn.ConflictError=rI;zn.RateLimitError=lI;zn.BadRequestError=nI;zn.AuthenticationError=iI;zn.InternalServerError=cI;zn.PermissionDeniedError=sI;zn.UnprocessableEntityError=oI;zn.toFile=yz;zn.Interactions=yI;function M1(){throw new Error("Missing Gemini API key. Set VITE_GEMINI_API_KEY.")}async function Rz(s){const{question:t,selectedAnswer:e,correctAnswer:n,isCorrect:r,topic:o}=s,u=`
    You are a subject matter expert. Provide a 1-2 sentence technical explanation for this quiz question.
    
    Topic: ${o}
    Question: ${t}
    Student selected: ${e||"Skipped"}
    Correct answer: ${n}
    Result: ${r?"Correct":"Incorrect"}
    
    Rules:
    - DO NOT say "Good job", "Spot on", "Correct", or any praise.
    - DO NOT repeat the question or the answer text unnecessarily.
    - Provide ONLY the scientific/technical explanation of why the correct answer is right and why the other might be wrong.
    - Max 2 sentences.
  `;try{return(await M1().models.generateContent({model:"gemini-3-flash-preview",contents:u})).text||"I'm sorry, I couldn't generate an explanation right now."}catch(h){return console.error("Error generating AI explanation:",h),"The AI is currently unavailable. The correct answer is: "+n}}async function Oz(s,t){const e=`
    Based on the following text extracted from a PDF, generate ${t} multiple-choice questions.
    Each question must have exactly 4 options and 1 correct answer.
    
    Text:
    ${s.substring(0,15e3)} // Limit text size for prompt
  `;try{const r=await M1().models.generateContent({model:"gemini-3-flash-preview",contents:e,config:{responseMimeType:"application/json",responseSchema:{type:br.ARRAY,items:{type:br.OBJECT,properties:{topic:{type:br.STRING,description:"The specific topic or sub-heading of the question"},q:{type:br.STRING,description:"The question text"},a:{type:br.ARRAY,items:{type:br.STRING},description:"Array of 4 possible answers"},correct:{type:br.INTEGER,description:"The 0-based index of the correct answer in the 'a' array"}},required:["topic","q","a","correct"]}}}});return JSON.parse(r.text||"[]")}catch(n){console.error("Error generating questions:",n);const r=n instanceof Error?n.message:"Failed to generate questions from PDF.";throw new Error(r)}}async function Nz(s){const t=s.map(n=>({topic:n.question.topic,isCorrect:n.isCorrect,skipped:n.selectedIdx===null})),e=`
    Analyze these quiz results and provide a 2-3 sentence summary of the student's performance.
    Identify which topics they are struggling with and why (based on common misconceptions in those areas).
    
    Results:
    ${JSON.stringify(t)}
    
    Rules:
    - Be direct and technical.
    - No praise.
    - Focus on identifying patterns in errors.
  `;try{return(await M1().models.generateContent({model:"gemini-3-flash-preview",contents:e})).text||"Analysis unavailable."}catch(n){return console.error("Error analyzing results:",n),"Could not analyze results at this time."}}const ri=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),vT=[.001,0,0,.001,0,0],BS=1.35,cs={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Vo={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},om="pdfjs_internal_editor_",Ot={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Xt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Lz={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},AT={TRIANGLES:1,LATTICE:2},hn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},ib={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},an={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Sh={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Lv={ERRORS:0,WARNINGS:1,INFOS:5},lm={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Tp={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},Iz={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Iv=Lv.WARNINGS;function Pz(s){Number.isInteger(s)&&(Iv=s)}function Bz(){return Iv}function Pv(s){Iv>=Lv.INFOS&&console.info(`Info: ${s}`)}function Ct(s){Iv>=Lv.WARNINGS&&console.warn(`Warning: ${s}`)}function ee(s){throw new Error(s)}function te(s,t){s||ee(t)}function kz(s){switch(s==null?void 0:s.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function AI(s,t=null,e=null){if(!s)return null;if(e&&typeof s=="string"){if(e.addDefaultProtocol&&s.startsWith("www.")){const r=s.match(/\./g);(r==null?void 0:r.length)>=2&&(s=`http://${s}`)}if(e.tryConvertEncoding)try{s=jz(s)}catch{}}const n=t?URL.parse(s,t):URL.parse(s);return kz(n)?n:null}function EI(s,t,e=!1){const n=URL.parse(s);return n?(n.hash=t,n.href):e&&AI(s,"http://example.com")?s.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Dt(s,t,e,n=!1){return Object.defineProperty(s,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Lu=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class UO extends Lu{constructor(t,e){super(t,"PasswordException"),this.code=e}}class kS extends Lu{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class ET extends Lu{constructor(t){super(t,"InvalidPDFException")}}class Kb extends Lu{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class Uz extends Lu{constructor(t){super(t,"FormatError")}}class Ul extends Lu{constructor(t){super(t,"AbortException")}}function Fz(s){(typeof s!="object"||(s==null?void 0:s.length)===void 0)&&ee("Invalid argument for bytesToString");const t=s.length,e=8192;if(t<e)return String.fromCharCode.apply(null,s);const n=[];for(let r=0;r<t;r+=e){const o=Math.min(r+e,t),u=s.subarray(r,o);n.push(String.fromCharCode.apply(null,u))}return n.join("")}function Bv(s){typeof s!="string"&&ee("Invalid argument for stringToBytes");const t=s.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=s.charCodeAt(n)&255;return e}function Hz(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function Vz(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function zz(){try{return new Function(""),!0}catch{return!1}}class gn{static get isLittleEndian(){return Dt(this,"isLittleEndian",Vz())}static get isEvalSupported(){return Dt(this,"isEvalSupported",zz())}static get isOffscreenCanvasSupported(){return Dt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Dt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Dt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Dt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Dt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return Dt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const US=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));var so,sb,ST;class ot{static makeHexColor(t,e,n){return`#${US[t]}${US[e]}${US[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const r=t[n],o=t[n+1];t[n]=r*e[0]+o*e[2]+e[4],t[n+1]=r*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const r=e[0],o=e[1],u=e[2],h=e[3],f=e[4],p=e[5];for(let m=0;m<6;m+=2){const y=t[n+m],b=t[n+m+1];t[n+m]=y*r+b*u+f,t[n+m+1]=y*o+b*h+p}}static applyInverseTransform(t,e){const n=t[0],r=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-r*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-n*e[1]+r*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,n){const r=e[0],o=e[1],u=e[2],h=e[3],f=e[4],p=e[5],m=t[0],y=t[1],b=t[2],A=t[3];let S=r*m+f,w=S,x=r*b+f,C=x,O=h*y+p,M=O,N=h*A+p,L=N;if(o!==0||u!==0){const I=o*m,k=o*b,j=u*y,W=u*A;S+=j,C+=j,x+=W,w+=W,O+=I,L+=I,N+=k,M+=k}n[0]=Math.min(n[0],S,x,w,C),n[1]=Math.min(n[1],O,N,M,L),n[2]=Math.max(n[2],S,x,w,C),n[3]=Math.max(n[3],O,N,M,L)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],r=t[1],o=t[2],u=t[3],h=n**2+r**2,f=n*o+r*u,p=o**2+u**2,m=(h+p)/2,y=Math.sqrt(m**2-(h*p-f**2));e[0]=Math.sqrt(m+y||1),e[1]=Math.sqrt(m-y||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>r)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),u=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>u?null:[n,o,r,u]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,r,o){o[0]=Math.min(o[0],t,n),o[1]=Math.min(o[1],e,r),o[2]=Math.max(o[2],t,n),o[3]=Math.max(o[3],e,r)}static bezierBoundingBox(t,e,n,r,o,u,h,f,p){p[0]=Math.min(p[0],t,h),p[1]=Math.min(p[1],e,f),p[2]=Math.max(p[2],t,h),p[3]=Math.max(p[3],e,f),D(this,so,ST).call(this,t,n,o,h,e,r,u,f,3*(-t+3*(n-o)+h),6*(t-2*n+o),3*(n-t),p),D(this,so,ST).call(this,t,n,o,h,e,r,u,f,3*(-e+3*(r-u)+f),6*(e-2*r+u),3*(r-e),p)}}so=new WeakSet,sb=function(t,e,n,r,o,u,h,f,p,m){if(p<=0||p>=1)return;const y=1-p,b=p*p,A=b*p,S=y*(y*(y*t+3*p*e)+3*b*n)+A*r,w=y*(y*(y*o+3*p*u)+3*b*h)+A*f;m[0]=Math.min(m[0],S),m[1]=Math.min(m[1],w),m[2]=Math.max(m[2],S),m[3]=Math.max(m[3],w)},ST=function(t,e,n,r,o,u,h,f,p,m,y,b){if(Math.abs(p)<1e-12){Math.abs(m)>=1e-12&&D(this,so,sb).call(this,t,e,n,r,o,u,h,f,-y/m,b);return}const A=m**2-4*y*p;if(A<0)return;const S=Math.sqrt(A),w=2*p;D(this,so,sb).call(this,t,e,n,r,o,u,h,f,(-m+S)/w,b),D(this,so,sb).call(this,t,e,n,r,o,u,h,f,(-m-S)/w,b)},_(ot,so);function jz(s){return decodeURIComponent(escape(s))}let FS=null,FO=null;function Gz(s){return FS||(FS=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,FO=new Map([["","t"]])),s.replaceAll(FS,(t,e,n)=>e?e.normalize("NFKC"):FO.get(n))}function SI(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),Fz(s)}const Bh="pdfjs_internal_id_";function Yz(s,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,r,...o]=e;if(!s(n)&&!Number.isInteger(n)||!t(r))return!1;const u=o.length;let h=!0;switch(r.name){case"XYZ":if(u<2||u>3)return!1;break;case"Fit":case"FitB":return u===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(u>1)return!1;break;case"FitR":if(u!==4)return!1;h=!1;break;default:return!1}for(const f of o)if(!(typeof f=="number"||h&&f===null))return!1;return!0}function Un(s,t,e){return Math.min(Math.max(s,t),e)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(s){return s.reduce((t,e)=>t+e,0)});class cm{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function r(o){var f;if(!o)return;let u=null;const h=o.name;if(h==="#text")u=o.value;else if(cm.shouldBuildText(h))(f=o==null?void 0:o.attributes)!=null&&f.textContent?u=o.attributes.textContent:o.value&&(u=o.value);else return;if(u!==null&&e.push({str:u}),!!o.children)for(const p of o.children)r(p)}return r(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class TI{static setupStorage(t,e,n,r,o){const u=r.getValue(e,{value:null});switch(n.name){case"textarea":if(u.value!==null&&(t.textContent=u.value),o==="print")break;t.addEventListener("input",h=>{r.setValue(e,{value:h.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(u.value===n.attributes.xfaOn?t.setAttribute("checked",!0):u.value===n.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",h=>{r.setValue(e,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(u.value!==null&&t.setAttribute("value",u.value),o==="print")break;t.addEventListener("input",h=>{r.setValue(e,{value:h.target.value})})}break;case"select":if(u.value!==null){t.setAttribute("value",u.value);for(const h of n.children)h.attributes.value===u.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}t.addEventListener("input",h=>{const f=h.target.options,p=f.selectedIndex===-1?"":f[f.selectedIndex].value;r.setValue(e,{value:p})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:r,linkService:o}){const{attributes:u}=e,h=t instanceof HTMLAnchorElement;u.type==="radio"&&(u.name=`${u.name}-${r}`);for(const[f,p]of Object.entries(u))if(p!=null)switch(f){case"class":p.length&&t.setAttribute(f,p.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",p);break;case"style":Object.assign(t.style,p);break;case"textContent":t.textContent=p;break;default:(!h||f!=="href"&&f!=="newWindow")&&t.setAttribute(f,p)}h&&o.addLinkAttributes(t,u.href,u.newWindow),n&&u.dataId&&this.setupStorage(t,u.dataId,e,n)}static render(t){var y,b;const e=t.annotationStorage,n=t.linkService,r=t.xfaHtml,o=t.intent||"display",u=document.createElement(r.name);r.attributes&&this.setAttributes({html:u,element:r,intent:o,linkService:n});const h=o!=="richText",f=t.div;if(f.append(u),t.viewport){const A=`matrix(${t.viewport.transform.join(",")})`;f.style.transform=A}h&&f.setAttribute("class","xfaLayer xfaFont");const p=[];if(r.children.length===0){if(r.value){const A=document.createTextNode(r.value);u.append(A),h&&cm.shouldBuildText(r.name)&&p.push(A)}return{textDivs:p}}const m=[[r,-1,u]];for(;m.length>0;){const[A,S,w]=m.at(-1);if(S+1===A.children.length){m.pop();continue}const x=A.children[++m.at(-1)[1]];if(x===null)continue;const{name:C}=x;if(C==="#text"){const M=document.createTextNode(x.value);p.push(M),w.append(M);continue}const O=(y=x==null?void 0:x.attributes)!=null&&y.xmlns?document.createElementNS(x.attributes.xmlns,C):document.createElement(C);if(w.append(O),x.attributes&&this.setAttributes({html:O,element:x,storage:e,intent:o,linkService:n}),((b=x.children)==null?void 0:b.length)>0)m.push([x,-1,O]);else if(x.value){const M=document.createTextNode(x.value);h&&cm.shouldBuildText(C)&&p.push(M),O.append(M)}}for(const A of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))A.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const mr="http://www.w3.org/2000/svg",dc=class dc{};$(dc,"CSS",96),$(dc,"PDF",72),$(dc,"PDF_TO_CSS_UNITS",dc.CSS/dc.PDF);let Fl=dc;async function hy(s,t="text"){if(Rp(s,document.baseURI)){const e=await fetch(s);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const r=new XMLHttpRequest;r.open("GET",s,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class dy{constructor({viewBox:t,userUnit:e,scale:n,rotation:r,offsetX:o=0,offsetY:u=0,dontFlip:h=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=r,this.offsetX=o,this.offsetY=u,n*=e;const f=(t[2]+t[0])/2,p=(t[3]+t[1])/2;let m,y,b,A;switch(r%=360,r<0&&(r+=360),r){case 180:m=-1,y=0,b=0,A=1;break;case 90:m=0,y=1,b=1,A=0;break;case 270:m=0,y=-1,b=-1,A=0;break;case 0:m=1,y=0,b=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(b=-b,A=-A);let S,w,x,C;m===0?(S=Math.abs(p-t[1])*n+o,w=Math.abs(f-t[0])*n+u,x=(t[3]-t[1])*n,C=(t[2]-t[0])*n):(S=Math.abs(f-t[0])*n+o,w=Math.abs(p-t[1])*n+u,x=(t[2]-t[0])*n,C=(t[3]-t[1])*n),this.transform=[m*n,y*n,b*n,A*n,S-m*n*f-b*n*p,w-y*n*f-A*n*p],this.width=x,this.height=C}get rawDims(){const t=this.viewBox;return Dt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new dy({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:o})}convertToViewportPoint(t,e){const n=[t,e];return ot.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];ot.applyTransform(e,this.transform);const n=[t[2],t[3]];return ot.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return ot.applyInverseTransform(n,this.transform),n}}class R1 extends Lu{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function kv(s){const t=s.length;let e=0;for(;e<t&&s[e].trim()==="";)e++;return s.substring(e,e+5).toLowerCase()==="data:"}function O1(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function Xz(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function qz(s,t="document.pdf"){if(typeof s!="string")return t;if(kv(s))return Ct('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(h=>{try{return new URL(h)}catch{try{return new URL(decodeURIComponent(h))}catch{try{return new URL(h,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(h),"https://foo.bar")}catch{return null}}}}})(s);if(!n)return t;const r=h=>{try{let f=decodeURIComponent(h);return f.includes("/")?(f=f.split("/").at(-1),f.test(/^\.pdf$/i)?f:h):f}catch{return h}},o=/\.pdf$/i,u=n.pathname.split("/").at(-1);if(o.test(u))return r(u);if(n.searchParams.size>0){const h=Array.from(n.searchParams.values()).reverse();for(const p of h)if(o.test(p))return r(p);const f=Array.from(n.searchParams.keys()).reverse();for(const p of f)if(o.test(p))return r(p)}if(n.hash){const f=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(f)return r(f[0])}return t}class HO{constructor(){$(this,"started",Object.create(null));$(this,"times",[])}time(t){t in this.started&&Ct(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Ct(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:r,end:o}of this.times)t.push(`${n.padEnd(e)} ${o-r}ms
`);return t.join("")}}function Rp(s,t){const e=t?URL.parse(s,t):URL.parse(s);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function Ys(s){s.preventDefault()}function Xe(s){s.preventDefault(),s.stopPropagation()}function Kz(s){console.log("Deprecated API usage: "+s)}var fm;class $b{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;c(this,fm)||E(this,fm,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=c(this,fm).exec(t);if(!e)return null;const n=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let u=parseInt(e[4],10);u=u>=0&&u<=23?u:0;let h=parseInt(e[5],10);h=h>=0&&h<=59?h:0;let f=parseInt(e[6],10);f=f>=0&&f<=59?f:0;const p=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,p==="-"?(u+=m,h+=y):p==="+"&&(u-=m,h-=y),new Date(Date.UTC(n,r,o,u,h,f))}}fm=new WeakMap,_($b,fm);function $z(s,{scale:t=1,rotation:e=0}){const{width:n,height:r}=s.attributes.style,o=[0,0,parseInt(n),parseInt(r)];return new dy({viewBox:o,userUnit:1,scale:t,rotation:e})}function fy(s){if(s.startsWith("#")){const t=parseInt(s.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(t=>parseInt(t)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Ct(`Not a valid color format: "${s}"`),[0,0,0])}function Wz(s){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of s.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;s.set(e,fy(n))}t.remove()}function Pe(s){const{a:t,b:e,c:n,d:r,e:o,f:u}=s.getTransform();return[t,e,n,r,o,u]}function va(s){const{a:t,b:e,c:n,d:r,e:o,f:u}=s.getTransform().invertSelf();return[t,e,n,r,o,u]}function Ru(s,t,e=!1,n=!0){if(t instanceof dy){const{pageWidth:r,pageHeight:o}=t.rawDims,{style:u}=s,h=gn.isCSSRoundSupported,f=`var(--total-scale-factor) * ${r}px`,p=`var(--total-scale-factor) * ${o}px`,m=h?`round(down, ${f}, var(--scale-round-x))`:`calc(${f})`,y=h?`round(down, ${p}, var(--scale-round-y))`:`calc(${p})`;!e||t.rotation%180===0?(u.width=m,u.height=y):(u.width=y,u.height=m)}n&&s.setAttribute("data-main-rotation",t.rotation)}class Ka{constructor(){const{pixelRatio:t}=Ka;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,r,o=-1){let u=1/0,h=1/0,f=1/0;n=Ka.capPixels(n,o),n>0&&(u=Math.sqrt(n/(t*e))),r!==-1&&(h=r/t,f=r/e);const p=Math.min(u,h,f);return this.sx>p||this.sy>p?(this.sx=p,this.sy=p,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const TT=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Qz{static get isDarkMode(){var t;return Dt(this,"isDarkMode",!!((t=window==null?void 0:window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches))}}class Zz{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),Dt(this,"commentForegroundColor",fy(n))}}function Jz(s,t,e,n){n=Math.min(Math.max(n??1,0),1);const r=255*(1-n);return s=Math.round(s*n+r),t=Math.round(t*n+r),e=Math.round(e*n+r),[s,t,e]}function VO(s,t){const e=s[0]/255,n=s[1]/255,r=s[2]/255,o=Math.max(e,n,r),u=Math.min(e,n,r),h=(o+u)/2;if(o===u)t[0]=t[1]=0;else{const f=o-u;switch(t[1]=h<.5?f/(o+u):f/(2-o-u),o){case e:t[0]=((n-r)/f+(n<r?6:0))*60;break;case n:t[0]=((r-e)/f+2)*60;break;case r:t[0]=((e-n)/f+4)*60;break}}t[2]=h}function _T(s,t){const e=s[0],n=s[1],r=s[2],o=(1-Math.abs(2*r-1))*n,u=o*(1-Math.abs(e/60%2-1)),h=r-o/2;switch(Math.floor(e/60)){case 0:t[0]=o+h,t[1]=u+h,t[2]=h;break;case 1:t[0]=u+h,t[1]=o+h,t[2]=h;break;case 2:t[0]=h,t[1]=o+h,t[2]=u+h;break;case 3:t[0]=h,t[1]=u+h,t[2]=o+h;break;case 4:t[0]=u+h,t[1]=h,t[2]=o+h;break;case 5:case 6:t[0]=o+h,t[1]=h,t[2]=u+h;break}}function zO(s){return s<=.03928?s/12.92:((s+.055)/1.055)**2.4}function jO(s,t,e){_T(s,e),e.map(zO);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];_T(t,e),e.map(zO);const r=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)}const GO=new Map;function tj(s,t){const e=s[0]+s[1]*256+s[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=GO.get(e);if(n)return n;const r=new Float32Array(9),o=r.subarray(0,3),u=r.subarray(3,6);VO(s,u);const h=r.subarray(6,9);VO(t,h);const f=h[2]<.5,p=f?12:4.5;if(u[2]=f?Math.sqrt(u[2]):1-Math.sqrt(1-u[2]),jO(u,h,o)<p){let m,y;f?(m=u[2],y=1):(m=0,y=u[2]);const b=.005;for(;y-m>b;){const A=u[2]=(m+y)/2;f===jO(u,h,o)<p?m=A:y=A}u[2]=f?y:m}return _T(u,o),n=ot.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),GO.set(e,n),n}function _I({html:s,dir:t,className:e},n){const r=document.createDocumentFragment();if(typeof s=="string"){const o=document.createElement("p");o.dir=t||"auto";const u=s.split(/(?:\r\n?|\n)/);for(let h=0,f=u.length;h<f;++h){const p=u[h];o.append(document.createTextNode(p)),h<f-1&&o.append(document.createElement("br"))}r.append(o)}else TI.render({xfaHtml:s,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",e),n.append(r)}function wI(s){const t=new Path2D;if(!s)return t;for(let e=0,n=s.length;e<n;)switch(s[e++]){case Tp.moveTo:t.moveTo(s[e++],s[e++]);break;case Tp.lineTo:t.lineTo(s[e++],s[e++]);break;case Tp.curveTo:t.bezierCurveTo(s[e++],s[e++],s[e++],s[e++],s[e++],s[e++]);break;case Tp.quadraticCurveTo:t.quadraticCurveTo(s[e++],s[e++],s[e++],s[e++]);break;case Tp.closePath:t.closePath();break;default:Ct(`Unrecognized drawing path operator: ${s[e-1]}`);break}return t}var Er,Js,Yh,zo,yc,vf,xI,CI;const qt=class qt{constructor(){_(this,vf)}get pagesNumber(){return c(qt,zo)}set pagesNumber(t){c(qt,zo)!==t&&(E(qt,zo,t),t===0&&(E(qt,Js,null),E(qt,Er,null)))}addListener(t){c(qt,yc).push(t)}removeListener(t){const e=c(qt,yc).indexOf(t);e>=0&&c(qt,yc).splice(e,1)}movePages(t,e,n){D(this,vf,CI).call(this,!0);const r=c(qt,Js),o=c(qt,Er);c(qt,Yh).set(o);const u=e.length,h=new Uint32Array(u);let f=0;for(let A=0;A<u;A++){const S=e[A]-1;h[A]=r[S],S<n&&(f+=1)}const p=c(qt,zo);let m=n-f;const y=p-u;m=Un(m,0,y);for(let A=0,S=0;A<p;A++)t.has(A+1)||(r[S++]=r[A]);r.copyWithin(m+u,m,y),r.set(h,m);let b=!1;for(let A=0,S=p;A<S;A++){const w=r[A];b||(b=w!==A+1),o[w-1]=A+1}D(this,vf,xI).call(this),b||(this.pagesNumber=0)}hasBeenAltered(){return c(qt,Js)!==null}getPageMappingForSaving(){return{pageIndices:c(qt,Er)?c(qt,Er).map(t=>t-1):null}}getPrevPageNumber(t){return c(qt,Yh)[c(qt,Js)[t-1]-1]}getPageNumber(t){var e;return((e=c(qt,Er))==null?void 0:e[t-1])??t}getPageId(t){var e;return((e=c(qt,Js))==null?void 0:e[t-1])??t}static get instance(){return Dt(this,"instance",new qt)}getMapping(){return c(qt,Js).subarray(0,this.pagesNumber)}};Er=new WeakMap,Js=new WeakMap,Yh=new WeakMap,zo=new WeakMap,yc=new WeakMap,vf=new WeakSet,xI=function(){for(const t of c(qt,yc))t()},CI=function(t){if(c(qt,Js))return;const e=c(qt,zo),n=new Uint32Array(3*e),r=E(qt,Js,n.subarray(0,e)),o=E(qt,Er,n.subarray(e,2*e));if(t)for(let u=0;u<e;u++)r[u]=o[u]=u+1;E(qt,Yh,n.subarray(2*e))},_(qt,Er,null),_(qt,Js,null),_(qt,Yh,null),_(qt,zo,0),_(qt,yc,[]);let um=qt;var jo,Go,xs,Cs,pm,Yo,Xh,qh,mm,ov,DI,Vn,MI,RI,Th,Op;const vr=class vr{constructor(t){_(this,Vn);_(this,jo,null);_(this,Go,null);_(this,xs);_(this,Cs,null);_(this,pm,null);_(this,Yo,null);_(this,Xh,null);_(this,qh,null);E(this,xs,t),c(vr,mm)||E(vr,mm,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=E(this,jo,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=c(this,xs)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Ys,{signal:e}),t.addEventListener("pointerdown",D(vr,ov,DI),{signal:e}));const n=E(this,Cs,document.createElement("div"));n.className="buttons",t.append(n);const r=c(this,xs).toolbarPosition;if(r){const{style:o}=t,u=c(this,xs)._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*u}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return c(this,jo)}hide(){var t;c(this,jo).classList.add("hidden"),(t=c(this,Go))==null||t.hideDropdown()}show(){var t,e;c(this,jo).classList.remove("hidden"),(t=c(this,pm))==null||t.shown(),(e=c(this,Yo))==null||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=c(this,xs),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",c(vr,mm)[t]),D(this,Vn,Th).call(this,n)&&n.addEventListener("click",r=>{e.delete()},{signal:e._signal}),c(this,Cs).append(n)}async addAltText(t){const e=await t.render();D(this,Vn,Th).call(this,e),c(this,Cs).append(e,c(this,Vn,Op)),E(this,pm,t)}addComment(t,e=null){if(c(this,Yo))return;const n=t.renderForToolbar();if(!n)return;D(this,Vn,Th).call(this,n);const r=E(this,Xh,c(this,Vn,Op));e?(c(this,Cs).insertBefore(n,e),c(this,Cs).insertBefore(r,e)):c(this,Cs).append(n,r),E(this,Yo,t),t.toolbar=this}addColorPicker(t){if(c(this,Go))return;E(this,Go,t);const e=t.renderButton();D(this,Vn,Th).call(this,e),c(this,Cs).append(e,c(this,Vn,Op))}async addEditSignatureButton(t){const e=E(this,qh,await t.renderEditButton(c(this,xs)));D(this,Vn,Th).call(this,e),c(this,Cs).append(e,c(this,Vn,Op))}removeButton(t){var e,n;switch(t){case"comment":(e=c(this,Yo))==null||e.removeToolbarCommentButton(),E(this,Yo,null),(n=c(this,Xh))==null||n.remove(),E(this,Xh,null);break}}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,n){if(!e&&t==="comment")return;const r=c(this,Cs).querySelector(n);r&&t==="comment"&&this.addComment(e,r)}updateEditSignatureButton(t){c(this,qh)&&(c(this,qh).title=t)}remove(){var t;c(this,jo).remove(),(t=c(this,Go))==null||t.destroy(),E(this,Go,null)}};jo=new WeakMap,Go=new WeakMap,xs=new WeakMap,Cs=new WeakMap,pm=new WeakMap,Yo=new WeakMap,Xh=new WeakMap,qh=new WeakMap,mm=new WeakMap,ov=new WeakSet,DI=function(t){t.stopPropagation()},Vn=new WeakSet,MI=function(t){c(this,xs)._focusEventsAllowed=!1,Xe(t)},RI=function(t){c(this,xs)._focusEventsAllowed=!0,Xe(t)},Th=function(t){const e=c(this,xs)._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",D(this,Vn,MI).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",D(this,Vn,RI).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Ys,{signal:e}),!0)},Op=function(){const t=document.createElement("div");return t.className="divider",t},_(vr,ov),_(vr,mm,null);let wT=vr;var gm,bc,Sr,lo,OI,NI,xT;class ej{constructor(t){_(this,lo);_(this,gm,null);_(this,bc,null);_(this,Sr);E(this,Sr,t)}show(t,e,n){const[r,o]=D(this,lo,NI).call(this,e,n),{style:u}=c(this,bc)||E(this,bc,D(this,lo,OI).call(this));t.append(c(this,bc)),u.insetInlineEnd=`${100*r}%`,u.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,bc).remove()}}gm=new WeakMap,bc=new WeakMap,Sr=new WeakMap,lo=new WeakSet,OI=function(){const t=E(this,bc,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=c(this,Sr)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Ys,{signal:e});const n=E(this,gm,document.createElement("div"));return n.className="buttons",t.append(n),c(this,Sr).hasCommentManager()&&D(this,lo,xT).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{c(this,Sr).commentSelection("floating_button")}),D(this,lo,xT).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{c(this,Sr).highlightSelection("floating_button")}),t},NI=function(t,e){let n=0,r=0;for(const o of t){const u=o.y+o.height;if(u<n)continue;const h=o.x+(e?o.width:0);if(u>n){r=h,n=u;continue}e?h>r&&(r=h):h<r&&(r=h)}return[e?1-r:r,n]},xT=function(t,e,n,r){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",e);const u=document.createElement("span");o.append(u),u.className="visuallyHidden",u.setAttribute("data-l10n-id",n);const h=c(this,Sr)._signal;h instanceof AbortSignal&&!h.aborted&&(o.addEventListener("contextmenu",Ys,{signal:h}),o.addEventListener("click",r,{signal:h})),c(this,gm).append(o)};function LI(s,t,e){for(const n of e)t.addEventListener(n,s[n].bind(s))}var vc,Ac,Kh,Ec;const de=class de{static initializeAndAddPointerId(t){(c(de,Ac)||E(de,Ac,new Set)).add(t)}static setPointer(t,e){c(de,vc)||E(de,vc,e),c(de,Ec)??E(de,Ec,t)}static setTimeStamp(t){E(de,Kh,t)}static isSamePointerId(t){return c(de,vc)===t}static isSamePointerIdOrRemove(t){var e;return c(de,vc)===t?!0:((e=c(de,Ac))==null||e.delete(t),!1)}static isSamePointerType(t){return c(de,Ec)===t}static isInitializedAndDifferentPointerType(t){return c(de,Ec)!==null&&!de.isSamePointerType(t)}static isSameTimeStamp(t){return c(de,Kh)===t}static isUsingMultiplePointers(){var t;return((t=c(de,Ac))==null?void 0:t.size)>=1}static clearPointerType(){E(de,Ec,null)}static clearPointerIds(){E(de,vc,NaN),E(de,Ac,null)}static clearTimeStamp(){E(de,Kh,NaN)}};vc=new WeakMap,Ac=new WeakMap,Kh=new WeakMap,Ec=new WeakMap,_(de,vc,NaN),_(de,Ac,null),_(de,Kh,NaN),_(de,Ec,null);let Yn=de;var lv;class nj{constructor(){_(this,lv,0)}get id(){return`${om}${un(this,lv)._++}`}}lv=new WeakMap;var $h,ym,Xn,Wh,ab;const F1=class F1{constructor(){_(this,Wh);_(this,$h,SI());_(this,ym,0);_(this,Xn,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const o=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Dt(this,"_isSVGFittingCanvas",o)}async getFromFile(t){const{lastModified:e,name:n,size:r,type:o}=t;return D(this,Wh,ab).call(this,`${e}_${n}_${r}_${o}`,t)}async getFromUrl(t){return D(this,Wh,ab).call(this,t,t)}async getFromBlob(t,e){const n=await e;return D(this,Wh,ab).call(this,t,n)}async getFromId(t){c(this,Xn)||E(this,Xn,new Map);const e=c(this,Xn).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){c(this,Xn)||E(this,Xn,new Map);let n=c(this,Xn).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${c(this,$h)}_${un(this,ym)._++}`,refCounter:1,isSvg:!1},c(this,Xn).set(t,n),c(this,Xn).set(n.id,n),n}getSvgUrl(t){const e=c(this,Xn).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var r;c(this,Xn)||E(this,Xn,new Map);const e=c(this,Xn).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const o=new OffscreenCanvas(n.width,n.height);o.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=o.convertToBlob()}(r=n.close)==null||r.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${c(this,$h)}_`)}};$h=new WeakMap,ym=new WeakMap,Xn=new WeakMap,Wh=new WeakSet,ab=async function(t,e){c(this,Xn)||E(this,Xn,new Map);let n=c(this,Xn).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${c(this,$h)}_${un(this,ym)._++}`,refCounter:0,isSvg:!1});let r;if(typeof e=="string"?(n.url=e,r=await hy(e,"blob")):e instanceof File?r=n.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const o=F1._isSVGFittingCanvas,u=new FileReader,h=new Image,f=new Promise((p,m)=>{h.onload=()=>{n.bitmap=h,n.isSvg=!0,p()},u.onload=async()=>{const y=n.svgUrl=u.result;h.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},h.onerror=u.onerror=m});u.readAsDataURL(r),await f}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){Ct(r),n=null}return c(this,Xn).set(t,n),n&&c(this,Xn).set(n.id,n),n};let CT=F1;var We,Xo,bm,Le;class ij{constructor(t=128){_(this,We,[]);_(this,Xo,!1);_(this,bm);_(this,Le,-1);E(this,bm,t)}add({cmd:t,undo:e,post:n,mustExec:r,type:o=NaN,overwriteIfSameType:u=!1,keepUndo:h=!1}){if(r&&t(),c(this,Xo))return;const f={cmd:t,undo:e,post:n,type:o};if(c(this,Le)===-1){c(this,We).length>0&&(c(this,We).length=0),E(this,Le,0),c(this,We).push(f);return}if(u&&c(this,We)[c(this,Le)].type===o){h&&(f.undo=c(this,We)[c(this,Le)].undo),c(this,We)[c(this,Le)]=f;return}const p=c(this,Le)+1;p===c(this,bm)?c(this,We).splice(0,1):(E(this,Le,p),p<c(this,We).length&&c(this,We).splice(p)),c(this,We).push(f)}undo(){if(c(this,Le)===-1)return;E(this,Xo,!0);const{undo:t,post:e}=c(this,We)[c(this,Le)];t(),e==null||e(),E(this,Xo,!1),E(this,Le,c(this,Le)-1)}redo(){if(c(this,Le)<c(this,We).length-1){E(this,Le,c(this,Le)+1),E(this,Xo,!0);const{cmd:t,post:e}=c(this,We)[c(this,Le)];t(),e==null||e(),E(this,Xo,!1)}}hasSomethingToUndo(){return c(this,Le)!==-1}hasSomethingToRedo(){return c(this,Le)<c(this,We).length-1}cleanType(t){if(c(this,Le)!==-1){for(let e=c(this,Le);e>=0;e--)if(c(this,We)[e].type!==t){c(this,We).splice(e+1,c(this,Le)-e),E(this,Le,e);return}c(this,We).length=0,E(this,Le,-1)}}destroy(){E(this,We,null)}}We=new WeakMap,Xo=new WeakMap,bm=new WeakMap,Le=new WeakMap;var cv,II;class py{constructor(t){_(this,cv);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=gn.platform;for(const[n,r,o={}]of t)for(const u of n){const h=u.startsWith("mac+");e&&h?(this.callbacks.set(u.slice(4),{callback:r,options:o}),this.allKeys.add(u.split("+").at(-1))):!e&&!h&&(this.callbacks.set(u,{callback:r,options:o}),this.allKeys.add(u.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(D(this,cv,II).call(this,e));if(!n)return;const{callback:r,options:{bubbles:o=!1,args:u=[],checker:h=null}}=n;h&&!h(t,e)||(r.bind(t,...u,e)(),o||Xe(e))}}cv=new WeakSet,II=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const uv=class uv{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Wz(t),Dt(this,"_colors",t)}convert(t){const e=fy(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,r]of this._colors)if(r.every((o,u)=>o===e[u]))return uv._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?ot.makeHexColor(...e):t}};$(uv,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let DT=uv;var Qh,Gi,Zh,Ie,Qe,Jh,Ds,td,Ms,qn,qo,Ko,ed,$o,Ta,Rs,Sc,vm,Am,nd,Em,_a,Wo,id,Qo,wa,hv,Zo,sd,Sm,Jo,Tc,ad,tl,Tm,rn,ae,Tr,el,nl,_m,rd,wm,il,xa,_r,xm,Cm,Os,rt,rb,MT,PI,BI,Np,kI,UI,FI,RT,HI,VI,zI,jI,ti,gr,GI,YI,OT,XI,Lp,NT;const Uh=class Uh{constructor(t,e,n,r,o,u,h,f,p,m,y,b,A,S,w,x){_(this,rt);_(this,Qh,new AbortController);_(this,Gi,null);_(this,Zh,null);_(this,Ie,new Map);_(this,Qe,new Map);_(this,Jh,null);_(this,Ds,null);_(this,td,null);_(this,Ms,new ij);_(this,qn,null);_(this,qo,null);_(this,Ko,null);_(this,ed,0);_(this,$o,new Set);_(this,Ta,null);_(this,Rs,null);_(this,Sc,new Set);$(this,"_editorUndoBar",null);_(this,vm,!1);_(this,Am,!1);_(this,nd,!1);_(this,Em,null);_(this,_a,null);_(this,Wo,null);_(this,id,null);_(this,Qo,!1);_(this,wa,null);_(this,hv,new nj);_(this,Zo,!1);_(this,sd,!1);_(this,Sm,!1);_(this,Jo,null);_(this,Tc,null);_(this,ad,null);_(this,tl,null);_(this,Tm,null);_(this,rn,Ot.NONE);_(this,ae,new Set);_(this,Tr,null);_(this,el,null);_(this,nl,null);_(this,_m,null);_(this,rd,null);_(this,wm,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});_(this,il,[0,0]);_(this,xa,null);_(this,_r,null);_(this,xm,null);_(this,Cm,null);_(this,Os,null);const C=this._signal=c(this,Qh).signal;E(this,_r,t),E(this,xm,e),E(this,Cm,n),E(this,Jh,r),E(this,qn,o),E(this,el,u),E(this,rd,f),this._eventBus=h,h._on("editingaction",this.onEditingAction.bind(this),{signal:C}),h._on("pagechanging",this.onPageChanging.bind(this),{signal:C}),h._on("scalechanging",this.onScaleChanging.bind(this),{signal:C}),h._on("rotationchanging",this.onRotationChanging.bind(this),{signal:C}),h._on("setpreference",this.onSetPreference.bind(this),{signal:C}),h._on("switchannotationeditorparams",O=>this.updateParams(O.type,O.value),{signal:C}),h._on("pagesedited",this.onPagesEdited.bind(this),{signal:C}),window.addEventListener("pointerdown",()=>{E(this,sd,!0)},{capture:!0,signal:C}),window.addEventListener("pointerup",()=>{E(this,sd,!1)},{capture:!0,signal:C}),D(this,rt,kI).call(this),D(this,rt,jI).call(this),D(this,rt,RT).call(this),E(this,Ds,f.annotationStorage),E(this,Em,f.filterFactory),E(this,nl,p),E(this,id,m||null),E(this,vm,y),E(this,Am,b),E(this,nd,A),E(this,Tm,S||null),this.viewParameters={realScale:Fl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=x!==!1,o==null||o.setSidebarUiManager(this)}static get _keyboardManager(){const t=Uh.prototype,e=u=>c(u,_r).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&u.hasSomethingToControl(),n=(u,{target:h})=>{if(h instanceof HTMLInputElement){const{type:f}=h;return f!=="text"&&f!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Dt(this,"_keyboardManager",new py([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(u,{target:h})=>!(h instanceof HTMLButtonElement)&&c(u,_r).contains(h)&&!u.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(u,{target:h})=>!(h instanceof HTMLButtonElement)&&c(u,_r).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}destroy(){var t,e,n,r,o,u,h,f,p;(t=c(this,Os))==null||t.resolve(),E(this,Os,null),(e=c(this,Qh))==null||e.abort(),E(this,Qh,null),this._signal=null;for(const m of c(this,Qe).values())m.destroy();c(this,Qe).clear(),c(this,Ie).clear(),c(this,Sc).clear(),(n=c(this,tl))==null||n.clear(),E(this,Gi,null),c(this,ae).clear(),c(this,Ms).destroy(),(r=c(this,Jh))==null||r.destroy(),(o=c(this,qn))==null||o.destroy(),(u=c(this,el))==null||u.destroy(),(h=c(this,wa))==null||h.hide(),E(this,wa,null),(f=c(this,ad))==null||f.destroy(),E(this,ad,null),E(this,Zh,null),c(this,_a)&&(clearTimeout(c(this,_a)),E(this,_a,null)),c(this,xa)&&(clearTimeout(c(this,xa)),E(this,xa,null)),(p=this._editorUndoBar)==null||p.destroy(),E(this,rd,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return c(this,Tm)}get useNewAltTextFlow(){return c(this,Am)}get useNewAltTextWhenAddingImage(){return c(this,nd)}get hcmFilter(){return Dt(this,"hcmFilter",c(this,nl)?c(this,Em).addHCMFilter(c(this,nl).foreground,c(this,nl).background):"none")}get direction(){return Dt(this,"direction",getComputedStyle(c(this,_r)).direction)}get _highlightColors(){return Dt(this,"_highlightColors",c(this,id)?new Map(c(this,id).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Dt(this,"highlightColors",null);const e=new Map,n=!!c(this,nl);for(const[r,o]of t){const u=r.endsWith("_HCM");if(n&&u){e.set(r.replace("_HCM",""),o);continue}!n&&!u&&e.set(r,o)}return Dt(this,"highlightColors",e)}get highlightColorNames(){return Dt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),E(this,Ko,t)}setMainHighlightColorPicker(t){E(this,ad,t)}editAltText(t,e=!1){var n;(n=c(this,Jh))==null||n.editAltText(this,t,e)}hasCommentManager(){return!!c(this,qn)}editComment(t,e,n,r){var o;(o=c(this,qn))==null||o.showDialog(this,t,e,n,r)}selectComment(t,e){const n=c(this,Qe).get(t),r=n==null?void 0:n.getEditorByUID(e);r==null||r.toggleComment(!0,!0)}updateComment(t){var e;(e=c(this,qn))==null||e.updateComment(t.getData())}updatePopupColor(t){var e;(e=c(this,qn))==null||e.updatePopupColor(t)}removeComment(t){var e;(e=c(this,qn))==null||e.removeComments([t.uid])}deleteComment(t,e){const n=()=>{t.comment=e},r=()=>{var o;(o=this._editorUndoBar)==null||o.show(n,"comment"),this.toggleComment(null),t.comment=null};this.addCommands({cmd:r,undo:n,mustExec:!0})}toggleComment(t,e,n=void 0){var r;(r=c(this,qn))==null||r.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){var n;return t&&((n=c(this,qn))==null?void 0:n.makeCommentColor(t,e))||null}getCommentDialogElement(){var t;return((t=c(this,qn))==null?void 0:t.dialogElement)||null}async waitForEditorsRendered(t){if(c(this,Qe).has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),r=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",r),e())};this._eventBus.on("editorsrendered",r),await n}getSignature(t){var e;(e=c(this,el))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return c(this,el)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":E(this,nd,e);break}}onPagesEdited({pagesMapper:t}){for(const r of c(this,Ie).values())r.updatePageIndex(t.getPrevPageNumber(r.pageIndex+1)-1);const e=c(this,Qe),n=E(this,Qe,new Map);for(const[r,o]of e){const u=t.getPrevPageNumber(r+1)-1;if(u===-1){o.destroy();continue}n.set(u,o),o.updatePageIndex(u)}}onPageChanging({pageNumber:t}){E(this,ed,t-1)}focusMainContainer(){c(this,_r).focus()}findParent(t,e){for(const n of c(this,Qe).values()){const{x:r,y:o,width:u,height:h}=n.div.getBoundingClientRect();if(t>=r&&t<=r+u&&e>=o&&e<=o+h)return n}return null}disableUserSelect(t=!1){c(this,xm).classList.toggle("noUserSelect",t)}addShouldRescale(t){c(this,Sc).add(t)}removeShouldRescale(t){c(this,Sc).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Fl.PDF_TO_CSS_UNITS;for(const n of c(this,Sc))n.onScaleChanging();(e=c(this,Ko))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:r,anchorOffset:o,focusNode:u,focusOffset:h}=n,f=n.toString(),m=D(this,rt,rb).call(this,n).closest(".textLayer"),y=this.getSelectionBoxes(m);if(!y)return;n.empty();const b=D(this,rt,MT).call(this,m),A=c(this,rn)===Ot.NONE,S=()=>{const w=b==null?void 0:b.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:r,anchorOffset:o,focusNode:u,focusOffset:h,text:f});A&&this.showAllEditors("highlight",!0,!0),e&&(w==null||w.editComment())};if(A){this.switchToMode(Ot.HIGHLIGHT,S);return}S()}commentSelection(t=""){this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!c(this,Ds))return null;const e=`${om}${t}`,n=c(this,Ds).getRawValue(e);return n&&c(this,Ds).remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&c(this,Ds)&&!c(this,Ds).has(t.id)&&c(this,Ds).setValue(t.id,t)}a11yAlert(t,e=null){const n=c(this,Cm);n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,c(this,Qo)&&(E(this,Qo,!1),D(this,rt,Np).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of c(this,ae))if(e.div.contains(t)){E(this,Tc,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!c(this,Tc))return;const[t,e]=c(this,Tc);E(this,Tc,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){D(this,rt,RT).call(this),this.setEditingState(!0)}removeEditListeners(){D(this,rt,HI).call(this),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of c(this,Rs))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of c(this,Rs))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=c(this,Gi))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const r of c(this,ae)){const o=r.serialize(!0);o&&e.push(o)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const u of c(this,Rs))if(u.isHandlingMimeForPasting(o.type)){u.paste(o,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){Ct(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const f of n){const p=await r.deserialize(f);if(!p)return;o.push(p)}const u=()=>{for(const f of o)D(this,rt,OT).call(this,f);D(this,rt,NT).call(this,o)},h=()=>{for(const f of o)f.remove()};this.addCommands({cmd:u,undo:h,mustExec:!0})}catch(o){Ct(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,rn)!==Ot.NONE&&!this.isEditorHandlingKeyboard&&Uh._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,Qo)&&(E(this,Qo,!1),D(this,rt,Np).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(t){t?(D(this,rt,UI).call(this),D(this,rt,VI).call(this),D(this,rt,ti).call(this,{isEditing:c(this,rn)!==Ot.NONE,isEmpty:D(this,rt,Lp).call(this),hasSomethingToUndo:c(this,Ms).hasSomethingToUndo(),hasSomethingToRedo:c(this,Ms).hasSomethingToRedo(),hasSelectedEditor:!1})):(D(this,rt,FI).call(this),D(this,rt,zI).call(this),D(this,rt,ti).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!c(this,Rs)){E(this,Rs,t);for(const e of c(this,Rs))D(this,rt,gr).call(this,e.defaultPropertiesToUpdate)}}getId(){return c(this,hv).id}get currentLayer(){return c(this,Qe).get(c(this,ed))}getLayer(t){return c(this,Qe).get(t)}get currentPageIndex(){return c(this,ed)}addLayer(t){c(this,Qe).set(t.pageIndex,t),c(this,Zo)?t.enable():t.disable()}removeLayer(t){c(this,Qe).delete(t.pageIndex)}async updateMode(t,e=null,n=!1,r=!1,o=!1,u=!1){var h,f,p,m,y,b;if(c(this,rn)!==t&&!(c(this,Os)&&(await c(this,Os).promise,!c(this,Os)))){if(E(this,Os,Promise.withResolvers()),(h=c(this,Ko))==null||h.commitOrRemove(),c(this,rn)===Ot.POPUP&&((f=c(this,qn))==null||f.hideSidebar()),(p=c(this,qn))==null||p.destroyPopup(),E(this,rn,t),t===Ot.NONE){this.setEditingState(!1),D(this,rt,YI).call(this);for(const A of c(this,Ie).values())A.hideStandaloneCommentButton();(m=this._editorUndoBar)==null||m.hide(),this.toggleComment(null),c(this,Os).resolve();return}for(const A of c(this,Ie).values())A.addStandaloneCommentButton();t===Ot.SIGNATURE&&await((y=c(this,el))==null?void 0:y.loadSignatures()),n&&Yn.clearPointerType(),this.setEditingState(!0),await D(this,rt,GI).call(this),this.unselectAll();for(const A of c(this,Qe).values())A.updateMode(t);if(t===Ot.POPUP){c(this,Zh)||E(this,Zh,await c(this,rd).getAnnotationsByType(new Set(c(this,Rs).map(w=>w._editorType))));const A=new Set,S=[];for(const w of c(this,Ie).values()){const{annotationElementId:x,hasComment:C,deleted:O}=w;x&&A.add(x),C&&!O&&S.push(w.getData())}for(const w of c(this,Zh)){const{id:x,popupRef:C,contentsObj:O}=w;C&&(O!=null&&O.str)&&!A.has(x)&&!c(this,$o).has(x)&&S.push(w)}(b=c(this,qn))==null||b.showSidebar(S)}if(!e){r&&this.addNewEditorFromKeyboard(),c(this,Os).resolve();return}for(const A of c(this,Ie).values())A.uid===e?(this.setSelected(A),u?A.editComment():o?A.enterInEditMode():A.focus()):A.unselect();c(this,Os).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==c(this,rn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(c(this,Rs)){switch(t){case Xt.CREATE:this.currentLayer.addNewEditor(e);return;case Xt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,_m)||E(this,_m,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of c(this,ae))n.updateParams(t,e);else for(const n of c(this,Rs))n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var o;for(const u of c(this,Ie).values())u.editorType===t&&u.show(e);(((o=c(this,_m))==null?void 0:o.get(Xt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&D(this,rt,gr).call(this,[[Xt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(c(this,Sm)!==t){E(this,Sm,t);for(const e of c(this,Qe).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(const e of c(this,Ie).values())e.pageIndex===t&&(yield e)}getEditor(t){return c(this,Ie).get(t)}addEditor(t){c(this,Ie).set(t.id,t)}removeEditor(t){var e,n;t.div.contains(document.activeElement)&&(c(this,_a)&&clearTimeout(c(this,_a)),E(this,_a,setTimeout(()=>{this.focusMainContainer(),E(this,_a,null)},0))),c(this,Ie).delete(t.id),t.annotationElementId&&((e=c(this,tl))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!c(this,$o).has(t.annotationElementId))&&((n=c(this,Ds))==null||n.remove(t.id))}addDeletedAnnotationElement(t){c(this,$o).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return c(this,$o).has(t)}removeDeletedAnnotationElement(t){c(this,$o).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){c(this,Gi)!==t&&(E(this,Gi,t),t&&D(this,rt,gr).call(this,t.propertiesToUpdate))}updateUI(t){c(this,rt,XI)===t&&D(this,rt,gr).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){D(this,rt,gr).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(c(this,ae).has(t)){c(this,ae).delete(t),t.unselect(),D(this,rt,ti).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,ae).add(t),t.select(),D(this,rt,gr).call(this,t.propertiesToUpdate),D(this,rt,ti).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.uid}),(e=c(this,Ko))==null||e.commitOrRemove();for(const n of c(this,ae))n!==t&&n.unselect();c(this,ae).clear(),c(this,ae).add(t),t.select(),D(this,rt,gr).call(this,t.propertiesToUpdate),D(this,rt,ti).call(this,{hasSelectedEditor:!0})}isSelected(t){return c(this,ae).has(t)}get firstSelectedEditor(){return c(this,ae).values().next().value}unselect(t){t.unselect(),c(this,ae).delete(t),D(this,rt,ti).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,ae).size!==0}get isEnterHandled(){return c(this,ae).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;c(this,Ms).undo(),D(this,rt,ti).call(this,{hasSomethingToUndo:c(this,Ms).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:D(this,rt,Lp).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){c(this,Ms).redo(),D(this,rt,ti).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,Ms).hasSomethingToRedo(),isEmpty:D(this,rt,Lp).call(this)})}addCommands(t){c(this,Ms).add(t),D(this,rt,ti).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:D(this,rt,Lp).call(this)})}cleanUndoStack(t){c(this,Ms).cleanType(t)}delete(){var o;this.commitOrRemove();const t=(o=this.currentLayer)==null?void 0:o.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...c(this,ae)],n=()=>{var u;(u=this._editorUndoBar)==null||u.show(r,e.length===1?e[0].editorType:e.length);for(const h of e)h.remove()},r=()=>{for(const u of e)D(this,rt,OT).call(this,u)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var t;(t=c(this,Gi))==null||t.commitOrRemove()}hasSomethingToControl(){return c(this,Gi)||this.hasSelection}selectAll(){for(const t of c(this,ae))t.commit();D(this,rt,NT).call(this,c(this,Ie).values())}unselectAll(){var t;if(!(c(this,Gi)&&(c(this,Gi).commitOrRemove(),c(this,rn)!==Ot.NONE))&&!((t=c(this,Ko))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of c(this,ae))e.unselect();c(this,ae).clear(),D(this,rt,ti).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;c(this,il)[0]+=t,c(this,il)[1]+=e;const[r,o]=c(this,il),u=[...c(this,ae)],h=1e3;c(this,xa)&&clearTimeout(c(this,xa)),E(this,xa,setTimeout(()=>{E(this,xa,null),c(this,il)[0]=c(this,il)[1]=0,this.addCommands({cmd:()=>{for(const f of u)c(this,Ie).has(f.id)&&(f.translateInPage(r,o),f.translationDone())},undo:()=>{for(const f of u)c(this,Ie).has(f.id)&&(f.translateInPage(-r,-o),f.translationDone())},mustExec:!1})},h));for(const f of u)f.translateInPage(t,e),f.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),E(this,Ta,new Map);for(const t of c(this,ae))c(this,Ta).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,Ta))return!1;this.disableUserSelect(!1);const t=c(this,Ta);E(this,Ta,null);let e=!1;for(const[{x:r,y:o,pageIndex:u},h]of t)h.newX=r,h.newY=o,h.newPageIndex=u,e||(e=r!==h.savedX||o!==h.savedY||u!==h.savedPageIndex);if(!e)return!1;const n=(r,o,u,h)=>{if(c(this,Ie).has(r.id)){const f=c(this,Qe).get(h);f?r._setParentAndPosition(f,o,u):(r.pageIndex=h,r.x=o,r.y=u)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:u,newPageIndex:h}]of t)n(r,o,u,h)},undo:()=>{for(const[r,{savedX:o,savedY:u,savedPageIndex:h}]of t)n(r,o,u,h)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(c(this,Ta))for(const n of c(this,Ta).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||c(this,ae).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return c(this,Gi)===t}getActive(){return c(this,Gi)}getMode(){return c(this,rn)}isEditingMode(){return c(this,rn)!==Ot.NONE}get imageManager(){return Dt(this,"imageManager",new CT)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let p=0,m=e.rangeCount;p<m;p++)if(!t.contains(e.getRangeAt(p).commonAncestorContainer))return null;const{x:n,y:r,width:o,height:u}=t.getBoundingClientRect();let h;switch(t.getAttribute("data-main-rotation")){case"90":h=(p,m,y,b)=>({x:(m-r)/u,y:1-(p+y-n)/o,width:b/u,height:y/o});break;case"180":h=(p,m,y,b)=>({x:1-(p+y-n)/o,y:1-(m+b-r)/u,width:y/o,height:b/u});break;case"270":h=(p,m,y,b)=>({x:1-(m+b-r)/u,y:(p-n)/o,width:b/u,height:y/o});break;default:h=(p,m,y,b)=>({x:(p-n)/o,y:(m-r)/u,width:y/o,height:b/u});break}const f=[];for(let p=0,m=e.rangeCount;p<m;p++){const y=e.getRangeAt(p);if(!y.collapsed)for(const{x:b,y:A,width:S,height:w}of y.getClientRects())S===0||w===0||f.push(h(b,A,S,w))}return f.length===0?null:f}addChangedExistingAnnotation({annotationElementId:t,id:e}){(c(this,td)||E(this,td,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=c(this,td))==null||e.delete(t)}renderAnnotationElement(t){var r;const e=(r=c(this,td))==null?void 0:r.get(t.data.id);if(!e)return;const n=c(this,Ds).getRawValue(e);n&&(c(this,rn)===Ot.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){var o;const r=(o=c(this,tl))==null?void 0:o.get(t);r&&(r.setCanvas(e,n),c(this,tl).delete(t))}addMissingCanvas(t,e){(c(this,tl)||E(this,tl,new Map)).set(t,e)}};Qh=new WeakMap,Gi=new WeakMap,Zh=new WeakMap,Ie=new WeakMap,Qe=new WeakMap,Jh=new WeakMap,Ds=new WeakMap,td=new WeakMap,Ms=new WeakMap,qn=new WeakMap,qo=new WeakMap,Ko=new WeakMap,ed=new WeakMap,$o=new WeakMap,Ta=new WeakMap,Rs=new WeakMap,Sc=new WeakMap,vm=new WeakMap,Am=new WeakMap,nd=new WeakMap,Em=new WeakMap,_a=new WeakMap,Wo=new WeakMap,id=new WeakMap,Qo=new WeakMap,wa=new WeakMap,hv=new WeakMap,Zo=new WeakMap,sd=new WeakMap,Sm=new WeakMap,Jo=new WeakMap,Tc=new WeakMap,ad=new WeakMap,tl=new WeakMap,Tm=new WeakMap,rn=new WeakMap,ae=new WeakMap,Tr=new WeakMap,el=new WeakMap,nl=new WeakMap,_m=new WeakMap,rd=new WeakMap,wm=new WeakMap,il=new WeakMap,xa=new WeakMap,_r=new WeakMap,xm=new WeakMap,Cm=new WeakMap,Os=new WeakMap,rt=new WeakSet,rb=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},MT=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of c(this,Qe).values())if(n.hasTextLayer(t))return n;return null},PI=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=D(this,rt,rb).call(this,t).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(c(this,wa)||E(this,wa,new ej(this)),c(this,wa).show(n,r,this.direction==="ltr"))},BI=function(){var o,u,h;const t=document.getSelection();if(!t||t.isCollapsed){c(this,Tr)&&((o=c(this,wa))==null||o.hide(),E(this,Tr,null),D(this,rt,ti).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===c(this,Tr))return;const r=D(this,rt,rb).call(this,t).closest(".textLayer");if(!r){c(this,Tr)&&((u=c(this,wa))==null||u.hide(),E(this,Tr,null),D(this,rt,ti).call(this,{hasSelectedText:!1}));return}if((h=c(this,wa))==null||h.hide(),E(this,Tr,e),D(this,rt,ti).call(this,{hasSelectedText:!0}),!(c(this,rn)!==Ot.HIGHLIGHT&&c(this,rn)!==Ot.NONE)&&(c(this,rn)===Ot.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),E(this,Qo,this.isShiftKeyDown),!this.isShiftKeyDown)){const f=c(this,rn)===Ot.HIGHLIGHT?D(this,rt,MT).call(this,r):null;if(f==null||f.toggleDrawing(),c(this,sd)){const p=new AbortController,m=this.combinedSignal(p),y=b=>{b.type==="pointerup"&&b.button!==0||(p.abort(),f==null||f.toggleDrawing(!0),b.type==="pointerup"&&D(this,rt,Np).call(this,"main_toolbar"))};window.addEventListener("pointerup",y,{signal:m}),window.addEventListener("blur",y,{signal:m})}else f==null||f.toggleDrawing(!0),D(this,rt,Np).call(this,"main_toolbar")}},Np=function(t=""){c(this,rn)===Ot.HIGHLIGHT?this.highlightSelection(t):c(this,vm)&&D(this,rt,PI).call(this)},kI=function(){document.addEventListener("selectionchange",D(this,rt,BI).bind(this),{signal:this._signal})},UI=function(){if(c(this,Wo))return;E(this,Wo,new AbortController);const t=this.combinedSignal(c(this,Wo));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},FI=function(){var t;(t=c(this,Wo))==null||t.abort(),E(this,Wo,null)},RT=function(){if(c(this,Jo))return;E(this,Jo,new AbortController);const t=this.combinedSignal(c(this,Jo));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},HI=function(){var t;(t=c(this,Jo))==null||t.abort(),E(this,Jo,null)},VI=function(){if(c(this,qo))return;E(this,qo,new AbortController);const t=this.combinedSignal(c(this,qo));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},zI=function(){var t;(t=c(this,qo))==null||t.abort(),E(this,qo,null)},jI=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},ti=function(t){Object.entries(t).some(([n,r])=>c(this,wm)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,wm),t)}),c(this,rn)===Ot.HIGHLIGHT&&t.hasSelectedEditor===!1&&D(this,rt,gr).call(this,[[Xt.HIGHLIGHT_FREE,!0]]))},gr=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},GI=async function(){if(!c(this,Zo)){E(this,Zo,!0);const t=[];for(const e of c(this,Qe).values())t.push(e.enable());await Promise.all(t);for(const e of c(this,Ie).values())e.enable()}},YI=function(){if(this.unselectAll(),c(this,Zo)){E(this,Zo,!1);for(const t of c(this,Qe).values())t.disable();for(const t of c(this,Ie).values())t.disable()}},OT=function(t){const e=c(this,Qe).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},XI=function(){let t=null;for(t of c(this,ae));return t},Lp=function(){if(c(this,Ie).size===0)return!0;if(c(this,Ie).size===1)for(const t of c(this,Ie).values())return t.isEmpty();return!1},NT=function(t){for(const e of c(this,ae))e.unselect();c(this,ae).clear();for(const e of t)e.isEmpty()||(c(this,ae).add(e),e.select());D(this,rt,ti).call(this,{hasSelectedEditor:this.hasSelection})},$(Uh,"TRANSLATE_SMALL",1),$(Uh,"TRANSLATE_BIG",10);let Ou=Uh;var vn,Ca,ta,od,Da,Yi,ld,Ma,Si,wr,_c,Ra,sl,ha,Ip,ob;const ei=class ei{constructor(t){_(this,ha);_(this,vn,null);_(this,Ca,!1);_(this,ta,null);_(this,od,null);_(this,Da,null);_(this,Yi,null);_(this,ld,!1);_(this,Ma,null);_(this,Si,null);_(this,wr,null);_(this,_c,null);_(this,Ra,!1);E(this,Si,t),E(this,Ra,t._uiManager.useNewAltTextFlow),c(ei,sl)||E(ei,sl,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){ei._l10n??(ei._l10n=t)}async render(){const t=E(this,ta,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=E(this,od,document.createElement("span"));t.append(e),c(this,Ra)?(t.classList.add("new"),t.setAttribute("data-l10n-id",c(ei,sl).missing),e.setAttribute("data-l10n-id",c(ei,sl)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=c(this,Si)._uiManager._signal;t.addEventListener("contextmenu",Ys,{signal:n}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const r=o=>{o.preventDefault(),c(this,Si)._uiManager.editAltText(c(this,Si)),c(this,Ra)&&c(this,Si)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,ha,Ip)}})};return t.addEventListener("click",r,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(E(this,ld,!0),r(o))},{signal:n}),await D(this,ha,ob).call(this),t}finish(){c(this,ta)&&(c(this,ta).focus({focusVisible:c(this,ld)}),E(this,ld,!1))}isEmpty(){return c(this,Ra)?c(this,vn)===null:!c(this,vn)&&!c(this,Ca)}hasData(){return c(this,Ra)?c(this,vn)!==null||!!c(this,wr):this.isEmpty()}get guessedText(){return c(this,wr)}async setGuessedText(t){c(this,vn)===null&&(E(this,wr,t),E(this,_c,await ei._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),D(this,ha,ob).call(this))}toggleAltTextBadge(t=!1){var e;if(!c(this,Ra)||c(this,vn)){(e=c(this,Ma))==null||e.remove(),E(this,Ma,null);return}if(!c(this,Ma)){const n=E(this,Ma,document.createElement("div"));n.className="noAltTextBadge",c(this,Si).div.append(n)}c(this,Ma).classList.toggle("hidden",!t)}serialize(t){let e=c(this,vn);return!t&&c(this,wr)===e&&(e=c(this,_c)),{altText:e,decorative:c(this,Ca),guessedText:c(this,wr),textWithDisclaimer:c(this,_c)}}get data(){return{altText:c(this,vn),decorative:c(this,Ca)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:r,cancel:o=!1}){n&&(E(this,wr,n),E(this,_c,r)),!(c(this,vn)===t&&c(this,Ca)===e)&&(o||(E(this,vn,t),E(this,Ca,e)),D(this,ha,ob).call(this))}toggle(t=!1){c(this,ta)&&(!t&&c(this,Yi)&&(clearTimeout(c(this,Yi)),E(this,Yi,null)),c(this,ta).disabled=!t)}shown(){c(this,Si)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,ha,Ip)}})}destroy(){var t,e;(t=c(this,ta))==null||t.remove(),E(this,ta,null),E(this,od,null),E(this,Da,null),(e=c(this,Ma))==null||e.remove(),E(this,Ma,null)}};vn=new WeakMap,Ca=new WeakMap,ta=new WeakMap,od=new WeakMap,Da=new WeakMap,Yi=new WeakMap,ld=new WeakMap,Ma=new WeakMap,Si=new WeakMap,wr=new WeakMap,_c=new WeakMap,Ra=new WeakMap,sl=new WeakMap,ha=new WeakSet,Ip=function(){return c(this,vn)&&"added"||c(this,vn)===null&&this.guessedText&&"review"||"missing"},ob=async function(){var r,o,u;const t=c(this,ta);if(!t)return;if(c(this,Ra)){if(t.classList.toggle("done",!!c(this,vn)),t.setAttribute("data-l10n-id",c(ei,sl)[c(this,ha,Ip)]),(r=c(this,od))==null||r.setAttribute("data-l10n-id",c(ei,sl)[`${c(this,ha,Ip)}-label`]),!c(this,vn)){(o=c(this,Da))==null||o.remove();return}}else{if(!c(this,vn)&&!c(this,Ca)){t.classList.remove("done"),(u=c(this,Da))==null||u.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=c(this,Da);if(!e){E(this,Da,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${c(this,Si).id}`;const h=100,f=c(this,Si)._uiManager._signal;f.addEventListener("abort",()=>{clearTimeout(c(this,Yi)),E(this,Yi,null)},{once:!0}),t.addEventListener("mouseenter",()=>{E(this,Yi,setTimeout(()=>{E(this,Yi,null),c(this,Da).classList.add("show"),c(this,Si)._reportTelemetry({action:"alt_text_tooltip"})},h))},{signal:f}),t.addEventListener("mouseleave",()=>{var p;c(this,Yi)&&(clearTimeout(c(this,Yi)),E(this,Yi,null)),(p=c(this,Da))==null||p.classList.remove("show")},{signal:f})}c(this,Ca)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=c(this,vn)),e.parentNode||t.append(e);const n=c(this,Si).getElementForAltText();n==null||n.setAttribute("aria-describedby",e.id)},_(ei,sl,null),$(ei,"_l10n",null);let Wb=ei;var Nn,Ns,wc,Se,Dm,al,Ls,rl,ol,xc,Mm,LT;class z0{constructor(t){_(this,Mm);_(this,Nn,null);_(this,Ns,null);_(this,wc,!1);_(this,Se,null);_(this,Dm,null);_(this,al,null);_(this,Ls,null);_(this,rl,null);_(this,ol,!1);_(this,xc,null);E(this,Se,t)}renderForToolbar(){const t=E(this,Ns,document.createElement("button"));return t.className="comment",D(this,Mm,LT).call(this,t,!1)}renderForStandalone(){const t=E(this,Nn,document.createElement("button"));t.className="annotationCommentButton";const e=c(this,Se).commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(c(this,Se)._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const r=c(this,Se).commentButtonColor;r&&(n.backgroundColor=r)}return D(this,Mm,LT).call(this,t,!0)}focusButton(){setTimeout(()=>{var t;(t=c(this,Nn)??c(this,Ns))==null||t.focus()},0)}onUpdatedColor(){if(!c(this,Nn))return;const t=c(this,Se).commentButtonColor;t&&(c(this,Nn).style.backgroundColor=t),c(this,Se)._uiManager.updatePopupColor(c(this,Se))}get commentButtonWidth(){var t;return(((t=c(this,Nn))==null?void 0:t.getBoundingClientRect().width)??0)/c(this,Se).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(c(this,xc))return c(this,xc);if(!c(this,Nn))return null;const{x:t,y:e,height:n}=c(this,Nn).getBoundingClientRect(),{x:r,y:o,width:u,height:h}=c(this,Se).parent.boundingClientRect;return[(t-r)/u,(e+n-o)/h]}set commentPopupPositionInLayer(t){E(this,xc,t)}hasDefaultPopupPosition(){return c(this,xc)===null}removeStandaloneCommentButton(){var t;(t=c(this,Nn))==null||t.remove(),E(this,Nn,null)}removeToolbarCommentButton(){var t;(t=c(this,Ns))==null||t.remove(),E(this,Ns,null)}setCommentButtonStates({selected:t,hasPopup:e}){c(this,Nn)&&(c(this,Nn).classList.toggle("selected",t),c(this,Nn).ariaExpanded=e)}edit(t){const e=this.commentPopupPositionInLayer;let n,r;if(e)[n,r]=e;else{[n,r]=c(this,Se).commentButtonPosition;const{width:m,height:y,x:b,y:A}=c(this,Se);n=b+n*m,r=A+r*y}const o=c(this,Se).parent.boundingClientRect,{x:u,y:h,width:f,height:p}=o;c(this,Se)._uiManager.editComment(c(this,Se),u+n*f,h+r*p,{...t,parentDimensions:o})}finish(){c(this,Ns)&&(c(this,Ns).focus({focusVisible:c(this,wc)}),E(this,wc,!1))}isDeleted(){return c(this,ol)||c(this,Ls)===""}isEmpty(){return c(this,Ls)===null}hasBeenEdited(){return this.isDeleted()||c(this,Ls)!==c(this,Dm)}serialize(){return this.data}get data(){return{text:c(this,Ls),richText:c(this,al),date:c(this,rl),deleted:this.isDeleted()}}set data(t){if(t!==c(this,Ls)&&E(this,al,null),t===null){E(this,Ls,""),E(this,ol,!0);return}E(this,Ls,t),E(this,rl,new Date),E(this,ol,!1)}restoreData({text:t,richText:e,date:n}){E(this,Ls,t),E(this,al,e),E(this,rl,n),E(this,ol,!1)}setInitialText(t,e=null){E(this,Dm,t),this.data=t,E(this,rl,null),E(this,al,e)}shown(){}destroy(){var t,e;(t=c(this,Ns))==null||t.remove(),E(this,Ns,null),(e=c(this,Nn))==null||e.remove(),E(this,Nn,null),E(this,Ls,""),E(this,al,null),E(this,rl,null),E(this,Se,null),E(this,wc,!1),E(this,ol,!1)}}Nn=new WeakMap,Ns=new WeakMap,wc=new WeakMap,Se=new WeakMap,Dm=new WeakMap,al=new WeakMap,Ls=new WeakMap,rl=new WeakMap,ol=new WeakMap,xc=new WeakMap,Mm=new WeakSet,LT=function(t,e){if(!c(this,Se)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[c(this,Se)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=c(this,Se)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",Ys,{signal:n}),e&&(t.addEventListener("focusin",o=>{c(this,Se)._focusEventsAllowed=!1,Xe(o)},{capture:!0,signal:n}),t.addEventListener("focusout",o=>{c(this,Se)._focusEventsAllowed=!0,Xe(o)},{capture:!0,signal:n})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const r=o=>{o.preventDefault(),t===c(this,Ns)?this.edit():c(this,Se).toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(E(this,wc,!0),r(o))},{signal:n}),t.addEventListener("pointerenter",()=>{c(this,Se).toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{c(this,Se).toggleComment(!1,!1)},{signal:n}),t};var cd,Cc,Rm,Om,Nm,Lm,Im,xr,Dc,Cr,Mc,Dr,Hl,qI,KI,$I;const H1=class H1{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:u=null,signal:h}){_(this,Hl);_(this,cd);_(this,Cc,!1);_(this,Rm,null);_(this,Om);_(this,Nm);_(this,Lm);_(this,Im);_(this,xr,null);_(this,Dc);_(this,Cr,null);_(this,Mc);_(this,Dr,null);E(this,cd,t),E(this,Rm,n),E(this,Om,e),E(this,Nm,r),E(this,Lm,o),E(this,Im,u),E(this,Mc,new AbortController),E(this,Dc,AbortSignal.any([h,c(this,Mc).signal])),t.addEventListener("touchstart",D(this,Hl,qI).bind(this),{passive:!1,signal:c(this,Dc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ka.pixelRatio}destroy(){var t,e;(t=c(this,Mc))==null||t.abort(),E(this,Mc,null),(e=c(this,xr))==null||e.abort(),E(this,xr,null)}};cd=new WeakMap,Cc=new WeakMap,Rm=new WeakMap,Om=new WeakMap,Nm=new WeakMap,Lm=new WeakMap,Im=new WeakMap,xr=new WeakMap,Dc=new WeakMap,Cr=new WeakMap,Mc=new WeakMap,Dr=new WeakMap,Hl=new WeakSet,qI=function(t){var r,o,u;if((r=c(this,Om))!=null&&r.call(this))return;if(t.touches.length===1){if(c(this,xr))return;const h=E(this,xr,new AbortController),f=AbortSignal.any([c(this,Dc),h.signal]),p=c(this,cd),m={capture:!0,signal:f,passive:!1},y=b=>{var A;b.pointerType==="touch"&&((A=c(this,xr))==null||A.abort(),E(this,xr,null))};p.addEventListener("pointerdown",b=>{b.pointerType==="touch"&&(Xe(b),y(b))},m),p.addEventListener("pointerup",y,m),p.addEventListener("pointercancel",y,m);return}if(!c(this,Dr)){E(this,Dr,new AbortController);const h=AbortSignal.any([c(this,Dc),c(this,Dr).signal]),f=c(this,cd),p={signal:h,capture:!1,passive:!1};f.addEventListener("touchmove",D(this,Hl,KI).bind(this),p);const m=D(this,Hl,$I).bind(this);f.addEventListener("touchend",m,p),f.addEventListener("touchcancel",m,p),p.capture=!0,f.addEventListener("pointerdown",Xe,p),f.addEventListener("pointermove",Xe,p),f.addEventListener("pointercancel",Xe,p),f.addEventListener("pointerup",Xe,p),(o=c(this,Nm))==null||o.call(this)}if(Xe(t),t.touches.length!==2||(u=c(this,Rm))!=null&&u.call(this)){E(this,Cr,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),E(this,Cr,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},KI=function(t){var N;if(!c(this,Cr)||t.touches.length!==2)return;Xe(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:r,screenY:o}=e,{screenX:u,screenY:h}=n,f=c(this,Cr),{touch0X:p,touch0Y:m,touch1X:y,touch1Y:b}=f,A=y-p,S=b-m,w=u-r,x=h-o,C=Math.hypot(w,x)||1,O=Math.hypot(A,S)||1;if(!c(this,Cc)&&Math.abs(O-C)<=H1.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(f.touch0X=r,f.touch0Y=o,f.touch1X=u,f.touch1Y=h,!c(this,Cc)){E(this,Cc,!0);return}const M=[(r+u)/2,(o+h)/2];(N=c(this,Lm))==null||N.call(this,M,O,C)},$I=function(t){var e;t.touches.length>=2||(c(this,Dr)&&(c(this,Dr).abort(),E(this,Dr,null),(e=c(this,Im))==null||e.call(this)),c(this,Cr)&&(Xe(t),E(this,Cr,null),E(this,Cc,!1)))};let Qb=H1;var Rc,ea,Re,re,Mr,ud,ll,Pm,Ln,Oc,Rr,Is,cl,Bm,Nc,Xi,km,Lc,Or,Oa,hd,dd,Ps,Ic,Um,dv,wt,IT,Fm,PT,lb,WI,QI,BT,cb,kT,ZI,JI,t2,UT,e2,FT,n2,i2,s2,HT,Pp;const Rt=class Rt{constructor(t){_(this,wt);_(this,Rc,null);_(this,ea,null);_(this,Re,null);_(this,re,null);_(this,Mr,null);_(this,ud,!1);_(this,ll,null);_(this,Pm,"");_(this,Ln,null);_(this,Oc,null);_(this,Rr,null);_(this,Is,null);_(this,cl,null);_(this,Bm,"");_(this,Nc,!1);_(this,Xi,null);_(this,km,!1);_(this,Lc,!1);_(this,Or,!1);_(this,Oa,null);_(this,hd,0);_(this,dd,0);_(this,Ps,null);_(this,Ic,null);$(this,"isSelected",!1);$(this,"_isCopy",!1);$(this,"_editToolbar",null);$(this,"_initialOptions",Object.create(null));$(this,"_initialData",null);$(this,"_isVisible",!0);$(this,"_uiManager",null);$(this,"_focusEventsAllowed",!0);_(this,Um,!1);_(this,dv,Rt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:u}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[o,u];const[h,f]=this.parentDimensions;this.x=t.x/h,this.y=t.y/f,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Rt.prototype._resizeWithKeyboard,e=Ou.TRANSLATE_SMALL,n=Ou.TRANSLATE_BIG;return Dt(this,"_resizerKeyboardManager",new py([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Rt.prototype._stopResizingWithKeyboard]]))}updatePageIndex(t){this.pageIndex=t}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Dt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new sj({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Rt._l10n??(Rt._l10n=t),Rt._l10nResizer||(Rt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Rt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Rt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){ee("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,Um)}set _isDraggable(t){var e;E(this,Um,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,dv)}setParent(t){var e;t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(D(this,wt,Pp).call(this),(e=c(this,Is))==null||e.remove(),E(this,Is,null)),this.parent=t}focusin(t){this._focusEventsAllowed&&(c(this,Nc)?E(this,Nc,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,r){const[o,u]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(t+n)/o,this.y=(e+r)/u,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,r]=this.parentDimensions;this.setAt(t*n,e*r,this.width*n,this.height*r),this._onTranslated()}translate(t,e){D(this,wt,IT).call(this,this.parentDimensions,t,e)}translateInPage(t,e){c(this,Xi)||E(this,Xi,[this.x,this.y,this.width,this.height]),D(this,wt,IT).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){c(this,Xi)||E(this,Xi,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[r,o]}=this;if(this.x+=t/r,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:u,y:h}=this;const[f,p]=this.getBaseTranslation();u+=f,h+=p;const{style:m}=n;m.left=`${(100*u).toFixed(2)}%`,m.top=`${(100*h).toFixed(2)}%`,this._onTranslating(u,h),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!c(this,Xi)&&(c(this,Xi)[0]!==this.x||c(this,Xi)[1]!==this.y)}get _hasBeenResized(){return!!c(this,Xi)&&(c(this,Xi)[2]!==this.width||c(this,Xi)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Rt,r=n/t,o=n/e;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,r]}=this;let{x:o,y:u,width:h,height:f}=this;if(h*=n,f*=r,o*=n,u*=r,this._mustFixPosition)switch(t){case 0:o=Un(o,0,n-h),u=Un(u,0,r-f);break;case 90:o=Un(o,0,n-f),u=Un(u,h,r);break;case 180:o=Un(o,h,n),u=Un(u,f,r);break;case 270:o=Un(o,f,n),u=Un(u,0,r-h);break}this.x=o/=n,this.y=u/=r;const[p,m]=this.getBaseTranslation();o+=p,u+=m,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*u).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return D(n=Rt,Fm,PT).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return D(n=Rt,Fm,PT).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=c(this,Re))==null||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||c(this,Lc))return this._editToolbar;this._editToolbar=new wT(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var t;(t=this._editToolbar)==null||t.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var t;(t=this._editToolbar)==null||t.removeButton("comment")}removeEditToolbar(){var t,e;(t=this._editToolbar)==null||t.remove(),this._editToolbar=null,(e=c(this,Re))==null||e.destroy()}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return c(this,Re)||(Wb.initialize(Rt._l10n),E(this,Re,new Wb(this)),c(this,Rc)&&(c(this,Re).data=c(this,Rc),E(this,Rc,null))),c(this,Re)}get altTextData(){var t;return(t=c(this,Re))==null?void 0:t.data}set altTextData(t){c(this,Re)&&(c(this,Re).data=t)}get guessedAltText(){var t;return(t=c(this,Re))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=c(this,Re))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=c(this,Re))==null?void 0:e.serialize(t)}hasAltText(){return!!c(this,Re)&&!c(this,Re).isEmpty()}hasAltTextData(){var t;return((t=c(this,Re))==null?void 0:t.hasData())??!1}focusCommentButton(){var t;(t=c(this,re))==null||t.focusButton()}addCommentButton(){return this.canAddComment?c(this,re)||E(this,re,new z0(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(c(this,Mr)){this._uiManager.isEditingMode()&&c(this,Mr).classList.remove("hidden");return}this.hasComment&&(E(this,Mr,c(this,re).renderForStandalone()),this.div.append(c(this,Mr)))}}removeStandaloneCommentButton(){c(this,re).removeStandaloneCommentButton(),E(this,Mr,null)}hideStandaloneCommentButton(){var t;(t=c(this,Mr))==null||t.classList.add("hidden")}get comment(){if(!c(this,re))return null;const{data:{richText:t,text:e,date:n,deleted:r}}=c(this,re);return{text:e,richText:t,date:n,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){c(this,re)||E(this,re,new z0(this)),typeof t=="object"&&t!==null?c(this,re).restoreData(t):c(this,re).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(c(this,re)||E(this,re,new z0(this)),c(this,re).setInitialText(t,n),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var t;return(t=c(this,re))==null?void 0:t.hasBeenEdited()}get hasDeletedComment(){var t;return(t=c(this,re))==null?void 0:t.isDeleted()}get hasComment(){return!!c(this,re)&&!c(this,re).isEmpty()&&!c(this,re).isDeleted()}async editComment(t){c(this,re)||E(this,re,new z0(this)),c(this,re).edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){c(this,re).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,r]=t.rect,[o]=this.pageDimensions,[u]=this.pageTranslation,h=u+o+1,f=r-100,p=h+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[h,f,p,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){c(this,re).data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var u;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=c(this,ud)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),D(this,wt,FT).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[r,o]=this.getInitialTranslation();return this.translate(r,o),LI(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,Ic)||E(this,Ic,new Qb({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:D(this,wt,ZI).bind(this),onPinching:D(this,wt,JI).bind(this),onPinchEnd:D(this,wt,t2).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(u=this._uiManager._editorUndoBar)==null||u.hide(),t}pointerdown(t){const{isMac:e}=gn.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(E(this,Nc,!0),this._isDraggable){D(this,wt,e2).call(this,t);return}D(this,wt,UT).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,Oa)&&clearTimeout(c(this,Oa)),E(this,Oa,setTimeout(()=>{var t;E(this,Oa,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const r=this.parentScale,[o,u]=this.pageDimensions,[h,f]=this.pageTranslation,p=t/r,m=e/r,y=this.x*o,b=this.y*u,A=this.width*o,S=this.height*u;switch(n){case 0:return[y+p+h,u-b-m-S+f,y+p+A+h,u-b-m+f];case 90:return[y+m+h,u-b+p+f,y+m+S+h,u-b+p+A+f];case 180:return[y-p-A+h,u-b+m+f,y-p+h,u-b+m+S+f];case 270:return[y-m-S+h,u-b-p-A+f,y-m+h,u-b-p+f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,r,o,u]=t,h=o-n,f=u-r;switch(this.rotation){case 0:return[n,e-u,h,f];case 90:return[n,e-r,f,h];case 180:return[o,e-r,h,f];case 270:return[o,e-u,f,h];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Rt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var t;(t=c(this,re))==null||t.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:r,deleted:o,richText:u},uid:h,pageIndex:f,creationDate:p,modificationDate:m}=this;return{id:h,pageIndex:f,rect:this.getPDFRect(),richText:u,contentsObj:{str:t},creationDate:p,modificationDate:n||m,popupRef:!o,color:e,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),E(this,Lc,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),E(this,Lc,!1),!0):!1}isInEditMode(){return c(this,Lc)}shouldGetKeyboardEvents(){return c(this,Or)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:u}=window;return e<u&&r>0&&t<o&&n>0}rebuild(){D(this,wt,FT).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(t,e,n){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,E(r,Rc,t.accessibilityData),r._isCopy=t.isCopy||!1;const[o,u]=r.pageDimensions,[h,f,p,m]=r.getRectInCurrentCoords(t.rect,u);return r.x=h/o,r.y=f/u,r.width=p/o,r.height=m/u,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e,n;if((t=c(this,cl))==null||t.abort(),E(this,cl,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),c(this,Oa)&&(clearTimeout(c(this,Oa)),E(this,Oa,null)),D(this,wt,Pp).call(this),this.removeEditToolbar(),c(this,Ps)){for(const r of c(this,Ps).values())clearTimeout(r);E(this,Ps,null)}this.parent=null,(e=c(this,Ic))==null||e.destroy(),E(this,Ic,null),(n=c(this,Is))==null||n.remove(),E(this,Is,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(D(this,wt,WI).call(this),c(this,Ln).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,r,o,u]=this.getPDFRect();return[Rt._round(n+(o-n)*t),Rt._round(r+(u-r)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return c(this,re).commentPopupPositionInLayer}set commentPopupPosition(t){c(this,re).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return c(this,re).hasDefaultPopupPosition()}get commentButtonWidth(){return c(this,re).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){var e;(e=c(this,re))==null||e.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),E(this,Rr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=c(this,Ln).children;if(!c(this,ea)){E(this,ea,Array.from(e));const u=D(this,wt,n2).bind(this),h=D(this,wt,i2).bind(this),f=this._uiManager._signal;for(const p of c(this,ea)){const m=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",u,{signal:f}),p.addEventListener("blur",h,{signal:f}),p.addEventListener("focus",D(this,wt,s2).bind(this,m),{signal:f}),p.setAttribute("data-l10n-id",Rt._l10nResizer[m])}}const n=c(this,ea)[0];let r=0;for(const u of e){if(u===n)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(c(this,ea).length/4);if(o!==r){if(o<r)for(let h=0;h<r-o;h++)c(this,Ln).append(c(this,Ln).firstElementChild);else if(o>r)for(let h=0;h<o-r;h++)c(this,Ln).firstElementChild.before(c(this,Ln).lastElementChild);let u=0;for(const h of e){const p=c(this,ea)[u++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",Rt._l10nResizer[p])}}D(this,wt,HT).call(this,0),E(this,Or,!0),c(this,Ln).firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){c(this,Or)&&D(this,wt,kT).call(this,c(this,Bm),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){D(this,wt,Pp).call(this),this.div.focus()}select(){var t,e,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,o;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(e=this._editToolbar)==null||e.show(),(n=c(this,Re))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var t;return(t=this.div)==null?void 0:t.focus({preventScroll:!0})},0)}unselect(){var t,e,n,r,o;this.isSelected&&(this.isSelected=!1,(t=c(this,Ln))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(o=c(this,Re))==null||o.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return c(this,km)}set isEditing(t){E(this,km,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){c(this,Ps)||E(this,Ps,new Map);const{action:n}=t;let r=c(this,Ps).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),c(this,Ps).delete(n),c(this,Ps).size===0&&E(this,Ps,null)},Rt._telemetryTimeout),c(this,Ps).set(n,r);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),E(this,ud,!1)}disable(){this.div&&(this.div.tabIndex=-1),E(this,ud,!0)}updateFakeAnnotationElement(t){if(!c(this,Is)&&!this.deleted){E(this,Is,t.addFakeAnnotation(this));return}if(this.deleted){c(this,Is).remove(),E(this,Is,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&c(this,Is).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Rc=new WeakMap,ea=new WeakMap,Re=new WeakMap,re=new WeakMap,Mr=new WeakMap,ud=new WeakMap,ll=new WeakMap,Pm=new WeakMap,Ln=new WeakMap,Oc=new WeakMap,Rr=new WeakMap,Is=new WeakMap,cl=new WeakMap,Bm=new WeakMap,Nc=new WeakMap,Xi=new WeakMap,km=new WeakMap,Lc=new WeakMap,Or=new WeakMap,Oa=new WeakMap,hd=new WeakMap,dd=new WeakMap,Ps=new WeakMap,Ic=new WeakMap,Um=new WeakMap,dv=new WeakMap,wt=new WeakSet,IT=function([t,e],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Fm=new WeakSet,PT=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},lb=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},WI=function(){if(c(this,Ln))return;E(this,Ln,document.createElement("div")),c(this,Ln).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const r=document.createElement("div");c(this,Ln).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",D(this,wt,QI).bind(this,n),{signal:e}),r.addEventListener("contextmenu",Ys,{signal:e}),r.tabIndex=-1}this.div.prepend(c(this,Ln))},QI=function(t,e){var m;e.preventDefault();const{isMac:n}=gn.platform;if(e.button!==0||e.ctrlKey&&n)return;(m=c(this,Re))==null||m.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,E(this,Oc,[e.screenX,e.screenY]);const o=new AbortController,u=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",D(this,wt,kT).bind(this,t),{passive:!0,capture:!0,signal:u}),window.addEventListener("touchmove",Xe,{passive:!1,signal:u}),window.addEventListener("contextmenu",Ys,{signal:u}),E(this,Rr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const h=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const p=()=>{var y;o.abort(),this.parent.togglePointerEvents(!0),(y=c(this,Re))==null||y.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=h,this.div.style.cursor=f,D(this,wt,cb).call(this)};window.addEventListener("pointerup",p,{signal:u}),window.addEventListener("blur",p,{signal:u})},BT=function(t,e,n,r){this.width=n,this.height=r,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()},cb=function(){if(!c(this,Rr))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:r}=c(this,Rr);E(this,Rr,null);const o=this.x,u=this.y,h=this.width,f=this.height;o===t&&u===e&&h===n&&f===r||this.addCommands({cmd:D(this,wt,BT).bind(this,o,u,h,f),undo:D(this,wt,BT).bind(this,t,e,n,r),mustExec:!0})},kT=function(t,e){const[n,r]=this.parentDimensions,o=this.x,u=this.y,h=this.width,f=this.height,p=Rt.MIN_SIZE/n,m=Rt.MIN_SIZE/r,y=D(this,wt,lb).call(this,this.rotation),b=(F,X)=>[y[0]*F+y[2]*X,y[1]*F+y[3]*X],A=D(this,wt,lb).call(this,360-this.rotation),S=(F,X)=>[A[0]*F+A[2]*X,A[1]*F+A[3]*X];let w,x,C=!1,O=!1;switch(t){case"topLeft":C=!0,w=(F,X)=>[0,0],x=(F,X)=>[F,X];break;case"topMiddle":w=(F,X)=>[F/2,0],x=(F,X)=>[F/2,X];break;case"topRight":C=!0,w=(F,X)=>[F,0],x=(F,X)=>[0,X];break;case"middleRight":O=!0,w=(F,X)=>[F,X/2],x=(F,X)=>[0,X/2];break;case"bottomRight":C=!0,w=(F,X)=>[F,X],x=(F,X)=>[0,0];break;case"bottomMiddle":w=(F,X)=>[F/2,X],x=(F,X)=>[F/2,0];break;case"bottomLeft":C=!0,w=(F,X)=>[0,X],x=(F,X)=>[F,0];break;case"middleLeft":O=!0,w=(F,X)=>[0,X/2],x=(F,X)=>[F,X/2];break}const M=w(h,f),N=x(h,f);let L=b(...N);const I=Rt._round(o+L[0]),k=Rt._round(u+L[1]);let j=1,W=1,nt,et;if(e.fromKeyboard)({deltaX:nt,deltaY:et}=e);else{const{screenX:F,screenY:X}=e,[it,dt]=c(this,Oc);[nt,et]=this.screenToPageTranslation(F-it,X-dt),c(this,Oc)[0]=F,c(this,Oc)[1]=X}if([nt,et]=S(nt/n,et/r),C){const F=Math.hypot(h,f);j=W=Math.max(Math.min(Math.hypot(N[0]-M[0]-nt,N[1]-M[1]-et)/F,1/h,1/f),p/h,m/f)}else O?j=Un(Math.abs(N[0]-M[0]-nt),p,1)/h:W=Un(Math.abs(N[1]-M[1]-et),m,1)/f;const ht=Rt._round(h*j),mt=Rt._round(f*W);L=b(...x(ht,mt));const gt=I-L[0],vt=k-L[1];c(this,Xi)||E(this,Xi,[this.x,this.y,this.width,this.height]),this.width=ht,this.height=mt,this.x=gt,this.y=vt,this.setDims(),this.fixAndSetPosition(),this._onResizing()},ZI=function(){var t;E(this,Rr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=c(this,Re))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},JI=function(t,e,n){let o=.7*(n/e)+1-.7;if(o===1)return;const u=D(this,wt,lb).call(this,this.rotation),h=(I,k)=>[u[0]*I+u[2]*k,u[1]*I+u[3]*k],[f,p]=this.parentDimensions,m=this.x,y=this.y,b=this.width,A=this.height,S=Rt.MIN_SIZE/f,w=Rt.MIN_SIZE/p;o=Math.max(Math.min(o,1/b,1/A),S/b,w/A);const x=Rt._round(b*o),C=Rt._round(A*o);if(x===b&&C===A)return;c(this,Xi)||E(this,Xi,[m,y,b,A]);const O=h(b/2,A/2),M=Rt._round(m+O[0]),N=Rt._round(y+O[1]),L=h(x/2,C/2);this.x=M-L[0],this.y=N-L[1],this.width=x,this.height=C,this.setDims(),this.fixAndSetPosition(),this._onResizing()},t2=function(){var t;(t=c(this,Re))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),D(this,wt,cb).call(this)},UT=function(t){const{isMac:e}=gn.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},e2=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),u={capture:!0,passive:!1,signal:o},h=p=>{r.abort(),E(this,ll,null),E(this,Nc,!1),this._uiManager.endDragSession()||D(this,wt,UT).call(this,p),n&&this._onStopDragging()};e&&(E(this,hd,t.clientX),E(this,dd,t.clientY),E(this,ll,t.pointerId),E(this,Pm,t.pointerType),window.addEventListener("pointermove",p=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:m,clientY:y,pointerId:b}=p;if(b!==c(this,ll)){Xe(p);return}const[A,S]=this.screenToPageTranslation(m-c(this,hd),y-c(this,dd));E(this,hd,m),E(this,dd,y),this._uiManager.dragSelectedEditors(A,S)},u),window.addEventListener("touchmove",Xe,u),window.addEventListener("pointerdown",p=>{p.pointerType===c(this,Pm)&&(c(this,Ic)||p.isPrimary)&&h(p),Xe(p)},u));const f=p=>{if(!c(this,ll)||c(this,ll)===p.pointerId){h(p);return}Xe(p)};window.addEventListener("pointerup",f,{signal:o}),window.addEventListener("blur",f,{signal:o})},FT=function(){if(c(this,cl)||!this.div)return;E(this,cl,new AbortController);const t=this._uiManager.combinedSignal(c(this,cl));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},n2=function(t){Rt._resizerKeyboardManager.exec(this,t)},i2=function(t){var e;c(this,Or)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==c(this,Ln)&&D(this,wt,Pp).call(this)},s2=function(t){E(this,Bm,c(this,Or)?t:"")},HT=function(t){if(c(this,ea))for(const e of c(this,ea))e.tabIndex=t},Pp=function(){E(this,Or,!1),D(this,wt,HT).call(this,-1),D(this,wt,cb).call(this)},_(Rt,Fm),$(Rt,"_l10n",null),$(Rt,"_l10nResizer",null),$(Rt,"_borderLineWidth",-1),$(Rt,"_colorManager",new DT),$(Rt,"_zIndex",1),$(Rt,"_telemetryTimeout",1e3);let Te=Rt;class sj extends Te{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const YO=3285377520,_s=4294901760,Aa=65535;class a2{constructor(t){this.h1=t?t&4294967295:YO,this.h2=t?t&4294967295:YO}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let w=0,x=t.length;w<x;w++){const C=t.charCodeAt(w);C<=255?e[n++]=C:(e[n++]=C>>>8,e[n++]=C&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,o=n-r*4,u=new Uint32Array(e.buffer,0,r);let h=0,f=0,p=this.h1,m=this.h2;const y=3432918353,b=461845907,A=y&Aa,S=b&Aa;for(let w=0;w<r;w++)w&1?(h=u[w],h=h*y&_s|h*A&Aa,h=h<<15|h>>>17,h=h*b&_s|h*S&Aa,p^=h,p=p<<13|p>>>19,p=p*5+3864292196):(f=u[w],f=f*y&_s|f*A&Aa,f=f<<15|f>>>17,f=f*b&_s|f*S&Aa,m^=f,m=m<<13|m>>>19,m=m*5+3864292196);switch(h=0,o){case 3:h^=e[r*4+2]<<16;case 2:h^=e[r*4+1]<<8;case 1:h^=e[r*4],h=h*y&_s|h*A&Aa,h=h<<15|h>>>17,h=h*b&_s|h*S&Aa,r&1?p^=h:m^=h}this.h1=p,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&_s|t*36045&Aa,e=e*4283543511&_s|((e<<16|t>>>16)*2950163797&_s)>>>16,t^=e>>>1,t=t*444984403&_s|t*60499&Aa,e=e*3301882366&_s|((e<<16|t>>>16)*3120437893&_s)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const VT=Object.freeze({map:null,hash:"",transfer:void 0});var Pc,Bc,Nr,In,fv,r2;class N1{constructor(){_(this,fv);_(this,Pc,!1);_(this,Bc,null);_(this,Nr,null);_(this,In,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=c(this,In).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return c(this,In).get(t)}remove(t){const e=c(this,In).get(t);if(e!==void 0&&(e instanceof Te&&c(this,Nr).delete(e.annotationElementId),c(this,In).delete(t),c(this,In).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of c(this,In).values())if(n instanceof Te)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=c(this,In).get(t);let r=!1;if(n!==void 0)for(const[o,u]of Object.entries(e))n[o]!==u&&(r=!0,n[o]=u);else r=!0,c(this,In).set(t,e);r&&D(this,fv,r2).call(this),e instanceof Te&&((c(this,Nr)||E(this,Nr,new Map)).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return c(this,In).has(t)}get size(){return c(this,In).size}resetModified(){c(this,Pc)&&(E(this,Pc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new o2(this)}get serializable(){if(c(this,In).size===0)return VT;const t=new Map,e=new a2,n=[],r=Object.create(null);let o=!1;for(const[u,h]of c(this,In)){const f=h instanceof Te?h.serialize(!1,r):h;h.page&&(h.pageIndex=h.page._pageIndex,delete h.page),f&&(t.set(u,f),e.update(`${u}:${JSON.stringify(f)}`),o||(o=!!f.bitmap))}if(o)for(const u of t.values())u.bitmap&&n.push(u.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:VT}get editorStats(){let t=null;const e=new Map;let n=0,r=0;for(const o of c(this,In).values()){if(!(o instanceof Te)){o.popup&&(o.popup.deleted?r+=1:n+=1);continue}o.isCommentDeleted?r+=1:o.hasEditedComment&&(n+=1);const u=o.telemetryFinalData;if(!u)continue;const{type:h}=u;e.has(h)||e.set(h,Object.getPrototypeOf(o).constructor),t||(t=Object.create(null));const f=t[h]||(t[h]=new Map);for(const[p,m]of Object.entries(u)){if(p==="type")continue;let y=f.get(p);y||(y=new Map,f.set(p,y));const b=y.get(m)??0;y.set(m,b+1)}}if((r>0||n>0)&&(t||(t=Object.create(null)),t.comments={deleted:r,edited:n}),!t)return null;for(const[o,u]of e)t[o]=u.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){E(this,Bc,null)}updateEditor(t,e){var r;const n=(r=c(this,Nr))==null?void 0:r.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){var e;return((e=c(this,Nr))==null?void 0:e.get(t))||null}get modifiedIds(){if(c(this,Bc))return c(this,Bc);const t=[];if(c(this,Nr))for(const e of c(this,Nr).values())e.serialize()&&t.push(e.annotationElementId);return E(this,Bc,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return c(this,In).entries()}}Pc=new WeakMap,Bc=new WeakMap,Nr=new WeakMap,In=new WeakMap,fv=new WeakSet,r2=function(){c(this,Pc)||(E(this,Pc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Hm;class o2 extends N1{constructor(e){super();_(this,Hm);const{map:n,hash:r,transfer:o}=e.serializable,u=structuredClone(n,o?{transfer:o}:null);E(this,Hm,{map:u,hash:r,transfer:o})}get print(){ee("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,Hm)}get modifiedIds(){return Dt(this,"modifiedIds",{ids:new Set,hash:""})}}Hm=new WeakMap;var fd;class aj{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){_(this,fd,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),c(this,fd).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||c(this,fd).has(t.loadedName))){if(te(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:o,style:u}=t,h=new FontFace(r,o,u);this.addNativeFontFace(h);try{await h.load(),c(this,fd).add(r),n==null||n(t)}catch{Ct(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(h)}return}ee("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw Ct(`Failed to load font '${n.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Dt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Dt(this,"isSyncFontLoadingSupported",ri||gn.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(te(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:e,callback:t};return n.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Dt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(N,L){return N.charCodeAt(L)<<24|N.charCodeAt(L+1)<<16|N.charCodeAt(L+2)<<8|N.charCodeAt(L+3)&255}function r(N,L,I,k){const j=N.substring(0,L),W=N.substring(L+I);return j+k+W}let o,u;const h=this._document.createElement("canvas");h.width=1,h.height=1;const f=h.getContext("2d");let p=0;function m(N,L){if(++p>30){Ct("Load test font never loaded."),L();return}if(f.font="30px "+N,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){L();return}setTimeout(m.bind(null,N,L))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=r(b,976,y.length,y);const S=16,w=1482184792;let x=n(b,S);for(o=0,u=y.length-3;o<u;o+=4)x=x-w+n(y,o)|0;o<y.length&&(x=x-w+n(y+"XXX",o)|0),b=r(b,S,4,Hz(x));const C=`url(data:font/opentype;base64,${btoa(b)});`,O=`@font-face {font-family:"${y}";src:${C}}`;this.insertRule(O);const M=this._document.createElement("div");M.style.visibility="hidden",M.style.width=M.style.height="10px",M.style.position="absolute",M.style.top=M.style.left="0px";for(const N of[t.loadedName,y]){const L=this._document.createElement("span");L.textContent="Hi",L.style.fontFamily=N,M.append(L)}this._document.body.append(M),m(y,()=>{M.remove(),e.complete()})}}fd=new WeakMap;var fe;class rj{constructor(t,e=null,n,r){_(this,fe);this.compiledGlyphs=Object.create(null),E(this,fe,t),this._inspectFont=e,n&&Object.assign(this,n),r&&(this.charProcOperatorList=r)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let r;try{r=t.get(n)}catch(u){Ct(`getPathGenerator - ignoring character: "${u}".`)}const o=wI(r==null?void 0:r.path);return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=o}get black(){return c(this,fe).black}get bold(){return c(this,fe).bold}get disableFontFace(){return c(this,fe).disableFontFace??!1}set disableFontFace(t){Dt(this,"disableFontFace",!!t)}get fontExtraProperties(){return c(this,fe).fontExtraProperties??!1}get isInvalidPDFjsFont(){return c(this,fe).isInvalidPDFjsFont}get isType3Font(){return c(this,fe).isType3Font}get italic(){return c(this,fe).italic}get missingFile(){return c(this,fe).missingFile}get remeasure(){return c(this,fe).remeasure}get vertical(){return c(this,fe).vertical}get ascent(){return c(this,fe).ascent}get defaultWidth(){return c(this,fe).defaultWidth}get descent(){return c(this,fe).descent}get bbox(){return c(this,fe).bbox}set bbox(t){Dt(this,"bbox",t)}get fontMatrix(){return c(this,fe).fontMatrix}get fallbackName(){return c(this,fe).fallbackName}get loadedName(){return c(this,fe).loadedName}get mimetype(){return c(this,fe).mimetype}get name(){return c(this,fe).name}get data(){return c(this,fe).data}clearData(){c(this,fe).clearData()}get cssFontInfo(){return c(this,fe).cssFontInfo}get systemFontInfo(){return c(this,fe).systemFontInfo}get defaultVMetrics(){return c(this,fe).defaultVMetrics}}fe=new WeakMap;var pd,md,Vm,gd,ub;const Fh=class Fh{constructor(t){_(this,gd);_(this,pd);_(this,md);_(this,Vm);E(this,pd,t),E(this,md,new DataView(c(this,pd))),E(this,Vm,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let r=0;for(const p of Fh.strings){const m=e.encode(t[p]);n[p]=m,r+=4+m.length}const o=new ArrayBuffer(r),u=new Uint8Array(o),h=new DataView(o);let f=0;for(const p of Fh.strings){const m=n[p],y=m.length;h.setUint32(f,y),u.set(m,f+4),f+=4+y}return te(f===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}get fontFamily(){return D(this,gd,ub).call(this,0)}get fontWeight(){return D(this,gd,ub).call(this,1)}get italicAngle(){return D(this,gd,ub).call(this,2)}};pd=new WeakMap,md=new WeakMap,Vm=new WeakMap,gd=new WeakSet,ub=function(t){te(t<Fh.strings.length,"Invalid string index");let e=0;for(let r=0;r<t;r++)e+=c(this,md).getUint32(e)+4;const n=c(this,md).getUint32(e);return c(this,Vm).decode(new Uint8Array(c(this,pd),e+4,n))},$(Fh,"strings",["fontFamily","fontWeight","italicAngle"]);let Zb=Fh;var ul,Na,kc,Uc,Bp;const Hh=class Hh{constructor(t){_(this,Uc);_(this,ul);_(this,Na);_(this,kc);E(this,ul,t),E(this,Na,new DataView(c(this,ul))),E(this,kc,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let r=0;for(const b of Hh.strings){const A=e.encode(t[b]);n[b]=A,r+=4+A.length}r+=4;let o,u,h=1+r;t.style&&(o=e.encode(t.style.style),u=e.encode(t.style.weight),h+=4+o.length+4+u.length);const f=new ArrayBuffer(h),p=new Uint8Array(f),m=new DataView(f);let y=0;m.setUint8(y++,t.guessFallback?1:0),m.setUint32(y,0),y+=4,r=0;for(const b of Hh.strings){const A=n[b],S=A.length;r+=4+S,m.setUint32(y,S),p.set(A,y+4),y+=4+S}return m.setUint32(y-r-4,r),t.style&&(m.setUint32(y,o.length),p.set(o,y+4),y+=4+o.length,m.setUint32(y,u.length),p.set(u,y+4),y+=4+u.length),te(y<=f.byteLength,"SubstitionInfo.write: Buffer overflow"),f.transferToFixedLength(y)}get guessFallback(){return c(this,Na).getUint8(0)!==0}get css(){return D(this,Uc,Bp).call(this,0)}get loadedName(){return D(this,Uc,Bp).call(this,1)}get baseFontName(){return D(this,Uc,Bp).call(this,2)}get src(){return D(this,Uc,Bp).call(this,3)}get style(){let t=1;t+=4+c(this,Na).getUint32(t);const e=c(this,Na).getUint32(t),n=c(this,kc).decode(new Uint8Array(c(this,ul),t+4,e));t+=4+e;const r=c(this,Na).getUint32(t),o=c(this,kc).decode(new Uint8Array(c(this,ul),t+4,r));return{style:n,weight:o}}};ul=new WeakMap,Na=new WeakMap,kc=new WeakMap,Uc=new WeakSet,Bp=function(t){te(t<Hh.strings.length,"Invalid string index");let e=5;for(let r=0;r<t;r++)e+=c(this,Na).getUint32(e)+4;const n=c(this,Na).getUint32(e);return c(this,kc).decode(new Uint8Array(c(this,ul),e+4,n))},$(Hh,"strings",["css","loadedName","baseFontName","src"]);let Jb=Hh;var yd,bd,vd,Ad,qi,La,zm,pe,Ye,Ws,hb,kp;const It=class It{constructor({data:t,extra:e}){_(this,Ye);_(this,La);_(this,zm);_(this,pe);E(this,La,t),E(this,zm,new TextDecoder),E(this,pe,new DataView(c(this,La))),e&&Object.assign(this,e)}get black(){return D(this,Ye,Ws).call(this,0)}get bold(){return D(this,Ye,Ws).call(this,1)}get disableFontFace(){return D(this,Ye,Ws).call(this,2)}get fontExtraProperties(){return D(this,Ye,Ws).call(this,3)}get isInvalidPDFjsFont(){return D(this,Ye,Ws).call(this,4)}get isType3Font(){return D(this,Ye,Ws).call(this,5)}get italic(){return D(this,Ye,Ws).call(this,6)}get missingFile(){return D(this,Ye,Ws).call(this,7)}get remeasure(){return D(this,Ye,Ws).call(this,8)}get vertical(){return D(this,Ye,Ws).call(this,9)}get ascent(){return D(this,Ye,hb).call(this,0)}get defaultWidth(){return D(this,Ye,hb).call(this,1)}get descent(){return D(this,Ye,hb).call(this,2)}get bbox(){let t=c(It,bd);if(c(this,pe).getUint8(t)===0)return;t+=1;const n=[];for(let r=0;r<4;r++)n.push(c(this,pe).getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=c(It,vd);if(c(this,pe).getUint8(t)===0)return;t+=1;const n=[];for(let r=0;r<6;r++)n.push(c(this,pe).getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=c(It,Ad);if(c(this,pe).getUint8(t)===0)return;t+=1;const n=[];for(let r=0;r<3;r++)n.push(c(this,pe).getInt16(t,!0)),t+=2;return n}get fallbackName(){return D(this,Ye,kp).call(this,0)}get loadedName(){return D(this,Ye,kp).call(this,1)}get mimetype(){return D(this,Ye,kp).call(this,2)}get name(){return D(this,Ye,kp).call(this,3)}get data(){let t=c(It,qi);const e=c(this,pe).getUint32(t);t+=4+e;const n=c(this,pe).getUint32(t);t+=4+n;const r=c(this,pe).getUint32(t);t+=4+r;const o=c(this,pe).getUint32(t);if(o!==0)return new Uint8Array(c(this,La),t+4,o)}clearData(){let t=c(It,qi);const e=c(this,pe).getUint32(t);t+=4+e;const n=c(this,pe).getUint32(t);t+=4+n;const r=c(this,pe).getUint32(t);t+=4+r;const o=c(this,pe).getUint32(t);new Uint8Array(c(this,La),t+4,o).fill(0),c(this,pe).setUint32(t,0)}get cssFontInfo(){let t=c(It,qi);const e=c(this,pe).getUint32(t);t+=4+e;const n=c(this,pe).getUint32(t);t+=4+n;const r=c(this,pe).getUint32(t);if(r===0)return null;const o=new Uint8Array(r);return o.set(new Uint8Array(c(this,La),t+4,r)),new Zb(o.buffer)}get systemFontInfo(){let t=c(It,qi);const e=c(this,pe).getUint32(t);t+=4+e;const n=c(this,pe).getUint32(t);if(n===0)return null;const r=new Uint8Array(n);return r.set(new Uint8Array(c(this,La),t+4,n)),new Jb(r.buffer)}static write(t){const e=t.systemFontInfo?Jb.write(t.systemFontInfo):null,n=t.cssFontInfo?Zb.write(t.cssFontInfo):null,r=new TextEncoder,o={};let u=0;for(const w of It.strings)o[w]=r.encode(t[w]),u+=4+o[w].length;const h=c(It,qi)+4+u+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),f=new ArrayBuffer(h),p=new Uint8Array(f),m=new DataView(f);let y=0;const b=It.bools.length;let A=0,S=0;for(let w=0;w<b;w++){const x=t[It.bools[w]];A|=(x===void 0?0:x?2:1)<<S,S+=2,(S===8||w===b-1)&&(m.setUint8(y++,A),A=0,S=0)}te(y===c(It,yd),"FontInfo.write: Boolean properties offset mismatch");for(const w of It.numbers)m.setFloat64(y,t[w]),y+=8;if(te(y===c(It,bd),"FontInfo.write: Number properties offset mismatch"),t.bbox){m.setUint8(y++,4);for(const w of t.bbox)m.setInt16(y,w,!0),y+=2}else m.setUint8(y++,0),y+=8;if(te(y===c(It,vd),"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){m.setUint8(y++,6);for(const w of t.fontMatrix)m.setFloat64(y,w,!0),y+=8}else m.setUint8(y++,0),y+=48;if(te(y===c(It,Ad),"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){m.setUint8(y++,1);for(const w of t.defaultVMetrics)m.setInt16(y,w,!0),y+=2}else m.setUint8(y++,0),y+=6;te(y===c(It,qi),"FontInfo.write: DefaultVMetrics properties offset mismatch"),m.setUint32(c(It,qi),0),y+=4;for(const w of It.strings){const x=o[w],C=x.length;m.setUint32(y,C),p.set(x,y+4),y+=4+C}if(m.setUint32(c(It,qi),y-c(It,qi)-4),!e)m.setUint32(y,0),y+=4;else{const w=e.byteLength;m.setUint32(y,w),te(y+4+w<=f.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),p.set(new Uint8Array(e),y+4),y+=4+w}if(!n)m.setUint32(y,0),y+=4;else{const w=n.byteLength;m.setUint32(y,w),te(y+4+w<=f.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),p.set(new Uint8Array(n),y+4),y+=4+w}return t.data===void 0?(m.setUint32(y,0),y+=4):(m.setUint32(y,t.data.length),p.set(t.data,y+4),y+=4+t.data.length),te(y<=f.byteLength,"FontInfo.write: Buffer overflow"),f.transferToFixedLength(y)}};yd=new WeakMap,bd=new WeakMap,vd=new WeakMap,Ad=new WeakMap,qi=new WeakMap,La=new WeakMap,zm=new WeakMap,pe=new WeakMap,Ye=new WeakSet,Ws=function(t){te(t<It.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,r=c(this,pe).getUint8(e)>>n&3;return r===0?void 0:r===2},hb=function(t){return te(t<It.numbers.length,"Invalid number index"),c(this,pe).getFloat64(c(It,yd)+t*8)},kp=function(t){te(t<It.strings.length,"Invalid string index");let e=c(It,qi)+4;for(let o=0;o<t;o++)e+=c(this,pe).getUint32(e)+4;const n=c(this,pe).getUint32(e),r=new Uint8Array(n);return r.set(new Uint8Array(c(this,La),e+4,n)),c(this,zm).decode(r)},$(It,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),$(It,"numbers",["ascent","defaultWidth","descent"]),$(It,"strings",["fallbackName","loadedName","mimetype","name"]),_(It,yd,Math.ceil(It.bools.length*2/8)),_(It,bd,c(It,yd)+It.numbers.length*8),_(It,vd,c(It,bd)+1+8),_(It,Ad,c(It,vd)+1+48),_(It,qi,c(It,Ad)+1+6);let zT=It;var jm,Gm,Ym,Xm,qm,Km,$m,Wm;const Ee=class Ee{constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,n=null,r=[],o=[],u=[],h=[],f=null,p=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,n=t[2],u=t[3],e===1?r.push(...t[4],...t[5]):r.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,f=t[1],r=t[2],o=t[3],h=t[4]||[],n=t[6],p=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const m=Math.floor(r.length/2),y=Math.floor(o.length/3),b=u.length,A=h.length;let S=0;for(const L of h)S+=1,S=Math.ceil(S/4)*4,S+=4+L.coords.length*4,S+=4+L.colors.length*4,L.verticesPerRow!==void 0&&(S+=4);const w=20+m*8+y*3+b*8+(n?16:0)+(p?3:0)+S,x=new ArrayBuffer(w),C=new DataView(x),O=new Uint8Array(x);C.setUint8(c(Ee,jm),e),C.setUint8(c(Ee,Gm),n?1:0),C.setUint8(c(Ee,Ym),p?1:0),C.setUint8(c(Ee,Xm),f),C.setUint32(c(Ee,qm),m,!0),C.setUint32(c(Ee,Km),y,!0),C.setUint32(c(Ee,$m),b,!0),C.setUint32(c(Ee,Wm),A,!0);let M=20;new Float32Array(x,M,m*2).set(r),M+=m*8,O.set(o,M),M+=y*3;for(const[L,I]of u)C.setFloat32(M,L,!0),M+=4,C.setUint32(M,parseInt(I.slice(1),16),!0),M+=4;if(n)for(const L of n)C.setFloat32(M,L,!0),M+=4;p&&(O.set(p,M),M+=3);for(let L=0;L<h.length;L++){const I=h[L];C.setUint8(M,I.type),M+=1,M=Math.ceil(M/4)*4,C.setUint32(M,I.coords.length,!0),M+=4,new Int32Array(x,M,I.coords.length).set(I.coords),M+=I.coords.length*4,C.setUint32(M,I.colors.length,!0),M+=4,new Int32Array(x,M,I.colors.length).set(I.colors),M+=I.colors.length*4,I.verticesPerRow!==void 0&&(C.setUint32(M,I.verticesPerRow,!0),M+=4)}return x}getIR(){const t=this.view,e=this.data[c(Ee,jm)],n=!!this.data[c(Ee,Gm)],r=!!this.data[c(Ee,Ym)],o=t.getUint32(c(Ee,qm),!0),u=t.getUint32(c(Ee,Km),!0),h=t.getUint32(c(Ee,$m),!0),f=t.getUint32(c(Ee,Wm),!0);let p=20;const m=new Float32Array(this.buffer,p,o*2);p+=o*8;const y=new Uint8Array(this.buffer,p,u*3);p+=u*3;const b=[];for(let x=0;x<h;++x){const C=t.getFloat32(p,!0);p+=4;const O=t.getUint32(p,!0);p+=4,b.push([C,`#${O.toString(16).padStart(6,"0")}`])}let A=null;if(n){A=[];for(let x=0;x<4;++x)A.push(t.getFloat32(p,!0)),p+=4}let S=null;r&&(S=new Uint8Array(this.buffer,p,3),p+=3);const w=[];for(let x=0;x<f;++x){const C=t.getUint8(p);p+=1,p=Math.ceil(p/4)*4;const O=t.getUint32(p,!0);p+=4;const M=new Int32Array(this.buffer,p,O);p+=O*4;const N=t.getUint32(p,!0);p+=4;const L=new Int32Array(this.buffer,p,N);p+=N*4;const I={type:C,coords:M,colors:L};C===AT.LATTICE&&(I.verticesPerRow=t.getUint32(p,!0),p+=4),w.push(I)}if(e===1)return["RadialAxial","axial",A,b,Array.from(m.slice(0,2)),Array.from(m.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",A,b,[m[0],m[1]],[m[3],m[4]],m[2],m[5]];if(e===3){const x=this.data[c(Ee,Xm)];let C=null;if(m.length>0){let O=m[0],M=m[0],N=m[1],L=m[1];for(let I=0;I<m.length;I+=2){const k=m[I],j=m[I+1];O=O>k?k:O,N=N>j?j:N,M=M<k?k:M,L=L<j?j:L}C=[O,N,M,L]}return["Mesh",x,m,y,w,C,A,S]}throw new Error(`Unsupported pattern kind: ${e}`)}};jm=new WeakMap,Gm=new WeakMap,Ym=new WeakMap,Xm=new WeakMap,qm=new WeakMap,Km=new WeakMap,$m=new WeakMap,Wm=new WeakMap,_(Ee,jm,0),_(Ee,Gm,1),_(Ee,Ym,2),_(Ee,Xm,3),_(Ee,qm,4),_(Ee,Km,8),_(Ee,$m,12),_(Ee,Wm,16);let jT=Ee;var Ed;class oj{constructor(t){_(this,Ed);E(this,Ed,t)}static write(t){let e,n;return gn.isFloat16ArraySupported?(n=new ArrayBuffer(t.length*2),e=new Float16Array(n)):(n=new ArrayBuffer(t.length*4),e=new Float32Array(n)),e.set(t),n}get path(){return gn.isFloat16ArraySupported?new Float16Array(c(this,Ed)):new Float32Array(c(this,Ed))}}Ed=new WeakMap;function lj(s){if(s instanceof URL)return s.href;if(typeof s=="string"){if(ri)return s;const t=URL.parse(s,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function cj(s){if(ri&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return Bv(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s==null?void 0:s.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function j0(s){if(typeof s!="string")return null;if(s.endsWith("/"))return s;throw new Error(`Invalid factory url: "${s}" must include trailing slash.`)}const GT=s=>typeof s=="object"&&Number.isInteger(s==null?void 0:s.num)&&s.num>=0&&Number.isInteger(s==null?void 0:s.gen)&&s.gen>=0,uj=s=>typeof s=="object"&&typeof(s==null?void 0:s.name)=="string",hj=Yz.bind(null,GT,uj);var Lr,pv;class dj{constructor(){_(this,Lr,new Map);_(this,pv,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};c(this,pv).then(()=>{for(const[r]of c(this,Lr))r.call(this,n)})}addEventListener(t,e,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:o}=n;if(o.aborted){Ct("LoopbackPort - cannot use an `aborted` signal.");return}const u=()=>this.removeEventListener(t,e);r=()=>o.removeEventListener("abort",u),o.addEventListener("abort",u)}c(this,Lr).set(e,r)}removeEventListener(t,e){const n=c(this,Lr).get(e);n==null||n(),c(this,Lr).delete(e)}terminate(){for(const[,t]of c(this,Lr))t==null||t();c(this,Lr).clear()}}Lr=new WeakMap,pv=new WeakMap;const G0={DATA:1,ERROR:2},sn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function XO(){}function Ai(s){if(s instanceof Ul||s instanceof ET||s instanceof UO||s instanceof Kb||s instanceof kS)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||ee('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new Ul(s.message);case"InvalidPDFException":return new ET(s.message);case"PasswordException":return new UO(s.message,s.code);case"ResponseException":return new Kb(s.message,s.status,s.missing);case"UnknownErrorException":return new kS(s.message,s.details)}return new kS(s.message,s.toString())}var Sd,js,l2,c2,u2,db;class Up{constructor(t,e,n){_(this,js);_(this,Sd,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",D(this,js,l2).bind(this),{signal:c(this,Sd).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},n)}catch(u){o.reject(u)}return o.promise}sendWithStream(t,e,n,r){const o=this.streamId++,u=this.sourceName,h=this.targetName,f=this.comObj;return new ReadableStream({start:p=>{const m=Promise.withResolvers();return this.streamControllers[o]={controller:p,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:u,targetName:h,action:t,streamId:o,data:e,desiredSize:p.desiredSize},r),m.promise},pull:p=>{const m=Promise.withResolvers();return this.streamControllers[o].pullCall=m,f.postMessage({sourceName:u,targetName:h,stream:sn.PULL,streamId:o,desiredSize:p.desiredSize}),m.promise},cancel:p=>{te(p instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[o].cancelCall=m,this.streamControllers[o].isClosed=!0,f.postMessage({sourceName:u,targetName:h,stream:sn.CANCEL,streamId:o,reason:Ai(p)}),m.promise}},n)}destroy(){var t;(t=c(this,Sd))==null||t.abort(),E(this,Sd,null)}}Sd=new WeakMap,js=new WeakSet,l2=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){D(this,js,u2).call(this,t);return}if(t.callback){const n=t.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===G0.DATA)r.resolve(t.data);else if(t.callback===G0.ERROR)r.reject(Ai(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,r=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(u){o.postMessage({sourceName:n,targetName:r,callback:G0.DATA,callbackId:t.callbackId,data:u})},function(u){o.postMessage({sourceName:n,targetName:r,callback:G0.ERROR,callbackId:t.callbackId,reason:Ai(u)})});return}if(t.streamId){D(this,js,c2).call(this,t);return}e(t.data)},c2=function(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,o=this.comObj,u=this,h=this.actionHandler[t.action],f={enqueue(p,m=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=m,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:r,stream:sn.ENQUEUE,streamId:e,chunk:p},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:sn.CLOSE,streamId:e}),delete u.streamSinks[e])},error(p){te(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:sn.ERROR,streamId:e,reason:Ai(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[e]=f,Promise.try(h,t.data,f).then(function(){o.postMessage({sourceName:n,targetName:r,stream:sn.START_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:n,targetName:r,stream:sn.START_COMPLETE,streamId:e,reason:Ai(p)})})},u2=function(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,o=this.comObj,u=this.streamControllers[e],h=this.streamSinks[e];switch(t.stream){case sn.START_COMPLETE:t.success?u.startCall.resolve():u.startCall.reject(Ai(t.reason));break;case sn.PULL_COMPLETE:t.success?u.pullCall.resolve():u.pullCall.reject(Ai(t.reason));break;case sn.PULL:if(!h){o.postMessage({sourceName:n,targetName:r,stream:sn.PULL_COMPLETE,streamId:e,success:!0});break}h.desiredSize<=0&&t.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=t.desiredSize,Promise.try(h.onPull||XO).then(function(){o.postMessage({sourceName:n,targetName:r,stream:sn.PULL_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:n,targetName:r,stream:sn.PULL_COMPLETE,streamId:e,reason:Ai(p)})});break;case sn.ENQUEUE:if(te(u,"enqueue should have stream controller"),u.isClosed)break;u.controller.enqueue(t.chunk);break;case sn.CLOSE:if(te(u,"close should have stream controller"),u.isClosed)break;u.isClosed=!0,u.controller.close(),D(this,js,db).call(this,u,e);break;case sn.ERROR:te(u,"error should have stream controller"),u.controller.error(Ai(t.reason)),D(this,js,db).call(this,u,e);break;case sn.CANCEL_COMPLETE:t.success?u.cancelCall.resolve():u.cancelCall.reject(Ai(t.reason)),D(this,js,db).call(this,u,e);break;case sn.CANCEL:if(!h)break;const f=Ai(t.reason);Promise.try(h.onCancel||XO,f).then(function(){o.postMessage({sourceName:n,targetName:r,stream:sn.CANCEL_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:n,targetName:r,stream:sn.CANCEL_COMPLETE,streamId:e,reason:Ai(p)})}),h.sinkCapability.reject(f),h.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},db=async function(t,e){var n,r,o;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(r=t.pullCall)==null?void 0:r.promise,(o=t.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[e]};var Qm;class h2{constructor({enableHWA:t=!1}){_(this,Qm,!1);E(this,Qm,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!c(this,Qm)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){ee("Abstract method `_createCanvas` called.")}}Qm=new WeakMap;class fj extends h2{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class d2{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){ee("Abstract method `_fetch` called.")}}class qO extends d2{async _fetch(t){const e=await hy(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Bv(e)}}class f2{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,r,o){return"none"}destroy(t=!1){}}var Fc,Td,Ir,Pr,Kn,Hc,Vc,ct,Gn,Fp,_h,fb,wh,p2,YT,xh,Hp,Vp,XT,zp;class pj extends f2{constructor({docId:e,ownerDocument:n=globalThis.document}){super();_(this,ct);_(this,Fc);_(this,Td);_(this,Ir);_(this,Pr);_(this,Kn);_(this,Hc);_(this,Vc,0);E(this,Pr,e),E(this,Kn,n)}addFilter(e){if(!e)return"none";let n=c(this,ct,Gn).get(e);if(n)return n;const[r,o,u]=D(this,ct,fb).call(this,e),h=e.length===1?r:`${r}${o}${u}`;if(n=c(this,ct,Gn).get(h),n)return c(this,ct,Gn).set(e,n),n;const f=`g_${c(this,Pr)}_transfer_map_${un(this,Vc)._++}`,p=D(this,ct,wh).call(this,f);c(this,ct,Gn).set(e,p),c(this,ct,Gn).set(h,p);const m=D(this,ct,xh).call(this,f);return D(this,ct,Vp).call(this,r,o,u,m),p}addHCMFilter(e,n){var S;const r=`${e}-${n}`,o="base";let u=c(this,ct,Fp).get(o);if((u==null?void 0:u.key)===r||(u?((S=u.filter)==null||S.remove(),u.key=r,u.url="none",u.filter=null):(u={key:r,url:"none",filter:null},c(this,ct,Fp).set(o,u)),!e||!n))return u.url;const h=D(this,ct,zp).call(this,e);e=ot.makeHexColor(...h);const f=D(this,ct,zp).call(this,n);if(n=ot.makeHexColor(...f),c(this,ct,_h).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return u.url;const p=new Array(256);for(let w=0;w<=255;w++){const x=w/255;p[w]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}const m=p.join(","),y=`g_${c(this,Pr)}_hcm_filter`,b=u.filter=D(this,ct,xh).call(this,y);D(this,ct,Vp).call(this,m,m,m,b),D(this,ct,YT).call(this,b);const A=(w,x)=>{const C=h[w]/255,O=f[w]/255,M=new Array(x+1);for(let N=0;N<=x;N++)M[N]=C+N/x*(O-C);return M.join(",")};return D(this,ct,Vp).call(this,A(0,5),A(1,5),A(2,5),b),u.url=D(this,ct,wh).call(this,y),u.url}addAlphaFilter(e){let n=c(this,ct,Gn).get(e);if(n)return n;const[r]=D(this,ct,fb).call(this,[e]),o=`alpha_${r}`;if(n=c(this,ct,Gn).get(o),n)return c(this,ct,Gn).set(e,n),n;const u=`g_${c(this,Pr)}_alpha_map_${un(this,Vc)._++}`,h=D(this,ct,wh).call(this,u);c(this,ct,Gn).set(e,h),c(this,ct,Gn).set(o,h);const f=D(this,ct,xh).call(this,u);return D(this,ct,XT).call(this,r,f),h}addLuminosityFilter(e){let n=c(this,ct,Gn).get(e||"luminosity");if(n)return n;let r,o;if(e?([r]=D(this,ct,fb).call(this,[e]),o=`luminosity_${r}`):o="luminosity",n=c(this,ct,Gn).get(o),n)return c(this,ct,Gn).set(e,n),n;const u=`g_${c(this,Pr)}_luminosity_map_${un(this,Vc)._++}`,h=D(this,ct,wh).call(this,u);c(this,ct,Gn).set(e,h),c(this,ct,Gn).set(o,h);const f=D(this,ct,xh).call(this,u);return D(this,ct,p2).call(this,f),e&&D(this,ct,XT).call(this,r,f),h}addHighlightHCMFilter(e,n,r,o,u){var O;const h=`${n}-${r}-${o}-${u}`;let f=c(this,ct,Fp).get(e);if((f==null?void 0:f.key)===h||(f?((O=f.filter)==null||O.remove(),f.key=h,f.url="none",f.filter=null):(f={key:h,url:"none",filter:null},c(this,ct,Fp).set(e,f)),!n||!r))return f.url;const[p,m]=[n,r].map(D(this,ct,zp).bind(this));let y=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),b=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[A,S]=[o,u].map(D(this,ct,zp).bind(this));b<y&&([y,b,A,S]=[b,y,S,A]),c(this,ct,_h).style.color="";const w=(M,N,L)=>{const I=new Array(256),k=(b-y)/L,j=M/255,W=(N-M)/(255*L);let nt=0;for(let et=0;et<=L;et++){const ht=Math.round(y+et*k),mt=j+et*W;for(let gt=nt;gt<=ht;gt++)I[gt]=mt;nt=ht+1}for(let et=nt;et<256;et++)I[et]=I[nt-1];return I.join(",")},x=`g_${c(this,Pr)}_hcm_${e}_filter`,C=f.filter=D(this,ct,xh).call(this,x);return D(this,ct,YT).call(this,C),D(this,ct,Vp).call(this,w(A[0],S[0],5),w(A[1],S[1],5),w(A[2],S[2],5),C),f.url=D(this,ct,wh).call(this,x),f.url}destroy(e=!1){var n,r,o,u;e&&((n=c(this,Hc))!=null&&n.size)||((r=c(this,Ir))==null||r.parentNode.parentNode.remove(),E(this,Ir,null),(o=c(this,Td))==null||o.clear(),E(this,Td,null),(u=c(this,Hc))==null||u.clear(),E(this,Hc,null),E(this,Vc,0))}}Fc=new WeakMap,Td=new WeakMap,Ir=new WeakMap,Pr=new WeakMap,Kn=new WeakMap,Hc=new WeakMap,Vc=new WeakMap,ct=new WeakSet,Gn=function(){return c(this,Td)||E(this,Td,new Map)},Fp=function(){return c(this,Hc)||E(this,Hc,new Map)},_h=function(){if(!c(this,Ir)){const e=c(this,Kn).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=c(this,Kn).createElementNS(mr,"svg");r.setAttribute("width",0),r.setAttribute("height",0),E(this,Ir,c(this,Kn).createElementNS(mr,"defs")),e.append(r),r.append(c(this,Ir)),c(this,Kn).body.append(e)}return c(this,Ir)},fb=function(e){if(e.length===1){const p=e[0],m=new Array(256);for(let b=0;b<256;b++)m[b]=p[b]/255;const y=m.join(",");return[y,y,y]}const[n,r,o]=e,u=new Array(256),h=new Array(256),f=new Array(256);for(let p=0;p<256;p++)u[p]=n[p]/255,h[p]=r[p]/255,f[p]=o[p]/255;return[u.join(","),h.join(","),f.join(",")]},wh=function(e){if(c(this,Fc)===void 0){E(this,Fc,"");const n=c(this,Kn).URL;n!==c(this,Kn).baseURI&&(kv(n)?Ct('#createUrl: ignore "data:"-URL for performance reasons.'):E(this,Fc,EI(n,"")))}return`url(${c(this,Fc)}#${e})`},p2=function(e){const n=c(this,Kn).createElementNS(mr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},YT=function(e){const n=c(this,Kn).createElementNS(mr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},xh=function(e){const n=c(this,Kn).createElementNS(mr,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),c(this,ct,_h).append(n),n},Hp=function(e,n,r){const o=c(this,Kn).createElementNS(mr,n);o.setAttribute("type","discrete"),o.setAttribute("tableValues",r),e.append(o)},Vp=function(e,n,r,o){const u=c(this,Kn).createElementNS(mr,"feComponentTransfer");o.append(u),D(this,ct,Hp).call(this,u,"feFuncR",e),D(this,ct,Hp).call(this,u,"feFuncG",n),D(this,ct,Hp).call(this,u,"feFuncB",r)},XT=function(e,n){const r=c(this,Kn).createElementNS(mr,"feComponentTransfer");n.append(r),D(this,ct,Hp).call(this,r,"feFuncA",e)},zp=function(e){return c(this,ct,_h).style.color=e,fy(getComputedStyle(c(this,ct,_h)).getPropertyValue("color"))};class m2{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){ee("Abstract method `_fetch` called.")}}class KO extends m2{async _fetch(t){const e=await hy(t,"arraybuffer");return new Uint8Array(e)}}class g2{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){ee("Abstract method `_fetch` called.")}}class $O extends g2{async _fetch(t){const e=await hy(t,"arraybuffer");return new Uint8Array(e)}}ri&&Ct("Please use the `legacy` build in Node.js environments.");async function L1(s){const e=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(e)}class mj extends f2{}class gj extends h2{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class yj extends d2{async _fetch(t){return L1(t)}}class bj extends m2{async _fetch(t){return L1(t)}}class vj extends g2{async _fetch(t){return L1(t)}}const vh="__forcedDependency",{floor:WO,ceil:QO}=Math;function Y0(s,t,e,n,r,o){s[t*4+0]=Math.min(s[t*4+0],e),s[t*4+1]=Math.min(s[t*4+1],n),s[t*4+2]=Math.max(s[t*4+2],r),s[t*4+3]=Math.max(s[t*4+3],o)}const qT=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var _d,hl;class Aj{constructor(t,e){_(this,_d);_(this,hl);E(this,_d,t),E(this,hl,e)}get length(){return c(this,_d).length}isEmpty(t){return c(this,_d)[t]===qT}minX(t){return c(this,hl)[t*4+0]/256}minY(t){return c(this,hl)[t*4+1]/256}maxX(t){return(c(this,hl)[t*4+2]+1)/256}maxY(t){return(c(this,hl)[t*4+3]+1)/256}}_d=new WeakMap,hl=new WeakMap;const X0=(s,t)=>{if(!s)return;let e=s.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},s.set(t,e)),e};var Ti,_i,zc,na,jc,Br,oe,me,kr,wi,Zm,wd,Gc,Yc,Ur,$n,Ia,Jm,KT;class Ej{constructor(t,e,n=!1){_(this,Jm);_(this,Ti,{__proto__:null});_(this,_i,{__proto__:null,transform:[],moveText:[],sameLineText:[],[vh]:[]});_(this,zc,new Map);_(this,na,[]);_(this,jc,[]);_(this,Br,[[1,0,0,1,0,0]]);_(this,oe,[-1/0,-1/0,1/0,1/0]);_(this,me,new Float64Array([1/0,1/0,-1/0,-1/0]));_(this,kr,-1);_(this,wi,new Set);_(this,Zm,new Map);_(this,wd,new Map);_(this,Gc);_(this,Yc);_(this,Ur);_(this,$n);_(this,Ia);E(this,Gc,t.width),E(this,Yc,t.height),D(this,Jm,KT).call(this,e),n&&E(this,Ia,new Map)}growOperationsCount(t){t>=c(this,$n).length&&D(this,Jm,KT).call(this,t,c(this,$n))}save(t){return E(this,Ti,{__proto__:c(this,Ti)}),E(this,_i,{__proto__:c(this,_i),transform:{__proto__:c(this,_i).transform},moveText:{__proto__:c(this,_i).moveText},sameLineText:{__proto__:c(this,_i).sameLineText},[vh]:{__proto__:c(this,_i)[vh]}}),E(this,oe,{__proto__:c(this,oe)}),c(this,na).push(t),this}restore(t){var r;const e=Object.getPrototypeOf(c(this,Ti));if(e===null)return this;E(this,Ti,e),E(this,_i,Object.getPrototypeOf(c(this,_i))),E(this,oe,Object.getPrototypeOf(c(this,oe)));const n=c(this,na).pop();return n!==void 0&&((r=X0(c(this,Ia),t))==null||r.dependencies.add(n),c(this,$n)[t]=c(this,$n)[n]),this}recordOpenMarker(t){return c(this,na).push(t),this}getOpenMarker(){return c(this,na).length===0?null:c(this,na).at(-1)}recordCloseMarker(t){var n;const e=c(this,na).pop();return e!==void 0&&((n=X0(c(this,Ia),t))==null||n.dependencies.add(e),c(this,$n)[t]=c(this,$n)[e]),this}beginMarkedContent(t){return c(this,jc).push(t),this}endMarkedContent(t){var n;const e=c(this,jc).pop();return e!==void 0&&((n=X0(c(this,Ia),t))==null||n.dependencies.add(e),c(this,$n)[t]=c(this,$n)[e]),this}pushBaseTransform(t){return c(this,Br).push(ot.multiplyByDOMMatrix(c(this,Br).at(-1),t.getTransform())),this}popBaseTransform(){return c(this,Br).length>1&&c(this,Br).pop(),this}recordSimpleData(t,e){return c(this,Ti)[t]=e,this}recordIncrementalData(t,e){return c(this,_i)[t].push(e),this}resetIncrementalData(t,e){return c(this,_i)[t].length=0,this}recordNamedData(t,e){return c(this,zc).set(t,e),this}recordSimpleDataFromNamed(t,e,n){c(this,Ti)[t]=c(this,zc).get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(vh,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in c(this,Ti)&&this.recordFutureForcedDependency(e,c(this,Ti)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of c(this,wi))this.recordFutureForcedDependency(vh,t);return this}resetBBox(t){return c(this,kr)!==t&&(E(this,kr,t),c(this,me)[0]=1/0,c(this,me)[1]=1/0,c(this,me)[2]=-1/0,c(this,me)[3]=-1/0),this}recordClipBox(t,e,n,r,o,u){const h=ot.multiplyByDOMMatrix(c(this,Br).at(-1),e.getTransform()),f=[1/0,1/0,-1/0,-1/0];ot.axialAlignedBoundingBox([n,o,r,u],h,f);const p=ot.intersect(c(this,oe),f);return p?(c(this,oe)[0]=p[0],c(this,oe)[1]=p[1],c(this,oe)[2]=p[2],c(this,oe)[3]=p[3]):(c(this,oe)[0]=c(this,oe)[1]=1/0,c(this,oe)[2]=c(this,oe)[3]=-1/0),this}recordBBox(t,e,n,r,o,u){const h=c(this,oe);if(h[0]===1/0)return this;const f=ot.multiplyByDOMMatrix(c(this,Br).at(-1),e.getTransform());if(h[0]===-1/0)return ot.axialAlignedBoundingBox([n,o,r,u],f,c(this,me)),this;const p=[1/0,1/0,-1/0,-1/0];return ot.axialAlignedBoundingBox([n,o,r,u],f,p),c(this,me)[0]=Math.min(c(this,me)[0],Math.max(p[0],h[0])),c(this,me)[1]=Math.min(c(this,me)[1],Math.max(p[1],h[1])),c(this,me)[2]=Math.max(c(this,me)[2],Math.min(p[2],h[2])),c(this,me)[3]=Math.max(c(this,me)[3],Math.min(p[3],h[3])),this}recordCharacterBBox(t,e,n,r=1,o=0,u=0,h){const f=n.bbox;let p,m;if(f&&(p=f[2]!==f[0]&&f[3]!==f[1]&&c(this,wd).get(n),p!==!1&&(m=[0,0,0,0],ot.axialAlignedBoundingBox(f,n.fontMatrix,m),(r!==1||o!==0||u!==0)&&ot.scaleMinMax([r,0,0,-r,o,u],m),p)))return this.recordBBox(t,e,m[0],m[2],m[1],m[3]);if(!h)return this.recordFullPageBBox(t);const y=h();return f&&m&&p===void 0&&(p=m[0]<=o-y.actualBoundingBoxLeft&&m[2]>=o+y.actualBoundingBoxRight&&m[1]<=u-y.actualBoundingBoxAscent&&m[3]>=u+y.actualBoundingBoxDescent,c(this,wd).set(n,p),p)?this.recordBBox(t,e,m[0],m[2],m[1],m[3]):this.recordBBox(t,e,o-y.actualBoundingBoxLeft,o+y.actualBoundingBoxRight,u-y.actualBoundingBoxAscent,u+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return c(this,me)[0]=Math.max(0,c(this,oe)[0]),c(this,me)[1]=Math.max(0,c(this,oe)[1]),c(this,me)[2]=Math.min(c(this,Gc),c(this,oe)[2]),c(this,me)[3]=Math.min(c(this,Yc),c(this,oe)[3]),this}getSimpleIndex(t){return c(this,Ti)[t]}recordDependencies(t,e){const n=c(this,wi),r=c(this,Ti),o=c(this,_i);for(const u of e)u in c(this,Ti)?n.add(r[u]):u in o&&o[u].forEach(n.add,n);return this}recordNamedDependency(t,e){return c(this,zc).has(e)&&c(this,wi).add(c(this,zc).get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[vh]),c(this,Ia)){const n=X0(c(this,Ia),t),{dependencies:r}=n;c(this,wi).forEach(r.add,r),c(this,na).forEach(r.add,r),c(this,jc).forEach(r.add,r),r.delete(t),n.isRenderingOperation=!0}if(c(this,kr)===t){const n=WO(c(this,me)[0]*256/c(this,Gc)),r=WO(c(this,me)[1]*256/c(this,Yc)),o=QO(c(this,me)[2]*256/c(this,Gc)),u=QO(c(this,me)[3]*256/c(this,Yc));Y0(c(this,Ur),t,n,r,o,u);for(const h of c(this,wi))h!==t&&Y0(c(this,Ur),h,n,r,o,u);for(const h of c(this,na))h!==t&&Y0(c(this,Ur),h,n,r,o,u);for(const h of c(this,jc))h!==t&&Y0(c(this,Ur),h,n,r,o,u);e||(c(this,wi).clear(),E(this,kr,-1))}return this}recordShowTextOperation(t,e=!1){const n=Array.from(c(this,wi));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const r of n)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,e=!1){return c(this,kr)===t&&(E(this,kr,-1),c(this,oe)[0]=Math.max(c(this,oe)[0],c(this,me)[0]),c(this,oe)[1]=Math.max(c(this,oe)[1],c(this,me)[1]),c(this,oe)[2]=Math.min(c(this,oe)[2],c(this,me)[2]),c(this,oe)[3]=Math.min(c(this,oe)[3],c(this,me)[3]),e||c(this,wi).clear()),this}_takePendingDependencies(){const t=c(this,wi);return E(this,wi,new Set),t}_extractOperation(t){const e=c(this,Zm).get(t);return c(this,Zm).delete(t),e}_pushPendingDependencies(t){for(const e of t)c(this,wi).add(e)}take(){return c(this,wd).clear(),new Aj(c(this,$n),c(this,Ur))}takeDebugMetadata(){return c(this,Ia)}}Ti=new WeakMap,_i=new WeakMap,zc=new WeakMap,na=new WeakMap,jc=new WeakMap,Br=new WeakMap,oe=new WeakMap,me=new WeakMap,kr=new WeakMap,wi=new WeakMap,Zm=new WeakMap,wd=new WeakMap,Gc=new WeakMap,Yc=new WeakMap,Ur=new WeakMap,$n=new WeakMap,Ia=new WeakMap,Jm=new WeakSet,KT=function(t,e){const n=new ArrayBuffer(t*4);E(this,Ur,new Uint8ClampedArray(n)),E(this,$n,new Uint32Array(n)),e&&e.length>0?(c(this,$n).set(e),c(this,$n).fill(qT,e.length)):c(this,$n).fill(qT)};var ve,Ve,ia,xd,Cd;const V1=class V1{constructor(t,e,n){_(this,ve);_(this,Ve);_(this,ia);_(this,xd,0);_(this,Cd,0);if(t instanceof V1&&c(t,ia)===!!n)return t;E(this,ve,t),E(this,Ve,e),E(this,ia,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(t){return un(this,Cd)._++,c(this,ve).save(c(this,Ve)),this}restore(t){return c(this,Cd)>0&&(c(this,ve).restore(c(this,Ve)),un(this,Cd)._--),this}recordOpenMarker(t){return un(this,xd)._++,this}getOpenMarker(){return c(this,xd)>0?c(this,Ve):c(this,ve).getOpenMarker()}recordCloseMarker(t){return un(this,xd)._--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return c(this,ve).pushBaseTransform(t),this}popBaseTransform(){return c(this,ve).popBaseTransform(),this}recordSimpleData(t,e){return c(this,ve).recordSimpleData(t,c(this,Ve)),this}recordIncrementalData(t,e){return c(this,ve).recordIncrementalData(t,c(this,Ve)),this}resetIncrementalData(t,e){return c(this,ve).resetIncrementalData(t,c(this,Ve)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return c(this,ve).recordSimpleDataFromNamed(t,e,c(this,Ve)),this}recordFutureForcedDependency(t,e){return c(this,ve).recordFutureForcedDependency(t,c(this,Ve)),this}inheritSimpleDataAsFutureForcedDependencies(t){return c(this,ve).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return c(this,ve).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return c(this,ia)||c(this,ve).resetBBox(c(this,Ve)),this}recordClipBox(t,e,n,r,o,u){return c(this,ia)||c(this,ve).recordClipBox(c(this,Ve),e,n,r,o,u),this}recordBBox(t,e,n,r,o,u){return c(this,ia)||c(this,ve).recordBBox(c(this,Ve),e,n,r,o,u),this}recordCharacterBBox(t,e,n,r,o,u,h){return c(this,ia)||c(this,ve).recordCharacterBBox(c(this,Ve),e,n,r,o,u,h),this}recordFullPageBBox(t){return c(this,ia)||c(this,ve).recordFullPageBBox(c(this,Ve)),this}getSimpleIndex(t){return c(this,ve).getSimpleIndex(t)}recordDependencies(t,e){return c(this,ve).recordDependencies(c(this,Ve),e),this}recordNamedDependency(t,e){return c(this,ve).recordNamedDependency(c(this,Ve),e),this}recordOperation(t){return c(this,ve).recordOperation(c(this,Ve),!0),this}recordShowTextOperation(t){return c(this,ve).recordShowTextOperation(c(this,Ve),!0),this}bboxToClipBoxDropOperation(t){return c(this,ia)||c(this,ve).bboxToClipBoxDropOperation(c(this,Ve),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};ve=new WeakMap,Ve=new WeakMap,ia=new WeakMap,xd=new WeakMap,Cd=new WeakMap;let tv=V1;const ws={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Fn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function $T(s,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,n),s.clip(r)}class I1{isModifyingCurrentTransform(){return!1}getPattern(){ee("Abstract method `getPattern` called.")}}class Sj extends I1{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let n,r=this._p0,o=this._p1;if(e&&(r=r.slice(),o=o.slice(),ot.applyTransform(r,e),ot.applyTransform(o,e)),this._type==="axial")n=t.createLinearGradient(r[0],r[1],o[0],o[1]);else if(this._type==="radial"){let u=this._r0,h=this._r1;if(e){const f=new Float32Array(2);ot.singularValueDecompose2dScale(e,f),u*=f[0],h*=f[0]}n=t.createRadialGradient(r[0],r[1],u,o[0],o[1],h)}for(const u of this._colorStops)n.addColorStop(u[0],u[1]);return n}getPattern(t,e,n,r){let o;if(r===Fn.STROKE||r===Fn.FILL){if(this.isOriginBased()){let b=ot.transform(n,e.baseTransform);this.matrix&&(b=ot.transform(b,this.matrix));const A=.001,S=Math.hypot(b[0],b[1]),w=Math.hypot(b[2],b[3]),x=(b[0]*b[2]+b[1]*b[3])/(S*w);if(Math.abs(x)<A)if(this.isRadial()){if(Math.abs(S-w)<A)return this._createGradient(t,b)}else return this._createGradient(t,b)}const u=e.current.getClippedPathBoundingBox(r,Pe(t))||[0,0,0,0],h=Math.ceil(u[2]-u[0])||1,f=Math.ceil(u[3]-u[1])||1,p=e.cachedCanvases.getCanvas("pattern",h,f),m=p.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-u[0],-u[1]),n=ot.transform(n,[1,0,0,1,u[0],u[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),$T(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),o=t.createPattern(p.canvas,"no-repeat");const y=new DOMMatrix(n);o.setTransform(y)}else $T(t,this._bbox),o=this._createGradient(t);return o}}function HS(s,t,e,n,r,o,u,h){const f=t.coords,p=t.colors,m=s.data,y=s.width*4;let b;f[e+1]>f[n+1]&&(b=e,e=n,n=b,b=o,o=u,u=b),f[n+1]>f[r+1]&&(b=n,n=r,r=b,b=u,u=h,h=b),f[e+1]>f[n+1]&&(b=e,e=n,n=b,b=o,o=u,u=b);const A=(f[e]+t.offsetX)*t.scaleX,S=(f[e+1]+t.offsetY)*t.scaleY,w=(f[n]+t.offsetX)*t.scaleX,x=(f[n+1]+t.offsetY)*t.scaleY,C=(f[r]+t.offsetX)*t.scaleX,O=(f[r+1]+t.offsetY)*t.scaleY;if(S>=O)return;const M=p[o],N=p[o+1],L=p[o+2],I=p[u],k=p[u+1],j=p[u+2],W=p[h],nt=p[h+1],et=p[h+2],ht=Math.round(S),mt=Math.round(O);let gt,vt,F,X,it,dt,Tt,B;for(let q=ht;q<=mt;q++){if(q<x){const Et=q<S?0:(S-q)/(S-x);gt=A-(A-w)*Et,vt=M-(M-I)*Et,F=N-(N-k)*Et,X=L-(L-j)*Et}else{let Et;q>O?Et=1:x===O?Et=0:Et=(x-q)/(x-O),gt=w-(w-C)*Et,vt=I-(I-W)*Et,F=k-(k-nt)*Et,X=j-(j-et)*Et}let tt;q<S?tt=0:q>O?tt=1:tt=(S-q)/(S-O),it=A-(A-C)*tt,dt=M-(M-W)*tt,Tt=N-(N-nt)*tt,B=L-(L-et)*tt;const at=Math.round(Math.min(gt,it)),lt=Math.round(Math.max(gt,it));let At=y*q+at*4;for(let Et=at;Et<=lt;Et++)tt=(gt-Et)/(gt-it),tt<0?tt=0:tt>1&&(tt=1),m[At++]=vt-(vt-dt)*tt|0,m[At++]=F-(F-Tt)*tt|0,m[At++]=X-(X-B)*tt|0,m[At++]=255}}function Tj(s,t,e){const n=t.coords,r=t.colors;let o,u;switch(t.type){case AT.LATTICE:const h=t.verticesPerRow,f=Math.floor(n.length/h)-1,p=h-1;for(o=0;o<f;o++){let m=o*h;for(let y=0;y<p;y++,m++)HS(s,e,n[m],n[m+1],n[m+h],r[m],r[m+1],r[m+h]),HS(s,e,n[m+h+1],n[m+1],n[m+h],r[m+h+1],r[m+1],r[m+h])}break;case AT.TRIANGLES:for(o=0,u=n.length;o<u;o+=3)HS(s,e,n[o],n[o+1],n[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class _j extends I1{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const h=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-h,m=Math.ceil(this._bounds[3])-f,y=Math.min(Math.ceil(Math.abs(p*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),A=p/y,S=m/b,w={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-f,scaleX:1/A,scaleY:1/S},x=y+4,C=b+4,O=n.getCanvas("mesh",x,C),M=O.context,N=M.createImageData(y,b);if(e){const I=N.data;for(let k=0,j=I.length;k<j;k+=4)I[k]=e[0],I[k+1]=e[1],I[k+2]=e[2],I[k+3]=255}for(const I of this._figures)Tj(N,I,w);return M.putImageData(N,2,2),{canvas:O.canvas,offsetX:h-2*A,offsetY:f-2*S,scaleX:A,scaleY:S}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,r){$T(t,this._bbox);const o=new Float32Array(2);if(r===Fn.SHADING)ot.singularValueDecompose2dScale(Pe(t),o);else if(this.matrix){ot.singularValueDecompose2dScale(this.matrix,o);const[h,f]=o;ot.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=h,o[1]*=f}else ot.singularValueDecompose2dScale(e.baseTransform,o);const u=this._createMeshCanvas(o,r===Fn.SHADING?null:this._background,e.cachedCanvases);return r!==Fn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(u.offsetX,u.offsetY),t.scale(u.scaleX,u.scaleY),t.createPattern(u.canvas,"no-repeat")}}class wj extends I1{getPattern(){return"hotpink"}}function xj(s){switch(s[0]){case"RadialAxial":return new Sj(s);case"Mesh":return new _j(s);case"Dummy":return new wj}throw new Error(`Unknown IR type: ${s[0]}`)}const ZO={COLORED:1,UNCOLORED:2},mv=class mv{constructor(t,e,n,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(t,e){var dt,Tt;const{bbox:n,operatorList:r,paintType:o,tilingType:u,color:h,canvasGraphicsFactory:f}=this;let{xstep:p,ystep:m}=this;p=Math.abs(p),m=Math.abs(m),Pv("TilingType: "+u);const y=n[0],b=n[1],A=n[2],S=n[3],w=A-y,x=S-b,C=new Float32Array(2);ot.singularValueDecompose2dScale(this.matrix,C);const[O,M]=C;ot.singularValueDecompose2dScale(this.baseTransform,C);const N=O*C[0],L=M*C[1];let I=w,k=x,j=!1,W=!1;const nt=Math.ceil(p*N),et=Math.ceil(m*L),ht=Math.ceil(w*N),mt=Math.ceil(x*L);nt>=ht?I=p:j=!0,et>=mt?k=m:W=!0;const gt=this.getSizeAndScale(I,this.ctx.canvas.width,N),vt=this.getSizeAndScale(k,this.ctx.canvas.height,L),F=t.cachedCanvases.getCanvas("pattern",gt.size,vt.size),X=F.context,it=f.createCanvasGraphics(X,e);if(it.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(it,o,h),X.translate(-gt.scale*y,-vt.scale*b),it.transform(0,gt.scale,0,0,vt.scale,0,0),X.save(),(dt=it.dependencyTracker)==null||dt.save(),this.clipBbox(it,y,b,A,S),it.baseTransform=Pe(it.ctx),it.executeOperatorList(r),it.endDrawing(),(Tt=it.dependencyTracker)==null||Tt.restore(),X.restore(),j||W){const B=F.canvas;j&&(I=p),W&&(k=m);const q=this.getSizeAndScale(I,this.ctx.canvas.width,N),tt=this.getSizeAndScale(k,this.ctx.canvas.height,L),at=q.size,lt=tt.size,At=t.cachedCanvases.getCanvas("pattern-workaround",at,lt),Et=At.context,qe=j?Math.floor(w/p):0,le=W?Math.floor(x/m):0;for(let Ni=0;Ni<=qe;Ni++)for(let Zn=0;Zn<=le;Zn++)Et.drawImage(B,at*Ni,lt*Zn,at,lt,0,0,at,lt);return{canvas:At.canvas,scaleX:q.scale,scaleY:tt.scale,offsetX:y,offsetY:b}}return{canvas:F.canvas,scaleX:gt.scale,scaleY:vt.scale,offsetX:y,offsetY:b}}getSizeAndScale(t,e,n){const r=Math.max(mv.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*n);return o>=r?o=r:n=o/t,{scale:n,size:o}}clipBbox(t,e,n,r,o){const u=r-e,h=o-n;t.ctx.rect(e,n,u,h),ot.axialAlignedBoundingBox([e,n,r,o],Pe(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const r=t.ctx,o=t.current;switch(e){case ZO.COLORED:const{fillStyle:u,strokeStyle:h}=this.ctx;r.fillStyle=o.fillColor=u,r.strokeStyle=o.strokeColor=h;break;case ZO.UNCOLORED:r.fillStyle=r.strokeStyle=n,o.fillColor=o.strokeColor=n;break;default:throw new Uz(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,r,o){let u=n;r!==Fn.SHADING&&(u=ot.transform(u,e.baseTransform),this.matrix&&(u=ot.transform(u,this.matrix)));const h=this.createPatternCanvas(e,o);let f=new DOMMatrix(u);f=f.translate(h.offsetX,h.offsetY),f=f.scale(1/h.scaleX,1/h.scaleY);const p=t.createPattern(h.canvas,"repeat");return p.setTransform(f),p}};$(mv,"MAX_PATTERN_SIZE",3e3);let WT=mv;function Cj({src:s,srcPos:t=0,dest:e,width:n,height:r,nonBlackColor:o=4294967295,inverseDecode:u=!1}){const h=gn.isLittleEndian?4278190080:255,[f,p]=u?[o,h]:[h,o],m=n>>3,y=n&7,b=s.length;e=new Uint32Array(e.buffer);let A=0;for(let S=0;S<r;S++){for(const x=t+m;t<x;t++){const C=t<b?s[t]:255;e[A++]=C&128?p:f,e[A++]=C&64?p:f,e[A++]=C&32?p:f,e[A++]=C&16?p:f,e[A++]=C&8?p:f,e[A++]=C&4?p:f,e[A++]=C&2?p:f,e[A++]=C&1?p:f}if(y===0)continue;const w=t<b?s[t++]:255;for(let x=0;x<y;x++)e[A++]=w&1<<7-x?p:f}return{srcPos:t,destPos:A}}const JO=16,tN=100,Dj=15,eN=10,Ri=16,VS=new DOMMatrix,us=new Float32Array(2),kh=new Float32Array([1/0,1/0,-1/0,-1/0]);function Mj(s,t){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){t.save(),this.__originalSave()},s.restore=function(){t.restore(),this.__originalRestore()},s.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},s.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},s.transform=function(e,n,r,o,u,h){t.transform(e,n,r,o,u,h),this.__originalTransform(e,n,r,o,u,h)},s.setTransform=function(e,n,r,o,u,h){t.setTransform(e,n,r,o,u,h),this.__originalSetTransform(e,n,r,o,u,h)},s.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},s.rotate=function(e){t.rotate(e),this.__originalRotate(e)},s.clip=function(e){t.clip(e),this.__originalClip(e)},s.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},s.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},s.bezierCurveTo=function(e,n,r,o,u,h){t.bezierCurveTo(e,n,r,o,u,h),this.__originalBezierCurveTo(e,n,r,o,u,h)},s.rect=function(e,n,r,o){t.rect(e,n,r,o),this.__originalRect(e,n,r,o)},s.closePath=function(){t.closePath(),this.__originalClosePath()},s.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class Rj{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,n)):(r=this.canvasFactory.create(e,n),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function q0(s,t,e,n,r,o,u,h,f,p){const[m,y,b,A,S,w]=Pe(s);if(y===0&&b===0){const O=u*m+S,M=Math.round(O),N=h*A+w,L=Math.round(N),I=(u+f)*m+S,k=Math.abs(Math.round(I)-M)||1,j=(h+p)*A+w,W=Math.abs(Math.round(j)-L)||1;return s.setTransform(Math.sign(m),0,0,Math.sign(A),M,L),s.drawImage(t,e,n,r,o,0,0,k,W),s.setTransform(m,y,b,A,S,w),[k,W]}if(m===0&&A===0){const O=h*b+S,M=Math.round(O),N=u*y+w,L=Math.round(N),I=(h+p)*b+S,k=Math.abs(Math.round(I)-M)||1,j=(u+f)*y+w,W=Math.abs(Math.round(j)-L)||1;return s.setTransform(0,Math.sign(y),Math.sign(b),0,M,L),s.drawImage(t,e,n,r,o,0,0,W,k),s.setTransform(m,y,b,A,S,w),[W,k]}s.drawImage(t,e,n,r,o,u,h,f,p);const x=Math.hypot(m,y),C=Math.hypot(b,A);return[x*f,C*p]}class nN{constructor(t,e,n){$(this,"alphaIsShape",!1);$(this,"fontSize",0);$(this,"fontSizeScale",1);$(this,"textMatrix",null);$(this,"textMatrixScale",1);$(this,"fontMatrix",vT);$(this,"leading",0);$(this,"x",0);$(this,"y",0);$(this,"lineX",0);$(this,"lineY",0);$(this,"charSpacing",0);$(this,"wordSpacing",0);$(this,"textHScale",1);$(this,"textRenderingMode",hn.FILL);$(this,"textRise",0);$(this,"fillColor","#000000");$(this,"strokeColor","#000000");$(this,"patternFill",!1);$(this,"patternStroke",!1);$(this,"fillAlpha",1);$(this,"strokeAlpha",1);$(this,"lineWidth",1);$(this,"activeSMask",null);$(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=kh.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Fn.FILL,e=null){const n=this.minMax.slice();if(t===Fn.STROKE){e||ee("Stroke bounding box must include transform."),ot.singularValueDecompose2dScale(e,us);const r=us[0]*this.lineWidth/2,o=us[1]*this.lineWidth/2;n[0]-=r,n[1]-=o,n[2]+=r,n[3]+=o}return n}updateClipFromPath(){const t=ot.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(kh,0)}getClippedPathBoundingBox(t=Fn.FILL,e=null){return ot.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function iN(s,t){if(t instanceof ImageData){s.putImageData(t,0,0);return}const e=t.height,n=t.width,r=e%Ri,o=(e-r)/Ri,u=r===0?o:o+1,h=s.createImageData(n,Ri);let f=0,p;const m=t.data,y=h.data;let b,A,S,w;if(t.kind===ib.GRAYSCALE_1BPP){const x=m.byteLength,C=new Uint32Array(y.buffer,0,y.byteLength>>2),O=C.length,M=n+7>>3,N=4294967295,L=gn.isLittleEndian?4278190080:255;for(b=0;b<u;b++){for(S=b<o?Ri:r,p=0,A=0;A<S;A++){const I=x-f;let k=0;const j=I>M?n:I*8-7,W=j&-8;let nt=0,et=0;for(;k<W;k+=8)et=m[f++],C[p++]=et&128?N:L,C[p++]=et&64?N:L,C[p++]=et&32?N:L,C[p++]=et&16?N:L,C[p++]=et&8?N:L,C[p++]=et&4?N:L,C[p++]=et&2?N:L,C[p++]=et&1?N:L;for(;k<j;k++)nt===0&&(et=m[f++],nt=128),C[p++]=et&nt?N:L,nt>>=1}for(;p<O;)C[p++]=0;s.putImageData(h,0,b*Ri)}}else if(t.kind===ib.RGBA_32BPP){for(A=0,w=n*Ri*4,b=0;b<o;b++)y.set(m.subarray(f,f+w)),f+=w,s.putImageData(h,0,A),A+=Ri;b<u&&(w=n*r*4,y.set(m.subarray(f,f+w)),s.putImageData(h,0,A))}else if(t.kind===ib.RGB_24BPP)for(S=Ri,w=n*S,b=0;b<u;b++){for(b>=o&&(S=r,w=n*S),p=0,A=w;A--;)y[p++]=m[f++],y[p++]=m[f++],y[p++]=m[f++],y[p++]=255;s.putImageData(h,0,b*Ri)}else throw new Error(`bad image kind: ${t.kind}`)}function sN(s,t){if(t.bitmap){s.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,r=e%Ri,o=(e-r)/Ri,u=r===0?o:o+1,h=s.createImageData(n,Ri);let f=0;const p=t.data,m=h.data;for(let y=0;y<u;y++){const b=y<o?Ri:r;({srcPos:f}=Cj({src:p,srcPos:f,dest:m,width:n,height:b,nonBlackColor:0})),s.putImageData(h,0,y*Ri)}}function _p(s,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)s[n]!==void 0&&(t[n]=s[n]);s.setLineDash!==void 0&&(t.setLineDash(s.getLineDash()),t.lineDashOffset=s.lineDashOffset)}function K0(s){s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0);const{filter:t}=s;t!=="none"&&t!==""&&(s.filter="none")}function aN(s,t){if(t)return!0;ot.singularValueDecompose2dScale(s,us);const e=Math.fround(Ka.pixelRatio*Fl.PDF_TO_CSS_UNITS);return us[0]<=e&&us[1]<=e}const Oj=["butt","round","square"],Nj=["miter","round","bevel"],Lj={},rN={};var pa,QT,ZT,JT;const z1=class z1{constructor(t,e,n,r,o,{optionalContentConfig:u,markedContentStack:h=null},f,p,m){_(this,pa);this.ctx=t,this.current=new nN(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=u,this.cachedCanvases=new Rj(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=f,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=m??null}getObject(t,e,n=null){var r;return typeof e=="string"?((r=this.dependencyTracker)==null||r.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:r=null}){const o=this.ctx.canvas.width,u=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,u),this.ctx.fillStyle=h,n){const f=this.cachedCanvases.getCanvas("transparent",o,u);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),this.ctx.transform(...Pe(this.compositeCtx))}this.ctx.save(),K0(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Pe(this.ctx)}executeOperatorList(t,e,n,r,o){var C;const u=t.argsArray,h=t.fnArray;let f=e||0;const p=u.length;if(p===f)return f;const m=p-f>eN&&typeof n=="function",y=m?Date.now()+Dj:0;let b=0;const A=this.commonObjs,S=this.objs;let w,x;for(;;){if(r!==void 0&&f===r.nextBreakPoint)return r.breakIt(f,n),f;if(!o||o(f))if(w=h[f],x=u[f]??null,w!==lm.dependency)x===null?this[w](f):this[w](f,...x);else for(const O of x){(C=this.dependencyTracker)==null||C.recordNamedData(O,f);const M=O.startsWith("g_")?A:S;if(!M.has(O))return M.get(O,n),f}if(f++,f===p)return f;if(m&&++b>eN){if(Date.now()>y)return n(),f;b=0}}}endDrawing(){D(this,pa,QT).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),D(this,pa,ZT).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,r=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),u=Math.max(Math.hypot(e[2],e[3]),1),h=n,f=r,p="prescale1",m,y;for(;o>2&&h>1||u>2&&f>1;){let b=h,A=f;o>2&&h>1&&(b=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),o/=h/b),u>2&&f>1&&(A=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f)/2,u/=f/A),m=this.cachedCanvases.getCanvas(p,b,A),y=m.context,y.clearRect(0,0,b,A),y.drawImage(t,0,0,h,f,0,0,b,A),t=m.canvas,h=b,f=A,p=p==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:h,paintHeight:f}}_createMaskCanvas(t,e){var nt,et;const n=this.ctx,{width:r,height:o}=e,u=this.current.fillColor,h=this.current.patternFill,f=Pe(n);let p,m,y,b;if((e.bitmap||e.data)&&e.count>1){const ht=e.bitmap||e.data.buffer;m=JSON.stringify(h?f:[f.slice(0,4),u]),p=this._cachedBitmapsMap.get(ht),p||(p=new Map,this._cachedBitmapsMap.set(ht,p));const mt=p.get(m);if(mt&&!h){const gt=Math.round(Math.min(f[0],f[2])+f[4]),vt=Math.round(Math.min(f[1],f[3])+f[5]);return(nt=this.dependencyTracker)==null||nt.recordDependencies(t,ws.transformAndFill),{canvas:mt,offsetX:gt,offsetY:vt}}y=mt}y||(b=this.cachedCanvases.getCanvas("maskCanvas",r,o),sN(b.context,e));let A=ot.transform(f,[1/r,0,0,-1/o,0,0]);A=ot.transform(A,[1,0,0,1,0,-o]);const S=kh.slice();ot.axialAlignedBoundingBox([0,0,r,o],A,S);const[w,x,C,O]=S,M=Math.round(C-w)||1,N=Math.round(O-x)||1,L=this.cachedCanvases.getCanvas("fillCanvas",M,N),I=L.context,k=w,j=x;I.translate(-k,-j),I.transform(...A),y||(y=this._scaleImage(b.canvas,va(I)),y=y.img,p&&h&&p.set(m,y)),I.imageSmoothingEnabled=aN(Pe(I),e.interpolate),q0(I,y,0,0,y.width,y.height,0,0,r,o),I.globalCompositeOperation="source-in";const W=ot.transform(va(I),[1,0,0,1,-k,-j]);return I.fillStyle=h?u.getPattern(n,this,W,Fn.FILL,t):u,I.fillRect(0,0,r,o),p&&!h&&(this.cachedCanvases.delete("fillCanvas"),p.set(m,L.canvas)),(et=this.dependencyTracker)==null||et.recordDependencies(t,ws.transformAndFill),{canvas:L.canvas,offsetX:Math.round(k),offsetY:Math.round(j)}}setLineWidth(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",t),this.ctx.lineCap=Oj[e]}setLineJoin(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",t),this.ctx.lineJoin=Nj[e]}setMiterLimit(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){var o;(o=this.dependencyTracker)==null||o.recordSimpleData("dash",t);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){var n,r,o,u,h;for(const[f,p]of e)switch(f){case"LW":this.setLineWidth(t,p);break;case"LC":this.setLineCap(t,p);break;case"LJ":this.setLineJoin(t,p);break;case"ML":this.setMiterLimit(t,p);break;case"D":this.setDash(t,p[0],p[1]);break;case"RI":this.setRenderingIntent(t,p);break;case"FL":this.setFlatness(t,p);break;case"Font":this.setFont(t,p[0],p[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=p;break;case"ca":(r=this.dependencyTracker)==null||r.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=p;break;case"BM":(o=this.dependencyTracker)==null||o.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=p;break;case"SMask":(u=this.dependencyTracker)==null||u.recordSimpleData("SMask",t),this.current.activeSMask=p?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(h=this.dependencyTracker)==null||h.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(p);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(r,e,n);this.suspendedCtx=this.ctx;const u=this.ctx=o.context;u.setTransform(this.suspendedCtx.getTransform()),_p(this.suspendedCtx,u),Mj(u,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),_p(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,r){const o=r[0],u=r[1],h=r[2]-o,f=r[3]-u;h===0||f===0||(this.genericComposeSMask(e.context,n,h,f,e.subtype,e.backdrop,e.transferMap,o,u,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,r,o,u,h,f,p,m,y){let b=t.canvas,A=f-m,S=p-y;if(u)if(A<0||S<0||A+n>b.width||S+r>b.height){const x=this.cachedCanvases.getCanvas("maskExtension",n,r),C=x.context;C.drawImage(b,-A,-S),C.globalCompositeOperation="destination-atop",C.fillStyle=u,C.fillRect(0,0,n,r),C.globalCompositeOperation="source-over",b=x.canvas,A=S=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const x=new Path2D;x.rect(A,S,n,r),t.clip(x),t.globalCompositeOperation="destination-atop",t.fillStyle=u,t.fillRect(A,S,n,r),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&h?e.filter=this.filterFactory.addAlphaFilter(h):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(h));const w=new Path2D;w.rect(f,p,n,r),e.clip(w),e.globalCompositeOperation="destination-in",e.drawImage(b,A,S,n,r,f,p,n,r),e.restore()}save(t){var n;this.inSMaskMode&&_p(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),(n=this.dependencyTracker)==null||n.save(t)}restore(t){var e;if((e=this.dependencyTracker)==null||e.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&_p(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,r,o,u,h){var f;(f=this.dependencyTracker)==null||f.recordIncrementalData("transform",t),this.ctx.transform(e,n,r,o,u,h),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,r){let[o]=n;if(!r){o||(o=n[0]=new Path2D),this[e](t,o);return}if(this.dependencyTracker!==null){const u=e===lm.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-u,r[2]+u,r[1]-u,r[3]+u).recordDependencies(t,["transform"])}o instanceof Path2D||(o=n[0]=wI(o)),ot.axialAlignedBoundingBox(r,Pe(this.ctx),this.current.minMax),this[e](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){var u;const r=this.ctx,o=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&(o!=null&&o.getPattern)){const h=o.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=o.getPattern(r,this,va(r),Fn.STROKE,t),h){const f=new Path2D;f.addPath(e,r.getTransform().invertSelf().multiplySelf(h)),e=f}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);(u=this.dependencyTracker)==null||u.recordDependencies(t,ws.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Fn.STROKE,Pe(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){var p,m,y;const r=this.ctx,o=this.current.fillColor,u=this.current.patternFill;let h=!1;if(u){const b=o.isModifyingCurrentTransform()?r.getTransform():null;if((p=this.dependencyTracker)==null||p.save(t),r.save(),r.fillStyle=o.getPattern(r,this,va(r),Fn.FILL,t),b){const A=new Path2D;A.addPath(e,r.getTransform().invertSelf().multiplySelf(b)),e=A}h=!0}const f=this.current.getClippedPathBoundingBox();this.contentVisible&&f!==null&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),(m=this.dependencyTracker)==null||m.recordDependencies(t,ws.fill),h&&(r.restore(),(y=this.dependencyTracker)==null||y.restore(t)),n&&this.consumePath(t,e,f)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){var n;this.ctx.fill(e),(n=this.dependencyTracker)==null||n.recordDependencies(t,ws.rawFillPath).recordOperation(t)}clip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=Lj}eoClip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=rN}beginText(t){var e;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(e=this.dependencyTracker)==null||e.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;e!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(e!==void 0){const r=new Path2D,o=n.getTransform().invertSelf();for(const{transform:u,x:h,y:f,fontSize:p,path:m}of e)m&&r.addPath(m,new DOMMatrix(u).preMultiplySelf(o).translate(h,f).scale(p,-p));n.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){var y,b;(y=this.dependencyTracker)==null||y.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const r=this.commonObjs.get(e),o=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=r.fontMatrix||vT,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&Ct("Invalid font matrix for font "+e),n<0?(n=-n,o.fontDirection=-1):o.fontDirection=1,this.current.font=r,this.current.fontSize=n,r.isType3Font)return;const u=r.loadedName||"sans-serif",h=((b=r.systemFontInfo)==null?void 0:b.css)||`"${u}", ${r.fallbackName}`;let f="normal";r.black?f="900":r.bold&&(f="bold");const p=r.italic?"italic":"normal";let m=n;n<JO?m=JO:n>tN&&(m=tN),this.current.fontSizeScale=n/m,this.ctx.font=`${p} ${f} ${m}px ${h}`}setTextRenderingMode(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){var e;this.moveText(t,0,this.current.leading),(e=this.dependencyTracker)==null||e.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}paintChar(t,e,n,r,o,u){var C,O,M,N;const h=this.ctx,f=this.current,p=f.font,m=f.textRenderingMode,y=f.fontSize/f.fontSizeScale,b=m&hn.FILL_STROKE_MASK,A=!!(m&hn.ADD_TO_PATH_FLAG),S=f.patternFill&&!p.missingFile,w=f.patternStroke&&!p.missingFile;let x;if((p.disableFontFace||A||S||w)&&!p.missingFile&&(x=p.getPathGenerator(this.commonObjs,e)),x&&(p.disableFontFace||S||w)){h.save(),h.translate(n,r),h.scale(y,-y),(C=this.dependencyTracker)==null||C.recordCharacterBBox(t,h,p);let L;if(b===hn.FILL||b===hn.FILL_STROKE)if(o){L=h.getTransform(),h.setTransform(...o);const I=D(this,pa,JT).call(this,x,L,o);h.fill(I)}else h.fill(x);if(b===hn.STROKE||b===hn.FILL_STROKE)if(u){L||(L=h.getTransform()),h.setTransform(...u);const{a:I,b:k,c:j,d:W}=L,nt=ot.inverseTransform(u),et=ot.transform([I,k,j,W,0,0],nt);ot.singularValueDecompose2dScale(et,us),h.lineWidth*=Math.max(us[0],us[1])/y,h.stroke(D(this,pa,JT).call(this,x,L,u))}else h.lineWidth/=y,h.stroke(x);h.restore()}else(b===hn.FILL||b===hn.FILL_STROKE)&&(h.fillText(e,n,r),(O=this.dependencyTracker)==null||O.recordCharacterBBox(t,h,p,y,n,r,()=>h.measureText(e))),(b===hn.STROKE||b===hn.FILL_STROKE)&&(this.dependencyTracker&&((M=this.dependencyTracker)==null||M.recordCharacterBBox(t,h,p,y,n,r,()=>h.measureText(e)).recordDependencies(t,ws.stroke)),h.strokeText(e,n,r));A&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Pe(h),x:n,y:r,fontSize:y,path:x}),(N=this.dependencyTracker)==null||N.recordCharacterBBox(t,h,p,y,n,r))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){n=!0;break}return Dt(this,"isFontSubpixelAAEnabled",n)}showText(t,e){var et,ht,mt,gt;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,ws.showText).resetBBox(t),this.current.textRenderingMode&hn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,r=n.font;if(r.isType3Font){this.showType3Text(t,e),(et=this.dependencyTracker)==null||et.recordShowTextOperation(t);return}const o=n.fontSize;if(o===0){(ht=this.dependencyTracker)==null||ht.recordOperation(t);return}const u=this.ctx,h=n.fontSizeScale,f=n.charSpacing,p=n.wordSpacing,m=n.fontDirection,y=n.textHScale*m,b=e.length,A=r.vertical,S=A?1:-1,w=r.defaultVMetrics,x=o*n.fontMatrix[0],C=n.textRenderingMode===hn.FILL&&!r.disableFontFace&&!n.patternFill;u.save(),n.textMatrix&&u.transform(...n.textMatrix),u.translate(n.x,n.y+n.textRise),m>0?u.scale(y,-1):u.scale(y,1);let O,M;const N=n.textRenderingMode&hn.FILL_STROKE_MASK,L=N===hn.FILL||N===hn.FILL_STROKE,I=N===hn.STROKE||N===hn.FILL_STROKE;if(L&&n.patternFill){u.save();const vt=n.fillColor.getPattern(u,this,va(u),Fn.FILL,t);O=Pe(u),u.restore(),u.fillStyle=vt}if(I&&n.patternStroke){u.save();const vt=n.strokeColor.getPattern(u,this,va(u),Fn.STROKE,t);M=Pe(u),u.restore(),u.strokeStyle=vt}let k=n.lineWidth;const j=n.textMatrixScale;if(j===0||k===0?I&&(k=this.getSinglePixelWidth()):k/=j,h!==1&&(u.scale(h,h),k/=h),u.lineWidth=k,r.isInvalidPDFjsFont){const vt=[];let F=0;for(const it of e)vt.push(it.unicode),F+=it.width;const X=vt.join("");if(u.fillText(X,0,0),this.dependencyTracker!==null){const it=u.measureText(X);this.dependencyTracker.recordBBox(t,this.ctx,-it.actualBoundingBoxLeft,it.actualBoundingBoxRight,-it.actualBoundingBoxAscent,it.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=F*x*y,u.restore(),this.compose();return}let W=0,nt;for(nt=0;nt<b;++nt){const vt=e[nt];if(typeof vt=="number"){W+=S*vt*o/1e3;continue}let F=!1;const X=(vt.isSpace?p:0)+f,it=vt.fontChar,dt=vt.accent;let Tt,B,q=vt.width;if(A){const lt=vt.vmetric||w,At=-(vt.vmetric?lt[1]:q*.5)*x,Et=lt[2]*x;q=lt?-lt[0]:q,Tt=At/h,B=(W+Et)/h}else Tt=W/h,B=0;let tt;if(r.remeasure&&q>0){tt=u.measureText(it);const lt=tt.width*1e3/o*h;if(q<lt&&this.isFontSubpixelAAEnabled){const At=q/lt;F=!0,u.save(),u.scale(At,1),Tt/=At}else q!==lt&&(Tt+=(q-lt)/2e3*o/h)}if(this.contentVisible&&(vt.isInFont||r.missingFile)){if(C&&!dt)u.fillText(it,Tt,B),(mt=this.dependencyTracker)==null||mt.recordCharacterBBox(t,u,tt?{bbox:null}:r,o/h,Tt,B,()=>tt??u.measureText(it));else if(this.paintChar(t,it,Tt,B,O,M),dt){const lt=Tt+o*dt.offset.x/h,At=B-o*dt.offset.y/h;this.paintChar(t,dt.fontChar,lt,At,O,M)}}const at=A?q*x-X*m:q*x+X*m;W+=at,F&&u.restore()}A?n.y-=W:n.x+=W*y,u.restore(),this.compose(),(gt=this.dependencyTracker)==null||gt.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,r=this.current,o=r.font,u=r.fontSize,h=r.fontDirection,f=o.vertical?1:-1,p=r.charSpacing,m=r.wordSpacing,y=r.textHScale*h,b=r.fontMatrix||vT,A=e.length,S=r.textRenderingMode===hn.INVISIBLE;let w,x,C,O;if(S||u===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),r.textMatrix&&n.transform(...r.textMatrix),n.translate(r.x,r.y+r.textRise),n.scale(y,h);const M=this.dependencyTracker;for(this.dependencyTracker=M?new tv(M,t):null,w=0;w<A;++w){if(x=e[w],typeof x=="number"){O=f*x*u/1e3,this.ctx.translate(O,0),r.x+=O*y;continue}const N=(x.isSpace?m:0)+p,L=o.charProcOperatorList[x.operatorListId];L?this.contentVisible&&(this.save(),n.scale(u,u),n.transform(...b),this.executeOperatorList(L),this.restore()):Ct(`Type3 character "${x.operatorListId}" is not available.`);const I=[x.width,0];ot.applyTransform(I,b),C=I[0]*u+N,n.translate(C,0),r.x+=C*y}n.restore(),M&&(this.dependencyTracker=M)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,r,o,u,h){var p;const f=new Path2D;f.rect(r,o,u-r,h-o),this.ctx.clip(f),(p=this.dependencyTracker)==null||p.recordBBox(t,this.ctx,r,u,o,h).recordClipBox(t,this.ctx,r,u,o,h),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const r=this.baseTransform||Pe(this.ctx),o={createCanvasGraphics:(u,h)=>new z1(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new tv(this.dependencyTracker,h,!0):null)};n=new WT(e,this.ctx,o,r)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=xj(this.getObject(t,e)),this.cachedPatterns.set(e,r)),n&&(r.matrix=n),r}shadingFill(t,e){var u;if(!this.contentVisible)return;const n=this.ctx;this.save(t);const r=this._getPattern(t,e);n.fillStyle=r.getPattern(n,this,va(n),Fn.SHADING,t);const o=va(n);if(o){const{width:h,height:f}=n.canvas,p=kh.slice();ot.axialAlignedBoundingBox([0,0,h,f],o,p);const[m,y,b,A]=p;this.ctx.fillRect(m,y,b-m,A-y)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(u=this.dependencyTracker)==null||u.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,ws.transform).recordDependencies(t,ws.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){ee("Should not call beginInlineImage")}beginImageData(){ee("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){var r;if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Pe(this.ctx),n)){ot.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[o,u,h,f]=n,p=new Path2D;p.rect(o,u,h-o,f-u),this.ctx.clip(p),(r=this.dependencyTracker)==null||r.recordClipBox(t,this.ctx,o,h,u,f),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){var M;if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||Pv("TODO: Support non-isolated groups."),e.knockout&&Ct("Knockout groups not supported.");const r=Pe(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=kh.slice();ot.axialAlignedBoundingBox(e.bbox,Pe(n),o);const u=[0,0,n.canvas.width,n.canvas.height];o=ot.intersect(o,u)||[0,0,0,0];const h=Math.floor(o[0]),f=Math.floor(o[1]),p=Math.max(Math.ceil(o[2])-h,1),m=Math.max(Math.ceil(o[3])-f,1);this.current.startNewPathAndClipBox([0,0,p,m]);let y="groupAt"+this.groupLevel;e.smask&&(y+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(y,p,m),A=b.context;A.translate(-h,-f),A.transform(...r);let S=new Path2D;const[w,x,C,O]=e.bbox;if(S.rect(w,x,C-w,O-x),e.matrix){const N=new Path2D;N.addPath(S,new DOMMatrix(e.matrix)),S=N}A.clip(S),e.smask&&this.smaskStack.push({canvas:b.canvas,context:A,offsetX:h,offsetY:f,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(h,f),n.save()),_p(n,A),this.ctx=A,(M=this.dependencyTracker)==null||M.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){var o;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,(o=this.dependencyTracker)==null||o.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const u=Pe(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...u);const h=kh.slice();ot.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],u,h),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(h)}}beginAnnotation(t,e,n,r,o,u){if(D(this,pa,QT).call(this),K0(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const h=n[2]-n[0],f=n[3]-n[1];if(u&&this.annotationCanvasMap){r=r.slice(),r[4]-=n[0],r[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=h,n[3]=f,ot.singularValueDecompose2dScale(Pe(this.ctx),us);const{viewportScale:p}=this,m=Math.ceil(h*this.outputScaleX*p),y=Math.ceil(f*this.outputScaleY*p);this.annotationCanvas=this.canvasFactory.create(m,y);const{canvas:b,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(e,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(us[0],0,0,-us[1],0,f*us[1]),K0(this.ctx)}else{K0(this.ctx),this.endPath(t);const p=new Path2D;p.rect(n[0],n[1],h,f),this.ctx.clip(p)}}this.current=new nN(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),D(this,pa,ZT).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){var h;if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const r=this.ctx,o=this._createMaskCanvas(t,e),u=o.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(u,o.offsetX,o.offsetY),(h=this.dependencyTracker)==null||h.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+u.width,o.offsetY,o.offsetY+u.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,r=0,o=0,u,h){var y,b,A;if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const f=this.ctx;f.save();const p=Pe(f);f.transform(n,r,o,u,0,0);const m=this._createMaskCanvas(t,e);f.setTransform(1,0,0,1,m.offsetX-p[4],m.offsetY-p[5]),(y=this.dependencyTracker)==null||y.resetBBox(t);for(let S=0,w=h.length;S<w;S+=2){const x=ot.transform(p,[n,r,o,u,h[S],h[S+1]]);f.drawImage(m.canvas,x[4],x[5]),(b=this.dependencyTracker)==null||b.recordBBox(t,this.ctx,x[4],x[4]+m.canvas.width,x[5],x[5]+m.canvas.height)}f.restore(),this.compose(),(A=this.dependencyTracker)==null||A.recordOperation(t)}paintImageMaskXObjectGroup(t,e){var u,h,f;if(!this.contentVisible)return;const n=this.ctx,r=this.current.fillColor,o=this.current.patternFill;(u=this.dependencyTracker)==null||u.resetBBox(t).recordDependencies(t,ws.transformAndFill);for(const p of e){const{data:m,width:y,height:b,transform:A}=p,S=this.cachedCanvases.getCanvas("maskCanvas",y,b),w=S.context;w.save();const x=this.getObject(t,m,p);sN(w,x),w.globalCompositeOperation="source-in",w.fillStyle=o?r.getPattern(w,this,va(n),Fn.FILL,t):r,w.fillRect(0,0,y,b),w.restore(),n.save(),n.transform(...A),n.scale(1,-1),q0(n,S.canvas,0,0,y,b,0,-1,1,1),(h=this.dependencyTracker)==null||h.recordBBox(t,n,0,y,0,b),n.restore()}this.compose(),(f=this.dependencyTracker)==null||f.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){Ct("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,r,o){if(!this.contentVisible)return;const u=this.getObject(t,e);if(!u){Ct("Dependent image isn't ready yet");return}const h=u.width,f=u.height,p=[];for(let m=0,y=o.length;m<y;m+=2)p.push({transform:[n,0,0,r,o[m],o[m+1]],x:0,y:0,w:h,h:f});this.paintInlineImageXObjectGroup(t,u,p)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:r}=t,o=this.cachedCanvases.getCanvas("inlineImage",n,r),u=o.context;return u.filter=this.current.transferMaps,u.drawImage(e,0,0),u.filter="none",o.canvas}paintInlineImageXObject(t,e){var p;if(!this.contentVisible)return;const n=e.width,r=e.height,o=this.ctx;this.save(t);const{filter:u}=o;u!=="none"&&u!==""&&(o.filter="none"),o.scale(1/n,-1/r);let h;if(e.bitmap)h=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)h=e;else{const y=this.cachedCanvases.getCanvas("inlineImage",n,r).context;iN(y,e),h=this.applyTransferMapsToCanvas(y)}const f=this._scaleImage(h,va(o));o.imageSmoothingEnabled=aN(Pe(o),e.interpolate),(p=this.dependencyTracker)==null||p.resetBBox(t).recordBBox(t,o,0,n,-r,0).recordDependencies(t,ws.imageXObject).recordOperation(t),q0(o,f.img,0,0,f.paintWidth,f.paintHeight,0,-r,n,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){var u,h,f;if(!this.contentVisible)return;const r=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const p=e.width,m=e.height,b=this.cachedCanvases.getCanvas("inlineImage",p,m).context;iN(b,e),o=this.applyTransferMapsToCanvas(b)}(u=this.dependencyTracker)==null||u.resetBBox(t);for(const p of n)r.save(),r.transform(...p.transform),r.scale(1,-1),q0(r,o,p.x,p.y,p.w,p.h,0,-1,1,1),(h=this.dependencyTracker)==null||h.recordBBox(t,r,0,1,-1,0),r.restore();(f=this.dependencyTracker)==null||f.recordOperation(t),this.compose()}paintSolidColorImageMask(t){var e;this.contentVisible&&((e=this.dependencyTracker)==null||e.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,ws.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){var e;(e=this.dependencyTracker)==null||e.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){var u,h;const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const o=this.ctx;this.pendingClip?(r||(this.pendingClip===rN?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null,(u=this.dependencyTracker)==null||u.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):(h=this.dependencyTracker)==null||h.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Pe(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:r,d:o}=this.ctx.getTransform();let u,h;if(n===0&&r===0){const f=Math.abs(e),p=Math.abs(o);if(f===p)if(t===0)u=h=1/f;else{const m=f*t;u=h=m<1?1/m:1}else if(t===0)u=1/f,h=1/p;else{const m=f*t,y=p*t;u=m<1?1/m:1,h=y<1?1/y:1}}else{const f=Math.abs(e*o-n*r),p=Math.hypot(e,n),m=Math.hypot(r,o);if(t===0)u=m/f,h=p/f;else{const y=t*f;u=m>y?m/y:1,h=p>y?p/y:1}}this._cachedScaleForStroking[0]=u,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:r}}=this,[o,u]=this.getScaleForStroking();if(o===u){n.lineWidth=(r||1)*o,n.stroke(t);return}const h=n.getLineDash();e&&n.save(),n.scale(o,u),VS.a=1/o,VS.d=1/u;const f=new Path2D;if(f.addPath(t,VS),h.length>0){const p=Math.max(o,u);n.setLineDash(h.map(m=>m/p)),n.lineDashOffset/=p}n.lineWidth=r||1,n.stroke(f),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};pa=new WeakSet,QT=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},ZT=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},JT=function(t,e,n){const r=new Path2D;return r.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),r};let Gh=z1;for(const s in lm)Gh.prototype[s]!==void 0&&(Gh.prototype[lm[s]]=Gh.prototype[s]);var tg,eg;class Ya{static get workerPort(){return c(this,tg)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");E(this,tg,t)}static get workerSrc(){return c(this,eg)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");E(this,eg,t)}}tg=new WeakMap,eg=new WeakMap,_(Ya,tg,null),_(Ya,eg,"");var Dd,ng;class Ij{constructor({parsedData:t,rawData:e}){_(this,Dd);_(this,ng);E(this,Dd,t),E(this,ng,e)}getRaw(){return c(this,ng)}get(t){return c(this,Dd).get(t)??null}[Symbol.iterator](){return c(this,Dd).entries()}}Dd=new WeakMap,ng=new WeakMap;const Ch=Symbol("INTERNAL");var ig,sg,ag,Md;class Pj{constructor(t,{name:e,intent:n,usage:r,rbGroups:o}){_(this,ig,!1);_(this,sg,!1);_(this,ag,!1);_(this,Md,!0);E(this,ig,!!(t&cs.DISPLAY)),E(this,sg,!!(t&cs.PRINT)),this.name=e,this.intent=n,this.usage=r,this.rbGroups=o}get visible(){if(c(this,ag))return c(this,Md);if(!c(this,Md))return!1;const{print:t,view:e}=this.usage;return c(this,ig)?(e==null?void 0:e.viewState)!=="OFF":c(this,sg)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==Ch&&ee("Internal method `_setVisible` called."),E(this,ag,n),E(this,Md,e)}}ig=new WeakMap,sg=new WeakMap,ag=new WeakMap,Md=new WeakMap;var dl,ge,Rd,Od,rg,t_;class Bj{constructor(t,e=cs.DISPLAY){_(this,rg);_(this,dl,null);_(this,ge,new Map);_(this,Rd,null);_(this,Od,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,E(this,Od,t.order);for(const n of t.groups)c(this,ge).set(n.id,new Pj(e,n));if(t.baseState==="OFF")for(const n of c(this,ge).values())n._setVisible(Ch,!1);for(const n of t.on)c(this,ge).get(n)._setVisible(Ch,!0);for(const n of t.off)c(this,ge).get(n)._setVisible(Ch,!1);E(this,Rd,this.getHash())}}isVisible(t){if(c(this,ge).size===0)return!0;if(!t)return Pv("Optional content group not defined."),!0;if(t.type==="OCG")return c(this,ge).has(t.id)?c(this,ge).get(t.id).visible:(Ct(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return D(this,rg,t_).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!c(this,ge).has(e))return Ct(`Optional content group not found: ${e}`),!0;if(c(this,ge).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!c(this,ge).has(e))return Ct(`Optional content group not found: ${e}`),!0;if(!c(this,ge).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!c(this,ge).has(e))return Ct(`Optional content group not found: ${e}`),!0;if(!c(this,ge).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!c(this,ge).has(e))return Ct(`Optional content group not found: ${e}`),!0;if(c(this,ge).get(e).visible)return!1}return!0}return Ct(`Unknown optional content policy ${t.policy}.`),!0}return Ct(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var o;const r=c(this,ge).get(t);if(!r){Ct(`Optional content group not found: ${t}`);return}if(n&&e&&r.rbGroups.length)for(const u of r.rbGroups)for(const h of u)h!==t&&((o=c(this,ge).get(h))==null||o._setVisible(Ch,!1,!0));r._setVisible(Ch,!!e,!0),E(this,dl,null)}setOCGState({state:t,preserveRB:e}){let n;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const o=c(this,ge).get(r);if(o)switch(n){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!o.visible,e);break}}E(this,dl,null)}get hasInitialVisibility(){return c(this,Rd)===null||this.getHash()===c(this,Rd)}getOrder(){return c(this,ge).size?c(this,Od)?c(this,Od).slice():[...c(this,ge).keys()]:null}getGroup(t){return c(this,ge).get(t)||null}getHash(){if(c(this,dl)!==null)return c(this,dl);const t=new a2;for(const[e,n]of c(this,ge))t.update(`${e}:${n.visible}`);return E(this,dl,t.hexdigest())}[Symbol.iterator](){return c(this,ge).entries()}}dl=new WeakMap,ge=new WeakMap,Rd=new WeakMap,Od=new WeakMap,rg=new WeakSet,t_=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let r=1;r<e;r++){const o=t[r];let u;if(Array.isArray(o))u=D(this,rg,t_).call(this,o);else if(c(this,ge).has(o))u=c(this,ge).get(o).visible;else return Ct(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!u)return!1;break;case"Or":if(u)return!0;break;case"Not":return!u;default:return!0}}return n==="And"};var og,lg;class Uv{constructor(t,e,n){_(this,og,null);_(this,lg,null);$(this,"_fullReader",null);$(this,"_rangeReaders",new Set);$(this,"_source",null);this._source=t,E(this,og,e),E(this,lg,n)}get _progressiveDataLength(){var t;return((t=this._fullReader)==null?void 0:t._loaded)??0}getFullReader(){return te(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new(c(this,og))(this)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new(c(this,lg))(this,t,e);return this._rangeReaders.add(n),n}cancelAllRequests(t){var e;(e=this._fullReader)==null||e.cancel(t);for(const n of new Set(this._rangeReaders))n.cancel(t)}}og=new WeakMap,lg=new WeakMap;class Fv{constructor(t){$(this,"onProgress",null);$(this,"_contentLength",0);$(this,"_filename",null);$(this,"_headersCapability",Promise.withResolvers());$(this,"_isRangeSupported",!1);$(this,"_isStreamingSupported",!1);$(this,"_loaded",0);$(this,"_stream",null);this._stream=t}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){ee("Abstract method `read` called")}cancel(t){ee("Abstract method `cancel` called")}}class Hv{constructor(t,e,n){$(this,"_stream",null);this._stream=t}async read(){ee("Abstract method `read` called")}cancel(t){ee("Abstract method `cancel` called")}}function oN(s){return s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer}var cg,e_;class kj extends Uv{constructor(e){super(e,Uj,Fj);_(this,cg);$(this,"_progressiveDone",!1);$(this,"_queuedChunks",[]);const{pdfDataRangeTransport:n}=e,{initialData:r,progressiveDone:o}=n;if((r==null?void 0:r.length)>0){const u=oN(r);this._queuedChunks.push(u)}this._progressiveDone=o,n.addRangeListener((u,h)=>{D(this,cg,e_).call(this,u,h)}),n.addProgressListener((u,h)=>{var f,p;h!==void 0&&((p=(f=this._fullReader)==null?void 0:f.onProgress)==null||p.call(f,{loaded:u,total:h}))}),n.addProgressiveReadListener(u=>{D(this,cg,e_).call(this,void 0,u)}),n.addProgressiveDoneListener(()=>{var u;(u=this._fullReader)==null||u.progressiveDone(),this._progressiveDone=!0}),n.transportReady()}getFullReader(){const e=super.getFullReader();return this._queuedChunks=null,e}getRangeReader(e,n){const r=super.getRangeReader(e,n);return r&&(r.onDone=()=>this._rangeReaders.delete(r),this._source.pdfDataRangeTransport.requestDataRange(e,n)),r}cancelAllRequests(e){super.cancelAllRequests(e),this._source.pdfDataRangeTransport.abort()}}cg=new WeakSet,e_=function(e,n){const r=oN(n);if(e===void 0)this._fullReader?this._fullReader._enqueue(r):this._queuedChunks.push(r);else{const o=this._rangeReaders.keys().find(u=>u._begin===e);te(o,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),o._enqueue(r)}};class Uj extends Fv{constructor(e){super(e);$(this,"_done",!1);$(this,"_queuedChunks",null);$(this,"_requests",[]);const{pdfDataRangeTransport:n,disableRange:r,disableStream:o}=e._source,{length:u,contentDispositionFilename:h}=n;this._queuedChunks=e._queuedChunks||[];for(const f of this._queuedChunks)this._loaded+=f.byteLength;this._done=e._progressiveDone,this._contentLength=u,this._isStreamingSupported=!o,this._isRangeSupported=!r,O1(h)&&(this._filename=h),this._headersCapability.resolve()}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Fj extends Hv{constructor(e,n,r){super(e,n,r);$(this,"onDone",null);$(this,"_begin",-1);$(this,"_done",!1);$(this,"_queuedChunk",null);$(this,"_requests",[]);this._begin=n}_enqueue(e){var n;if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,(n=this.onDone)==null||n.call(this)}}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){var n;this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,(n=this.onDone)==null||n.call(this)}}function Hj(s){let t=!0,e=n("filename\\*","i").exec(s);if(e){e=e[1];let m=h(e);return m=unescape(m),m=f(m),m=p(m),o(m)}if(e=u(s),e){const m=p(e);return o(m)}if(e=n("filename","i").exec(s),e){e=e[1];let m=h(e);return m=p(m),o(m)}function n(m,y){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(m,y){if(m){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(m,{fatal:!0}),A=Bv(y);y=b.decode(A),t=!1}catch{}}return y}function o(m){return t&&/[\x80-\xff]/.test(m)&&(m=r("utf-8",m),t&&(m=r("iso-8859-1",m))),m}function u(m){const y=[];let b;const A=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=A.exec(m))!==null;){let[,w,x,C]=b;if(w=parseInt(w,10),w in y){if(w===0)break;continue}y[w]=[x,C]}const S=[];for(let w=0;w<y.length&&w in y;++w){let[x,C]=y[w];C=h(C),x&&(C=unescape(C),w===0&&(C=f(C))),S.push(C)}return S.join("")}function h(m){if(m.startsWith('"')){const y=m.slice(1).split('\\"');for(let b=0;b<y.length;++b){const A=y[b].indexOf('"');A!==-1&&(y[b]=y[b].slice(0,A),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}m=y.join('"')}return m}function f(m){const y=m.indexOf("'");if(y===-1)return m;const b=m.slice(0,y),S=m.slice(y+1).replace(/^[^']*'/,"");return r(b,S)}function p(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,A,S){if(A==="q"||A==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,x){return String.fromCharCode(parseInt(x,16))}),r(b,S);try{S=atob(S)}catch{}return r(b,S)})}return""}function y2(s,t){const e=new Headers;if(!s||!t||typeof t!="object")return e;for(const n in t){const r=t[n];r!==void 0&&e.append(n,r)}return e}function Vv(s){var t;return((t=URL.parse(s))==null?void 0:t.origin)??null}function b2({responseHeaders:s,isHttp:t,rangeChunkSize:e,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(s.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*e)||n||!t||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function v2(s){const t=s.get("Content-Disposition");if(t){let e=Hj(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(O1(e))return e}return null}function zv(s,t){return new Kb(`Unexpected server response (${s}) while retrieving PDF "${t}".`,s,s===404||s===0&&t.startsWith("file:"))}function A2(s,t){if(s!==t)throw new Error(`Expected range response-origin "${s}" to match "${t}".`)}function E2(s,t,e,n){return fetch(s,{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"})}function S2(s,t){if(s!==200&&s!==206)throw zv(s,t)}function T2(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(Ct(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class Vj extends Uv{constructor(e){super(e,zj,jj);$(this,"_responseOrigin",null);this.isHttp=/^https?:/i.test(e.url),this.headers=y2(this.isHttp,e.httpHeaders)}}class zj extends Fv{constructor(e){super(e);$(this,"_abortController",new AbortController);$(this,"_reader",null);const{disableRange:n,disableStream:r,length:o,rangeChunkSize:u,url:h,withCredentials:f}=e._source;this._contentLength=o,this._isStreamingSupported=!r,this._isRangeSupported=!n;const p=new Headers(e.headers);E2(h,p,f,this._abortController).then(m=>{e._responseOrigin=Vv(m.url),S2(m.status,h),this._reader=m.body.getReader();const y=m.headers,{allowRangeRequests:b,suggestedLength:A}=b2({responseHeaders:y,isHttp:e.isHttp,rangeChunkSize:u,disableRange:n});this._isRangeSupported=b,this._contentLength=A||this._contentLength,this._filename=v2(y),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ul("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){var r;await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:T2(e),done:!1})}cancel(e){var n;(n=this._reader)==null||n.cancel(e),this._abortController.abort()}}class jj extends Hv{constructor(e,n,r){super(e,n,r);$(this,"_abortController",new AbortController);$(this,"_readCapability",Promise.withResolvers());$(this,"_reader",null);const{url:o,withCredentials:u}=e._source,h=new Headers(e.headers);h.append("Range",`bytes=${n}-${r-1}`),E2(o,h,u,this._abortController).then(f=>{const p=Vv(f.url);A2(p,e._responseOrigin),S2(f.status,o),this._reader=f.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:{value:T2(e),done:!1}}cancel(e){var n;(n=this._reader)==null||n.cancel(e),this._abortController.abort()}}const zS=200,lN=206;function Gj(s){return typeof s!="string"?s:Bv(s).buffer}var Pa,Af,_2,w2;class Yj extends Uv{constructor(e){super(e,Xj,qj);_(this,Af);_(this,Pa,new WeakMap);$(this,"_responseOrigin",null);this.url=e.url,this.isHttp=/^https?:/i.test(this.url),this.headers=y2(this.isHttp,e.httpHeaders)}_request(e){const n=new XMLHttpRequest,r={validateStatus:null,onHeadersReceived:e.onHeadersReceived,onDone:e.onDone,onError:e.onError,onProgress:e.onProgress};c(this,Pa).set(n,r),n.open("GET",this.url),n.withCredentials=this._source.withCredentials;for(const[o,u]of this.headers)n.setRequestHeader(o,u);return this.isHttp&&"begin"in e&&"end"in e?(n.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.validateStatus=o=>o===lN||o===zS):r.validateStatus=o=>o===zS,n.responseType="arraybuffer",te(e.onError,"Expected `onError` callback to be provided."),n.onerror=()=>e.onError(n.status),n.onreadystatechange=D(this,Af,w2).bind(this,n),n.onprogress=D(this,Af,_2).bind(this,n),n.send(null),n}_abortRequest(e){c(this,Pa).has(e)&&(c(this,Pa).delete(e),e.abort())}getRangeReader(e,n){const r=super.getRangeReader(e,n);return r&&(r.onClosed=()=>this._rangeReaders.delete(r)),r}}Pa=new WeakMap,Af=new WeakSet,_2=function(e,n){var o;const r=c(this,Pa).get(e);(o=r==null?void 0:r.onProgress)==null||o.call(r,n)},w2=function(e,n){const r=c(this,Pa).get(e);if(!r||(e.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),e.readyState!==4)||!c(this,Pa).has(e))return;if(c(this,Pa).delete(e),e.status===0&&this.isHttp){r.onError(e.status);return}const o=e.status||zS;if(!r.validateStatus(o)){r.onError(e.status);return}const u=Gj(e.response);if(o===lN){const h=e.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(h)?r.onDone(u):(Ct('Missing or invalid "Content-Range" header.'),r.onError(0))}else u?r.onDone(u):r.onError(e.status)};var $a,x2,C2,D2,M2;class Xj extends Fv{constructor(e){super(e);_(this,$a);$(this,"_cachedChunks",[]);$(this,"_done",!1);$(this,"_requests",[]);$(this,"_storedError",null);const{length:n}=e._source;this._contentLength=n,this._fullRequestXhr=e._request({onHeadersReceived:D(this,$a,x2).bind(this),onDone:D(this,$a,C2).bind(this),onError:D(this,$a,D2).bind(this),onProgress:D(this,$a,M2).bind(this)})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}$a=new WeakSet,x2=function(){const e=this._stream,{disableRange:n,rangeChunkSize:r}=e._source,o=this._fullRequestXhr;e._responseOrigin=Vv(o.responseURL);const u=o.getAllResponseHeaders(),h=new Headers(u?u.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(m=>{const[y,...b]=m.split(": ");return[y,b.join(": ")]}):[]),{allowRangeRequests:f,suggestedLength:p}=b2({responseHeaders:h,isHttp:e.isHttp,rangeChunkSize:r,disableRange:n});f&&(this._isRangeSupported=!0),this._contentLength=p||this._contentLength,this._filename=v2(h),this._isRangeSupported&&e._abortRequest(o),this._headersCapability.resolve()},C2=function(e){if(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._cachedChunks.push(e),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}},D2=function(e){this._storedError=zv(e,this._stream.url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0},M2=function(e){var n;(n=this.onProgress)==null||n.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})};var co,R2,O2,n_;class qj extends Hv{constructor(e,n,r){super(e,n,r);_(this,co);$(this,"onClosed",null);$(this,"_done",!1);$(this,"_queuedChunk",null);$(this,"_requests",[]);$(this,"_storedError",null);this._requestXhr=e._request({begin:n,end:r,onHeadersReceived:D(this,co,R2).bind(this),onDone:D(this,co,O2).bind(this),onError:D(this,co,n_).bind(this),onProgress:null})}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){var n;this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),(n=this.onClosed)==null||n.call(this)}}co=new WeakSet,R2=function(){var n;const e=Vv((n=this._requestXhr)==null?void 0:n.responseURL);try{A2(e,this._stream._responseOrigin)}catch(r){this._storedError=r,D(this,co,n_).call(this,0)}},O2=function(e){var n;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,(n=this.onClosed)==null||n.call(this)},n_=function(e){this._storedError??(this._storedError=zv(e,this._stream.url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null};const Kj=/^[a-z][a-z0-9\-+.]+:/i;function $j(s){if(Kj.test(s))return new URL(s);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(s))}function N2(s){const{Readable:t}=process.getBuiltinModule("stream");return typeof t.toWeb=="function"?t.toWeb(s):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(s)}function L2(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(Ct(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class Wj extends Uv{constructor(t){super(t,Qj,Zj),this.url=$j(t.url),te(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class Qj extends Fv{constructor(e){super(e);$(this,"_reader",null);const{disableRange:n,disableStream:r,length:o,rangeChunkSize:u}=e._source;this._contentLength=o,this._isStreamingSupported=!r,this._isRangeSupported=!n;const h=e.url,f=process.getBuiltinModule("fs");f.promises.lstat(h).then(p=>{const m=f.createReadStream(h),y=N2(m);this._reader=y.getReader();const{size:b}=p;b<=2*u&&(this._isRangeSupported=!1),this._contentLength=b,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ul("Streaming is disabled.")),this._headersCapability.resolve()}).catch(p=>{p.code==="ENOENT"&&(p=zv(0,h.href)),this._headersCapability.reject(p)})}async read(){var r;await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:L2(e),done:!1})}cancel(e){var n;(n=this._reader)==null||n.cancel(e)}}class Zj extends Hv{constructor(e,n,r){super(e,n,r);$(this,"_readCapability",Promise.withResolvers());$(this,"_reader",null);const o=e.url,u=process.getBuiltinModule("fs");try{const h=u.createReadStream(o,{start:n,end:r-1}),f=N2(h);this._reader=f.getReader(),this._readCapability.resolve()}catch(h){this._readCapability.reject(h)}}async read(){await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:{value:L2(e),done:!1}}cancel(e){var n;(n=this._reader)==null||n.cancel(e)}}const wp=Symbol("INITIAL_DATA");var Ki,ug,i_;class I2{constructor(){_(this,ug);_(this,Ki,Object.create(null))}get(t,e=null){if(e){const r=D(this,ug,i_).call(this,t);return r.promise.then(()=>e(r.data)),null}const n=c(this,Ki)[t];if(!n||n.data===wp)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=c(this,Ki)[t];return!!e&&e.data!==wp}delete(t){const e=c(this,Ki)[t];return!e||e.data===wp?!1:(delete c(this,Ki)[t],!0)}resolve(t,e=null){const n=D(this,ug,i_).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in c(this,Ki)){const{data:n}=c(this,Ki)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}E(this,Ki,Object.create(null))}*[Symbol.iterator](){for(const t in c(this,Ki)){const{data:e}=c(this,Ki)[t];e!==wp&&(yield[t,e])}}}Ki=new WeakMap,ug=new WeakSet,i_=function(t){var e;return(e=c(this,Ki))[t]||(e[t]={...Promise.withResolvers(),data:wp})};const Jj=1e5,cN=30;var dN,fl,xi,hg,dg,Xc,Fr,fg,pg,qc,mg,Nd,pl,Ld,gg,Id,Kc,yg,bg,Pd,$c,vg,Bd,kd,uo,P2,B2,s_,fs,pb,a_,k2,U2;const On=class On{constructor({textContentSource:t,container:e,viewport:n}){_(this,uo);_(this,fl,Promise.withResolvers());_(this,xi,null);_(this,hg,!1);_(this,dg,!!((dN=globalThis.FontInspector)!=null&&dN.enabled));_(this,Xc,null);_(this,Fr,null);_(this,fg,0);_(this,pg,0);_(this,qc,null);_(this,mg,null);_(this,Nd,0);_(this,pl,0);_(this,Ld,Object.create(null));_(this,gg,[]);_(this,Id,null);_(this,Kc,[]);_(this,yg,new WeakMap);_(this,bg,null);var f;if(t instanceof ReadableStream)E(this,Id,t);else if(typeof t=="object")E(this,Id,new ReadableStream({start(p){p.enqueue(t),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');E(this,xi,E(this,mg,e)),E(this,pl,n.scale*Ka.pixelRatio),E(this,Nd,n.rotation),E(this,Fr,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:o,pageX:u,pageY:h}=n.rawDims;E(this,bg,[1,0,0,-1,-u,h+o]),E(this,pg,r),E(this,fg,o),D(f=On,fs,k2).call(f),e.style.setProperty("--min-font-size",c(On,Bd)),Ru(e,n),c(this,fl).promise.finally(()=>{c(On,kd).delete(this),E(this,Fr,null),E(this,Ld,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=gn.platform;return Dt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{c(this,qc).read().then(({value:e,done:n})=>{if(n){c(this,fl).resolve();return}c(this,Xc)??E(this,Xc,e.lang),Object.assign(c(this,Ld),e.styles),D(this,uo,P2).call(this,e.items),t()},c(this,fl).reject)};return E(this,qc,c(this,Id).getReader()),c(On,kd).add(this),t(),c(this,fl).promise}update({viewport:t,onBefore:e=null}){var o;const n=t.scale*Ka.pixelRatio,r=t.rotation;if(r!==c(this,Nd)&&(e==null||e(),E(this,Nd,r),Ru(c(this,mg),{rotation:r})),n!==c(this,pl)){e==null||e(),E(this,pl,n);const u={div:null,properties:null,ctx:D(o=On,fs,pb).call(o,c(this,Xc))};for(const h of c(this,Kc))u.properties=c(this,yg).get(h),u.div=h,D(this,uo,s_).call(this,u)}}cancel(){var e;const t=new Ul("TextLayer task cancelled.");(e=c(this,qc))==null||e.cancel(t).catch(()=>{}),E(this,qc,null),c(this,fl).reject(t)}get textDivs(){return c(this,Kc)}get textContentItemsStr(){return c(this,gg)}static cleanup(){if(!(c(this,kd).size>0)){c(this,Pd).clear();for(const{canvas:t}of c(this,$c).values())t.remove();c(this,$c).clear()}}};fl=new WeakMap,xi=new WeakMap,hg=new WeakMap,dg=new WeakMap,Xc=new WeakMap,Fr=new WeakMap,fg=new WeakMap,pg=new WeakMap,qc=new WeakMap,mg=new WeakMap,Nd=new WeakMap,pl=new WeakMap,Ld=new WeakMap,gg=new WeakMap,Id=new WeakMap,Kc=new WeakMap,yg=new WeakMap,bg=new WeakMap,Pd=new WeakMap,$c=new WeakMap,vg=new WeakMap,Bd=new WeakMap,kd=new WeakMap,uo=new WeakSet,P2=function(t){var r,o;if(c(this,hg))return;(o=c(this,Fr)).ctx??(o.ctx=D(r=On,fs,pb).call(r,c(this,Xc)));const e=c(this,Kc),n=c(this,gg);for(const u of t){if(e.length>Jj){Ct("Ignoring additional textDivs for performance reasons."),E(this,hg,!0);return}if(u.str===void 0){if(u.type==="beginMarkedContentProps"||u.type==="beginMarkedContent"){const h=c(this,xi);E(this,xi,document.createElement("span")),c(this,xi).classList.add("markedContent"),u.id&&c(this,xi).setAttribute("id",`${u.id}`),u.tag==="Artifact"&&(c(this,xi).ariaHidden=!0),h.append(c(this,xi))}else u.type==="endMarkedContent"&&E(this,xi,c(this,xi).parentNode);continue}n.push(u.str),D(this,uo,B2).call(this,u)}},B2=function(t){var S;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};c(this,Kc).push(e);const r=ot.transform(c(this,bg),t.transform);let o=Math.atan2(r[1],r[0]);const u=c(this,Ld)[t.fontName];u.vertical&&(o+=Math.PI/2);let h=c(this,dg)&&u.fontSubstitution||u.fontFamily;h=On.fontFamilyMap.get(h)||h;const f=Math.hypot(r[2],r[3]),p=f*D(S=On,fs,U2).call(S,h,u,c(this,Xc));let m,y;o===0?(m=r[4],y=r[5]-p):(m=r[4]+p*Math.sin(o),y=r[5]-p*Math.cos(o));const b=e.style;b.left=`${(100*m/c(this,pg)).toFixed(2)}%`,b.top=`${(100*y/c(this,fg)).toFixed(2)}%`,b.setProperty("--font-height",`${f.toFixed(2)}px`),b.fontFamily=h,n.fontSize=f,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,c(this,dg)&&(e.dataset.fontName=u.fontSubstitutionLoadedName||t.fontName),o!==0&&(n.angle=o*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const w=Math.abs(t.transform[0]),x=Math.abs(t.transform[3]);w!==x&&Math.max(w,x)/Math.min(w,x)>1.5&&(A=!0)}if(A&&(n.canvasWidth=u.vertical?t.height:t.width),c(this,yg).set(e,n),c(this,Fr).div=e,c(this,Fr).properties=n,D(this,uo,s_).call(this,c(this,Fr)),n.hasText&&c(this,xi).append(e),n.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),c(this,xi).append(w)}},s_=function(t){var u;const{div:e,properties:n,ctx:r}=t,{style:o}=e;if(n.canvasWidth!==0&&n.hasText){const{fontFamily:h}=o,{canvasWidth:f,fontSize:p}=n;D(u=On,fs,a_).call(u,r,p*c(this,pl),h);const{width:m}=r.measureText(e.textContent);m>0&&o.setProperty("--scale-x",f*c(this,pl)/m)}n.angle!==0&&o.setProperty("--rotate",`${n.angle}deg`)},fs=new WeakSet,pb=function(t=null){let e=c(this,$c).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,$c).set(t,e),c(this,vg).set(e,{size:0,family:""})}return e},a_=function(t,e,n){const r=c(this,vg).get(t);e===r.size&&n===r.family||(t.font=`${e}px ${n}`,r.size=e,r.family=n)},k2=function(){if(c(this,Bd)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),E(this,Bd,t.getBoundingClientRect().height),t.remove()},U2=function(t,e,n){const r=c(this,Pd).get(t);if(r)return r;const o=D(this,fs,pb).call(this,n);o.canvas.width=o.canvas.height=cN,D(this,fs,a_).call(this,o,cN,t);const u=o.measureText(""),h=u.fontBoundingBoxAscent,f=Math.abs(u.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let p=.8;return h?p=h/(h+f):(gn.platform.isFirefox&&Ct("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?p=e.ascent:e.descent&&(p=1+e.descent)),c(this,Pd).set(t,p),p},_(On,fs),_(On,Pd,new Map),_(On,$c,new Map),_(On,vg,new WeakMap),_(On,Bd,null),_(On,kd,new Set);let hm=On;const t5=100;function F2(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const t=new r_,{docId:e}=t,n=s.url?lj(s.url):null,r=s.data?cj(s.data):null,o=s.httpHeaders||null,u=s.withCredentials===!0,h=s.password??null,f=s.range instanceof H2?s.range:null,p=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:2**16;let m=s.worker instanceof dm?s.worker:null;const y=s.verbosity,b=typeof s.docBaseUrl=="string"&&!kv(s.docBaseUrl)?s.docBaseUrl:null,A=j0(s.cMapUrl),S=s.cMapPacked!==!1,w=s.CMapReaderFactory||(ri?yj:qO),x=j0(s.iccUrl),C=j0(s.standardFontDataUrl),O=s.StandardFontDataFactory||(ri?bj:KO),M=j0(s.wasmUrl),N=s.WasmFactory||(ri?vj:$O),L=s.stopAtErrors!==!0,I=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,k=s.isEvalSupported!==!1,j=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!ri,W=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!ri&&(gn.platform.isFirefox||!globalThis.chrome),nt=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,et=typeof s.disableFontFace=="boolean"?s.disableFontFace:ri,ht=s.fontExtraProperties===!0,mt=s.enableXfa===!0,gt=s.ownerDocument||globalThis.document,vt=s.disableRange===!0,F=s.disableStream===!0,X=s.disableAutoFetch===!0,it=s.pdfBug===!0,dt=s.CanvasFactory||(ri?gj:fj),Tt=s.FilterFactory||(ri?mj:pj),B=s.enableHWA===!0,q=s.useWasm!==!1,tt=f?f.length:s.length??NaN,at=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!ri&&!et,lt=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:!!(w===qO&&O===KO&&N===$O&&A&&C&&M&&Rp(A,document.baseURI)&&Rp(C,document.baseURI)&&Rp(M,document.baseURI)),At=null;Pz(y);const Et={canvasFactory:new dt({ownerDocument:gt,enableHWA:B}),filterFactory:new Tt({docId:e,ownerDocument:gt}),cMapReaderFactory:lt?null:new w({baseUrl:A,isCompressed:S}),standardFontDataFactory:lt?null:new O({baseUrl:C}),wasmFactory:lt?null:new N({baseUrl:M})};m||(m=dm.create({verbosity:y,port:Ya.workerPort}),t._worker=m);const qe={docId:e,apiVersion:"5.4.624",data:r,password:h,disableAutoFetch:X,rangeChunkSize:p,length:tt,docBaseUrl:b,enableXfa:mt,evaluatorOptions:{maxImageSize:I,disableFontFace:et,ignoreErrors:L,isEvalSupported:k,isOffscreenCanvasSupported:j,isImageDecoderSupported:W,canvasMaxAreaInBytes:nt,fontExtraProperties:ht,useSystemFonts:at,useWasm:q,useWorkerFetch:lt,cMapUrl:A,iccUrl:x,standardFontDataUrl:C,wasmUrl:M}},le={ownerDocument:gt,pdfBug:it,styleElement:At,enableHWA:B,loadingParams:{disableAutoFetch:X,enableXfa:mt}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Ni=m.messageHandler.sendWithPromise("GetDocRequest",qe,r?[r.buffer]:null);let Zn;if(f)Zn=new kj({pdfDataRangeTransport:f,disableRange:vt,disableStream:F});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");const xt=Rp(n)?Vj:ri?Wj:Yj;Zn=new xt({url:n,length:tt,httpHeaders:o,withCredentials:u,rangeChunkSize:p,disableRange:vt,disableStream:F})}return Ni.then(xt=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Nt=new Up(e,xt,m.port),Ut=new i5(Nt,t,Zn,le,Et);t._transport=Ut,Nt.send("Ready",null)})}).catch(t._capability.reject),t}var gv;const yv=class yv{constructor(){$(this,"_capability",Promise.withResolvers());$(this,"_transport",null);$(this,"_worker",null);$(this,"docId",`d${un(yv,gv)._++}`);$(this,"destroyed",!1);$(this,"onPassword",null);$(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,n,r;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(o){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,o}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};gv=new WeakMap,_(yv,gv,0);let r_=yv;var Wc,Ag,Eg,Sg,Tg;class H2{constructor(t,e,n=!1,r=null){_(this,Wc,Promise.withResolvers());_(this,Ag,[]);_(this,Eg,[]);_(this,Sg,[]);_(this,Tg,[]);this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(t){c(this,Tg).push(t)}addProgressListener(t){c(this,Sg).push(t)}addProgressiveReadListener(t){c(this,Eg).push(t)}addProgressiveDoneListener(t){c(this,Ag).push(t)}onDataRange(t,e){for(const n of c(this,Tg))n(t,e)}onDataProgress(t,e){c(this,Wc).promise.then(()=>{for(const n of c(this,Sg))n(t,e)})}onDataProgressiveRead(t){c(this,Wc).promise.then(()=>{for(const e of c(this,Eg))e(t)})}onDataProgressiveDone(){c(this,Wc).promise.then(()=>{for(const t of c(this,Ag))t()})}transportReady(){c(this,Wc).resolve()}requestDataRange(t,e){ee("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Wc=new WeakMap,Ag=new WeakMap,Eg=new WeakMap,Sg=new WeakMap,Tg=new WeakMap;class e5{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Dt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Hr,_g,Qc,jp;class n5{constructor(t,e,n,r=!1){_(this,Qc);_(this,Hr,!1);_(this,_g,um.instance);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=r?new HO:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new I2,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(t){this._pageIndex=t-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:o=!1}={}){return new dy({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Dt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:r="display",annotationMode:o=Vo.ENABLE,transform:u=null,background:h=null,optionalContentConfigPromise:f=null,annotationCanvasMap:p=null,pageColors:m=null,printAnnotationStorage:y=null,isEditing:b=!1,recordOperations:A=!1,operationsFilter:S=null}){var W,nt,et;(W=this._stats)==null||W.time("Overall");const w=this._transport.getRenderingIntent(r,o,y,b),{renderingIntent:x,cacheKey:C}=w;E(this,Hr,!1),f||(f=this._transport.getOptionalContentConfig(x));let O=this._intentStates.get(C);O||(O=Object.create(null),this._intentStates.set(C,O)),O.streamReaderCancelTimeout&&(clearTimeout(O.streamReaderCancelTimeout),O.streamReaderCancelTimeout=null);const M=!!(x&cs.PRINT);O.displayReadyCapability||(O.displayReadyCapability=Promise.withResolvers(),O.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(nt=this._stats)==null||nt.time("Page Request"),this._pumpOperatorList(w));const N=!!(this._pdfBug&&((et=globalThis.StepperManager)!=null&&et.enabled)),L=!this.recordedBBoxes&&(A||N),I=ht=>{var mt,gt;if(O.renderTasks.delete(k),L){const vt=(mt=k.gfx)==null?void 0:mt.dependencyTracker.take();vt&&(k.stepper&&k.stepper.setOperatorBBoxes(vt,k.gfx.dependencyTracker.takeDebugMetadata()),A&&(this.recordedBBoxes=vt))}M&&E(this,Hr,!0),D(this,Qc,jp).call(this),ht?(k.capability.reject(ht),this._abortOperatorList({intentState:O,reason:ht instanceof Error?ht:new Error(ht)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(gt=globalThis.Stats)!=null&&gt.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new o_({callback:I,params:{canvas:e,canvasContext:t,dependencyTracker:L?new Ej(e,O.operatorList.length,N):null,viewport:n,transform:u,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:p,operatorList:O.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!M,pdfBug:this._pdfBug,pageColors:m,enableHWA:this._transport.enableHWA,operationsFilter:S});(O.renderTasks||(O.renderTasks=new Set)).add(k);const j=k.task;return Promise.all([O.displayReadyCapability.promise,f]).then(([ht,mt])=>{var gt;if(this.destroyed){I();return}if((gt=this._stats)==null||gt.time("Rendering"),!(mt.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:ht,optionalContentConfig:mt}),k.operatorListChanged()}).catch(I),j}getOperatorList({intent:t="display",annotationMode:e=Vo.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var p;function o(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(f))}const u=this._transport.getRenderingIntent(t,e,n,r,!0);let h=this._intentStates.get(u.cacheKey);h||(h=Object.create(null),this._intentStates.set(u.cacheKey,h));let f;return h.opListReadCapability||(f=Object.create(null),f.operatorListChanged=o,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||(h.renderTasks=new Set)).add(f),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(u)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:c(this,_g).getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>cm.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,r){function o(){u.read().then(function({value:f,done:p}){if(p){n(h);return}h.lang??(h.lang=f.lang),Object.assign(h.styles,f.styles),h.items.push(...f.items),o()},r)}const u=e.getReader(),h={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),E(this,Hr,!1),Promise.all(t)}cleanup(t=!1){E(this,Hr,!0);const e=D(this,Qc,jp).call(this);return t&&e&&this._stats&&(this._stats=new HO),e}_startRenderPage(t,e){var r,o;const n=this._intentStates.get(e);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(o=n.displayReadyCapability)==null||o.resolve(t))}_renderPageChunk(t,e){for(let n=0,r=t.length;n<r;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&D(this,Qc,jp).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:r}){const{map:o,transfer:u}=n,f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:c(this,_g).getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:r},u).getReader(),p=this._intentStates.get(e);p.streamReader=f;const m=()=>{f.read().then(({value:y,done:b})=>{if(b){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,p),m())},y=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const b of p.renderTasks)b.operatorListChanged();D(this,Qc,jp).call(this)}if(p.displayReadyCapability)p.displayReadyCapability.reject(y);else if(p.opListReadCapability)p.opListReadCapability.reject(y);else throw y}})};m()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof R1){let r=t5;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new Ul(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Hr=new WeakMap,_g=new WeakMap,Qc=new WeakSet,jp=function(){if(!c(this,Hr)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),E(this,Hr,!1),!0};var ml,sa,Vr,Zc,bv,Jc,tu,ci,mb,V2,z2,Gp,Ud,gb;const Me=class Me{constructor({name:t=null,port:e=null,verbosity:n=Bz()}={}){_(this,ci);_(this,ml,Promise.withResolvers());_(this,sa,null);_(this,Vr,null);_(this,Zc,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(c(Me,tu).has(e))throw new Error("Cannot use more than one PDFWorker per port.");c(Me,tu).set(e,this),D(this,ci,V2).call(this,e)}else D(this,ci,z2).call(this)}get promise(){return c(this,ml).promise}get port(){return c(this,Vr)}get messageHandler(){return c(this,sa)}destroy(){var t,e;this.destroyed=!0,(t=c(this,Zc))==null||t.terminate(),E(this,Zc,null),c(Me,tu).delete(c(this,Vr)),E(this,Vr,null),(e=c(this,sa))==null||e.destroy(),E(this,sa,null)}static create(t){const e=c(this,tu).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Me(t)}static get workerSrc(){if(Ya.workerSrc)return Ya.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Dt(this,"_setupFakeWorkerGlobal",(async()=>c(this,Ud,gb)?c(this,Ud,gb):(await import(this.workerSrc)).WorkerMessageHandler)())}};ml=new WeakMap,sa=new WeakMap,Vr=new WeakMap,Zc=new WeakMap,bv=new WeakMap,Jc=new WeakMap,tu=new WeakMap,ci=new WeakSet,mb=function(){c(this,ml).resolve(),c(this,sa).send("configure",{verbosity:this.verbosity})},V2=function(t){E(this,Vr,t),E(this,sa,new Up("main","worker",t)),c(this,sa).on("ready",()=>{}),D(this,ci,mb).call(this)},z2=function(){if(c(Me,Jc)||c(Me,Ud,gb)){D(this,ci,Gp).call(this);return}let{workerSrc:t}=Me;try{Me._isSameOrigin(window.location,t)||(t=Me._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new Up("main","worker",e),r=()=>{o.abort(),n.destroy(),e.terminate(),this.destroyed?c(this,ml).reject(new Error("Worker was destroyed")):D(this,ci,Gp).call(this)},o=new AbortController;e.addEventListener("error",()=>{c(this,Zc)||r()},{signal:o.signal}),n.on("test",h=>{if(o.abort(),this.destroyed||!h){r();return}E(this,sa,n),E(this,Vr,e),E(this,Zc,e),D(this,ci,mb).call(this)}),n.on("ready",h=>{if(o.abort(),this.destroyed){r();return}try{u()}catch{D(this,ci,Gp).call(this)}});const u=()=>{const h=new Uint8Array;n.send("test",h,[h.buffer])};u();return}catch{Pv("The worker has been disabled.")}D(this,ci,Gp).call(this)},Gp=function(){c(Me,Jc)||(Ct("Setting up fake worker."),E(Me,Jc,!0)),Me._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){c(this,ml).reject(new Error("Worker was destroyed"));return}const e=new dj;E(this,Vr,e);const n=`fake${un(Me,bv)._++}`,r=new Up(n+"_worker",n,e);t.setup(r,e),E(this,sa,new Up(n,n+"_worker",e)),D(this,ci,mb).call(this)}).catch(t=>{c(this,ml).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Ud=new WeakSet,gb=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},_(Me,Ud),_(Me,bv,0),_(Me,Jc,!1),_(Me,tu,new WeakMap),ri&&(E(Me,Jc,!0),Ya.workerSrc||(Ya.workerSrc="./pdf.worker.mjs")),Me._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const r=new URL(e,n);return n.origin===r.origin},Me._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Me.fromPort=t=>{if(Kz("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Me.create(t)};let dm=Me;var $i,zr,jr,Bs,gl,Fd,Gr,Ci,ds,j2,Yp,yb;class i5{constructor(t,e,n,r,o){_(this,ds);$(this,"downloadInfoCapability",Promise.withResolvers());_(this,$i,null);_(this,zr,new Map);_(this,jr,null);_(this,Bs,new Map);_(this,gl,new Map);_(this,Fd,new Map);_(this,Gr,null);_(this,Ci,um.instance);this.messageHandler=t,this.loadingTask=e,E(this,jr,n),this.commonObjs=new I2,this.fontLoader=new aj({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.enableHWA=r.enableHWA,this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),c(this,Ci).addListener(D(this,ds,j2).bind(this))}get annotationStorage(){return Dt(this,"annotationStorage",new N1)}getRenderingIntent(t,e=Vo.ENABLE,n=null,r=!1,o=!1){let u=cs.DISPLAY,h=VT;switch(t){case"any":u=cs.ANY;break;case"display":break;case"print":u=cs.PRINT;break;default:Ct(`getRenderingIntent - invalid intent: ${t}`)}const f=u&cs.PRINT&&n instanceof o2?n:this.annotationStorage;switch(e){case Vo.DISABLE:u+=cs.ANNOTATIONS_DISABLE;break;case Vo.ENABLE:break;case Vo.ENABLE_FORMS:u+=cs.ANNOTATIONS_FORMS;break;case Vo.ENABLE_STORAGE:u+=cs.ANNOTATIONS_STORAGE,h=f.serializable;break;default:Ct(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(u+=cs.IS_EDITING),o&&(u+=cs.OPLIST);const{ids:p,hash:m}=f.modifiedIds,y=[u,h.hash,m];return{renderingIntent:u,cacheKey:y.join("_"),annotationStorageSerializable:h,modifiedIds:p}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=c(this,Gr))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const r of c(this,Bs).values())t.push(r._destroy());c(this,Bs).clear(),c(this,gl).clear(),c(this,Fd).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var r,o;this.commonObjs.clear(),this.fontLoader.clear(),c(this,zr).clear(),this.filterFactory.destroy(),hm.cleanup(),(r=c(this,jr))==null||r.cancelAllRequests(new Ul("Worker was terminated.")),(o=this.messageHandler)==null||o.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,r)=>{te(c(this,jr),"GetReader - no `BasePDFStream` instance available."),E(this,$i,c(this,jr).getFullReader()),c(this,$i).onProgress=o=>D(this,ds,yb).call(this,o),r.onPull=()=>{c(this,$i).read().then(function({value:o,done:u}){if(u){r.close();return}te(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{c(this,$i).cancel(o),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("ReaderHeadersReady",async n=>{await c(this,$i).headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:u}=c(this,$i);return r&&o&&(c(this,$i).onProgress=null),{isStreamingSupported:r,isRangeSupported:o,contentLength:u}}),t.on("GetRangeReader",(n,r)=>{te(c(this,jr),"GetRangeReader - no `BasePDFStream` instance available.");const o=c(this,jr).getRangeReader(n.begin,n.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:u,done:h}){if(h){r.close();return}te(u instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(u),1,[u])}).catch(u=>{r.error(u)})},r.onCancel=u=>{o.cancel(u),r.ready.catch(h=>{if(!this.destroyed)throw h})}}),t.on("GetDoc",({pdfInfo:n})=>{c(this,Ci).pagesNumber=n.numPages,this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new e5(n,this))}),t.on("DocException",n=>{e._capability.reject(Ai(n))}),t.on("PasswordRequest",n=>{E(this,Gr,Promise.withResolvers());try{if(!e.onPassword)throw Ai(n);const r=o=>{o instanceof Error?c(this,Gr).reject(o):c(this,Gr).resolve({password:o})};e.onPassword(r,n.code)}catch(r){c(this,Gr).reject(r)}return c(this,Gr).promise}),t.on("DataLoaded",n=>{D(this,ds,yb).call(this,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;c(this,Bs).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,r,o])=>{var u;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in o){const b=o.error;Ct(`Error during font loading: ${b}`),this.commonObjs.resolve(n,b);break}const h=new zT(o),f=this._params.pdfBug&&((u=globalThis.FontInspector)!=null&&u.enabled)?(b,A)=>globalThis.FontInspector.fontAdded(b,A):null,p=new rj(h,f,o.extra,o.charProcOperatorList);this.fontLoader.bind(p).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!p.fontExtraProperties&&p.data&&p.clearData(),this.commonObjs.resolve(n,p)});break;case"CopyLocalImage":const{imageRef:m}=o;te(m,"The imageRef must be defined.");for(const b of c(this,Bs).values())for(const[,A]of b.objs)if((A==null?void 0:A.ref)===m)return A.dataLen?(this.commonObjs.resolve(n,structuredClone(A)),A.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new oj(o));break;case"Image":this.commonObjs.resolve(n,o);break;case"Pattern":const y=new jT(o);this.commonObjs.resolve(n,y.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([n,r,o,u])=>{var f;if(this.destroyed)return;const h=c(this,Bs).get(r);if(!h.objs.has(n)){if(h._intentStates.size===0){(f=u==null?void 0:u.bitmap)==null||f.close();return}switch(o){case"Image":case"Pattern":h.objs.resolve(n,u);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",n=>{this.destroyed||D(this,ds,yb).call(this,n)}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Ct("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=c(this,$i))==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>c(this,Ci).pagesNumber)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=c(this,Ci).getPageId(t)-1,r=c(this,gl).get(e);if(r)return r;const o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(u=>{if(this.destroyed)throw new Error("Transport destroyed");u.refStr&&c(this,Fd).set(u.refStr,n);const h=new n5(e,u,this,this._params.pdfBug);return c(this,Bs).set(e,h),h});return c(this,gl).set(e,o),o}async getPageIndex(t){if(!GT(t))throw new Error("Invalid pageIndex request.");const e=await this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen});return c(this,Ci).getPageNumber(e+1)-1}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:c(this,Ci).getPageId(t+1)-1,intent:e})}getFieldObjects(){return D(this,ds,Yp).call(this,"GetFieldObjects")}hasJSActions(){return D(this,ds,Yp).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return D(this,ds,Yp).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:c(this,Ci).getPageId(t+1)-1})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:c(this,Ci).getPageId(t+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return D(this,ds,Yp).call(this,"GetOptionalContentConfig").then(e=>new Bj(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=c(this,zr).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(r=>{var o,u;return{info:r[0],metadata:r[1]?new Ij(r[1]):null,contentDispositionFilename:((o=c(this,$i))==null?void 0:o.filename)??null,contentLength:((u=c(this,$i))==null?void 0:u.contentLength)??null,hasStructTree:r[2]}});return c(this,zr).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of c(this,Bs).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),c(this,zr).clear(),this.filterFactory.destroy(!0),hm.cleanup()}}cachedPageNumber(t){if(!GT(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`,n=c(this,Fd).get(e);return n>=0?c(this,Ci).getPageNumber(n+1):null}}$i=new WeakMap,zr=new WeakMap,jr=new WeakMap,Bs=new WeakMap,gl=new WeakMap,Fd=new WeakMap,Gr=new WeakMap,Ci=new WeakMap,ds=new WeakSet,j2=function(){const t=new Map,e=new Map;for(let n=0,r=c(this,Ci).pagesNumber;n<r;n++){const o=c(this,Ci).getPrevPageNumber(n+1)-1,u=c(this,Bs).get(o);u&&t.set(n,u);const h=c(this,gl).get(o);h&&e.set(n,h)}E(this,Bs,t),E(this,gl,e)},Yp=function(t,e=null){const n=c(this,zr).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise(t,e);return c(this,zr).set(t,r),r},yb=function({loaded:t,total:e}){var n,r;(r=(n=this.loadingTask).onProgress)==null||r.call(n,{loaded:t,total:e,percent:Un(Math.round(t/e*100),0,100)})};class s5{constructor(t){$(this,"_internalRenderTask",null);$(this,"onContinue",null);$(this,"onError",null);this._internalRenderTask=t}get promise(){return this._internalRenderTask.capability.promise}cancel(t=0){this._internalRenderTask.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this._internalRenderTask.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this._internalRenderTask;return t.form||t.canvas&&(e==null?void 0:e.size)>0}}var yl,eu;const fc=class fc{constructor({callback:t,params:e,objs:n,commonObjs:r,annotationCanvasMap:o,operatorList:u,pageIndex:h,canvasFactory:f,filterFactory:p,useRequestAnimationFrame:m=!1,pdfBug:y=!1,pageColors:b=null,enableHWA:A=!1,operationsFilter:S=null}){_(this,yl,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=u,this._pageIndex=h,this.canvasFactory=f,this.filterFactory=p,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new s5(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=A,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=S}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var f,p;if(this.cancelled)return;if(this._canvas){if(c(fc,eu).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(fc,eu).add(this._canvas)}this._pdfBug&&((f=globalThis.StepperManager)!=null&&f.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:r,background:o,dependencyTracker:u}=this.params,h=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Gh(h,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,u),this.gfx.beginDrawing({transform:r,viewport:n,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(p=this.graphicsReadyCallback)==null||p.call(this)}cancel(t=null,e=0){var n,r,o;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),c(this,yl)&&(window.cancelAnimationFrame(c(this,yl)),E(this,yl,null)),c(fc,eu).delete(this._canvas),t||(t=new R1(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(o=(r=this.task).onError)==null||o.call(r,t)}operatorListChanged(){var t,e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.gfx.dependencyTracker)==null||t.growOperationsCount(this.operatorList.fnArray.length),(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?E(this,yl,window.requestAnimationFrame(()=>{E(this,yl,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(fc,eu).delete(this._canvas),this.callback())))}};yl=new WeakMap,eu=new WeakMap,_(fc,eu,new WeakSet);let o_=fc;const a5="5.4.624",r5="384c6208b";var Wi,nu,Hd,fn,wg,Vd,Yr,xg,bl,aa,Cg,ye,l_,c_,u_,cc,G2,Ho;const Ei=class Ei{constructor({editor:t=null,uiManager:e=null}){_(this,ye);_(this,Wi,null);_(this,nu,null);_(this,Hd);_(this,fn,null);_(this,wg,!1);_(this,Vd,!1);_(this,Yr,null);_(this,xg);_(this,bl,null);_(this,aa,null);var n,r;t?(E(this,Vd,!1),E(this,Yr,t)):E(this,Vd,!0),E(this,aa,(t==null?void 0:t._uiManager)||e),E(this,xg,c(this,aa)._eventBus),E(this,Hd,((n=t==null?void 0:t.color)==null?void 0:n.toUpperCase())||((r=c(this,aa))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),c(Ei,Cg)||E(Ei,Cg,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Dt(this,"_keyboardManager",new py([[["Escape","mac+Escape"],Ei.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ei.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ei.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ei.prototype._moveToPrevious],[["Home","mac+Home"],Ei.prototype._moveToBeginning],[["End","mac+End"],Ei.prototype._moveToEnd]]))}renderButton(){const t=E(this,Wi,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",c(this,Yr)&&(t.ariaControls=`${c(this,Yr).id}_colorpicker_dropdown`);const e=c(this,aa)._signal;t.addEventListener("click",D(this,ye,cc).bind(this),{signal:e}),t.addEventListener("keydown",D(this,ye,u_).bind(this),{signal:e});const n=E(this,nu,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=c(this,Hd),t.append(n),t}renderMainDropdown(){const t=E(this,fn,D(this,ye,l_).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===c(this,Wi)){D(this,ye,cc).call(this,t);return}const e=t.target.getAttribute("data-color");e&&D(this,ye,c_).call(this,e,t)}_moveToNext(t){var e,n;if(!c(this,ye,Ho)){D(this,ye,cc).call(this,t);return}if(t.target===c(this,Wi)){(e=c(this,fn).firstElementChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=c(this,fn))==null?void 0:e.firstElementChild)||t.target===c(this,Wi)){c(this,ye,Ho)&&this._hideDropdownFromKeyboard();return}c(this,ye,Ho)||D(this,ye,cc).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!c(this,ye,Ho)){D(this,ye,cc).call(this,t);return}(e=c(this,fn).firstElementChild)==null||e.focus()}_moveToEnd(t){var e;if(!c(this,ye,Ho)){D(this,ye,cc).call(this,t);return}(e=c(this,fn).lastElementChild)==null||e.focus()}hideDropdown(){var t,e;(t=c(this,fn))==null||t.classList.add("hidden"),c(this,Wi).ariaExpanded="false",(e=c(this,bl))==null||e.abort(),E(this,bl,null)}_hideDropdownFromKeyboard(){var t;if(!c(this,Vd)){if(!c(this,ye,Ho)){(t=c(this,Yr))==null||t.unselect();return}this.hideDropdown(),c(this,Wi).focus({preventScroll:!0,focusVisible:c(this,wg)})}}updateColor(t){if(c(this,nu)&&(c(this,nu).style.backgroundColor=t),!c(this,fn))return;const e=c(this,aa).highlightColors.values();for(const n of c(this,fn).children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;(t=c(this,Wi))==null||t.remove(),E(this,Wi,null),E(this,nu,null),(e=c(this,fn))==null||e.remove(),E(this,fn,null)}};Wi=new WeakMap,nu=new WeakMap,Hd=new WeakMap,fn=new WeakMap,wg=new WeakMap,Vd=new WeakMap,Yr=new WeakMap,xg=new WeakMap,bl=new WeakMap,aa=new WeakMap,Cg=new WeakMap,ye=new WeakSet,l_=function(){const t=document.createElement("div"),e=c(this,aa)._signal;t.addEventListener("contextmenu",Ys,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),c(this,Yr)&&(t.id=`${c(this,Yr).id}_colorpicker_dropdown`);for(const[n,r]of c(this,aa).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=n,o.setAttribute("data-l10n-id",c(Ei,Cg)[n]);const u=document.createElement("span");o.append(u),u.className="swatch",u.style.backgroundColor=r,o.ariaSelected=r===c(this,Hd),o.addEventListener("click",D(this,ye,c_).bind(this,r),{signal:e}),t.append(o)}return t.addEventListener("keydown",D(this,ye,u_).bind(this),{signal:e}),t},c_=function(t,e){e.stopPropagation(),c(this,xg).dispatch("switchannotationeditorparams",{source:this,type:Xt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},u_=function(t){Ei._keyboardManager.exec(this,t)},cc=function(t){if(c(this,ye,Ho)){this.hideDropdown();return}if(E(this,wg,t.detail===0),c(this,bl)||(E(this,bl,new AbortController),window.addEventListener("pointerdown",D(this,ye,G2).bind(this),{signal:c(this,aa).combinedSignal(c(this,bl))})),c(this,Wi).ariaExpanded="true",c(this,fn)){c(this,fn).classList.remove("hidden");return}const e=E(this,fn,D(this,ye,l_).call(this));c(this,Wi).append(e)},G2=function(t){var e;(e=c(this,fn))!=null&&e.contains(t.target)||this.hideDropdown()},Ho=function(){return c(this,fn)&&!c(this,fn).classList.contains("hidden")},_(Ei,Cg,null);let ev=Ei;var Ba,Dg,zd,Mg;const pc=class pc{constructor(t){_(this,Ba,null);_(this,Dg,null);_(this,zd,null);E(this,Dg,t),E(this,zd,t._uiManager),c(pc,Mg)||E(pc,Mg,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(c(this,Ba))return c(this,Ba);const{editorType:t,colorType:e,color:n}=c(this,Dg),r=E(this,Ba,document.createElement("input"));return r.type="color",r.value=n||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",c(pc,Mg)[t]),r.addEventListener("input",()=>{c(this,zd).updateParams(e,r.value)},{signal:c(this,zd)._signal}),r}update(t){c(this,Ba)&&(c(this,Ba).value=t)}destroy(){var t;(t=c(this,Ba))==null||t.remove(),E(this,Ba,null)}hideDropdown(){}};Ba=new WeakMap,Dg=new WeakMap,zd=new WeakMap,Mg=new WeakMap,_(pc,Mg,null);let nv=pc;function uN(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function xp(s){return Math.max(0,Math.min(255,255*s))}class hN{static CMYK_G([t,e,n,r]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=xp(t),[t,t,t]}static G_HTML([t]){const e=uN(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(xp)}static RGB_HTML(t){return`#${t.map(uN).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,n+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,n,r]){return[xp(1-Math.min(1,t+r)),xp(1-Math.min(1,n+r)),xp(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const r=1-t,o=1-e,u=1-n,h=Math.min(r,o,u);return["CMYK",r,o,u,h]}}class o5{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){ee("Abstract method `_createSVG` called.")}}class iv extends o5{_createSVG(t){return document.createElementNS(mr,t)}}const l5=9,Nu=new WeakSet,c5=new Date().getTimezoneOffset()*60*1e3;class jS{static create(t){switch(t.data.annotationType){case an.LINK:return new P1(t);case an.TEXT:return new h5(t);case an.WIDGET:switch(t.data.fieldType){case"Tx":return new d5(t);case"Btn":return t.data.radioButton?new q2(t):t.data.checkBox?new p5(t):new m5(t);case"Ch":return new g5(t);case"Sig":return new f5(t)}return new Iu(t);case an.POPUP:return new d_(t);case an.FREETEXT:return new Z2(t);case an.LINE:return new b5(t);case an.SQUARE:return new v5(t);case an.CIRCLE:return new A5(t);case an.POLYLINE:return new J2(t);case an.CARET:return new S5(t);case an.INK:return new B1(t);case an.POLYGON:return new E5(t);case an.HIGHLIGHT:return new tP(t);case an.UNDERLINE:return new T5(t);case an.SQUIGGLY:return new _5(t);case an.STRIKEOUT:return new w5(t);case an.STAMP:return new eP(t);case an.FILEATTACHMENT:return new x5(t);default:return new Ue(t)}}}var iu,jd,ks,Rg,h_;const j1=class j1{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){_(this,Rg);_(this,iu,null);_(this,jd,!1);_(this,ks,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t!=null&&t.str||e!=null&&e.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return j1._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:t}=this,e=(n=this.annotationStorage)==null?void 0:n.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var h;const t=(h=this.annotationStorage)==null?void 0:h.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:r}=this.data;let o=-1/0,u=-1/0;if((e==null?void 0:e.length)>=8){for(let f=0;f<e.length;f+=8)e[f+1]>u?(u=e[f+1],o=e[f+2]):e[f+1]===u&&(o=Math.max(o,e[f+2]));return[o,u]}if((n==null?void 0:n.length)>=1){for(const f of n)for(let p=0,m=f.length;p<m;p+=2)f[p+1]>u?(u=f[p+1],o=f[p]):f[p+1]===u&&(o=Math.max(o,f[p]));if(o!==1/0)return[o,u]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:u}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-o)/n,t[1]=100*(t[1]-u)/r,t}get commentText(){var e,n,r;const{data:t}=this;return((n=(e=this.annotationStorage.getRawValue(`${om}${t.id}`))==null?void 0:e.popup)==null?void 0:n.contents)||((r=t.contentsObj)==null?void 0:r.str)||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${om}${e.id}`,{id:e.id,annotationType:e.annotationType,page:this.parent.page,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){var t,e;(e=((t=c(this,ks))==null?void 0:t.popup)||this.popup)==null||e.remove(),E(this,ks,this.popup=null)}updateEdited(t){var o;if(!this.container)return;t.rect&&(c(this,iu)||E(this,iu,{rect:this.data.rect.slice(0)}));const{rect:e,popup:n}=t;e&&D(this,Rg,h_).call(this,e);let r=((o=c(this,ks))==null?void 0:o.popup)||this.popup;!r&&(n!=null&&n.text)&&(this._createPopup(n),r=c(this,ks).popup),r&&(r.updateEdited(t),n!=null&&n.deleted&&(r.remove(),E(this,ks,null),this.popup=null))}resetEdited(){var t;c(this,iu)&&(D(this,Rg,h_).call(this,c(this,iu).rect),(t=c(this,ks))==null||t.popup.resetEdited(),E(this,iu,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),!(this instanceof Iu)&&!(this instanceof P1)&&(o.tabIndex=0);const{style:u}=o;if(u.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof d_){const{rotation:w}=e;return!e.hasOwnCanvas&&w!==0&&this.setRotation(w,o),o}const{width:h,height:f}=this;if(!t&&e.borderStyle.width>0){u.borderWidth=`${e.borderStyle.width}px`;const w=e.borderStyle.horizontalCornerRadius,x=e.borderStyle.verticalCornerRadius;if(w>0||x>0){const O=`calc(${w}px * var(--total-scale-factor)) / calc(${x}px * var(--total-scale-factor))`;u.borderRadius=O}else if(this instanceof q2){const O=`calc(${h}px * var(--total-scale-factor)) / calc(${f}px * var(--total-scale-factor))`;u.borderRadius=O}switch(e.borderStyle.style){case Sh.SOLID:u.borderStyle="solid";break;case Sh.DASHED:u.borderStyle="dashed";break;case Sh.BEVELED:Ct("Unimplemented border style: beveled");break;case Sh.INSET:Ct("Unimplemented border style: inset");break;case Sh.UNDERLINE:u.borderBottomStyle="solid";break}const C=e.borderColor||null;C?(E(this,jd,!0),u.borderColor=ot.makeHexColor(C[0]|0,C[1]|0,C[2]|0)):u.borderWidth=0}const p=ot.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:m,pageHeight:y,pageX:b,pageY:A}=r.rawDims;u.left=`${100*(p[0]-b)/m}%`,u.top=`${100*(p[1]-A)/y}%`;const{rotation:S}=e;return e.hasOwnCanvas||S===0?(u.width=`${100*h/m}%`,u.height=`${100*f/y}%`):this.setRotation(S,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:o,height:u}=this;t%180!==0&&([o,u]=[u,o]),e.style.width=`${100*o/n}%`,e.style.height=`${100*u/r}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,r)=>{const o=r.detail[e],u=o[0],h=o.slice(1);r.target.style[n]=hN[`${u}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[n]:hN[`${u}_rgb`](h)})};return Dt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const r of Object.keys(e.detail)){const o=t[r]||n[r];o==null||o(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[r,o]of Object.entries(e)){const u=n[r];if(u){const h={detail:{[r]:o},target:t};u(h),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,r,o]=this.data.rect.map(w=>Math.fround(w));if(t.length===8){const[w,x,C,O]=t.subarray(2,6);if(r===w&&o===x&&e===C&&n===O)return}const{style:u}=this.container;let h;if(c(this,jd)){const{borderColor:w,borderWidth:x}=u;u.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const f=r-e,p=o-n,{svgFactory:m}=this,y=m.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const b=m.createElement("defs");y.append(b);const A=m.createElement("clipPath"),S=`clippath_${this.data.id}`;A.setAttribute("id",S),A.setAttribute("clipPathUnits","objectBoundingBox"),b.append(A);for(let w=2,x=t.length;w<x;w+=8){const C=t[w],O=t[w+1],M=t[w+2],N=t[w+3],L=m.createElement("rect"),I=(M-e)/f,k=(o-O)/p,j=(C-M)/f,W=(O-N)/p;L.setAttribute("x",I),L.setAttribute("y",k),L.setAttribute("width",j),L.setAttribute("height",W),A.append(L),h==null||h.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${k}" width="${j}" height="${W}"/>`)}c(this,jd)&&(h.push("</g></svg>')"),u.backgroundImage=h.join("")),this.container.append(y),this.container.style.clipPath=`url(#${S})`}_createPopup(t=null){const{data:e}=this;let n,r;t?(n={str:t.text},r=t.date):(n=e.contentsObj,r=e.modificationDate),E(this,ks,new d_({data:{color:e.color,titleObj:e.titleObj,modificationDate:r,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(c(this,ks)||this.popup||this.data.popupRef)}get extraPopupElement(){return c(this,ks)}render(){ee("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:o,id:u,exportValues:h}of r){if(o===-1||u===e)continue;const f=typeof h=="string"?h:null,p=document.querySelector(`[data-element-id="${u}"]`);if(p&&!Nu.has(p)){Ct(`_getElementsByName - element not allowed: ${u}`);continue}n.push({id:u,exportValue:f,domElement:p})}return n}for(const r of document.getElementsByName(t)){const{exportValue:o}=r,u=r.getAttribute("data-element-id");u!==e&&Nu.has(r)&&n.push({id:u,exportValue:o,domElement:r})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};iu=new WeakMap,jd=new WeakMap,ks=new WeakMap,Rg=new WeakSet,h_=function(t){const{container:{style:e},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:u,pageX:h,pageY:f}}}}=this;n==null||n.splice(0,4,...t),e.left=`${100*(t[0]-h)/o}%`,e.top=`${100*(u-t[3]+f)/u}%`,r===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/u}%`):this.setRotation(r)};let Ue=j1;class u5 extends Ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var hs,uc,Y2,X2;class P1 extends Ue{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});_(this,hs);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let o=!1;return e.url?(n.addLinkAttributes(r,e.url,e.newWindow),o=!0):e.action?(this._bindNamedAction(r,e.action,e.overlaidText),o=!0):e.attachment?(D(this,hs,Y2).call(this,r,e.attachment,e.overlaidText,e.attachmentDest),o=!0):e.setOCGState?(D(this,hs,X2).call(this,r,e.setOCGState,e.overlaidText),o=!0):e.dest?(this._bindLink(r,e.dest,e.overlaidText),o=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),o=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(r,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&(this.contentElement=r,this.container.append(r)),this.container}_bindLink(e,n,r=""){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&D(this,hs,uc).call(this),r&&(e.title=r)}_bindNamedAction(e,n,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),r&&(e.title=r),D(this,hs,uc).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(n.actions)){const u=r.get(o);u&&(e[u]=()=>{var h;return(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:o}}),!1})}n.overlaidText&&(e.title=n.overlaidText),e.onclick||(e.onclick=()=>!1),D(this,hs,uc).call(this)}_bindResetFormAction(e,n){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),D(this,hs,uc).call(this),!this._fieldObjects){Ct('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{var y;r==null||r();const{fields:o,refs:u,include:h}=n,f=[];if(o.length!==0||u.length!==0){const b=new Set(u);for(const A of o){const S=this._fieldObjects[A]||[];for(const{id:w}of S)b.add(w)}for(const A of Object.values(this._fieldObjects))for(const S of A)b.has(S.id)===h&&f.push(S)}else for(const b of Object.values(this._fieldObjects))f.push(...b);const p=this.annotationStorage,m=[];for(const b of f){const{id:A}=b;switch(m.push(A),b.type){case"text":{const w=b.defaultValue||"";p.setValue(A,{value:w});break}case"checkbox":case"radiobutton":{const w=b.defaultValue===b.exportValues;p.setValue(A,{value:w});break}case"combobox":case"listbox":{const w=b.defaultValue||"";p.setValue(A,{value:w});break}default:continue}const S=document.querySelector(`[data-element-id="${A}"]`);if(S){if(!Nu.has(S)){Ct(`_bindResetFormAction - element not allowed: ${A}`);continue}}else continue;S.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}hs=new WeakSet,uc=function(){this.container.setAttribute("data-internal-link","")},Y2=function(e,n,r="",o=null){e.href=this.linkService.getAnchorUrl(""),n.description?e.title=n.description:r&&(e.title=r),e.onclick=()=>{var u;return(u=this.downloadManager)==null||u.openOrDownloadData(n.content,n.filename,o),!1},D(this,hs,uc).call(this)},X2=function(e,n,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),r&&(e.title=r),D(this,hs,uc).call(this)};class h5 extends Ue{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class Iu extends Ue{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return gn.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,r,o){n.includes("mouse")?t.addEventListener(n,u=>{var h;(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(u),shift:u.shiftKey,modifier:this._getKeyModifier(u)}})}):t.addEventListener(n,u=>{var h;if(n==="blur"){if(!e.focused||!u.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}o&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(u)}}))})}_setEventListeners(t,e,n,r){var o,u,h;for(const[f,p]of n)(p==="Action"||(o=this.data.actions)!=null&&o[p])&&((p==="Focus"||p==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,f,p,r),p==="Focus"&&!((u=this.data.actions)!=null&&u.Blur)?this._setEventListener(t,e,"blur","Blur",null):p==="Blur"&&!((h=this.data.actions)!=null&&h.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":ot.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||l5,o=t.style;let u;const h=2,f=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-h),m=Math.round(p/(BS*r))||1,y=p/m;u=Math.min(r,f(y/BS))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-h);u=Math.min(r,f(p/BS))}o.fontSize=`calc(${u}px * var(--total-scale-factor))`,o.color=ot.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class d5 extends Iu{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,r){const o=this.annotationStorage;for(const u of this._getElementsByName(t.name,t.id))u.domElement&&(u.domElement[e]=n),o.setValue(u.id,{[r]:n})}render(){var r,o;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const u=t.getValue(e,{value:this.data.fieldValue});let h=u.value||"";const f=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;f&&h.length>f&&(h=h.slice(0,f));let p=u.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const m={userValue:h,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=p??h,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",p??h),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Nu.add(n),this.contentElement=n,n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:y,datetimeType:b,timeStep:A}=this.data,S=!!b&&this.enableScripting;y&&(n.title=y),this._setRequired(n,this.data.required),f&&(n.maxLength=f),n.addEventListener("input",x=>{t.setValue(e,{value:x.target.value}),this.setPropertyOnSiblings(n,"value",x.target.value,"value"),m.formattedValue=null}),n.addEventListener("resetform",x=>{const C=this.data.defaultFieldValue??"";n.value=m.userValue=C,m.formattedValue=null});let w=x=>{const{formattedValue:C}=m;C!=null&&(x.target.value=C),x.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",C=>{var M;if(m.focused)return;const{target:O}=C;if(S&&(O.type=b,A&&(O.step=A)),m.userValue){const N=m.userValue;if(S)if(b==="time"){const L=new Date(N),I=[L.getHours(),L.getMinutes(),L.getSeconds()];O.value=I.map(k=>k.toString().padStart(2,"0")).join(":")}else O.value=new Date(N-c5).toISOString().split(b==="date"?"T":".",1)[0];else O.value=N}m.lastCommittedValue=O.value,m.commitKey=1,(M=this.data.actions)!=null&&M.Focus||(m.focused=!0)}),n.addEventListener("updatefromsandbox",C=>{this.showElementAndHideCanvas(C.target);const O={value(M){m.userValue=M.detail.value??"",S||t.setValue(e,{value:m.userValue.toString()}),M.target.value=m.userValue},formattedValue(M){const{formattedValue:N}=M.detail;m.formattedValue=N,N!=null&&M.target!==document.activeElement&&(M.target.value=N);const L={formattedValue:N};S&&(L.value=N),t.setValue(e,L)},selRange(M){M.target.setSelectionRange(...M.detail.selRange)},charLimit:M=>{var k;const{charLimit:N}=M.detail,{target:L}=M;if(N===0){L.removeAttribute("maxLength");return}L.setAttribute("maxLength",N);let I=m.userValue;!I||I.length<=N||(I=I.slice(0,N),L.value=m.userValue=I,t.setValue(e,{value:I}),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:I,willCommit:!0,commitKey:1,selStart:L.selectionStart,selEnd:L.selectionEnd}}))}};this._dispatchEventFromSandbox(O,C)}),n.addEventListener("keydown",C=>{var N;m.commitKey=1;let O=-1;if(C.key==="Escape"?O=0:C.key==="Enter"&&!this.data.multiLine?O=2:C.key==="Tab"&&(m.commitKey=3),O===-1)return;const{value:M}=C.target;m.lastCommittedValue!==M&&(m.lastCommittedValue=M,m.userValue=M,(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:M,willCommit:!0,commitKey:O,selStart:C.target.selectionStart,selEnd:C.target.selectionEnd}}))});const x=w;w=null,n.addEventListener("blur",C=>{var N,L;if(!m.focused||!C.relatedTarget)return;(N=this.data.actions)!=null&&N.Blur||(m.focused=!1);const{target:O}=C;let{value:M}=O;if(S){if(M&&b==="time"){const I=M.split(":").map(k=>parseInt(k,10));M=new Date(2e3,0,1,I[0],I[1],I[2]||0).valueOf(),O.step=""}else M.includes("T")||(M=`${M}T00:00`),M=new Date(M).valueOf();O.type="text"}m.userValue=M,m.lastCommittedValue!==M&&((L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:M,willCommit:!0,commitKey:m.commitKey,selStart:C.target.selectionStart,selEnd:C.target.selectionEnd}})),x(C)}),(o=this.data.actions)!=null&&o.Keystroke&&n.addEventListener("beforeinput",C=>{var W;m.lastCommittedValue=null;const{data:O,target:M}=C,{value:N,selectionStart:L,selectionEnd:I}=M;let k=L,j=I;switch(C.inputType){case"deleteWordBackward":{const nt=N.substring(0,L).match(/\w*[^\w]*$/);nt&&(k-=nt[0].length);break}case"deleteWordForward":{const nt=N.substring(L).match(/^[^\w]*\w*/);nt&&(j+=nt[0].length);break}case"deleteContentBackward":L===I&&(k-=1);break;case"deleteContentForward":L===I&&(j+=1);break}C.preventDefault(),(W=this.linkService.eventBus)==null||W.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:N,change:O||"",willCommit:!1,selStart:k,selEnd:j}})}),this._setEventListeners(n,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],C=>C.target.value)}if(w&&n.addEventListener("blur",w),this.data.comb){const C=(this.data.rect[2]-this.data.rect[0])/f;n.classList.add("comb"),n.style.letterSpacing=`calc(${C}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class f5 extends Iu{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class p5 extends Iu{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Nu.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",u=>{const{name:h,checked:f}=u.target;for(const p of this._getElementsByName(h,n)){const m=f&&p.exportValue===e.exportValue;p.domElement&&(p.domElement.checked=m),t.setValue(p.id,{value:m})}t.setValue(n,{value:f})}),o.addEventListener("resetform",u=>{const h=e.defaultFieldValue||"Off";u.target.checked=h===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",u=>{const h={value(f){f.target.checked=f.detail.value!=="Off",t.setValue(n,{value:f.target.checked})}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class q2 extends Iu{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(n,{value:r})),r)for(const u of this._getElementsByName(e.fieldName,n))t.setValue(u.id,{value:!1});const o=document.createElement("input");if(Nu.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",u=>{const{name:h,checked:f}=u.target;for(const p of this._getElementsByName(h,n))t.setValue(p.id,{value:!1});t.setValue(n,{value:f})}),o.addEventListener("resetform",u=>{const h=e.defaultFieldValue;u.target.checked=h!=null&&h===e.buttonValue}),this.enableScripting&&this.hasJSActions){const u=e.buttonValue;o.addEventListener("updatefromsandbox",h=>{const f={value:p=>{const m=u===p.detail.value;for(const y of this._getElementsByName(p.target.name)){const b=m&&y.id===n;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(f,h)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class m5 extends P1{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class g5 extends Iu{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");Nu.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",m=>{const y=this.data.defaultFieldValue;for(const b of r.options)b.selected=b.value===y});for(const m of this.data.options){const y=document.createElement("option");y.textContent=m.displayValue,y.value=m.exportValue,n.value.includes(m.exportValue)&&(y.setAttribute("selected",!0),o=!1),r.append(y)}let u=null;if(o){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),r.prepend(m),u=()=>{m.remove(),r.removeEventListener("input",u),u=null},r.addEventListener("input",u)}const h=m=>{const y=m?"value":"textContent",{options:b,multiple:A}=r;return A?Array.prototype.filter.call(b,S=>S.selected).map(S=>S[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let f=h(!1);const p=m=>{const y=m.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",m=>{const y={value(b){u==null||u();const A=b.detail.value,S=new Set(Array.isArray(A)?A:[A]);for(const w of r.options)w.selected=S.has(w.value);t.setValue(e,{value:h(!0)}),f=h(!1)},multipleSelection(b){r.multiple=!0},remove(b){const A=r.options,S=b.detail.remove;A[S].selected=!1,r.remove(S),A.length>0&&Array.prototype.findIndex.call(A,x=>x.selected)===-1&&(A[0].selected=!0),t.setValue(e,{value:h(!0),items:p(b)}),f=h(!1)},clear(b){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),f=h(!1)},insert(b){const{index:A,displayValue:S,exportValue:w}=b.detail.insert,x=r.children[A],C=document.createElement("option");C.textContent=S,C.value=w,x?x.before(C):r.append(C),t.setValue(e,{value:h(!0),items:p(b)}),f=h(!1)},items(b){const{items:A}=b.detail;for(;r.length!==0;)r.remove(0);for(const S of A){const{displayValue:w,exportValue:x}=S,C=document.createElement("option");C.textContent=w,C.value=x,r.append(C)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:h(!0),items:p(b)}),f=h(!1)},indices(b){const A=new Set(b.detail.indices);for(const S of b.target.options)S.selected=A.has(S.index);t.setValue(e,{value:h(!0)}),f=h(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,m)}),r.addEventListener("input",m=>{var A;const y=h(!0),b=h(!1);t.setValue(e,{value:y}),m.preventDefault(),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:f,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):r.addEventListener("input",function(m){t.setValue(e,{value:h(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}var Og,f_;class d_ extends Ue{constructor(e){const{data:n,elements:r,parent:o}=e,u=!!o._commentManager;super(e,{isRenderable:!u&&Ue._hasPopupData(n)});_(this,Og);if(this.elements=r,u&&Ue._hasPopupData(n)){const h=this.popup=D(this,Og,f_).call(this);for(const f of r)f.popup=h}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const n=this.popup=D(this,Og,f_).call(this),r=[];for(const o of this.elements)o.popup=n,o.container.ariaHasPopup="dialog",r.push(o.data.id),o.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(o=>`${Bh}${o}`).join(",")),this.container}}Og=new WeakSet,f_=function(){return new y5({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Qi,vl,vv,Av,Gd,Yd,ze,ka,Al,su,Xd,qd,Ua,Zi,Xr,qr,je,Kr,El,Ng,$r,Kd,au,Sl,An,Tl,kt,bb,p_,m_,g_,vb,y_,K2,$2,W2,Q2,Ab,Eb,b_;class y5{constructor({container:t,color:e,elements:n,titleObj:r,modificationDate:o,contentsObj:u,richText:h,parent:f,rect:p,parentRect:m,open:y,commentManager:b=null}){_(this,kt);_(this,Qi,null);_(this,vl,D(this,kt,W2).bind(this));_(this,vv,D(this,kt,b_).bind(this));_(this,Av,D(this,kt,Eb).bind(this));_(this,Gd,D(this,kt,Ab).bind(this));_(this,Yd,null);_(this,ze,null);_(this,ka,null);_(this,Al,null);_(this,su,null);_(this,Xd,null);_(this,qd,null);_(this,Ua,!1);_(this,Zi,null);_(this,Xr,null);_(this,qr,null);_(this,je,null);_(this,Kr,null);_(this,El,null);_(this,Ng,null);_(this,$r,null);_(this,Kd,null);_(this,au,null);_(this,Sl,!1);_(this,An,null);_(this,Tl,null);E(this,ze,t),E(this,Kd,r),E(this,ka,u),E(this,$r,h),E(this,Xd,f),E(this,Yd,e),E(this,Ng,p),E(this,qd,m),E(this,su,n),E(this,Qi,b),E(this,An,n[0]),E(this,Al,$b.toDateObject(o)),this.trigger=n.flatMap(A=>A.getElementsToTriggerPopup()),b||(D(this,kt,bb).call(this),c(this,ze).hidden=!0,y&&D(this,kt,Ab).call(this))}renderCommentButton(){if(c(this,je)){c(this,je).parentNode||c(this,An).container.after(c(this,je));return}if(c(this,Kr)||D(this,kt,p_).call(this),!c(this,Kr))return;const{signal:t}=E(this,Xr,new AbortController),e=c(this,An).hasOwnCommentButton,n=()=>{c(this,Qi).toggleCommentPopup(this,!0,void 0,!e)},r=()=>{c(this,Qi).toggleCommentPopup(this,!1,!0,!e)},o=()=>{c(this,Qi).toggleCommentPopup(this,!1,!1)};if(e){E(this,je,c(this,An).container);for(const u of this.trigger)u.ariaHasPopup="dialog",u.ariaControls="commentPopup",u.addEventListener("keydown",c(this,vl),{signal:t}),u.addEventListener("click",n,{signal:t}),u.addEventListener("pointerenter",r,{signal:t}),u.addEventListener("pointerleave",o,{signal:t}),u.classList.add("popupTriggerArea")}else{const u=E(this,je,document.createElement("button"));u.className="annotationCommentButton";const h=c(this,An).container;u.style.zIndex=h.style.zIndex+1,u.tabIndex=0,u.ariaHasPopup="dialog",u.ariaControls="commentPopup",u.setAttribute("data-l10n-id","pdfjs-show-comment-button"),D(this,kt,g_).call(this),D(this,kt,m_).call(this),u.addEventListener("keydown",c(this,vl),{signal:t}),u.addEventListener("click",n,{signal:t}),u.addEventListener("pointerenter",r,{signal:t}),u.addEventListener("pointerleave",o,{signal:t}),h.after(u)}}get commentButtonColor(){const{color:t,opacity:e}=c(this,An).commentData;return t?c(this,Xd)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{var t;(t=c(this,je))==null||t.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:r,modificationDate:o}=c(this,An).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:r,modificationDate:o}}get elementBeforePopup(){return c(this,je)}get comment(){return c(this,Tl)||E(this,Tl,c(this,An).commentText),c(this,Tl)}set comment(t){t!==this.comment&&(c(this,An).commentText=E(this,Tl,t))}focus(){var t;(t=c(this,An).container)==null||t.focus()}get parentBoundingClientRect(){return c(this,An).layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){c(this,je)&&(c(this,je).classList.toggle("selected",t),c(this,je).ariaExpanded=e)}setSelectedCommentButton(t){c(this,je).classList.toggle("selected",t)}get commentPopupPosition(){if(c(this,El))return c(this,El);const{x:t,y:e,height:n}=c(this,je).getBoundingClientRect(),{x:r,y:o,width:u,height:h}=c(this,An).layer.getBoundingClientRect();return[(t-r)/u,(e+n-o)/h]}set commentPopupPosition(t){E(this,El,t)}hasDefaultPopupPosition(){return c(this,El)===null}get commentButtonPosition(){return c(this,Kr)}get commentButtonWidth(){return c(this,je).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=c(this,El)||this.commentButtonPosition.map(p=>p/100),r=this.parentBoundingClientRect,{x:o,y:u,width:h,height:f}=r;c(this,Qi).showDialog(null,this,o+e*h,u+n*f,{...t,parentDimensions:r})}render(){var n,r;if(c(this,Zi))return;const t=E(this,Zi,document.createElement("div"));if(t.className="popup",c(this,Yd)){const o=t.style.outlineColor=ot.makeHexColor(...c(this,Yd));t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`}const e=document.createElement("span");if(e.className="header",(n=c(this,Kd))!=null&&n.str){const o=document.createElement("span");o.className="title",e.append(o),{dir:o.dir,str:o.textContent}=c(this,Kd)}if(t.append(e),c(this,Al)){const o=document.createElement("time");o.className="popupDate",o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,Al).valueOf()})),o.dateTime=c(this,Al).toISOString(),e.append(o)}_I({html:c(this,kt,vb)||c(this,ka).str,dir:(r=c(this,ka))==null?void 0:r.dir,className:"popupContent"},t),c(this,ze).append(t)}updateEdited({rect:t,popup:e,deleted:n}){var r;if(c(this,Qi)){n?(this.remove(),E(this,Tl,null)):e&&(e.deleted?this.remove():(D(this,kt,g_).call(this),E(this,Tl,e.text))),t&&(E(this,Kr,null),D(this,kt,p_).call(this),D(this,kt,m_).call(this));return}if(n||e!=null&&e.deleted){this.remove();return}D(this,kt,bb).call(this),c(this,au)||E(this,au,{contentsObj:c(this,ka),richText:c(this,$r)}),t&&E(this,qr,null),e&&e.text&&(E(this,$r,D(this,kt,$2).call(this,e.text)),E(this,Al,$b.toDateObject(e.date)),E(this,ka,null)),(r=c(this,Zi))==null||r.remove(),E(this,Zi,null)}resetEdited(){var t;c(this,au)&&({contentsObj:un(this,ka)._,richText:un(this,$r)._}=c(this,au),E(this,au,null),(t=c(this,Zi))==null||t.remove(),E(this,Zi,null),E(this,qr,null))}remove(){var t,e,n;if((t=c(this,Xr))==null||t.abort(),E(this,Xr,null),(e=c(this,Zi))==null||e.remove(),E(this,Zi,null),E(this,Sl,!1),E(this,Ua,!1),(n=c(this,je))==null||n.remove(),E(this,je,null),this.trigger)for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){E(this,Sl,this.isVisible),c(this,Sl)&&(c(this,ze).hidden=!0)}maybeShow(){c(this,Qi)||(D(this,kt,bb).call(this),c(this,Sl)&&(c(this,Zi)||D(this,kt,Eb).call(this),E(this,Sl,!1),c(this,ze).hidden=!1))}get isVisible(){return c(this,Qi)?!1:c(this,ze).hidden===!1}}Qi=new WeakMap,vl=new WeakMap,vv=new WeakMap,Av=new WeakMap,Gd=new WeakMap,Yd=new WeakMap,ze=new WeakMap,ka=new WeakMap,Al=new WeakMap,su=new WeakMap,Xd=new WeakMap,qd=new WeakMap,Ua=new WeakMap,Zi=new WeakMap,Xr=new WeakMap,qr=new WeakMap,je=new WeakMap,Kr=new WeakMap,El=new WeakMap,Ng=new WeakMap,$r=new WeakMap,Kd=new WeakMap,au=new WeakMap,Sl=new WeakMap,An=new WeakMap,Tl=new WeakMap,kt=new WeakSet,bb=function(){var e;if(c(this,Xr))return;E(this,Xr,new AbortController);const{signal:t}=c(this,Xr);for(const n of this.trigger)n.addEventListener("click",c(this,Gd),{signal:t}),n.addEventListener("pointerenter",c(this,Av),{signal:t}),n.addEventListener("pointerleave",c(this,vv),{signal:t}),n.classList.add("popupTriggerArea");for(const n of c(this,su))(e=n.container)==null||e.addEventListener("keydown",c(this,vl),{signal:t})},p_=function(){const t=c(this,su).find(e=>e.hasCommentButton);t&&E(this,Kr,t._normalizePoint(t.commentButtonPosition))},m_=function(){if(c(this,An).extraPopupElement&&!c(this,An).editor)return;c(this,je)||this.renderCommentButton();const[t,e]=c(this,Kr),{style:n}=c(this,je);n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`},g_=function(){c(this,An).extraPopupElement||(c(this,je)||this.renderCommentButton(),c(this,je).style.backgroundColor=this.commentButtonColor||"")},vb=function(){const t=c(this,$r),e=c(this,ka);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&c(this,$r).html||null},y_=function(){var t,e,n;return((n=(e=(t=c(this,kt,vb))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},K2=function(){var t,e,n;return((n=(e=(t=c(this,kt,vb))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},$2=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:c(this,kt,K2),fontSize:c(this,kt,y_)?`calc(${c(this,kt,y_)}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:r});return n},W2=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&c(this,Ua))&&D(this,kt,Ab).call(this)},Q2=function(){if(c(this,qr)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:r,pageY:o}}}=c(this,Xd);let u=!!c(this,qd),h=u?c(this,qd):c(this,Ng);for(const S of c(this,su))if(!h||ot.intersect(S.data.rect,h)!==null){h=S.data.rect,u=!0;break}const f=ot.normalizeRect([h[0],t[3]-h[1]+t[1],h[2],t[3]-h[3]+t[1]]),m=u?h[2]-h[0]+5:0,y=f[0]+m,b=f[1];E(this,qr,[100*(y-r)/e,100*(b-o)/n]);const{style:A}=c(this,ze);A.left=`${c(this,qr)[0]}%`,A.top=`${c(this,qr)[1]}%`},Ab=function(){if(c(this,Qi)){c(this,Qi).toggleCommentPopup(this,!1);return}E(this,Ua,!c(this,Ua)),c(this,Ua)?(D(this,kt,Eb).call(this),c(this,ze).addEventListener("click",c(this,Gd)),c(this,ze).addEventListener("keydown",c(this,vl))):(D(this,kt,b_).call(this),c(this,ze).removeEventListener("click",c(this,Gd)),c(this,ze).removeEventListener("keydown",c(this,vl)))},Eb=function(){c(this,Zi)||this.render(),this.isVisible?c(this,Ua)&&c(this,ze).classList.add("focused"):(D(this,kt,Q2).call(this),c(this,ze).hidden=!1,c(this,ze).style.zIndex=parseInt(c(this,ze).style.zIndex)+1e3)},b_=function(){c(this,ze).classList.remove("focused"),!(c(this,Ua)||!this.isVisible)&&(c(this,ze).hidden=!0,c(this,ze).style.zIndex=parseInt(c(this,ze).style.zIndex)-1e3)};class Z2 extends Ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Ot.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Lg;class b5 extends Ue{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Lg,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:r}=this,o=this.svgFactory.create(n,r,!0),u=E(this,Lg,this.svgFactory.createElement("svg:line"));return u.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),u.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),u.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),u.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),u.setAttribute("stroke-width",e.borderStyle.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Lg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lg=new WeakMap;var Ig;class v5 extends Ue{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Ig,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:r}=this,o=this.svgFactory.create(n,r,!0),u=e.borderStyle.width,h=E(this,Ig,this.svgFactory.createElement("svg:rect"));return h.setAttribute("x",u/2),h.setAttribute("y",u/2),h.setAttribute("width",n-u),h.setAttribute("height",r-u),h.setAttribute("stroke-width",u||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Ig)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ig=new WeakMap;var Pg;class A5 extends Ue{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Pg,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:r}=this,o=this.svgFactory.create(n,r,!0),u=e.borderStyle.width,h=E(this,Pg,this.svgFactory.createElement("svg:ellipse"));return h.setAttribute("cx",n/2),h.setAttribute("cy",r/2),h.setAttribute("rx",n/2-u/2),h.setAttribute("ry",r/2-u/2),h.setAttribute("stroke-width",u||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Pg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pg=new WeakMap;var Bg;class J2 extends Ue{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Bg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:r,popupRef:o},width:u,height:h}=this;if(!n)return this.container;const f=this.svgFactory.create(u,h,!0);let p=[];for(let y=0,b=n.length;y<b;y+=2){const A=n[y]-e[0],S=e[3]-n[y+1];p.push(`${A},${S}`)}p=p.join(" ");const m=E(this,Bg,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",p),m.setAttribute("stroke-width",r.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),f.append(m),this.container.append(f),!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Bg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Bg=new WeakMap;class E5 extends J2{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class S5 extends Ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var kg,ru,Ug,v_;class B1 extends Ue{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Ug);_(this,kg,null);_(this,ru,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ot.HIGHLIGHT:Ot.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:r,borderStyle:o,popupRef:u}}=this,{transform:h,width:f,height:p}=D(this,Ug,v_).call(this,n,e),m=this.svgFactory.create(f,p,!0),y=E(this,kg,this.svgFactory.createElement("svg:g"));m.append(y),y.setAttribute("stroke-width",o.width||1),y.setAttribute("stroke-linecap","round"),y.setAttribute("stroke-linejoin","round"),y.setAttribute("stroke-miterlimit",10),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),y.setAttribute("transform",h);for(let b=0,A=r.length;b<A;b++){const S=this.svgFactory.createElement(this.svgElementName);c(this,ru).push(S),S.setAttribute("points",r[b].join(",")),y.append(S)}return!u&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(m),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:r,rect:o}=e,u=c(this,kg);if(n>=0&&u.setAttribute("stroke-width",n||1),r)for(let h=0,f=c(this,ru).length;h<f;h++)c(this,ru)[h].setAttribute("points",r[h].join(","));if(o){const{transform:h,width:f,height:p}=D(this,Ug,v_).call(this,this.data.rotation,o);u.parentElement.setAttribute("viewBox",`0 0 ${f} ${p}`),u.setAttribute("transform",h)}}getElementsToTriggerPopup(){return c(this,ru)}addHighlightArea(){this.container.classList.add("highlightArea")}}kg=new WeakMap,ru=new WeakMap,Ug=new WeakSet,v_=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class tP extends Ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ot.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class T5 extends Ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class _5 extends Ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class w5 extends Ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class eP extends Ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ot.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Fg,Hg,A_;class x5 extends Ue{constructor(e){var r;super(e,{isRenderable:!0});_(this,Hg);_(this,Fg,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",D(this,Hg,A_).bind(this)),E(this,Fg,r);const{isMac:o}=gn.platform;return e.addEventListener("keydown",u=>{u.key==="Enter"&&(o?u.metaKey:u.ctrlKey)&&D(this,Hg,A_).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return c(this,Fg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Fg=new WeakMap,Hg=new WeakSet,A_=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var ou,lu,$d,_l,Vg,cu,Ji,zg,ao,Sb,S_;const G1=class G1{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:r,page:o,viewport:u,structTreeLayer:h,commentManager:f,linkService:p,annotationStorage:m}){_(this,ao);_(this,ou,null);_(this,lu,null);_(this,$d,null);_(this,_l,new Map);_(this,Vg,null);_(this,cu,null);_(this,Ji,[]);_(this,zg,!1);this.div=t,E(this,ou,e),E(this,lu,n),E(this,Vg,h||null),E(this,cu,p||null),E(this,$d,m||new N1),this.page=o,this.viewport=u,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=f||null}hasEditableAnnotations(){return c(this,_l).size>0}async render(t){var h;const{annotations:e}=t,n=this.div;Ru(n,this.viewport);const r=new Map,o=[],u={data:null,layer:n,linkService:c(this,cu),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new iv,annotationStorage:c(this,$d),enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const f of e){if(f.noHTML)continue;const p=f.annotationType===an.POPUP;if(p){const b=r.get(f.id);if(!b)continue;if(!this._commentManager){o.push(f);continue}u.elements=b}else if(f.rect[2]===f.rect[0]||f.rect[3]===f.rect[1])continue;u.data=f;const m=jS.create(u);if(!m.isRenderable)continue;if(!p&&(c(this,Ji).push(m),f.popupRef)){const b=r.get(f.popupRef);b?b.push(m):r.set(f.popupRef,[m])}const y=m.render();f.hidden&&(y.style.visibility="hidden"),m._isEditable&&(c(this,_l).set(m.data.id,m),(h=this._annotationEditorUIManager)==null||h.renderAnnotationElement(m))}await D(this,ao,Sb).call(this);for(const f of o){const p=u.elements=r.get(f.id);u.data=f;const m=jS.create(u);if(!m.isRenderable)continue;const y=m.render();m.contentElement.id=`${Bh}${f.id}`,f.hidden&&(y.style.visibility="hidden"),p.at(-1).container.after(y)}D(this,ao,S_).call(this)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:c(this,cu),svgFactory:new iv,parent:this};for(const n of t){n.borderStyle||(n.borderStyle=G1._defaultBorderStyle),e.data=n;const r=jS.create(e);r.isRenderable&&(r.render(),r.contentElement.id=`${Bh}${n.id}`,c(this,Ji).push(r))}await D(this,ao,Sb).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Ru(e,{rotation:t.rotation}),D(this,ao,S_).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(c(this,_l).values())}getEditableAnnotation(t){return c(this,_l).get(t)}addFakeAnnotation(t){const{div:e}=this,{id:n,rotation:r}=t,o=new u5({data:{id:n,rect:t.getPDFRect(),rotation:r},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:c(this,cu),annotationStorage:c(this,$d)});return o.render(),o.contentElement.id=`${Bh}${n}`,o.createOrUpdatePopup(),c(this,Ji).push(o),o}removeAnnotation(t){var r;const e=c(this,Ji).findIndex(o=>o.data.id===t);if(e<0)return;const[n]=c(this,Ji).splice(e,1);(r=c(this,ou))==null||r.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);D(this,ao,Sb).call(this)}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return Dt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Sh.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};ou=new WeakMap,lu=new WeakMap,$d=new WeakMap,_l=new WeakMap,Vg=new WeakMap,cu=new WeakMap,Ji=new WeakMap,zg=new WeakMap,ao=new WeakSet,Sb=async function(){var n,r,o;if(c(this,Ji).length===0)return;this.div.replaceChildren();const t=[];if(!c(this,zg)){E(this,zg,!0);for(const{contentElement:u,data:{id:h}}of c(this,Ji)){const f=u.id=`${Bh}${h}`;t.push((n=c(this,Vg))==null?void 0:n.getAriaAttributes(f).then(p=>{if(p)for(const[m,y]of p)u.setAttribute(m,y)}))}}c(this,Ji).sort(({data:{rect:[u,h,f,p]}},{data:{rect:[m,y,b,A]}})=>{if(u===f&&h===p)return 1;if(m===b&&y===A)return-1;const S=p,w=h,x=(h+p)/2,C=A,O=y,M=(y+A)/2;if(x>=C&&M<=w)return-1;if(M>=S&&x<=O)return 1;const N=(u+f)/2,L=(m+b)/2;return N-L});const e=document.createDocumentFragment();for(const u of c(this,Ji))e.append(u.container),this._commentManager?(o=((r=u.extraPopupElement)==null?void 0:r.popup)||u.popup)==null||o.renderCommentButton():u.extraPopupElement&&e.append(u.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),c(this,ou))for(const u of c(this,Ji))c(this,ou).addPointerInTextLayer(u.contentElement,!1)},S_=function(){var e;if(!c(this,lu))return;const t=this.div;for(const[n,r]of c(this,lu)){const o=t.querySelector(`[data-annotation-id="${n}"]`);if(!o)continue;r.className="annotationContent";const{firstChild:u}=o;u?u.nodeName==="CANVAS"?u.replaceWith(r):u.classList.contains("annotationContent")?u.after(r):u.before(r):o.append(r);const h=c(this,_l).get(n);h&&(h._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(n,o.id,r),h._hasNoCanvas=!1):h.canvas=r)}c(this,lu).clear()};let E_=G1;const $0=/\r\n?|\n/g;var ts,jg,uu,es,ln,nP,iP,sP,Tb,ro,_b,wb,aP,__,rP;const Ce=class Ce extends Te{constructor(e){super({...e,name:"freeTextEditor"});_(this,ln);_(this,ts,"");_(this,jg,`${this.id}-editor`);_(this,uu,null);_(this,es);$(this,"_colorPicker",null);this.color=e.color||Ce._defaultColor||Te._defaultLineColor,E(this,es,e.fontSize||Ce._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const e=Ce.prototype,n=u=>u.isEmpty(),r=Ou.TRANSLATE_SMALL,o=Ou.TRANSLATE_BIG;return Dt(this,"_keyboardManager",new py([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,o],checker:n}]]))}static initialize(e,n){Te.initialize(e,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Xt.FREETEXT_SIZE:Ce._defaultFontSize=n;break;case Xt.FREETEXT_COLOR:Ce._defaultColor=n;break}}updateParams(e,n){switch(e){case Xt.FREETEXT_SIZE:D(this,ln,nP).call(this,n);break;case Xt.FREETEXT_COLOR:D(this,ln,iP).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Xt.FREETEXT_SIZE,Ce._defaultFontSize],[Xt.FREETEXT_COLOR,Ce._defaultColor||Te._defaultLineColor]]}get propertiesToUpdate(){return[[Xt.FREETEXT_SIZE,c(this,es)],[Xt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new nv(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Xt.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Ce._internalPadding*e,-(Ce._internalPadding+c(this,es))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),E(this,uu,new AbortController);const e=this._uiManager.combinedSignal(c(this,uu));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,jg)),this._isDraggable=!0,(e=c(this,uu))==null||e.abort(),E(this,uu,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=c(this,ts),n=E(this,ts,D(this,ln,sP).call(this).trimEnd());if(e===n)return;const r=o=>{if(E(this,ts,o),!o){this.remove();return}D(this,ln,wb).call(this),this._uiManager.rebuild(this),D(this,ln,Tb).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(e)},mustExec:!1}),D(this,ln,Tb).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Ce._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,jg)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${c(this,es)}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[o,u]=this.parentDimensions;if(this.annotationElementId){const{position:h}=this._initialData;let[f,p]=this.getInitialTranslation();[f,p]=this.pageTranslationToScreen(f,p);const[m,y]=this.pageDimensions,[b,A]=this.pageTranslation;let S,w;switch(this.rotation){case 0:S=e+(h[0]-b)/m,w=n+this.height-(h[1]-A)/y;break;case 90:S=e+(h[0]-b)/m,w=n-(h[1]-A)/y,[f,p]=[p,-f];break;case 180:S=e-this.width+(h[0]-b)/m,w=n-(h[1]-A)/y,[f,p]=[-f,-p];break;case 270:S=e+(h[0]-b-this.height*y)/m,w=n+(h[1]-A-this.width*m)/y,[f,p]=[-p,f];break}this.setAt(S*o,w*u,f,p)}else this._moveAfterPaste(e,n);D(this,ln,wb).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var S,w,x;const n=e.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const o=D(S=Ce,ro,__).call(S,n.getData("text")||"").replaceAll($0,`
`);if(!o)return;const u=window.getSelection();if(!u.rangeCount)return;this.editorDiv.normalize(),u.deleteFromDocument();const h=u.getRangeAt(0);if(!o.includes(`
`)){h.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),u.collapseToStart();return}const{startContainer:f,startOffset:p}=h,m=[],y=[];if(f.nodeType===Node.TEXT_NODE){const C=f.parentElement;if(y.push(f.nodeValue.slice(p).replaceAll($0,"")),C!==this.editorDiv){let O=m;for(const M of this.editorDiv.childNodes){if(M===C){O=y;continue}O.push(D(w=Ce,ro,_b).call(w,M))}}m.push(f.nodeValue.slice(0,p).replaceAll($0,""))}else if(f===this.editorDiv){let C=m,O=0;for(const M of this.editorDiv.childNodes)O++===p&&(C=y),C.push(D(x=Ce,ro,_b).call(x,M))}E(this,ts,`${m.join(`
`)}${o}${y.join(`
`)}`),D(this,ln,wb).call(this);const b=new Range;let A=Math.sumPrecise(m.map(C=>C.length));for(const{firstChild:C}of this.editorDiv.childNodes)if(C.nodeType===Node.TEXT_NODE){const O=C.nodeValue.length;if(A<=O){b.setStart(C,A),b.setEnd(C,A);break}A-=O}u.removeAllRanges(),u.addRange(b)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Ce._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,n,r){var h;let o=null;if(e instanceof Z2){const{data:{defaultAppearanceData:{fontSize:f,fontColor:p},rect:m,rotation:y,id:b,popupRef:A,richText:S,contentsObj:w,creationDate:x,modificationDate:C},textContent:O,textPosition:M,parent:{page:{pageNumber:N}}}=e;if(!O||O.length===0)return null;o=e={annotationType:Ot.FREETEXT,color:Array.from(p),fontSize:f,value:O.join(`
`),position:M,pageIndex:N-1,rect:m.slice(0),rotation:y,annotationElementId:b,id:b,deleted:!1,popupRef:A,comment:(w==null?void 0:w.str)||null,richText:S,creationDate:x,modificationDate:C}}const u=await super.deserialize(e,n,r);return E(u,es,e.fontSize),u.color=ot.makeHexColor(...e.color),E(u,ts,D(h=Ce,ro,__).call(h,e.value)),u._initialData=o,e.comment&&u.setCommentData(e),u}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Te._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(e),{color:n,fontSize:c(this,es),value:D(this,ln,aP).call(this)});return this.addComment(r),e?(r.isCopy=!0,r):this.annotationElementId&&!D(this,ln,rP).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(!n)return null;const{style:r}=n;r.fontSize=`calc(${c(this,es)}px * var(--total-scale-factor))`,r.color=this.color,n.replaceChildren();for(const o of c(this,ts).split(`
`)){const u=document.createElement("div");u.append(o?document.createTextNode(o):document.createElement("br")),n.append(u)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:c(this,ts)}}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};ts=new WeakMap,jg=new WeakMap,uu=new WeakMap,es=new WeakMap,ln=new WeakSet,nP=function(e){const n=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--total-scale-factor))`,this.translate(0,-(o-c(this,es))*this.parentScale),E(this,es,o),D(this,ln,Tb).call(this)},r=c(this,es);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Xt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},iP=function(e){const n=o=>{this.color=o,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Xt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},sP=function(){var r;const e=[];this.editorDiv.normalize();let n=null;for(const o of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(e.push(D(r=Ce,ro,_b).call(r,o)),n=o);return e.join(`
`)},Tb=function(){const[e,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:o,div:u}=this,h=u.style.display,f=u.classList.contains("hidden");u.classList.remove("hidden"),u.style.display="hidden",o.div.append(this.div),r=u.getBoundingClientRect(),u.remove(),u.style.display=h,u.classList.toggle("hidden",f)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/n):(this.width=r.height/e,this.height=r.width/n),this.fixAndSetPosition()},ro=new WeakSet,_b=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll($0,"")},wb=function(){if(this.editorDiv.replaceChildren(),!!c(this,ts))for(const e of c(this,ts).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},aP=function(){return c(this,ts).replaceAll(""," ")},__=function(e){return e.replaceAll(" ","")},rP=function(e){const{value:n,fontSize:r,color:o,pageIndex:u}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==n||e.fontSize!==r||e.color.some((h,f)=>h!==o[f])||e.pageIndex!==u},_(Ce,ro),$(Ce,"_freeTextDefaultContent",""),$(Ce,"_internalPadding",0),$(Ce,"_defaultColor",null),$(Ce,"_defaultFontSize",10),$(Ce,"_type","freetext"),$(Ce,"_editorType",Ot.FREETEXT);let T_=Ce;class ut{toSVGPath(){ee("Abstract method `toSVGPath` must be implemented.")}get box(){ee("Abstract getter `box` must be implemented.")}serialize(t,e){ee("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,r,o,u){u||(u=new Float32Array(t.length));for(let h=0,f=t.length;h<f;h+=2)u[h]=e+t[h]*r,u[h+1]=n+t[h+1]*o;return u}static _rescaleAndSwap(t,e,n,r,o,u){u||(u=new Float32Array(t.length));for(let h=0,f=t.length;h<f;h+=2)u[h]=e+t[h+1]*r,u[h+1]=n+t[h]*o;return u}static _translate(t,e,n,r){r||(r=new Float32Array(t.length));for(let o=0,u=t.length;o<u;o+=2)r[o]=e+t[o],r[o+1]=n+t[o+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,r,o){switch(o){case 90:return[1-e/n,t/r];case 180:return[1-t/n,1-e/r];case 270:return[e/n,1-t/r];default:return[t/n,e/r]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,r,o,u){return[(t+5*n)/6,(e+5*r)/6,(5*n+o)/6,(5*r+u)/6,(n+o)/2,(r+u)/2]}}$(ut,"PRECISION",1e-4);var ns,ra,Wd,Qd,Fa,Ft,hu,du,Gg,Yg,Zd,Jd,wl,Xg,Ev,Sv,mn,Xp,oP,lP,cP,uP,hP,dP;const Ar=class Ar{constructor({x:t,y:e},n,r,o,u,h=0){_(this,mn);_(this,ns);_(this,ra,[]);_(this,Wd);_(this,Qd);_(this,Fa,[]);_(this,Ft,new Float32Array(18));_(this,hu);_(this,du);_(this,Gg);_(this,Yg);_(this,Zd);_(this,Jd);_(this,wl,[]);E(this,ns,n),E(this,Jd,o*r),E(this,Qd,u),c(this,Ft).set([NaN,NaN,NaN,NaN,t,e],6),E(this,Wd,h),E(this,Yg,c(Ar,Xg)*r),E(this,Gg,c(Ar,Sv)*r),E(this,Zd,r),c(this,wl).push(t,e)}isEmpty(){return isNaN(c(this,Ft)[8])}add({x:t,y:e}){var W;E(this,hu,t),E(this,du,e);const[n,r,o,u]=c(this,ns);let[h,f,p,m]=c(this,Ft).subarray(8,12);const y=t-p,b=e-m,A=Math.hypot(y,b);if(A<c(this,Gg))return!1;const S=A-c(this,Yg),w=S/A,x=w*y,C=w*b;let O=h,M=f;h=p,f=m,p+=x,m+=C,(W=c(this,wl))==null||W.push(t,e);const N=-C/S,L=x/S,I=N*c(this,Jd),k=L*c(this,Jd);return c(this,Ft).set(c(this,Ft).subarray(2,8),0),c(this,Ft).set([p+I,m+k],4),c(this,Ft).set(c(this,Ft).subarray(14,18),12),c(this,Ft).set([p-I,m-k],16),isNaN(c(this,Ft)[6])?(c(this,Fa).length===0&&(c(this,Ft).set([h+I,f+k],2),c(this,Fa).push(NaN,NaN,NaN,NaN,(h+I-n)/o,(f+k-r)/u),c(this,Ft).set([h-I,f-k],14),c(this,ra).push(NaN,NaN,NaN,NaN,(h-I-n)/o,(f-k-r)/u)),c(this,Ft).set([O,M,h,f,p,m],6),!this.isEmpty()):(c(this,Ft).set([O,M,h,f,p,m],6),Math.abs(Math.atan2(M-f,O-h)-Math.atan2(C,x))<Math.PI/2?([h,f,p,m]=c(this,Ft).subarray(2,6),c(this,Fa).push(NaN,NaN,NaN,NaN,((h+p)/2-n)/o,((f+m)/2-r)/u),[h,f,O,M]=c(this,Ft).subarray(14,18),c(this,ra).push(NaN,NaN,NaN,NaN,((O+h)/2-n)/o,((M+f)/2-r)/u),!0):([O,M,h,f,p,m]=c(this,Ft).subarray(0,6),c(this,Fa).push(((O+5*h)/6-n)/o,((M+5*f)/6-r)/u,((5*h+p)/6-n)/o,((5*f+m)/6-r)/u,((h+p)/2-n)/o,((f+m)/2-r)/u),[p,m,h,f,O,M]=c(this,Ft).subarray(12,18),c(this,ra).push(((O+5*h)/6-n)/o,((M+5*f)/6-r)/u,((5*h+p)/6-n)/o,((5*f+m)/6-r)/u,((h+p)/2-n)/o,((f+m)/2-r)/u),!0))}toSVGPath(){if(this.isEmpty())return"";const t=c(this,Fa),e=c(this,ra);if(isNaN(c(this,Ft)[6])&&!this.isEmpty())return D(this,mn,oP).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);D(this,mn,cP).call(this,n);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return D(this,mn,lP).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,r,o,u){return new fP(t,e,n,r,o,u)}getOutlines(){var y;const t=c(this,Fa),e=c(this,ra),n=c(this,Ft),[r,o,u,h]=c(this,ns),f=new Float32Array((((y=c(this,wl))==null?void 0:y.length)??0)+2);for(let b=0,A=f.length-2;b<A;b+=2)f[b]=(c(this,wl)[b]-r)/u,f[b+1]=(c(this,wl)[b+1]-o)/h;if(f[f.length-2]=(c(this,hu)-r)/u,f[f.length-1]=(c(this,du)-o)/h,isNaN(n[6])&&!this.isEmpty())return D(this,mn,uP).call(this,f);const p=new Float32Array(c(this,Fa).length+24+c(this,ra).length);let m=t.length;for(let b=0;b<m;b+=2){if(isNaN(t[b])){p[b]=p[b+1]=NaN;continue}p[b]=t[b],p[b+1]=t[b+1]}m=D(this,mn,dP).call(this,p,m);for(let b=e.length-6;b>=6;b-=6)for(let A=0;A<6;A+=2){if(isNaN(e[b+A])){p[m]=p[m+1]=NaN,m+=2;continue}p[m]=e[b+A],p[m+1]=e[b+A+1],m+=2}return D(this,mn,hP).call(this,p,m),this.newFreeDrawOutline(p,f,c(this,ns),c(this,Zd),c(this,Wd),c(this,Qd))}};ns=new WeakMap,ra=new WeakMap,Wd=new WeakMap,Qd=new WeakMap,Fa=new WeakMap,Ft=new WeakMap,hu=new WeakMap,du=new WeakMap,Gg=new WeakMap,Yg=new WeakMap,Zd=new WeakMap,Jd=new WeakMap,wl=new WeakMap,Xg=new WeakMap,Ev=new WeakMap,Sv=new WeakMap,mn=new WeakSet,Xp=function(){const t=c(this,Ft).subarray(4,6),e=c(this,Ft).subarray(16,18),[n,r,o,u]=c(this,ns);return[(c(this,hu)+(t[0]-e[0])/2-n)/o,(c(this,du)+(t[1]-e[1])/2-r)/u,(c(this,hu)+(e[0]-t[0])/2-n)/o,(c(this,du)+(e[1]-t[1])/2-r)/u]},oP=function(){const[t,e,n,r]=c(this,ns),[o,u,h,f]=D(this,mn,Xp).call(this);return`M${(c(this,Ft)[2]-t)/n} ${(c(this,Ft)[3]-e)/r} L${(c(this,Ft)[4]-t)/n} ${(c(this,Ft)[5]-e)/r} L${o} ${u} L${h} ${f} L${(c(this,Ft)[16]-t)/n} ${(c(this,Ft)[17]-e)/r} L${(c(this,Ft)[14]-t)/n} ${(c(this,Ft)[15]-e)/r} Z`},lP=function(t){const e=c(this,ra);t.push(`L${e[4]} ${e[5]} Z`)},cP=function(t){const[e,n,r,o]=c(this,ns),u=c(this,Ft).subarray(4,6),h=c(this,Ft).subarray(16,18),[f,p,m,y]=D(this,mn,Xp).call(this);t.push(`L${(u[0]-e)/r} ${(u[1]-n)/o} L${f} ${p} L${m} ${y} L${(h[0]-e)/r} ${(h[1]-n)/o}`)},uP=function(t){const e=c(this,Ft),[n,r,o,u]=c(this,ns),[h,f,p,m]=D(this,mn,Xp).call(this),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(e[2]-n)/o,(e[3]-r)/u,NaN,NaN,NaN,NaN,(e[4]-n)/o,(e[5]-r)/u,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(e[16]-n)/o,(e[17]-r)/u,NaN,NaN,NaN,NaN,(e[14]-n)/o,(e[15]-r)/u],0),this.newFreeDrawOutline(y,t,c(this,ns),c(this,Zd),c(this,Wd),c(this,Qd))},hP=function(t,e){const n=c(this,ra);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},dP=function(t,e){const n=c(this,Ft).subarray(4,6),r=c(this,Ft).subarray(16,18),[o,u,h,f]=c(this,ns),[p,m,y,b]=D(this,mn,Xp).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-o)/h,(n[1]-u)/f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(r[0]-o)/h,(r[1]-u)/f],e),e+=24},_(Ar,Xg,8),_(Ar,Ev,2),_(Ar,Sv,c(Ar,Xg)+c(Ar,Ev));let sv=Ar;var tf,fu,Wr,qg,is,Kg,Ze,Tv,pP;class fP extends ut{constructor(e,n,r,o,u,h){super();_(this,Tv);_(this,tf);_(this,fu,new Float32Array(4));_(this,Wr);_(this,qg);_(this,is);_(this,Kg);_(this,Ze);E(this,Ze,e),E(this,is,n),E(this,tf,r),E(this,Kg,o),E(this,Wr,u),E(this,qg,h),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],D(this,Tv,pP).call(this,h);const[f,p,m,y]=c(this,fu);for(let b=0,A=e.length;b<A;b+=2)e[b]=(e[b]-f)/m,e[b+1]=(e[b+1]-p)/y;for(let b=0,A=n.length;b<A;b+=2)n[b]=(n[b]-f)/m,n[b+1]=(n[b+1]-p)/y}toSVGPath(){const e=[`M${c(this,Ze)[4]} ${c(this,Ze)[5]}`];for(let n=6,r=c(this,Ze).length;n<r;n+=6){if(isNaN(c(this,Ze)[n])){e.push(`L${c(this,Ze)[n+4]} ${c(this,Ze)[n+5]}`);continue}e.push(`C${c(this,Ze)[n]} ${c(this,Ze)[n+1]} ${c(this,Ze)[n+2]} ${c(this,Ze)[n+3]} ${c(this,Ze)[n+4]} ${c(this,Ze)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,r,o],u){const h=r-e,f=o-n;let p,m;switch(u){case 0:p=ut._rescale(c(this,Ze),e,o,h,-f),m=ut._rescale(c(this,is),e,o,h,-f);break;case 90:p=ut._rescaleAndSwap(c(this,Ze),e,n,h,f),m=ut._rescaleAndSwap(c(this,is),e,n,h,f);break;case 180:p=ut._rescale(c(this,Ze),r,n,-h,f),m=ut._rescale(c(this,is),r,n,-h,f);break;case 270:p=ut._rescaleAndSwap(c(this,Ze),r,o,-h,-f),m=ut._rescaleAndSwap(c(this,is),r,o,-h,-f);break}return{outline:Array.from(p),points:[Array.from(m)]}}get box(){return c(this,fu)}newOutliner(e,n,r,o,u,h=0){return new sv(e,n,r,o,u,h)}getNewOutline(e,n){const[r,o,u,h]=c(this,fu),[f,p,m,y]=c(this,tf),b=u*m,A=h*y,S=r*m+f,w=o*y+p,x=this.newOutliner({x:c(this,is)[0]*b+S,y:c(this,is)[1]*A+w},c(this,tf),c(this,Kg),e,c(this,qg),n??c(this,Wr));for(let C=2;C<c(this,is).length;C+=2)x.add({x:c(this,is)[C]*b+S,y:c(this,is)[C+1]*A+w});return x.getOutlines()}}tf=new WeakMap,fu=new WeakMap,Wr=new WeakMap,qg=new WeakMap,is=new WeakMap,Kg=new WeakMap,Ze=new WeakMap,Tv=new WeakSet,pP=function(e){const n=c(this,Ze);let r=n[4],o=n[5];const u=[r,o,r,o];let h=r,f=o,p=r,m=o;const y=e?Math.max:Math.min,b=new Float32Array(4);for(let S=6,w=n.length;S<w;S+=6){const x=n[S+4],C=n[S+5];isNaN(n[S])?(ot.pointBoundingBox(x,C,u),f>C?(h=x,f=C):f===C&&(h=y(h,x)),m<C?(p=x,m=C):m===C&&(p=y(p,x))):(b[0]=b[1]=1/0,b[2]=b[3]=-1/0,ot.bezierBoundingBox(r,o,...n.slice(S,S+6),b),ot.rectBoundingBox(b[0],b[1],b[2],b[3],u),f>b[1]?(h=b[0],f=b[1]):f===b[1]&&(h=y(h,b[0])),m<b[3]?(p=b[2],m=b[3]):m===b[3]&&(p=y(p,b[2]))),r=x,o=C}const A=c(this,fu);A[0]=u[0]-c(this,Wr),A[1]=u[1]-c(this,Wr),A[2]=u[2]-u[0]+2*c(this,Wr),A[3]=u[3]-u[1]+2*c(this,Wr),this.firstPoint=[h,f],this.lastPoint=[p,m]};var $g,Wg,Qg,xl,oa,ui,mP,xb,gP,yP,x_;class w_{constructor(t,e=0,n=0,r=!0){_(this,ui);_(this,$g);_(this,Wg);_(this,Qg);_(this,xl,[]);_(this,oa,[]);const o=[1/0,1/0,-1/0,-1/0],u=10**-4;for(const{x:w,y:x,width:C,height:O}of t){const M=Math.floor((w-e)/u)*u,N=Math.ceil((w+C+e)/u)*u,L=Math.floor((x-e)/u)*u,I=Math.ceil((x+O+e)/u)*u,k=[M,L,I,!0],j=[N,L,I,!1];c(this,xl).push(k,j),ot.rectBoundingBox(M,L,N,I,o)}const h=o[2]-o[0]+2*n,f=o[3]-o[1]+2*n,p=o[0]-n,m=o[1]-n;let y=r?-1/0:1/0,b=1/0;const A=c(this,xl).at(r?-1:-2),S=[A[0],A[2]];for(const w of c(this,xl)){const[x,C,O,M]=w;!M&&r?C<b?(b=C,y=x):C===b&&(y=Math.max(y,x)):M&&!r&&(C<b?(b=C,y=x):C===b&&(y=Math.min(y,x))),w[0]=(x-p)/h,w[1]=(C-m)/f,w[2]=(O-m)/f}E(this,$g,new Float32Array([p,m,h,f])),E(this,Wg,[y,b]),E(this,Qg,S)}getOutlines(){c(this,xl).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of c(this,xl))e[3]?(t.push(...D(this,ui,x_).call(this,e)),D(this,ui,gP).call(this,e)):(D(this,ui,yP).call(this,e),t.push(...D(this,ui,x_).call(this,e)));return D(this,ui,mP).call(this,t)}}$g=new WeakMap,Wg=new WeakMap,Qg=new WeakMap,xl=new WeakMap,oa=new WeakMap,ui=new WeakSet,mP=function(t){const e=[],n=new Set;for(const u of t){const[h,f,p]=u;e.push([h,f,u],[h,p,u])}e.sort((u,h)=>u[1]-h[1]||u[0]-h[0]);for(let u=0,h=e.length;u<h;u+=2){const f=e[u][2],p=e[u+1][2];f.push(p),p.push(f),n.add(f),n.add(p)}const r=[];let o;for(;n.size>0;){const u=n.values().next().value;let[h,f,p,m,y]=u;n.delete(u);let b=h,A=f;for(o=[h,p],r.push(o);;){let S;if(n.has(m))S=m;else if(n.has(y))S=y;else break;n.delete(S),[h,f,p,m,y]=S,b!==h&&(o.push(b,A,h,A===f?f:p),b=h),A=A===f?p:f}o.push(b,A)}return new C5(r,c(this,$g),c(this,Wg),c(this,Qg))},xb=function(t){const e=c(this,oa);let n=0,r=e.length-1;for(;n<=r;){const o=n+r>>1,u=e[o][0];if(u===t)return o;u<t?n=o+1:r=o-1}return r+1},gP=function([,t,e]){const n=D(this,ui,xb).call(this,t);c(this,oa).splice(n,0,[t,e])},yP=function([,t,e]){const n=D(this,ui,xb).call(this,t);for(let r=n;r<c(this,oa).length;r++){const[o,u]=c(this,oa)[r];if(o!==t)break;if(o===t&&u===e){c(this,oa).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[o,u]=c(this,oa)[r];if(o!==t)break;if(o===t&&u===e){c(this,oa).splice(r,1);return}}},x_=function(t){const[e,n,r]=t,o=[[e,n,r]],u=D(this,ui,xb).call(this,r);for(let h=0;h<u;h++){const[f,p]=c(this,oa)[h];for(let m=0,y=o.length;m<y;m++){const[,b,A]=o[m];if(!(p<=b||A<=f)){if(b>=f){if(A>p)o[m][1]=p;else{if(y===1)return[];o.splice(m,1),m--,y--}continue}o[m][2]=f,A>p&&o.push([e,p,A])}}}return o};var Zg,ef;class C5 extends ut{constructor(e,n,r,o){super();_(this,Zg);_(this,ef);E(this,ef,e),E(this,Zg,n),this.firstPoint=r,this.lastPoint=o}toSVGPath(){const e=[];for(const n of c(this,ef)){let[r,o]=n;e.push(`M${r} ${o}`);for(let u=2;u<n.length;u+=2){const h=n[u],f=n[u+1];h===r?(e.push(`V${f}`),o=f):f===o&&(e.push(`H${h}`),r=h)}e.push("Z")}return e.join(" ")}serialize([e,n,r,o],u){const h=[],f=r-e,p=o-n;for(const m of c(this,ef)){const y=new Array(m.length);for(let b=0;b<m.length;b+=2)y[b]=e+m[b]*f,y[b+1]=o-m[b+1]*p;h.push(y)}return h}get box(){return c(this,Zg)}get classNamesForOutlining(){return["highlightOutline"]}}Zg=new WeakMap,ef=new WeakMap;class C_ extends sv{newFreeDrawOutline(t,e,n,r,o,u){return new D5(t,e,n,r,o,u)}}class D5 extends fP{newOutliner(t,e,n,r,o,u=0){return new C_(t,e,n,r,o,u)}}var nf,Jg,Qr,pu,ty,Di,ey,ny,mu,ss,as,Pn,sf,af,Wn,rf,Us,iy,Bt,D_,Cb,bP,vP,AP,M_,hc,Hs,Dh,EP,Db,Mb,SP,TP,_P,wP,xP;const Jt=class Jt extends Te{constructor(e){super({...e,name:"highlightEditor"});_(this,Bt);_(this,nf,null);_(this,Jg,0);_(this,Qr);_(this,pu,null);_(this,ty,null);_(this,Di,null);_(this,ey,null);_(this,ny,0);_(this,mu,null);_(this,ss,null);_(this,as,null);_(this,Pn,!1);_(this,sf,null);_(this,af,null);_(this,Wn,null);_(this,rf,"");_(this,Us);_(this,iy,"");this.color=e.color||Jt._defaultColor,E(this,Us,e.thickness||Jt._defaultThickness),this.opacity=e.opacity||Jt._defaultOpacity,E(this,Qr,e.boxes||null),E(this,iy,e.methodOfCreation||""),E(this,rf,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(E(this,Pn,!0),D(this,Bt,Cb).call(this,e),D(this,Bt,hc).call(this)):c(this,Qr)&&(E(this,nf,e.anchorNode),E(this,Jg,e.anchorOffset),E(this,ey,e.focusNode),E(this,ny,e.focusOffset),D(this,Bt,D_).call(this),D(this,Bt,hc).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=Jt.prototype;return Dt(this,"_keyboardManager",new py([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,Pn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:c(this,Us),methodOfCreation:c(this,iy)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var r;Te.initialize(e,n),Jt._defaultColor||(Jt._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case Xt.HIGHLIGHT_COLOR:Jt._defaultColor=n;break;case Xt.HIGHLIGHT_THICKNESS:Jt._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return c(this,af)}get commentButtonPosition(){return c(this,sf)}updateParams(e,n){switch(e){case Xt.HIGHLIGHT_COLOR:D(this,Bt,bP).call(this,n);break;case Xt.HIGHLIGHT_THICKNESS:D(this,Bt,vP).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Xt.HIGHLIGHT_COLOR,Jt._defaultColor],[Xt.HIGHLIGHT_THICKNESS,Jt._defaultThickness]]}get propertiesToUpdate(){return[[Xt.HIGHLIGHT_COLOR,this.color||Jt._defaultColor],[Xt.HIGHLIGHT_THICKNESS,c(this,Us)||Jt._defaultThickness],[Xt.HIGHLIGHT_FREE,c(this,Pn)]]}onUpdatedColor(){var e,n;(e=this.parent)==null||e.drawLayer.updateProperties(c(this,as),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=c(this,ty))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",E(this,ty,new ev({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(D(this,Bt,Mb).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,D(this,Bt,Mb).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){D(this,Bt,M_).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(D(this,Bt,hc).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let n=!1;this.parent&&!e?D(this,Bt,M_).call(this):e&&(D(this,Bt,hc).call(this,e),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var o,u,h;const{drawLayer:n}=this.parent;let r;c(this,Pn)?(e=(e-this.rotation+360)%360,r=D(o=Jt,Hs,Dh).call(o,c(this,ss).box,e)):r=D(u=Jt,Hs,Dh).call(u,[this.x,this.y,this.width,this.height],e),n.updateProperties(c(this,as),{bbox:r,root:{"data-main-rotation":e}}),n.updateProperties(c(this,Wn),{bbox:D(h=Jt,Hs,Dh).call(h,c(this,Di).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();c(this,rf)&&(e.setAttribute("aria-label",c(this,rf)),e.setAttribute("role","mark")),c(this,Pn)?e.classList.add("free"):this.div.addEventListener("keydown",D(this,Bt,EP).bind(this),{signal:this._uiManager._signal});const n=E(this,mu,document.createElement("div"));return e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=c(this,pu),this.setDims(),LI(this,c(this,mu),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(c(this,Wn),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(c(this,Wn),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:D(this,Bt,Db).call(this,!0);break;case 1:case 3:D(this,Bt,Db).call(this,!1);break}}select(){var e;super.select(),c(this,Wn)&&((e=this.parent)==null||e.drawLayer.updateProperties(c(this,Wn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),c(this,Wn)&&((e=this.parent)==null||e.drawLayer.updateProperties(c(this,Wn),{rootClass:{selected:!1}}),c(this,Pn)||D(this,Bt,Db).call(this,!1))}get _mustFixPosition(){return!c(this,Pn)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(c(this,as),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(c(this,Wn),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:r,x:o,y:u}){const{x:h,y:f,width:p,height:m}=r.getBoundingClientRect(),y=new AbortController,b=e.combinedSignal(y),A=S=>{y.abort(),D(this,Hs,wP).call(this,e,S)};window.addEventListener("blur",A,{signal:b}),window.addEventListener("pointerup",A,{signal:b}),window.addEventListener("pointerdown",Xe,{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",Ys,{signal:b}),r.addEventListener("pointermove",D(this,Hs,_P).bind(this,e),{signal:b}),this._freeHighlight=new C_({x:o,y:u},[h,f,p,m],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,r){var w,x,C,O;let o=null;if(e instanceof tP){const{data:{quadPoints:M,rect:N,rotation:L,id:I,color:k,opacity:j,popupRef:W,richText:nt,contentsObj:et,creationDate:ht,modificationDate:mt},parent:{page:{pageNumber:gt}}}=e;o=e={annotationType:Ot.HIGHLIGHT,color:Array.from(k),opacity:j,quadPoints:M,boxes:null,pageIndex:gt-1,rect:N.slice(0),rotation:L,annotationElementId:I,id:I,deleted:!1,popupRef:W,richText:nt,comment:(et==null?void 0:et.str)||null,creationDate:ht,modificationDate:mt}}else if(e instanceof B1){const{data:{inkLists:M,rect:N,rotation:L,id:I,color:k,borderStyle:{rawWidth:j},popupRef:W,richText:nt,contentsObj:et,creationDate:ht,modificationDate:mt},parent:{page:{pageNumber:gt}}}=e;o=e={annotationType:Ot.HIGHLIGHT,color:Array.from(k),thickness:j,inkLists:M,boxes:null,pageIndex:gt-1,rect:N.slice(0),rotation:L,annotationElementId:I,id:I,deleted:!1,popupRef:W,richText:nt,comment:(et==null?void 0:et.str)||null,creationDate:ht,modificationDate:mt}}const{color:u,quadPoints:h,inkLists:f,opacity:p}=e,m=await super.deserialize(e,n,r);m.color=ot.makeHexColor(...u),m.opacity=p||1,f&&E(m,Us,e.thickness),m._initialData=o,e.comment&&m.setCommentData(e);const[y,b]=m.pageDimensions,[A,S]=m.pageTranslation;if(h){const M=E(m,Qr,[]);for(let N=0;N<h.length;N+=8)M.push({x:(h[N]-A)/y,y:1-(h[N+1]-S)/b,width:(h[N+2]-h[N])/y,height:(h[N+1]-h[N+5])/b});D(w=m,Bt,D_).call(w),D(x=m,Bt,hc).call(x),m.rotate(m.rotation)}else if(f){E(m,Pn,!0);const M=f[0],N={x:M[0]-A,y:b-(M[1]-S)},L=new C_(N,[0,0,y,b],1,c(m,Us)/2,!0,.001);for(let j=0,W=M.length;j<W;j+=2)N.x=M[j]-A,N.y=b-(M[j+1]-S),L.add(N);const{id:I,clipPathId:k}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:m.color,"fill-opacity":m._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:L.toSVGPath()}},!0,!0);D(C=m,Bt,Cb).call(C,{highlightOutlines:L.getOutlines(),highlightId:I,clipPathId:k}),D(O=m,Bt,hc).call(O),m.rotate(m.parentRotation)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=Te._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(e);return Object.assign(r,{color:n,opacity:this.opacity,thickness:c(this,Us),quadPoints:D(this,Bt,SP).call(this),outlines:D(this,Bt,TP).call(this,r.rect)}),this.addComment(r),this.annotationElementId&&!D(this,Bt,xP).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};nf=new WeakMap,Jg=new WeakMap,Qr=new WeakMap,pu=new WeakMap,ty=new WeakMap,Di=new WeakMap,ey=new WeakMap,ny=new WeakMap,mu=new WeakMap,ss=new WeakMap,as=new WeakMap,Pn=new WeakMap,sf=new WeakMap,af=new WeakMap,Wn=new WeakMap,rf=new WeakMap,Us=new WeakMap,iy=new WeakMap,Bt=new WeakSet,D_=function(){const e=new w_(c(this,Qr),.001);E(this,ss,e.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,ss).box;const n=new w_(c(this,Qr),.0025,.001,this._uiManager.direction==="ltr");E(this,Di,n.getOutlines());const{firstPoint:r}=c(this,ss);E(this,sf,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]);const{lastPoint:o}=c(this,Di);E(this,af,[(o[0]-this.x)/this.width,(o[1]-this.y)/this.height])},Cb=function({highlightOutlines:e,highlightId:n,clipPathId:r}){var b,A;if(E(this,ss,e),E(this,Di,e.getNewOutline(c(this,Us)/2+1.5,.0025)),n>=0)E(this,as,n),E(this,pu,r),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),E(this,Wn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,Di).box,path:{d:c(this,Di).toSVGPath()}},!0));else if(this.parent){const S=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,as),{bbox:D(b=Jt,Hs,Dh).call(b,c(this,ss).box,(S-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,Wn),{bbox:D(A=Jt,Hs,Dh).call(A,c(this,Di).box,S),path:{d:c(this,Di).toSVGPath()}})}const[u,h,f,p]=e.box;switch(this.rotation){case 0:this.x=u,this.y=h,this.width=f,this.height=p;break;case 90:{const[S,w]=this.parentDimensions;this.x=h,this.y=1-u,this.width=f*w/S,this.height=p*S/w;break}case 180:this.x=1-u,this.y=1-h,this.width=f,this.height=p;break;case 270:{const[S,w]=this.parentDimensions;this.x=1-h,this.y=u,this.width=f*w/S,this.height=p*S/w;break}}const{firstPoint:m}=e;E(this,sf,[(m[0]-u)/f,(m[1]-h)/p]);const{lastPoint:y}=c(this,Di);E(this,af,[(y[0]-u)/f,(y[1]-h)/p])},bP=function(e){const n=(u,h)=>{this.color=u,this.opacity=h,this.onUpdatedColor()},r=this.color,o=this.opacity;this.addCommands({cmd:n.bind(this,e,Jt._defaultOpacity),undo:n.bind(this,r,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Xt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},vP=function(e){const n=c(this,Us),r=o=>{E(this,Us,o),D(this,Bt,AP).call(this,o)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Xt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},AP=function(e){c(this,Pn)&&(D(this,Bt,Cb).call(this,{highlightOutlines:c(this,ss).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())},M_=function(){c(this,as)===null||!this.parent||(this.parent.drawLayer.remove(c(this,as)),E(this,as,null),this.parent.drawLayer.remove(c(this,Wn)),E(this,Wn,null))},hc=function(e=this.parent){c(this,as)===null&&({id:un(this,as)._,clipPathId:un(this,pu)._}=e.drawLayer.draw({bbox:c(this,ss).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:c(this,Pn)},path:{d:c(this,ss).toSVGPath()}},!1,!0),E(this,Wn,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,Pn)},bbox:c(this,Di).box,path:{d:c(this,Di).toSVGPath()}},c(this,Pn))),c(this,mu)&&(c(this,mu).style.clipPath=c(this,pu)))},Hs=new WeakSet,Dh=function([e,n,r,o],u){switch(u){case 90:return[1-n-o,e,o,r];case 180:return[1-e-r,1-n-o,r,o];case 270:return[n,1-e-r,o,r]}return[e,n,r,o]},EP=function(e){Jt._keyboardManager.exec(this,e)},Db=function(e){if(!c(this,nf))return;const n=window.getSelection();e?n.setPosition(c(this,nf),c(this,Jg)):n.setPosition(c(this,ey),c(this,ny))},Mb=function(){return c(this,Pn)?this.rotation:0},SP=function(){if(c(this,Pn))return null;const[e,n]=this.pageDimensions,[r,o]=this.pageTranslation,u=c(this,Qr),h=new Float32Array(u.length*8);let f=0;for(const{x:p,y:m,width:y,height:b}of u){const A=p*e+r,S=(1-m)*n+o;h[f]=h[f+4]=A,h[f+1]=h[f+3]=S,h[f+2]=h[f+6]=A+y*e,h[f+5]=h[f+7]=S-b*n,f+=8}return h},TP=function(e){return c(this,ss).serialize(e,D(this,Bt,Mb).call(this))},_P=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},wP=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},xP=function(e){const{color:n}=this._initialData;return this.hasEditedComment||e.color.some((r,o)=>r!==n[o])},_(Jt,Hs),$(Jt,"_defaultColor",null),$(Jt,"_defaultOpacity",1),$(Jt,"_defaultThickness",12),$(Jt,"_type","highlight"),$(Jt,"_editorType",Ot.HIGHLIGHT),$(Jt,"_freeHighlightId",-1),$(Jt,"_freeHighlight",null),$(Jt,"_freeHighlightClipId","");let av=Jt;var gu;class CP{constructor(){_(this,gu,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){c(this,gu)[t]=e}toSVGProperties(){const t=c(this,gu);return E(this,gu,Object.create(null)),{root:t}}reset(){E(this,gu,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){ee("Not implemented")}}gu=new WeakMap;var rs,of,En,yu,bu,Kt,R_,O_,N_,qp,DP,Rb,Kp,Mh;const Gt=class Gt extends Te{constructor(e){super(e);_(this,Kt);_(this,rs,null);_(this,of);$(this,"_colorPicker",null);$(this,"_drawId",null);E(this,of,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(D(this,Kt,R_).call(this,e),D(this,Kt,qp).call(this))}static _mergeSVGProperties(e,n){const r=new Set(Object.keys(e));for(const[o,u]of Object.entries(n))r.has(o)?Object.assign(e[o],u):e[o]=u;return e}static getDefaultDrawingOptions(e){ee("Not implemented")}static get typesMap(){ee("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const r=this.typesMap.get(e);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(c(Gt,En).updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const r=this.constructor.typesMap.get(e);r&&this._updateProperty(e,r,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[r,o]of this.typesMap)e.push([r,n[o]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[r,o]of this.constructor.typesMap)e.push([r,n[o]]);return e}_updateProperty(e,n,r){const o=this._drawingOptions,u=o[n],h=f=>{var m;o.updateProperty(n,f);const p=c(this,rs).updateProperty(n,f);p&&D(this,Kt,Kp).call(this,p),(m=this.parent)==null||m.drawLayer.updateProperties(this._drawId,o.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:h.bind(this,r),undo:h.bind(this,u),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Gt._mergeSVGProperties(c(this,rs).getPathResizingSVGProperties(D(this,Kt,Rb).call(this)),{bbox:D(this,Kt,Mh).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Gt._mergeSVGProperties(c(this,rs).getPathResizedSVGProperties(D(this,Kt,Rb).call(this)),{bbox:D(this,Kt,Mh).call(this)}))}_onTranslating(e,n){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:D(this,Kt,Mh).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Gt._mergeSVGProperties(c(this,rs).getPathTranslatedSVGProperties(D(this,Kt,Rb).call(this),this.parentDimensions),{bbox:D(this,Kt,Mh).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,of)&&(E(this,of,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){D(this,Kt,N_).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(D(this,Kt,qp).call(this),D(this,Kt,Kp).call(this,c(this,rs).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),D(this,Kt,N_).call(this)):e&&(this._uiManager.addShouldRescale(this),D(this,Kt,qp).call(this,e),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Gt._mergeSVGProperties({bbox:D(this,Kt,Mh).call(this)},c(this,rs).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&D(this,Kt,Kp).call(this,c(this,rs).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const r=super.render();r.classList.add("draw");const o=document.createElement("div");return r.append(o),o.setAttribute("aria-hidden","true"),o.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),r}static createDrawerInstance(e,n,r,o,u){ee("Not implemented")}static startDrawing(e,n,r,o){var x;const{target:u,offsetX:h,offsetY:f,pointerId:p,pointerType:m}=o;if(Yn.isInitializedAndDifferentPointerType(m))return;const{viewport:{rotation:y}}=e,{width:b,height:A}=u.getBoundingClientRect(),S=E(Gt,yu,new AbortController),w=e.combinedSignal(S);if(Yn.setPointer(m,p),window.addEventListener("pointerup",C=>{Yn.isSamePointerIdOrRemove(C.pointerId)&&this._endDraw(C)},{signal:w}),window.addEventListener("pointercancel",C=>{Yn.isSamePointerIdOrRemove(C.pointerId)&&this._currentParent.endDrawingSession()},{signal:w}),window.addEventListener("pointerdown",C=>{Yn.isSamePointerType(C.pointerType)&&(Yn.initializeAndAddPointerId(C.pointerId),c(Gt,En).isCancellable()&&(c(Gt,En).removeLastElement(),c(Gt,En).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",Ys,{signal:w}),u.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),u.addEventListener("touchmove",C=>{Yn.isSameTimeStamp(C.timeStamp)&&Xe(C)},{signal:w}),e.toggleDrawing(),(x=n._editorUndoBar)==null||x.hide(),c(Gt,En)){e.drawLayer.updateProperties(this._currentDrawId,c(Gt,En).startNew(h,f,b,A,y));return}n.updateUIForDefaultProperties(this),E(Gt,En,this.createDrawerInstance(h,f,b,A,y)),E(Gt,bu,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(c(Gt,bu).toSVGProperties(),c(Gt,En).defaultSVGProperties),!0,!1)}static _drawMove(e){if(Yn.isSameTimeStamp(e.timeStamp),!c(Gt,En))return;const{offsetX:n,offsetY:r,pointerId:o}=e;if(Yn.isSamePointerId(o)){if(Yn.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(Gt,En).add(n,r)),Yn.setTimeStamp(e.timeStamp),Xe(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,E(Gt,En,null),E(Gt,bu,null),Yn.clearTimeStamp()),c(Gt,yu)&&(c(Gt,yu).abort(),E(Gt,yu,null),Yn.clearPointerIds())}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,c(Gt,En).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const r=c(Gt,En),o=this._currentDrawId,u=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(o,r.setLastElement(u))},undo:()=>{n.drawLayer.updateProperties(o,r.removeLastElement())},mustExec:!1,type:Xt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Xt.DRAW_STEP),!c(Gt,En).isEmpty()){const{pageDimensions:[r,o],scale:u}=n,h=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(Gt,En).getOutlines(r*u,o*u,u,this._INNER_MARGIN),drawingOptions:c(Gt,bu),mustBeCommitted:!e});return this._cleanup(!0),h}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,r,o,u,h){ee("Not implemented")}static async deserialize(e,n,r){var y,b;const{rawDims:{pageWidth:o,pageHeight:u,pageX:h,pageY:f}}=n.viewport,p=this.deserializeDraw(h,f,o,u,this._INNER_MARGIN,e),m=await super.deserialize(e,n,r);return m.createDrawingOptions(e),D(y=m,Kt,R_).call(y,{drawOutlines:p}),D(b=m,Kt,qp).call(b),m.onScaleChanging(),m.rotate(),m}serializeDraw(e){const[n,r]=this.pageTranslation,[o,u]=this.pageDimensions;return c(this,rs).serialize([n,r,o,u],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};rs=new WeakMap,of=new WeakMap,En=new WeakMap,yu=new WeakMap,bu=new WeakMap,Kt=new WeakSet,R_=function({drawOutlines:e,drawId:n,drawingOptions:r}){E(this,rs,e),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=D(this,Kt,O_).call(this,e,this.parent),D(this,Kt,Kp).call(this,e.box)},O_=function(e,n){const{id:r}=n.drawLayer.draw(Gt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return r},N_=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},qp=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=D(this,Kt,O_).call(this,c(this,rs),e)}},DP=function([e,n,r,o]){const{parentDimensions:[u,h],rotation:f}=this;switch(f){case 90:return[n,1-e,r*(h/u),o*(u/h)];case 180:return[1-e,1-n,r,o];case 270:return[1-n,e,r*(h/u),o*(u/h)];default:return[e,n,r,o]}},Rb=function(){const{x:e,y:n,width:r,height:o,parentDimensions:[u,h],rotation:f}=this;switch(f){case 90:return[1-n,e,r*(u/h),o*(h/u)];case 180:return[1-e,1-n,r,o];case 270:return[n,1-e,r*(u/h),o*(h/u)];default:return[e,n,r,o]}},Kp=function(e){[this.x,this.y,this.width,this.height]=D(this,Kt,DP).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Mh=function(){const{x:e,y:n,width:r,height:o,rotation:u,parentRotation:h,parentDimensions:[f,p]}=this;switch((u*4+h)/90){case 1:return[1-n-o,e,o,r];case 2:return[1-e-r,1-n-o,r,o];case 3:return[n,1-e-r,o,r];case 4:return[e,n-r*(f/p),o*(p/f),r*(f/p)];case 5:return[1-n,e,r*(f/p),o*(p/f)];case 6:return[1-e-o*(p/f),1-n,o*(p/f),r*(f/p)];case 7:return[n-r*(f/p),1-e-o*(p/f),r*(f/p),o*(p/f)];case 8:return[e-r,n-o,r,o];case 9:return[1-n,e-r,o,r];case 10:return[1-e,1-n,r,o];case 11:return[n-o,1-e,o,r];case 12:return[e-o*(p/f),n,o*(p/f),r*(f/p)];case 13:return[1-n-r*(f/p),e-o*(p/f),r*(f/p),o*(p/f)];case 14:return[1-e,1-n-r*(f/p),o*(p/f),r*(f/p)];case 15:return[n,1-e,r*(f/p),o*(p/f)];default:return[e,n,r,o]}},$(Gt,"_currentDrawId",-1),$(Gt,"_currentParent",null),_(Gt,En,null),_(Gt,yu,null),_(Gt,bu,null),$(Gt,"_INNER_MARGIN",3);let rv=Gt;var Ha,Sn,Tn,vu,lf,ni,Bn,Fs,Au,Eu,Su,cf,Ob;class M5{constructor(t,e,n,r,o,u){_(this,cf);_(this,Ha,new Float64Array(6));_(this,Sn);_(this,Tn);_(this,vu);_(this,lf);_(this,ni);_(this,Bn,"");_(this,Fs,0);_(this,Au,new my);_(this,Eu);_(this,Su);E(this,Eu,n),E(this,Su,r),E(this,vu,o),E(this,lf,u),[t,e]=D(this,cf,Ob).call(this,t,e);const h=E(this,Sn,[NaN,NaN,NaN,NaN,t,e]);E(this,ni,[t,e]),E(this,Tn,[{line:h,points:c(this,ni)}]),c(this,Ha).set(h,0)}updateProperty(t,e){t==="stroke-width"&&E(this,lf,e)}isEmpty(){return!c(this,Tn)||c(this,Tn).length===0}isCancellable(){return c(this,ni).length<=10}add(t,e){[t,e]=D(this,cf,Ob).call(this,t,e);const[n,r,o,u]=c(this,Ha).subarray(2,6),h=t-o,f=e-u;return Math.hypot(c(this,Eu)*h,c(this,Su)*f)<=2?null:(c(this,ni).push(t,e),isNaN(n)?(c(this,Ha).set([o,u,t,e],2),c(this,Sn).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(c(this,Ha)[0])&&c(this,Sn).splice(6,6),c(this,Ha).set([n,r,o,u,t,e],0),c(this,Sn).push(...ut.createBezierPoints(n,r,o,u,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(c(this,ni).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,r,o){E(this,Eu,n),E(this,Su,r),E(this,vu,o),[t,e]=D(this,cf,Ob).call(this,t,e);const u=E(this,Sn,[NaN,NaN,NaN,NaN,t,e]);E(this,ni,[t,e]);const h=c(this,Tn).at(-1);return h&&(h.line=new Float32Array(h.line),h.points=new Float32Array(h.points)),c(this,Tn).push({line:u,points:c(this,ni)}),c(this,Ha).set(u,0),E(this,Fs,0),this.toSVGPath(),null}getLastElement(){return c(this,Tn).at(-1)}setLastElement(t){return c(this,Tn)?(c(this,Tn).push(t),E(this,Sn,t.line),E(this,ni,t.points),E(this,Fs,0),{path:{d:this.toSVGPath()}}):c(this,Au).setLastElement(t)}removeLastElement(){if(!c(this,Tn))return c(this,Au).removeLastElement();c(this,Tn).pop(),E(this,Bn,"");for(let t=0,e=c(this,Tn).length;t<e;t++){const{line:n,points:r}=c(this,Tn)[t];E(this,Sn,n),E(this,ni,r),E(this,Fs,0),this.toSVGPath()}return{path:{d:c(this,Bn)}}}toSVGPath(){const t=ut.svgRound(c(this,Sn)[4]),e=ut.svgRound(c(this,Sn)[5]);if(c(this,ni).length===2)return E(this,Bn,`${c(this,Bn)} M ${t} ${e} Z`),c(this,Bn);if(c(this,ni).length<=6){const r=c(this,Bn).lastIndexOf("M");E(this,Bn,`${c(this,Bn).slice(0,r)} M ${t} ${e}`),E(this,Fs,6)}if(c(this,ni).length===4){const r=ut.svgRound(c(this,Sn)[10]),o=ut.svgRound(c(this,Sn)[11]);return E(this,Bn,`${c(this,Bn)} L ${r} ${o}`),E(this,Fs,12),c(this,Bn)}const n=[];c(this,Fs)===0&&(n.push(`M ${t} ${e}`),E(this,Fs,6));for(let r=c(this,Fs),o=c(this,Sn).length;r<o;r+=6){const[u,h,f,p,m,y]=c(this,Sn).slice(r,r+6).map(ut.svgRound);n.push(`C${u} ${h} ${f} ${p} ${m} ${y}`)}return E(this,Bn,c(this,Bn)+n.join(" ")),E(this,Fs,c(this,Sn).length),c(this,Bn)}getOutlines(t,e,n,r){const o=c(this,Tn).at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),c(this,Au).build(c(this,Tn),t,e,n,c(this,vu),c(this,lf),r),E(this,Ha,null),E(this,Sn,null),E(this,Tn,null),E(this,Bn,null),c(this,Au)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Ha=new WeakMap,Sn=new WeakMap,Tn=new WeakMap,vu=new WeakMap,lf=new WeakMap,ni=new WeakMap,Bn=new WeakMap,Fs=new WeakMap,Au=new WeakMap,Eu=new WeakMap,Su=new WeakMap,cf=new WeakSet,Ob=function(t,e){return ut._normalizePoint(t,e,c(this,Eu),c(this,Su),c(this,vu))};var ii,sy,ay,os,Va,za,uf,hf,Tu,Hn,yr,MP,RP,OP;class my extends ut{constructor(){super(...arguments);_(this,Hn);_(this,ii);_(this,sy,0);_(this,ay);_(this,os);_(this,Va);_(this,za);_(this,uf);_(this,hf);_(this,Tu)}build(e,n,r,o,u,h,f){E(this,Va,n),E(this,za,r),E(this,uf,o),E(this,hf,u),E(this,Tu,h),E(this,ay,f??0),E(this,os,e),D(this,Hn,RP).call(this)}get thickness(){return c(this,Tu)}setLastElement(e){return c(this,os).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,os).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of c(this,os)){if(e.push(`M${ut.svgRound(n[4])} ${ut.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${ut.svgRound(n[10])} ${ut.svgRound(n[11])}`);continue}for(let r=6,o=n.length;r<o;r+=6){const[u,h,f,p,m,y]=n.subarray(r,r+6).map(ut.svgRound);e.push(`C${u} ${h} ${f} ${p} ${m} ${y}`)}}return e.join("")}serialize([e,n,r,o],u){const h=[],f=[],[p,m,y,b]=D(this,Hn,MP).call(this);let A,S,w,x,C,O,M,N,L;switch(c(this,hf)){case 0:L=ut._rescale,A=e,S=n+o,w=r,x=-o,C=e+p*r,O=n+(1-m-b)*o,M=e+(p+y)*r,N=n+(1-m)*o;break;case 90:L=ut._rescaleAndSwap,A=e,S=n,w=r,x=o,C=e+m*r,O=n+p*o,M=e+(m+b)*r,N=n+(p+y)*o;break;case 180:L=ut._rescale,A=e+r,S=n,w=-r,x=o,C=e+(1-p-y)*r,O=n+m*o,M=e+(1-p)*r,N=n+(m+b)*o;break;case 270:L=ut._rescaleAndSwap,A=e+r,S=n+o,w=-r,x=-o,C=e+(1-m-b)*r,O=n+(1-p-y)*o,M=e+(1-m)*r,N=n+(1-p)*o;break}for(const{line:I,points:k}of c(this,os))h.push(L(I,A,S,w,x,u?new Array(I.length):null)),f.push(L(k,A,S,w,x,u?new Array(k.length):null));return{lines:h,points:f,rect:[C,O,M,N]}}static deserialize(e,n,r,o,u,{paths:{lines:h,points:f},rotation:p,thickness:m}){const y=[];let b,A,S,w,x;switch(p){case 0:x=ut._rescale,b=-e/r,A=n/o+1,S=1/r,w=-1/o;break;case 90:x=ut._rescaleAndSwap,b=-n/o,A=-e/r,S=1/o,w=1/r;break;case 180:x=ut._rescale,b=e/r+1,A=-n/o,S=-1/r,w=1/o;break;case 270:x=ut._rescaleAndSwap,b=n/o+1,A=e/r+1,S=-1/o,w=-1/r;break}if(!h){h=[];for(const O of f){const M=O.length;if(M===2){h.push(new Float32Array([NaN,NaN,NaN,NaN,O[0],O[1]]));continue}if(M===4){h.push(new Float32Array([NaN,NaN,NaN,NaN,O[0],O[1],NaN,NaN,NaN,NaN,O[2],O[3]]));continue}const N=new Float32Array(3*(M-2));h.push(N);let[L,I,k,j]=O.subarray(0,4);N.set([NaN,NaN,NaN,NaN,L,I],0);for(let W=4;W<M;W+=2){const nt=O[W],et=O[W+1];N.set(ut.createBezierPoints(L,I,k,j,nt,et),(W-2)*3),[L,I,k,j]=[k,j,nt,et]}}}for(let O=0,M=h.length;O<M;O++)y.push({line:x(h[O].map(N=>N??NaN),b,A,S,w),points:x(f[O].map(N=>N??NaN),b,A,S,w)});const C=new this.prototype.constructor;return C.build(y,r,o,1,p,m,u),C}get box(){return c(this,ii)}updateProperty(e,n){return e==="stroke-width"?D(this,Hn,OP).call(this,n):null}updateParentDimensions([e,n],r){const[o,u]=D(this,Hn,yr).call(this);E(this,Va,e),E(this,za,n),E(this,uf,r);const[h,f]=D(this,Hn,yr).call(this),p=h-o,m=f-u,y=c(this,ii);return y[0]-=p,y[1]-=m,y[2]+=2*p,y[3]+=2*m,y}updateRotation(e){return E(this,sy,e),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,ii).map(ut.svgRound).join(" ")}get defaultProperties(){const[e,n]=c(this,ii);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=c(this,ii);let r=0,o=0,u=0,h=0,f=0,p=0;switch(c(this,sy)){case 90:o=n/e,u=-e/n,f=e;break;case 180:r=-1,h=-1,f=e,p=n;break;case 270:o=-n/e,u=e/n,p=n;break;default:return""}return`matrix(${r} ${o} ${u} ${h} ${ut.svgRound(f)} ${ut.svgRound(p)})`}getPathResizingSVGProperties([e,n,r,o]){const[u,h]=D(this,Hn,yr).call(this),[f,p,m,y]=c(this,ii);if(Math.abs(m-u)<=ut.PRECISION||Math.abs(y-h)<=ut.PRECISION){const x=e+r/2-(f+m/2),C=n+o/2-(p+y/2);return{path:{"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(n)}`,transform:`${this.rotationTransform} translate(${x} ${C})`}}}const b=(r-2*u)/(m-2*u),A=(o-2*h)/(y-2*h),S=m/r,w=y/o;return{path:{"transform-origin":`${ut.svgRound(f)} ${ut.svgRound(p)}`,transform:`${this.rotationTransform} scale(${S} ${w}) translate(${ut.svgRound(u)} ${ut.svgRound(h)}) scale(${b} ${A}) translate(${ut.svgRound(-u)} ${ut.svgRound(-h)})`}}}getPathResizedSVGProperties([e,n,r,o]){const[u,h]=D(this,Hn,yr).call(this),f=c(this,ii),[p,m,y,b]=f;if(f[0]=e,f[1]=n,f[2]=r,f[3]=o,Math.abs(y-u)<=ut.PRECISION||Math.abs(b-h)<=ut.PRECISION){const C=e+r/2-(p+y/2),O=n+o/2-(m+b/2);for(const{line:M,points:N}of c(this,os))ut._translate(M,C,O,M),ut._translate(N,C,O,N);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const A=(r-2*u)/(y-2*u),S=(o-2*h)/(b-2*h),w=-A*(p+u)+e+u,x=-S*(m+h)+n+h;if(A!==1||S!==1||w!==0||x!==0)for(const{line:C,points:O}of c(this,os))ut._rescale(C,w,x,A,S,C),ut._rescale(O,w,x,A,S,O);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],r){const[o,u]=r,h=c(this,ii),f=e-h[0],p=n-h[1];if(c(this,Va)===o&&c(this,za)===u)for(const{line:m,points:y}of c(this,os))ut._translate(m,f,p,m),ut._translate(y,f,p,y);else{const m=c(this,Va)/o,y=c(this,za)/u;E(this,Va,o),E(this,za,u);for(const{line:b,points:A}of c(this,os))ut._rescale(b,f,p,m,y,b),ut._rescale(A,f,p,m,y,A);h[2]*=m,h[3]*=y}return h[0]=e,h[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(n)}`}}}get defaultSVGProperties(){const e=c(this,ii);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ut.svgRound(e[0])} ${ut.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}ii=new WeakMap,sy=new WeakMap,ay=new WeakMap,os=new WeakMap,Va=new WeakMap,za=new WeakMap,uf=new WeakMap,hf=new WeakMap,Tu=new WeakMap,Hn=new WeakSet,yr=function(e=c(this,Tu)){const n=c(this,ay)+e/2*c(this,uf);return c(this,hf)%180===0?[n/c(this,Va),n/c(this,za)]:[n/c(this,za),n/c(this,Va)]},MP=function(){const[e,n,r,o]=c(this,ii),[u,h]=D(this,Hn,yr).call(this,0);return[e+u,n+h,r-2*u,o-2*h]},RP=function(){const e=E(this,ii,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:o}of c(this,os)){if(o.length<=12){for(let f=4,p=o.length;f<p;f+=6)ot.pointBoundingBox(o[f],o[f+1],e);continue}let u=o[4],h=o[5];for(let f=6,p=o.length;f<p;f+=6){const[m,y,b,A,S,w]=o.subarray(f,f+6);ot.bezierBoundingBox(u,h,m,y,b,A,S,w,e),u=S,h=w}}const[n,r]=D(this,Hn,yr).call(this);e[0]=Un(e[0]-n,0,1),e[1]=Un(e[1]-r,0,1),e[2]=Un(e[2]+n,0,1),e[3]=Un(e[3]+r,0,1),e[2]-=e[0],e[3]-=e[1]},OP=function(e){const[n,r]=D(this,Hn,yr).call(this);E(this,Tu,e);const[o,u]=D(this,Hn,yr).call(this),[h,f]=[o-n,u-r],p=c(this,ii);return p[0]-=h,p[1]-=f,p[2]+=2*h,p[3]+=2*f,p};class jv extends CP{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Te._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new jv(this._viewParameters);return t.updateAll(this),t}}var _v,NP;const Vh=class Vh extends rv{constructor(e){super({...e,name:"inkEditor"});_(this,_v);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){Te.initialize(e,n),this._defaultDrawingOptions=new jv(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Dt(this,"typesMap",new Map([[Xt.INK_THICKNESS,"stroke-width"],[Xt.INK_COLOR,"stroke"],[Xt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,r,o,u){return new M5(e,n,r,o,u,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,r,o,u,h){return my.deserialize(e,n,r,o,u,h)}static async deserialize(e,n,r){let o=null;if(e instanceof B1){const{data:{inkLists:h,rect:f,rotation:p,id:m,color:y,opacity:b,borderStyle:{rawWidth:A},popupRef:S,richText:w,contentsObj:x,creationDate:C,modificationDate:O},parent:{page:{pageNumber:M}}}=e;o=e={annotationType:Ot.INK,color:Array.from(y),thickness:A,opacity:b,paths:{points:h},boxes:null,pageIndex:M-1,rect:f.slice(0),rotation:p,annotationElementId:m,id:m,deleted:!1,popupRef:S,richText:w,comment:(x==null?void 0:x.str)||null,creationDate:C,modificationDate:O}}const u=await super.deserialize(e,n,r);return u._initialData=o,e.comment&&u.setCommentData(e),u}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new nv(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Xt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:r}=this;n.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:r}){this._drawingOptions=Vh.getDefaultDrawingOptions({stroke:ot.makeHexColor(...e),"stroke-width":n,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:r}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":u,"stroke-width":h}}=this,f=Object.assign(super.serialize(e),{color:Te._colorManager.convert(o),opacity:u,thickness:h,paths:{lines:n,points:r}});return this.addComment(f),e?(f.isCopy=!0,f):this.annotationElementId&&!D(this,_v,NP).call(this,f)?null:(f.id=this.annotationElementId,f)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:n,rect:r}=this.serializeDraw(!1);return e.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};_v=new WeakSet,NP=function(e){const{color:n,thickness:r,opacity:o,pageIndex:u}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((h,f)=>h!==n[f])||e.thickness!==r||e.opacity!==o||e.pageIndex!==u},$(Vh,"_type","ink"),$(Vh,"_editorType",Ot.INK),$(Vh,"_defaultDrawingOptions",null);let L_=Vh;class I_ extends my{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const W0=8,Cp=3;var _u,ne,P_,la,LP,IP,B_,Nb,PP,BP,kP,k_,U_,UP;class io{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:r},o,u,h,f){let p=new OffscreenCanvas(1,1),m=p.getContext("2d",{alpha:!1});const y=200,b=m.font=`${n} ${r} ${y}px ${e}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:S,actualBoundingBoxAscent:w,actualBoundingBoxDescent:x,fontBoundingBoxAscent:C,fontBoundingBoxDescent:O,width:M}=m.measureText(t),N=1.5,L=Math.ceil(Math.max(Math.abs(A)+Math.abs(S)||0,M)*N),I=Math.ceil(Math.max(Math.abs(w)+Math.abs(x)||y,Math.abs(C)+Math.abs(O)||y)*N);p=new OffscreenCanvas(L,I),m=p.getContext("2d",{alpha:!0,willReadFrequently:!0}),m.font=b,m.filter="grayscale(1)",m.fillStyle="white",m.fillRect(0,0,L,I),m.fillStyle="black",m.fillText(t,L*(N-1)/2,I*(3-N)/2);const k=D(this,ne,k_).call(this,m.getImageData(0,0,L,I).data),j=D(this,ne,kP).call(this,k),W=D(this,ne,U_).call(this,j),nt=D(this,ne,B_).call(this,k,L,I,W);return this.processDrawnLines({lines:{curves:nt,width:L,height:I},pageWidth:o,pageHeight:u,rotation:h,innerMargin:f,mustSmooth:!0,areContours:!0})}static process(t,e,n,r,o){const[u,h,f]=D(this,ne,UP).call(this,t),[p,m]=D(this,ne,BP).call(this,u,h,f,Math.hypot(h,f)*c(this,_u).sigmaSFactor,c(this,_u).sigmaR,c(this,_u).kernelSize),y=D(this,ne,U_).call(this,m),b=D(this,ne,B_).call(this,p,h,f,y);return this.processDrawnLines({lines:{curves:b,width:h,height:f},pageWidth:e,pageHeight:n,rotation:r,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:r,innerMargin:o,mustSmooth:u,areContours:h}){r%180!==0&&([e,n]=[n,e]);const{curves:f,width:p,height:m}=t,y=t.thickness??0,b=[],A=Math.min(e/p,n/m),S=A/e,w=A/n,x=[];for(const{points:O}of f){const M=u?D(this,ne,PP).call(this,O):O;if(!M)continue;x.push(M);const N=M.length,L=new Float32Array(N),I=new Float32Array(3*(N===2?2:N-2));if(b.push({line:I,points:L}),N===2){L[0]=M[0]*S,L[1]=M[1]*w,I.set([NaN,NaN,NaN,NaN,L[0],L[1]],0);continue}let[k,j,W,nt]=M;k*=S,j*=w,W*=S,nt*=w,L.set([k,j,W,nt],0),I.set([NaN,NaN,NaN,NaN,k,j],0);for(let et=4;et<N;et+=2){const ht=L[et]=M[et]*S,mt=L[et+1]=M[et+1]*w;I.set(ut.createBezierPoints(k,j,W,nt,ht,mt),(et-2)*3),[k,j,W,nt]=[W,nt,ht,mt]}}if(b.length===0)return null;const C=h?new I_:new my;return C.build(b,e,n,1,r,h?0:y,o),{outline:C,newCurves:x,areContours:h,thickness:y,width:p,height:m}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:r,height:o}){let u=1/0,h=-1/0,f=0;for(const M of t){f+=M.length;for(let N=2,L=M.length;N<L;N++){const I=M[N]-M[N-2];u=Math.min(u,I),h=Math.max(h,I)}}let p;u>=-128&&h<=127?p=Int8Array:u>=-32768&&h<=32767?p=Int16Array:p=Int32Array;const m=t.length,y=W0+Cp*m,b=new Uint32Array(y);let A=0;b[A++]=y*Uint32Array.BYTES_PER_ELEMENT+(f-2*m)*p.BYTES_PER_ELEMENT,b[A++]=0,b[A++]=r,b[A++]=o,b[A++]=e?0:1,b[A++]=Math.max(0,Math.floor(n??0)),b[A++]=m,b[A++]=p.BYTES_PER_ELEMENT;for(const M of t)b[A++]=M.length-2,b[A++]=M[0],b[A++]=M[1];const S=new CompressionStream("deflate-raw"),w=S.writable.getWriter();await w.ready,w.write(b);const x=p.prototype.constructor;for(const M of t){const N=new x(M.length-2);for(let L=2,I=M.length;L<I;L++)N[L-2]=M[L]-M[L-2];w.write(N)}w.close();const C=await new Response(S.readable).arrayBuffer();return new Uint8Array(C).toBase64()}static async decompressSignature(t){try{const e=Uint8Array.fromBase64(t),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),o=r.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let u=null,h=0;for await(const M of n)u||(u=new Uint8Array(new Uint32Array(M.buffer,0,4)[0])),u.set(M,h),h+=M.length;const f=new Uint32Array(u.buffer,0,u.length>>2),p=f[1];if(p!==0)throw new Error(`Invalid version: ${p}`);const m=f[2],y=f[3],b=f[4]===0,A=f[5],S=f[6],w=f[7],x=[],C=(W0+Cp*S)*Uint32Array.BYTES_PER_ELEMENT;let O;switch(w){case Int8Array.BYTES_PER_ELEMENT:O=new Int8Array(u.buffer,C);break;case Int16Array.BYTES_PER_ELEMENT:O=new Int16Array(u.buffer,C);break;case Int32Array.BYTES_PER_ELEMENT:O=new Int32Array(u.buffer,C);break}h=0;for(let M=0;M<S;M++){const N=f[Cp*M+W0],L=new Float32Array(N+2);x.push(L);for(let I=0;I<Cp-1;I++)L[I]=f[Cp*M+W0+I+1];for(let I=0;I<N;I++)L[I+2]=L[I]+O[h++]}return{areContours:b,thickness:A,outlines:x,width:m,height:y}}catch(e){return Ct(`decompressSignature: ${e}`),null}}}_u=new WeakMap,ne=new WeakSet,P_=function(t,e,n,r){return n-=t,r-=e,n===0?r>0?0:4:n===1?r+6:2-r},la=new WeakMap,LP=function(t,e,n,r,o,u,h){const f=D(this,ne,P_).call(this,n,r,o,u);for(let p=0;p<8;p++){const m=(-p+f-h+16)%8,y=c(this,la)[2*m],b=c(this,la)[2*m+1];if(t[(n+y)*e+(r+b)]!==0)return m}return-1},IP=function(t,e,n,r,o,u,h){const f=D(this,ne,P_).call(this,n,r,o,u);for(let p=0;p<8;p++){const m=(p+f+h+16)%8,y=c(this,la)[2*m],b=c(this,la)[2*m+1];if(t[(n+y)*e+(r+b)]!==0)return m}return-1},B_=function(t,e,n,r){const o=t.length,u=new Int32Array(o);for(let m=0;m<o;m++)u[m]=t[m]<=r?1:0;for(let m=1;m<n-1;m++)u[m*e]=u[m*e+e-1]=0;for(let m=0;m<e;m++)u[m]=u[e*n-1-m]=0;let h=1,f;const p=[];for(let m=1;m<n-1;m++){f=1;for(let y=1;y<e-1;y++){const b=m*e+y,A=u[b];if(A===0)continue;let S=m,w=y;if(A===1&&u[b-1]===0)h+=1,w-=1;else if(A>=1&&u[b+1]===0)h+=1,w+=1,A>1&&(f=A);else{A!==1&&(f=Math.abs(A));continue}const x=[y,m],C=w===y+1,O={isHole:C,points:x,id:h,parent:0};p.push(O);let M;for(const et of p)if(et.id===f){M=et;break}M?M.isHole?O.parent=C?M.parent:f:O.parent=C?f:M.parent:O.parent=C?f:0;const N=D(this,ne,LP).call(this,u,e,m,y,S,w,0);if(N===-1){u[b]=-h,u[b]!==1&&(f=Math.abs(u[b]));continue}let L=c(this,la)[2*N],I=c(this,la)[2*N+1];const k=m+L,j=y+I;S=k,w=j;let W=m,nt=y;for(;;){const et=D(this,ne,IP).call(this,u,e,W,nt,S,w,1);L=c(this,la)[2*et],I=c(this,la)[2*et+1];const ht=W+L,mt=nt+I;x.push(mt,ht);const gt=W*e+nt;if(u[gt+1]===0?u[gt]=-h:u[gt]===1&&(u[gt]=h),ht===m&&mt===y&&W===k&&nt===j){u[b]!==1&&(f=Math.abs(u[b]));break}else S=W,w=nt,W=ht,nt=mt}}}return p},Nb=function(t,e,n,r){if(n-e<=4){for(let k=e;k<n-2;k+=2)r.push(t[k],t[k+1]);return}const o=t[e],u=t[e+1],h=t[n-4]-o,f=t[n-3]-u,p=Math.hypot(h,f),m=h/p,y=f/p,b=m*u-y*o,A=f/h,S=1/p,w=Math.atan(A),x=Math.cos(w),C=Math.sin(w),O=S*(Math.abs(x)+Math.abs(C)),M=S*(1-O+O**2),N=Math.max(Math.atan(Math.abs(C+x)*M),Math.atan(Math.abs(C-x)*M));let L=0,I=e;for(let k=e+2;k<n-2;k+=2){const j=Math.abs(b-m*t[k+1]+y*t[k]);j>L&&(I=k,L=j)}L>(p*N)**2?(D(this,ne,Nb).call(this,t,e,I+2,r),D(this,ne,Nb).call(this,t,I,n,r)):r.push(o,u)},PP=function(t){const e=[],n=t.length;return D(this,ne,Nb).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},BP=function(t,e,n,r,o,u){const h=new Float32Array(u**2),f=-2*r**2,p=u>>1;for(let w=0;w<u;w++){const x=(w-p)**2;for(let C=0;C<u;C++)h[w*u+C]=Math.exp((x+(C-p)**2)/f)}const m=new Float32Array(256),y=-2*o**2;for(let w=0;w<256;w++)m[w]=Math.exp(w**2/y);const b=t.length,A=new Uint8Array(b),S=new Uint32Array(256);for(let w=0;w<n;w++)for(let x=0;x<e;x++){const C=w*e+x,O=t[C];let M=0,N=0;for(let I=0;I<u;I++){const k=w+I-p;if(!(k<0||k>=n))for(let j=0;j<u;j++){const W=x+j-p;if(W<0||W>=e)continue;const nt=t[k*e+W],et=h[I*u+j]*m[Math.abs(nt-O)];M+=nt*et,N+=et}}const L=A[C]=Math.round(M/N);S[L]++}return[A,S]},kP=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},k_=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let r=-1/0,o=1/0;for(let h=0,f=n.length;h<f;h++){const p=n[h]=t[h<<2];r=Math.max(r,p),o=Math.min(o,p)}const u=255/(r-o);for(let h=0,f=n.length;h<f;h++)n[h]=(n[h]-o)*u;return n},U_=function(t){let e,n=-1/0,r=-1/0;const o=t.findIndex(f=>f!==0);let u=o,h=o;for(e=o;e<256;e++){const f=t[e];f>n&&(e-u>r&&(r=e-u,h=e-1),n=f,u=e)}for(e=h-1;e>=0&&!(t[e]>t[e+1]);e--);return e},UP=function(t){const e=t,{width:n,height:r}=t,{maxDim:o}=c(this,_u);let u=n,h=r;if(n>o||r>o){let b=n,A=r,S=Math.log2(Math.max(n,r)/o);const w=Math.floor(S);S=S===w?w-1:w;for(let C=0;C<S;C++){u=Math.ceil(b/2),h=Math.ceil(A/2);const O=new OffscreenCanvas(u,h);O.getContext("2d").drawImage(t,0,0,b,A,0,0,u,h),b=u,A=h,t!==e&&t.close(),t=O.transferToImageBitmap()}const x=Math.min(o/u,o/h);u=Math.round(u*x),h=Math.round(h*x)}const p=new OffscreenCanvas(u,h).getContext("2d",{willReadFrequently:!0});p.fillStyle="white",p.fillRect(0,0,u,h),p.filter="grayscale(1)",p.drawImage(t,0,0,t.width,t.height,0,0,u,h);const m=p.getImageData(0,0,u,h).data;return[D(this,ne,k_).call(this,m),u,h]},_(io,ne),_(io,_u,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),_(io,la,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class k1 extends CP{constructor(){super(),super.updateProperties({fill:Te._defaultLineColor,"stroke-width":0})}clone(){const t=new k1;return t.updateAll(this),t}}class U1 extends jv{constructor(t){super(t),super.updateProperties({stroke:Te._defaultLineColor,"stroke-width":1})}clone(){const t=new U1(this._viewParameters);return t.updateAll(this),t}}var Cl,ja,Dl,wu;const ji=class ji extends rv{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});_(this,Cl,!1);_(this,ja,null);_(this,Dl,null);_(this,wu,null);this._willKeepAspectRatio=!0,E(this,Dl,e.signatureData||null),E(this,ja,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){Te.initialize(e,n),this._defaultDrawingOptions=new k1,this._defaultDrawnSignatureOptions=new U1(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Dt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!c(this,ja)}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(c(this,Dl)){const{lines:o,mustSmooth:u,areContours:h,description:f,uuid:p,heightInPage:m}=c(this,Dl),{rawDims:{pageWidth:y,pageHeight:b},rotation:A}=this.parent.viewport,S=io.processDrawnLines({lines:o,pageWidth:y,pageHeight:b,rotation:A,innerMargin:ji._INNER_MARGIN,mustSmooth:u,areContours:h});this.addSignature(S,m,f,p)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:c(this,ja)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){E(this,wu,e),this.addEditToolbar()}getUuid(){return c(this,wu)}get description(){return c(this,ja)}set description(e){E(this,ja,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:r,width:o,height:u}=c(this,Dl),h=Math.max(o,u),f=io.processDrawnLines({lines:{curves:e.map(p=>({points:p})),thickness:r,width:o,height:u},pageWidth:h,pageHeight:h,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:f.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,n,r,o){const{x:u,y:h}=this,{outline:f}=E(this,Dl,e);E(this,Cl,f instanceof I_),this.description=r;let p;c(this,Cl)?p=ji.getDefaultDrawingOptions():(p=ji._defaultDrawnSignatureOptions.clone(),p.updateProperties({"stroke-width":f.thickness})),this._addOutlines({drawOutlines:f,drawingOptions:p});const[,m]=this.pageDimensions;let y=n/m;y=y>=1?.5:y,this.width*=y/this.height,this.width>=1&&(y*=.9/this.width,this.width=.9),this.height=y,this.setDims(),this.x=u,this.y=h,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(o),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!o,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:r},rotation:o}=this.parent.viewport;return io.process(e,n,r,o,ji._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:r,pageHeight:o},rotation:u}=this.parent.viewport;return io.extractContoursFromText(e,n,r,o,u,ji._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:r},rotation:o}=this.parent.viewport;return io.processDrawnLines({lines:e,pageWidth:n,pageHeight:r,rotation:o,innerMargin:ji._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=ji.getDefaultDrawingOptions():(this._drawingOptions=ji._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":o}}=this,u=Object.assign(super.serialize(e),{isSignature:!0,areContours:c(this,Cl),color:[0,0,0],thickness:c(this,Cl)?0:o});return this.addComment(u),e?(u.paths={lines:n,points:r},u.uuid=c(this,wu),u.isCopy=!0):u.lines=n,c(this,ja)&&(u.accessibilityData={type:"Figure",alt:c(this,ja)}),u}static deserializeDraw(e,n,r,o,u,h){return h.areContours?I_.deserialize(e,n,r,o,u,h):my.deserialize(e,n,r,o,u,h)}static async deserialize(e,n,r){var u;const o=await super.deserialize(e,n,r);return E(o,Cl,e.areContours),o.description=((u=e.accessibilityData)==null?void 0:u.alt)||"",E(o,wu,e.uuid),o}};Cl=new WeakMap,ja=new WeakMap,Dl=new WeakMap,wu=new WeakMap,$(ji,"_type","signature"),$(ji,"_editorType",Ot.SIGNATURE),$(ji,"_defaultDrawingOptions",null);let F_=ji;var Oe,_n,Ml,Zr,Rl,df,Jr,xu,Ga,ls,ff,$t,$p,Wp,Lb,Ib,Pb,V_,Bb,FP;class H_ extends Te{constructor(e){super({...e,name:"stampEditor"});_(this,$t);_(this,Oe,null);_(this,_n,null);_(this,Ml,null);_(this,Zr,null);_(this,Rl,null);_(this,df,"");_(this,Jr,null);_(this,xu,!1);_(this,Ga,null);_(this,ls,!1);_(this,ff,!1);E(this,Zr,e.bitmapUrl),E(this,Rl,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){Te.initialize(e,n)}static isHandlingMimeForPasting(e){return TT.includes(e)}static paste(e,n){n.pasteEditor({mode:Ot.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:u,height:h}=e||this.copyCanvas(null,null,!0).imageData,f=await r.guess({name:"altText",request:{data:o,width:u,height:h,channels:o.length/(u*h)}});if(!f)throw new Error("No response from the AI service.");if(f.error)throw new Error("Error from the AI service.");if(f.cancel)return null;if(!f.output)throw new Error("No valid response from the AI service.");const p=f.output;return await this.setGuessedAltText(p),n&&!this.hasAltTextData()&&(this.altTextData={alt:p,decorative:!1}),p}remove(){var e;c(this,_n)&&(E(this,Oe,null),this._uiManager.imageManager.deleteId(c(this,_n)),(e=c(this,Jr))==null||e.remove(),E(this,Jr,null),c(this,Ga)&&(clearTimeout(c(this,Ga)),E(this,Ga,null))),super.remove()}rebuild(){if(!this.parent){c(this,_n)&&D(this,$t,Lb).call(this);return}super.rebuild(),this.div!==null&&(c(this,_n)&&c(this,Jr)===null&&D(this,$t,Lb).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(c(this,Ml)||c(this,Oe)||c(this,Zr)||c(this,Rl)||c(this,_n)||c(this,xu))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),c(this,xu)||(c(this,Oe)?D(this,$t,Ib).call(this):D(this,$t,Lb).call(this)),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:r,bitmap:o}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(E(this,_n,r),o&&E(this,Oe,o),E(this,xu,!1),D(this,$t,Ib).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,Ga)!==null&&clearTimeout(c(this,Ga)),E(this,Ga,setTimeout(()=>{E(this,Ga,null),D(this,$t,V_).call(this)},200))}copyCanvas(e,n,r=!1){e||(e=224);const{width:o,height:u}=c(this,Oe),h=new Ka;let f=c(this,Oe),p=o,m=u,y=null;if(n){if(o>n||u>n){const k=Math.min(n/o,n/u);p=Math.floor(o*k),m=Math.floor(u*k)}y=document.createElement("canvas");const A=y.width=Math.ceil(p*h.sx),S=y.height=Math.ceil(m*h.sy);c(this,ls)||(f=D(this,$t,Pb).call(this,A,S));const w=y.getContext("2d");w.filter=this._uiManager.hcmFilter;let x="white",C="#cfcfd8";this._uiManager.hcmFilter!=="none"?C="black":Qz.isDarkMode&&(x="#8f8f9d",C="#42414d");const O=15,M=O*h.sx,N=O*h.sy,L=new OffscreenCanvas(M*2,N*2),I=L.getContext("2d");I.fillStyle=x,I.fillRect(0,0,M*2,N*2),I.fillStyle=C,I.fillRect(0,0,M,N),I.fillRect(M,N,M,N),w.fillStyle=w.createPattern(L,"repeat"),w.fillRect(0,0,A,S),w.drawImage(f,0,0,f.width,f.height,0,0,A,S)}let b=null;if(r){let A,S;if(h.symmetric&&f.width<e&&f.height<e)A=f.width,S=f.height;else if(f=c(this,Oe),o>e||u>e){const C=Math.min(e/o,e/u);A=Math.floor(o*C),S=Math.floor(u*C),c(this,ls)||(f=D(this,$t,Pb).call(this,A,S))}const x=new OffscreenCanvas(A,S).getContext("2d",{willReadFrequently:!0});x.drawImage(f,0,0,f.width,f.height,0,0,A,S),b={width:A,height:S,data:x.getImageData(0,0,A,S).data}}return{canvas:y,width:p,height:m,imageData:b}}static async deserialize(e,n,r){var x;let o=null,u=!1;if(e instanceof eP){const{data:{rect:C,rotation:O,id:M,structParent:N,popupRef:L,richText:I,contentsObj:k,creationDate:j,modificationDate:W},container:nt,parent:{page:{pageNumber:et}},canvas:ht}=e;let mt,gt;ht?(delete e.canvas,{id:mt,bitmap:gt}=r.imageManager.getFromCanvas(nt.id,ht),ht.remove()):(u=!0,e._hasNoCanvas=!0);const vt=((x=await n._structTree.getAriaAttributes(`${Bh}${M}`))==null?void 0:x.get("aria-label"))||"";o=e={annotationType:Ot.STAMP,bitmapId:mt,bitmap:gt,pageIndex:et-1,rect:C.slice(0),rotation:O,annotationElementId:M,id:M,deleted:!1,accessibilityData:{decorative:!1,altText:vt},isSvg:!1,structParent:N,popupRef:L,richText:I,comment:(k==null?void 0:k.str)||null,creationDate:j,modificationDate:W}}const h=await super.deserialize(e,n,r),{rect:f,bitmap:p,bitmapUrl:m,bitmapId:y,isSvg:b,accessibilityData:A}=e;u?(r.addMissingCanvas(e.id,h),E(h,xu,!0)):y&&r.imageManager.isValidId(y)?(E(h,_n,y),p&&E(h,Oe,p)):E(h,Zr,m),E(h,ls,b);const[S,w]=h.pageDimensions;return h.width=(f[2]-f[0])/S,h.height=(f[3]-f[1])/w,A&&(h.altTextData=A),h._initialData=o,e.comment&&h.setCommentData(e),E(h,ff,!!o),h}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(e),{bitmapId:c(this,_n),isSvg:c(this,ls)});if(this.addComment(r),e)return r.bitmapUrl=D(this,$t,Bb).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:o,altText:u}=this.serializeAltText(!1);if(!o&&u&&(r.accessibilityData={type:"Figure",alt:u}),this.annotationElementId){const f=D(this,$t,FP).call(this,r);return f.isSame?null:(f.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(n===null)return r;n.stamps||(n.stamps=new Map);const h=c(this,ls)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(c(this,_n)))n.stamps.set(c(this,_n),{area:h,serialized:r}),r.bitmap=D(this,$t,Bb).call(this,!1);else if(c(this,ls)){const f=n.stamps.get(c(this,_n));h>f.area&&(f.area=h,f.serialized.bitmap.close(),f.serialized.bitmap=D(this,$t,Bb).call(this,!1))}return r}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Oe=new WeakMap,_n=new WeakMap,Ml=new WeakMap,Zr=new WeakMap,Rl=new WeakMap,df=new WeakMap,Jr=new WeakMap,xu=new WeakMap,Ga=new WeakMap,ls=new WeakMap,ff=new WeakMap,$t=new WeakSet,$p=function(e,n=!1){if(!e){this.remove();return}E(this,Oe,e.bitmap),n||(E(this,_n,e.id),E(this,ls,e.isSvg)),e.file&&E(this,df,e.file.name),D(this,$t,Ib).call(this)},Wp=function(){if(E(this,Ml,null),this._uiManager.enableWaiting(!1),!!c(this,Jr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Oe)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Oe)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Lb=function(){if(c(this,_n)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,_n)).then(r=>D(this,$t,$p).call(this,r,!0)).finally(()=>D(this,$t,Wp).call(this));return}if(c(this,Zr)){const r=c(this,Zr);E(this,Zr,null),this._uiManager.enableWaiting(!0),E(this,Ml,this._uiManager.imageManager.getFromUrl(r).then(o=>D(this,$t,$p).call(this,o)).finally(()=>D(this,$t,Wp).call(this)));return}if(c(this,Rl)){const r=c(this,Rl);E(this,Rl,null),this._uiManager.enableWaiting(!0),E(this,Ml,this._uiManager.imageManager.getFromFile(r).then(o=>D(this,$t,$p).call(this,o)).finally(()=>D(this,$t,Wp).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=TT.join(",");const n=this._uiManager._signal;E(this,Ml,new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),D(this,$t,$p).call(this,o)}r()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>D(this,$t,Wp).call(this))),e.click()},Ib=function(){var p;const{div:e}=this;let{width:n,height:r}=c(this,Oe);const[o,u]=this.pageDimensions,h=.75;if(this.width)n=this.width*o,r=this.height*u;else if(n>h*o||r>h*u){const m=Math.min(h*o/n,h*u/r);n*=m,r*=m}this._uiManager.enableWaiting(!1);const f=E(this,Jr,document.createElement("canvas"));f.setAttribute("role","img"),this.addContainer(f),this.width=n/o,this.height=r/u,this.setDims(),(p=this._initialOptions)!=null&&p.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),D(this,$t,V_).call(this),c(this,ff)||(this.parent.addUndoableEditor(this),E(this,ff,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,df)&&this.div.setAttribute("aria-description",c(this,df)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Pb=function(e,n){const{width:r,height:o}=c(this,Oe);let u=r,h=o,f=c(this,Oe);for(;u>2*e||h>2*n;){const p=u,m=h;u>2*e&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2)),h>2*n&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2));const y=new OffscreenCanvas(u,h);y.getContext("2d").drawImage(f,0,0,p,m,0,0,u,h),f=y.transferToImageBitmap()}return f},V_=function(){const[e,n]=this.parentDimensions,{width:r,height:o}=this,u=new Ka,h=Math.ceil(r*e*u.sx),f=Math.ceil(o*n*u.sy),p=c(this,Jr);if(!p||p.width===h&&p.height===f)return;p.width=h,p.height=f;const m=c(this,ls)?c(this,Oe):D(this,$t,Pb).call(this,h,f),y=p.getContext("2d");y.filter=this._uiManager.hcmFilter,y.drawImage(m,0,0,m.width,m.height,0,0,h,f)},Bb=function(e){if(e){if(c(this,ls)){const o=this._uiManager.imageManager.getSvgUrl(c(this,_n));if(o)return o}const n=document.createElement("canvas");return{width:n.width,height:n.height}=c(this,Oe),n.getContext("2d").drawImage(c(this,Oe),0,0),n.toDataURL()}if(c(this,ls)){const[n,r]=this.pageDimensions,o=Math.round(this.width*n*Fl.PDF_TO_CSS_UNITS),u=Math.round(this.height*r*Fl.PDF_TO_CSS_UNITS),h=new OffscreenCanvas(o,u);return h.getContext("2d").drawImage(c(this,Oe),0,0,c(this,Oe).width,c(this,Oe).height,0,0,o,u),h.transferToImageBitmap()}return structuredClone(c(this,Oe))},FP=function(e){var h;const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,o=e.pageIndex===n,u=(((h=e.accessibilityData)==null?void 0:h.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&o&&u,isSameAltText:u}},$(H_,"_type","stamp"),$(H_,"_editorType",Ot.STAMP);var Cu,pf,Ol,Nl,to,Mi,Ll,mf,gf,ca,eo,wn,no,Il,yf,bt,Pl,Ae,j_,HP,Ea,G_,Y_,kb;const Zs=class Zs{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:r,accessibilityManager:o,annotationLayer:u,drawLayer:h,textLayer:f,viewport:p,l10n:m}){_(this,Ae);_(this,Cu);_(this,pf,!1);_(this,Ol,null);_(this,Nl,null);_(this,to,null);_(this,Mi,new Map);_(this,Ll,!1);_(this,mf,!1);_(this,gf,!1);_(this,ca,null);_(this,eo,null);_(this,wn,null);_(this,no,null);_(this,Il,null);_(this,yf,-1);_(this,bt);const y=[...c(Zs,Pl).values()];if(!Zs._initialized){Zs._initialized=!0;for(const b of y)b.initialize(m,t)}t.registerEditorTypes(y),E(this,bt,t),this.pageIndex=e,this.div=n,E(this,Cu,o),E(this,Ol,u),this.viewport=p,E(this,wn,f),this.drawLayer=h,this._structTree=r,c(this,bt).addLayer(this)}updatePageIndex(t){this.pageIndex=t}get isEmpty(){return c(this,Mi).size===0}get isInvisible(){return this.isEmpty&&c(this,bt).getMode()===Ot.NONE}updateToolbar(t){c(this,bt).updateToolbar(t)}updateMode(t=c(this,bt).getMode()){switch(D(this,Ae,kb).call(this),t){case Ot.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ot.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ot.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Ot.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of c(Zs,Pl).values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=c(this,wn))==null?void 0:e.div)}setEditingState(t){c(this,bt).setEditingState(t)}addCommands(t){c(this,bt).addCommands(t)}cleanUndoStack(t){c(this,bt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=c(this,Ol))==null||e.togglePointerEvents(t)}async enable(){var n;E(this,gf,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=c(this,Il))==null||n.abort(),E(this,Il,null);const t=new Set;for(const r of c(this,Ae,j_))r.enableEditing(),r.show(!0),r.annotationElementId&&(c(this,bt).removeChangedExistingAnnotation(r),t.add(r.annotationElementId));const e=c(this,Ol);if(e)for(const r of e.getEditableAnnotations()){if(r.hide(),c(this,bt).isDeletedAnnotationElement(r.data.id)||t.has(r.data.id))continue;const o=await this.deserialize(r);o&&(this.addOrRebuild(o),o.enableEditing())}E(this,gf,!1),c(this,bt)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var r;if(E(this,mf,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),c(this,wn)&&!c(this,Il)){E(this,Il,new AbortController);const o=c(this,bt).combinedSignal(c(this,Il));c(this,wn).div.addEventListener("pointerdown",u=>{const{clientX:f,clientY:p,timeStamp:m}=u,y=c(this,yf);if(m-y>500){E(this,yf,m);return}E(this,yf,-1);const{classList:b}=this.div;b.toggle("getElements",!0);const A=document.elementsFromPoint(f,p);if(b.toggle("getElements",!1),!this.div.contains(A[0]))return;let S;const w=new RegExp(`^${om}[0-9]+$`);for(const C of A)if(w.test(C.id)){S=C.id;break}if(!S)return;const x=c(this,Mi).get(S);(x==null?void 0:x.annotationElementId)===null&&(u.stopPropagation(),u.preventDefault(),x.dblclick(u))},{signal:o,capture:!0})}const t=c(this,Ol),e=[];if(t){const o=new Map,u=new Map;for(const f of c(this,Ae,j_)){if(f.disableEditing(),!f.annotationElementId){e.push(f);continue}if(f.serialize()!==null){o.set(f.annotationElementId,f);continue}else u.set(f.annotationElementId,f);(r=this.getEditableAnnotation(f.annotationElementId))==null||r.show(),f.remove()}const h=t.getEditableAnnotations();for(const f of h){const{id:p}=f.data;if(c(this,bt).isDeletedAnnotationElement(p)){f.updateEdited({deleted:!0});continue}let m=u.get(p);if(m){m.resetAnnotationElement(f),m.show(!1),f.show();continue}m=o.get(p),m&&(c(this,bt).addChangedExistingAnnotation(m),m.renderAnnotationElement(f)&&m.show(!1)),f.show()}}D(this,Ae,kb).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const o of c(Zs,Pl).values())n.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t==null||t.updateFakeAnnotations(e),E(this,mf,!1)}getEditableAnnotation(t){var e;return((e=c(this,Ol))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){c(this,bt).getActive()!==t&&c(this,bt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=c(this,wn))!=null&&t.div&&!c(this,no)){E(this,no,new AbortController);const e=c(this,bt).combinedSignal(c(this,no));c(this,wn).div.addEventListener("pointerdown",D(this,Ae,HP).bind(this),{signal:e}),c(this,wn).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=c(this,wn))!=null&&t.div&&c(this,no)&&(c(this,no).abort(),E(this,no,null),c(this,wn).div.classList.remove("highlighting"))}enableClick(){if(c(this,Nl))return;E(this,Nl,new AbortController);const t=c(this,bt).combinedSignal(c(this,Nl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=c(this,Nl))==null||t.abort(),E(this,Nl,null)}attach(t){c(this,Mi).set(t.id,t);const{annotationElementId:e}=t;e&&c(this,bt).isDeletedAnnotationElement(e)&&c(this,bt).removeDeletedAnnotationElement(t)}detach(t){var e;c(this,Mi).delete(t.id),(e=c(this,Cu))==null||e.removePointerInTextLayer(t.contentDiv),!c(this,mf)&&t.annotationElementId&&c(this,bt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),c(this,bt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(c(this,bt).addDeletedAnnotationElement(t),Te.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),c(this,bt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!c(this,gf)),c(this,bt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!c(this,to)&&(t._focusEventsAllowed=!1,E(this,to,setTimeout(()=>{E(this,to,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:c(this,bt)._signal}),e.focus())},0))),t._structTreeParentId=(n=c(this,Cu))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of c(this,Mi).values())if(e.uid===t)return e;return null}getNextId(){return c(this,bt).getId()}combinedSignal(t){return c(this,bt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=c(this,Ae,Ea))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await c(this,bt).updateMode(t.mode);const{offsetX:n,offsetY:r}=D(this,Ae,Y_).call(this),o=this.getNextId(),u=D(this,Ae,G_).call(this,{parent:this,id:o,x:n,y:r,uiManager:c(this,bt),isCentered:!0,...e});u&&this.add(u)}async deserialize(t){var e;return await((e=c(Zs,Pl).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,c(this,bt)))||null}createAndAddNewEditor(t,e,n={}){const r=this.getNextId(),o=D(this,Ae,G_).call(this,{parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:c(this,bt),isCentered:e,...n});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(t={}){this.createAndAddNewEditor(D(this,Ae,Y_).call(this),!0,t)}setSelected(t){c(this,bt).setSelected(t)}toggleSelected(t){c(this,bt).toggleSelected(t)}unselect(t){c(this,bt).unselect(t)}pointerup(t){var r;const{isMac:e}=gn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!c(this,Ll)||(E(this,Ll,!1),(r=c(this,Ae,Ea))!=null&&r.isDrawer&&c(this,Ae,Ea).supportMultipleDrawings))return;if(!c(this,pf)){E(this,pf,!0);return}const n=c(this,bt).getMode();if(n===Ot.STAMP||n===Ot.SIGNATURE){c(this,bt).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var r;if(c(this,bt).getMode()===Ot.HIGHLIGHT&&this.enableTextSelection(),c(this,Ll)){E(this,Ll,!1);return}const{isMac:e}=gn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(E(this,Ll,!0),(r=c(this,Ae,Ea))!=null&&r.isDrawer){this.startDrawingSession(t);return}const n=c(this,bt).getActive();E(this,pf,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),c(this,ca)){c(this,Ae,Ea).startDrawing(this,c(this,bt),!1,t);return}c(this,bt).setCurrentDrawingSession(this),E(this,ca,new AbortController);const e=c(this,bt).combinedSignal(c(this,ca));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(E(this,eo,null),this.commitOrRemove())},{signal:e}),c(this,Ae,Ea).startDrawing(this,c(this,bt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&E(this,eo,e);return}c(this,eo)&&setTimeout(()=>{var e;(e=c(this,eo))==null||e.focus(),E(this,eo,null)},0)}endDrawingSession(t=!1){return c(this,ca)?(c(this,bt).setCurrentDrawingSession(null),c(this,ca).abort(),E(this,ca,null),E(this,eo,null),c(this,Ae,Ea).endDrawing(t)):null}findNewParent(t,e,n){const r=c(this,bt).findParent(e,n);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return c(this,ca)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,ca)&&c(this,Ae,Ea).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=c(this,bt).getActive())==null?void 0:t.parent)===this&&(c(this,bt).commitOrRemove(),c(this,bt).setActiveEditor(null)),c(this,to)&&(clearTimeout(c(this,to)),E(this,to,null));for(const n of c(this,Mi).values())(e=c(this,Cu))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,c(this,Mi).clear(),c(this,bt).removeLayer(this)}render({viewport:t}){this.viewport=t,Ru(this.div,t);for(const e of c(this,bt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){c(this,bt).commitOrRemove(),D(this,Ae,kb).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Ru(this.div,{rotation:n}),e!==n)for(const r of c(this,Mi).values())r.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return c(this,bt).viewParameters.realScale}};Cu=new WeakMap,pf=new WeakMap,Ol=new WeakMap,Nl=new WeakMap,to=new WeakMap,Mi=new WeakMap,Ll=new WeakMap,mf=new WeakMap,gf=new WeakMap,ca=new WeakMap,eo=new WeakMap,wn=new WeakMap,no=new WeakMap,Il=new WeakMap,yf=new WeakMap,bt=new WeakMap,Pl=new WeakMap,Ae=new WeakSet,j_=function(){return c(this,Mi).size!==0?c(this,Mi).values():c(this,bt).getEditors(this.pageIndex)},HP=function(t){c(this,bt).unselectAll();const{target:e}=t;if(e===c(this,wn).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&c(this,wn).div.contains(e)){const{isMac:n}=gn.platform;if(t.button!==0||t.ctrlKey&&n)return;c(this,bt).showAllEditors("highlight",!0,!0),c(this,wn).div.classList.add("free"),this.toggleDrawing(),av.startHighlighting(this,c(this,bt).direction==="ltr",{target:c(this,wn).div,x:t.x,y:t.y}),c(this,wn).div.addEventListener("pointerup",()=>{c(this,wn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,bt)._signal}),t.preventDefault()}},Ea=function(){return c(Zs,Pl).get(c(this,bt).getMode())},G_=function(t){const e=c(this,Ae,Ea);return e?new e.prototype.constructor(t):null},Y_=function(){const{x:t,y:e,width:n,height:r}=this.boundingClientRect,o=Math.max(0,t),u=Math.max(0,e),h=Math.min(window.innerWidth,t+n),f=Math.min(window.innerHeight,e+r),p=(o+h)/2-t,m=(u+f)/2-e,[y,b]=this.viewport.rotation%180===0?[p,m]:[m,p];return{offsetX:y,offsetY:b}},kb=function(){for(const t of c(this,Mi).values())t.isEmpty()&&t.remove()},$(Zs,"_initialized",!1),_(Zs,Pl,new Map([T_,L_,H_,av,F_].map(t=>[t._editorType,t])));let z_=Zs;var ua,si,Du,ry,wv,VP,Wa,q_,zP,K_;const dn=class dn{constructor(){_(this,Wa);_(this,ua,null);_(this,si,new Map);_(this,Du,new Map)}setParent(t){if(!c(this,ua)){E(this,ua,t);return}if(c(this,ua)!==t){if(c(this,si).size>0)for(const e of c(this,si).values())e.remove(),t.append(e);E(this,ua,t)}}static get _svgFactory(){return Dt(this,"_svgFactory",new iv)}draw(t,e=!1,n=!1){const r=un(dn,ry)._++,o=D(this,Wa,q_).call(this),u=dn._svgFactory.createElement("defs");o.append(u);const h=dn._svgFactory.createElement("path");u.append(h);const f=`path_${r}`;h.setAttribute("id",f),h.setAttribute("vector-effect","non-scaling-stroke"),e&&c(this,Du).set(r,h);const p=n?D(this,Wa,zP).call(this,u,f):null,m=dn._svgFactory.createElement("use");return o.append(m),m.setAttribute("href",`#${f}`),this.updateProperties(o,t),c(this,si).set(r,o),{id:r,clipPathId:`url(#${p})`}}drawOutline(t,e){const n=un(dn,ry)._++,r=D(this,Wa,q_).call(this),o=dn._svgFactory.createElement("defs");r.append(o);const u=dn._svgFactory.createElement("path");o.append(u);const h=`path_${n}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke");let f;if(e){const y=dn._svgFactory.createElement("mask");o.append(y),f=`mask_${n}`,y.setAttribute("id",f),y.setAttribute("maskUnits","objectBoundingBox");const b=dn._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const A=dn._svgFactory.createElement("use");y.append(A),A.setAttribute("href",`#${h}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const p=dn._svgFactory.createElement("use");r.append(p),p.setAttribute("href",`#${h}`),f&&p.setAttribute("mask",`url(#${f})`);const m=p.cloneNode();return r.append(m),p.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(r,t),c(this,si).set(n,r),n}finalizeDraw(t,e){c(this,Du).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var f;if(!e)return;const{root:n,bbox:r,rootClass:o,path:u}=e,h=typeof t=="number"?c(this,si).get(t):t;if(h){if(n&&D(this,Wa,K_).call(this,h,n),r&&D(f=dn,wv,VP).call(f,h,r),o){const{classList:p}=h;for(const[m,y]of Object.entries(o))p.toggle(m,y)}if(u){const m=h.firstElementChild.firstElementChild;D(this,Wa,K_).call(this,m,u)}}}updateParent(t,e){if(e===this)return;const n=c(this,si).get(t);n&&(c(e,ua).append(n),c(this,si).delete(t),c(e,si).set(t,n))}remove(t){c(this,Du).delete(t),c(this,ua)!==null&&(c(this,si).get(t).remove(),c(this,si).delete(t))}destroy(){E(this,ua,null);for(const t of c(this,si).values())t.remove();c(this,si).clear(),c(this,Du).clear()}};ua=new WeakMap,si=new WeakMap,Du=new WeakMap,ry=new WeakMap,wv=new WeakSet,VP=function(t,[e,n,r,o]){const{style:u}=t;u.top=`${100*n}%`,u.left=`${100*e}%`,u.width=`${100*r}%`,u.height=`${100*o}%`},Wa=new WeakSet,q_=function(){const t=dn._svgFactory.create(1,1,!0);return c(this,ua).append(t),t.setAttribute("aria-hidden",!0),t},zP=function(t,e){const n=dn._svgFactory.createElement("clipPath");t.append(n);const r=`clip_${e}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const o=dn._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),r},K_=function(t,e){for(const[n,r]of Object.entries(e))r===null?t.removeAttribute(n):t.setAttribute(n,r)},_(dn,wv),_(dn,ry,0);let X_=dn;globalThis._pdfjsTestingUtils={HighlightOutliner:w_};globalThis.pdfjsLib={AbortException:Ul,AnnotationEditorLayer:z_,AnnotationEditorParamsType:Xt,AnnotationEditorType:Ot,AnnotationEditorUIManager:Ou,AnnotationLayer:E_,AnnotationMode:Vo,AnnotationType:an,applyOpacity:Jz,build:r5,ColorPicker:ev,createValidAbsoluteUrl:AI,CSSConstants:Zz,DOMSVGFactory:iv,DrawLayer:X_,FeatureTest:gn,fetchData:hy,findContrastColor:tj,getDocument:F2,getFilenameFromUrl:Xz,getPdfFilenameFromUrl:qz,getRGB:fy,getUuid:SI,getXfaPageViewport:$z,GlobalWorkerOptions:Ya,ImageKind:ib,InvalidPDFException:ET,isDataScheme:kv,isPdfFile:O1,isValidExplicitDest:hj,MathClamp:Un,noContextMenu:Ys,normalizeUnicode:Gz,OPS:lm,OutputScale:Ka,PagesMapper:um,PasswordResponses:Iz,PDFDataRangeTransport:H2,PDFDateString:$b,PDFWorker:dm,PermissionFlag:Lz,PixelsPerInch:Fl,RenderingCancelledException:R1,renderRichText:_I,ResponseException:Kb,setLayerDimensions:Ru,shadow:Dt,SignatureExtractor:io,stopEvent:Xe,SupportedImageMimeTypes:TT,TextLayer:hm,TouchManager:Qb,updateUrlHash:EI,Util:ot,VerbosityLevel:Lv,version:a5,XfaLayer:TI};const R5="/assets/pdf.worker-BA9kU3Pw.mjs";Ya.workerSrc=R5;function O5(){const s="hannahfreue",[t,e]=st.useState([]),[n,r]=st.useState(""),[o,u]=st.useState("START"),[h,f]=st.useState(0),[p,m]=st.useState(0),[y,b]=st.useState(null),[A,S]=st.useState(!1),[w,x]=st.useState(null),[C,O]=st.useState(!1),[M,N]=st.useState(null),[L,I]=st.useState(!1),[k,j]=st.useState(5),[W,nt]=st.useState(""),[et,ht]=st.useState(!1),[mt,gt]=st.useState([]),[vt,F]=st.useState(null),[X,it]=st.useState(!1),[dt,Tt]=st.useState(null);st.useEffect(()=>{if(o!=="START")return;const xt=Nt=>{Nt.key.length===1&&nt(Ut=>{const Ne=(Ut+Nt.key.toLowerCase()).slice(-s.length);return Ne.includes(s)?(ht(!0),""):Ne})};return window.addEventListener("keydown",xt),()=>window.removeEventListener("keydown",xt)},[o]);const B=t[h],q=xt=>{try{if(!Array.isArray(xt))throw new Error("JSON must be an array of questions");if(!xt.every(Ut=>typeof Ut.topic=="string"&&typeof Ut.q=="string"&&Array.isArray(Ut.a)&&Ut.a.length>0&&typeof Ut.correct=="number"&&Ut.correct>=0&&Ut.correct<Ut.a.length))throw new Error("Invalid question format. Each question must have topic, q, a (non-empty array), and correct (valid index).");return e(xt),N(null),!0}catch(Nt){return N(Nt instanceof Error?Nt.message:"Invalid data format"),!1}},tt=async xt=>{const Nt=await xt.arrayBuffer(),Ut=await F2({data:Nt}).promise;let Ne="";for(let di=1;di<=Ut.numPages;di++){const _f=(await(await Ut.getPage(di)).getTextContent()).items.map(wf=>wf.str).join(" ");Ne+=_f+`
`}return Ne},at=async xt=>{var Ut;const Nt=(Ut=xt.target.files)==null?void 0:Ut[0];if(Nt){I(!0),N(null);try{const Ne=await tt(Nt),di=await Oz(Ne,k);e(di)}catch(Ne){N("Failed to process PDF or generate questions."),console.error(Ne)}finally{I(!1)}}},lt=()=>{try{const xt=JSON.parse(n);q(xt)}catch{N("Failed to parse pasted JSON text")}},At=()=>{t.length!==0&&(u("QUIZ"),f(0),m(0),b(null),S(!1),x(null),gt([]),F(null),Tt(null))},Et=xt=>{if(A)return;b(xt),S(!0);const Nt=xt===B.correct;Nt&&m(Ne=>Ne+1);const Ut={question:B,selectedIdx:xt,isCorrect:Nt};gt(Ne=>[...Ne,Ut])},qe=()=>{if(A)return;const xt={question:B,selectedIdx:null,isCorrect:!1};gt(Nt=>[...Nt,xt]),h<t.length-1?(f(Nt=>Nt+1),b(null),S(!1),x(null)):Zn()},le=async(xt,Nt)=>{O(!0);const Ut=await Rz({question:xt.q,selectedAnswer:Nt!==null?xt.a[Nt]:"Skipped",correctAnswer:xt.a[xt.correct],isCorrect:Nt===xt.correct,topic:xt.topic});x(Ut),O(!1)},Ni=()=>{h<t.length-1?(f(xt=>xt+1),b(null),S(!1),x(null)):Zn()},Zn=async()=>{u("END"),it(!0);const xt=await Nz(mt);F(xt),it(!1)};return Y.jsxs("div",{className:"min-h-screen bg-neutral-50 text-neutral-900 font-sans selection:bg-indigo-100",children:[Y.jsx("header",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-neutral-200 px-6 py-4",children:Y.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg",children:Y.jsx(vR,{className:"text-white w-6 h-6"})}),Y.jsxs("h1",{className:"text-xl font-bold tracking-tight text-neutral-800",children:["Test ",Y.jsx("span",{className:"text-indigo-600",children:"Master"})]})]}),o==="QUIZ"&&Y.jsxs("div",{className:"flex items-center gap-4",children:[Y.jsxs("div",{className:"text-sm font-medium text-neutral-500",children:["Question ",h+1," of ",t.length]}),Y.jsx("div",{className:"h-2 w-32 bg-neutral-100 rounded-full overflow-hidden",children:Y.jsx(ko.div,{className:"h-full bg-indigo-600",initial:{width:0},animate:{width:`${(h+1)/t.length*100}%`}})})]})]})}),Y.jsx("main",{className:"max-w-5xl mx-auto px-6 py-12",children:Y.jsxs(SS,{mode:"wait",children:[o==="START"&&Y.jsxs(ko.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-12",children:[Y.jsxs("div",{className:"space-y-4",children:[Y.jsxs("h2",{className:"text-5xl font-extrabold tracking-tight text-neutral-900 leading-tight",children:["The Ultimate ",Y.jsx("span",{className:"text-indigo-600",children:"Study Companion"})]}),Y.jsx("p",{className:"text-xl text-neutral-600 max-w-xl mx-auto",children:"Generate quizzes from PDFs, upload JSON, or paste text. Get deep AI analysis of your performance."})]}),Y.jsx("div",{className:"max-w-md mx-auto w-full",children:Y.jsxs("div",{className:"w-full p-8 bg-white border border-neutral-200 rounded-[2rem] shadow-sm space-y-6",children:[Y.jsxs("div",{className:"flex items-center gap-2 text-neutral-600",children:[Y.jsx(N4,{className:"w-6 h-6"}),Y.jsx("span",{className:"font-bold text-sm uppercase tracking-wider",children:"Generate from PDF"})]}),Y.jsxs("div",{className:"space-y-2 text-left",children:[Y.jsx("label",{className:"text-xs font-bold text-neutral-400 uppercase ml-1",children:"Question Count"}),Y.jsx("input",{type:"number",value:k,onChange:xt=>j(Number(xt.target.value)),className:"w-full p-4 bg-neutral-50 border border-neutral-200 rounded-2xl text-lg font-medium focus:ring-2 focus:ring-indigo-500 outline-none transition-all",min:"1",max:"20"})]}),Y.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-48 border-2 border-neutral-200 border-dashed rounded-[2rem] cursor-pointer hover:bg-neutral-50 transition-colors group",children:[L?Y.jsxs("div",{className:"flex flex-col items-center",children:[Y.jsx("div",{className:"w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mb-4"}),Y.jsx("p",{className:"text-sm font-medium text-neutral-500",children:"Generating Questions..."})]}):Y.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[Y.jsx("div",{className:"bg-neutral-100 p-4 rounded-2xl mb-4 group-hover:bg-indigo-50 transition-colors",children:Y.jsx(j4,{className:"w-8 h-8 text-neutral-400 group-hover:text-indigo-600 transition-colors"})}),Y.jsx("p",{className:"text-lg text-neutral-500 font-bold",children:"Upload Study PDF"}),Y.jsx("p",{className:"text-sm text-neutral-400",children:"PDF will be analyzed by AI"})]}),Y.jsx("input",{type:"file",className:"hidden",accept:".pdf",onChange:at,disabled:L})]}),t.length>0&&!M&&Y.jsxs("div",{className:"flex items-center gap-2 p-4 bg-emerald-50 text-emerald-600 rounded-2xl text-sm font-bold",children:[Y.jsx(MS,{className:"w-5 h-5 shrink-0"}),t.length," Questions Ready"]})]})}),M&&Y.jsxs("div",{className:"max-w-md mx-auto flex items-center gap-2 p-4 bg-rose-50 text-rose-600 rounded-2xl text-sm font-medium",children:[Y.jsx(x4,{className:"w-5 h-5 shrink-0"}),M]}),Y.jsxs("button",{onClick:At,disabled:t.length===0,className:"group relative inline-flex items-center justify-center gap-3 bg-neutral-900 text-white px-16 py-6 rounded-[2rem] font-bold text-2xl hover:bg-indigo-600 disabled:bg-neutral-200 disabled:cursor-not-allowed transition-all shadow-2xl hover:shadow-indigo-200",children:["Start Test",Y.jsx(AR,{className:"w-8 h-8 group-hover:translate-x-1 transition-transform"})]}),Y.jsx(SS,{children:et&&Y.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 bg-black/40 backdrop-blur-sm",children:Y.jsx(ko.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"w-full max-w-2xl bg-white rounded-[2.5rem] shadow-2xl overflow-hidden",children:Y.jsxs("div",{className:"p-8 space-y-6",children:[Y.jsxs("div",{className:"flex items-center justify-between",children:[Y.jsxs("div",{className:"flex items-center gap-3 text-neutral-800",children:[Y.jsx("div",{className:"bg-indigo-100 p-2 rounded-xl",children:Y.jsx(R4,{className:"w-6 h-6 text-indigo-600"})}),Y.jsx("h3",{className:"text-2xl font-bold",children:"Developer JSON Paste"})]}),Y.jsx("button",{onClick:()=>ht(!1),className:"text-neutral-400 hover:text-neutral-600 font-bold",children:"Close"})]}),Y.jsxs("div",{className:"space-y-4",children:[Y.jsx("textarea",{value:n,onChange:xt=>r(xt.target.value),placeholder:'[{"topic": "...", "q": "...", "a": ["..."], "correct": 0}]',className:"w-full h-64 p-6 bg-neutral-50 border border-neutral-200 rounded-3xl font-mono text-xs focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none resize-none"}),Y.jsxs("div",{className:"flex items-center justify-between",children:[Y.jsx("p",{className:"text-xs text-neutral-400",children:"Format: Array of Question objects"}),Y.jsx("button",{onClick:()=>{lt(),M||ht(!1)},className:"bg-indigo-600 text-white px-8 py-3 rounded-2xl font-bold hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-200",children:"Apply Changes"})]})]})]})})})})]},"start"),o==="QUIZ"&&t.length>0&&Y.jsxs(ko.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"max-w-3xl mx-auto space-y-8",children:[Y.jsxs("div",{className:"flex justify-between items-start",children:[Y.jsxs("div",{className:"space-y-2",children:[Y.jsx("span",{className:"inline-block px-3 py-1 bg-indigo-50 text-indigo-700 text-xs font-bold uppercase tracking-widest rounded-full",children:B.topic}),Y.jsx("h3",{className:"text-3xl font-bold text-neutral-900 leading-tight",children:B.q})]}),!A&&Y.jsxs("button",{onClick:qe,className:"flex items-center gap-1 text-neutral-400 hover:text-indigo-600 font-bold text-sm transition-colors",children:["Skip ",Y.jsx(U4,{className:"w-4 h-4"})]})]}),Y.jsx("div",{className:"grid gap-4",children:B.a.map((xt,Nt)=>{const Ut=Nt===B.correct,Ne=y===Nt;let di="border-neutral-200 hover:border-indigo-300 hover:bg-indigo-50/50";return A&&(Ut?di="border-emerald-500 bg-emerald-50 text-emerald-900":Ne?di="border-rose-500 bg-rose-50 text-rose-900":di="border-neutral-100 opacity-50 grayscale"),Y.jsxs("button",{disabled:A,onClick:()=>Et(Nt),className:`group relative w-full text-left p-6 rounded-2xl border-2 transition-all duration-300 flex items-center justify-between ${di}`,children:[Y.jsx("span",{className:"text-lg font-medium",children:xt}),A&&Ut&&Y.jsx(MS,{className:"text-emerald-600 w-6 h-6"}),A&&Ne&&!Ut&&Y.jsx(ER,{className:"text-rose-600 w-6 h-6"})]},Nt)})}),A&&Y.jsxs(ko.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-6",children:[Y.jsxs("div",{className:"bg-white border border-neutral-200 rounded-3xl p-8 shadow-sm relative overflow-hidden",children:[Y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsx(RS,{className:"w-5 h-5 text-indigo-600"}),Y.jsx("h4",{className:"text-sm font-bold uppercase tracking-widest text-indigo-600",children:"AI Insights"})]}),!w&&Y.jsx("button",{onClick:()=>le(B,y),disabled:C,className:"text-xs font-bold bg-indigo-600 text-white px-4 py-2 rounded-full hover:bg-indigo-700 transition-all disabled:opacity-50",children:C?"Thinking...":"Get AI Explanation"})]}),w&&Y.jsx("p",{className:"text-lg leading-relaxed text-neutral-700 animate-fade-in",children:w})]}),Y.jsxs("button",{onClick:Ni,className:"w-full bg-neutral-900 text-white py-5 rounded-2xl font-bold text-xl hover:bg-indigo-600 transition-all flex items-center justify-center gap-2 shadow-lg",children:[h===t.length-1?"Finish Test":"Next Question",Y.jsx(AR,{className:"w-6 h-6"})]})]})]},"quiz"),o==="END"&&Y.jsxs(ko.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-12",children:[Y.jsxs("div",{className:"text-center space-y-6",children:[Y.jsxs("div",{className:"relative inline-block",children:[Y.jsx(V4,{className:"w-24 h-24 text-amber-400 mx-auto"}),Y.jsx(ko.div,{className:"absolute inset-0 bg-amber-400/20 blur-3xl rounded-full",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0}})]}),Y.jsxs("div",{className:"space-y-2",children:[Y.jsx("h2",{className:"text-5xl font-black text-neutral-900",children:"Test Complete!"}),Y.jsxs("div",{className:"text-7xl font-black text-indigo-600",children:[Math.round(p/t.length*100),"%"]}),Y.jsxs("p",{className:"text-xl text-neutral-600",children:["Score: ",Y.jsx("span",{className:"font-bold text-neutral-900",children:p})," / ",t.length]})]})]}),Y.jsxs("div",{className:"bg-white border border-neutral-200 rounded-3xl p-8 shadow-sm space-y-4",children:[Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsx(vR,{className:"w-6 h-6 text-indigo-600"}),Y.jsx("h3",{className:"text-xl font-bold",children:"Struggling Topics & Analysis"})]}),X?Y.jsxs("div",{className:"flex items-center gap-3 text-neutral-400 italic",children:[Y.jsx("div",{className:"w-4 h-4 border-2 border-indigo-600 border-t-transparent rounded-full animate-spin"}),"Analyzing your mistakes..."]}):Y.jsx("p",{className:"text-lg text-neutral-700 leading-relaxed",children:vt})]}),Y.jsxs("div",{className:"space-y-6",children:[Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsx(I4,{className:"w-6 h-6 text-neutral-400"}),Y.jsx("h3",{className:"text-xl font-bold",children:"Question Overview"})]}),Y.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:mt.map((xt,Nt)=>Y.jsxs("button",{onClick:()=>{Tt(Nt),x(null)},className:`p-4 rounded-2xl border-2 transition-all text-center font-bold ${dt===Nt?"border-indigo-600 bg-indigo-50 text-indigo-700":xt.selectedIdx===null?"border-neutral-200 bg-neutral-100 text-neutral-400":xt.isCorrect?"border-emerald-200 bg-emerald-50 text-emerald-600":"border-rose-200 bg-rose-50 text-rose-600"}`,children:["Q",Nt+1]},Nt))}),Y.jsx(SS,{mode:"wait",children:dt!==null&&Y.jsxs(ko.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white border border-neutral-200 rounded-3xl p-8 shadow-sm space-y-6",children:[Y.jsxs("div",{className:"flex justify-between items-start",children:[Y.jsxs("div",{className:"space-y-1",children:[Y.jsx("span",{className:"text-xs font-bold text-neutral-400 uppercase tracking-widest",children:mt[dt].question.topic}),Y.jsx("h4",{className:"text-xl font-bold",children:mt[dt].question.q})]}),Y.jsx("div",{className:"flex items-center gap-2",children:mt[dt].selectedIdx===null?Y.jsx("span",{className:"px-3 py-1 bg-neutral-100 text-neutral-500 rounded-full text-xs font-bold",children:"SKIPPED"}):mt[dt].isCorrect?Y.jsx("span",{className:"px-3 py-1 bg-emerald-100 text-emerald-600 rounded-full text-xs font-bold",children:"CORRECT"}):Y.jsx("span",{className:"px-3 py-1 bg-rose-100 text-rose-600 rounded-full text-xs font-bold",children:"INCORRECT"})})]}),Y.jsx("div",{className:"grid gap-3",children:mt[dt].question.a.map((xt,Nt)=>{const Ut=Nt===mt[dt].question.correct,Ne=Nt===mt[dt].selectedIdx;return Y.jsxs("div",{className:`p-4 rounded-xl border-2 flex items-center justify-between ${Ut?"border-emerald-500 bg-emerald-50 text-emerald-900":Ne?"border-rose-500 bg-rose-50 text-rose-900":"border-neutral-100 opacity-50"}`,children:[Y.jsx("span",{className:"font-medium",children:xt}),Ut&&Y.jsx(MS,{className:"w-5 h-5 text-emerald-600"}),Ne&&!Ut&&Y.jsx(ER,{className:"w-5 h-5 text-rose-600"})]},Nt)})}),Y.jsxs("div",{className:"bg-indigo-50/50 rounded-2xl p-6 space-y-4 border border-indigo-100",children:[Y.jsxs("div",{className:"flex items-center justify-between",children:[Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsx(RS,{className:"w-4 h-4 text-indigo-600"}),Y.jsx("span",{className:"text-xs font-bold text-indigo-600 uppercase tracking-widest",children:"AI Explanation"})]}),!w&&Y.jsx("button",{onClick:()=>le(mt[dt].question,mt[dt].selectedIdx),disabled:C,className:"text-xs font-bold bg-indigo-600 text-white px-4 py-2 rounded-full hover:bg-indigo-700 transition-all",children:C?"Thinking...":"Explain This"})]}),w&&Y.jsx("p",{className:"text-neutral-700 leading-relaxed italic",children:w})]})]},dt)})]}),Y.jsx("div",{className:"flex justify-center pt-8",children:Y.jsxs("button",{onClick:()=>u("START"),className:"inline-flex items-center gap-2 bg-neutral-900 text-white px-10 py-5 rounded-2xl font-bold text-xl hover:bg-indigo-600 transition-all shadow-xl",children:[Y.jsx(B4,{className:"w-6 h-6"}),"New Test"]})})]},"end")]})}),Y.jsx("footer",{className:"max-w-4xl mx-auto px-6 py-12 border-t border-neutral-200",children:Y.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6 text-sm text-neutral-400 font-medium",children:[Y.jsxs("div",{className:"flex items-center gap-4",children:[Y.jsxs("div",{className:"flex items-center gap-1",children:[Y.jsx(S4,{className:"w-4 h-4"}),Y.jsx("span",{children:"Multi-Source Questions"})]}),Y.jsxs("div",{className:"flex items-center gap-1",children:[Y.jsx(RS,{className:"w-4 h-4"}),Y.jsx("span",{children:"Gemini Pro Powered"})]})]}),Y.jsx("p",{children:" 2024 Test Master  AI Study Assistant"})]})})]})}SU.createRoot(document.getElementById("root")).render(Y.jsx(st.StrictMode,{children:Y.jsx(O5,{})}));
